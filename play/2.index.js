(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{446:function(e,t,i){"use strict";i.r(t);var o=i(460),n=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);var s=i(531),r=i(30);var l=function(e){i(472),i(473)},c=Object(r.a)(n.a,s.a,s.b,!1,l,"data-v-5dea4c03",null);c.options.__file="demo\\highSpeed\\highSpeed.vue",t.default=c.exports},460:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=x(i(62)),n=x(i(22)),a=x(i(474)),s=x(i(21)),r=x(i(25)),l=x(i(38)),c=x(i(39)),d=x(i(216)),h=x(i(468)),u=i(502),f=i(90),p=i(0),v=x(i(503)),m=x(i(504)),g=i(40),w=i(505),y=i(506),b=x(i(507));function x(e){return e&&e.__esModule?e:{default:e}}var S,M,C,k=h.default.DiamondTwo,T=h.default.Label,L=h.default.BasicLabel,F=h.default.MapTv,E=F.Model,z=F.Utils,j=F.DynamicModel,I=F.Polyline,B=(F.TrafficEvent,F.FlyLineLayer),A=F.AnimationPath,P=(F.trafficLineMesh,F.i3DTileLayer),O=(F.createTripLine,i(508).keys().map((function(e){return e.split(".")[1].substr(1)})).filter((function(e){return"0"===e.split("")[0]}))),R="180.76.60.136:9003";t.default={components:{MapView:d.default},mixins:[b.default],data:function(){return{projectId:1,mapConfig:{compass:!0,control:!1,renderMode:"lod",lodUrl:""+location.origin+location.pathname+"/assets/compress_geosjon/dec.json",lodStyle:w.style,lodDebuggerMode:!0,mode:"SCEME_WITH_GLOW",style:{backgroundColor:1184274,aaMode:0,aaLevel:0}},config:{},serviceConfig:{ip:"219.135.214.196:9001",lampsPath:"/v2x/platform/lamp/crossinfo/gis",signalPath:"/v2x/platform/lamps",singleCarPath:"/v2x/platform/vehicle",ssl:!0,tokenUrl:"/v2x/platform/auth/user/login",trafficPath:"/v2x/platform/ws/perception"},fonts:w.fonts,flowObj:null,getRealDataStatus:!0,etcLongmenjia:[{name:"17493454",position:new p.Vector3(415984.66,4337280.51,1.5),speeds:[(new p.Vector3).subVectors(new p.Vector3(416039.55,4337311.9,0),new p.Vector3(415992.05,4337273.42,0)).normalize(),(new p.Vector3).subVectors(new p.Vector3(415942.68,4337232.57,0),new p.Vector3(415990.08,4337271.81,0)).normalize()]},{name:"17493455",position:new p.Vector3(415883.91,4337167.74,1.5),speeds:[(new p.Vector3).subVectors(new p.Vector3(415923.96,4337216.86,0),new p.Vector3(415876.65,4337176.52,0)).normalize(),(new p.Vector3).subVectors(new p.Vector3(415828.77,4337134.79,0),new p.Vector3(415875.27,4337175.36,0)).normalize()]}],photoLayerStatus:!1,pointStyle:""}},watch:{flowObj:function(e,t){"carInside"===t&&(this.view.isShowcarInside=!1)}},created:function(){this.homeViewParams=[116.1208214,38.9255118,18213.5397647,0,-.4632834],this.showViewParams=[110.0121592,39.1682684,118.35277,143.9642133,-.4209167,0]},mounted:function(){var e=this;this.radarScan=[],this.deviceLabelMap={},this.deviceEventList=[],this.hasModelList=[],this.carView={yaw:2.347,pitch:-.25,height:7},this.plantView={yaw:-.677,pitch:-.611,height:100},this.carInsideView={yaw:2.27734375,pitch:0,height:4},this.flowObj=null,this.overViewStatus=!0,window.addEventListener("keydown",(function(t){if(t&&t.ctrlKey){t.preventDefault();var i=t.charCode||t.keyCode;e.change(i-48)}}))},methods:{zoomToHome:function(){this.map.animationTo(this.homeViewParams,3e3,!1)},zoomToScene:function(){this.map.animationTo(this.showViewParams,3e3,!1)},trafficInit:(C=(0,c.default)(l.default.mark((function e(t){var i,o,n,a,s=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.view=this.$refs.view2,this.map=this.view.$refs.map,this.Map=this.map.Map,this.Map.viewer.scene.view.maxRadius=1e5,this.Map.viewer.scene.view.minRadius=10,this.view.betterRenderConfig={delayDisappear:!1,removeShake:!0,rectify:!1,insertData:!1},this.Map.zoneConfig.xiongan=50,this.Map.viewer.setExposure(1),this.lodLayer=t,this.lodLayer.position.z=-10,this.zoomToHome(),this.view.setServicesConfig({ip:R,ssl:!1}),this.view.addActiveServeLayer(R),e.next=15,this.view.getModelList();case 15:i=e.sent,this.roadList=[],o=i.filter((function(e){return e.onlineUrl||e.testUrl})).map((function(e){e.fileName.startsWith("0105")&&s.roadList.push(e.fileName.split(".")[0]);var t=e.fileName;return e.onlineUrl,{url:e.testUrl,fileName:t}})),n=O.concat(["newbus","newcar","pedestrian_man_animate","pedestrian_woman_animate","trafficcone","newtruck","newtricycle","newmotorcycle"]),a={path:"./assets/model/",names:n,animateNames:[],commonPath:"https://mapdata.bj.bcebos.com/model/common/",commonNames:[],bosModelList:o},this.view.loadModels(a).then((function(){s.view.connectDeviceStatus(R),s.getDeviceListByArea(116.012159,39.168268),s.view.setLod(500);var e=s.Map.viewer.scene.basemap;e.position.set(e.position.x,e.position.y,.8),s.map.addGetObj([e]),s.view.addEditor2Layer("./assets/model/"),s.view.editor2.setDate(m.default),s.view.editor2.init(),s.view.editor2.addLodText([1,2]),s.view.editor2.initDrectionalLight(414318.07,4335581.29,.6),s.createFence(),s.addInstallations(),s.addAreaList(),s.initRadarScan(s.Map.viewer,s.etcLongmenjia),s.JXLine=[],s.initJX(),s.initPhotogrammetry(),s.mockCar(s.Map.viewer),s.Map.viewer.vRenderer.bloomPass.strength=1.5,s.createCloud(s.Map.viewer);var t=s.view.editor2.addPlane({color:"#0E2A46",opacity:1,offset:[413983.34,4335185.46,-100]});s.Map.viewer.scene.addModel(t),s.view.addSkyBox("./assets/image/SkyBox/blue/"),s.isSnow=!1,s.nightStatus=!1,s.mockBuildLabel(),s.addExpresswayIds(),s.grass=s.Map.viewer.scene.getObjectByName("010511"),s.Map.viewer.setExposure(1),s.addCameraMeshs([415992.15784807305,4337275.010227057,12],[416000.65784807305,4337290.510227057,1.1]),s.addCameraMeshs([415888.91454316635,4337160.737156659,12],[415880.91454316635,4337148.737156659,1.1]),s.navigation(),s.point=new p.Vector3(s.Map.viewer.scene.scene.position.x,s.Map.viewer.scene.scene.position.y,s.Map.viewer.scene.scene.position.z),s.pointArr=[],s.pointArr.push(new p.Vector3(50,0,-35),new p.Vector3(50,0,35),new p.Vector3(-50,0,35),new p.Vector3(-50,0,-35));var i=z.createFence(s.pointArr,{isBloom:!0,imgUrl1:"./assets/image/build6.png"});i.position.set(413740.92,4335246.61,0),i.rotation.x=p.Math.degToRad(90),i.rotation.y=p.Math.degToRad(138),i.scale.set(.6,1,.6),s.Map.viewer.scene.addAnimateObject(i);var o=z.createFence(s.pointArr,{imgUrl1:"./assets/image/build4.png",height:50});o.position.set(413740.92,4335246.61,0),o.rotation.x=p.Math.degToRad(90),o.rotation.y=p.Math.degToRad(138),o.scale.set(.9,.9,.9),s.Map.viewer.scene.addModel(o);var n=z.createFence(s.pointArr,{depthTest:!0,imgUrl2:"./assets/image/build1.png"});n.position.set(413740.92,4335246.61,0),n.rotation.x=p.Math.degToRad(90),n.rotation.y=p.Math.degToRad(138),n.scale.set(1,.5,1),s.Map.viewer.scene.addAnimateObject(n),(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/line.geojson").then((function(e){var t=e.features,i=z.json2line(t,{color:"#fff",width:2,offset:[0,0,0]});i.material.fog=!0,s.Map.viewer.scene.addBlurObject(i)})),s.view.drawConstructionArea({startstake:"K81+110",endstake:"K81+180",direction:1,lanelist:[1,2,3]},{lineColor:["#A56F35","#FF782B","#FF7928"],map:"https://mapdata.bj.bcebos.com/images/common/construction-back.png",extraZ:.2})}));case 21:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)}),addExpresswayIds:function(){var e=this;this.ExpresswayIds=[[419371.32,4338939.99],[427909.25,4352929.18],[427055.53,4347816.53]].map((function(t){return e.creatExpresswayId("S3601",t)}))},addAreaList:function(){var e=this;this.LodAreas=[],(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/beijing.geojson").then((function(t){var i=t.features,o=z.json2building(i,{topColor:"#00757C",color:"#00757C",offset:[0,0,1e3],height:1e3,outline:!0,outlineColor:"#008991",opacity:.4});e.Map.viewer.scene.addObject(o.building),e.LodAreas.push(o.building)})),(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/tianjin.geojson").then((function(t){var i=t.features,o=z.json2building(i,{topColor:"#4987ff",color:"#4987ff",offset:[0,0,1e3],height:1e3,outline:!0,outlineColor:"#2f61c2",opacity:.25});e.Map.viewer.scene.addObject(o.building),e.LodAreas.push(o.building)})),(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/xiongan.geojson").then((function(t){var i=t.features,o=z.json2building(i,{topColor:"#51c783",color:"#51c783",offset:[0,0,1e3],height:1e3,outline:!0,outlineColor:"#44ad71",opacity:.25});e.Map.viewer.scene.addObject(o.building),e.LodAreas.push(o.building)})),(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/beijingline.geojson").then((function(t){var i=t.features,o=z.json2line(i,{color:"#A5FEFF",offset:[0,0,1001],width:2,opacity:.6});e.Map.viewer.scene.addMap(o),e.LodAreas.push(o)})),(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/tianjinline.geojson").then((function(t){var i=t.features,o=z.json2line(i,{color:"#A5CBFF",offset:[0,0,1001],width:2,opacity:.6});e.Map.viewer.scene.addMap(o),e.LodAreas.push(o)})),(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/xionganline.geojson").then((function(t){var i=t.features,o=z.json2line(i,{color:"#84FF99",offset:[0,0,1001],width:2,opacity:.6});e.Map.viewer.scene.addMap(o),e.LodAreas.push(o)}));var t=(new p.TextureLoader).load("./assets/image/star.PNG"),i=new p.Sprite(new p.SpriteMaterial({map:t,sizeAttenuation:!1,transparent:!1,depthWrite:!0,alphaTest:.1,fog:!0}));i.center.set(0,0),i.scale.set(.05,.05,.05),i.position.set(439760.56,4408760.75,1500),this.Map.viewer.scene.addObject(i)},addInstallations:function(){var e=this;this.tollStationLabels=w.tollStation.map((function(t){var i=(0,r.default)(t.coordinates,2),o=i[0],n=i[1],a=e.view.createFlagLabel({url:"./assets/image/icon.png",label:t.name,miniLabel:t.distance});return a.position.set(o,n,1),a.maxScale=1e3,a.visible=!0,a.addEventListener("mouseup",(function(){var t=e.Map.transformUTMToWGS84({x:o-300,y:n-300}),i=t.x,a=t.y;e.map.animationTo([i,a,100,0,-.4632834],1e3,!1)})),a})),this.zhichaoLabels=w.zhichaoList.map((function(t){var i=(0,r.default)(t.coordinates,2),o=i[0],n=i[1],a=e.view.createFlagLabel({url:"./assets/image/icon1.png",label:t.name,miniLabel:t.distance});return a.position.set(o,n,1),a.maxScale=1e3,a.visible=!1,a})),this.guanyangLabels=w.guanyangList.map((function(t){var i=(0,r.default)(t.coordinates,2),o=i[0],n=i[1],a=e.view.createFlagLabel({url:"./assets/image/icon2.png",label:t.name,miniLabel:t.distance});return a.position.set(o,n,1),a.maxScale=1e3,a.visible=!1,a})),this.installationsMap={2:this.tollStationLabels,5:this.zhichaoLabels,6:this.guanyangLabels}},createContruction:function(){var e=this;if(this.contructionStatus=!this.contructionStatus,this.view.constructionMap)this.changeContructionStatus();else{var t=this.Map.viewer.scene.cameraP.position,i=t.x+this.Map.viewer.scene.rtcPoint.x,o=t.y+this.Map.viewer.scene.rtcPoint.y;this.view.setConstruction({point:{x:i,y:o},radius:1500,coordtype:"UTM",zone:50},this.contructionStatus).then((function(){e.constructionTime=(new Date).getTime()}))}},createExpressRoadContruction:function(){var e=this;(0,g.get)(""+location.origin+location.pathname+"assets/json/jingxiong/allroadConditions.geojson").then((function(t){var i=t.features,o=z.json2line(i,{color:new p.Color(.38,1,.305),offset:[0,0,10],width:2,opacity:1});o.name="allroadConditions",e.Map.viewer.scene.addMap(o)}))},updateExpressRoadContruction:function(){var e=this;(0,g.get)(location.origin+"/dataserver/allroadConditions").then((function(t){var i=t.features;if(!(i.length<1)){if(e.expressRoadContruction){for(var o=0;o<e.expressRoadContruction.children.length;o++)e.expressRoadContruction.children[o].dispose&&e.expressRoadContruction.children[o].dispose(),e.expressRoadContruction.remove(e.expressRoadContruction.children[o]);e.expressRoadContruction.children=[]}else e.expressRoadContruction=new p.Group,e.expressRoadContruction.position.z=20,e.Map.viewer.scene.addMap(e.expressRoadContruction);for(var n=0;n<i.length;n++){var a=i[n],s=(0,y.getColorByState)(a.properties.status);e.expressRoadContruction.add(new I({vertices:a.geometry.coordinates,color:new p.Color(s[0],s[1],s[2]),width:4}))}}}))},updateLMJ:function(){this.lmjMock=!this.lmjMock;var e=void 0;e=this.lmjMock?[[11,"./assets/image/电子换屏1-2.jpg"],[12,"./assets/image/电子换屏2-1.jpg"]]:[[11,"./assets/image/电子换屏2-1.jpg"],[12,"./assets/image/电子换屏1-2.jpg"]],this.map.animationTo([116.036792,39.185921,10,2.190163934/(Math.PI/180),-.3493316103725345,0],1e3,!0),this.view.editor2.setMaterialMap("17493538",e)},addEvent:function(){var e=this,t=_.cloneDeep(w.eventLabelConfig),i=t.content,o=t.size,n=t.bg,a=3*o.width,s=3*o.height,r=p.MathUtils.ceilPowerOfTwo(a),l={width:r,height:r*(s/a),factor:{x:r/a,y:r/a}};this.view.createLabelCanvas(i,n,l,3,"").then((function(t){var i=t.canvas,o=t.textCanvas,n=new T({name:"event",mainView:i,sizeAttenuation:!0,factor:l.factor,scaleNum:20,center:{x:.147,y:0}});n.position.set(413983.34,4335185.46,2.6),n.update(o,[0,0,a,s]),n.maxScale=1,e.Map.viewer.scene.addModel(n)}))},mockBuildLabel:function(){var e=new k({sizeAttenuation:!0,height:1,radius:.5,heightSegments:2,activeOption:{height:.2,speed:.05},color:"#1B313D",topOffset:{x:0,y:0,z:1},closeEnded:!1,ringRadius:[.2,.5]});e.position.set(413743.77,4335247.57,30);var t=_.cloneDeep(w.buildLabelConfig),i=t.content,o=t.size,n=t.bg,a=3*o.width,s=3*o.height,r=p.MathUtils.ceilPowerOfTwo(a),l={width:r,height:r*(s/a),factor:{x:r/a,y:r/a}};e.factor=l.factor,this.view.createLabelCanvas(i,n,l,3,"").then((function(t){var i=t.canvas,o=t.textCanvas;e.drawLabel(i,o,5),e.idSprite.scale.set(.1,.1,.1)})),e.maxScale=4,this.Map.viewer.scene.addAnimateObject(e)},addStack:function(e){var t=new k({sizeAttenuation:!0,height:1,radius:.5,heightSegments:2,hasBottom:!0,activeOption:{height:.2,speed:.05},color:"#1B313D",topOffset:{x:0,y:0,z:1},closeEnded:!1,ringRadius:[.2,.5]}),i=_.cloneDeep(w.stackLabelConfig),o=i.content,n=i.size,a=i.bg,r=3*n.width,l=3*n.height;(0,s.default)(e).forEach((function(t){o[t]&&(o[t].text=e[t])}));var c=p.MathUtils.ceilPowerOfTwo(r),d={width:c,height:c*(l/r),factor:{x:c/r,y:c/r}};return t.factor=d.factor,this.view.createLabelCanvas(o,a,d,3,"").then((function(e){var i=e.canvas,o=e.textCanvas;t.drawLabel(i,o)})),t.maxScale=1,this.Map.viewer.scene.addAnimateObject(t),t},initJX:function(){var e=new p.FileLoader;e.setResponseType("json");var t=this;e.load("./assets/json/jingxionggaosu_line.geojson",(function(e){e.features.forEach((function(e){var i=new u.PolylineTripLayer({width:4,color:"#9AFFCF",offset:new p.Vector3(0,0,0)}).setData(e);t.JXLine.push(i),t.Map.viewer.scene.addAnimateObject(i)}));var i=z.json2line(e.features,{width:4,color:"#23CED2",vertexColors:!1,offset:new p.Vector3(0,0,0)});t.Map.viewer.scene.addModel(i),t.JXLine.push(i)}))},initPhotogrammetry:function(){var e=new P({url:"http://13.99.25.64:9003/sz/tileset.json",errorTarget:64,maxDepth:15,offset:[0,0,-13]});this.photoLayer=e,this.Map.viewer.scene.addI3DTileLayer(e);var t=new P({url:"http://13.99.25.64:9003/sznc/tileset.json",errorTarget:64,maxDepth:15,offset:[0,0,-13]});this.photoLayer1=t,this.Map.viewer.scene.addI3DTileLayer(t);var i=new P({url:"http://13.99.25.64:9003/sz-gbd/tileset.json",errorTarget:64,maxDepth:15,offset:[0,0,-13]});this.photoLayer2=i,this.Map.viewer.scene.addI3DTileLayer(i)},showPhoto:function(){this.photoLayerStatus=!this.photoLayerStatus,this.photoLayer.setVisible(this.photoLayerStatus&&!this.overViewStatus)},mockCar:function(e){var t=this;this.spotLight=this.view.editor2.addCarLight();var i=this.view.createCarScanArea(12,12,"./assets/image/hud2-wai.png","./assets/image/hud2-nei.png","./assets/image/hud.png");i.rotation.z=.5*-Math.PI;var o=new p.Group,n=new E({name:"car1",modelUrl:"./assets/model/robotaxi.glb",castShadow:!0,modelType:"car1",rotation:[p.Math.degToRad(0),p.Math.degToRad(180),p.Math.degToRad(225)],isLoadScene:!0,isReceiveShadow:!0,iScastShadow:!0});o.add(n),o.add(i),o.position.set(414439.82,4335702.55,1.5),e.scene.addAnimateObject(o),this.car2=o;var a=new E({name:"car1",modelUrl:"./assets/model/出租车.glb",castShadow:!0,modelType:"car1",rotation:[p.Math.degToRad(0),p.Math.degToRad(0),p.Math.degToRad(315)],isLoadScene:!0,isReceiveShadow:!0,iScastShadow:!0});a.position.set(413993.24,4335201.45,2.5),this.car=a,e.scene.addModel(a);new p.Group;var s=new j({name:"car1",modelUrl:"./assets/model/wurenji01.glb",castShadow:!0,rotation:[p.Math.degToRad(0),p.Math.degToRad(0),p.Math.degToRad(-135)]});s.scale.set(5,5,5),s.position.set(413991.05,4335203.94,30),this.wurenji=s,e.scene.addModel(this.wurenji);var r=new p.Vector3(.681,.731,0),l=new p.Vector3(.136,.1464,0),c=new p.Vector3(-.679,-.733,0);setInterval((function(){t.car2.position.x<413985.86&&(t.car2.position.set(414443.82,4335702.17,2.5),t.car.position.set(413993.24,4335201.45,2.5),t.wurenji.position.set(413991.05,4335203.94,30),t.spotLight.position.set(414443.82,4335702.17,2),"car"===t.flowObj?(t.view.followModelByScene(t.car2,t.carView),t.zoomTo(t.point)):"carInside"===t.flowObj?(t.view.followModelByScene(t.car2,t.carInsideView,-5),t.zoomTo(t.point)):"plant"===t.flowObj&&(t.view.followModelByScene(t.wurenji,t.plantView,-40),t.zoomTo(t.point))),t.car.position.add(l),t.car2.position.add(c),t.wurenji.position.add(r),"car"!==t.flowObj&&"carInside"!==t.flowObj||(t.Map.viewer.scene.scene.position.x-=c.x,t.Map.viewer.scene.scene.position.y-=c.y),t.spotLight.position.add(c),"plant"===t.flowObj&&(t.Map.viewer.scene.scene.position.x-=r.x,t.Map.viewer.scene.scene.position.y-=r.y)}),50)},zoomTo:function(e){this.Map.viewer.scene.scene.position.x=e.x,this.Map.viewer.scene.scene.position.y=e.y,this.Map.viewer.scene.scene.updateMatrix(),this.Map.viewer.scene.scene.updateMatrixWorld(),this.lodLayer.updateMatrix(!0),this.lodLayer.updateMatrixWorld(!0)},clickObj:function(e){var t=this;console.log("点击",e),this.clickObjStatus=!0,this.clickObjStatus&&(clearTimeout(this.clickObjStatus),this.clickObjStatus=null),this.clickObjStatus=setTimeout((function(){t.clickObjStatus=!1}));var i=this.deviceLabelMap[e.modelId];i&&(i.visible=!i.visible)},createCloud:function(e){var t=this.view.createCloud(e,"./assets/image/cloud10.png");t.position.set(414088.22,4335298.52,500),t.visible=!1,e.scene.addAnimateObject(t),this.cloud=t,t.update=function(){this.mesh.rotation.x=e.scene.cameraP.rotation.x,this.rotation.z=e.scene.cameraP.rotation.z}},addCameraMeshs:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.view.createCameraScanArea(e,t,i);this.Map.viewer.scene.addModel(o),o.rotation.z=p.Math.degToRad(-13),this.Map.viewer.scene.addModel(o);var n=o.clone();n.position.set(-6,2,0),o.add(n);var a=n.clone();a.position.set(-10,4,0),o.add(a);var s=n.clone();s.position.set(-14,8,0),o.add(s);var r=n.clone();r.position.set(-17,10,0),o.add(r),o.scale.set(.8,.8,.8),o.position.z-=2.6,o.updateMatrix(),o.updateMatrixWorld()},mockFlyLine:function(e){var t=this;this.fly=new B({extureColor:"#fff",color:"#94FF52",lineWidth:.1,lineWidthA:1,height:5,dashArray:.6,dashRatio:.9,dashOffset:0,step:.01,stepY:!0,isBloom:!1}),e.scene.addAnimateObject(this.fly);var i=new p.Vector3(414202.36,4335437.66,10),o=new p.Vector3(414202.36-i.x,4335437.66-i.y,10),n=new p.Vector3(this.car2.position.x-i.x,this.car2.position.y-i.y,2);this.fly.setData(o,n),this.fly.visible=!1,setInterval((function(){if(t.car2.position.x<414308.2){t.fly.visible=!0;var e=new p.Vector3(414202.36-i.x,4335437.66-i.y,10),o=new p.Vector3(t.car2.position.x-i.x,t.car2.position.y-i.y,2);t.fly.position.set(i.x,i.y,0),t.fly.setData(e,o),t.car2.position.x<414167.19?t.fly.visible=!1:t.fly.visible=!0}}),50)},createRadarScan:function(e,t,i,o){var n=this.view.addRadarScan();n.name=t,n.scale.set(.5,.5,.5),n.position.set(i.x,i.y,1.2),n.rotation.z=p.Math.degToRad(20),n.speed=o[0];var a=n.clone();a.rotation.z=p.Math.degToRad(200),a.position.set(i.x,i.y,1.2),a.speed=o[1],e.scene.addBlurObject(a),e.scene.addBlurObject(n);var s=this.view.editor2.createPulseCircle();s.position.set(i.x,i.y,.8),s.rotation.z=p.Math.degToRad(-90),s.scale.set(.8,.8,.8),s.speed=o[0];var r=s.clone();r.rotation.z=p.Math.degToRad(90),r.speed=o[1],e.scene.addAnimateObject(s),e.scene.addAnimateObject(r),this.radarScan.push([n,a,s,r])},initRadarScan:function(e,t){var i=this;t.forEach((function(t){i.createRadarScan(e,t.name,t.position,t.speeds)})),window.iclock=0,setInterval((function(){window.iclock%120<1?i.radarScan.forEach((function(e,i){e.forEach((function(e,o){e.position.set(t[i].position.x,t[i].position.y,o>1?1:1.5)}))})):i.radarScan.forEach((function(e){e.forEach((function(e){e.position.add(e.speed)}))})),window.iclock+=1}),50)},navigation:function(){var e=this,t=new A([[413954.37,4350648.27,4862.13],[430092.7,4352330.46,5555.1],[418951.06,4341672.44,5555.1],[414037.07,4335551.72,434.69],[413903.15,4335239.23,283.03],[414561.02,4335820.43,98.27],[414416.73,4335667.11,25.13],[414243.17,4335475.73,15.66],[413905.49,4335125.17,16.32]].map((function(e){return(new p.Vector3).fromArray(e)})));t.closed=!1;var i=[0,t.getLength()],o=i[0],n=i[1];this.animatePath=t.animate(o,n,1e3,(function(i){e.Map.viewer.scene.view.position.copy(t.spline.getPoint(i).sub(e.Map.viewer.scene.rtcPoint)),e.Map.viewer.scene.view.updateRealPosition();var o=new p.Vector3(413840.8,4335056.99,4);e.Map.viewer.scene.view.lookAt(o)})),this.animatePath.stop()},start:function(){this.flowObj=null,this.animatePath.start("stop"===this.animationStatus),this.animationStatus=null},pause:function(){this.animatePath.pause(),this.animationStatus="pause"},stop:function(){this.animatePath.pause(),this.animationStatus="stop",this.Map.viewer.scene.view.position.copy(new p.Vector3(413954.37,4350648.27,4862.13).sub(this.Map.viewer.scene.rtcPoint)),this.Map.viewer.scene.view.updateRealPosition();var e=new p.Vector3(413840.8,4335056.99,4);this.Map.viewer.scene.view.lookAt(e)},initEvent:function(e){var t=this.view.addEquipmentEvent({eventImg:"./assets/image/lmj_event.png",sizeAttenuation:!0});t.rotateZ(.775*Math.PI),t.position.copy(e),this.equipmentEvent=t,this.Map.viewer.scene.addModel(t)},lightLmj:function(e){try{this.view.editor2.setMaterialShow("010304",[1,2,3,4,5,11,12],e)}catch(e){console.log(e)}},inCarView:function(){if(this.zoomTo(this.point),this.view.isShowcarInside)this.flowObj=null,this.view.changeControlShow(!0);else{if("carInside"===this.flowObj)return this.flowObj=null,this.view.changeControlShow(!0),!1;this.flowObj="carInside",this.view.changeControlShow(!1),this.view.followModelByScene(this.car2,this.carInsideView,-5)}this.view.isShowcarInside=!this.view.isShowcarInside},setCarView:function(){var e=this.Map.viewer.scene.getObjectByName("雄安");if(this.zoomTo(this.point),"car"===this.flowObj)return this.flowObj=null,this.view.changeControlShow(!0),e.visible=!0,!1;this.flowObj="car",e.visible=!1,this.view.changeControlShow(!1),this.view.followModelByScene(this.car2,this.carView)},setPlantView:function(){if(this.zoomTo(this.point),"plant"===this.flowObj)return this.flowObj=null,this.view.changeControlShow(!0),!1;this.flowObj="plant",this.view.changeControlShow(!1),this.view.followModelByScene(this.wurenji,this.plantView,-40)},showRain:function(){this.isRain=!this.isRain,this.view.showRain(this.isRain)},showfog:function(){this.isFog=!this.isFog,this.view.showFog(this.isFog,{color:"#0E2A46",opacity:1,width:18e4,offset:[461250.55,4339247.388,0]})},showSnow:function(){this.isSnow=!this.isSnow,this.view.showSnow([414196.08,4335442.42,30],this.isSnow)},showCloud:function(){this.cloud.visible=!this.cloud.visible},showNight:function(){this.nightStatus?(this.car2.children[1].layers.disable(1),this.lightLmj(!1),this.nightStatus=!1,this.spotLight.visible=!1,this.view.addSkyBox("./assets/image/SkyBox/blue/")):(this.car2.children[1].layers.enable(1),this.lightLmj(!0),this.nightStatus=!0,this.spotLight.visible=!0,this.view.addSkyBox("./assets/image/SkyBox/night/")),this.view.editor2.openDay(!this.nightStatus)},lights:function(){var e=[];e.push([413833.69,4335084.3]),e.push([413843.19,4335074.83]),e.push([413899.7155384389,4335105.888512521]),e.push([413857.3,4335061.52]),e.push([413872.13,4335047.06]),this.lightStatus=!this.lightStatus,this.view.changeLights(this.lightStatus,e)},controlLightLine:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.guanglanMap?((0,s.default)(this.guanglanMap).forEach((function(t){var i=(0,r.default)(e.guanglanMap[t],2),o=i[0],n=i[1];o.visible=!1,n.visible=!1})),(0,s.default)(this.guanglanLabelMap).forEach((function(t){e.guanglanLabelMap[t].visible=!1}))):(this.guanglanMap={},this.guanglanLabelMap={},(0,g.get)(""+location.origin+location.pathname+"/assets/json/jingxiong/guanglan.geojson").then((function(t){t.features.forEach((function(t){if(t.geometry.coordinates.length>0){var i=[],o=null,n=t.properties.id;t.geometry.coordinates.forEach((function(e,t){0===t&&(o=new p.Vector3(e[0],e[1],0)),i.push(new p.Vector3(e[0]-o.x,e[1]-o.y,0))}));var a=new p.TubeGeometry(new p.CatmullRomCurve3(i),t.geometry.coordinates.length,.06,20,!1),s=(new p.TextureLoader).load("./assets/image/guanglan.png");s.wrapS=p.RepeatWrapping,s.wrapT=p.RepeatWrapping,s.repeat.x=1500;var r=new p.MeshPhongMaterial({color:"#3CFFE7",emissive:"#3CFFE7",alphaMap:s,transparent:!0}),l=new p.Mesh(a,r);l.position.x=o.x,l.position.y=o.y,l.update=function(){this.material.alphaMap.offset.x+=.01};var c=new p.TubeGeometry(new p.CatmullRomCurve3(i),t.geometry.coordinates.length,.05,20,!1),d=new p.MeshPhongMaterial({color:"#000",transparent:!1}),h=new p.Mesh(c,d);h.position.x=o.x,h.position.y=o.y,h.guanglanId=n,e.Map.viewer.scene.addModel(h),e.Map.viewer.scene.addAnimateObject(l),e.guanglanMap[n]=[h,l];var u=new L({scaleNum:10,sizeAttenuation:!0,center:{x:.5,y:0},style:{width:212,height:107,backgroundImage:"./assets/image/guanglan-normal.png"}});u.position.set(l.position.x,l.position.y,2),e.Map.viewer.scene.addModel(u),e.guanglanLabelMap[n]=u}}))})));var i=t?.3:1;this.roadList.forEach((function(t){e.view.editor2.setOpacity(t,i)}))},change:function(e){if(console.log(e),33===e&&this.createContruction(),100===e)try{this.view.editor2.setMaterialMap("010304",["./assets/image/电子换屏1-2.jpg","./assets/image/电子换屏2-1.jpg"])}catch(e){console.log(e)}},toQiScript:function(){var e=this;setTimeout((function(){e.change(6)}),100),setTimeout((function(){e.change(5)}),3e4),setTimeout((function(){e.change(4)}),35e3),setTimeout((function(){e.change(3)}),4e4),setTimeout((function(){e.change(1)}),35e3),setTimeout((function(){e.change(1)}),45e3),setTimeout((function(){e.change(2)}),5e4),setTimeout((function(){e.change(2)}),55e3),setTimeout((function(){e.change(3)}),52e3),setTimeout((function(){e.change(5)}),58e3),setTimeout((function(){e.change(7)}),6e4),setTimeout((function(){e.change(7)}),64e3),setTimeout((function(){e.change(5)}),7e4)},viewChange:function(e,t){var i=this;if(this.focusModel){var o=this.view.getScreenModelCenter(this.focusModel),n=o.x,a=o.y;this.pointStyle="left: "+n+"px; top: "+a+"px"}if(!(t<7)&&this.getRealDataStatus){var s=this.Map.viewer.scene.cameraP.position,r=s.x+this.Map.viewer.scene.rtcPoint.x,l=s.y+this.Map.viewer.scene.rtcPoint.y,c=this.Map.transformUTMToWGS84({x:r,y:l}),d=c.x,h=c.y,u=this.pointArea&&(0,f.pointInArea)(this.pointArea.center,this.pointArea.radius-200,[d,h]);console.log(u),u?(new Date).getTime()-this.constructionTime>6e4&&this.view.setConstruction({point:{x:r,y:l},radius:1500,coordtype:"UTM",zone:50},this.contructionStatus).then((function(){i.constructionTime=(new Date).getTime()})):(this.view.setConstruction({point:{x:r,y:l},radius:1500,coordtype:"UTM",zone:50},this.contructionStatus).then((function(){i.constructionTime=(new Date).getTime()})),this.getDeviceListByArea(d,h),this.view.sendMixParams({x:r,y:l,radius:this.pointArea?this.pointArea.radius:500},"deviceWs"))}},changeContructionStatus:function(){var e=this;(0,s.default)(this.view.constructionMap).forEach((function(t){e.view.constructionMap[t].visible=e.contructionStatus}))},getDeviceListByArea:function(e,t){var i=this;this.pointArea={center:[e,t],radius:500},this.view.getDeviceInfoByArea({x:Number(e.toFixed(6)),y:Number(t.toFixed(6)),radius:500}).then((function(e){i.upDateDevice(e)}))},upDateDevice:(M=(0,c.default)(l.default.mark((function e(t){var i,o,n,r,c,d=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[11,9],o=[],this.hasModelList.forEach((function(e){if(++e.disappearCount>=2){d.view.editor2.disposeModel(e);var t=d.deviceLabelMap[e.modelId];t&&t.warnLabel&&d.Map.viewer.scene.removeModel(t.warnLabel),d.Map.viewer.scene.removeModel(t),delete d.deviceLabelMap[e.modelId]}else o.push(e)})),this.hasModelList=o,n=new a.default,r=t.filter((function(e){return n.set(e.uuid,!0),!(d.hasIdList||[]).includes(e.uuid)})),e.next=8,this.view.editor2.update(r);case 8:c=e.sent,this.hasModelList=this.hasModelList.concat(c),this.hasIdList=this.hasModelList.map((function(e){return e.modelId})),this.hasModelList.forEach((function(e){n.has(e.modelId)&&(e.disappearCount=0)})),r.forEach((function(e){if(19===e.deviceType){e.children.push({deviceName:"路灯",status:e.status,uuid:e.uuid});var t=JSON.parse(e.modelInfo);if(t&&(0,s.default)(t).length){var o=t.switchStatus;d.changeLight(e.uuid,1===o)}}e.children.length&&!i.includes(e.deviceType)&&d.showDeviceInfo(e),9===e.deviceType&&d.showWeatherInfo(e),11===e.deviceType&&d.showChassisInfo(e),[101,103].includes(e.deviceType)&&d.showStationInfo(e.uuid)}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)}),showDeviceInfo:function(e){var t={19:"智慧路灯",100:"龙门架"},i=[],o=[],n=e.children,a=e.x,s=e.y,r=e.stakeNumber,l=e.deviceType,c=e.deviceLocation;n.forEach((function(e){var t=e.status,n=e.deviceName,a=e.value,s=e.uuid;if(2===t)i.push({name:n,id:s});else{var r={name:n,id:s};a&&(r.bigContent=!0,r.label="VIS",r.value=a,r.unit="m"),o.push(r)}}));var d=void 0,h=this.deviceLabelMap[e.uuid];if(h?(d=h,this.createDeviceLabel({id:r,name:t[l],direction:1===c?"北京至雄安方向":"雄安至北京方向"},{warningDevices:i,normalDevices:o},[a,s,15],!0,d)):(d=this.createDeviceLabel({id:r,name:t[l],direction:1===c?"北京至雄安方向":"雄安至北京方向"},{warningDevices:i,normalDevices:o},[a,s,15])).visible=!1,d.deviceInfo=e,h&&h.warnLabel&&this.Map.viewer.scene.removeModel(h.warnLabel),i.length){var u=new L({scaleNum:3,sizeAttenuation:!0,center:{x:1,y:0},style:{width:120,height:120,backgroundImage:"./assets/image/warning-icon.png"}});u.position.set(a,s,15),this.Map.viewer.scene.addModel(u),d.warnLabel=u}this.deviceLabelMap[e.uuid]=d},showWeatherInfo:function(e){var t=e.modelInfo,i=e.x,o=e.y,n=e.deviceLocation,a=e.status;if(t){var s=JSON.parse(t),r=this.deviceLabelMap[e.uuid],l=void 0;if(r?(l=r,this.drawWeatherLabel({name:"气象监测",direction:1===n?"北京至雄安方向":"雄安至北京方向",status:a},s,[e.x,e.y,15],!0,l)):(l=this.drawWeatherLabel({name:"气象监测",direction:1===n?"北京至雄安方向":"雄安至北京方向",status:a},s,[e.x,e.y,15])).visible=!1,l.deviceInfo=e,r&&r.warnLabel&&1===a&&this.Map.viewer.scene.removeModel(r.warnLabel),2===a){var c=new L({scaleNum:3,sizeAttenuation:!0,center:{x:1,y:0},style:{width:120,height:120,backgroundImage:"./assets/image/warning-icon.png"}});c.position.set(i,o,15),this.Map.viewer.scene.addModel(c),l.warnLabel=c}this.deviceLabelMap[e.uuid]=l}},showChassisInfo:function(e){var t=e.modelInfo,i=e.x,o=e.y,n=e.deviceLocation,a=e.status,s=e.stakeNumber;if(t&&"{}"!==t){var r=JSON.parse(t),l=this.deviceLabelMap[e.uuid],c=void 0;if(l?(c=l,this.drawChassisLabel({id:s,name:"机箱信息",direction:1===n?"北京至雄安方向":"雄安至北京方向",status:a},r,[e.x,e.y,15],!0,c)):(c=this.drawChassisLabel({id:s,name:"机箱信息",direction:1===n?"北京至雄安方向":"雄安至北京方向",status:a},r,[e.x,e.y,15])).visible=!1,c.deviceInfo=e,l&&l.warnLabel&&1===a&&this.Map.viewer.scene.removeModel(l.warnLabel),2===a){var d=new L({scaleNum:3,sizeAttenuation:!0,center:{x:1,y:0},style:{width:120,height:120,backgroundImage:"./assets/image/warning-icon.png"}});d.position.set(i,o,7),this.Map.viewer.scene.addModel(d),c.warnLabel=d}this.deviceLabelMap[e.uuid]=c}},showMiniInfo:function(e){var t=e.stakeNumber,i=e.x,o=e.y,n=e.status,a={19:"智慧路灯",100:"龙门架",11:"智慧机箱"},s=this.deviceLabelMap[e.uuid],r=void 0;if(s?(r=s,this.drawSmallLabel(a[e.deviceType],n,t,[i,o,10],!0,r)):r=this.drawSmallLabel(a[e.deviceType],n,t,[i,o,10]),r.deviceInfo=e,s&&s.warnLabel&&1===n&&this.Map.viewer.scene.removeModel(s.warnLabel),2===n){var l=new L({scaleNum:3,sizeAttenuation:!0,center:{x:1,y:0},style:{width:120,height:120,backgroundImage:"./assets/image/warning-icon.png"}});l.position.set(i,o,15),this.Map.viewer.scene.addModel(l),r.warnLabel=l}this.deviceLabelMap[e.uuid]=r},showStationInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10506;this.deviceLabelMap[t]||this.view.getStationInfo({uuid:t}).then((function(i){console.log("StationInfo",i);var o=i.status,n=i.st_se_name,a=i.st_se_type,s=i.stake_number,r=i.longitude,l=i.latitude,c=i.into_lanes,d=i.exit_lanes,h=i.inlet_flow,u=i.outlet_flow,f=i.charging_pile,p=i.parking,v=z.transformWGS84ToUTM({x:r,y:l}),m=v.x,g=v.y,w=[];w=a?[{label:"入口车道",value:c,detail:c,unit:"ETC/MTC"},{label:"出口车道",value:d,detail:d,unit:"ETC/MTC"},{label:"入口车道流量",value:h,unit:"万次/天"},{label:"出口车道流量",value:u,unit:"万次/天"},{label:"开关状态",value:o?"关闭":"正常"}]:[{label:"开关状态",value:o?"关闭":"正常"},{label:"充电桩数",value:f,unit:"个"},{label:"车位数",value:p,unit:"个"},{label:"入口交通流量",value:h,unit:"万次/天"},{label:"出口交通流量",value:u,unit:"万次/天"}];var y=e.drawStationLabel({id:s,name:n,status:1},w,[m,g,15]);e.deviceLabelMap[t]=y}))},levelChange:function(e){var t=this,i=e<7;this.overViewStatus=i,this.grass&&(this.grass.visible=!i),this.photoLayer&&this.photoLayer.setVisible(this.photoLayerStatus&&!i),this.LodAreas.forEach((function(e){e.visible=i})),this.JXLine.forEach((function(e){e.visible=i})),this.tollStationLabels.forEach((function(e){t.TollStationStatus=i,e.visible=i})),this.deviceEventList.forEach((function(e){e.visible=i})),this.ExpresswayIds.forEach((function(e){e.visible=i}))},showTollStation:function(){var e=this;this.TollStationStatus=!this.TollStationStatus,this.tollStationLabels.forEach((function(t){t.visible=e.TollStationStatus}))},showZhichao:function(){var e=this;this.ZhichaoStatus=!this.ZhichaoStatus,this.zhichaoLabels.forEach((function(t){t.visible=e.ZhichaoStatus}))},showGuanyang:function(){var e=this;this.GuanyangStatus=!this.GuanyangStatus,this.guanyangLabels.forEach((function(t){t.visible=e.GuanyangStatus}))},getObj:function(e,t){var i=this;if(this.clickObjStatus)console.log("点击模型");else{var o=t.location,n=o.x-this.Map.viewer.scene.rtcPoint.x,a=o.y-this.Map.viewer.scene.rtcPoint.y;console.log(n,a,this.Map.viewer.scene.rtcPoint);var r=this.Map.transformUTMToWGS84({x:n,y:a}),l=r.x,c=r.y;this.view.getDeviceInfoByXY(Number(l.toFixed(6)),Number(c.toFixed(6))).then((function(e){var t=e[0],o=t.stackNum,r=t.z;if(i.stack){var d=_.cloneDeep(w.stackLabelConfig).content;d.content.text=o,d.x.text=l.toFixed(6),d.y.text=c.toFixed(6),i.stack.updateLabel((0,s.default)(d).map((function(e){return d[e]})))}else i.stack=i.addStack({content:o,x:l.toFixed(6),y:c.toFixed(6)});i.stack.position.set(n,a,r+.02)})).catch((function(){if(i.stack){var e=_.cloneDeep(w.stackLabelConfig).content;e.x.text=l.toFixed(6),e.y.text=c.toFixed(6),i.stack.updateLabel((0,s.default)(e).map((function(t){return e[t]})))}else i.stack=i.addStack({x:l.toFixed(6),y:c.toFixed(6)});i.stack.position.set(n,a,.8)}))}},creatExpresswayId:function(e,t){var i=new L({scaleNum:3,sizeAttenuation:!0,style:{width:44,height:26,backgroundImage:"./assets/image/expressway-back.png"},content:[{textList:[{text:e,fontSize:12,color:"#fff",position:[22,9],textAlign:"center",fontFamily:"DINAlternate-Bold"}]}]}),o=(0,r.default)(t,2),n=o[0],a=o[1];return i.position.set(n,a,2.6),i.maxScale=1e3,this.Map.viewer.scene.addAnimateObject(i),i},showUnderground:function(e){this.shangxingCars&&this.shangxingCars.forEach((function(t){t.visible=!e})),this.xiaxingCars&&this.xiaxingCars.forEach((function(t){t.visible=!e})),this.car.visible=!e,this.car2.visible=!e,this.fenceList&&this.fenceList.forEach((function(t){t.visible=!e})),this.controlLightLine(e)},showFence:function(){this.fenceList.forEach((function(e){e.visible=!e.visible}))},createFence:function(){var e=this;this.fenceList=[],this.view.editor2.initFence("./assets/json/jingxiong/guangdaiL.geojson","./assets/image/fence2.png",{depth:3,color:"#FFB140",side:2,vertexColors:!1},!0).then((function(t){t.forEach((function(e){e.visible=!1})),e.fenceList=e.fenceList.concat(t)})),this.view.editor2.initFence("./assets/json/jingxiong/guangdai.geojson","./assets/image/fence.png",{depth:3,color:"#37ED80",side:2,vertexColors:!1},!1).then((function(t){t.forEach((function(e){e.visible=!1})),e.fenceList=e.fenceList.concat(t)}))},realData:function(){this.getRealDataStatus=!0,this.view.editor2.clear(),this.view.editor2.update(m.default)},mockData:function(){this.getRealDataStatus=!1,this.view.editor2.clear(),this.view.editor2.update(v.default)},goToStack:function(){this.map.animationTo([116.0406299177283,39.18722257468566,16.26,0,-.4209167],1e3,!0)},changeLight:function(e,t){var i=this.Map.viewer.scene.getObjectByProperty("modelId",e);i&&(i.children.find((function(e){return"lightGroup"===e.name})).visible=t)},pushDeviceStatus:(S=(0,c.default)(l.default.mark((function e(t){var i,a,s,c=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=l.default.mark((function e(i){var n,a,s,d,h,u,v,m,g,w,y,b,x,S,M,C,k,T,L,F,E,z,j,_;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[i],a=n.deviceType,s=n.id,d=n.status,n.children,n.longitude,n.latitude,h=n.content,u=n.parent,19!==a){e.next=14;break}if(v=h.switchStatus,c.changeLight(s,1===v),m=c.deviceLabelMap[u]){e.next=8;break}return e.abrupt("return",{v:void 0});case 8:g=m.deviceInfo,(w=g.children.findIndex((function(e){return"路灯"===e.deviceName})))>-1&&(g.children[w].status=n.status),c.showDeviceInfo(g),e.next=46;break;case 14:if(1001!==a){e.next=19;break}y=(0,r.default)(c.guanglanMap[s],2),b=y[0],y[1],d?(b.material.color=new p.Color("#be1480"),b.material.emissive=new p.Color("#be1480")):(b.material.color=new p.Color("#3CFFE7"),b.material.emissive=new p.Color("#3CFFE7")),e.next=46;break;case 19:if(!h.testUrl&&!h.onlineUrl){e.next=39;break}if(x=h.testUrl,S=h.onlineUrl,M=h.duration,C=h.isCut,T=(k=x).split(","),L=c.Map.viewer.scene.getObjectByProperty("modelId",Number(u))){e.next=26;break}return e.abrupt("return",{v:void 0});case 26:if(1!==C){e.next=34;break}return F=L.imageInfo.filter((function(e){return e.point<10})).length,e.next=30,(0,f.imageSplit)(k,F);case 30:e.sent.map((function(e,t){var i=t+1,o=L.getObjectByName("img"+i);o.material.map=(new p.TextureLoader).load(e),o.material.map.flipY=!1})),e.next=35;break;case 34:L.imageInfo.forEach((function(e){e.point===h.point&&(e.testUrl=x,e.onlineUrl=S,e.duration=M,e.is_cut=C)}));case 35:(E=L.getObjectByName("img"+h.point)).material.map=(new p.TextureLoader).load(T[0]),E.material.map.flipY=!1,c.view.editor2.setImgInterval(L.modelId);case 39:if(z=""===u?c.deviceLabelMap[s]:c.deviceLabelMap[u]){e.next=42;break}return e.abrupt("return",{v:void 0});case 42:j=z.deviceInfo,(_=j.children.findIndex((function(e){return e.uuid===s})))>-1&&(j.children[_].status=n.status,h.visibility&&(j.children[_].value=h.visibility)),9===a?(j.status=d,j.modelInfo=(0,o.default)(h),c.showWeatherInfo(j)):11===a?(j.status=d,c.showChassisInfo(j)):c.showDeviceInfo(j);case 46:case"end":return e.stop()}}),e,c)})),a=0;case 3:if(!(a<t.length)){e.next=11;break}return e.delegateYield(i(a),"t0",5);case 5:if("object"!==(void 0===(s=e.t0)?"undefined":(0,n.default)(s))){e.next=8;break}return e.abrupt("return",s.v);case 8:a++,e.next=3;break;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)}),mixEvents:function(e){var t=this;e.forEach((function(e){var i=e.EventContent,o=JSON.parse(i),n=o.longitude,a=o.latitude,s=o.name,r=o.id,l=o.status;if(s&&""!==s){var c=z.transformWGS84ToUTM({x:n,y:a}),d=c.x,h=c.y;1===l&&t.view.addTrafficEvent({position:[d,h,4],options:{trafficType:10103,level:1,imgUrlMap:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png"},eventImg:"",startTime:"2021-08-17 11:19:42",name:r,source:"side",eventName:s}}),2===l&&t.Map.viewer.scene.removeAnimateObject(r)}}))}}}},467:function(e,t,i){var o=i(50);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},468:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=i(21),a=(o=n)&&o.__esModule?o:{default:o};var s=i(489),r=s.keys().filter((function(e){return"./index.js"!==e&&!e.startsWith("./shaders")})),l={},c={};r.forEach((function(e){var t=s(e);console.log(t),(0,a.default)(t).forEach((function(i){if(l[i])throw"Class 名称重复: "+e+" 下的 "+i+" 和 "+l[i]+" 下的 "+i+" 重复";c[i]=t[i],l[i]=e}))})),t.default=c},469:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color?new o.Color(e.color):new o.Color(1,0,0),i=e.colorTrip?new o.Color(e.colorTrip):new o.Color(1,1,0),s=e.dashOffset||.01,r=e.dashRatio||.1,l=e.dashArray||4,c=e.height||2,d=e.radius||.2,h=new o.CylinderBufferGeometry(d,d,c,32,1),u=new o.RawShaderMaterial({uniforms:{color:{value:t},colorTrip:{value:i},dashOffset:{value:s},dashRatio:{value:r},dashArray:{value:l},height:{value:c}},vertexShader:n,fragmentShader:a,side:o.FrontSide,transparent:!1}),f=new o.Mesh(h,u);return f.update=function(){this.material instanceof o.RawShaderMaterial&&(this.material.uniforms.dashOffset.value-=.004,this.material.uniforms.dashOffset.value<0&&(this.material.uniforms.dashOffset.value=1))},f};var o=i(0),n="\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",a="\n    precision mediump float;\n    precision mediump int;\n    varying vec3 vPosition;\n    uniform vec3 color;\n    uniform vec3 colorTrip;\n    uniform float dashOffset;\n    uniform float dashRatio;\n    uniform float dashArray;\n    uniform float height;\n    void main() {\n        vec4 c = vec4( color, 1.0 );\n        float a = floor(mod(vPosition.y*100.0/height + dashOffset*100.0 + 50.0, 100.0/dashArray) / (100.0 * dashRatio));\n        \n        if(a==0.0)\n        {\n           gl_FragColor = vec4(colorTrip,1.0);\n        }\n        else\n        {\n            gl_FragColor=c;\n        }\n    }"},470:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);t.default=function(e){var t=e.color||new o.Color,i=e.radius||10,n=e.speed||10,a=e.lineWidth||.2,s=new o.PlaneBufferGeometry(2*i,2*i,1,1),r=new o.RawShaderMaterial({uniforms:{factors:{value:[0,-.25,-.5,-.75,-1]},color:{value:t},radius:{value:i},lineWidth:{value:a}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform float factors[5];\n    uniform vec3 color;\n    varying vec3 vPosition;\n    uniform float radius;\n    uniform float lineWidth;\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        gl_FragColor = vec4(color, 0.0);\n        for(int i=0;i<5;i++){\n            float r1 = radius*clamp(factors[i],0.0,1.0);\n            if(r1-lineWidth*0.5< d&&d <r1+lineWidth*0.5) {\n                gl_FragColor = vec4(color, 1.0-d/radius);\n            }\n\n        }\n\n    }\n  ",side:o.FrontSide,transparent:!1}),l=new o.Mesh(s,r);return l.flag=!0,l.update=function(){if(this.flag)for(var e=0;e<5;e++){var t=this.material.uniforms.factors.value[e];this.material.uniforms.factors.value[e]=t>1?0:t+.001*n}},l}},472:function(e,t,i){"use strict";i.r(t)},473:function(e,t,i){"use strict";i.r(t)},474:function(e,t,i){e.exports={default:i(475),__esModule:!0}},475:function(e,t,i){i(153),i(74),i(88),i(476),i(482),i(485),i(487),e.exports=i(14).Map},476:function(e,t,i){"use strict";var o=i(477),n=i(467);e.exports=i(478)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=o.getEntry(n(this,"Map"),e);return t&&t.v},set:function(e,t){return o.def(n(this,"Map"),0===e?0:e,t)}},o,!0)},477:function(e,t,i){"use strict";var o=i(51).f,n=i(108),a=i(219),s=i(63),r=i(218),l=i(217),c=i(151),d=i(221),h=i(223),u=i(42),f=i(150).fastKey,p=i(467),v=u?"_s":"size",m=function(e,t){var i,o=f(t);if("F"!==o)return e._i[o];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,c){var d=e((function(e,o){r(e,d,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[v]=0,null!=o&&l(o,i,e[c],e)}));return a(d.prototype,{clear:function(){for(var e=p(this,t),i=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete i[o.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var i=p(this,t),o=m(i,e);if(o){var n=o.n,a=o.p;delete i._i[o.i],o.r=!0,a&&(a.n=n),n&&(n.p=a),i._f==o&&(i._f=n),i._l==o&&(i._l=a),i[v]--}return!!o},forEach:function(e){p(this,t);for(var i,o=s(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(o(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!m(p(this,t),e)}}),u&&o(d.prototype,"size",{get:function(){return p(this,t)[v]}}),d},def:function(e,t,i){var o,n,a=m(e,t);return a?a.v=i:(e._l=a={i:n=f(t,!0),k:t,v:i,p:o=e._l,n:void 0,r:!1},e._f||(e._f=a),o&&(o.n=a),e[v]++,"F"!==n&&(e._i[n]=a)),e},getEntry:m,setStrong:function(e,t,i){c(e,t,(function(e,i){this._t=p(e,t),this._k=i,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?d(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,d(1))}),i?"entries":"values",!i,!0),h(t)}}},478:function(e,t,i){"use strict";var o=i(28),n=i(36),a=i(150),s=i(65),r=i(57),l=i(219),c=i(217),d=i(218),h=i(50),u=i(87),f=i(51).f,p=i(479)(0),v=i(42);e.exports=function(e,t,i,m,g,w){var y=o[e],b=y,x=g?"set":"add",S=b&&b.prototype,M={};return v&&"function"==typeof b&&(w||S.forEach&&!s((function(){(new b).entries().next()})))?(b=t((function(t,i){d(t,b,e,"_c"),t._c=new y,null!=i&&c(i,g,t[x],t)})),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in S)||w&&"clear"==e||r(b.prototype,e,(function(i,o){if(d(this,b,e),!t&&w&&!h(i))return"get"==e&&void 0;var n=this._c[e](0===i?0:i,o);return t?this:n}))})),w||f(b.prototype,"size",{get:function(){return this._c.size}})):(b=m.getConstructor(t,e,g,x),l(b.prototype,i),a.NEED=!0),u(b,e),M[e]=b,n(n.G+n.W+n.F,M),w||m.setStrong(b,e,g),b}},479:function(e,t,i){var o=i(63),n=i(152),a=i(66),s=i(109),r=i(480);e.exports=function(e,t){var i=1==e,l=2==e,c=3==e,d=4==e,h=6==e,u=5==e||h,f=t||r;return function(t,r,p){for(var v,m,g=a(t),w=n(g),y=o(r,p,3),b=s(w.length),x=0,S=i?f(t,b):l?f(t,0):void 0;b>x;x++)if((u||x in w)&&(m=y(v=w[x],x,g),e))if(i)S[x]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:S.push(v)}else if(d)return!1;return h?-1:c||d?d:S}}},480:function(e,t,i){var o=i(481);e.exports=function(e,t){return new(o(e))(t)}},481:function(e,t,i){var o=i(50),n=i(222),a=i(29)("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),o(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},482:function(e,t,i){var o=i(36);o(o.P+o.R,"Map",{toJSON:i(483)("Map")})},483:function(e,t,i){var o=i(110),n=i(484);e.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},484:function(e,t,i){var o=i(217);e.exports=function(e,t){var i=[];return o(e,!1,i.push,i,t),i}},485:function(e,t,i){i(486)("Map")},486:function(e,t,i){"use strict";var o=i(36);e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},487:function(e,t,i){i(488)("Map")},488:function(e,t,i){"use strict";var o=i(36),n=i(86),a=i(63),s=i(217);e.exports=function(e){o(o.S,e,{from:function(e){var t,i,o,r,l=arguments[1];return n(this),(t=void 0!==l)&&n(l),null==e?new this:(i=[],t?(o=0,r=a(l,arguments[2],2),s(e,!1,(function(e){i.push(r(e,o++))}))):s(e,!1,i.push,i),new this(i))}})}},489:function(e,t,i){var o={"./AnimationPath.js":490,"./AreaLabel.js":491,"./BasicLabel.js":154,"./CarFlag.js":230,"./Cloud.js":225,"./Diamond.js":155,"./DiamondTwo.js":492,"./EquipmentEvent.js":231,"./Label.js":493,"./MapTv.js":494,"./ModelText.js":224,"./RoadSideEvent.js":495,"./RotationCircle.js":220,"./TrafficEvent.js":496,"./TrafficEvent2.js":157,"./TrafficEvent3.js":226,"./shaders/Focus.js":497,"./shaders/Hexagon.js":498,"./shaders/RingCircle.js":107,"./shaders/TripCubicFatline.js":229,"./shaders/TripCubicLine.js":499,"./shaders/TripFatline.js":156,"./shaders/TripLine.js":469,"./shaders/TripLine2.js":500,"./shaders/WaveCircle.js":501,"./shaders/WaveCircle2.js":470,"./shaders/lines/LineMaterial.js":227,"./shaders/lines/LineMaterial2.js":228};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id=489},490:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationPath=void 0;var o=i(17);t.AnimationPath=o.AnimationPath},491:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AreaLabel=void 0;var o=p(i(72)),n=p(i(38)),a=p(i(39)),s=p(i(25)),r=p(i(47)),l=p(i(19)),c=p(i(20)),d=p(i(48)),h=p(i(49)),u=i(17),f=i(0);function p(e){return e&&e.__esModule?e:{default:e}}t.AreaLabel=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return i.color=new f.Color(e.color),e.needEnter&&i.initEnter(),e.needLine&&i.initLine(),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"initEnter",value:function(){var e=new f.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:!1,opacity:0}),t=new f.Sprite(e);t.scale.set(1/this.factor.x*.2*.5,1/this.factor.y*.09*.5,1),t.material.color=new f.Color("#58d2d4"),t.center.set(-2.75,-6.45),this.enter=t,this.add(this.enter)}},{key:"initLine",value:function(){var e=new f.CylinderBufferGeometry(.08,.08,20,32,1),t=new f.MeshBasicMaterial({color:this.color});this.line=new f.Mesh(e,t),this.line.rotateX(.5*Math.PI),this.line.position.z=-10,this.add(this.line)}},{key:"updateInfo",value:function(e){var t,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,100,100],r=arguments[2],l=(0,s.default)(o,2),c=l[0],d=l[1],h=3,u=this.drawCanvas,f=u.width,p=u.height,v=this.drawCanvas.getContext("2d");v.clearRect(0,0,f,p),v.drawImage(this.mainView,c,d,f,p),r&&r.forEach((function(e){var t=e.img,o=e.imgInfo;v.drawImage(t,o.position[0]*i.factor.x*h,o.position[1]*i.factor.y*h,o.size[0]*i.factor.x*h,o.size[1]*i.factor.y*h)})),e.forEach((t=(0,a.default)(n.default.mark((function e(t){var o,a,s,r,l,c,d,h;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.text,a=t.position,s=t.size,r=t.color,l=t.fontFamily,c=t.textAlign,d=t.fontWeight,v.font=(d||"normal")+" "+s*i.factor.y+"px "+l,v.fillStyle=r,v.textBaseline="top",v.textAlign=c||"left",h=v.measureText(o).width,e.next=8,document.fonts.load(v.font);case 8:v.fillText(o,a[0]*i.factor.x,a[1]*i.factor.y,h/i.factor.y*3);case 9:case"end":return e.stop()}}),e,i)}))),function(e){return t.apply(this,arguments)})),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}},{key:"raycast",value:function(e,t){for(var i=0;i<this.children.length;i++){var o=this.children[i];o.visible&&o.raycast(e,t)}return t}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,o.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,o.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}]),t}(u.Label)},492:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiamondTwo=void 0;var o=v(i(72)),n=v(i(62)),a=v(i(21)),s=v(i(38)),r=v(i(39)),l=v(i(73)),c=v(i(47)),d=v(i(19)),h=v(i(20)),u=v(i(48)),f=v(i(49)),p=i(0);function v(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,t);var i=(0,u.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return i.type="DiamondTwo",i.name=e.name,i.style=(0,l.default)({bottom:{},top:{}},e.style),i.color=e.color?new p.Color(e.color):new p.Color("#538cb6"),i.borderColor=e.borderColor?new p.Color(e.borderColor):new p.Color("#71f9ff"),i.topColor=e.topColor||[87,143,181],i.bottomColor=e.bottomColor||[12,255,232],i.height=e.height||4,i.sizeAttenuation=e.sizeAttenuation||!1,i.radius=e.radius,i.radiusSegments=e.radiusSegments||4,i.heightSegments=e.heightSegments||1,i.hasBottom=e.hasBottom||!1,i.topOffset=e.topOffset||{x:0,y:1.2,z:5},i.activeOption=e.activeOption||{height:.5,speed:.05},i.stop=!0,i.openEnded=!e.closeEnded,i.ringRadius=e.ringRadius||[1,1.5],i.opacity=e.opacity||.2,i.mainView=null,i.isBottom=e.isBottom||!1,e.clone||i.init(),i}return(0,f.default)(t,e),(0,h.default)(t,[{key:"init",value:function(){this.hasBottom&&this.initBottom(),this.initTop(),this.boundingSphere=new p.Sphere(new p.Vector3(0,0,2.5),2.5),this.boundingBox=new p.Box3(new p.Vector3(-1,-1,0),new p.Vector3(2,2,5))}},{key:"initBottom",value:function(){this.bottom=this.addRadarScan({radiusTop:2,radiusBottom:2,thetaLength:6.3,height:.2,imgURL:"./assets/image/A-05.png"}),this.bottom.flag=0,this.bottom.stop=!1,this.bottom.speed=.01,this.bottom.maxScale=2,this.bottom.update=function(){this.stop||(this.flag+=this.speed,this.scale.set(this.flag,this.flag,this.flag),this.flag>this.maxScale&&(this.flag=0))},this.bottom.name="bottom",this.add(this.bottom)}},{key:"addRadarScan",value:function(e){var t=e.radiusTop||24,i=e.radiusTop||24,o=e.thetaLength||.6667*Math.PI,n=e.imgURL||null,a=e.height||15,s=new p.Group,r=new p.Mesh(new p.CylinderBufferGeometry(t,i,a,32,3,!0,0,o),new p.MeshPhongMaterial({color:"#1b9aff",transparent:!0,side:p.DoubleSide,alphaMap:(new p.TextureLoader).load(n)}));r.position.set(0,0,a),r.rotation.x=.5*-Math.PI,r.layers.enable(1),s.add(r);var l=new p.Mesh(new p.CylinderBufferGeometry(t,i,.02,32,3,!0,0,o),new p.MeshPhongMaterial({color:"#1b9aff",side:p.DoubleSide}));return l.position.set(0,0,.1),l.rotation.x=.5*-Math.PI,l.layers.enable(1),s.add(l),s}},{key:"initTop",value:function(){var e=this.topOffset,t=(e.x,e.y),i=e.z;this.top1=g({color:this.color,height:this.height,radius:this.radius,radiusSegments:this.radiusSegments,heightSegments:this.heightSegments,topColor:this.topColor,bottomColor:this.bottomColor,activeOption:this.activeOption,topOffset:this.topOffset,openEnded:this.openEnded,opacity:this.opacity}),this.top1.name="top1",this.top2=g({color:this.borderColor,height:this.height,wireframe:!0,radius:this.radius,radiusSegments:this.radiusSegments,heightSegments:1,topColor:this.topColor,bottomColor:this.bottomColor,activeOption:this.activeOption,topOffset:this.topOffset,openEnded:!0}),this.top2.name="top2",this.top1.rotateX(.5*-Math.PI),this.top2.rotateX(.5*-Math.PI),this.top1.position.z=i,this.top2.position.z=i,this.top1.position.y=t,this.top2.position.y=t,this.add(this.top1),this.add(this.top2)}},{key:"drawLabel",value:function(e,t,i){this.mainView=e;var o=e.width,n=e.height;this.drawCanvas||(this.drawCanvas=document.createElement("canvas"),this.drawCanvas.width=o,this.drawCanvas.height=n);var a=this.drawCanvas.getContext("2d");a.clearRect(0,0,o,n),a.drawImage(e,0,0,o,n),a.drawImage(t,0,0,o,n);var s=new p.Texture(this.drawCanvas);this.idSprite=function(e,t,i){var o=new p.MeshBasicMaterial({map:i,transparent:!0,blending:p.CustomBlending,side:p.DoubleSide});o.map.needsUpdate=!0;var n=new p.PlaneGeometry(.01*e,.01*t,1,1),a=new p.Mesh(n,o);return a.name="sprite",a.rotateX(.5*Math.PI),a}(o,n,s),this.idSprite.position.x=0,this.idSprite.position.z=i||7,this.idSprite.addEventListener((function(e){console.log(e)})),this.add(this.idSprite)}},{key:"updateLabel",value:function(e){var t,i=this,o=arguments[2],n=3,a=this.drawCanvas,l=a.width,c=a.height,d=this.drawCanvas.getContext("2d");d.clearRect(0,0,l,c),d.drawImage(this.mainView,0,0,l,c),o&&o.forEach((function(e){var t=e.img,o=e.imgInfo;d.drawImage(t,o.position[0]*i.factor.x*n,o.position[1]*i.factor.y*n,o.size[0]*i.factor.x*n,o.size[1]*i.factor.y*n)})),e.forEach((t=(0,r.default)(s.default.mark((function e(t){var o,n,a,r,l,c,h,u;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.text,n=t.position,a=t.size,r=t.color,l=t.fontFamily,c=t.textAlign,h=t.fontWeight,d.font=(h||"normal")+" "+a*i.factor.y*3+"px "+l,d.fillStyle=r,d.textBaseline="top",d.textAlign=c||"left",u=d.measureText(o).width,d.fillText(o,n[0]*i.factor.x*3,n[1]*i.factor.y*3,u/i.factor.y*3);case 7:case"end":return e.stop()}}),e,i)}))),function(e){return t.apply(this,arguments)}));var h=new p.Texture(this.drawCanvas);h.needsUpdate=!0,this.idSprite.material.map=h}},{key:"setColor",value:function(e){e&&(e=new p.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.top.material.uniforms.color.value=this.color)}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],i=e.y||e[1],o=e.z||e[2];this.position.set(t,i,o||this.position.z),this.updateMatrix()}}},{key:"setSpriteStatus",value:function(e){if(this.idSprite&&(this.idSprite.visible=e),this.attackEvents.length&&(0,a.default)(this.attackEventSprite).length)for(var t in this.attackEventSprite)this.attackEventSprite[t].visible=e}},{key:"raycast",value:function(e,t){var i=new p.Sphere;i.copy(this.boundingSphere),i.applyMatrix4(this.matrixWorld);var o=e.ray.intersectsSphere(i);if(o)return t.push({object:this,point:o,distance:e.ray.origin.distanceTo(o)}),t}},{key:"faceToCamera",value:function(e){this.idSprite&&(this.idSprite.rotation.y=e.rotation.z)}},{key:"update",value:function(){this.top1.update(),this.top2.update()}},{key:"clone",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new this.constructor({clone:t}).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse((0,n.default)(e.userData)),this.type=e.type,this.style=e.style,this.color=e.color,this.borderColor=e.borderColor,this.height=e.height,this.sizeAttenuation=e.sizeAttenuation,this.radius=e.radius,this.stop=e.stop,this.boundingSphere=e.boundingSphere,this.boundingBox=e.boundingBox,this.update=e.update,!0===t)for(var i=0;i<e.children.length;i++){var o=e.children[i],a=o.clone();"bottom"===o.name&&(this.bottom=a),"top1"===o.name&&(this.top1=a,a.flag=.01,a.stop=!1,a.factor=1,this.top1.update=o.update),"top2"===o.name&&(this.top2=a,a.flag=.01,a.stop=!1,a.factor=1,this.top2.update=o.update),this.add(a)}return this}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,o.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,o.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.top1=null,this.top2=null}}]),t}(p.Object3D);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius||2,i=e.height||4,o=e.radiusSegments||4,n=e.heightSegments||1,a=e.wireframe||!1,s=e.color||new p.Color(1,1,1),r=e.opacity||1,l=new p.ConeBufferGeometry(.98*t,i,o,n,e.openEnded),c=new p.ConeBufferGeometry(.98*t,i/2,o,n,e.openEnded),d=e.activeOption,h=new p.MeshBasicMaterial({vertexColors:!1,opacity:r,transparent:!0,side:p.DoubleSide,color:s,wireframe:a||!1,depthTest:!0}),u=new p.Group,f=new p.Mesh(l,h);f.layers.enable(1),u.add(f);var v=new p.Mesh(new p.ConeBufferGeometry(t,i,o,n,e.openEnded),new p.MeshBasicMaterial({vertexColors:!1,opacity:1,transparent:!0,side:p.DoubleSide,color:s,wireframe:!0}));v.layers.enable(1),u.add(v);var m=new p.Mesh(c,h);m.rotateX(Math.PI),m.layers.enable(1),m.position.y=3*-i/4,u.add(m),u.flag=.01,u.stop=!1,u.factor=d.height;var g=new p.Mesh(new p.ConeBufferGeometry(t,i/2,o,n,e.openEnded),new p.MeshBasicMaterial({vertexColors:!1,opacity:1,transparent:!0,side:p.DoubleSide,color:s,wireframe:!0}));return g.rotateX(Math.PI),g.position.y=3*-i/4,g.layers.enable(1),u.add(g),u.update=function(){this.stop||(this.position.z=e.topOffset.z+this.flag,this.rotateY(Math.PI*d.speed*.1),this.flag+=d.speed*this.factor,this.flag>d.height?this.factor=-d.height:this.flag<-d.height&&(this.factor=d.height))},u}t.DiamondTwo=m},493:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;var o=d(i(25)),n=d(i(47)),a=d(i(19)),s=d(i(20)),r=d(i(48)),l=d(i(49)),c=i(0);function d(e){return e&&e.__esModule?e:{default:e}}t.Label=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t);var i=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this));return i.name=e.name||"",i.sprite=null,i.texture=null,i.material=null,i.scaleNum=e.scaleNum||.3,i.factor=e.factor||{},i.center=e.center||{x:.12,y:0},i.mainView=null,i.drawCanvas=document.createElement("canvas"),i.sizeAttenuation=e.sizeAttenuation||!1,i.init(e),i}return(0,l.default)(t,e),(0,s.default)(t,[{key:"init",value:function(e){var t=e.mainView,i=e.updateView,o=t.width,n=t.height,a=n/o;this.drawCanvas.width=o,this.drawCanvas.height=n,this.mainView=t,this.texture=new c.Texture(this.mainView),this.texture.minFilter=c.NearestFilter,this.texture.magFilter=c.NearestFilter,this.texture.anisotropy=4,this.texture.needsUpdate=!0;var s=new c.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:this.sizeAttenuation});this.material=s,this.sprite=new c.Sprite(this.material),this.sprite.material.map=this.texture,this.sprite.scale.set(1/this.factor.x*this.scaleNum,1/this.factor.y*a*this.scaleNum,1);var r=this.center,l=r.x,d=r.y;this.sprite.center=new c.Vector2(l,d),this.add(this.sprite),i&&this.update(i)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,100,100],i=(0,o.default)(t,4),n=i[0],a=i[1],s=i[2],r=i[3],l=this.drawCanvas,c=l.width,d=l.height,h=this.drawCanvas.getContext("2d");h.clearRect(0,0,c,d),h.drawImage(this.mainView,n,a,c,d),h.drawImage(e,n,a,s*this.factor.x,r*this.factor.y),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}},{key:"updateText",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,100,100],n=(0,o.default)(i,2),a=n[0],s=n[1],r=this.drawCanvas,l=r.width,c=r.height,d=this.drawCanvas.getContext("2d");d.clearRect(0,0,l,c),d.drawImage(this.mainView,a,s,l,c),e.forEach((function(e){var i=e.text,o=e.position,n=e.size,a=e.color,s=e.fontFamily,r=e.textAlign;d.font=n*t.factor.y+"px "+s,d.fillStyle=a,d.textBaseline="top",d.textAlign=r||"left",d.fillText(i,o[0]*t.factor.x,o[1]*t.factor.y)})),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}},{key:"dispose",value:function(){this.texture.dispose(),this.sprite.material.dispose(),this.sprite.material.map.dispose()}}]),t}(c.Object3D)},494:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapTv=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(17));t.MapTv=o},495:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoadSideEvent=void 0;var o=w(i(72)),n=w(i(62)),a=w(i(13)),s=w(i(21)),r=w(i(73)),l=w(i(47)),c=w(i(19)),d=w(i(20)),h=w(i(48)),u=w(i(49)),f=i(0),p=w(i(107)),v=w(i(469)),m=w(i(470)),g=i(46);function w(e){return e&&e.__esModule?e:{default:e}}t.RoadSideEvent=function(e){function t(e){(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return i.type=e.options?e.options.type:"trafficevent",i.name=e.name,i.style=(0,r.default)({bottom:{},middle:{},top:{},right:{}},e.style),i.color=e.color?new f.Color(e.color):new f.Color("#83aed3"),i.colorTrip=e.colorTrip?new f.Color(e.colorTrip):new f.Color("#79F7FF"),i.fontsize=e.fontsize||12,i.idNum=e.id||"ID:0002",i.attackEvents=e.attackEvents||[],i.idSprite=null,i.imgUrlMap=e.imgUrlMap,i.sizeAttenuation=e.sizeAttenuation||!1,i.attackEventSprite={},i.attackEventInfoSprite=null,i.clickState=!1,i.options=e.options||{},i.itemScale=e.scale||1,i.onlyAnimition=!0,e.clone||i.init(),i}return(0,u.default)(t,e),(0,d.default)(t,[{key:"init",value:function(){this.initBottom(),this.initMiddle(),this.initTop(),this.initHover(),this.initClick(),this.boundingSphere=new f.Sphere(new f.Vector3(0,0,2),4),this.boundingBox=new f.Box3(new f.Vector3(-2,-2,0),new f.Vector3(2,2,5))}},{key:"initBottom",value:function(){this.bottom=(0,p.default)({color:this.color,colorRing:this.color,radius1:.25,radius2:.375,width:.05}),this.add(this.bottom)}},{key:"initMiddle",value:function(){this.middle=(0,v.default)({color:this.color,colorTrip:this.colorTrip,height:6,radius:.08,dashArray:3,dashRatio:.2}),this.middle.name="middle",this.middle.rotateX(.5*Math.PI),this.middle.position.z=3,this.add(this.middle)}},{key:"initTop",value:function(){var e="attack"===this.type?"#FF7979":"#79F7FF";this.sphere=new f.Mesh(new f.SphereBufferGeometry(.25,32,32),new f.MeshBasicMaterial({color:new f.Color(e)})),this.sphere.position.z=6,this.add(this.sphere),this.top=(0,m.default)({color:this.colorTrip,radius:.8,lineWidth:.08}),this.top.name="top",this.top.visible=!1,this.top.rotateX(.5*Math.PI),this.top.position.z=6,this.top.flag=!1}},{key:"getTopHeight",value:function(){var e=this.top.position.z;return this.scale.z*e}},{key:"initHover",value:function(){this.addEventListener("mouseover",x),this.addEventListener("mouseleave",S)}},{key:"removeHover",value:function(){this.removeEventListener("mouseover",x),this.removeEventListener("mouseleave",S)}},{key:"setSpriteStatus",value:function(e){if(this.idSprite&&(this.idSprite.visible=e),this.attackEvents.length&&(0,s.default)(this.attackEventSprite).length)for(var t in this.attackEventSprite)this.attackEventSprite[t].visible=e}},{key:"initClick",value:function(){}},{key:"initAttackInfoClick",value:function(e){var t=this;this.attackEventSprite[e].addEventListener("mouseup",(function(){t.attackEventInfoSprite?t.attackEventInfoSprite.visible=!t.attackEventInfoSprite.visible:t.drawAttackEventInfoImg(t.attackEvents[0])}))}},{key:"releaseHover",value:function(){this.hoverObject&&(this.hoverObject.visible=!1),this.top.flag=!1,this.hoverState=!1}},{key:"releaseClick",value:function(){this.clickObject&&(this.clickObject.visible=!1),this.clickState=!1}},{key:"setColor",value:function(e){e&&(e=new f.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.middle.material.uniforms.color.value=this.color,this.top.material.uniforms.color.value=this.color)}},{key:"setColorTrip",value:function(e){e&&(e=new f.Color(e),this.colorTrip.copy(e),this.middle.material.uniforms.colorTrip.value=this.colorTrip)}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],i=e.y||e[1],o=e.z||e[2];this.position.set(t,i,o||this.position.z),this.updateMatrix()}}},{key:"drawIDImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=3,o=t.iconWidth||70*i,n=t.iconHeight||22*i,a=t.fontsize||12*i,s=y(o,n),r=s.getContext("2d"),l=s.width/o,c=new Image;if(c.crossOrigin="Anonymous",this.imgUrlMap){var d=this.imgUrlMap.idNum.icon;c.src=g.ResourcePath+d}else{var h=g.RoadSideType.idNum,u=h.attack,p=h.normal,v=t.type&&"attack"===t.type?u.icon:p.icon;c.src=g.ResourcePath+v}c.addEventListener("load",(function(){r.drawImage(c,0,0,s.width,s.height),e.drawText(r,e.idNum,.285*o*l,(.5*n+.5*a-2)*l,a*l,new f.Color("#ffffff"),!0);var t=new f.Texture(s);t.anisotropy=8,t.minFilter=f.NearestFilter,t.magFilter=f.NearestFilter,t.needsUpdate=!0,e.idSprite?e.idSprite.material.map=t:(e.idSprite=b(o,n,t),e.idSprite.position.x=0,e.idSprite.position.z=8,e.idSprite.addEventListener((function(e){console.log(e)})),e.add(e.idSprite))}))}},{key:"drawAttackEventImgs",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],i=this.attackEvents.length-1;i>-1;i--){var o=new f.Vector3(3,0,6),n=this.attackEvents[i];e.name=n.name,t.indexOf(n.name)<0&&(t.push(n.name),o.z-=.8*(t.length+1),this.drawAttackEventImg(n.name,o,e))}}},{key:"drawAttackEventImg",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this,n=3;if(o.attackEventSprite[e])o.attackEventSprite[e].position.z=t.z;else{var a=document.createElement("canvas"),s=i.fontsize||12*n,r=a.getContext("2d");r.font="Bold "+s+"px Arial";var l=r.measureText(e),c=l.width,d=i.iconWidth||30*n,h=i.iconHeight||14*n,u=i.color||"#FF7979",p=f.MathUtils.ceilPowerOfTwo(c+d),v=p/(c+d);a.width=1.25*p,a.height=h*v;var m=new Image;if(m.crossOrigin="Anonymous",this.imgUrlMap){var w=this.imgUrlMap.attackEvent.icon;m.src=g.ResourcePath+w}else m.src=g.ResourcePath+g.RoadSideType.attackEvent.icon;r.fillStyle="rgba(0,0,0,0.0)",r.fillRect(0,0,a.width,a.height),m.addEventListener("load",(function(){r.drawImage(m,0,0,Math.ceil(d*v),Math.ceil(h*v)),o.drawText(r,e,(d+2)*v,(s-2)*v,36*v,new f.Color(u),!0);var n=new f.Texture(a);n.minFilter=f.NearestFilter,n.magFilter=f.NearestFilter,n.needsUpdate=!0;var l=b(c+d,h,n);o.attackEventSprite[e]=l,l.name=i.name,l.position.x=t.x,l.position.z=t.z,o.add(l),o.initAttackInfoClick(e)}))}}},{key:"removeAttackEventImg",value:function(){var e=this;this.attackEventSprite&&(0,s.default)(this.attackEventSprite).forEach((function(t){e.remove(e.attackEventSprite[t])})),this.attackEventInfoSprite&&this.remove(this.attackEventInfoSprite)}},{key:"drawAttackEventInfoImg",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=3,n=i.iconWidth||219*o,a=i.iconHeight||191*o,s=y(n,a),r=f.MathUtils.ceilPowerOfTwo(n),l=r/n,c=s.getContext("2d");c.font="Bold "+(i.fontsize||12*o)*l+"px Arial";var d=new Image;if(d.crossOrigin="Anonymous",this.imgUrlMap){var h=this.imgUrlMap.attackInfo.icon;d.src=g.ResourcePath+h}else d.src=g.ResourcePath+g.RoadSideType.attackInfo.icon;d.addEventListener("load",(function(){c.drawImage(d,0,0,Math.floor(n*l),Math.floor(a*l)),t.drawText(c,e.name,52*o*l,25*o*l,16*o*l,null,!0),t.drawText(c,e.time,150*o*l,28*o*l,16*o*l,null,!0),t.drawText(c,"设备编号: "+e.ID,12*o*l,63*o*l,12*o*l),t.drawText(c,"事件类型: "+e.type,12*o*l,84*o*l,12*o*l),t.drawText(c,"事件描述: "+e.decreption,12*o*l,105*o*l,12*o*l),t.drawText(c,"发生位置: "+e.position,12*o*l,126*o*l,12*o*l),t.drawText(c,"处理结果: "+e.result,12*o*l,147*o*l,12*o*l);var i=new f.Texture(s);i.minFilter=f.NearestFilter,i.magFilter=f.NearestFilter,i.needsUpdate=!0,t.attackEventInfoSprite?t.attackEventInfoSprite.material.map=i:(t.attackEventInfoSprite=b(n/2,a/2,i),t.attackEventInfoSprite.position.x=.01*n+5,t.attackEventInfoSprite.position.z=5.8,t.add(t.attackEventInfoSprite))}))}},{key:"drawText",value:function(e,t,i,o,n,a,s){e.fillStyle=function(e,t){var i=255*e.r,o=255*e.g,n=255*e.b;return"rgba("+i+","+o+","+n+","+(t=t||1)+")"}(a||new f.Color(1,1,1)),e.textAlign="left",e.font=(s?"Bold ":"")+(Math.floor(n)||36)+"px Arial",e.fillText(t,Math.ceil(i),Math.ceil(o))}},{key:"raycast",value:function(e,t){var i=[],o=new f.Sphere;o.copy(this.boundingSphere),o.applyMatrix4(this.matrixWorld);var n=e.ray.intersectsSphere(o);if(n){t.push({object:this,point:n,distance:e.ray.origin.distanceTo(o.center)});for(var a=0;a<this.children.length;a++){var s=this.children[a];s.visible&&s.raycast(e,i)}for(var r=0;r<i.length;r++){var l=i[r];l.distance=e.ray.origin.distanceTo(l.point)}if(i.sort((function(e,t){return e.distance-t.distance})),i.length)for(var c=0;c<i.length;c++)t.push(i[c]);return t}}},{key:"faceToCamera",value:function(e){var t=e.rotation.z;this.top.rotation.y=t,this.idSprite&&(this.idSprite.rotation.y=t),this.attackEventInfoSprite&&(this.attackEventInfoSprite.rotation.y=t,this.attackEventInfoSprite.position.x=8*Math.cos(t),this.attackEventInfoSprite.position.y=8*Math.sin(t));var i=(0,s.default)(this.attackEventSprite);if(i.length)for(var o=0;o<i.length;o++){var n=this.attackEventSprite[i[o]];n.position.x=2.8*Math.cos(t),n.position.y=2.8*Math.sin(t),n.rotation.y=t}}},{key:"update",value:function(){this.middle.update(),this.top.update()}},{key:"clone",value:function(e,t){return new this.constructor((0,a.default)({},e,{clone:!0})).copy(this,t)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse((0,n.default)(e.userData)),this.boundingSphere=e.boundingSphere,this.boundingBox=e.boundingBox,this.initHover(),this.initClick(),!0===t)for(var i=0;i<e.children.length;i++){var o=e.children[i];if("sprite"!==o.name){var a=o.clone();a.update=o.update,this.add(a),"middle"===o.name?this.middle=a:"top"===o.name&&(this.top=a)}}return this}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,o.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,o.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}]),t}(f.Object3D);function y(e,t){var i=document.createElement("canvas"),o=f.MathUtils.ceilPowerOfTwo(e);return i.width=o,i.height=t*o/e,i}function b(e,t,i){var o=new f.MeshBasicMaterial({map:i,transparent:!0,blending:f.CustomBlending}),n=new f.PlaneGeometry(.02*e,.02*t,1,1),a=new f.Mesh(n,o);return a.name="sprite",a.rotateX(.5*Math.PI),a}function x(){if(this.idSprite?this.idSprite.visible=!0:this.drawIDImg(this.options),this.attackEvents.length)if((0,s.default)(this.attackEventSprite).length)for(var e in this.attackEventSprite)this.attackEventSprite[e].visible=!0;else this.drawAttackEventImgs();this.top.flag=!0,this.hoverState=!0}function S(){if(this.onlyAnimition)return this.hoverState=!1,!1;if(this.top.visible=!1,this.idSprite&&(this.idSprite.visible=!1),(0,s.default)(this.attackEventSprite).length)for(var e in this.attackEventSprite)this.attackEventSprite[e].visible=!1;this.hoverState=!1}},496:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrafficEvent=void 0;var o=p(i(72)),n=p(i(73)),a=p(i(47)),s=p(i(19)),r=p(i(20)),l=p(i(48)),c=p(i(49)),d=i(0),h=p(i(107)),u=p(i(220)),f=i(46);function p(e){return e&&e.__esModule?e:{default:e}}t.TrafficEvent=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);var i=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return i.type="trafficevent",i.name=e.name,i.style=(0,n.default)({bottom:{},middle:{},top:{},right:{}},e.style),i.source=e.source||"robocop",i.trafficType=e.trafficType||100,i.color="robocop"===i.source?new d.Color("#FF8B0A"):new d.Color("#D25454"),i.wireColor="robocop"===i.source?new d.Color("#FFC165"):new d.Color("#FF9393"),i.fontsize=e.fontsize||12,i.imgUrlMap=e.imgUrlMap,i.eventImg=e.eventImg,i.sizeAttenuation=e.sizeAttenuation||!1,i.iconSprite=null,i.itemScale=e.scale||1,i.trafficEventSprite=null,i.onlyAnimition=!0,i.init(e),i}return(0,c.default)(t,e),(0,r.default)(t,[{key:"init",value:function(e){var t=this;f.TrackEventType[this.trafficType]||(f.TrackEventType[this.trafficType]={}),this.initBottom(),this.initMiddle(),this.initTop(),this.drawTrafficEventImg(e),this.initHover(),this.boundingSphere=new d.Sphere(new d.Vector3(0,0,2.5),2.5),this.boundingBox=new d.Box3(new d.Vector3(-1,-1,0),new d.Vector3(2,2,5)),setTimeout((function(){f.TrackEventType[t.trafficType].event||(f.TrackEventType[t.trafficType].event={bottom:t.bottom.clone(),top:t.top.clone(),middle:t.middle.clone()},f.TrackEventType[t.trafficType].event.top.update=t.top.update,f.TrackEventType[t.trafficType].event.top.flag=t.top.flag)}),0)}},{key:"initBottom",value:function(){f.TrackEventType[this.trafficType].event?this.bottom=f.TrackEventType[this.trafficType].event.bottom.clone():this.bottom=(0,h.default)({color:this.color,colorRing:this.color,radius1:.25,radius2:.375,width:.05}),this.add(this.bottom)}},{key:"initMiddle",value:function(){if(f.TrackEventType[this.trafficType].event)this.middle=f.TrackEventType[this.trafficType].event.middle.clone(),this.middle.position.z=f.TrackEventType[this.trafficType].event.middle.position.z;else{var e=new d.CylinderBufferGeometry(.05,.05,4,32,1),t=new d.MeshBasicMaterial({color:this.color});this.middle=new d.Mesh(e,t),this.middle.rotateX(.5*Math.PI),this.middle.position.z=2}this.add(this.middle)}},{key:"initTop",value:function(){if(this.iconSprite?this.iconSprite.visible=!0:this.drawIconImg(),f.TrackEventType[this.trafficType].event)this.top=f.TrackEventType[this.trafficType].event.top.clone(),this.top.update=f.TrackEventType[this.trafficType].event.top.update,this.top.flag=f.TrackEventType[this.trafficType].event.top.flag,this.top.position.z=f.TrackEventType[this.trafficType].event.top.position.z;else{var e=(0,u.default)({color:this.color,colorRing0:this.color,colorRing1:this.color,colorRing2:this.color,radius1:.01,radius2:.6,width:.1});this.top=e,this.topUpdate=this.top.update,this.top.rotateX(.5*Math.PI),this.top.position.z=4.5}this.add(this.top)}},{key:"initHover",value:function(){this.addEventListener("mouseover",w),this.addEventListener("mouseleave",y)}},{key:"removeHover",value:function(){this.removeEventListener("mouseover",w),this.removeEventListener("mouseleave",y)}},{key:"initClick",value:function(){this.addEventListener("mouseup",b)}},{key:"removeCilck",value:function(){this.removeEventListener("mouseup",b)}},{key:"getTopHeight",value:function(){var e=this.top.position.z;return this.scale.z*e}},{key:"setSpriteStatus",value:function(e){this.trafficEventSprite.visible=e}},{key:"releaseHover",value:function(){this.hoverObject&&(this.hoverObject.visible=!1),this.top.flag=!1,this.hoverState=!1}},{key:"setColor",value:function(e){e&&(e=new d.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.middle.material.color=this.color,this.top.material.uniforms.color.value=this.color)}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],i=e.y||e[1],o=e.z||e[2];this.position.set(t,i,o||this.position.z),this.updateMatrix()}}},{key:"drawIconImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=1.6,o=t.iconWidth||36*i*this.itemScale,n=t.iconHeight||36*i*this.itemScale,a=t.color||this.color,s=t.wireColor||this.wireColor,r=m(o,n),l=r.getContext("2d"),c=r.width/o,h=new Image;h.crossOrigin="Anonymous";var u=!1,p=0;if(this.imgUrlMap){var w=this.imgUrlMap,y=w.icon,b=w.aggregation;h.src=y,b&&(u=!0,p=b)}else{var x=f.TrackEventType[this.trafficType].icon;h.src=f.ResourcePath+x}if(u){l.fillStyle=v(a),l.strokeStyle=v(s),l.lineWidth=2*i,l.beginPath(),l.arc(.5*r.width,.5*r.height,.5*r.width-2*i,0,2*Math.PI),l.closePath(),l.fill(),l.stroke(),this.drawText(l,p,.2*r.width*c,(.5*r.height+4)*c,12*i*c,null,!0);var S=new d.Texture(r);S.minFilter=d.NearestFilter,S.magFilter=d.NearestFilter,S.anisotropy=4,S.needsUpdate=!0,this.iconSprite?this.iconSprite.material.map=S:(this.iconSprite=g(o,n,S),this.iconSprite.position.z=4.5,this.add(this.iconSprite))}else h.addEventListener("load",(function(){l.fillStyle=v(a),l.strokeStyle=v(s),l.lineWidth=3*i,l.beginPath(),l.arc(.5*r.width,.5*r.height,.5*r.width-3*i,0,2*Math.PI),l.closePath(),l.fill(),l.stroke(),l.drawImage(h,Math.floor(8*i*e.itemScale*c),Math.floor(8*i*e.itemScale*c),Math.ceil(20*i*e.itemScale*c),Math.ceil(20*i*e.itemScale*c));var t=new d.Texture(r);t.minFilter=d.NearestFilter,t.magFilter=d.NearestFilter,t.anisotropy=4,t.needsUpdate=!0,e.iconSprite?e.iconSprite.material.map=t:(e.iconSprite=g(o,n,t),e.iconSprite.position.z=4.5,e.add(e.iconSprite))}))}},{key:"drawTrafficEventImg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.trafficEventSprite)this.trafficEventSprite.visible=!0;else{var t=3,i=e.fontsize||12*t,o=f.TrackEventType[this.trafficType].name||e.eventName,n=e.iconWidth||(o.length>5?70*t*(.2*o.length):70*t),a=e.iconHeight||22*t,s=m(n,a),r=e.color||this.color.clone(),l=s.width/n,c=s.getContext("2d");c.font="Bold "+i+"px Arial";var h=e.offset||new d.Vector3(0,0,6.5),u=new Image,p=!0;u.crossOrigin="Anonymous",c.fillStyle=v(r,.75),c.fillRect(0,0,s.width,s.height),c.fillStyle=v(r.multiplyScalar(1.2)),c.fillRect(0,0,s.width,.05*s.height),c.fillStyle=v(r||new d.Color(1,1,1)),c.font=(p?"Bold ":"")+(Math.floor(i*l)||12)+"px Arial";var w=c.measureText(o),y=w.width;this.drawText(c,o,.5*(s.width-y)*l,(.52*s.height+4)*l,i*l,null,p);var b=new d.Texture(s);b.anisotropy=16,b.minFilter=d.NearestFilter,b.magFilter=d.NearestFilter,b.needsUpdate=!0;var x=g(s.width,s.height,b);this.trafficEventSprite=x,x.name=e.name,x.position.x=h.x,x.position.z=h.z,this.add(x)}}},{key:"drawRobocopEventImg",value:function(){if(this.imgSprite)this.imgSprite.visible=!0;else{var e=this,t=new d.Vector3(10,0,8);if(this.eventImg){var i=this.eventImg,o=new Image;o.crossOrigin="Anonymous",o.width=1536,o.height=864,o.src=i,o.onload=function(i){var o=new d.Texture(this);o.anisotropy=4,o.minFilter=d.NearestFilter,o.magFilter=d.NearestFilter,o.needsUpdate=!0;var n=g(1536,864,o);n.material.transparent=!1,e.imgSprite=n,n.name="robocopEvent",n.position.x=t.x,n.position.z=t.z,e.add(n)}}}}},{key:"drawText",value:function(e,t,i,o,n,a,s){e.fillStyle=v(a||new d.Color(1,1,1)),e.font=(s?"Bold ":"")+(Math.floor(n)||12)+"px Arial",e.fillText(t,Math.ceil(i),Math.ceil(o))}},{key:"raycast",value:function(e,t){var i=[],o=new d.Sphere;o.copy(this.boundingSphere),o.applyMatrix4(this.matrixWorld);var n=e.ray.intersectsSphere(o);if(n){t.push({object:this,point:n,distance:e.ray.origin.distanceTo(n)});for(var a=0;a<this.children.length;a++){var s=this.children[a];s.visible&&s.raycast(e,i)}for(var r=0;r<i.length;r++){var l=i[r];l.distance=e.ray.origin.distanceTo(l.point)}if(i.sort((function(e,t){return e.distance-t.distance})),i.length)for(var c=0;c<i.length;c++)t.push(i[c]);return t}}},{key:"faceToCamera",value:function(e){this.top.rotation.y=e.rotation.z;var t=e.rotation.z;this.trafficEventSprite&&(this.trafficEventSprite.rotation.y=t),this.imgSprite&&(this.imgSprite.position.x=10*Math.cos(t),this.imgSprite.position.y=10*Math.sin(t),this.imgSprite.rotation.y=e.rotation.z),this.iconSprite&&(this.iconSprite.rotation.y=e.rotation.z)}},{key:"update",value:function(){this.hoverState&&this.top.update()}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,o.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,o.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}]),t}(d.Object3D);function v(e,t){return"rgba("+255*e.r+","+255*e.g+","+255*e.b+","+(t=t||1)+")"}function m(e,t){var i=document.createElement("canvas"),o=d.MathUtils.ceilPowerOfTwo(e);return i.width=o,i.height=t*o/e,i}function g(e,t,i){var o=new d.MeshBasicMaterial({map:i,transparent:!0}),n=new d.PlaneBufferGeometry(.015*e,.015*t,1,1),a=new d.Mesh(n,o);return a.rotateX(.5*Math.PI),a}function w(){this.trafficEventSprite?this.trafficEventSprite.visible=!0:this.drawTrafficEventImg(),this.hoverState=!0,this.iconSprite&&(this.iconSprite.scale.x=1.2,this.iconSprite.scale.y=1.2)}function y(){this.iconSprite&&(this.iconSprite.scale.x=1,this.iconSprite.scale.y=1),this.hoverState=!1,this.clickState=!1,this.imgSprite&&(this.imgSprite.visible=!1),!this.onlyAnimition&&this.trafficEventSprite&&(this.trafficEventSprite.visible=!1)}function b(){this.clickState=!0,this.imgSprite?this.imgSprite.visible=!0:this.drawRobocopEventImg()}},497:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.color?new o.Color(e.color):new o.Color("rgb(242, 202, 126)"),i=e.rectWidth||1.2*e.itemScale,n=e.rectHeight||1.2*e.itemScale,a=e.lineWidth||.05,s=e.lineLength||.25,r=e.opacity||1,l=function(e,t,i,n){var a=[],s=[];a.push(-e,-t,0),a.push(e,-t,0),a.push(e,t,0),a.push(-e,t,0),a.push(n-e,-t,0),a.push(e,n-t,0),a.push(e-n,t,0),a.push(-e,t-n,0),a.push(n-e,i-t,0),a.push(e-i,n-t,0),a.push(e-n,t-i,0),a.push(i-e,t-n,0),a.push(i-e,i-t,0),a.push(e-i,-t,0),a.push(e,t-i,0),a.push(i-e,t,0),a.push(i-e,-t,0),a.push(e,i-t,0),a.push(e-i,t,0),a.push(-e,t-i,0),a.push(i-e,n-t,0),a.push(e-n,i-t,0),a.push(e-i,t-n,0),a.push(n-e,t,0),a.push(-e,n-t,0),a.push(e-n,-t,0),a.push(e,t-n,0),a.push(n-e,t-i,0),s.push(0,4,8),s.push(0,8,12),s.push(0,16,20),s.push(0,20,24),s.push(1,5,9),s.push(1,9,13),s.push(1,17,21),s.push(1,21,25),s.push(2,6,10),s.push(2,10,14),s.push(2,18,22),s.push(2,22,26),s.push(3,7,11),s.push(3,11,15),s.push(3,19,27),s.push(3,27,23);var r=new o.BufferGeometry;return r.setAttribute("position",new o.BufferAttribute(new Float32Array(a),3)),r.setIndex(s),r}(.5*i,.5*n,a,s),c=new o.Mesh(l,new o.MeshBasicMaterial({color:t,opacity:r,side:o.DoubleSide,transparent:!0}));return c.update=function(){this.material.opacity+=.05,this.material.opacity>1&&(this.material.opacity=.1),this.scale.x+=.01,this.scale.y+=.01,this.scale.x>2&&(this.scale.x=1,this.scale.y=1)},c};var o=i(0)},498:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.color?new o.Color(e.color):new o.Color("rgb(242, 202, 126)"),i=e.rectWidth||1.2*e.itemScale,n=e.rectHeight||1.2*e.itemScale,a=(e.lineWidth,e.lineLength,e.opacity||1),s=function(e,t){var i=[],n=[];i.push(0,t,0),i.push(-.433*e,.5*t,0),i.push(-.433*e,-.5*t,0),i.push(0,-t,0),i.push(.433*e,-.5*t,0),i.push(.433*e,.5*t,0),i.push(0,t,0),n.push(0,1,2),n.push(2,3,4),n.push(4,5,6),n.push(0,2,4);var a=new o.BufferGeometry;return a.setAttribute("position",new o.BufferAttribute(new Float32Array(i),3)),a.setIndex(n),a}(.5*i,.5*n),r=new o.Mesh(s,new o.MeshBasicMaterial({color:t,opacity:a,side:o.DoubleSide,transparent:!0}));return r.update=function(){this.material.opacity+=.05,this.material.opacity>1&&(this.material.opacity=.1),this.scale.x+=.01,this.scale.y+=.01,this.scale.x>2&&(this.scale.x=1,this.scale.y=1)},r};var o=i(0)},499:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color?new o.Color(e.color):new o.Color(1,0,0),i=e.colorTrip?new o.Color(e.colorTrip):new o.Color(1,1,0),s=e.startPoint||new o.Vector3(0,0,0),r=e.endPoint||new o.Vector3(30,30,0),l=1.1*Math.abs(r.x-s.x),c=20;c=r.z-s.z>0?3*r.z:3*s.z;var d=new o.Vector3(0,0,s.z);r.x-s.x<0&&(d=new o.Vector3(0,0,0));var h=new o.Vector3((r.x-s.x)/4,(r.y-s.y)/4,c),u=new o.Vector3((r.x-s.x)/2,(r.y-s.y)/2,c),f=new o.Vector3(r.x-s.x,r.y-s.y,r.z);r.x-s.x<0&&(f=new o.Vector3(r.x-s.x,r.y-s.y,s.z));var p=new o.CubicBezierCurve3(d,h,u,f),v=p.getPoints(5*l),m=new o.Geometry;m.vertices=v;var g={},w=new o.ShaderMaterial({uniforms:{time:{type:"f",value:0},size:{type:"f",value:25},colorf:{type:"v3",value:i},colort:{type:"v3",value:i}},vertexShader:n,fragmentShader:a,defaultAttributeValues:g,transparent:!0,sizeAttenuation:!1}),y=new o.PointCloud(m,w);y.minx=0,y.maxx=l,y.update=function(){if(this.material instanceof o.ShaderMaterial){var e=this.material.uniforms.time.value,t=this.material.uniforms.size.value;e>this.maxx&&(this.material.uniforms.time.value=y.minx-t),this.material.uniforms.time.value+=1}};var b=new o.LineBasicMaterial({color:t,precision:"mediump"}),x=new o.Line(m,b);r.x-s.x<0?(y.rotateZ(Math.PI),y.position.x=r.x,y.position.y=r.y,y.position.z=0,x.position.x=r.x,x.position.y=r.y,x.position.z=0,x.rotateZ(Math.PI)):(y.position.x=s.x,y.position.y=s.y,y.position.z=0,x.position.x=s.x,x.position.y=s.y,x.position.z=0);return y.layers.enable(0),y.layers.mask=1,{flyline:y,line:x}};var o=i(0),n="\n  uniform float time;\n  uniform float size;\n  varying vec3 iPosition;\n\n  void main(){\n      iPosition = vec3(position);\n      float pointsize = 1.;\n      if (position.x > time && position.x < (time + size)){\n          pointsize = (position.x - time) / size;\n      }\n      gl_PointSize = pointsize * 5.0;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n  }\n",a="\n  uniform float time;\n  uniform float size;\n  uniform vec3 colorf;\n  uniform vec3 colort;\n  varying vec3 iPosition;\n  void main( void ) {\n      float end = time + size;\n      vec4 color;\n      if (iPosition.x > end || iPosition.x < time){\n          discard;\n          // color = vec4(0.213,0.424,0.634,0.3);\n      }else if (iPosition.x > time && iPosition.x < end){\n          float step = fract((iPosition.x - time)/size);\n\n          float dr = abs(colort.x - colorf.x);\n          float dg = abs(colort.y - colorf.y);\n          float db = abs(colort.z - colorf.z);\n\n          float r = colort.x > colorf.x?(dr*step+colorf.x):(colorf.x -dr*step);\n          float g = colort.y > colorf.y?(dg*step+colorf.y):(colorf.y -dg*step);\n          float b = colort.z > colorf.z?(db*step+colorf.z):(colorf.z -db*step);\n\n          color = vec4(r,g,b,1.0);\n      }\n      float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n      if (abs(iPosition.x - end) < 0.2 || abs(iPosition.x - time) < 0.2){\n          if (d > 0.5){\n              discard;\n          }\n      }\n      gl_FragColor = color;\n  }\n  "},500:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTripLine=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertices||[],i=e.line||null,s=e.speed||1,r=e.color?e.color:new o.Color(1,0,0),l=e.colorTrip?e.colorTrip:new o.Color(1,1,0),c=e.dashOffset||.01,d=e.dashSize||.1,h=e.tripSize||.4,u=new o.Vector3,f=void 0;if(t.length){var p=[];u.x=t[0][0],u.y=t[0][1],u.z=t[0][2]||0;for(var v=0;v<t.length;v++)p.push({x:t[v][0]-u.x+.1,y:t[v][1]-u.y+.1});f=(new o.Geometry).setFromPoints(p)}else{if(!i)return null;u.copy(i.position),f=i.geometry}var m=new o.RawShaderMaterial({uniforms:{color:{value:r},colorTrip:{value:l},dashOffset:{value:c},dashSize:{value:d},totalSize:{value:d+h}},vertexShader:n,fragmentShader:a,side:o.DoubleSide,transparent:!0}),g=new o.LineSegments(f,m);return g.computeLineDistances(),g.position.x=u.x,g.position.y=u.y,g.flag=1,g.update=function(){this.material instanceof o.RawShaderMaterial&&this.flag&&(this.material.uniforms.dashOffset.value+=5*s,this.material.uniforms.dashOffset.value>this.dashSize+this.tripSize&&(this.material.uniforms.dashOffset.value=0))},g};var o=i(0),n="\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    attribute vec3 position;\n    attribute float lineDistance;\n\n    varying float vLineDistance;\n\n    void main() {\n\n        vLineDistance = lineDistance;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",a="\n    precision mediump float;\n    precision mediump int;\n    varying float vLineDistance;\n    uniform vec3 color;\n    uniform vec3 colorTrip;\n    uniform float dashOffset;\n    uniform float totalSize;\n    uniform float dashSize;\n    void main() {\n        \n        if (mod(vLineDistance + dashOffset, totalSize ) > dashSize) {\n\n            gl_FragColor = vec4(colorTrip, 1.0);\n    \n        }else{\n            discard;\n            // gl_FragColor = vec4(color, 1.0 );\n        }\n    }"},501:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWaveCircle=n;var o=i(0);function n(e){var t=e.color||new o.Color,i=e.radius||10,n=new o.PlaneBufferGeometry(2*i,2*i,1,1),a=new o.RawShaderMaterial({uniforms:{factor:{value:0},color:{value:t},radius:{value:.5*i}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform float factor;\n    uniform vec3 color;\n    varying vec3 vPosition;\n    uniform float radius;\n\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        float r1 = abs(radius*factor);\n        float r2 = r1 + 0.5*r1;\n        float r3 = r1 + 0.75*r1;\n        if(d<=r1) {\n            gl_FragColor = vec4(color, clamp(d/radius,0.25,0.9));\n        }else if(d<=r2) {\n            gl_FragColor = vec4(color, clamp((d-r1)/radius,0.2,1.0));\n        }else if(d<=r3) {\n            gl_FragColor = vec4(color, clamp((d-r2)/radius,0.2,1.0));\n        }else{\n            // gl_FragColor = vec4(color, 1.0);\n            discard;\n        }\n\n\n\n    }\n  ",side:o.FrontSide,transparent:!0}),s=new o.Mesh(n,a);return s.update=function(){this.material.uniforms.factor.value+=this.material.uniforms.factor.value>1?-1:.01},s}t.default=n},502:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolylineTripLayer=void 0;var o=r(i(19)),n=r(i(20)),a=i(17),s=(r(i(40)),i(0));function r(e){return e&&e.__esModule?e:{default:e}}t.PolylineTripLayer=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),this.width=t.width||1,this.isBlock=t.isBlock||!0,this.time=t.time||1,this.color=new s.Color(t.color)||new s.Color(1,0,0),this.colorTrip=new s.Color(t.colorTrip)||new s.Color(1,0,0),this.dashOffset=t.Offset||.01,this.dashRatio=t.dashRatio||.6,this.dashArray=t.dashArray||.35,this.data=t.data||null,this.offset=t.offset||new s.Vector3(0,0,0)}return(0,n.default)(e,[{key:"setData",value:function(e,t){return new a.PolylineTrip({width:this.width,vertices:e.geometry.coordinates,color:this.color,time:this.time,colorTrip:this.colorTrip,dashOffset:this.dashOffset,dashRatio:this.dashRatio,dashArray:this.dashArray,isBlock:this.isBlock,offset:this.offset})}}]),e}()},503:function(e){e.exports=JSON.parse('[{"x":413993.24,"y":4335201.45,"z":0,"color":"","id":"20000000","name":"20000000","rotateX":0,"rotateY":0,"rotateZ":280.01,"scale":0,"opacity":0,"isTips":false,"isVisble":true,"isClick":false,"classType":"010517","lodMax":1,"lodMin":1,"text":"K28+0","isCilck":false,"modelType":"公里桩","deviceId":"20000000","isFromGeojson":1,"_id":"200000001629255194992","type":"010517"}]')},504:function(e){e.exports=JSON.parse('[{"x":442431.72,"y":4408062,"z":38.4,"color":"#ffffff","id":"0408","name":"北京市","rotateX":0,"rotateY":0,"rotateZ":50,"scale":30,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":402902.69,"y":4322069.62,"z":38.4,"color":"#ffffff","id":"0409","name":"雄安","rotateX":0,"rotateY":0,"rotateZ":50,"scale":30,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":486285,"y":4368249.85,"z":38.4,"color":"#ffffff","id":"0401","name":"天津市","rotateX":0,"rotateY":0,"rotateZ":50,"scale":30,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":417569,"y":4337172.93,"z":8.4,"color":"#ffffff","id":"0401","name":"泗庄镇","rotateX":0,"rotateY":0,"rotateZ":50,"scale":8,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":413120.85577,"y":4370551.7021,"z":8.4,"color":"#ffffff","id":"0402","name":"涿州市","rotateX":0,"rotateY":0,"rotateZ":50,"scale":14,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":436963.54915,"y":4356228.7594,"z":8.4,"color":"#ffffff","id":"0403","name":"固安县","rotateX":0,"rotateY":0,"rotateZ":50,"scale":14,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":417068.25859,"y":4346078.602,"z":8.4,"color":"#ffffff","id":"0404","name":"高碑店市","rotateX":0,"rotateY":0,"rotateZ":50,"scale":14,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":449313.288908,"y":4373541.044,"z":8.4,"color":"#ffffff","id":"0405","name":"大兴机场","rotateX":0,"rotateY":0,"rotateZ":50,"scale":14,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":411877.47013,"y":4313063.5899,"z":8.4,"color":"#ffffff","id":"0406","name":"雄安新区","rotateX":0,"rotateY":0,"rotateZ":50,"scale":20,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":414911.7430856234,"y":4335315.21,"z":8.4,"color":"#42F5FF","id":"0407","name":"京雄高速","rotateX":0,"rotateY":0,"rotateZ":50,"scale":10,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1},{"x":424593.1120622729,"y":4379116.79757631,"z":8.4,"color":"#42F5FF","id":"04091","name":"京雄高速","rotateX":0,"rotateY":0,"rotateZ":50,"scale":10,"isVisble":true,"isCilck":false,"classType":"0401","lodMax":"","lodMin":"","lod":1}]')},505:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.style={back:{color:"#122246",offset:[0,0,.1],opacity:1,visible:!0},building:{color:"#324770",offset:[0,0,0],opacity:.8,scale:[1,1,2],topColor:"#4e6495",transprent:!0,visible:!0,wire:!0},crosswalk:{color:"#8BAFE9",offset:[0,0,.2],opacity:1,visible:!1},directional:{color:"#fff",intensity:.4,offset:[0,0,0],visible:!1},grass:{color:"#195865",offset:[0,0,0],opacity:.3,visible:!0},hemiLight:{color:"#fff",groundColor:"fff",intensity:1,offset:[0,0,0],visible:!0},laneDottedWhite:{color:"#B9D4FF",dashSize:3,gapSize:3,offset:[0,0,.2],opacity:1,visible:!1,width:2},laneDottedYellow:{color:"#D7D089",dashSize:3,gapSize:3,offset:[0,0,.2],opacity:1,visible:!1,width:2},laneSolidWhite:{color:"#B9D4FF",offset:[0,0,.2],opacity:1,visible:!1,width:2},laneSolidYellow:{color:"#CFC77C",offset:[0,0,.2],opacity:1,visible:!1,width:2},linkCountyRoad:{color:"#295390",offset:[0,0,.1],opacity:.5,visible:!0,width:1},linkExpressway:{color:"#2e5d78",offset:[0,0,.1],opacity:.5,visible:!0,width:1},linkHightway:{color:"#2e5d78",offset:[0,0,0],opacity:.3,visible:!0,width:2},linkNPRoad:{color:"#295390",offset:[0,0,.1],opacity:1,visible:!0,width:1},linkOther:{color:"#202E54",offset:[0,0,.1],opacity:0,visible:!1,width:3},linkTownshipRoad:{color:"#35456F",offset:[0,0,0],opacity:1,visible:!1,width:1},mountain:{color:"#2A4352",visible:!0,width:1},other:{color:"#7ECEFC",offset:[0,0,.11],visible:!0},plane:{color:"#101F3a",offset:[749956,2566189,-2],opacity:1,visible:!0},pointlight:{color:"#FFFFFF",distance:900,intensity:.3,offset:[0,0,0],visible:!1},range:{color:"#092C71",offset:[0,0,300],opacity:1,visible:!0,width:1},region:{color:"#5472A3",offset:[0,0,.1],opacity:.8,visible:!1,width:1},river:{color:"#0E2A46",offset:[0,0,-1],opacity:.6,visible:!1},road:{color:"#5B77AF",offset:[0,0,.2],opacity:1,visible:!1},roadEdge:{color:"#e5e2fa",offset:[0,0,.2],opacity:1,visible:!1},stopLine:{color:"#93B9F6",offset:[0,0,.2],opacity:1,visible:!1,width:1},township:{color:"#0D60EE",offset:[0,0,.1],opacity:1,visible:!1,width:2}},t.fonts=[{name:"DINAlternate-Bold",url:"./assets/fonts/DINAlternateBold.ttf"},{name:"PingFang-SC-Regular",url:"./assets/fonts/PingFang-SC-Regular.ttf"},{name:"PingFangSC-Semibold",url:"./assets/fonts/PingFang-SC-Semibold.ttf"},{name:"HyperspaceRace-Bold",url:"./assets/fonts/FontsFree-Net-HyperspaceRace-Bold.ttf"},{name:"FZZYJW--GB1-0",url:"./assets/fonts/FZZYJW--GB1-0.ttf"},{name:"FZLTZHK--GBK1-0",url:"./assets/fonts/FZLTZHK--GBK1-0.TTF"}],t.stackLabelConfig={content:{content:{text:"K83 + 283",size:100,color:"#4FE0FF",position:[339,55],textAlign:"center",fontFamily:"DINAlternate-Bold"},x:{text:"116.7898",size:38,color:"#fff",position:[152,182],textAlign:"left",fontFamily:"DINAlternate-Bold"},y:{text:"37.7898",size:38,color:"#fff",position:[441,182],textAlign:"left",fontFamily:"DINAlternate-Bold"}},bg:[{url:"./assets/image/stack-back.png",position:[0,0],size:[678.5,289]}],size:{width:678.5,height:289}},t.eventLabelConfig={content:{name:{text:"道路施工",size:40,color:"#fff",position:[248,78],textAlign:"left",fontFamily:"PingFangSC-Semibold"},info:{text:"前方450M | 第二车道",size:20,color:"#d26e6e",position:[248,136],textAlign:"left",fontFamily:"PingFangSC-Semibold"}},bg:[{url:"./assets/image/event-back.png",position:[0,0],size:[536.5,245.5]}],size:{width:536.5,height:245.5}},t.buildLabelConfig={content:{name:{text:"京雄高速监控中心",size:120,color:"#fff",position:[876,189],textAlign:"center",fontFamily:"PingFangSC-Semibold"}},bg:[{url:"./assets/image/build-label.png",position:[0,0],size:[1752,498]}],size:{width:1752,height:498}},t.arrLigths=[[414455.2449097388,4335736.003884801,10.3,130,-15],[414481.23758393066,4335766.162787894,10.3,130,-15],[414507.259872136,4335796.641669391,10.3,130,-15],[414428.4640718395,4335706.1729735,10.3,130,-15],[414402.08437355584,4335676.039785716,10.3,130,-15]],t.tollStation=[{id:5,name:"雄安收费站",coordinates:[413868.62,4335084.12],distance:"K92+513"},{id:1,name:"涿州东收费站",coordinates:[429353.8,4374085.77],distance:"K35+911"},{id:2,name:"泗庄收费站",coordinates:[417318.65,4338474.29],distance:"K76+791"},{id:3,name:"高碑店东收费站",coordinates:[427614.33,4353138.04],distance:"K57+091"},{id:4,name:"固安西收费站",coordinates:[430871.81,4368981.88],distance:"K40+363"}],t.zhichaoList=[{name:"治超广场-雄安收费站",coordinates:[413815.73,4334981.27],distance:"K92+513"},{name:"治超广场-泗庄收费站",coordinates:[417111.95,4338464.33],distance:"K76+791"},{name:"治超广场-高碑店东收费站",coordinates:[429881.41,4360662.13],distance:"K57+091"},{name:"治超广场-固安西收费站",coordinates:[431126.34,4368715.96],distance:"K39+150"},{name:"治超广场-涿州东收费站",coordinates:[429110.06,4374125.23],distance:"K35+911"}],t.guanyangList=[{name:"管养所-固安西",coordinates:[431122.62,4368921.66],distance:"K40+363"},{name:"管养所-泗庄",coordinates:[417243.66,4338393.12],distance:"K76+791"}],t.viaductList=[{name:"泗庄枢纽立交",coordinates:[414934.46,4336224.9]},{name:"义和庄枢纽立交",coordinates:[429652.35,4378841.38]},{name:"东湾枢纽立交",coordinates:[429881.41,4360662.15]},{name:"雄安北枢纽立交",coordinates:[409681.03,4322468.48]}],t.portalList=[{id:17470829,name:"收费门架",coordinates:[429824.29,4371148.75]},{id:17470836,name:"收费门架",coordinates:[429860.87,4371104.12]},{id:17471607,name:"收费门架",coordinates:[429586.11,4377061.93]},{id:17471849,name:"收费门架",coordinates:[429722.2,4380261.69]},{id:17472058,name:"收费门架",coordinates:[429701.04,4380303.85]},{id:17472209,name:"收费门架",coordinates:[429705.28,4379776.2]},{id:17472592,name:"收费门架",coordinates:[429658.44,4381302.3]},{id:1749e4,name:"收费门架",coordinates:[429605.82,4377066.19]},{id:17493454,name:"收费门架",coordinates:[415984.66,4337280.51]},{id:17493455,name:"收费门架",coordinates:[415883.91,4337167.74]},{id:17495645,name:"收费门架",coordinates:[427986,4352478.4]},{id:17495914,name:"收费门架",coordinates:[428042.06,4352298.6]},{id:17495914,name:"收费门架",coordinates:[427860.37,4355235.14]},{id:17495914,name:"收费门架",coordinates:[427880.56,4355172.58]},{id:17495914,name:"收费门架",coordinates:[430616.18,4367724.06]},{id:17495914,name:"收费门架",coordinates:[430600.49,4367784.09]}],t.serviceCenterList=[{id:1,name:"白沟服务区",coordinates:[413634.4,4335051.09]},{id:2,name:"义和庄服务区",coordinates:[429547.71,4375672.43]}]},506:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColorByState=t.getVertexColors=t.getNormalDirectionByIndex=t.loadCentrolRoad=void 0;var o=i(0);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e<2?[.38,1,.305,1]:e<3?[1,.827,.301,1]:e<4?[1,.56,.137,1]:[1,.305,.305,1]}t.loadCentrolRoad=function(e,t){var i=new o.FileLoader;i.setResponseType("json"),i.load(e,(function(e){t(e.features)}))},t.getNormalDirectionByIndex=function(e,t){return!(!t||t.length<1)&&(!(e>=t.length-1)&&new o.Vector3(t[e+1][0]-t[e][0],t[e+1][1]-t[e][1],0).normalize())},t.getVertexColors=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e.length<1)return null;for(var i=[],o=0,a=e.length;o<a;o++)for(var s=e[o],r=s.geometry.coordinates,l=s.properties.states,c=n(l),d=0;d<r.length;d++)i.push(c[0],c[1],c[2]);return t?(new Array).concat(i).concat(i):i},t.getColorByState=n},507:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(i(21)),n=r(i(25)),a=r(i(468)),s=r(i(89));function r(e){return e&&e.__esModule?e:{default:e}}var l=a.default.BasicLabel;t.default={mounted:function(){},methods:{createDeviceLabel:function(e,t,i,o,a){var s=this,r=e.name,c=e.id,d=e.direction,h=t.warningDevices,u=t.normalDevices,f=[0,81],p=h.map((function(e,t){var i=e.name,o={id:e.id,backgroundImage:"./assets/image/warning-item@3x.png",width:270,height:50,marginRight:19,textList:[{text:i,fontSize:22,color:"#fff",position:[26,14.5],fontFamily:"FZLTZHK--GBK1-0"}]};return t||(o.position=f),o})),v=[0,81+50*Math.ceil(h.length/2)+30],m=u.map((function(e,t){var i=e.name,o=e.bigContent,n=e.value,a=e.unit,s=e.id,r=void 0;return r=o?{id:s,backgroundImage:"./assets/image/normal-big-item@3x.png",width:274,height:162,marginRight:19,marginBottom:6,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:n,fontSize:70,color:"#ABFBFF",position:[26,72],fontFamily:"DINAlternate-Bold"},{text:a,fontSize:20,color:"#CCD7EC",position:[172,113],fontFamily:"FZLTZHK--GBK1-0"}]}:{id:s,backgroundImage:"./assets/image/normal-item@3x.png",width:274,height:50,marginBottom:6,marginRight:19,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"}]},t||(r.position=v),r})),g=[{textList:[{text:r,fontSize:32,color:"#fff",position:[0,0],fontFamily:"PingFangSC-Semibold"},{text:c,fontSize:38,color:"#ABFBFF",position:[142,0],fontFamily:"DINAlternate-Bold"},{text:d,fontSize:16,color:"#768CB1",position:[468,20],fontFamily:"PingFangSC-Semibold"}]}];if(o)return a.drawContent(g.concat(p,m)),a;var w=new l({scaleNum:20,sizeAttenuation:!0,center:{x:0,y:0},style:{width:678.5,height:514.09,backgroundImage:"./assets/image/device-back@3x.png",paddingTop:42,paddingLeft:42},content:g.concat(p,m)}),y=(0,n.default)(i,3),b=y[0],x=y[1],S=y[2];return w.position.set(b,x,S),this.Map.viewer.scene.addModel(w),w.addEventListener("itemClick",(function(e){console.log(e.id);var t=s.Map.viewer.scene.getObjectByProperty("modelId",e.id);console.log(t)})),w},updateDeviceLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.warningDevices,o=t.normalDevices,n=t.name,a=t.id,s=t.direction,r=[{textList:[{text:n,fontSize:32,color:"#fff",position:[0,0],fontFamily:"PingFangSC-Semibold"},{text:a,fontSize:38,color:"#ABFBFF",position:[142,0],fontFamily:"DINAlternate-Bold"},{text:s,fontSize:16,color:"#768CB1",position:[468,20],fontFamily:"PingFangSC-Semibold"}]}],l=this.deviceLabelMap[e];l.drawContent(r.concat(i,o))},drawWeatherLabel:function(e,t,i,o,a){var s=e.name,r=e.direction,c=[];2===e.status&&c.push({backgroundImage:"./assets/image/warning-item@3x.png",width:270,height:50,marginRight:19,position:[0,62],textList:[{text:s,fontSize:22,color:"#fff",position:[26,14.5],fontFamily:"FZLTZHK--GBK1-0"}]});var d=[0,62+50*Math.ceil(c.length/2)+30],h=t.map((function(e,t){var i=e.label,o=e.value,n=e.detail,a=e.unit,s=void 0;return s=n?{backgroundImage:"./assets/image/weather-normal-big.png",width:274,height:162,marginRight:19,marginBottom:6,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:n,fontSize:70,color:"#ABFBFF",position:[26,72],fontFamily:"DINAlternate-Bold"},{text:o,fontSize:18,color:"#fff",position:[206,16.5],textAlign:"center",fontFamily:"FZLTZHK--GBK1-0"}]}:{backgroundImage:"./assets/image/weather-normal.png",width:274,height:50,marginBottom:6,marginRight:19,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:o+a,fontSize:18,color:"#fff",position:[206,16.5],textAlign:"center",fontFamily:"FZLTZHK--GBK1-0"}]},t||(s.position=d),s})),u=[{textList:[{text:s,fontSize:32,color:"#fff",position:[0,2],fontFamily:"PingFangSC-Semibold"},{text:r,fontSize:16,color:"#768CB1",position:[468,20],fontFamily:"PingFangSC-Semibold"}]}];if(o)return a.drawContent(u.concat(c,h)),a;var f=new l({scaleNum:20,sizeAttenuation:!0,style:{width:678.5,height:514.09,backgroundImage:"./assets/image/device-back@3x.png",paddingTop:42,paddingLeft:42},content:u.concat(c,h)}),p=(0,n.default)(i,3),v=p[0],m=p[1],g=p[2];return f.position.set(v,m,g),this.Map.viewer.scene.addModel(f),f},drawSmallLabel:function(e,t,i,o,a,s){var r=[];2===t&&r.push({backgroundImage:"./assets/image/warning-item@3x.png",width:270,height:50,marginRight:19,position:[0,62],textList:[{text:e,fontSize:22,color:"#fff",position:[26,14.5],fontFamily:"FZLTZHK--GBK1-0"}]});var c=[0,62+50*Math.ceil(r.length/2)],d=[];1===t&&d.push({backgroundImage:"./assets/image/normal-item@3x.png",width:274,height:50,position:c,marginBottom:6,marginRight:19,textList:[{text:e,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"}]});var h=[{textList:[{text:e,fontSize:32,color:"#fff",position:[0,0],fontFamily:"PingFangSC-Semibold"},{text:i,fontSize:38,color:"#ABFBFF",position:[142,0],fontFamily:"DINAlternate-Bold"}]}];if(a)return s.drawContent(h.concat(r,d)),s;var u=new l({scaleNum:20,sizeAttenuation:!0,style:{width:380,height:222.5,backgroundImage:"./assets/image/device-back@3x.png",paddingTop:42,paddingLeft:42},content:h.concat(r,d)}),f=(0,n.default)(o,3),p=f[0],v=f[1],m=f[2];return u.position.set(p,v,m),this.Map.viewer.scene.addModel(u),u},drawChassisLabel:function(e,t,i,a,r){var c=e.name,d=e.direction,h=e.status,u=e.id,f=[];2===h&&f.push({backgroundImage:"./assets/image/warning-item@3x.png",width:270,height:50,marginRight:19,position:[0,62],textList:[{text:c,fontSize:22,color:"#fff",position:[26,14.5],fontFamily:"FZLTZHK--GBK1-0"}]});var p=62+50*Math.ceil(f.length/2)+30,v=[0,p],m=null,g=s.default.sortBy(t,(function(e){return e.image})).map((function(e,t){var i=e.label,n=e.value,a=e.detail,s=e.unit,r=e.image,l=void 0;return(0,o.default)(e).includes("image")?(l={backgroundImage:"./assets/image/image-box.png",width:210,height:274,marginRight:19,marginBottom:6,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:a,fontSize:70,color:"#ABFBFF",position:[26,72],fontFamily:"DINAlternate-Bold"},{text:n,fontSize:18,color:"#fff",position:[206,16.5],textAlign:"center",fontFamily:"FZLTZHK--GBK1-0"}]},m={backgroundImage:r||"./assets/image/no-pic.png",width:208,height:222,marginRight:19,marginBottom:6,position:[0,p+50],textList:[]}):l={backgroundImage:"./assets/image/small-item.png",width:329,height:50,marginBottom:6,marginRight:19,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:n+s,fontSize:18,color:"#fff",position:[155,16.5],fontFamily:"FZLTZHK--GBK1-0"}]},t||(l.position=v),l})),w=[{textList:[{text:c,fontSize:32,color:"#fff",position:[0,2],fontFamily:"PingFangSC-Semibold"},{text:u,fontSize:38,color:"#ABFBFF",position:[142,0],fontFamily:"DINAlternate-Bold"},{text:d,fontSize:16,color:"#768CB1",position:[468,20],fontFamily:"PingFangSC-Semibold"}]}];if(a)return r.drawContent(w.concat(f,g,m?[m]:[])),r;var y=new l({scaleNum:20,sizeAttenuation:!0,style:{width:670,height:533,backgroundImage:"./assets/image/device-back2.png",paddingTop:42,paddingLeft:42},content:w.concat(f,g,m?[m]:[])}),b=(0,n.default)(i,3),x=b[0],S=b[1],M=b[2];return y.position.set(x,S,M),this.Map.viewer.scene.addModel(y),y},drawStationLabel:function(e,t,i,o,a){var r=e.name,c=(e.direction,e.status),d=e.id,h=[];2===c&&h.push({backgroundImage:"./assets/image/warning-item@3x.png",width:270,height:50,marginRight:19,position:[0,62],textList:[{text:r,fontSize:22,color:"#fff",position:[26,14.5],fontFamily:"FZLTZHK--GBK1-0"}]});var u=[0,62+50*Math.ceil(h.length/2)+30],f=s.default.sortBy(t,(function(e){return e.image})).map((function(e,t){var i=e.label,o=e.value,n=e.detail,a=e.unit,s=void 0;return s=n?{backgroundImage:"./assets/image/large-item-big.png",width:258,height:134,marginRight:6,marginBottom:6,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:n,fontSize:40,color:"#ABFBFF",position:[37,60.5],fontFamily:"DINAlternate-Bold"},{text:a,fontSize:14,color:"#ABFBFF",position:[37,107],fontFamily:"PingFangSC-Semibold"}]}:{backgroundImage:"./assets/image/large-item.png",width:522,height:50,marginBottom:6,marginRight:19,textList:[{text:i,fontSize:22,color:"#fff",position:[26,16.5],fontFamily:"FZLTZHK--GBK1-0"},{text:o,fontSize:18,color:"#ABFBFF",position:[300,16.5],fontFamily:"DINAlternate-Bold FZLTZHK--GBK1-0"},{text:a,fontSize:14,color:" #8CAECE",position:[360,20],fontFamily:"DINAlternate-Bold FZLTZHK--GBK1-0"}]},t||(s.position=u),s})),p=[{textList:[{text:r,fontSize:32,color:"#fff",position:[0,2],fontFamily:"PingFangSC-Semibold"},{text:d,fontSize:38,color:"#ABFBFF",position:[220,0],fontFamily:"DINAlternate-Bold"}]}];if(o)return a.drawContent(p.concat(h,f)),a;var v=new l({scaleNum:20,sizeAttenuation:!0,style:{width:670,height:533,backgroundImage:"./assets/image/device-back2.png",paddingTop:42,paddingLeft:42},content:p.concat(h,f)}),m=(0,n.default)(i,3),g=m[0],w=m[1],y=m[2];return v.position.set(g,w,y),this.Map.viewer.scene.addModel(v),v}}}},508:function(e,t,i){var o={"./baigou_logo.glb":509,"./bicycle_char.glb":510,"./car.glb":511,"./jingxiong_logo.glb":512,"./newbicycle.glb":513,"./newbus.glb":514,"./newcar.glb":515,"./newmotorcycle.glb":516,"./newtricycle.glb":517,"./newtruck.glb":518,"./pedestrian_man_animate.glb":519,"./pedestrian_woman_animate.glb":520,"./robotaxi.glb":521,"./trafficcone.glb":522,"./walk_Ｍale.glb":523,"./wurenji.glb":524,"./wurenji01.glb":525,"./wurenji01_线框.glb":526,"./wurenji1.glb":527,"./出租车.glb":528,"./机器人.glb":529,"./蜗小白.glb":530};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id=508},509:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},510:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},511:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},512:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},513:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},514:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},515:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},516:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},517:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},518:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},519:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},520:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},521:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},522:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},523:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},524:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},525:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},526:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},527:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},528:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},529:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},530:function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},531:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[i("map-view",{ref:"view2",attrs:{id:"2","city-id":"xiongan","map-config":e.mapConfig,config:e.config,"project-id":e.projectId,mix:!0,"service-config":e.serviceConfig,"road-id":2,"rscu-id":"BDIF1908310003,BDIF1908310004","view-param":[110.0121592,39.1682684,118.35277,143.9642133,-.4209167,0],fonts:e.fonts},on:{trafficInit:e.trafficInit,clickObj:e.clickObj,getObj:e.getObj,levelChange:e.levelChange,viewChange:e.viewChange,pushDeviceStatus:e.pushDeviceStatus,mixEvents:e.mixEvents}}),e._v(" "),i("div",{staticClass:"tool",staticStyle:{"z-index":"12"}},[i("div",{staticClass:"btn-box"},[i("div",{staticClass:"title"},[e._v("环境")]),e._v(" "),i("div",{staticClass:"btn-list"},[i("div",{staticClass:"title"},[e._v("\n                    天气\n                    "),i("div",{staticClass:"btn",on:{click:e.showRain}},[e._v("雨")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showSnow}},[e._v("雪")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showfog}},[e._v("雾")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showCloud}},[e._v("云")])]),e._v(" "),i("div",{staticClass:"title"},[e._v("\n                    光照\n                    "),i("div",{staticClass:"btn",on:{click:e.showNight}},[e._v("夜晚")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.lights}},[e._v("灯")])])])]),e._v(" "),i("div",{staticClass:"btn-box"},[i("div",{staticClass:"title"},[e._v("视角跟随")]),e._v(" "),i("div",{staticClass:"btn-list"},[i("div",{staticClass:"title"},[e._v("\n                    视角切换\n                    "),i("div",{staticClass:"btn",on:{click:e.setCarView}},[e._v("单车视角")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.inCarView}},[e._v("车内视角")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.setPlantView}},[e._v("无人机视角")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.zoomToHome}},[e._v("总览")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.zoomToScene}},[e._v("场景")])]),e._v(" "),i("div",{staticClass:"title"},[e._v("\n                    巡航\n                    "),i("div",{staticClass:"btn inner",on:{click:e.start}},[e._v("开始")]),e._v(" "),i("div",{staticClass:"btn inner",on:{click:e.pause}},[e._v("暂停")]),e._v(" "),i("div",{staticClass:"btn inner",on:{click:e.stop}},[e._v("结束")])]),e._v(" "),i("div",{staticClass:"title"},[e._v("\n                    数字孪生\n                    "),i("div",{staticClass:"btn",on:{click:e.goToStack}},[e._v("K82+340")])])])]),e._v(" "),i("div",{staticClass:"btn-box"},[i("div",{staticClass:"title"},[e._v("模式")]),e._v(" "),i("div",{staticClass:"btn-list"},[i("div",{staticClass:"title"},[e._v("\n                    地面模式\n                    "),i("div",{staticClass:"btn",on:{click:function(t){return e.showUnderground(!1)}}},[e._v("地上模式")]),e._v(" "),i("div",{staticClass:"btn",on:{click:function(t){return e.showUnderground(!0)}}},[e._v("地下模式")])]),e._v(" "),i("div",{staticClass:"title"},[e._v("\n                    图层\n                    "),i("div",{staticClass:"btn",on:{click:e.createContruction}},[e._v("路况")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showFence}},[e._v("光带")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showTollStation}},[e._v("收费站")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showZhichao}},[e._v("治超站")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.showGuanyang}},[e._v("管养站")]),e._v(" "),i("div",{staticClass:"btn",class:{active:e.photoLayerStatus},on:{click:e.showPhoto}},[e._v("倾斜摄影")])]),e._v(" "),i("div",{staticClass:"title"},[e._v("\n                    数据来源\n                    "),i("div",{staticClass:"btn",on:{click:e.realData}},[e._v("真实")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.mockData}},[e._v("MOCK")]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.updateLMJ}},[e._v("龙门架测试")])])])])]),e._v(" "),i("div",{staticClass:"point",style:e.pointStyle})],1)},n=[];o._withStripped=!0}}]);