!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,(function(){return function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=0,l=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);l.length;)l.shift()()}var n={},i={1:0},r={1:0};function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{2:1,3:1,4:1,5:1,6:1,7:1,8:1}[e]&&t.push(i[e]=new Promise((function(t,n){for(var r=({}[e]||e)+".css",a=o.p+r,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=(h=s[l]).getAttribute("data-href")||h.getAttribute("href");if("stylesheet"===h.rel&&(c===r||c===a))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){var h;if((c=(h=u[l]).getAttribute("data-href"))===r||c===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[e],d.parentNode.removeChild(d),n(o)},d.href=a,document.getElementsByTagName("head")[0].appendChild(d)})).then((function(){i[e]=0})));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+""+e+".index.js"}(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var c=s;return o(o.s=232)}([function(e,t,n){"use strict";n.r(t),n.d(t,"ACESFilmicToneMapping",(function(){return ne})),n.d(t,"AddEquation",(function(){return T})),n.d(t,"AddOperation",(function(){return K})),n.d(t,"AdditiveAnimationBlendMode",(function(){return qt})),n.d(t,"AdditiveBlending",(function(){return w})),n.d(t,"AlphaFormat",(function(){return Fe})),n.d(t,"AlwaysDepth",(function(){return V})),n.d(t,"AlwaysStencilFunc",(function(){return Mn})),n.d(t,"AmbientLight",(function(){return _h})),n.d(t,"AmbientLightProbe",(function(){return Wh})),n.d(t,"AnimationClip",(function(){return Ou})),n.d(t,"AnimationLoader",(function(){return Ru})),n.d(t,"AnimationMixer",(function(){return wd})),n.d(t,"AnimationObjectGroup",(function(){return bd})),n.d(t,"AnimationUtils",(function(){return vu})),n.d(t,"ArcCurve",(function(){return Wu})),n.d(t,"ArrayCamera",(function(){return Ds})),n.d(t,"ArrowHelper",(function(){return hf})),n.d(t,"Audio",(function(){return td})),n.d(t,"AudioAnalyser",(function(){return sd})),n.d(t,"AudioContext",(function(){return Vh})),n.d(t,"AudioListener",(function(){return ed})),n.d(t,"AudioLoader",(function(){return Gh})),n.d(t,"AxesHelper",(function(){return df})),n.d(t,"AxisHelper",(function(){return sp})),n.d(t,"BackSide",(function(){return m})),n.d(t,"BasicDepthPacking",(function(){return on})),n.d(t,"BasicShadowMap",(function(){return u})),n.d(t,"BinaryTextureLoader",(function(){return dp})),n.d(t,"Bone",(function(){return ml})),n.d(t,"BooleanKeyframeTrack",(function(){return _u})),n.d(t,"BoundingBoxHelper",(function(){return lp})),n.d(t,"Box2",(function(){return kd})),n.d(t,"Box3",(function(){return Zn})),n.d(t,"Box3Helper",(function(){return af})),n.d(t,"BoxBufferGeometry",(function(){return go})),n.d(t,"BoxGeometry",(function(){return vo})),n.d(t,"BoxHelper",(function(){return of})),n.d(t,"BufferAttribute",(function(){return Mr})),n.d(t,"BufferGeometry",(function(){return Gr})),n.d(t,"BufferGeometryLoader",(function(){return Lh})),n.d(t,"ByteType",(function(){return Te})),n.d(t,"Cache",(function(){return ku})),n.d(t,"Camera",(function(){return _o})),n.d(t,"CameraHelper",(function(){return tf})),n.d(t,"CanvasRenderer",(function(){return mp})),n.d(t,"CanvasTexture",(function(){return Ul})),n.d(t,"CatmullRomCurve3",(function(){return Ku})),n.d(t,"CineonToneMapping",(function(){return te})),n.d(t,"CircleBufferGeometry",(function(){return iu})),n.d(t,"CircleGeometry",(function(){return nu})),n.d(t,"ClampToEdgeWrapping",(function(){return de})),n.d(t,"Clock",(function(){return Xh})),n.d(t,"ClosedSplineCurve3",(function(){return rp})),n.d(t,"Color",(function(){return gr})),n.d(t,"ColorKeyframeTrack",(function(){return Su})),n.d(t,"CompressedTexture",(function(){return zl})),n.d(t,"CompressedTextureLoader",(function(){return Bu})),n.d(t,"ConeBufferGeometry",(function(){return tu})),n.d(t,"ConeGeometry",(function(){return eu})),n.d(t,"CubeCamera",(function(){return Mo})),n.d(t,"CubeGeometry",(function(){return vo})),n.d(t,"CubeReflectionMapping",(function(){return oe})),n.d(t,"CubeRefractionMapping",(function(){return ae})),n.d(t,"CubeTexture",(function(){return Ko})),n.d(t,"CubeTextureLoader",(function(){return zu})),n.d(t,"CubeUVReflectionMapping",(function(){return ce})),n.d(t,"CubeUVRefractionMapping",(function(){return ue})),n.d(t,"CubicBezierCurve",(function(){return th})),n.d(t,"CubicBezierCurve3",(function(){return nh})),n.d(t,"CubicInterpolant",(function(){return yu})),n.d(t,"CullFaceBack",(function(){return s})),n.d(t,"CullFaceFront",(function(){return l})),n.d(t,"CullFaceFrontBack",(function(){return c})),n.d(t,"CullFaceNone",(function(){return a})),n.d(t,"Curve",(function(){return Gu})),n.d(t,"CurvePath",(function(){return ch})),n.d(t,"CustomBlending",(function(){return M})),n.d(t,"CustomToneMapping",(function(){return ie})),n.d(t,"CylinderBufferGeometry",(function(){return Zc})),n.d(t,"CylinderGeometry",(function(){return Jc})),n.d(t,"Cylindrical",(function(){return Od})),n.d(t,"DataTexture",(function(){return Eo})),n.d(t,"DataTexture2DArray",(function(){return Jo})),n.d(t,"DataTexture3D",(function(){return Zo})),n.d(t,"DataTextureLoader",(function(){return Uu})),n.d(t,"DecrementStencilOp",(function(){return fn})),n.d(t,"DecrementWrapStencilOp",(function(){return mn})),n.d(t,"DefaultLoadingManager",(function(){return Du})),n.d(t,"DepthFormat",(function(){return Ve})),n.d(t,"DepthStencilFormat",(function(){return Ge})),n.d(t,"DepthTexture",(function(){return Vl})),n.d(t,"DirectionalLight",(function(){return wh})),n.d(t,"DirectionalLightHelper",(function(){return Jd})),n.d(t,"DiscreteInterpolant",(function(){return xu})),n.d(t,"DodecahedronBufferGeometry",(function(){return tc})),n.d(t,"DodecahedronGeometry",(function(){return ec})),n.d(t,"DoubleSide",(function(){return v})),n.d(t,"DstAlphaFactor",(function(){return F})),n.d(t,"DstColorFactor",(function(){return B})),n.d(t,"DynamicBufferAttribute",(function(){return $f})),n.d(t,"DynamicCopyUsage",(function(){return Pn})),n.d(t,"DynamicDrawUsage",(function(){return En})),n.d(t,"DynamicReadUsage",(function(){return On})),n.d(t,"EdgesGeometry",(function(){return Kc})),n.d(t,"EdgesHelper",(function(){return cp})),n.d(t,"EllipseCurve",(function(){return Hu})),n.d(t,"EqualDepth",(function(){return W})),n.d(t,"EqualStencilFunc",(function(){return bn})),n.d(t,"EquirectangularReflectionMapping",(function(){return se})),n.d(t,"EquirectangularRefractionMapping",(function(){return le})),n.d(t,"Euler",(function(){return Pi})),n.d(t,"EventDispatcher",(function(){return Fn})),n.d(t,"ExtrudeBufferGeometry",(function(){return Rc})),n.d(t,"ExtrudeGeometry",(function(){return Fc})),n.d(t,"Face3",(function(){return yr})),n.d(t,"Face4",(function(){return Df})),n.d(t,"FaceColors",(function(){return Rf})),n.d(t,"FileLoader",(function(){return Fu})),n.d(t,"FlatShading",(function(){return g})),n.d(t,"Float32Attribute",(function(){return np})),n.d(t,"Float32BufferAttribute",(function(){return Pr})),n.d(t,"Float64Attribute",(function(){return ip})),n.d(t,"Float64BufferAttribute",(function(){return Dr})),n.d(t,"FloatType",(function(){return Le})),n.d(t,"Fog",(function(){return Us})),n.d(t,"FogExp2",(function(){return zs})),n.d(t,"Font",(function(){return Bh})),n.d(t,"FontLoader",(function(){return zh})),n.d(t,"FrontSide",(function(){return p})),n.d(t,"Frustum",(function(){return Oo})),n.d(t,"GLBufferAttribute",(function(){return Md})),n.d(t,"GLSL1",(function(){return In})),n.d(t,"GLSL3",(function(){return Nn})),n.d(t,"GammaEncoding",(function(){return Jt})),n.d(t,"Geometry",(function(){return mo})),n.d(t,"GeometryUtils",(function(){return pp})),n.d(t,"GreaterDepth",(function(){return Y})),n.d(t,"GreaterEqualDepth",(function(){return q})),n.d(t,"GreaterEqualStencilFunc",(function(){return Sn})),n.d(t,"GreaterStencilFunc",(function(){return wn})),n.d(t,"GridHelper",(function(){return Yd})),n.d(t,"Group",(function(){return Is})),n.d(t,"HalfFloatType",(function(){return ke})),n.d(t,"HemisphereLight",(function(){return fh})),n.d(t,"HemisphereLightHelper",(function(){return qd})),n.d(t,"HemisphereLightProbe",(function(){return Hh})),n.d(t,"IcosahedronBufferGeometry",(function(){return Zl})),n.d(t,"IcosahedronGeometry",(function(){return Jl})),n.d(t,"ImageBitmapLoader",(function(){return Fh})),n.d(t,"ImageLoader",(function(){return ju})),n.d(t,"ImageUtils",(function(){return Gn})),n.d(t,"ImmediateRenderObject",(function(){return Nd})),n.d(t,"IncrementStencilOp",(function(){return dn})),n.d(t,"IncrementWrapStencilOp",(function(){return pn})),n.d(t,"InstancedBufferAttribute",(function(){return Oh})),n.d(t,"InstancedBufferGeometry",(function(){return Ah})),n.d(t,"InstancedInterleavedBuffer",(function(){return Sd})),n.d(t,"InstancedMesh",(function(){return xl})),n.d(t,"Int16Attribute",(function(){return Jf})),n.d(t,"Int16BufferAttribute",(function(){return Ar})),n.d(t,"Int32Attribute",(function(){return ep})),n.d(t,"Int32BufferAttribute",(function(){return Lr})),n.d(t,"Int8Attribute",(function(){return Xf})),n.d(t,"Int8BufferAttribute",(function(){return Tr})),n.d(t,"IntType",(function(){return Ae})),n.d(t,"InterleavedBuffer",(function(){return Gs})),n.d(t,"InterleavedBufferAttribute",(function(){return Ws})),n.d(t,"Interpolant",(function(){return gu})),n.d(t,"InterpolateDiscrete",(function(){return jt})),n.d(t,"InterpolateLinear",(function(){return zt})),n.d(t,"InterpolateSmooth",(function(){return Ut})),n.d(t,"InvertStencilOp",(function(){return vn})),n.d(t,"JSONLoader",(function(){return vp})),n.d(t,"KeepStencilOp",(function(){return un})),n.d(t,"KeyframeTrack",(function(){return wu})),n.d(t,"LOD",(function(){return ul})),n.d(t,"LatheBufferGeometry",(function(){return Yc})),n.d(t,"LatheGeometry",(function(){return qc})),n.d(t,"Layers",(function(){return Ni})),n.d(t,"LensFlare",(function(){return yp})),n.d(t,"LessDepth",(function(){return G})),n.d(t,"LessEqualDepth",(function(){return H})),n.d(t,"LessEqualStencilFunc",(function(){return xn})),n.d(t,"LessStencilFunc",(function(){return yn})),n.d(t,"Light",(function(){return dh})),n.d(t,"LightProbe",(function(){return Th})),n.d(t,"LightShadow",(function(){return ph})),n.d(t,"Line",(function(){return Cl})),n.d(t,"Line3",(function(){return Id})),n.d(t,"LineBasicMaterial",(function(){return wl})),n.d(t,"LineCurve",(function(){return ih})),n.d(t,"LineCurve3",(function(){return rh})),n.d(t,"LineDashedMaterial",(function(){return pu})),n.d(t,"LineLoop",(function(){return kl})),n.d(t,"LinePieces",(function(){return Nf})),n.d(t,"LineSegments",(function(){return Ll})),n.d(t,"LineStrip",(function(){return If})),n.d(t,"LinearEncoding",(function(){return Qt})),n.d(t,"LinearFilter",(function(){return be})),n.d(t,"LinearInterpolant",(function(){return bu})),n.d(t,"LinearMipMapLinearFilter",(function(){return Se})),n.d(t,"LinearMipMapNearestFilter",(function(){return we})),n.d(t,"LinearMipmapLinearFilter",(function(){return _e})),n.d(t,"LinearMipmapNearestFilter",(function(){return xe})),n.d(t,"LinearToneMapping",(function(){return Z})),n.d(t,"Loader",(function(){return Iu})),n.d(t,"LoaderUtils",(function(){return Ch})),n.d(t,"LoadingManager",(function(){return Pu})),n.d(t,"LogLuvEncoding",(function(){return en})),n.d(t,"LoopOnce",(function(){return Ft})),n.d(t,"LoopPingPong",(function(){return Bt})),n.d(t,"LoopRepeat",(function(){return Rt})),n.d(t,"LuminanceAlphaFormat",(function(){return ze})),n.d(t,"LuminanceFormat",(function(){return je})),n.d(t,"MOUSE",(function(){return r})),n.d(t,"Material",(function(){return xr})),n.d(t,"MaterialLoader",(function(){return Eh})),n.d(t,"Math",(function(){return jn})),n.d(t,"MathUtils",(function(){return jn})),n.d(t,"Matrix3",(function(){return Un})),n.d(t,"Matrix4",(function(){return Mi})),n.d(t,"MaxEquation",(function(){return O})),n.d(t,"Mesh",(function(){return so})),n.d(t,"MeshBasicMaterial",(function(){return wr})),n.d(t,"MeshDepthMaterial",(function(){return Cs})),n.d(t,"MeshDistanceMaterial",(function(){return As})),n.d(t,"MeshFaceMaterial",(function(){return jf})),n.d(t,"MeshLambertMaterial",(function(){return du})),n.d(t,"MeshMatcapMaterial",(function(){return fu})),n.d(t,"MeshNormalMaterial",(function(){return hu})),n.d(t,"MeshPhongMaterial",(function(){return cu})),n.d(t,"MeshPhysicalMaterial",(function(){return lu})),n.d(t,"MeshStandardMaterial",(function(){return su})),n.d(t,"MeshToonMaterial",(function(){return uu})),n.d(t,"MinEquation",(function(){return A})),n.d(t,"MirroredRepeatWrapping",(function(){return fe})),n.d(t,"MixOperation",(function(){return Q})),n.d(t,"MultiMaterial",(function(){return zf})),n.d(t,"MultiplyBlending",(function(){return S})),n.d(t,"MultiplyOperation",(function(){return X})),n.d(t,"NearestFilter",(function(){return pe})),n.d(t,"NearestMipMapLinearFilter",(function(){return ye})),n.d(t,"NearestMipMapNearestFilter",(function(){return ve})),n.d(t,"NearestMipmapLinearFilter",(function(){return ge})),n.d(t,"NearestMipmapNearestFilter",(function(){return me})),n.d(t,"NeverDepth",(function(){return U})),n.d(t,"NeverStencilFunc",(function(){return gn})),n.d(t,"NoBlending",(function(){return b})),n.d(t,"NoColors",(function(){return Ff})),n.d(t,"NoToneMapping",(function(){return J})),n.d(t,"NormalAnimationBlendMode",(function(){return Wt})),n.d(t,"NormalBlending",(function(){return x})),n.d(t,"NotEqualDepth",(function(){return $})),n.d(t,"NotEqualStencilFunc",(function(){return _n})),n.d(t,"NumberKeyframeTrack",(function(){return Mu})),n.d(t,"Object3D",(function(){return Xi})),n.d(t,"ObjectLoader",(function(){return Ph})),n.d(t,"ObjectSpaceNormalMap",(function(){return ln})),n.d(t,"OctahedronBufferGeometry",(function(){return Kl})),n.d(t,"OctahedronGeometry",(function(){return Ql})),n.d(t,"OneFactor",(function(){return k})),n.d(t,"OneMinusDstAlphaFactor",(function(){return R})),n.d(t,"OneMinusDstColorFactor",(function(){return j})),n.d(t,"OneMinusSrcAlphaFactor",(function(){return N})),n.d(t,"OneMinusSrcColorFactor",(function(){return D})),n.d(t,"OrthographicCamera",(function(){return bh})),n.d(t,"PCFShadowMap",(function(){return h})),n.d(t,"PCFSoftShadowMap",(function(){return d})),n.d(t,"PMREMGenerator",(function(){return Tf})),n.d(t,"ParametricBufferGeometry",(function(){return Wl})),n.d(t,"ParametricGeometry",(function(){return Hl})),n.d(t,"Particle",(function(){return Vf})),n.d(t,"ParticleBasicMaterial",(function(){return Wf})),n.d(t,"ParticleSystem",(function(){return Gf})),n.d(t,"ParticleSystemMaterial",(function(){return qf})),n.d(t,"Path",(function(){return uh})),n.d(t,"PerspectiveCamera",(function(){return So})),n.d(t,"Plane",(function(){return Zi})),n.d(t,"PlaneBufferGeometry",(function(){return Do})),n.d(t,"PlaneGeometry",(function(){return Po})),n.d(t,"PlaneHelper",(function(){return sf})),n.d(t,"PointCloud",(function(){return Uf})),n.d(t,"PointCloudMaterial",(function(){return Hf})),n.d(t,"PointLight",(function(){return yh})),n.d(t,"PointLightHelper",(function(){return Vd})),n.d(t,"Points",(function(){return Rl})),n.d(t,"PointsMaterial",(function(){return Pl})),n.d(t,"PolarGridHelper",(function(){return $d})),n.d(t,"PolyhedronBufferGeometry",(function(){return Yl})),n.d(t,"PolyhedronGeometry",(function(){return ql})),n.d(t,"PositionalAudio",(function(){return ad})),n.d(t,"PropertyBinding",(function(){return yd})),n.d(t,"PropertyMixer",(function(){return ld})),n.d(t,"QuadraticBezierCurve",(function(){return oh})),n.d(t,"QuadraticBezierCurve3",(function(){return ah})),n.d(t,"Quaternion",(function(){return Xn})),n.d(t,"QuaternionKeyframeTrack",(function(){return Eu})),n.d(t,"QuaternionLinearInterpolant",(function(){return Tu})),n.d(t,"REVISION",(function(){return i})),n.d(t,"RGBADepthPacking",(function(){return an})),n.d(t,"RGBAFormat",(function(){return Be})),n.d(t,"RGBAIntegerFormat",(function(){return Xe})),n.d(t,"RGBA_ASTC_10x10_Format",(function(){return yt})),n.d(t,"RGBA_ASTC_10x5_Format",(function(){return mt})),n.d(t,"RGBA_ASTC_10x6_Format",(function(){return vt})),n.d(t,"RGBA_ASTC_10x8_Format",(function(){return gt})),n.d(t,"RGBA_ASTC_12x10_Format",(function(){return bt})),n.d(t,"RGBA_ASTC_12x12_Format",(function(){return xt})),n.d(t,"RGBA_ASTC_4x4_Format",(function(){return st})),n.d(t,"RGBA_ASTC_5x4_Format",(function(){return lt})),n.d(t,"RGBA_ASTC_5x5_Format",(function(){return ct})),n.d(t,"RGBA_ASTC_6x5_Format",(function(){return ut})),n.d(t,"RGBA_ASTC_6x6_Format",(function(){return ht})),n.d(t,"RGBA_ASTC_8x5_Format",(function(){return dt})),n.d(t,"RGBA_ASTC_8x6_Format",(function(){return ft})),n.d(t,"RGBA_ASTC_8x8_Format",(function(){return pt})),n.d(t,"RGBA_BPTC_Format",(function(){return wt})),n.d(t,"RGBA_ETC2_EAC_Format",(function(){return at})),n.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return it})),n.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return nt})),n.d(t,"RGBA_S3TC_DXT1_Format",(function(){return Ke})),n.d(t,"RGBA_S3TC_DXT3_Format",(function(){return Je})),n.d(t,"RGBA_S3TC_DXT5_Format",(function(){return Ze})),n.d(t,"RGBDEncoding",(function(){return rn})),n.d(t,"RGBEEncoding",(function(){return Zt})),n.d(t,"RGBEFormat",(function(){return Ue})),n.d(t,"RGBFormat",(function(){return Re})),n.d(t,"RGBIntegerFormat",(function(){return $e})),n.d(t,"RGBM16Encoding",(function(){return nn})),n.d(t,"RGBM7Encoding",(function(){return tn})),n.d(t,"RGB_ETC1_Format",(function(){return rt})),n.d(t,"RGB_ETC2_Format",(function(){return ot})),n.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return tt})),n.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return et})),n.d(t,"RGB_S3TC_DXT1_Format",(function(){return Qe})),n.d(t,"RGFormat",(function(){return qe})),n.d(t,"RGIntegerFormat",(function(){return Ye})),n.d(t,"RawShaderMaterial",(function(){return au})),n.d(t,"Ray",(function(){return Si})),n.d(t,"Raycaster",(function(){return Td})),n.d(t,"RectAreaLight",(function(){return Sh})),n.d(t,"RedFormat",(function(){return He})),n.d(t,"RedIntegerFormat",(function(){return We})),n.d(t,"ReinhardToneMapping",(function(){return ee})),n.d(t,"RepeatWrapping",(function(){return he})),n.d(t,"ReplaceStencilOp",(function(){return hn})),n.d(t,"ReverseSubtractEquation",(function(){return C})),n.d(t,"RingBufferGeometry",(function(){return Wc})),n.d(t,"RingGeometry",(function(){return Hc})),n.d(t,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return Dt})),n.d(t,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return Lt})),n.d(t,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return kt})),n.d(t,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return Pt})),n.d(t,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return It})),n.d(t,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return Nt})),n.d(t,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return _t})),n.d(t,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return St})),n.d(t,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Mt})),n.d(t,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Tt})),n.d(t,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return Et})),n.d(t,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return Ct})),n.d(t,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return At})),n.d(t,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Ot})),n.d(t,"Scene",(function(){return Vs})),n.d(t,"SceneUtils",(function(){return gp})),n.d(t,"ShaderChunk",(function(){return Io})),n.d(t,"ShaderLib",(function(){return Fo})),n.d(t,"ShaderMaterial",(function(){return wo})),n.d(t,"ShadowMaterial",(function(){return ou})),n.d(t,"Shape",(function(){return hh})),n.d(t,"ShapeBufferGeometry",(function(){return Xc})),n.d(t,"ShapeGeometry",(function(){return $c})),n.d(t,"ShapePath",(function(){return Rh})),n.d(t,"ShapeUtils",(function(){return Dc})),n.d(t,"ShortType",(function(){return Ee})),n.d(t,"Skeleton",(function(){return pl})),n.d(t,"SkeletonHelper",(function(){return Ud})),n.d(t,"SkinnedMesh",(function(){return hl})),n.d(t,"SmoothShading",(function(){return y})),n.d(t,"Sphere",(function(){return mi})),n.d(t,"SphereBufferGeometry",(function(){return Gc})),n.d(t,"SphereGeometry",(function(){return Vc})),n.d(t,"Spherical",(function(){return Ad})),n.d(t,"SphericalHarmonics3",(function(){return Mh})),n.d(t,"Spline",(function(){return ap})),n.d(t,"SplineCurve",(function(){return sh})),n.d(t,"SplineCurve3",(function(){return op})),n.d(t,"SpotLight",(function(){return vh})),n.d(t,"SpotLightHelper",(function(){return Rd})),n.d(t,"Sprite",(function(){return al})),n.d(t,"SpriteMaterial",(function(){return qs})),n.d(t,"SrcAlphaFactor",(function(){return I})),n.d(t,"SrcAlphaSaturateFactor",(function(){return z})),n.d(t,"SrcColorFactor",(function(){return P})),n.d(t,"StaticCopyUsage",(function(){return kn})),n.d(t,"StaticDrawUsage",(function(){return Tn})),n.d(t,"StaticReadUsage",(function(){return An})),n.d(t,"StereoCamera",(function(){return $h})),n.d(t,"StreamCopyUsage",(function(){return Dn})),n.d(t,"StreamDrawUsage",(function(){return Cn})),n.d(t,"StreamReadUsage",(function(){return Ln})),n.d(t,"StringKeyframeTrack",(function(){return Cu})),n.d(t,"SubtractEquation",(function(){return E})),n.d(t,"SubtractiveBlending",(function(){return _})),n.d(t,"TOUCH",(function(){return o})),n.d(t,"TangentSpaceNormalMap",(function(){return sn})),n.d(t,"TetrahedronBufferGeometry",(function(){return Xl})),n.d(t,"TetrahedronGeometry",(function(){return $l})),n.d(t,"TextBufferGeometry",(function(){return Uc})),n.d(t,"TextGeometry",(function(){return zc})),n.d(t,"Texture",(function(){return Wn})),n.d(t,"TextureLoader",(function(){return Vu})),n.d(t,"TorusBufferGeometry",(function(){return sc})),n.d(t,"TorusGeometry",(function(){return ac})),n.d(t,"TorusKnotBufferGeometry",(function(){return oc})),n.d(t,"TorusKnotGeometry",(function(){return rc})),n.d(t,"Triangle",(function(){return ur})),n.d(t,"TriangleFanDrawMode",(function(){return Xt})),n.d(t,"TriangleStripDrawMode",(function(){return $t})),n.d(t,"TrianglesDrawMode",(function(){return Yt})),n.d(t,"TubeBufferGeometry",(function(){return ic})),n.d(t,"TubeGeometry",(function(){return nc})),n.d(t,"UVMapping",(function(){return re})),n.d(t,"Uint16Attribute",(function(){return Zf})),n.d(t,"Uint16BufferAttribute",(function(){return Or})),n.d(t,"Uint32Attribute",(function(){return tp})),n.d(t,"Uint32BufferAttribute",(function(){return kr})),n.d(t,"Uint8Attribute",(function(){return Qf})),n.d(t,"Uint8BufferAttribute",(function(){return Er})),n.d(t,"Uint8ClampedAttribute",(function(){return Kf})),n.d(t,"Uint8ClampedBufferAttribute",(function(){return Cr})),n.d(t,"Uniform",(function(){return _d})),n.d(t,"UniformsLib",(function(){return No})),n.d(t,"UniformsUtils",(function(){return xo})),n.d(t,"UnsignedByteType",(function(){return Me})),n.d(t,"UnsignedInt248Type",(function(){return Ne})),n.d(t,"UnsignedIntType",(function(){return Oe})),n.d(t,"UnsignedShort4444Type",(function(){return Pe})),n.d(t,"UnsignedShort5551Type",(function(){return De})),n.d(t,"UnsignedShort565Type",(function(){return Ie})),n.d(t,"UnsignedShortType",(function(){return Ce})),n.d(t,"VSMShadowMap",(function(){return f})),n.d(t,"Vector2",(function(){return zn})),n.d(t,"Vector3",(function(){return Qn})),n.d(t,"Vector4",(function(){return qn})),n.d(t,"VectorKeyframeTrack",(function(){return Au})),n.d(t,"Vertex",(function(){return Yf})),n.d(t,"VertexColors",(function(){return Bf})),n.d(t,"VideoTexture",(function(){return jl})),n.d(t,"WebGL1Renderer",(function(){return js})),n.d(t,"WebGLCubeRenderTarget",(function(){return To})),n.d(t,"WebGLMultisampleRenderTarget",(function(){return $n})),n.d(t,"WebGLRenderTarget",(function(){return Yn})),n.d(t,"WebGLRenderTargetCube",(function(){return fp})),n.d(t,"WebGLRenderer",(function(){return Bs})),n.d(t,"WebGLUtils",(function(){return Ps})),n.d(t,"WireframeGeometry",(function(){return Gl})),n.d(t,"WireframeHelper",(function(){return up})),n.d(t,"WrapAroundEnding",(function(){return Ht})),n.d(t,"XHRLoader",(function(){return hp})),n.d(t,"ZeroCurvatureEnding",(function(){return Vt})),n.d(t,"ZeroFactor",(function(){return L})),n.d(t,"ZeroSlopeEnding",(function(){return Gt})),n.d(t,"ZeroStencilOp",(function(){return cn})),n.d(t,"sRGBEncoding",(function(){return Kt})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1;e<arguments.length;e++){const n=arguments[e];if(null!=n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t});const i="120",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,c=3,u=0,h=1,d=2,f=3,p=0,m=1,v=2,g=1,y=2,b=0,x=1,w=2,_=3,S=4,M=5,T=100,E=101,C=102,A=103,O=104,L=200,k=201,P=202,D=203,I=204,N=205,F=206,R=207,B=208,j=209,z=210,U=0,V=1,G=2,H=3,W=4,q=5,Y=6,$=7,X=0,Q=1,K=2,J=0,Z=1,ee=2,te=3,ne=4,ie=5,re=300,oe=301,ae=302,se=303,le=304,ce=306,ue=307,he=1e3,de=1001,fe=1002,pe=1003,me=1004,ve=1004,ge=1005,ye=1005,be=1006,xe=1007,we=1007,_e=1008,Se=1008,Me=1009,Te=1010,Ee=1011,Ce=1012,Ae=1013,Oe=1014,Le=1015,ke=1016,Pe=1017,De=1018,Ie=1019,Ne=1020,Fe=1021,Re=1022,Be=1023,je=1024,ze=1025,Ue=Be,Ve=1026,Ge=1027,He=1028,We=1029,qe=1030,Ye=1031,$e=1032,Xe=1033,Qe=33776,Ke=33777,Je=33778,Ze=33779,et=35840,tt=35841,nt=35842,it=35843,rt=36196,ot=37492,at=37496,st=37808,lt=37809,ct=37810,ut=37811,ht=37812,dt=37813,ft=37814,pt=37815,mt=37816,vt=37817,gt=37818,yt=37819,bt=37820,xt=37821,wt=36492,_t=37840,St=37841,Mt=37842,Tt=37843,Et=37844,Ct=37845,At=37846,Ot=37847,Lt=37848,kt=37849,Pt=37850,Dt=37851,It=37852,Nt=37853,Ft=2200,Rt=2201,Bt=2202,jt=2300,zt=2301,Ut=2302,Vt=2400,Gt=2401,Ht=2402,Wt=2500,qt=2501,Yt=0,$t=1,Xt=2,Qt=3e3,Kt=3001,Jt=3007,Zt=3002,en=3003,tn=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,ln=1,cn=0,un=7680,hn=7681,dn=7682,fn=7683,pn=34055,mn=34056,vn=5386,gn=512,yn=513,bn=514,xn=515,wn=516,_n=517,Sn=518,Mn=519,Tn=35044,En=35048,Cn=35040,An=35045,On=35049,Ln=35041,kn=35046,Pn=35050,Dn=35042,In="100",Nn="300 es";function Fn(){}Object.assign(Fn.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e)}}});const Rn=[];for(let e=0;e<256;e++)Rn[e]=(e<16?"0":"")+e.toString(16);let Bn=1234567;const jn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Rn[255&e]+Rn[e>>8&255]+Rn[e>>16&255]+Rn[e>>24&255]+"-"+Rn[255&t]+Rn[t>>8&255]+"-"+Rn[t>>16&15|64]+Rn[t>>24&255]+"-"+Rn[63&n|128]+Rn[n>>8&255]+"-"+Rn[n>>16&255]+Rn[n>>24&255]+Rn[255&i]+Rn[i>>8&255]+Rn[i>>16&255]+Rn[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Bn=e%2147483647),Bn=16807*Bn%2147483647,(Bn-1)/2147483646},degToRad:function(e){return e*jn.DEG2RAD},radToDeg:function(e){return e*jn.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+i)/2),u=a((t+i)/2),h=o((t-i)/2),d=a((t-i)/2),f=o((i-t)/2),p=a((i-t)/2);switch(r){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class zn{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this}toArray(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Un{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],v=i[6],g=i[1],y=i[4],b=i[7],x=i[2],w=i[5],_=i[8];return r[0]=o*p+a*g+s*x,r[3]=o*m+a*y+s*w,r[6]=o*v+a*b+s*_,r[1]=l*p+c*g+u*x,r[4]=l*m+c*y+u*w,r[7]=l*v+c*b+u*_,r[2]=h*p+d*g+f*x,r[5]=h*m+d*y+f*w,r[8]=h*v+d*b+f*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*r*c+n*a*s+i*r*l-i*o*s}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],f=d*l-c*h,p=c*u-d*s,m=h*s-l*u,v=r*f+o*p+a*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);const g=1/v;return i[0]=f*g,i[1]=(a*h-d*o)*g,i[2]=(c*o-a*l)*g,i[3]=p*g,i[4]=(d*r-a*u)*g,i[5]=(a*s-c*r)*g,i[6]=m*g,i[7]=(o*u-h*r)*g,i[8]=(l*r-o*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).getInverse(this).transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-i*l,i*s,-i*(-l*o+s*a)+a+t,0,0,1)}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*l,i[6]=t*a+n*c,i[1]=-n*r+t*s,i[4]=-n*o+t*l,i[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t){void 0===t&&(t=0);for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}let Vn;const Gn={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Vn&&(Vn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Vn.width=e.width,Vn.height=e.height;const n=Vn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Vn}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Hn=0;function Wn(e,t,n,i,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:Hn++}),this.uuid=jn.generateUUID(),this.name="",this.image=void 0!==e?e:Wn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Wn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:de,this.wrapT=void 0!==i?i:de,this.magFilter=void 0!==r?r:be,this.minFilter=void 0!==o?o:_e,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Be,this.internalFormat=null,this.type=void 0!==s?s:Me,this.offset=new zn(0,0),this.repeat=new zn(1,1),this.center=new zn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Qt,this.version=0,this.onUpdate=null}Wn.DEFAULT_IMAGE=void 0,Wn.DEFAULT_MAPPING=re,Wn.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=jn.generateUUID()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)t.push(Gn.getDataURL(i[e]))}else t=Gn.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==re)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case he:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case fe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case he:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case fe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class qn{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(a+u+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const e=(a+1)/2,o=(u+1)/2,m=(p+1)/2,v=(s+c)/4,g=(l+d)/4,y=(h+f)/4;return e>o&&e>m?e<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=v/n,r=g/n):o>m?o<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=v/i,r=y/i):m<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(m),n=g/r,i=y/r),this.set(n,i,r,t),this}let m=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(c-s)*(c-s));return Math.abs(m)<.001&&(m=1),this.x=(f-h)/m,this.y=(l-d)/m,this.z=(c-s)/m,this.w=Math.acos((a+u+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Yn(e,t,n){this.width=e,this.height=t,this.scissor=new qn(0,0,e,t),this.scissorTest=!1,this.viewport=new qn(0,0,e,t),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:be,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function $n(e,t,n){Yn.call(this,e,t,n),this.samples=4}Yn.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Yn,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$n.prototype=Object.assign(Object.create(Yn.prototype),{constructor:$n,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Yn.prototype.copy.call(this,e),this.samples=e.samples,this}});class Xn{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return n.copy(e).slerp(t,i)}static slerpFlat(e,t,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],d=r[o+1],f=r[o+2],p=r[o+3];if(u!==p||s!==h||l!==d||c!==f){let e=1-a;const t=s*h+l*d+c*f+u*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*e+h*r,l=l*e+d*r,c=c*e+f*r,u=u*e+p*r,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],d=r[o+2],f=r[o+3];return e[t]=a*f+c*u+s*d-l*h,e[t+1]=s*f+c*h+l*u-a*d,e[t+2]=l*f+c*d+a*h-s*u,e[t+3]=c*f-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),f=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jn.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Qn{constructor(e=0,t=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Jn.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Jn.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*i-a*n,c=s*n+a*t-r*i,u=s*i+r*n-o*t,h=-r*t-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Kn.copy(this).projectOnVector(e),this.sub(Kn)}reflect(e){return this.sub(Kn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jn.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Kn=new Qn,Jn=new Xn;class Zn{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new Qn(1/0,1/0,1/0),this.max=void 0!==t?t:new Qn(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ni.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Qn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Qn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ii.copy(t.boundingBox),ii.applyMatrix4(e.matrixWorld),this.union(ii));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Qn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ni),ni.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ui),hi.subVectors(this.max,ui),ri.subVectors(e.a,ui),oi.subVectors(e.b,ui),ai.subVectors(e.c,ui),si.subVectors(oi,ri),li.subVectors(ai,oi),ci.subVectors(ri,ai);let t=[0,-si.z,si.y,0,-li.z,li.y,0,-ci.z,ci.y,si.z,0,-si.x,li.z,0,-li.x,ci.z,0,-ci.x,-si.y,si.x,0,-li.y,li.x,0,-ci.y,ci.x,0];return!!ei(t,ri,oi,ai,hi)&&(t=[1,0,0,0,1,0,0,0,1],!!ei(t,ri,oi,ai,hi)&&(di.crossVectors(si,li),t=[di.x,di.y,di.z],ei(t,ri,oi,ai,hi)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Qn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ni.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(ni).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ti[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ti[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ti[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ti[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ti[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ti[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ti[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ti[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ti)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function ei(e,t,n,i,r){for(let o=0,a=e.length-3;o<=a;o+=3){fi.fromArray(e,o);const a=r.x*Math.abs(fi.x)+r.y*Math.abs(fi.y)+r.z*Math.abs(fi.z),s=t.dot(fi),l=n.dot(fi),c=i.dot(fi);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const ti=[new Qn,new Qn,new Qn,new Qn,new Qn,new Qn,new Qn,new Qn],ni=new Qn,ii=new Zn,ri=new Qn,oi=new Qn,ai=new Qn,si=new Qn,li=new Qn,ci=new Qn,ui=new Qn,hi=new Qn,di=new Qn,fi=new Qn,pi=new Zn;class mi{constructor(e,t){this.center=void 0!==e?e:new Qn,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):pi.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Qn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Zn),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const vi=new Qn,gi=new Qn,yi=new Qn,bi=new Qn,xi=new Qn,wi=new Qn,_i=new Qn;class Si{constructor(e,t){this.origin=void 0!==e?e:new Qn,this.direction=void 0!==t?t:new Qn(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Qn),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vi)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Qn),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vi.copy(this.direction).multiplyScalar(t).add(this.origin),vi.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){gi.copy(e).add(t).multiplyScalar(.5),yi.copy(t).sub(e).normalize(),bi.copy(this.origin).sub(gi);const r=.5*e.distanceTo(t),o=-this.direction.dot(yi),a=bi.dot(this.direction),s=-bi.dot(yi),l=bi.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*s-a,h=o*a-s,f=r*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-f?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=f?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(yi).multiplyScalar(h).add(gi),d}intersectSphere(e,t){vi.subVectors(e.center,this.origin);const n=vi.dot(this.direction),i=vi.dot(vi)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,vi)}intersectTriangle(e,t,n,i,r){xi.subVectors(t,e),wi.subVectors(n,e),_i.crossVectors(xi,wi);let o,a=this.direction.dot(_i);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}bi.subVectors(this.origin,e);const s=o*this.direction.dot(wi.crossVectors(bi,wi));if(s<0)return null;const l=o*this.direction.dot(xi.cross(bi));if(l<0)return null;if(s+l>a)return null;const c=-o*bi.dot(_i);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class Mi{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,o,a,s,l,c,u,h,d,f,p,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mi).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ti.setFromMatrixColumn(e,0).length(),r=1/Ti.setFromMatrixColumn(e,1).length(),o=1/Ti.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*c,n=o*u,i=a*c,r=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*s,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-o*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=o*c,t[9]=r-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,i=a*c,r=a*u;t[0]=s*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=s*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,i=a*s,r=a*l;t[0]=s*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=o*s,n=o*l,i=a*s,r=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=o*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ci,e,Ai)}lookAt(e,t,n){const i=this.elements;return ki.subVectors(e,t),0===ki.lengthSq()&&(ki.z=1),ki.normalize(),Oi.crossVectors(n,ki),0===Oi.lengthSq()&&(1===Math.abs(n.z)?ki.x+=1e-4:ki.z+=1e-4,ki.normalize(),Oi.crossVectors(n,ki)),Oi.normalize(),Li.crossVectors(ki,Oi),i[0]=Oi.x,i[4]=Li.x,i[8]=ki.x,i[1]=Oi.y,i[5]=Li.y,i[9]=ki.y,i[2]=Oi.z,i[6]=Li.z,i[10]=ki.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=i[0],_=i[4],S=i[8],M=i[12],T=i[1],E=i[5],C=i[9],A=i[13],O=i[2],L=i[6],k=i[10],P=i[14],D=i[3],I=i[7],N=i[11],F=i[15];return r[0]=o*w+a*T+s*O+l*D,r[4]=o*_+a*E+s*L+l*I,r[8]=o*S+a*C+s*k+l*N,r[12]=o*M+a*A+s*P+l*F,r[1]=c*w+u*T+h*O+d*D,r[5]=c*_+u*E+h*L+d*I,r[9]=c*S+u*C+h*k+d*N,r[13]=c*M+u*A+h*P+d*F,r[2]=f*w+p*T+m*O+v*D,r[6]=f*_+p*E+m*L+v*I,r[10]=f*S+p*C+m*k+v*N,r[14]=f*M+p*A+m*P+v*F,r[3]=g*w+y*T+b*O+x*D,r[7]=g*_+y*E+b*L+x*I,r[11]=g*S+y*C+b*k+x*N,r[15]=g*M+y*A+b*P+x*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+e[11]*(+t*l*u-t*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*s*u+t*a*h+i*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],v=i[12],g=i[13],y=i[14],b=i[15],x=f*y*h-g*p*h+g*u*m-c*y*m-f*u*b+c*p*b,w=v*p*h-d*y*h-v*u*m+l*y*m+d*u*b-l*p*b,_=d*g*h-v*f*h+v*c*m-l*g*m-d*c*b+l*f*b,S=v*f*u-d*g*u-v*c*p+l*g*p+d*c*y-l*f*y,M=r*x+o*w+a*_+s*S;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/M;return n[0]=x*T,n[1]=(g*p*s-f*y*s-g*a*m+o*y*m+f*a*b-o*p*b)*T,n[2]=(c*y*s-g*u*s+g*a*h-o*y*h-c*a*b+o*u*b)*T,n[3]=(f*u*s-c*p*s-f*a*h+o*p*h+c*a*m-o*u*m)*T,n[4]=w*T,n[5]=(d*y*s-v*p*s+v*a*m-r*y*m-d*a*b+r*p*b)*T,n[6]=(v*u*s-l*y*s-v*a*h+r*y*h+l*a*b-r*u*b)*T,n[7]=(l*p*s-d*u*s+d*a*h-r*p*h-l*a*m+r*u*m)*T,n[8]=_*T,n[9]=(v*f*s-d*g*s-v*o*m+r*g*m+d*o*b-r*f*b)*T,n[10]=(l*g*s-v*c*s+v*o*h-r*g*h-l*o*b+r*c*b)*T,n[11]=(d*c*s-l*f*s-d*o*h+r*f*h+l*o*m-r*c*m)*T,n[12]=S*T,n[13]=(d*g*a-v*f*a+v*o*p-r*g*p-d*o*y+r*f*y)*T,n[14]=(v*c*a-l*g*a-v*o*u+r*g*u+l*o*y-r*c*y)*T,n[15]=(l*f*a-d*c*a+d*o*u-r*f*u-l*o*p+r*c*p)*T,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,f=r*u,p=o*c,m=o*u,v=a*u,g=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return i[0]=(1-(p+v))*x,i[1]=(d+b)*x,i[2]=(f-y)*x,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(f+y)*_,i[9]=(m-g)*_,i[10]=(1-(h+p))*_,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Ti.set(i[0],i[1],i[2]).length();const o=Ti.set(i[4],i[5],i[6]).length(),a=Ti.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Ei.copy(this);const s=1/r,l=1/o,c=1/a;return Ei.elements[0]*=s,Ei.elements[1]*=s,Ei.elements[2]*=s,Ei.elements[4]*=l,Ei.elements[5]*=l,Ei.elements[6]*=l,Ei.elements[8]*=c,Ei.elements[9]*=c,Ei.elements[10]*=c,t.setFromRotationMatrix(Ei),n.x=r,n.y=o,n.z=a,this}makePerspective(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,o){const a=this.elements,s=1/(t-e),l=1/(n-i),c=1/(o-r),u=(t+e)*s,h=(n+i)*l,d=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t){void 0===t&&(t=0);for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ti=new Qn,Ei=new Mi,Ci=new Qn(0,0,0),Ai=new Qn(1,1,1),Oi=new Qn,Li=new Qn,ki=new Qn;class Pi{constructor(e=0,t=0,n=0,i=Pi.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const i=jn.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Di.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Di,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Ii.setFromEuler(this),this.setFromQuaternion(Ii,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Qn(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Pi.DefaultOrder="XYZ",Pi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Di=new Mi,Ii=new Xn;class Ni{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Fi=0;const Ri=new Qn,Bi=new Xn,ji=new Mi,zi=new Qn,Ui=new Qn,Vi=new Qn,Gi=new Xn,Hi=new Qn(1,0,0),Wi=new Qn(0,1,0),qi=new Qn(0,0,1),Yi={type:"added"},$i={type:"removed"};function Xi(){Object.defineProperty(this,"id",{value:Fi++}),this.uuid=jn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xi.DefaultUp.clone();const e=new Qn,t=new Pi,n=new Xn,i=new Qn(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Mi},normalMatrix:{value:new Un}}),this.matrix=new Mi,this.matrixWorld=new Mi,this.matrixAutoUpdate=Xi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ni,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Xi.DefaultUp=new Qn(0,1,0),Xi.DefaultMatrixAutoUpdate=!0,Xi.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Xi,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Bi.setFromAxisAngle(e,t),this.quaternion.multiply(Bi),this},rotateOnWorldAxis:function(e,t){return Bi.setFromAxisAngle(e,t),this.quaternion.premultiply(Bi),this},rotateX:function(e){return this.rotateOnAxis(Hi,e)},rotateY:function(e){return this.rotateOnAxis(Wi,e)},rotateZ:function(e){return this.rotateOnAxis(qi,e)},translateOnAxis:function(e,t){return Ri.copy(e).applyQuaternion(this.quaternion),this.position.add(Ri.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Hi,e)},translateY:function(e){return this.translateOnAxis(Wi,e)},translateZ:function(e){return this.translateOnAxis(qi,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(ji.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?zi.copy(e):zi.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ui.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ji.lookAt(Ui,zi,this.up):ji.lookAt(zi,Ui,this.up),this.quaternion.setFromRotationMatrix(ji),i&&(ji.extractRotation(i.matrixWorld),Bi.setFromRotationMatrix(ji),this.quaternion.premultiply(Bi.inverse()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Yi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($i)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),ji.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ji.multiply(e.parent.matrixWorld)),e.applyMatrix4(ji),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Qn),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Xn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ui,e,Vi),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Qn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ui,Gi,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Qn),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),a=o(e.images),s=o(e.shapes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const Qi=new Qn,Ki=new Qn,Ji=new Un;class Zi{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new Qn(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Qi.subVectors(n,t).cross(Ki.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Qn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Qn);const n=e.delta(Qi),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Qn),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ji.getNormalMatrix(e),i=this.coplanarPoint(Qi).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const er=new Qn,tr=new Qn,nr=new Qn,ir=new Qn,rr=new Qn,or=new Qn,ar=new Qn,sr=new Qn,lr=new Qn,cr=new Qn;class ur{constructor(e,t,n){this.a=void 0!==e?e:new Qn,this.b=void 0!==t?t:new Qn,this.c=void 0!==n?n:new Qn}static getNormal(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Qn),i.subVectors(n,t),er.subVectors(e,t),i.cross(er);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){er.subVectors(i,t),tr.subVectors(n,t),nr.subVectors(e,t);const o=er.dot(er),a=er.dot(tr),s=er.dot(nr),l=tr.dot(tr),c=tr.dot(nr),u=o*l-a*a;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Qn),0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,f=(o*c-a*s)*h;return r.set(1-d-f,f,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,ir),ir.x>=0&&ir.y>=0&&ir.x+ir.y<=1}static getUV(e,t,n,i,r,o,a,s){return this.getBarycoord(e,t,n,i,ir),s.set(0,0),s.addScaledVector(r,ir.x),s.addScaledVector(o,ir.y),s.addScaledVector(a,ir.z),s}static isFrontFacing(e,t,n,i){return er.subVectors(n,t),tr.subVectors(e,t),er.cross(tr).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return er.subVectors(this.c,this.b),tr.subVectors(this.a,this.b),.5*er.cross(tr).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Qn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ur.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Zi),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ur.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return ur.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return ur.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ur.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Qn);const n=this.a,i=this.b,r=this.c;let o,a;rr.subVectors(i,n),or.subVectors(r,n),sr.subVectors(e,n);const s=rr.dot(sr),l=or.dot(sr);if(s<=0&&l<=0)return t.copy(n);lr.subVectors(e,i);const c=rr.dot(lr),u=or.dot(lr);if(c>=0&&u<=c)return t.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(rr,o);cr.subVectors(e,r);const d=rr.dot(cr),f=or.dot(cr);if(f>=0&&d<=f)return t.copy(r);const p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(or,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return ar.subVectors(r,i),a=(u-c)/(u-c+(d-f)),t.copy(i).addScaledVector(ar,a);const v=1/(m+p+h);return o=p*v,a=h*v,t.copy(n).addScaledVector(rr,o).addScaledVector(or,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dr={h:0,s:0,l:0},fr={h:0,s:0,l:0};function pr(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function mr(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function vr(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class gr{constructor(e,t,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=jn.euclideanModulo(e,1),t=jn.clamp(t,0,1),n=jn.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=pr(r,i,e+1/3),this.g=pr(r,i,e),this.b=pr(r,i,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[5]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[5]),this;break;case"hsl":case"hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[5]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=hr[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t){void 0===t&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=mr(e.r),this.g=mr(e.g),this.b=mr(e.b),this}copyLinearToSRGB(e){return this.r=vr(e.r),this.g=vr(e.g),this.b=vr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),o=Math.min(t,n,i);let a,s;const l=(o+r)/2;if(o===r)a=0,s=0;else{const e=r-o;switch(s=l<=.5?e/(r+o):e/(2-r-o),r){case t:a=(n-i)/e+(n<i?6:0);break;case n:a=(i-t)/e+2;break;case i:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(dr),dr.h+=e,dr.s+=t,dr.l+=n,this.setHSL(dr.h,dr.s,dr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(dr),e.getHSL(fr);const n=jn.lerp(dr.h,fr.h,t),i=jn.lerp(dr.s,fr.s,t),r=jn.lerp(dr.l,fr.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}gr.NAMES=hr,gr.prototype.r=1,gr.prototype.g=1,gr.prototype.b=1;class yr{constructor(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Qn,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new gr,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let br=0;function xr(){Object.defineProperty(this,"id",{value:br++}),this.uuid=jn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=x,this.side=p,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=I,this.blendDst=N,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function wr(e){xr.call(this),this.type="MeshBasicMaterial",this.color=new gr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}xr.prototype=Object.assign(Object.create(Fn.prototype),{constructor:xr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===g;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(xr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),wr.prototype=Object.create(xr.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshBasicMaterial=!0,wr.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const _r=new Qn,Sr=new zn;function Mr(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0}function Tr(e,t,n){Mr.call(this,new Int8Array(e),t,n)}function Er(e,t,n){Mr.call(this,new Uint8Array(e),t,n)}function Cr(e,t,n){Mr.call(this,new Uint8ClampedArray(e),t,n)}function Ar(e,t,n){Mr.call(this,new Int16Array(e),t,n)}function Or(e,t,n){Mr.call(this,new Uint16Array(e),t,n)}function Lr(e,t,n){Mr.call(this,new Int32Array(e),t,n)}function kr(e,t,n){Mr.call(this,new Uint32Array(e),t,n)}function Pr(e,t,n){Mr.call(this,new Float32Array(e),t,n)}function Dr(e,t,n){Mr.call(this,new Float64Array(e),t,n)}Object.defineProperty(Mr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Mr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new gr),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new zn),t[n++]=r.x,t[n++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Qn),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new qn),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Sr.fromBufferAttribute(this,t),Sr.applyMatrix3(e),this.setXY(t,Sr.x,Sr.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix3(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)_r.x=this.getX(t),_r.y=this.getY(t),_r.z=this.getZ(t),_r.applyMatrix4(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)_r.x=this.getX(t),_r.y=this.getY(t),_r.z=this.getZ(t),_r.applyNormalMatrix(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)_r.x=this.getX(t),_r.y=this.getY(t),_r.z=this.getZ(t),_r.transformDirection(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Tr.prototype=Object.create(Mr.prototype),Tr.prototype.constructor=Tr,Er.prototype=Object.create(Mr.prototype),Er.prototype.constructor=Er,Cr.prototype=Object.create(Mr.prototype),Cr.prototype.constructor=Cr,Ar.prototype=Object.create(Mr.prototype),Ar.prototype.constructor=Ar,Or.prototype=Object.create(Mr.prototype),Or.prototype.constructor=Or,Lr.prototype=Object.create(Mr.prototype),Lr.prototype.constructor=Lr,kr.prototype=Object.create(Mr.prototype),kr.prototype.constructor=kr,Pr.prototype=Object.create(Mr.prototype),Pr.prototype.constructor=Pr,Dr.prototype=Object.create(Mr.prototype),Dr.prototype.constructor=Dr;class Ir{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,i,r=void 0;const o=e.faces;for(i=0;i<o.length;i++){const e=o[i];e.materialIndex!==r&&(r=e.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,a=e.morphTargets,s=a.length;let l;if(s>0){l=[];for(let e=0;e<s;e++)l[e]={name:a[e].name,data:[]};this.morphTargets.position=l}const c=e.morphNormals,u=c.length;let h;if(u>0){h=[];for(let e=0;e<u;e++)h[e]={name:c[e].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,f=e.skinWeights,p=d.length===n.length,m=f.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const v=t[e];this.vertices.push(n[v.a],n[v.b],n[v.c]);const g=v.vertexNormals;if(3===g.length)this.normals.push(g[0],g[1],g[2]);else{const e=v.normal;this.normals.push(e,e,e)}const y=v.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{const e=v.color;this.colors.push(e,e,e)}if(!0===r){const t=i[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new zn,new zn,new zn))}if(!0===o){const t=i[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new zn,new zn,new zn))}for(let e=0;e<s;e++){const t=a[e].vertices;l[e].data.push(t[v.a],t[v.b],t[v.c])}for(let t=0;t<u;t++){const n=c[t].vertexNormals[e];h[t].data.push(n.a,n.b,n.c)}p&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),m&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}function Nr(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}let Fr=1;const Rr=new Mi,Br=new Xi,jr=new Qn,zr=new Zn,Ur=new Zn,Vr=new Qn;function Gr(){Object.defineProperty(this,"id",{value:Fr+=2}),this.uuid=jn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Gr.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Gr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Nr(e)>65535?kr:Or)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Un).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Rr.makeRotationX(e),this.applyMatrix4(Rr),this},rotateY:function(e){return Rr.makeRotationY(e),this.applyMatrix4(Rr),this},rotateZ:function(e){return Rr.makeRotationZ(e),this.applyMatrix4(Rr),this},translate:function(e,t,n){return Rr.makeTranslation(e,t,n),this.applyMatrix4(Rr),this},scale:function(e,t,n){return Rr.makeScale(e,t,n),this.applyMatrix4(Rr),this},lookAt:function(e){return Br.lookAt(e),Br.updateMatrix(),this.applyMatrix4(Br.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(jr).negate(),this.translate(jr.x,jr.y,jr.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new Pr(3*t.vertices.length,3),n=new Pr(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new Pr(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Pr(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ir).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new Mr(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new Mr(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new Mr(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new Mr(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new Mr(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const t in e.morphTargets){const n=[],i=e.morphTargets[t];for(let e=0,t=i.length;e<t;e++){const t=i[e],r=new Pr(3*t.data.length,3);r.name=t.name,n.push(r.copyVector3sArray(t.data))}this.morphAttributes[t]=n}if(e.skinIndices.length>0){const t=new Pr(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new Pr(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Zn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Qn(-1/0,-1/0,-1/0),new Qn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];zr.setFromBufferAttribute(n),this.morphTargetsRelative?(Vr.addVectors(this.boundingBox.min,zr.min),this.boundingBox.expandByPoint(Vr),Vr.addVectors(this.boundingBox.max,zr.max),this.boundingBox.expandByPoint(Vr)):(this.boundingBox.expandByPoint(zr.min),this.boundingBox.expandByPoint(zr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Qn,1/0);if(e){const n=this.boundingSphere.center;if(zr.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Ur.setFromBufferAttribute(n),this.morphTargetsRelative?(Vr.addVectors(zr.min,Ur.min),zr.expandByPoint(Vr),Vr.addVectors(zr.max,Ur.max),zr.expandByPoint(Vr)):(zr.expandByPoint(Ur.min),zr.expandByPoint(Ur.max))}zr.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Vr.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Vr));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],a=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)Vr.fromBufferAttribute(o,t),a&&(jr.fromBufferAttribute(e,t),Vr.add(jr)),i=Math.max(i,n.distanceToSquared(Vr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Mr(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Qn,r=new Qn,o=new Qn,a=new Qn,s=new Qn,l=new Qn,c=new Qn,u=new Qn;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,o=e.attributes[i],a=o.array,s=o.itemSize*t,l=Math.min(a.length,r.length-s);for(let e=0,t=s;e<l;e++,t++)r[t]=a[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Vr.fromBufferAttribute(e,t),Vr.normalize(),e.setXYZ(t,Vr.x,Vr.y,Vr.z)},toNonIndexed:function(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let a=0,s=0;for(let e=0,r=t.length;e<r;e++){a=t[e]*i;for(let e=0;e<i;e++)o[s++]=n[a++]}return new Mr(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Gr,n=this.index.array,i=this.attributes;for(const r in i){const o=e(i[r],n);t.setAttribute(r,o)}const r=this.morphAttributes;for(const i in r){const o=[],a=r[i];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);o.push(i)}t.morphAttributes[i]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),e.data.attributes[t]=r}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),o.push(r)}o.length>0&&(i[t]=o,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e},clone:function(){return(new Gr).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Hr=new Mi,Wr=new Si,qr=new mi,Yr=new Qn,$r=new Qn,Xr=new Qn,Qr=new Qn,Kr=new Qn,Jr=new Qn,Zr=new Qn,eo=new Qn,to=new Qn,no=new zn,io=new zn,ro=new zn,oo=new Qn,ao=new Qn;function so(e,t){Xi.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Gr,this.material=void 0!==t?t:new wr,this.updateMorphTargets()}function lo(e,t,n,i,r,o,a,s){let l;if(l=t.side===m?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,t.side!==v,s),null===l)return null;ao.copy(s),ao.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ao);return c<n.near||c>n.far?null:{distance:c,point:ao.clone(),object:e}}function co(e,t,n,i,r,o,a,s,l,c,u,h){Yr.fromBufferAttribute(r,c),$r.fromBufferAttribute(r,u),Xr.fromBufferAttribute(r,h);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){Zr.set(0,0,0),eo.set(0,0,0),to.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(Qr.fromBufferAttribute(n,c),Kr.fromBufferAttribute(n,u),Jr.fromBufferAttribute(n,h),a?(Zr.addScaledVector(Qr,t),eo.addScaledVector(Kr,t),to.addScaledVector(Jr,t)):(Zr.addScaledVector(Qr.sub(Yr),t),eo.addScaledVector(Kr.sub($r),t),to.addScaledVector(Jr.sub(Xr),t)))}Yr.add(Zr),$r.add(eo),Xr.add(to)}e.isSkinnedMesh&&(e.boneTransform(c,Yr),e.boneTransform(u,$r),e.boneTransform(h,Xr));const f=lo(e,t,n,i,Yr,$r,Xr,oo);if(f){s&&(no.fromBufferAttribute(s,c),io.fromBufferAttribute(s,u),ro.fromBufferAttribute(s,h),f.uv=ur.getUV(oo,Yr,$r,Xr,no,io,ro,new zn)),l&&(no.fromBufferAttribute(l,c),io.fromBufferAttribute(l,u),ro.fromBufferAttribute(l,h),f.uv2=ur.getUV(oo,Yr,$r,Xr,no,io,ro,new zn));const e=new yr(c,u,h);ur.getNormal(Yr,$r,Xr,e.normal),f.face=e}return f}so.prototype=Object.assign(Object.create(Xi.prototype),{constructor:so,isMesh:!0,copy:function(e){return Xi.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),qr.copy(n.boundingSphere),qr.applyMatrix4(r),!1===e.ray.intersectsSphere(qr))return;if(Hr.getInverse(r),Wr.copy(e.ray).applyMatrix4(Hr),null!==n.boundingBox&&!1===Wr.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=i[f.materialIndex];for(let n=Math.max(f.start,d.start),i=Math.min(f.start+f.count,d.start+d.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);o=co(this,p,e,Wr,a,s,l,c,u,i,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=f.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);n<h;n+=3){const h=r.getX(n),d=r.getX(n+1),f=r.getX(n+2);o=co(this,i,e,Wr,a,s,l,c,u,h,d,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],f=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(r.start+r.count,d.start+d.count);n<i;n+=3){o=co(this,f,e,Wr,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),r=Math.min(a.count,d.start+d.count);n<r;n+=3){o=co(this,i,e,Wr,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else if(n.isGeometry){const r=Array.isArray(i),a=n.vertices,s=n.faces;let l;const c=n.faceVertexUvs[0];c.length>0&&(l=c);for(let n=0,c=s.length;n<c;n++){const c=s[n],u=r?i[c.materialIndex]:i;if(void 0===u)continue;const h=a[c.a],d=a[c.b],f=a[c.c];if(o=lo(this,u,e,Wr,h,d,f,oo),o){if(l&&l[n]){const e=l[n];no.copy(e[0]),io.copy(e[1]),ro.copy(e[2]),o.uv=ur.getUV(oo,h,d,f,no,io,ro,new zn)}o.face=c,o.faceIndex=n,t.push(o)}}}}});let uo=0;const ho=new Mi,fo=new Xi,po=new Qn;function mo(){Object.defineProperty(this,"id",{value:uo+=2}),this.uuid=jn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}mo.prototype=Object.assign(Object.create(Fn.prototype),{constructor:mo,isGeometry:!0,applyMatrix4:function(e){const t=(new Un).getNormalMatrix(e);for(let t=0,n=this.vertices.length;t<n;t++){this.vertices[t].applyMatrix4(e)}for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];n.normal.applyMatrix3(t).normalize();for(let e=0,i=n.vertexNormals.length;e<i;e++)n.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return ho.makeRotationX(e),this.applyMatrix4(ho),this},rotateY:function(e){return ho.makeRotationY(e),this.applyMatrix4(ho),this},rotateZ:function(e){return ho.makeRotationZ(e),this.applyMatrix4(ho),this},translate:function(e,t,n){return ho.makeTranslation(e,t,n),this.applyMatrix4(ho),this},scale:function(e,t,n){return ho.makeScale(e,t,n),this.applyMatrix4(ho),this},lookAt:function(e){return fo.lookAt(e),fo.updateMatrix(),this.applyMatrix4(fo.matrix),this},fromBufferGeometry:function(e){const t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,o=i.normal,a=i.color,s=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let e=0;e<r.count;e++)t.vertices.push((new Qn).fromBufferAttribute(r,e)),void 0!==a&&t.colors.push((new gr).fromBufferAttribute(a,e));function c(e,n,i,r){const c=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=void 0===o?[]:[(new Qn).fromBufferAttribute(o,e),(new Qn).fromBufferAttribute(o,n),(new Qn).fromBufferAttribute(o,i)],h=new yr(e,n,i,u,c,r);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new zn).fromBufferAttribute(s,e),(new zn).fromBufferAttribute(s,n),(new zn).fromBufferAttribute(s,i)]),void 0!==l&&t.faceVertexUvs[1].push([(new zn).fromBufferAttribute(l,e),(new zn).fromBufferAttribute(l,n),(new zn).fromBufferAttribute(l,i)])}const u=e.groups;if(u.length>0)for(let e=0;e<u.length;e++){const t=u[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)void 0!==n?c(n.getX(e),n.getX(e+1),n.getX(e+2),t.materialIndex):c(e,e+1,e+2,t.materialIndex)}else if(void 0!==n)for(let e=0;e<n.count;e+=3)c(n.getX(e),n.getX(e+1),n.getX(e+2));else for(let e=0;e<r.count;e+=3)c(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(po).negate(),this.translate(po.x,po.y,po.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Mi;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new Qn,t=new Qn;for(let n=0,i=this.faces.length;n<i;n++){const i=this.faces[n],r=this.vertices[i.a],o=this.vertices[i.b],a=this.vertices[i.c];e.subVectors(a,o),t.subVectors(r,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);const t=new Array(this.vertices.length);for(let e=0,n=this.vertices.length;e<n;e++)t[e]=new Qn;if(e){const e=new Qn,n=new Qn;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,a),n.subVectors(o,a),e.cross(n),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let e=0,n=this.vertices.length;e<n;e++)t[e].normalize();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(t[n.a]),i[1].copy(t[n.b]),i[2].copy(t[n.c])):(i[0]=t[n.a].clone(),i[1]=t[n.b].clone(),i[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,n=t.vertexNormals.length;e<n;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const e=new mo;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,i=this.faces.length;t<i;t++){const t=new Qn,i={a:new Qn,b:new Qn,c:new Qn};e.push(t),n.push(i)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],i=n.faceNormals[e],r=n.vertexNormals[e];i.copy(t.normal),r.a.copy(t.vertexNormals[0]),r.b.copy(t.vertexNormals[1]),r.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Zn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i;const r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.colors,u=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Un).getNormalMatrix(t));for(let e=0,n=a.length;e<n;e++){const n=a[e].clone();void 0!==t&&n.applyMatrix4(t),o.push(n)}for(let e=0,t=u.length;e<t;e++)c.push(u[e].clone());for(let e=0,t=l.length;e<t;e++){const t=l[e];let o,a;const c=t.vertexNormals,u=t.vertexColors,h=new yr(t.a+r,t.b+r,t.c+r);h.normal.copy(t.normal),void 0!==i&&h.normal.applyMatrix3(i).normalize();for(let e=0,t=c.length;e<t;e++)o=c[e].clone(),void 0!==i&&o.applyMatrix3(i).normalize(),h.vertexNormals.push(o);h.color.copy(t.color);for(let e=0,t=u.length;e<t;e++)a=u[e],h.vertexColors.push(a.clone());h.materialIndex=t.materialIndex+n,s.push(h)}for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++)r.push(i[e].clone());this.faceVertexUvs[t].push(r)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let r=0,o=this.vertices.length;r<o;r++){const o=this.vertices[r],a=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===e[a]?(e[a]=r,t.push(this.vertices[r]),n[r]=t.length-1):n[r]=n[e[a]]}const r=[];for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];const i=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(i[t]===i[(t+1)%3]){r.push(e);break}}for(let e=r.length-1;e>=0;e--){const t=r[e];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const o=this.vertices.length-t.length;return this.vertices=t,o},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new Qn(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const n=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let r,o;n&&n.length===t&&(r=[]),i&&i.length===t&&(o=[]);for(let a=0;a<t;a++){const t=e[a]._id;r&&r.push(n[t]),o&&o.push(i[t])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let e=0;e<this.vertices.length;e++){const n=this.vertices[e];t.push(n.x,n.y,n.z)}const n=[],i=[],r={},o=[],a={},s=[],l={};for(let e=0;e<this.faces.length;e++){const t=this.faces[e],i=!0,r=!1,o=void 0!==this.faceVertexUvs[0][e],a=t.normal.length()>0,s=t.vertexNormals.length>0,l=1!==t.color.r||1!==t.color.g||1!==t.color.b,f=t.vertexColors.length>0;let p=0;if(p=c(p,0,0),p=c(p,1,i),p=c(p,2,r),p=c(p,3,o),p=c(p,4,a),p=c(p,5,s),p=c(p,6,l),p=c(p,7,f),n.push(p),n.push(t.a,t.b,t.c),n.push(t.materialIndex),o){const t=this.faceVertexUvs[0][e];n.push(d(t[0]),d(t[1]),d(t[2]))}if(a&&n.push(u(t.normal)),s){const e=t.vertexNormals;n.push(u(e[0]),u(e[1]),u(e[2]))}if(l&&n.push(h(t.color)),f){const e=t.vertexColors;n.push(h(e[0]),h(e[1]),h(e[2]))}}function c(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=i.length/3,i.push(e.x,e.y,e.z)),r[t]}function h(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==a[t]||(a[t]=o.length,o.push(e.getHex())),a[t]}function d(e){const t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=s.length/2,s.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=i,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e},clone:function(){return(new mo).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let e=0,n=t.length;e<n;e++)this.vertices.push(t[e].clone());const n=e.colors;for(let e=0,t=n.length;e<t;e++)this.colors.push(n[e].clone());const i=e.faces;for(let e=0,t=i.length;e<t;e++)this.faces.push(i[e].clone());for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];r.push(t.clone())}this.faceVertexUvs[t].push(r)}}const r=e.morphTargets;for(let e=0,t=r.length;e<t;e++){const t={};if(t.name=r[e].name,void 0!==r[e].vertices){t.vertices=[];for(let n=0,i=r[e].vertices.length;n<i;n++)t.vertices.push(r[e].vertices[n].clone())}if(void 0!==r[e].normals){t.normals=[];for(let n=0,i=r[e].normals.length;n<i;n++)t.normals.push(r[e].normals[n].clone())}this.morphTargets.push(t)}const o=e.morphNormals;for(let e=0,t=o.length;e<t;e++){const t={};if(void 0!==o[e].vertexNormals){t.vertexNormals=[];for(let n=0,i=o[e].vertexNormals.length;n<i;n++){const i=o[e].vertexNormals[n],r={};r.a=i.a.clone(),r.b=i.b.clone(),r.c=i.c.clone(),t.vertexNormals.push(r)}}if(void 0!==o[e].faceNormals){t.faceNormals=[];for(let n=0,i=o[e].faceNormals.length;n<i;n++)t.faceNormals.push(o[e].faceNormals[n].clone())}this.morphNormals.push(t)}const a=e.skinWeights;for(let e=0,t=a.length;e<t;e++)this.skinWeights.push(a[e].clone());const s=e.skinIndices;for(let e=0,t=s.length;e<t;e++)this.skinIndices.push(s[e].clone());const l=e.lineDistances;for(let e=0,t=l.length;e<t;e++)this.lineDistances.push(l[e]);const c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class vo extends mo{constructor(e,t,n,i,r,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new go(e,t,n,i,r,o)),this.mergeVertices()}}class go extends Gr{constructor(e=1,t=1,n=1,i=1,r=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,i,r,o,f,p,m,v,g){const y=o/m,b=f/v,x=o/2,w=f/2,_=p/2,S=m+1,M=v+1;let T=0,E=0;const C=new Qn;for(let o=0;o<M;o++){const a=o*b-w;for(let s=0;s<S;s++){const h=s*y-x;C[e]=h*i,C[t]=a*r,C[n]=_,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/m),u.push(1-o/v),T+=1}}for(let e=0;e<v;e++)for(let t=0;t<m;t++){const n=h+t+S*e,i=h+t+S*(e+1),r=h+(t+1)+S*(e+1),o=h+(t+1)+S*e;s.push(n,i,o),s.push(i,r,o),E+=6}a.addGroup(d,E,g),d+=E,h+=T}f("z","y","x",-1,-1,n,t,e,o,r,0),f("z","y","x",1,-1,n,t,-e,o,r,1),f("x","z","y",1,1,e,n,t,i,o,2),f("x","z","y",1,-1,e,n,-t,i,o,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Pr(l,3)),this.setAttribute("normal",new Pr(c,3)),this.setAttribute("uv",new Pr(u,2))}}function yo(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function bo(e){const t={};for(let n=0;n<e.length;n++){const i=yo(e[n]);for(const e in i)t[e]=i[e]}return t}const xo={clone:yo,merge:bo};function wo(e){xr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function _o(){Xi.call(this),this.type="Camera",this.matrixWorldInverse=new Mi,this.projectionMatrix=new Mi,this.projectionMatrixInverse=new Mi}function So(e,t,n,i){_o.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}wo.prototype=Object.create(xr.prototype),wo.prototype.constructor=wo,wo.prototype.isShaderMaterial=!0,wo.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yo(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},wo.prototype.toJSON=function(e){const t=xr.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},_o.prototype=Object.assign(Object.create(Xi.prototype),{constructor:_o,isCamera:!0,copy:function(e,t){return Xi.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Qn),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Xi.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Xi.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),So.prototype=Object.assign(Object.create(_o.prototype),{constructor:So,isPerspectiveCamera:!0,copy:function(e,t){return _o.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*jn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*jn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*jn.RAD2DEG*Math.atan(Math.tan(.5*jn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*jn.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/a,i*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=Xi.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function Mo(e,t,n){if(Xi.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new So(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Qn(1,0,0)),this.add(i);const r=new So(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Qn(-1,0,0)),this.add(r);const o=new So(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Qn(0,1,0)),this.add(o);const a=new So(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Qn(0,-1,0)),this.add(a);const s=new So(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Qn(0,0,1)),this.add(s);const l=new So(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Qn(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c},this.clear=function(e,t,i,r){const o=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(n,o),e.clear(t,i,r);e.setRenderTarget(o)}}function To(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Yn.call(this,e,e,t),this.texture.isWebGLCubeRenderTargetTexture=!0}function Eo(e,t,n,i,r,o,a,s,l,c,u,h){Wn.call(this,null,o,a,s,l,c,i,r,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:pe,this.minFilter=void 0!==c?c:pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Mo.prototype=Object.create(Xi.prototype),Mo.prototype.constructor=Mo,To.prototype=Object.create(Yn.prototype),To.prototype.constructor=To,To.prototype.isWebGLCubeRenderTarget=!0,To.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=Be,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},i=new go(5,5,5),r=new wo({name:"CubemapFromEquirect",uniforms:yo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:b});r.uniforms.tEquirect.value=t;const o=new so(i,r),a=t.minFilter;t.minFilter===_e&&(t.minFilter=be);return new Mo(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this},Eo.prototype=Object.create(Wn.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isDataTexture=!0;const Co=new mi,Ao=new Qn;class Oo{constructor(e,t,n,i,r,o){this.planes=[void 0!==e?e:new Zi,void 0!==t?t:new Zi,void 0!==n?n:new Zi,void 0!==i?i:new Zi,void 0!==r?r:new Zi,void 0!==o?o:new Zi]}set(e,t,n,i,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-i,u-s,p-h,y-m).normalize(),t[1].setComponents(a+i,u+s,p+h,y+m).normalize(),t[2].setComponents(a+r,u+l,p+d,y+v).normalize(),t[3].setComponents(a-r,u-l,p-d,y-v).normalize(),t[4].setComponents(a-o,u-c,p-f,y-g).normalize(),t[5].setComponents(a+o,u+c,p+f,y+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Co.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Co)}intersectsSprite(e){return Co.center.set(0,0,0),Co.radius=.7071067811865476,Co.applyMatrix4(e.matrixWorld),this.intersectsSphere(Co)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ao.x=i.normal.x>0?e.max.x:e.min.x,Ao.y=i.normal.y>0?e.max.y:e.min.y,Ao.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ao)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}function Lo(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ko(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var o=i.get(t);return void((!o||o.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=i.get(t);void 0===a?i.set(t,function(t,n){const i=t.array,r=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(!function(t,i,r){const o=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,o):(n?e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,t,r),a.version=t.version)}}}class Po extends mo{constructor(e,t,n,i){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Do(e,t,n,i)),this.mergeVertices()}}class Do extends Gr{constructor(e,t,n,i){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=(e=e||1)/2,o=(t=t||1)/2,a=Math.floor(n)||1,s=Math.floor(i)||1,l=a+1,c=s+1,u=e/a,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<l;n++){const i=n*u-r;f.push(i,-t,0),p.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),o=t+1+l*e;d.push(n,i,o),d.push(i,r,o)}this.setIndex(d),this.setAttribute("position",new Pr(f,3)),this.setAttribute("normal",new Pr(p,3)),this.setAttribute("uv",new Pr(m,2))}}const Io={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},No={common:{diffuse:{value:new gr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Un},uv2Transform:{value:new Un},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Un}},sprite:{diffuse:{value:new gr(15658734)},opacity:{value:1},center:{value:new zn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Un}}},Fo={basic:{uniforms:bo([No.common,No.specularmap,No.envmap,No.aomap,No.lightmap,No.fog]),vertexShader:Io.meshbasic_vert,fragmentShader:Io.meshbasic_frag},lambert:{uniforms:bo([No.common,No.specularmap,No.envmap,No.aomap,No.lightmap,No.emissivemap,No.fog,No.lights,{emissive:{value:new gr(0)}}]),vertexShader:Io.meshlambert_vert,fragmentShader:Io.meshlambert_frag},phong:{uniforms:bo([No.common,No.specularmap,No.envmap,No.aomap,No.lightmap,No.emissivemap,No.bumpmap,No.normalmap,No.displacementmap,No.fog,No.lights,{emissive:{value:new gr(0)},specular:{value:new gr(1118481)},shininess:{value:30}}]),vertexShader:Io.meshphong_vert,fragmentShader:Io.meshphong_frag},standard:{uniforms:bo([No.common,No.envmap,No.aomap,No.lightmap,No.emissivemap,No.bumpmap,No.normalmap,No.displacementmap,No.roughnessmap,No.metalnessmap,No.fog,No.lights,{emissive:{value:new gr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Io.meshphysical_vert,fragmentShader:Io.meshphysical_frag},toon:{uniforms:bo([No.common,No.aomap,No.lightmap,No.emissivemap,No.bumpmap,No.normalmap,No.displacementmap,No.gradientmap,No.fog,No.lights,{emissive:{value:new gr(0)}}]),vertexShader:Io.meshtoon_vert,fragmentShader:Io.meshtoon_frag},matcap:{uniforms:bo([No.common,No.bumpmap,No.normalmap,No.displacementmap,No.fog,{matcap:{value:null}}]),vertexShader:Io.meshmatcap_vert,fragmentShader:Io.meshmatcap_frag},points:{uniforms:bo([No.points,No.fog]),vertexShader:Io.points_vert,fragmentShader:Io.points_frag},dashed:{uniforms:bo([No.common,No.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Io.linedashed_vert,fragmentShader:Io.linedashed_frag},depth:{uniforms:bo([No.common,No.displacementmap]),vertexShader:Io.depth_vert,fragmentShader:Io.depth_frag},normal:{uniforms:bo([No.common,No.bumpmap,No.normalmap,No.displacementmap,{opacity:{value:1}}]),vertexShader:Io.normal_vert,fragmentShader:Io.normal_frag},sprite:{uniforms:bo([No.sprite,No.fog]),vertexShader:Io.sprite_vert,fragmentShader:Io.sprite_frag},background:{uniforms:{uvTransform:{value:new Un},t2D:{value:null}},vertexShader:Io.background_vert,fragmentShader:Io.background_frag},cube:{uniforms:bo([No.envmap,{opacity:{value:1}}]),vertexShader:Io.cube_vert,fragmentShader:Io.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Io.equirect_vert,fragmentShader:Io.equirect_frag},distanceRGBA:{uniforms:bo([No.common,No.displacementmap,{referencePosition:{value:new Qn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Io.distanceRGBA_vert,fragmentShader:Io.distanceRGBA_frag},shadow:{uniforms:bo([No.lights,No.fog,{color:{value:new gr(0)},opacity:{value:1}}]),vertexShader:Io.shadow_vert,fragmentShader:Io.shadow_frag}};function Ro(e,t,n,i,r){const o=new gr(0);let a,s,l=0,c=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),l=void 0!==t?t:1,d(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(o,l)},render:function(n,r,f,v){let g=!0===r.isScene?r.background:null;g&&g.isTexture&&(g=t.get(g));const y=e.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(g=null),null===g?d(o,l):g&&g.isColor&&(d(g,1),v=!0),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.isWebGLCubeRenderTargetTexture||g.mapping===ce)?(void 0===s&&(s=new so(new go(1,1,1),new wo({name:"BackgroundCubeMaterial",uniforms:yo(Fo.cube.uniforms),vertexShader:Fo.cube.vertexShader,fragmentShader:Fo.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),g.isWebGLCubeRenderTarget&&(g=g.texture),s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,c===g&&u===g.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=g,u=g.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new so(new Do(2,2),new wo({name:"BackgroundMaterial",uniforms:yo(Fo.background.uniforms),vertexShader:Fo.background.vertexShader,fragmentShader:Fo.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&u===g.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=g,u=g.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Bo(e,t,n,i){const r=e.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},l=d(null);let c=l;function u(t){return i.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,r){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function g(t,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,o,a,s):e.vertexAttribIPointer(t,n,r,a,s)}function y(){b(),c!==l&&(c=l,u(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,b){let x=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=d(i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u);return u}(y,h,l);c!==t&&(c=t,u(c.object)),x=function(e,t){const n=c.attributes,i=e.attributes;if(Object.keys(n).length!==Object.keys(i).length)return!0;for(const e in i){const t=n[e],r=i[e];if(void 0===t)return!0;if(t.attribute!==r)return!0;if(t.data!==r.data)return!0}return c.index!==t}(y,b),x&&function(e,t){const n={},i=e.attributes;for(const e in i){const t=i[e],r={};r.attribute=t,t.data&&(r.data=t.data),n[e]=r}c.attributes=n,c.index=t}(y,b)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,x=!0)}!0===r.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(!function(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const i=c[t];if(i>=0){const o=l[t];if(void 0!==o){const t=o.normalized,r=o.itemSize,a=n.get(o);if(void 0===a)continue;const l=a.buffer,c=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(i,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(i),e.bindBuffer(34962,l),g(i,r,c,t,a*u,h*u)}else o.isInstancedBufferAttribute?(m(i,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(i),e.bindBuffer(34962,l),g(i,r,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(r.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;m(i+0,1),m(i+1,1),m(i+2,1),m(i+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(i+0,4,a,!1,64,0),e.vertexAttribPointer(i+1,4,a,!1,64,16),e.vertexAttribPointer(i+2,4,a,!1,64,32),e.vertexAttribPointer(i+3,4,a,!1,64,48)}else if("instanceColor"===t){const t=n.get(r.instanceColor);if(void 0===t)continue;const o=t.buffer,a=t.type;m(i,1),e.bindBuffer(34962,o),e.vertexAttribPointer(i,3,a,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i,n);break;case 3:e.vertexAttrib3fv(i,n);break;case 4:e.vertexAttrib4fv(i,n);break;default:e.vertexAttrib1fv(i,n)}}}}v()}(r,l,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:v}}function jo(e,t,n,i){const r=i.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,i){e.drawArrays(o,t,i),n.update(i,o,1)},this.renderInstances=function(i,a,s){if(0===s)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,a,s),n.update(a,o,s)}}function zo(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),f=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=u>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;const n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}function Uo(e){const t=this;let n=null,i=0,r=!1,o=!1;const a=new Zi,s=new Un,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const t=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=i;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(r,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==i||r;return r=t,n=u(e,o,0),i=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!r||null===h||0===h.length||o&&!f)o?u(null):c();else{const e=o?0:i,t=4*e;let r=p.clippingState||null;l.value=r,r=u(h,a,t,s);for(let e=0;e!==t;++e)r[e]=n[e];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Vo(e){let t=new WeakMap;function n(e,t){return t===se?e.mapping=oe:t===le&&(e.mapping=ae),e}return{get:function(i){if(i&&i.isTexture){const r=i.mapping;if(r===se||r===le){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const r=i.image;if(r&&r.height>0){const o=e.getRenderList(),a=e.getRenderTarget(),s=e.getRenderState(),l=new To(r.height/2);return l.fromEquirectangularTexture(e,i),t.set(i,l),e.setRenderTarget(a),e.setRenderList(o),e.setRenderState(s),n(l.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function Go(e){const t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,null!==i},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function Ho(e,t,n,i){const r=new WeakMap,o=new WeakMap;function a(e){const s=e.target,l=r.get(s);null!==l.index&&t.remove(l.index);for(const e in l.attributes)t.remove(l.attributes[e]);s.removeEventListener("dispose",a),r.delete(s);const c=o.get(l);c&&(t.remove(c),o.delete(l)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const s=new(Nr(n)>65535?kr:Or)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){let i=r.get(t);return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Gr).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Wo(e,t,n,i){const r=i.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(o,i,a,t*s),n.update(i,o,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,i*s,c),n.update(l,o,c)}}function qo(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Yo(e,t){return e[0]-t[0]}function $o(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Xo(e){const t={},n=new Float32Array(8),i=[];for(let e=0;e<8;e++)i[e]=[e,0];return{update:function(r,o,a,s){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[o.id];if(void 0===u){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[o.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort($o);for(let e=0;e<8;e++)e<c&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(Yo);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let f=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],a=t[1];r!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[r]&&o.setAttribute("morphTarget"+e,h[r]),d&&o.getAttribute("morphNormal"+e)!==d[r]&&o.setAttribute("morphNormal"+e,d[r]),n[e]=a,f+=a):(h&&void 0!==o.getAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),d&&void 0!==o.getAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const p=o.morphTargetsRelative?1:1-f;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Qo(e,t,n,i){let r=new WeakMap;return{update:function(e){const o=i.render.frame,a=e.geometry,s=t.get(e,a);return r.get(s)!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),r.set(s,o)),e.isInstancedMesh&&(n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){r=new WeakMap}}}function Ko(e,t,n,i,r,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:oe,a=void 0!==a?a:Re,Wn.call(this,e,t,n,i,r,o,a,s,l,c),this.flipY=!1}function Jo(e,t,n,i){Wn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=pe,this.minFilter=pe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Zo(e,t,n,i){Wn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=pe,this.minFilter=pe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Fo.physical={uniforms:bo([Fo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new zn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new gr(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Io.meshphysical_vert,fragmentShader:Io.meshphysical_frag},Ko.prototype=Object.create(Wn.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isCubeTexture=!0,Object.defineProperty(Ko.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Jo.prototype=Object.create(Wn.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isDataTexture2DArray=!0,Zo.prototype=Object.create(Wn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isDataTexture3D=!0;const ea=new Wn,ta=new Jo,na=new Zo,ia=new Ko,ra=[],oa=[],aa=new Float32Array(16),sa=new Float32Array(9),la=new Float32Array(4);function ca(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=ra[r];if(void 0===o&&(o=new Float32Array(r),ra[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function ua(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function ha(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function da(e,t){let n=oa[t];void 0===n&&(n=new Int32Array(t),oa[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function fa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function pa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ua(n,t))return;e.uniform2fv(this.addr,t),ha(n,t)}}function ma(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ua(n,t))return;e.uniform3fv(this.addr,t),ha(n,t)}}function va(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ua(n,t))return;e.uniform4fv(this.addr,t),ha(n,t)}}function ga(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ua(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ha(n,t)}else{if(ua(n,i))return;la.set(i),e.uniformMatrix2fv(this.addr,!1,la),ha(n,i)}}function ya(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ua(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ha(n,t)}else{if(ua(n,i))return;sa.set(i),e.uniformMatrix3fv(this.addr,!1,sa),ha(n,i)}}function ba(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ua(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ha(n,t)}else{if(ua(n,i))return;aa.set(i),e.uniformMatrix4fv(this.addr,!1,aa),ha(n,i)}}function xa(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||ea,r)}function wa(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||ta,r)}function _a(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||na,r)}function Sa(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||ia,r)}function Ma(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ta(e,t){const n=this.cache;ua(n,t)||(e.uniform2iv(this.addr,t),ha(n,t))}function Ea(e,t){const n=this.cache;ua(n,t)||(e.uniform3iv(this.addr,t),ha(n,t))}function Ca(e,t){const n=this.cache;ua(n,t)||(e.uniform4iv(this.addr,t),ha(n,t))}function Aa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Oa(e,t){e.uniform1fv(this.addr,t)}function La(e,t){e.uniform1iv(this.addr,t)}function ka(e,t){e.uniform2iv(this.addr,t)}function Pa(e,t){e.uniform3iv(this.addr,t)}function Da(e,t){e.uniform4iv(this.addr,t)}function Ia(e,t){const n=ca(t,this.size,2);e.uniform2fv(this.addr,n)}function Na(e,t){const n=ca(t,this.size,3);e.uniform3fv(this.addr,n)}function Fa(e,t){const n=ca(t,this.size,4);e.uniform4fv(this.addr,n)}function Ra(e,t){const n=ca(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ba(e,t){const n=ca(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ja(e,t){const n=ca(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function za(e,t,n){const i=t.length,r=da(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||ea,r[e])}function Ua(e,t,n){const i=t.length,r=da(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||ia,r[e])}function Va(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return fa;case 35664:return pa;case 35665:return ma;case 35666:return va;case 35674:return ga;case 35675:return ya;case 35676:return ba;case 5124:case 35670:return Ma;case 35667:case 35671:return Ta;case 35668:case 35672:return Ea;case 35669:case 35673:return Ca;case 5125:return Aa;case 35678:case 36198:case 36298:case 36306:case 35682:return xa;case 35679:case 36299:case 36307:return _a;case 35680:case 36300:case 36308:case 36293:return Sa;case 36289:case 36303:case 36311:case 36292:return wa}}(t.type)}function Ga(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Oa;case 35664:return Ia;case 35665:return Na;case 35666:return Fa;case 35674:return Ra;case 35675:return Ba;case 35676:return ja;case 5124:case 35670:return La;case 35667:case 35671:return ka;case 35668:case 35672:return Pa;case 35669:case 35673:return Da;case 35678:case 36198:case 36298:case 36306:case 35682:return za;case 35680:case 36300:case 36308:case 36293:return Ua}}(t.type)}function Ha(e){this.id=e,this.seq=[],this.map={}}Ga.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ha(t,e)},Ha.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}};const Wa=/([\w\d_]+)(\])?(\[|\.)?/g;function qa(e,t){e.seq.push(t),e.map[t.id]=t}function Ya(e,t,n){const i=e.name,r=i.length;for(Wa.lastIndex=0;;){const o=Wa.exec(i),a=Wa.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){qa(n,void 0===c?new Va(s,e,t):new Ga(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Ha(s),qa(n,e)),n=e}}}function $a(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Ya(n,e.getUniformLocation(t,n.name),this)}}function Xa(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}$a.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},$a.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},$a.upload=function(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,i)}},$a.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let Qa=0;function Ka(e){switch(e){case Qt:return["Linear","( value )"];case Kt:return["sRGB","( value )"];case Zt:return["RGBE","( value )"];case tn:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Jt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case en:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Ja(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Za(e,t){const n=Ka(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function es(e,t){const n=Ka(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ts(e,t){let n;switch(t){case Z:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case ie:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ns(e){return""!==e}function is(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function rs(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const os=/^[ \t]*#include +<([\w\d./]+)>/gm;function as(e){return e.replace(os,ss)}function ss(e,t){const n=Io[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return as(n)}const ls=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,cs=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function us(e){return e.replace(cs,ds).replace(ls,hs)}function hs(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ds(e,t,n,i)}function ds(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function fs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ps(e,t,n,i){const r=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===f&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case oe:case ae:t="ENVMAP_TYPE_CUBE";break;case ce:case ue:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ae:case ue:t="ENVMAP_MODE_REFRACTION"}return t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case X:t="ENVMAP_BLENDING_MULTIPLY";break;case Q:t="ENVMAP_BLENDING_MIX";break;case K:t="ENVMAP_BLENDING_ADD"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ns).join("\n")}(n),g=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),y=r.createProgram();let b,x,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[g].filter(ns).join("\n"),b.length>0&&(b+="\n"),x=[v,g].filter(ns).join("\n"),x.length>0&&(x+="\n")):(b=[fs(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ns).join("\n"),x=[v,fs(n),"#define SHADER_NAME "+n.shaderName,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==J?"#define TONE_MAPPING":"",n.toneMapping!==J?Io.tonemapping_pars_fragment:"",n.toneMapping!==J?ts("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Io.encodings_pars_fragment,n.map?Za("mapTexelToLinear",n.mapEncoding):"",n.matcap?Za("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Za("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Za("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Za("lightMapTexelToLinear",n.lightMapEncoding):"",es("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ns).join("\n")),a=as(a),a=is(a,n),a=rs(a,n),s=as(s),s=is(s,n),s=rs(s,n),a=us(a),s=us(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",b=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===Nn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Nn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const _=w+x+s,S=Xa(r,35633,w+b+a),M=Xa(r,35632,_);if(r.attachShader(y,S),r.attachShader(y,M),void 0!==n.index0AttributeName?r.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(y).trim(),t=r.getShaderInfoLog(S).trim(),n=r.getShaderInfoLog(M).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(y,35714)){i=!1;const t=Ja(r,S,"vertex"),n=Ja(r,M,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(y,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:x}})}let T,E;return r.deleteShader(S),r.deleteShader(M),this.getUniforms=function(){return void 0===T&&(T=new $a(r,y)),T},this.getAttributes=function(){return void 0===E&&(E=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r).name;n[i]=e.getAttribLocation(t,i)}return n}(r,y)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=Qa++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=M,this}function ms(e,t,n,i,r,o){const a=[],s=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function g(e){let t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Qt,t}return{getParameters:function(r,a,p,y,b){const x=y.fog,w=r.isMeshStandardMaterial?y.environment:null,_=t.get(r.envMap||w),S=f[r.type],M=b.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=u,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}}(b):0;let T,E;if(null!==r.precision&&(d=i.getMaxPrecision(r.precision),d!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead.")),S){const e=Fo[S];T=e.vertexShader,E=e.fragmentShader}else T=r.vertexShader,E=r.fragmentShader;const C=e.getRenderTarget();return{isWebGL2:s,shaderID:S,shaderName:r.type,vertexShader:T,fragmentShader:E,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:h,outputEncoding:null!==C?g(C.texture):e.outputEncoding,map:!!r.map,mapEncoding:g(r.map),matcap:!!r.matcap,matcapEncoding:g(r.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:g(_),envMapCubeUV:!!_&&(_.mapping===ce||_.mapping===ue),lightMap:!!r.lightMap,lightMapEncoding:g(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:g(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===ln,tangentSpaceNormalMap:r.normalMapType===sn,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!x,useFog:r.fog,fogExp2:x&&x.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&M>0,maxBones:M,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:J,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===v,flipSided:r.side===m,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Fo[t];n=xo.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=a.length;e<t;e++){const t=a[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new ps(e,n,t,r),a.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function vs(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function gs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ys(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function bs(e){const t=[];let n=0;const i=[],r=[],o={id:-1};function a(i,r,a,s,l,c){let u=t[n];const h=e.get(a);return void 0===u?(u={id:i.id,object:i,geometry:r,material:a,program:h.program||o,groupOrder:s,renderOrder:i.renderOrder,z:l,group:c},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,t,n,o,s,l){const c=a(e,t,n,o,s,l);(!0===n.transparent?r:i).push(c)},unshift:function(e,t,n,o,s,l){const c=a(e,t,n,o,s,l);(!0===n.transparent?r:i).unshift(c)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||gs),r.length>1&&r.sort(t||ys)}}}function xs(e){let t=new WeakMap;return{get:function(n,i){const r=t.get(n);let o;return void 0===r?(o=new bs(e),t.set(n,new WeakMap),t.get(n).set(i,o)):(o=r.get(i),void 0===o&&(o=new bs(e),r.set(i,o))),o},dispose:function(){t=new WeakMap}}}function ws(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Qn,color:new gr};break;case"SpotLight":n={position:new Qn,direction:new Qn,color:new gr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Qn,color:new gr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Qn,skyColor:new gr,groundColor:new gr};break;case"RectAreaLight":n={color:new gr,position:new Qn,halfWidth:new Qn,halfHeight:new Qn}}return e[t.id]=n,n}}}let _s=0;function Ss(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ms(){const e=new ws,t=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)n.probe.push(new Qn);const i=new Qn,r=new Mi,o=new Mi;return{setup:function(a,s,l){let c=0,u=0,h=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let d=0,f=0,p=0,m=0,v=0,g=0,y=0,b=0;const x=l.matrixWorldInverse;a.sort(Ss);for(let s=0,l=a.length;s<l;s++){const l=a[s],w=l.color,_=l.intensity,S=l.distance,M=l.shadow&&l.shadow.map?l.shadow.map.texture:null;if(l.isAmbientLight)c+=w.r*_,u+=w.g*_,h+=w.b*_;else if(l.isLightProbe)for(let e=0;e<9;e++)n.probe[e].addScaledVector(l.sh.coefficients[e],_);else if(l.isDirectionalLight){const r=e.get(l);if(r.color.copy(l.color).multiplyScalar(l.intensity),r.direction.setFromMatrixPosition(l.matrixWorld),i.setFromMatrixPosition(l.target.matrixWorld),r.direction.sub(i),r.direction.transformDirection(x),l.castShadow){const e=l.shadow,i=t.get(l);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,n.directionalShadow[d]=i,n.directionalShadowMap[d]=M,n.directionalShadowMatrix[d]=l.shadow.matrix,g++}n.directional[d]=r,d++}else if(l.isSpotLight){const r=e.get(l);if(r.position.setFromMatrixPosition(l.matrixWorld),r.position.applyMatrix4(x),r.color.copy(w).multiplyScalar(_),r.distance=S,r.direction.setFromMatrixPosition(l.matrixWorld),i.setFromMatrixPosition(l.target.matrixWorld),r.direction.sub(i),r.direction.transformDirection(x),r.coneCos=Math.cos(l.angle),r.penumbraCos=Math.cos(l.angle*(1-l.penumbra)),r.decay=l.decay,l.castShadow){const e=l.shadow,i=t.get(l);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,n.spotShadow[p]=i,n.spotShadowMap[p]=M,n.spotShadowMatrix[p]=l.shadow.matrix,b++}n.spot[p]=r,p++}else if(l.isRectAreaLight){const t=e.get(l);t.color.copy(w).multiplyScalar(_),t.position.setFromMatrixPosition(l.matrixWorld),t.position.applyMatrix4(x),o.identity(),r.copy(l.matrixWorld),r.premultiply(x),o.extractRotation(r),t.halfWidth.set(.5*l.width,0,0),t.halfHeight.set(0,.5*l.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),n.rectArea[m]=t,m++}else if(l.isPointLight){const i=e.get(l);if(i.position.setFromMatrixPosition(l.matrixWorld),i.position.applyMatrix4(x),i.color.copy(l.color).multiplyScalar(l.intensity),i.distance=l.distance,i.decay=l.decay,l.castShadow){const e=l.shadow,i=t.get(l);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,n.pointShadow[f]=i,n.pointShadowMap[f]=M,n.pointShadowMatrix[f]=l.shadow.matrix,y++}n.point[f]=i,f++}else if(l.isHemisphereLight){const t=e.get(l);t.direction.setFromMatrixPosition(l.matrixWorld),t.direction.transformDirection(x),t.direction.normalize(),t.skyColor.copy(l.color).multiplyScalar(_),t.groundColor.copy(l.groundColor).multiplyScalar(_),n.hemi[v]=t,v++}}m>0&&(n.rectAreaLTC1=No.LTC_1,n.rectAreaLTC2=No.LTC_2),n.ambient[0]=c,n.ambient[1]=u,n.ambient[2]=h;const w=n.hash;w.directionalLength===d&&w.pointLength===f&&w.spotLength===p&&w.rectAreaLength===m&&w.hemiLength===v&&w.numDirectionalShadows===g&&w.numPointShadows===y&&w.numSpotShadows===b||(n.directional.length=d,n.spot.length=p,n.rectArea.length=m,n.point.length=f,n.hemi.length=v,n.directionalShadow.length=g,n.directionalShadowMap.length=g,n.pointShadow.length=y,n.pointShadowMap.length=y,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=g,n.pointShadowMatrix.length=y,n.spotShadowMatrix.length=b,w.directionalLength=d,w.pointLength=f,w.spotLength=p,w.rectAreaLength=m,w.hemiLength=v,w.numDirectionalShadows=g,w.numPointShadows=y,w.numSpotShadows=b,n.version=_s++)},state:n}}function Ts(){const e=new Ms,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Es(){let e=new WeakMap;return{get:function(t,n){let i;return!1===e.has(t)?(i=new Ts,e.set(t,new WeakMap),e.get(t).set(n,i)):!1===e.get(t).has(n)?(i=new Ts,e.get(t).set(n,i)):i=e.get(t).get(n),i},dispose:function(){e=new WeakMap}}}function Cs(e){xr.call(this),this.type="MeshDepthMaterial",this.depthPacking=on,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function As(e){xr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Qn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}Cs.prototype=Object.create(xr.prototype),Cs.prototype.constructor=Cs,Cs.prototype.isMeshDepthMaterial=!0,Cs.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},As.prototype=Object.create(xr.prototype),As.prototype.constructor=As,As.prototype.isMeshDistanceMaterial=!0,As.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Os(e,t,n){let i=new Oo;const r=new zn,o=new zn,a=new qn,s=[],l=[],c={},u={0:m,1:p,2:v},d=new wo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new zn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=d.clone();g.defines.HORIZONAL_PASS=1;const y=new Gr;y.setAttribute("position",new Mr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new so(y,d),w=this;function _(n,i){const r=t.update(x);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,d,x,null),g.uniforms.shadow_pass.value=n.mapPass.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,g,x,null)}function S(e,t,n){const i=e<<0|t<<1|n<<2;let r=s[i];return void 0===r&&(r=new Cs({depthPacking:an,morphTargets:e,skinning:t}),s[i]=r),r}function M(e,t,n){const i=e<<0|t<<1|n<<2;let r=l[i];return void 0===r&&(r=new As({morphTargets:e,skinning:t}),l[i]=r),r}function T(t,n,i,r,o,a,s){let l=null,h=S,d=t.customDepthMaterial;if(!0===r.isPointLight&&(h=M,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===i.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));l=h(e,r,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const e=l.uuid,t=i.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let r=n[t];void 0===r&&(r=l.clone(),n[t]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=s===f?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function E(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===f)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=T(n,i,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,i,t,n,c)}}}else if(r.visible){const t=T(n,i,r,a,o.near,o.far,s);e.renderBufferDirect(o,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)E(l[e],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,s,l){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(b),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let c=0,u=t.length;c<u;c++){const u=t[c],h=u.shadow;if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}r.copy(h.mapSize);const p=h.getFrameExtents();if(r.multiply(p),o.copy(h.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/p.x),r.x=o.x*p.x,h.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/p.y),r.y=o.y*p.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===f){const e={minFilter:be,magFilter:be,format:Be};h.map=new Yn(r.x,r.y,e),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Yn(r.x,r.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:pe,magFilter:pe,format:Be};h.map=new Yn(r.x,r.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const m=h.getViewportCount();for(let e=0;e<m;e++){const t=h.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),h.updateMatrices(u,e),i=h.getFrustum(),E(s,l,h.camera,u,this.type)}h.isPointLightShadow||this.type!==f||_(h,l),h.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(c,u,h)}}function Ls(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new qn;let i=null;const r=new qn(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?pe(2929):me(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case U:e.depthFunc(512);break;case V:e.depthFunc(519);break;case G:e.depthFunc(513);break;case H:e.depthFunc(515);break;case W:e.depthFunc(514);break;case q:e.depthFunc(518);break;case Y:e.depthFunc(516);break;case $:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},c=new function(){let t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?pe(2960):me(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&l===i||(e.stencilOp(t,n,i),a=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}};let u={},h=null,d=null,f=null,p=null,g=null,y=null,X=null,Q=null,K=null,J=!1,Z=null,ee=null,te=null,ne=null,ie=null;const re=e.getParameter(35661);let oe=!1,ae=0;const se=e.getParameter(7938);-1!==se.indexOf("WebGL")?(ae=parseFloat(/^WebGL\ ([0-9])/.exec(se)[1]),oe=ae>=1):-1!==se.indexOf("OpenGL ES")&&(ae=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(se)[1]),oe=ae>=2);let le=null,ce={};const ue=new qn,he=new qn;function de(t,n,i){const r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return o}const fe={};function pe(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function me(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}fe[3553]=de(3553,3553,1),fe[34067]=de(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),c.setClear(0),pe(2929),o.setFunc(H),be(!1),xe(s),pe(2884),ye(b);const ve={[T]:32774,[E]:32778,[C]:32779};if(i)ve[A]=32775,ve[O]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(ve[A]=e.MIN_EXT,ve[O]=e.MAX_EXT)}const ge={[L]:0,[k]:1,[P]:768,[I]:770,[z]:776,[B]:774,[F]:772,[D]:769,[N]:771,[j]:775,[R]:773};function ye(t,n,i,r,o,a,s,l){if(t!==b){if(d||(pe(3042),d=!0),t===M)o=o||n,a=a||i,s=s||r,n===p&&o===X||(e.blendEquationSeparate(ve[n],ve[o]),p=n,X=o),i===g&&r===y&&a===Q&&s===K||(e.blendFuncSeparate(ge[i],ge[r],ge[a],ge[s]),g=i,y=r,Q=a,K=s),f=t,J=null;else if(t!==f||l!==J){if(p===T&&X===T||(e.blendEquation(32774),p=T,X=T),l)switch(t){case x:e.blendFuncSeparate(1,771,1,771);break;case w:e.blendFunc(1,1);break;case _:e.blendFuncSeparate(0,0,769,771);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case x:e.blendFuncSeparate(770,771,1,771);break;case w:e.blendFunc(770,1);break;case _:e.blendFunc(0,769);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,y=null,Q=null,K=null,f=t,J=l}}else d&&(me(3042),d=!1)}function be(t){Z!==t&&(t?e.frontFace(2304):e.frontFace(2305),Z=t)}function xe(t){t!==a?(pe(2884),t!==ee&&(t===s?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):me(2884),ee=t}function we(t,n,i){t?(pe(32823),ne===n&&ie===i||(e.polygonOffset(n,i),ne=n,ie=i)):me(32823)}function _e(t){void 0===t&&(t=33984+re-1),le!==t&&(e.activeTexture(t),le=t)}return{buffers:{color:r,depth:o,stencil:c},enable:pe,disable:me,useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:ye,setMaterial:function(e,t){e.side===v?me(2884):pe(2884);let n=e.side===m;t&&(n=!n),be(n),e.blending===x&&!1===e.transparent?ye(b):ye(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;c.setTest(i),i&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),we(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:be,setCullFace:xe,setLineWidth:function(t){t!==te&&(oe&&e.lineWidth(t),te=t)},setPolygonOffset:we,setScissorTest:function(e){e?pe(3089):me(3089)},activeTexture:_e,bindTexture:function(t,n){null===le&&_e();let i=ce[le];void 0===i&&(i={type:void 0,texture:void 0},ce[le]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||fe[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=ce[le];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ue.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ue.copy(t))},viewport:function(t){!1===he.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),he.copy(t))},reset:function(){u={},le=null,ce={},h=null,f=null,Z=null,ee=null,r.reset(),o.reset(),c.reset()}}}function ks(e,t,n,i,r,o,a){const s=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?jn.floorPowerOfTwo:Math.floor,o=i(r*e.width),a=i(r*e.height);void 0===f&&(f=m(o,a));const s=n?m(o,a):f;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return jn.isPowerOfTwo(e.width)&&jn.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==pe&&e.minFilter!==be}function b(t,n,r,o){e.generateMipmap(t);i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function x(n,i,r){if(!1===s)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return e===pe||e===me||e===ge?9728:9729}function _(t){const n=t.target;n.removeEventListener("dispose",_),function(t){const n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}(n),a.memory.textures--}let M=0;function T(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function E(t,r){if(6!==t.image.length)return;const a=i.get(t);if(t.version>0&&a.__version!==t.version){k(a,t),n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);const i=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),l=t.image[0]&&t.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=i||l?l?t.image[e].image:t.image[e]:v(t.image[e],!1,!0,c);const h=u[0],d=g(h)||s,f=o.convert(t.format),p=o.convert(t.type),m=x(t.internalFormat,f,p);let w;if(L(34067,t,d),i){for(let e=0;e<6;e++){w=u[e].mipmaps;for(let i=0;i<w.length;i++){const r=w[i];t.format!==Be&&t.format!==Re?null!==f?n.compressedTexImage2D(34069+e,i,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,i,m,r.width,r.height,0,f,p,r.data)}}a.__maxMipLevel=w.length-1}else{w=t.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,p,u[e].data);for(let t=0;t<w.length;t++){const i=w[t].image[e].image;n.texImage2D(34069+e,t+1,m,i.width,i.height,0,f,p,i.data)}}else{n.texImage2D(34069+e,0,m,f,p,u[e]);for(let t=0;t<w.length;t++){const i=w[t];n.texImage2D(34069+e,t+1,m,f,p,i.image[e])}}a.__maxMipLevel=w.length}y(t,d)&&b(34067,t,h.width,h.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture)}function C(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}const A={[he]:10497,[de]:33071,[fe]:33648},O={[pe]:9728,[me]:9984,[ge]:9986,[be]:9729,[xe]:9985,[_e]:9987};function L(n,o,a){a?(e.texParameteri(n,10242,A[o.wrapS]),e.texParameteri(n,10243,A[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[o.wrapR]),e.texParameteri(n,10240,O[o.magFilter]),e.texParameteri(n,10241,O[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===de&&o.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(o.magFilter)),e.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==pe&&o.minFilter!==be&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=t.get("EXT_texture_filter_anisotropic");if(l){if(o.type===Le&&null===t.get("OES_texture_float_linear"))return;if(o.type===ke&&null===(s||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function k(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",_),t.__webglTexture=e.createTexture(),a.memory.textures++)}function P(t,i,r){let a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),k(t,i),n.activeTexture(33984+r),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);const l=function(e){return!s&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==pe&&e.minFilter!==be)}(i)&&!1===g(i.image),c=v(i.image,l,!1,u),h=g(c)||s,d=o.convert(i.format);let f,p=o.convert(i.type),m=x(i.internalFormat,d,p);L(a,i,h);const w=i.mipmaps;if(i.isDepthTexture)m=6402,s?m=i.type===Le?36012:i.type===Oe?33190:i.type===Ne?35056:33189:i.type===Le&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ve&&6402===m&&i.type!==Ce&&i.type!==Oe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ce,p=o.convert(i.type)),i.format===Ge&&6402===m&&(m=34041,i.type!==Ne&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ne,p=o.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,p,null);else if(i.isDataTexture)if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)f=w[e],n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,p,c.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)f=w[e],i.format!==Be&&i.format!==Re?null!==d?n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);t.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)f=w[e],n.texImage2D(3553,e,m,d,p,f);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,d,p,c),t.__maxMipLevel=0;y(i,h)&&b(a,i,c.width,c.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function D(t,r,a,s){const l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=x(r.texture.internalFormat,l,c);n.texImage2D(s,0,u,r.width,r.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function I(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Le?r=36012:t.type===Oe&&(r=33190));const i=F(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=F(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=o.convert(n.texture.format),r=o.convert(n.texture.type),a=x(n.texture.internalFormat,t,r);if(i){const t=F(n);e.renderbufferStorageMultisample(36161,t,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){const n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);const r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ve)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)e.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),I(n.__webglDepthbuffer[i],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),I(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function F(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let R=!1,B=!1;this.allocateTextureUnit=function(){const e=M;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?P(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?P(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setTextureCubeDynamic=C,this.setupRenderTarget=function(t){const r=i.get(t),l=i.get(t.texture);t.addEventListener("dispose",S),l.__webglTexture=e.createTexture(),a.memory.textures++;const c=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,h=g(t)||s;if(!s||t.texture.format!==Re||t.texture.type!==Le&&t.texture.type!==ke||(t.texture.format=Be,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){r.__webglFramebuffer=[];for(let t=0;t<6;t++)r.__webglFramebuffer[t]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),u)if(s){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const n=o.convert(t.texture.format),i=o.convert(t.texture.type),a=x(t.texture.internalFormat,n,i),s=F(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),I(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),L(34067,t.texture,h);for(let e=0;e<6;e++)D(r.__webglFramebuffer[e],t,36064,34069+e);y(t.texture,h)&&b(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),L(3553,t.texture,h),D(r.__webglFramebuffer,t,36064,3553),y(t.texture,h)&&b(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(y(t,g(e)||s)){const r=e.isWebGLCubeRenderTarget?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(r,o),b(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const r=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===R&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),R=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?E(e,t):C(e,t)}}function Ps(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===Me)return 5121;if(e===Pe)return 32819;if(e===De)return 32820;if(e===Ie)return 33635;if(e===Te)return 5120;if(e===Ee)return 5122;if(e===Ce)return 5123;if(e===Ae)return 5124;if(e===Oe)return 5125;if(e===Le)return 5126;if(e===ke)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Fe)return 6406;if(e===Re)return 6407;if(e===Be)return 6408;if(e===je)return 6409;if(e===ze)return 6410;if(e===Ve)return 6402;if(e===Ge)return 34041;if(e===He)return 6403;if(e===We)return 36244;if(e===qe)return 33319;if(e===Ye)return 33320;if(e===$e)return 36248;if(e===Xe)return 36249;if(e===Qe||e===Ke||e===Je||e===Ze){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Qe)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ke)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Je)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ze)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===nt||e===it){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===et)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===it)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===rt)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===ot||e===at)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===ot)return n.COMPRESSED_RGB8_ETC2;if(e===at)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===st||e===lt||e===ct||e===ut||e===ht||e===dt||e===ft||e===pt||e===mt||e===vt||e===gt||e===yt||e===bt||e===xt||e===_t||e===St||e===Mt||e===Tt||e===Et||e===Ct||e===At||e===Ot||e===Lt||e===kt||e===Pt||e===Dt||e===It||e===Nt?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===wt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Ne?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ds(e){So.call(this),this.cameras=e||[]}function Is(){Xi.call(this),this.type="Group"}function Ns(){this._targetRay=null,this._grip=null,this._hand=null}function Fs(e,t){const n=this;let i=null,r=1,o=null,a="local-floor",s=null;const l=[],c=new Map,u=new So;u.layers.enable(1),u.viewport=new qn;const h=new So;h.layers.enable(2),h.viewport=new qn;const d=[u,h],f=new Ds;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;function v(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function g(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),M.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){o=e,M.setContext(i),M.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function b(e){const t=i.inputSources;for(let e=0;e<l.length;e++)c.set(t[e],l[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=c.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),c.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=c.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new Ns,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new Ns,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new Ns,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=function(e){if(i=e,null!==i){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",g);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r},o=new XRWebGLLayer(i,t,n);i.updateRenderState({baseLayer:o}),i.requestReferenceSpace(a).then(y),i.addEventListener("inputsourceschange",b)}};const x=new Qn,w=new Qn;function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){f.near=h.near=u.near=e.near,f.far=h.far=u.far=e.far,p===f.near&&m===f.far||(i.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);const t=e.parent,n=f.cameras;_(f,t);for(let e=0;e<n.length;e++)_(n[e],t);e.matrixWorld.copy(f.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){x.setFromMatrixPosition(t.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const i=x.distanceTo(w),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=i/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);const v=a+p,g=s+p,y=d-m,b=f+(i-m),_=l*s/g*v,S=c*s/g*v;e.projectionMatrix.makePerspective(y,b,_,S,v,g)}(f,u,h):f.projectionMatrix.copy(u.projectionMatrix),f};let S=null;const M=new Lo;M.setAnimationLoop((function(t,n){if(s=n.getViewerPose(o),null!==s){const t=s.views,n=i.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let r=!1;t.length!==f.cameras.length&&(f.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const i=t[e],o=n.getViewport(i),a=d[e];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===e&&f.matrix.copy(a.matrix),!0===r&&f.cameras.push(a)}}const r=i.inputSources;for(let e=0;e<l.length;e++){const t=l[e],i=r[e];t.update(i,n,o)}S&&S(t,n)})),this.setAnimationLoop=function(e){S=e},this.dispose=function(){}}function Rs(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===m&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===m&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,o){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i),i.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,i):n(e,i)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Bs(e){const t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Qt,this.physicallyCorrectLights=!1,this.toneMapping=J,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const f=this;let p=!1,m=null,v=0,g=0,y=null,b=null,x=-1,w=null,_=null;const S=new qn,M=new qn;let T=null,E=t.width,C=t.height,A=1,O=null,L=null;const k=new qn(0,0,E,C),P=new qn(0,0,E,C);let D=!1;const I=new Oo;let N=!1,F=!1;const R=new Mi,B=new Qn,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function z(){return null===y?A:1}let U,V,G,H,W,q,Y,$,X,Q,K,Z,ee,te,ne,ie,re,oe,ae,se,le,ce=n;function ue(e,n){for(let i=0;i<e.length;i++){const r=e[i],o=t.getContext(r,n);if(null!==o)return o}return null}try{const e={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",me,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&t.shift(),ce=ue(t,e),null===ce)throw ue(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function he(){U=new Go(ce),V=new zo(ce,U,e),!1===V.isWebGL2&&(U.get("WEBGL_depth_texture"),U.get("OES_texture_float"),U.get("OES_texture_half_float"),U.get("OES_texture_half_float_linear"),U.get("OES_standard_derivatives"),U.get("OES_element_index_uint"),U.get("OES_vertex_array_object"),U.get("ANGLE_instanced_arrays")),U.get("OES_texture_float_linear"),se=new Ps(ce,U,V),G=new Ls(ce,U,V),G.scissor(M.copy(P).multiplyScalar(A).floor()),G.viewport(S.copy(k).multiplyScalar(A).floor()),H=new qo(ce),W=new vs,q=new ks(ce,U,G,W,V,se,H),Y=new Vo(f),$=new ko(ce,V),le=new Bo(ce,U,$,V),X=new Ho(ce,$,H,le),Q=new Qo(ce,X,$,H),re=new Xo(ce),ne=new Uo(W),K=new ms(f,Y,U,V,le,ne),Z=new Rs(W),ee=new xs(W),te=new Es,ie=new Ro(f,Y,G,Q,s),oe=new jo(ce,U,H,V),ae=new Wo(ce,U,H,V),H.programs=K.programs,f.capabilities=V,f.extensions=U,f.properties=W,f.renderLists=ee,f.state=G,f.info=H}he();const de=new Fs(f,ce);this.xr=de;const fe=new Os(f,Q,V.maxTextureSize);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,he()}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){ge(e),W.remove(e)}(t)}function ge(e){const t=W.get(e).program;void 0!==t&&K.releaseProgram(t)}this.shadowMap=fe,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=U.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=U.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(E,C,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new zn),e.set(E,C)},this.setSize=function(e,n,i){de.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,C=n,t.width=Math.floor(e*A),t.height=Math.floor(n*A),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new zn),e.set(E*A,C*A).floor()},this.setDrawingBufferSize=function(e,n,i){E=e,C=n,A=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new qn),e.copy(S)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,i){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,i),G.viewport(S.copy(k).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),G.scissor(M.copy(P).multiplyScalar(A).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){G.setScissorTest(D=e)},this.setOpaqueSort=function(e){O=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(){return ie.getClearColor()},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),ce.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),W.dispose(),Y.dispose(),Q.dispose(),le.dispose(),de.dispose(),be.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();const n=W.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());const i=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),le.enableAttribute(i.position),ce.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),le.enableAttribute(i.normal),ce.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),le.enableAttribute(i.uv),ce.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),le.enableAttribute(i.color),ce.vertexAttribPointer(i.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=j);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=Te(e,t,i,r);G.setMaterial(i,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===i.wireframe&&(l=X.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&re.update(r,n,i,s),le.setup(r,i,s,n,l);let d=oe;null!==l&&(u=$.get(l),d=ae,d.setIndex(u));const f=null!==l?l.count:c.count,p=n.drawRange.start*h,m=n.drawRange.count*h,v=null!==o?o.start*h:0,g=null!==o?o.count*h:1/0,y=Math.max(p,v),b=Math.min(f,p+m,v+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(r.isMesh)!0===i.wireframe?(G.setLineWidth(i.wireframeLinewidth*z()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),G.setLineWidth(e*z()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,x,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,e)}else d.render(y,x)}},this.compile=function(e,t){d=te.get(e,t),d.init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);const n=new WeakMap;e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];!1===n.has(o)&&(Se(o,e,t),n.set(o))}else!1===n.has(i)&&(Se(i,e,t),n.set(i))}))};let ye=null;const be=new Lo;function xe(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(R);const t=Q.update(e),r=e.material;r.visible&&h.push(e,t,r,n,B.z,null)}}else if(e.isImmediateRenderObject)i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(R),h.push(e,null,e.material,n,B.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||I.intersectsObject(e))){i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(R);const t=Q.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,B.z,a)}}else r.visible&&h.push(e,t,r,n,B.z,null)}const r=e.children;for(let e=0,o=r.length;e<o;e++)xe(r[e],t,n,i)}function we(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],a=o.object,s=o.geometry,l=null===i?o.material:i,c=o.group;if(n.isArrayCamera){_=n;const e=n.cameras;for(let n=0,i=e.length;n<i;n++){const i=e[n];a.layers.test(i.layers)&&(G.viewport(S.copy(i.viewport)),d.setupLights(i),_e(a,t,i,s,l,c))}}else _=null,_e(a,t,n,s,l,c)}}function _e(e,t,n,i,r,o){if(e.onBeforeRender(f,t,n,i,r,o),d=te.get(t,_||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=Te(n,t,r,e);G.setMaterial(r),le.reset(),function(e,t){e.render((function(e){f.renderBufferImmediate(e,t)}))}(e,i)}else f.renderBufferDirect(n,t,i,r,e,o);e.onAfterRender(f,t,n,i,r,o),d=te.get(t,_||n)}function Se(e,t,n){!0!==t.isScene&&(t=j);const i=W.get(e),r=d.state.lights,o=d.state.shadowsArray,a=r.state.version,s=K.getParameters(e,r.state,o,t,n),l=K.getProgramCacheKey(s);let c=i.program,u=!0;if(void 0===c)e.addEventListener("dispose",ve);else if(c.cacheKey!==l)ge(e);else if(i.lightsStateVersion!==a)u=!1;else{if(void 0!==s.shaderID){const n=e.isMeshStandardMaterial?t.environment:null;return void(i.envMap=Y.get(e.envMap||n))}u=!1}u&&(s.uniforms=K.getUniforms(e),e.onBeforeCompile(s,f),c=K.acquireProgram(s,l),i.program=c,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ne.numPlanes,i.numIntersection=ne.numIntersection,h.clippingPlanes=ne.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=Y.get(e.envMap||i.environment),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=i.program.getUniforms(),m=$a.seqWithValue(p.seq,h);i.uniformsList=m}function Te(e,t,n,i){!0!==t.isScene&&(t=j),q.resetTextureUnits();const r=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===y?f.outputEncoding:y.texture.encoding,s=Y.get(n.envMap||o),l=W.get(n),c=d.state.lights;if(!0===N&&(!0===F||e!==w)){const t=e===w&&n.id===x;ne.setState(n,e,t)}n.version===l.__version?n.fog&&l.fog!==r||l.environment!==o||l.needsLights&&l.lightsStateVersion!==c.state.version?Se(n,t,i):void 0===l.numClippingPlanes||l.numClippingPlanes===ne.numPlanes&&l.numIntersection===ne.numIntersection?(l.outputEncoding!==a||l.envMap!==s)&&Se(n,t,i):Se(n,t,i):(Se(n,t,i),l.__version=n.version);let u=!1,h=!1,p=!1;const m=l.program,v=m.getUniforms(),g=l.uniforms;if(G.useProgram(m.program)&&(u=!0,h=!0,p=!0),n.id!==x&&(x=n.id,h=!0),u||w!==e){if(v.setValue(ce,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&v.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,h=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=v.map.cameraPosition;void 0!==t&&t.setValue(ce,B.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&v.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&v.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){v.setOptional(ce,i,"bindMatrix"),v.setOptional(ce,i,"bindMatrixInverse");const e=i.skeleton;if(e){const t=e.bones;if(V.floatVertexTextures){if(void 0===e.boneTexture){let n=Math.sqrt(4*t.length);n=jn.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(e.boneMatrices);const r=new Eo(i,n,n,Be,Le);e.boneMatrices=i,e.boneTexture=r,e.boneTextureSize=n}v.setValue(ce,"boneTexture",e.boneTexture,q),v.setValue(ce,"boneTextureSize",e.boneTextureSize)}else v.setOptional(ce,e,"boneMatrices")}}var b,_;return(h||l.receiveShadow!==i.receiveShadow)&&(l.receiveShadow=i.receiveShadow,v.setValue(ce,"receiveShadow",i.receiveShadow)),h&&(v.setValue(ce,"toneMappingExposure",f.toneMappingExposure),l.needsLights&&(_=p,(b=g).ambientLightColor.needsUpdate=_,b.lightProbe.needsUpdate=_,b.directionalLights.needsUpdate=_,b.directionalLightShadows.needsUpdate=_,b.pointLights.needsUpdate=_,b.pointLightShadows.needsUpdate=_,b.spotLights.needsUpdate=_,b.spotLightShadows.needsUpdate=_,b.rectAreaLights.needsUpdate=_,b.hemisphereLights.needsUpdate=_),r&&n.fog&&Z.refreshFogUniforms(g,r),Z.refreshMaterialUniforms(g,n,A,C),$a.upload(ce,l.uniformsList,g,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&($a.upload(ce,l.uniformsList,g,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(ce,"center",i.center),v.setValue(ce,"modelViewMatrix",i.modelViewMatrix),v.setValue(ce,"normalMatrix",i.normalMatrix),v.setValue(ce,"modelMatrix",i.matrixWorld),m}be.setAnimationLoop((function(e){de.isPresenting||ye&&ye(e)})),"undefined"!=typeof window&&be.setContext(window),this.setAnimationLoop=function(e){ye=e,de.setAnimationLoop(e),null===e?be.stop():be.start()},this.render=function(e,t){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===p)return;le.resetDefaultState(),x=-1,w=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===de.enabled&&!0===de.isPresenting&&(t=de.getCamera(t)),!0===e.isScene&&e.onBeforeRender(f,e,t,n||y),d=te.get(e,t),d.init(),R.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(R),F=this.localClippingEnabled,N=ne.init(this.clippingPlanes,F,t),h=ee.get(e,t),h.init(),xe(e,t,0,f.sortObjects),h.finish(),!0===f.sortObjects&&h.sort(O,L),!0===N&&ne.beginShadows();const r=d.state.shadowsArray;fe.render(r,e,t),d.setupLights(t),!0===N&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),ie.render(h,e,t,i);const o=h.opaque,a=h.transparent;o.length>0&&we(o,e,t),a.length>0&&we(a,e,t),!0===e.isScene&&e.onAfterRender(f,e,t),null!==y&&(q.updateRenderTargetMipmap(y),q.updateMultisampleRenderTarget(y)),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),h=null,d=null},this.setFramebuffer=function(e){m!==e&&null===y&&ce.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return g},this.getRenderList=function(){return h},this.setRenderList=function(e){h=e},this.getRenderState=function(){return d},this.setRenderState=function(e){d=e},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e,t=0,n=0){y=e,v=t,g=n,e&&void 0===W.get(e).__webglFramebuffer&&q.setupRenderTarget(e);let i=m,r=!1;if(e){const n=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=n[t],r=!0):i=e.isWebGLMultisampleRenderTarget?W.get(e).__webglMultisampledFramebuffer:n,S.copy(e.viewport),M.copy(e.scissor),T=e.scissorTest}else S.copy(k).multiplyScalar(A).floor(),M.copy(P).multiplyScalar(A).floor(),T=D;if(b!==i&&(ce.bindFramebuffer(36160,i),b=i),G.viewport(S),G.scissor(M),G.setScissorTest(T),r){const i=W.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,i,r,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==b&&(ce.bindFramebuffer(36160,s),a=!0);try{const s=e.texture,l=s.format,c=s.type;if(l!==Be&&se.convert(l)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Me||se.convert(c)===ce.getParameter(35738)||c===Le&&(V.isWebGL2||U.get("OES_texture_float")||U.get("WEBGL_color_buffer_float"))||c===ke&&(V.isWebGL2?U.get("EXT_color_buffer_float"):U.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ce.readPixels(t,n,i,r,se.convert(l),se.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&ce.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i),a=se.convert(t.format);q.setTexture2D(t,0),ce.copyTexImage2D(3553,n,a,e.x,e.y,r,o,0),G.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);const r=t.image.width,o=t.image.height,a=se.convert(n.format),s=se.convert(n.type);q.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,i,e.x,e.y,r,o,a,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ce.texSubImage2D(3553,i,e.x,e.y,a,s,t.image),0===i&&n.generateMipmaps&&ce.generateMipmap(3553),G.unbindTexture()},this.initTexture=function(e){q.setTexture2D(e,0),G.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function js(e){Bs.call(this,e)}Ds.prototype=Object.assign(Object.create(So.prototype),{constructor:Ds,isArrayCamera:!0}),Is.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Is,isGroup:!0}),Object.assign(Ns.prototype,{constructor:Ns,getHandSpace:function(){if(null===this._hand&&(this._hand=new Is,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const e=new Is;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Is,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Is,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e)if(l&&e.hand){o=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(e.hand[i]){const r=t.getJointPose(e.hand[i],n),o=l.joints[i];null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=r.radius),o.visible=null!==r;const a=l.joints[window.XRHand.INDEX_PHALANX_TIP],s=l.joints[window.XRHand.THUMB_PHALANX_TIP],c=a.position.distanceTo(s.position),u=.02,h=.005;l.inputState.pinching&&c>u+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=u-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==a&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}}),Object.assign(Fs.prototype,Fn.prototype),js.prototype=Object.assign(Object.create(Bs.prototype),{constructor:js,isWebGL1Renderer:!0});class zs{constructor(e,t){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new gr(e),this.density=void 0!==t?t:25e-5}clone(){return new zs(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Us{constructor(e,t,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new gr(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}clone(){return new Us(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Vs extends Xi{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function Gs(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=jn.generateUUID()}Object.defineProperty(Gs.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Gs.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new Gs(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Hs=new Qn;function Ws(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function qs(e){xr.call(this),this.type="SpriteMaterial",this.color=new gr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Ys;Object.defineProperties(Ws.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Ws.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Hs.x=this.getX(t),Hs.y=this.getY(t),Hs.z=this.getZ(t),Hs.applyMatrix4(e),this.setXYZ(t,Hs.x,Hs.y,Hs.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Mr(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ws(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),qs.prototype=Object.create(xr.prototype),qs.prototype.constructor=qs,qs.prototype.isSpriteMaterial=!0,qs.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const $s=new Qn,Xs=new Qn,Qs=new Qn,Ks=new zn,Js=new zn,Zs=new Mi,el=new Qn,tl=new Qn,nl=new Qn,il=new zn,rl=new zn,ol=new zn;function al(e){if(Xi.call(this),this.type="Sprite",void 0===Ys){Ys=new Gr;const e=new Gs(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ys.setIndex([0,1,2,0,2,3]),Ys.setAttribute("position",new Ws(e,3,0,!1)),Ys.setAttribute("uv",new Ws(e,2,3,!1))}this.geometry=Ys,this.material=void 0!==e?e:new qs,this.center=new zn(.5,.5)}function sl(e,t,n,i,r,o){Ks.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Js.x=o*Ks.x-r*Ks.y,Js.y=r*Ks.x+o*Ks.y):Js.copy(Ks),e.copy(t),e.x+=Js.x,e.y+=Js.y,e.applyMatrix4(Zs)}al.prototype=Object.assign(Object.create(Xi.prototype),{constructor:al,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xs.setFromMatrixScale(this.matrixWorld),Zs.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Qs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Xs.multiplyScalar(-Qs.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;sl(el.set(-.5,-.5,0),Qs,o,Xs,i,r),sl(tl.set(.5,-.5,0),Qs,o,Xs,i,r),sl(nl.set(.5,.5,0),Qs,o,Xs,i,r),il.set(0,0),rl.set(1,0),ol.set(1,1);let a=e.ray.intersectTriangle(el,tl,nl,!1,$s);if(null===a&&(sl(tl.set(-.5,.5,0),Qs,o,Xs,i,r),rl.set(0,1),a=e.ray.intersectTriangle(el,nl,tl,!1,$s),null===a))return;const s=e.ray.origin.distanceTo($s);s<e.near||s>e.far||t.push({distance:s,point:$s.clone(),uv:ur.getUV($s,el,tl,nl,il,rl,ol,new zn),face:null,object:this})},copy:function(e){return Xi.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const ll=new Qn,cl=new Qn;function ul(){Xi.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function hl(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),so.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Mi,this.bindMatrixInverse=new Mi}ul.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ul,isLOD:!0,copy:function(e){Xi.prototype.copy.call(this,e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){ll.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(ll);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){ll.setFromMatrixPosition(e.matrixWorld),cl.setFromMatrixPosition(this.matrixWorld);const n=ll.distanceTo(cl)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=Xi.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,i=n.length;e<i;e++){const i=n[e];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),hl.prototype=Object.assign(Object.create(so.prototype),{constructor:hl,isSkinnedMesh:!0,copy:function(e){return so.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new qn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){so.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new Qn,t=new qn,n=new qn,i=new Qn,r=new Mi;return function(o,a){const s=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,o),n.fromBufferAttribute(l.attributes.skinWeight,o),e.fromBufferAttribute(l.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let o=0;o<4;o++){const l=n.getComponent(o);if(0!==l){const n=t.getComponent(o);r.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),a.addScaledVector(i.copy(e).applyMatrix4(r),l)}}return a.applyMatrix4(this.bindMatrixInverse)}}()});const dl=new Mi,fl=new Mi;function pl(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Mi)}}function ml(){Xi.call(this),this.type="Bone"}Object.assign(pl.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const t=new Mi;this.bones[e]&&t.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:fl;dl.multiplyMatrices(r,t[i]),dl.toArray(n,16*i)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new pl(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),ml.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ml,isBone:!0});const vl=new Mi,gl=new Mi,yl=[],bl=new so;function xl(e,t,n){so.call(this,e,t),this.instanceMatrix=new Mr(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function wl(e){xr.call(this),this.type="LineBasicMaterial",this.color=new gr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}xl.prototype=Object.assign(Object.create(so.prototype),{constructor:xl,isInstancedMesh:!0,copy:function(e){return so.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new Mr(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(bl.geometry=this.geometry,bl.material=this.material,void 0!==bl.material)for(let r=0;r<i;r++){this.getMatrixAt(r,vl),gl.multiplyMatrices(n,vl),bl.matrixWorld=gl,bl.raycast(e,yl);for(let e=0,n=yl.length;e<n;e++){const n=yl[e];n.instanceId=r,n.object=this,t.push(n)}yl.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),wl.prototype=Object.create(xr.prototype),wl.prototype.constructor=wl,wl.prototype.isLineBasicMaterial=!0,wl.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const _l=new Qn,Sl=new Qn,Ml=new Mi,Tl=new Si,El=new mi;function Cl(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Xi.call(this),this.type="Line",this.geometry=void 0!==e?e:new Gr,this.material=void 0!==t?t:new wl,this.updateMorphTargets()}Cl.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Cl,isLine:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)_l.fromBufferAttribute(t,e-1),Sl.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=_l.distanceTo(Sl);e.setAttribute("lineDistance",new Pr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let e=1,i=t.length;e<i;e++)n[e]=n[e-1],n[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),El.copy(n.boundingSphere),El.applyMatrix4(i),El.radius+=r,!1===e.ray.intersectsSphere(El))return;Ml.getInverse(i),Tl.copy(e.ray).applyMatrix4(Ml);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Qn,l=new Qn,c=new Qn,u=new Qn,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position.array;if(null!==i){const n=i.array;for(let i=0,o=n.length-1;i<o;i+=h){const o=n[i],h=n[i+1];s.fromArray(r,3*o),l.fromArray(r,3*h);if(Tl.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,i=r.length/3-1;n<i;n+=h){s.fromArray(r,3*n),l.fromArray(r,3*n+3);if(Tl.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const i=n.vertices,r=i.length;for(let n=0;n<r-1;n+=h){if(Tl.distanceSqToSegment(i[n],i[n+1],u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Al=new Qn,Ol=new Qn;function Ll(e,t){Cl.call(this,e,t),this.type="LineSegments"}function kl(e,t){Cl.call(this,e,t),this.type="LineLoop"}function Pl(e){xr.call(this),this.type="PointsMaterial",this.color=new gr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Ll.prototype=Object.assign(Object.create(Cl.prototype),{constructor:Ll,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Al.fromBufferAttribute(t,e),Ol.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Al.distanceTo(Ol);e.setAttribute("lineDistance",new Pr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let e=0,i=t.length;e<i;e+=2)Al.copy(t[e]),Ol.copy(t[e+1]),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Al.distanceTo(Ol)}return this}}),kl.prototype=Object.assign(Object.create(Cl.prototype),{constructor:kl,isLineLoop:!0}),Pl.prototype=Object.create(xr.prototype),Pl.prototype.constructor=Pl,Pl.prototype.isPointsMaterial=!0,Pl.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const Dl=new Mi,Il=new Si,Nl=new mi,Fl=new Qn;function Rl(e,t){Xi.call(this),this.type="Points",this.geometry=void 0!==e?e:new Gr,this.material=void 0!==t?t:new Pl,this.updateMorphTargets()}function Bl(e,t,n,i,r,o,a){const s=Il.distanceSqToPoint(e);if(s<n){const n=new Qn;Il.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}function jl(e,t,n,i,r,o,a,s,l){Wn.call(this,e,t,n,i,r,o,a,s,l),this.format=void 0!==a?a:Re,this.minFilter=void 0!==o?o:be,this.magFilter=void 0!==r?r:be,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function zl(e,t,n,i,r,o,a,s,l,c,u,h){Wn.call(this,null,o,a,s,l,c,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ul(e,t,n,i,r,o,a,s,l){Wn.call(this,e,t,n,i,r,o,a,s,l),this.needsUpdate=!0}function Vl(e,t,n,i,r,o,a,s,l,c){if((c=void 0!==c?c:Ve)!==Ve&&c!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ve&&(n=Ce),void 0===n&&c===Ge&&(n=Ne),Wn.call(this,null,i,r,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:pe,this.minFilter=void 0!==s?s:pe,this.flipY=!1,this.generateMipmaps=!1}Rl.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Rl,isPoints:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Nl.copy(n.boundingSphere),Nl.applyMatrix4(i),Nl.radius+=r,!1===e.ray.intersectsSphere(Nl))return;Dl.getInverse(i),Il.copy(e.ray).applyMatrix4(Dl);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position.array;if(null!==r){const n=r.array;for(let r=0,s=n.length;r<s;r++){const s=n[r];Fl.fromArray(o,3*s),Bl(Fl,s,a,i,e,t,this)}}else for(let n=0,r=o.length/3;n<r;n++)Fl.fromArray(o,3*n),Bl(Fl,n,a,i,e,t,this)}else{const r=n.vertices;for(let n=0,o=r.length;n<o;n++)Bl(r[n],n,a,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),jl.prototype=Object.assign(Object.create(Wn.prototype),{constructor:jl,isVideoTexture:!0,update:function(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),zl.prototype=Object.create(Wn.prototype),zl.prototype.constructor=zl,zl.prototype.isCompressedTexture=!0,Ul.prototype=Object.create(Wn.prototype),Ul.prototype.constructor=Ul,Ul.prototype.isCanvasTexture=!0,Vl.prototype=Object.create(Wn.prototype),Vl.prototype.constructor=Vl,Vl.prototype.isDepthTexture=!0;class Gl extends Gr{constructor(e){super(),this.type="WireframeGeometry";const t=[],n=[0,0],i={},r=["a","b","c"];if(e&&e.isGeometry){const o=e.faces;for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0;e<3;e++){const o=t[r[e]],a=t[r[(e+1)%3]];n[0]=Math.min(o,a),n[1]=Math.max(o,a);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const n in i){const r=i[n];let o=e.vertices[r.index1];t.push(o.x,o.y,o.z),o=e.vertices[r.index2],t.push(o.x,o.y,o.z)}}else if(e&&e.isBufferGeometry){const r=new Qn;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],r=t.start;for(let e=r,o=r+t.count;e<o;e+=3)for(let t=0;t<3;t++){const r=a.getX(e+t),o=a.getX(e+(t+1)%3);n[0]=Math.min(r,o),n[1]=Math.max(r,o);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const e in i){const n=i[e];r.fromBufferAttribute(o,n.index1),t.push(r.x,r.y,r.z),r.fromBufferAttribute(o,n.index2),t.push(r.x,r.y,r.z)}}else{const n=e.attributes.position;for(let e=0,i=n.count/3;e<i;e++)for(let i=0;i<3;i++){const o=3*e+i;r.fromBufferAttribute(n,o),t.push(r.x,r.y,r.z);const a=3*e+(i+1)%3;r.fromBufferAttribute(n,a),t.push(r.x,r.y,r.z)}}}this.setAttribute("position",new Pr(t,3))}}function Hl(e,t,n){mo.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Wl(e,t,n)),this.mergeVertices()}function Wl(e,t,n){Gr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],o=[],a=[],s=1e-5,l=new Qn,c=new Qn,u=new Qn,h=new Qn,d=new Qn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=t+1;for(let i=0;i<=n;i++){const f=i/n;for(let n=0;n<=t;n++){const i=n/t;e(i,f,c),r.push(c.x,c.y,c.z),i-s>=0?(e(i-s,f,u),h.subVectors(c,u)):(e(i+s,f,u),h.subVectors(u,c)),f-s>=0?(e(i,f-s,u),d.subVectors(c,u)):(e(i,f+s,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),o.push(l.x,l.y,l.z),a.push(i,f)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*f+n,r=e*f+n+1,o=(e+1)*f+n+1,a=(e+1)*f+n;i.push(t,r,a),i.push(r,o,a)}this.setIndex(i),this.setAttribute("position",new Pr(r,3)),this.setAttribute("normal",new Pr(o,3)),this.setAttribute("uv",new Pr(a,2))}Hl.prototype=Object.create(mo.prototype),Hl.prototype.constructor=Hl,Wl.prototype=Object.create(Gr.prototype),Wl.prototype.constructor=Wl;class ql extends mo{constructor(e,t,n,i){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Yl(e,t,n,i)),this.mergeVertices()}}class Yl extends Gr{constructor(e,t,n,i){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;const r=[],o=[];function a(e,t,n,i){const r=Math.pow(2,i),o=[];for(let i=0;i<=r;i++){o[i]=[];const a=e.clone().lerp(n,i/r),s=t.clone().lerp(n,i/r),l=r-i;for(let e=0;e<=l;e++)o[i][e]=0===e&&i===r?a:a.clone().lerp(s,e/l)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(o[e][n+1]),s(o[e+1][n]),s(o[e][n])):(s(o[e][n+1]),s(o[e+1][n+1]),s(o[e+1][n]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Qn,i=new Qn,r=new Qn;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),a(n,i,r,e)}(i=i||0),function(e){const t=new Qn;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Qn;for(let n=0;n<r.length;n+=3){e.x=r[n+0],e.y=r[n+1],e.z=r[n+2];const i=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(i,1-a)}var t;(function(){const e=new Qn,t=new Qn,n=new Qn,i=new Qn,a=new zn,s=new zn,l=new zn;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const f=u(i);c(a,d+0,e,f),c(s,d+2,t,f),c(l,d+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Pr(r,3)),this.setAttribute("normal",new Pr(r.slice(),3)),this.setAttribute("uv",new Pr(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}}class $l extends mo{constructor(e,t){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Xl(e,t)),this.mergeVertices()}}class Xl extends Yl{constructor(e,t){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class Ql extends mo{constructor(e,t){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Kl(e,t)),this.mergeVertices()}}class Kl extends Yl{constructor(e,t){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class Jl extends mo{constructor(e,t){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Zl(e,t)),this.mergeVertices()}}class Zl extends Yl{constructor(e,t){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class ec extends mo{constructor(e,t){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new tc(e,t)),this.mergeVertices()}}class tc extends Yl{constructor(e,t){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class nc extends mo{constructor(e,t,n,i,r,o){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new ic(e,t,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class ic extends Gr{constructor(e,t,n,i,r){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Qn,s=new Qn,l=new zn;let c=new Qn;const u=[],h=[],d=[],f=[];function p(r){c=e.getPointAt(r/t,c);const l=o.normals[r],d=o.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+r*d.x,s.y=o*l.y+r*d.y,s.z=o*l.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,a=(i+1)*(e-1)+t;f.push(n,r,a),f.push(r,o,a)}}()}(),this.setIndex(f),this.setAttribute("position",new Pr(u,3)),this.setAttribute("normal",new Pr(h,3)),this.setAttribute("uv",new Pr(d,2))}toJSON(){const e=Gr.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class rc extends mo{constructor(e,t,n,i,r,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new oc(e,t,n,i,r,o)),this.mergeVertices()}}class oc extends Gr{constructor(e,t,n,i,r,o){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;const a=[],s=[],l=[],c=[],u=new Qn,h=new Qn,d=new Qn,f=new Qn,p=new Qn,m=new Qn,v=new Qn;for(let a=0;a<=n;++a){const y=a/n*r*Math.PI*2;g(y,r,o,e,d),g(y+.01,r,o,e,f),m.subVectors(f,d),v.addVectors(f,d),p.crossVectors(m,v),v.crossVectors(p,m),p.normalize(),v.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,o=-t*Math.cos(r),f=t*Math.sin(r);u.x=d.x+(o*v.x+f*p.x),u.y=d.y+(o*v.y+f*p.y),u.z=d.z+(o*v.z+f*p.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(a/n),c.push(e/i)}}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,s=(i+1)*(e-1)+t;a.push(n,r,s),a.push(r,o,s)}function g(e,t,n,i,r){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Pr(s,3)),this.setAttribute("normal",new Pr(l,3)),this.setAttribute("uv",new Pr(c,2))}}class ac extends mo{constructor(e,t,n,i,r){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new sc(e,t,n,i,r)),this.mergeVertices()}}class sc extends Gr{constructor(e,t,n,i,r){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;const o=[],a=[],s=[],l=[],c=new Qn,u=new Qn,h=new Qn;for(let o=0;o<=n;o++)for(let d=0;d<=i;d++){const f=d/i*r,p=o/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),a.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(d/i),l.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*e+t-1,r=(i+1)*(e-1)+t-1,a=(i+1)*(e-1)+t,s=(i+1)*e+t;o.push(n,r,s),o.push(r,a,s)}this.setIndex(o),this.setAttribute("position",new Pr(a,3)),this.setAttribute("normal",new Pr(s,3)),this.setAttribute("uv",new Pr(l,2))}}const lc=function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=cc(e,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,f;if(i&&(o=function(e,t,n,i){const r=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*i,l=o<a-1?t[o+1]*i:e.length,c=cc(e,s,l,i,!1),c===c.next&&(c.steiner=!0),r.push(xc(c));for(r.sort(vc),o=0;o<r.length;o++)gc(r[o],n),n=uc(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-s,u-l),f=0!==f?1/f:0}return hc(o,a,n,s,l,f),a};function cc(e,t,n,i,r){let o,a;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=Lc(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=Lc(o,e[o],e[o+1],a);return a&&Mc(a,a.next)&&(kc(a),a=a.next),a}function uc(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Mc(i,i.next)&&0!==Sc(i.prev,i,i.next))i=i.next;else{if(kc(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function hc(e,t,n,i,r,o,a){if(!e)return;!a&&o&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=bc(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ,i);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?fc(e,i,r,o):dc(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),kc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?hc(e=pc(uc(e),t,n),t,n,i,r,o,2):2===a&&mc(e,t,n,i,r,o):hc(uc(e),t,n,i,r,o,1);break}}function dc(e){const t=e.prev,n=e,i=e.next;if(Sc(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(wc(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Sc(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function fc(e,t,n,i){const r=e.prev,o=e,a=e.next;if(Sc(r,o,a)>=0)return!1;const s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=bc(s,l,t,n,i),d=bc(c,u,t,n,i);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&wc(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Sc(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&wc(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Sc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&wc(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Sc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&wc(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Sc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function pc(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!Mc(r,o)&&Tc(r,i,i.next,o)&&Ac(r,o)&&Ac(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),kc(i),kc(i.next),i=e=o),i=i.next}while(i!==e);return uc(i)}function mc(e,t,n,i,r,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&_c(a,e)){let s=Oc(a,e);return a=uc(a,a.next),s=uc(s,s.next),hc(a,t,n,i,r,o),void hc(s,t,n,i,r,o)}e=e.next}a=a.next}while(a!==e)}function vc(e,t){return e.x-t.x}function gc(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>a){if(a=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(i===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&wc(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),Ac(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&yc(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(e,t)){const n=Oc(t,e);uc(t,t.next),uc(n,n.next)}}function yc(e,t){return Sc(e.prev,e,t.prev)<0&&Sc(t.next,e,e.next)<0}function bc(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function xc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function wc(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function _c(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Tc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Ac(e,t)&&Ac(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Sc(e.prev,e,t.prev)||Sc(e,t.prev,t))||Mc(e,t)&&Sc(e.prev,e,e.next)>0&&Sc(t.prev,t,t.next)>0)}function Sc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Mc(e,t){return e.x===t.x&&e.y===t.y}function Tc(e,t,n,i){const r=Cc(Sc(e,t,n)),o=Cc(Sc(e,t,i)),a=Cc(Sc(n,i,e)),s=Cc(Sc(n,i,t));return r!==o&&a!==s||(!(0!==r||!Ec(e,n,t))||(!(0!==o||!Ec(e,i,t))||(!(0!==a||!Ec(n,e,i))||!(0!==s||!Ec(n,t,i)))))}function Ec(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Cc(e){return e>0?1:e<0?-1:0}function Ac(e,t){return Sc(e.prev,e,e.next)<0?Sc(e,t,e.next)>=0&&Sc(e,e.prev,t)>=0:Sc(e,t,e.prev)<0||Sc(e,e.next,t)<0}function Oc(e,t){const n=new Pc(e.i,e.x,e.y),i=new Pc(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Lc(e,t,n,i){const r=new Pc(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function kc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Pc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Dc={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Dc.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];Ic(e),Nc(n,e);let o=e.length;t.forEach(Ic);for(let e=0;e<t.length;e++)i.push(o),o+=t[e].length,Nc(n,t[e]);const a=lc(n,i);for(let e=0;e<a.length;e+=3)r.push(a.slice(e,e+3));return r}};function Ic(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Nc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Fc extends mo{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Rc(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON();return jc(this.parameters.shapes,this.parameters.options,e)}}class Rc extends Gr{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++){o(e[t])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Bc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let v,g,y,b,x,w=!1;p&&(v=p.getSpacedPoints(s),w=!0,c=!1,g=p.computeFrenetFrames(s,!1),y=new Qn,b=new Qn,x=new Qn),c||(f=0,u=0,h=0,d=0);const _=e.extractPoints(a);let S=_.shape;const M=_.holes;if(!Dc.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];Dc.isClockWise(t)&&(M[e]=t.reverse())}}const T=Dc.triangulateShape(S,M),E=S;for(let e=0,t=M.length;e<t;e++){const t=M[e];S=S.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const A=S.length,O=T.length;function L(e,t,n){let i,r,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-s/h,p=t.y+a/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(a*c-s*l);i=f+a*m-e.x,r=p+s*m-e.y;const v=i*i+r*r;if(v<=2)return new zn(i,r);o=Math.sqrt(v/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new zn(i/o,r/o)}const k=[];for(let e=0,t=E.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),k[e]=L(E[e],E[n],E[i]);const P=[];let D,I=k.concat();for(let e=0,t=M.length;e<t;e++){const t=M[e];D=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),D[e]=L(t[e],t[i],t[r]);P.push(D),I=I.concat(D)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=E.length;e<t;e++){const t=C(E[e],k[e],i);R(t.x,t.y,-n)}for(let e=0,t=M.length;e<t;e++){const t=M[e];D=P[e];for(let e=0,r=t.length;e<r;e++){const r=C(t[e],D[e],i);R(r.x,r.y,-n)}}}const N=h+d;for(let e=0;e<A;e++){const t=c?C(S[e],I[e],N):S[e];w?(b.copy(g.normals[0]).multiplyScalar(t.x),y.copy(g.binormals[0]).multiplyScalar(t.y),x.copy(v[0]).add(b).add(y),R(x.x,x.y,x.z)):R(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<A;t++){const n=c?C(S[t],I[t],N):S[t];w?(b.copy(g.normals[e]).multiplyScalar(n.x),y.copy(g.binormals[e]).multiplyScalar(n.y),x.copy(v[e]).add(b).add(y),R(x.x,x.y,x.z)):R(n.x,n.y,l/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=E.length;e<t;e++){const t=C(E[e],k[e],i);R(t.x,t.y,l+n)}for(let e=0,t=M.length;e<t;e++){const t=M[e];D=P[e];for(let e=0,r=t.length;e<r;e++){const r=C(t[e],D[e],i);w?R(r.x,r.y+v[s-1].y,v[s-1].x+n):R(r.x,r.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=A*e,o=A*(e+1);j(t+i+n,t+r+n,t+r+o,t+i+o)}}}function R(e,t,n){o.push(e),o.push(t),o.push(n)}function B(e,t,r){z(e),z(t),z(r);const o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[2])}function j(e,t,r,o){z(e),z(t),z(o),z(t),z(r),z(o);const a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[3]),U(s[1]),U(s[2]),U(s[3])}function z(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function U(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=A*e;for(let e=0;e<O;e++){const n=T[e];B(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=A*e;for(let e=0;e<O;e++){const n=T[e];B(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<O;e++){const t=T[e];B(t[2],t[1],t[0])}for(let e=0;e<O;e++){const t=T[e];B(t[0]+A*s,t[1]+A*s,t[2]+A*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;F(E,t),t+=E.length;for(let e=0,n=M.length;e<n;e++){const n=M[e];F(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Pr(i,3)),this.setAttribute("uv",new Pr(r,2)),this.computeVertexNormals()}toJSON(){const e=Gr.prototype.toJSON.call(this);return jc(this.parameters.shapes,this.parameters.options,e)}}const Bc={generateTopUV:function(e,t,n,i,r){const o=t[3*n],a=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new zn(o,a),new zn(s,l),new zn(c,u)]},generateSideWallUV:function(e,t,n,i,r,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-u)<.01?[new zn(a,1-l),new zn(c,1-h),new zn(d,1-p),new zn(m,1-g)]:[new zn(s,1-l),new zn(u,1-h),new zn(f,1-p),new zn(v,1-g)]}};function jc(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class zc extends mo{constructor(e,t){super(),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Uc(e,t)),this.mergeVertices()}}class Uc extends Rc{constructor(e,t){const n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new mo;const i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(i,t),this.type="TextBufferGeometry"}}class Vc extends mo{constructor(e,t,n,i,r,o,a){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Gc(e,t,n,i,r,o,a)),this.mergeVertices()}}class Gc extends Gr{constructor(e,t,n,i,r,o,a){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Qn,h=new Qn,d=[],f=[],p=[],m=[];for(let d=0;d<=n;d++){const v=[],g=d/n;let y=0;0==d&&0==o?y=.5/t:d==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(i+s*r)*Math.sin(o+g*a),u.y=e*Math.cos(o+g*a),u.z=e*Math.sin(i+s*r)*Math.sin(o+g*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(s+y,1-g),v.push(l++)}c.push(v)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=c[e][i+1],r=c[e][i],a=c[e+1][i],l=c[e+1][i+1];(0!==e||o>0)&&d.push(t,r,l),(e!==n-1||s<Math.PI)&&d.push(r,a,l)}this.setIndex(d),this.setAttribute("position",new Pr(f,3)),this.setAttribute("normal",new Pr(p,3)),this.setAttribute("uv",new Pr(m,2))}}class Hc extends mo{constructor(e,t,n,i,r,o){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Wc(e,t,n,i,r,o)),this.mergeVertices()}}class Wc extends Gr{constructor(e,t,n,i,r,o){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;const a=[],s=[],l=[],c=[];let u=e;const h=(t-e)/(i=void 0!==i?Math.max(1,i):1),d=new Qn,f=new zn;for(let e=0;e<=i;e++){for(let e=0;e<=n;e++){const i=r+e/n*o;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let e=0;e<i;e++){const t=e*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,o=i+n+1,s=i+n+2,l=i+1;a.push(r,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Pr(s,3)),this.setAttribute("normal",new Pr(l,3)),this.setAttribute("uv",new Pr(c,2))}}class qc extends mo{constructor(e,t,n,i){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Yc(e,t,n,i)),this.mergeVertices()}}class Yc extends Gr{constructor(e,t,n,i){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=jn.clamp(i,0,2*Math.PI);const r=[],o=[],a=[],s=1/t,l=new Qn,c=new zn;for(let r=0;r<=t;r++){const u=n+r*s*i,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=e.length-1;n++)l.x=e[n].x*h,l.y=e[n].y,l.z=e[n].x*d,o.push(l.x,l.y,l.z),c.x=r/t,c.y=n/(e.length-1),a.push(c.x,c.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const i=t+n*e.length,o=i,a=i+e.length,s=i+e.length+1,l=i+1;r.push(o,a,l),r.push(a,s,l)}if(this.setIndex(r),this.setAttribute("position",new Pr(o,3)),this.setAttribute("uv",new Pr(a,2)),this.computeVertexNormals(),i===2*Math.PI){const n=this.attributes.normal.array,i=new Qn,r=new Qn,o=new Qn,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)i.x=n[s+0],i.y=n[s+1],i.z=n[s+2],r.x=n[a+s+0],r.y=n[a+s+1],r.z=n[a+s+2],o.addVectors(i,r).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class $c extends mo{constructor(e,t){super(),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Xc(e,t)),this.mergeVertices()}toJSON(){const e=mo.prototype.toJSON.call(this);return Qc(this.parameters.shapes,e)}}class Xc extends Gr{constructor(e,t){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,s,t),a+=s,s=0;function l(e){const a=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Dc.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Dc.isClockWise(t)&&(u[e]=t.reverse())}const h=Dc.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],i=t[0]+a,r=t[1]+a,o=t[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Pr(i,3)),this.setAttribute("normal",new Pr(r,3)),this.setAttribute("uv",new Pr(o,2))}toJSON(){const e=Gr.prototype.toJSON.call(this);return Qc(this.parameters.shapes,e)}}function Qc(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}class Kc extends Gr{constructor(e,t){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;const n=[],i=Math.cos(jn.DEG2RAD*t),r=[0,0],o={};let a,s,l;const c=["a","b","c"];let u;e.isBufferGeometry?(u=new mo,u.fromBufferGeometry(e)):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();const h=u.vertices,d=u.faces;for(let e=0,t=d.length;e<t;e++){const t=d[e];for(let n=0;n<3;n++)a=t[c[n]],s=t[c[(n+1)%3]],r[0]=Math.min(a,s),r[1]=Math.max(a,s),l=r[0]+","+r[1],void 0===o[l]?o[l]={index1:r[0],index2:r[1],face1:e,face2:void 0}:o[l].face2=e}for(l in o){const e=o[l];if(void 0===e.face2||d[e.face1].normal.dot(d[e.face2].normal)<=i){let t=h[e.index1];n.push(t.x,t.y,t.z),t=h[e.index2],n.push(t.x,t.y,t.z)}}this.setAttribute("position",new Pr(n,3))}}class Jc extends mo{constructor(e,t,n,i,r,o,a,s){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Zc(e,t,n,i,r,o,a,s)),this.mergeVertices()}}class Zc extends Gr{constructor(e,t,n,i,r,o,a,s){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let v=0;function g(n){const r=f,o=new zn,p=new Qn;let g=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),f++;const x=f;for(let e=0;e<=i;e++){const t=e/i*s+a,n=Math.cos(t),r=Math.sin(t);p.x=y*r,p.y=m*b,p.z=y*n,u.push(p.x,p.y,p.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*r*b+.5,d.push(o.x,o.y),f++}for(let e=0;e<i;e++){const t=r+e,i=x+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),g+=3}l.addGroup(v,g,!0===n?1:2),v+=g}!function(){const o=new Qn,g=new Qn;let y=0;const b=(t-e)/n;for(let l=0;l<=r;l++){const c=[],v=l/r,y=v*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*s+a,l=Math.sin(r),p=Math.cos(r);g.x=y*l,g.y=-v*n+m,g.z=y*p,u.push(g.x,g.y,g.z),o.set(l,b,p).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-v),c.push(f++)}p.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=p[t][e],i=p[t+1][e],r=p[t+1][e+1],o=p[t][e+1];c.push(n,i,o),c.push(i,r,o),y+=6}l.addGroup(v,y,0),v+=y}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.setAttribute("position",new Pr(u,3)),this.setAttribute("normal",new Pr(h,3)),this.setAttribute("uv",new Pr(d,2))}}class eu extends Jc{constructor(e,t,n,i,r,o,a){super(0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}}class tu extends Zc{constructor(e,t,n,i,r,o,a){super(0,e,t,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}}class nu extends mo{constructor(e,t,n,i){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new iu(e,t,n,i)),this.mergeVertices()}}class iu extends Gr{constructor(e,t,n,i){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;const r=[],o=[],a=[],s=[],l=new Qn,c=new zn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let r=0,u=3;r<=t;r++,u+=3){const h=n+r/t*i;l.x=e*Math.cos(h),l.y=e*Math.sin(h),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[u]/e+1)/2,c.y=(o[u+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new Pr(o,3)),this.setAttribute("normal",new Pr(a,3)),this.setAttribute("uv",new Pr(s,2))}}var ru=Object.freeze({__proto__:null,WireframeGeometry:Gl,ParametricGeometry:Hl,ParametricBufferGeometry:Wl,TetrahedronGeometry:$l,TetrahedronBufferGeometry:Xl,OctahedronGeometry:Ql,OctahedronBufferGeometry:Kl,IcosahedronGeometry:Jl,IcosahedronBufferGeometry:Zl,DodecahedronGeometry:ec,DodecahedronBufferGeometry:tc,PolyhedronGeometry:ql,PolyhedronBufferGeometry:Yl,TubeGeometry:nc,TubeBufferGeometry:ic,TorusKnotGeometry:rc,TorusKnotBufferGeometry:oc,TorusGeometry:ac,TorusBufferGeometry:sc,TextGeometry:zc,TextBufferGeometry:Uc,SphereGeometry:Vc,SphereBufferGeometry:Gc,RingGeometry:Hc,RingBufferGeometry:Wc,PlaneGeometry:Po,PlaneBufferGeometry:Do,LatheGeometry:qc,LatheBufferGeometry:Yc,ShapeGeometry:$c,ShapeBufferGeometry:Xc,ExtrudeGeometry:Fc,ExtrudeBufferGeometry:Rc,EdgesGeometry:Kc,ConeGeometry:eu,ConeBufferGeometry:tu,CylinderGeometry:Jc,CylinderBufferGeometry:Zc,CircleGeometry:nu,CircleBufferGeometry:iu,BoxGeometry:vo,BoxBufferGeometry:go});function ou(e){xr.call(this),this.type="ShadowMaterial",this.color=new gr(0),this.transparent=!0,this.setValues(e)}function au(e){wo.call(this,e),this.type="RawShaderMaterial"}function su(e){xr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function lu(e){su.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function cu(e){xr.call(this),this.type="MeshPhongMaterial",this.color=new gr(16777215),this.specular=new gr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function uu(e){xr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hu(e){xr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function du(e){xr.call(this),this.type="MeshLambertMaterial",this.color=new gr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fu(e){xr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function pu(e){wl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}ou.prototype=Object.create(xr.prototype),ou.prototype.constructor=ou,ou.prototype.isShadowMaterial=!0,ou.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this},au.prototype=Object.create(wo.prototype),au.prototype.constructor=au,au.prototype.isRawShaderMaterial=!0,su.prototype=Object.create(xr.prototype),su.prototype.constructor=su,su.prototype.isMeshStandardMaterial=!0,su.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},lu.prototype=Object.create(su.prototype),lu.prototype.constructor=lu,lu.prototype.isMeshPhysicalMaterial=!0,lu.prototype.copy=function(e){return su.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new gr).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},cu.prototype=Object.create(xr.prototype),cu.prototype.constructor=cu,cu.prototype.isMeshPhongMaterial=!0,cu.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},uu.prototype=Object.create(xr.prototype),uu.prototype.constructor=uu,uu.prototype.isMeshToonMaterial=!0,uu.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},hu.prototype=Object.create(xr.prototype),hu.prototype.constructor=hu,hu.prototype.isMeshNormalMaterial=!0,hu.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},du.prototype=Object.create(xr.prototype),du.prototype.constructor=du,du.prototype.isMeshLambertMaterial=!0,du.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fu.prototype=Object.create(xr.prototype),fu.prototype.constructor=fu,fu.prototype.isMeshMatcapMaterial=!0,fu.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},pu.prototype=Object.create(wl.prototype),pu.prototype.constructor=pu,pu.prototype.isLineDashedMaterial=!0,pu.prototype.copy=function(e){return wl.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var mu=Object.freeze({__proto__:null,ShadowMaterial:ou,SpriteMaterial:qs,RawShaderMaterial:au,ShaderMaterial:wo,PointsMaterial:Pl,MeshPhysicalMaterial:lu,MeshStandardMaterial:su,MeshPhongMaterial:cu,MeshToonMaterial:uu,MeshNormalMaterial:hu,MeshLambertMaterial:du,MeshDepthMaterial:Cs,MeshDistanceMaterial:As,MeshBasicMaterial:wr,MeshMatcapMaterial:fu,LineDashedMaterial:pu,LineBasicMaterial:wl,Material:xr});const vu={arraySlice:function(e,t,n){return vu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)},subclip:function(e,t,n,i,r){r=r||30;const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*r;if(!(o<n||o>=i)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=vu.convertArray(l,t.times.constructor),t.values=vu.convertArray(c,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);const r=e.tracks.length,o=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const a=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===a)continue;let s=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=i.times.length-1;let d;if(o<=i.times[0]){const e=s,t=l-s;d=vu.arraySlice(i.values,e,t)}else if(o>=i.times[h]){const e=h*l+s,t=e+l-s;d=vu.arraySlice(i.values,e,t)}else{const e=i.createInterpolant(),t=s,n=l-s;e.evaluate(o),d=vu.arraySlice(e.resultBuffer,t,n)}if("quaternion"===r){(new Xn).fromArray(d).normalize().conjugate().toArray(d)}const f=a.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===r)Xn.multiplyQuaternionsFlat(a.values,t,d,0,a.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)a.values[t+n]-=d[n]}}}return e.blendMode=qt,e}};function gu(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function yu(e,t,n,i){gu.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function bu(e,t,n,i){gu.call(this,e,t,n,i)}function xu(e,t,n,i){gu.call(this,e,t,n,i)}function wu(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vu.convertArray(t,this.TimeBufferType),this.values=vu.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function _u(e,t,n){wu.call(this,e,t,n)}function Su(e,t,n,i){wu.call(this,e,t,n,i)}function Mu(e,t,n,i){wu.call(this,e,t,n,i)}function Tu(e,t,n,i){gu.call(this,e,t,n,i)}function Eu(e,t,n,i){wu.call(this,e,t,n,i)}function Cu(e,t,n,i){wu.call(this,e,t,n,i)}function Au(e,t,n,i){wu.call(this,e,t,n,i)}function Ou(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:Wt,this.uuid=jn.generateUUID(),this.duration<0&&this.resetDuration()}function Lu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mu;case"vector":case"vector2":case"vector3":case"vector4":return Au;case"color":return Su;case"quaternion":return Eu;case"bool":case"boolean":return _u;case"string":return Cu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];vu.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(gu.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(gu.prototype,{beforeStart_:gu.prototype.copySampleValue_,afterEnd_:gu.prototype.copySampleValue_}),yu.prototype=Object.assign(Object.create(gu.prototype),{constructor:yu,DefaultSettings_:{endingStart:Vt,endingEnd:Vt},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Gt:r=e,a=2*t-n;break;case Ht:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Gt:o=e,s=2*n-t;break;case Ht:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,v=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let e=0;e!==a;++e)r[e]=v*o[c+e]+g*o[l+e]+y*o[s+e]+b*o[u+e];return r}}),bu.prototype=Object.assign(Object.create(gu.prototype),{constructor:bu,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(i-t),u=1-c;for(let e=0;e!==a;++e)r[e]=o[l+e]*u+o[s+e]*c;return r}}),xu.prototype=Object.assign(Object.create(gu.prototype),{constructor:xu,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(wu,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:vu.convertArray(e.times,Array),values:vu.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(wu.prototype,{constructor:wu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:zt,InterpolantFactoryMethodDiscrete:function(e){return new xu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new bu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new yu(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case jt:t=this.InterpolantFactoryMethodDiscrete;break;case zt:t=this.InterpolantFactoryMethodLinear;break;case Ut:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jt;case this.InterpolantFactoryMethodLinear:return zt;case this.InterpolantFactoryMethodSmooth:return Ut}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=vu.arraySlice(n,r,o),this.values=vu.arraySlice(this.values,r*e,o*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,o),e=!1;break}o=i}if(void 0!==i&&vu.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e},optimize:function(){const e=vu.arraySlice(this.times),t=vu.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ut,r=e.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==s[0]))if(i)r=!0;else{const e=a*n,i=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[o+a]){r=!0;break}}}if(r){if(a!==o){e[o]=e[a];const i=a*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,a=0;a!==n;++a)t[i+a]=t[e+a];++o}return o!==e.length?(this.times=vu.arraySlice(e,0,o),this.values=vu.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=vu.arraySlice(this.times,0),t=vu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),_u.prototype=Object.assign(Object.create(wu.prototype),{constructor:_u,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:jt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Su.prototype=Object.assign(Object.create(wu.prototype),{constructor:Su,ValueTypeName:"color"}),Mu.prototype=Object.assign(Object.create(wu.prototype),{constructor:Mu,ValueTypeName:"number"}),Tu.prototype=Object.assign(Object.create(gu.prototype),{constructor:Tu,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(i-t);let l=e*a;for(let e=l+a;l!==e;l+=4)Xn.slerpFlat(r,0,o,l-a,o,l,s);return r}}),Eu.prototype=Object.assign(Object.create(wu.prototype),{constructor:Eu,ValueTypeName:"quaternion",DefaultInterpolation:zt,InterpolantFactoryMethodLinear:function(e){return new Tu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Cu.prototype=Object.assign(Object.create(wu.prototype),{constructor:Cu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:jt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Au.prototype=Object.assign(Object.create(wu.prototype),{constructor:Au,ValueTypeName:"vector"}),Object.assign(Ou,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(Lu(n[e]).scale(i));return new Ou(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(wu.toJSON(n[e]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,o=[];for(let e=0;e<r;e++){let a=[],s=[];a.push((e+r-1)%r,e,(e+1)%r),s.push(0,1,0);const l=vu.getKeyframeOrder(a);a=vu.sortedArray(a,1,l),s=vu.sortedArray(s,1,l),i||0!==a[0]||(a.push(r),s.push(s[0])),o.push(new Mu(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new Ou(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(r);if(o&&o.length>1){const e=o[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const o=[];for(const e in i)o.push(Ou.CreateFromMorphTargetSequence(e,i[e],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],a=[];vu.flattenJSON(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),o.push(i.morphTarget===n?1:0)}i.push(new Mu(".morphTargetInfluence["+n+"]",e,o))}s=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(Au,o+".position",r,"pos",i),n(Eu,o+".quaternion",r,"rot",i),n(Au,o+".scale",r,"scl",i)}}if(0===i.length)return null;return new Ou(r,s,i,a)}}),Object.assign(Ou.prototype,{resetDuration:function(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Ou(this.name,this.duration,e,this.blendMode)}});const ku={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Pu(e,t,n){const i=this;let r=!1,o=0,a=0,s=void 0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}const Du=new Pu;function Iu(e){this.manager=void 0!==e?e:Du,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Iu.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const Nu={};function Fu(e){Iu.call(this,e)}function Ru(e){Iu.call(this,e)}function Bu(e){Iu.call(this,e)}function ju(e){Iu.call(this,e)}function zu(e){Iu.call(this,e)}function Uu(e){Iu.call(this,e)}function Vu(e){Iu.call(this,e)}function Gu(){this.type="Curve",this.arcLengthDivisions=200}function Hu(e,t,n,i,r,o,a,s){Gu.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Wu(e,t,n,i,r,o){Hu.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function qu(){let e=0,t=0,n=0,i=0;function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+s)+(i-n)/s;l*=a,c*=a,r(t,n,l,c)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}Fu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Fu,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ku.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;if(void 0!==Nu[e])return void Nu[e].push({onLoad:t,onProgress:n,onError:i});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let i;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);i="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;i=t.parseFromString(s,n);break;case"json":i=JSON.parse(s);break;default:i=s}setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Nu[e]=[],Nu[e].push({onLoad:t,onProgress:n,onError:i}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,i=Nu[e];if(delete Nu[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),ku.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=Nu[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=Nu[e];delete Nu[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=Nu[e];delete Nu[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return r.manager.itemStart(e),s},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Ru.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Ru,load:function(e,t,n,i){const r=this,o=new Fu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=Ou.parse(e[n]);t.push(i)}return t}}),Bu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Bu,load:function(e,t,n,i){const r=this,o=[],a=new zl;a.image=o;const s=new Fu(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader);let l=0;function c(c){s.load(e[c],(function(e){const n=r.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=be),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,i)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=be),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,i);return a}}),ju.prototype=Object.assign(Object.create(Iu.prototype),{constructor:ju,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ku.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),ku.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}),zu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:zu,load:function(e,t,n,i){const r=new Ko,o=new ju(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)s(t);return r}}),Uu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Uu,load:function(e,t,n,i){const r=this,o=new Eo,a=new Fu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.load(e,(function(e){const n=r.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:de,o.wrapT=void 0!==n.wrapT?n.wrapT:de,o.magFilter=void 0!==n.magFilter?n.magFilter:be,o.minFilter=void 0!==n.minFilter?n.minFilter:be,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=_e),1===n.mipmapCount&&(o.minFilter=be),o.needsUpdate=!0,t&&t(o,n))}),n,i),o}}),Vu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Vu,load:function(e,t,n,i){const r=new Wn,o=new ju(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){r.image=n;const i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Re:Be,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(Gu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let a,s=0,l=r-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=n[i]-o,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)},getTangent:function(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);const r=this.getPoint(n),o=this.getPoint(i),a=t||(r.isVector2?new zn:new Qn);return a.copy(o).sub(r).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Qn,i=[],r=[],o=[],a=new Qn,s=new Mi;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new Qn),i[t].normalize()}r[0]=new Qn,o[0]=new Qn;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(i[t-1],i[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(jn.clamp(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(jn.clamp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Hu.prototype=Object.create(Gu.prototype),Hu.prototype.constructor=Hu,Hu.prototype.isEllipseCurve=!0,Hu.prototype.getPoint=function(e,t){const n=t||new zn,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+e*r;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=l-this.aY;s=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(s,l)},Hu.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Hu.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Hu.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Wu.prototype=Object.create(Hu.prototype),Wu.prototype.constructor=Wu,Wu.prototype.isArcCurve=!0;const Yu=new Qn,$u=new qu,Xu=new qu,Qu=new qu;function Ku(e,t,n,i){Gu.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function Ju(e,t,n,i,r){const o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function Zu(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function eh(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function th(e,t,n,i){Gu.call(this),this.type="CubicBezierCurve",this.v0=e||new zn,this.v1=t||new zn,this.v2=n||new zn,this.v3=i||new zn}function nh(e,t,n,i){Gu.call(this),this.type="CubicBezierCurve3",this.v0=e||new Qn,this.v1=t||new Qn,this.v2=n||new Qn,this.v3=i||new Qn}function ih(e,t){Gu.call(this),this.type="LineCurve",this.v1=e||new zn,this.v2=t||new zn}function rh(e,t){Gu.call(this),this.type="LineCurve3",this.v1=e||new Qn,this.v2=t||new Qn}function oh(e,t,n){Gu.call(this),this.type="QuadraticBezierCurve",this.v0=e||new zn,this.v1=t||new zn,this.v2=n||new zn}function ah(e,t,n){Gu.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Qn,this.v1=t||new Qn,this.v2=n||new Qn}function sh(e){Gu.call(this),this.type="SplineCurve",this.points=e||[]}Ku.prototype=Object.create(Gu.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isCatmullRomCurve3=!0,Ku.prototype.getPoint=function(e,t){const n=t||new Qn,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e;let a,s,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Yu.subVectors(i[0],i[1]).add(i[0]),a=Yu);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?s=i[(l+2)%r]:(Yu.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=Yu),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),$u.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,t,n,i),Xu.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,t,n,i),Qu.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&($u.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),Xu.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),Qu.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set($u.calc(c),Xu.calc(c),Qu.calc(c)),n},Ku.prototype.copy=function(e){Gu.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ku.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Ku.prototype.fromJSON=function(e){Gu.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Qn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},th.prototype=Object.create(Gu.prototype),th.prototype.constructor=th,th.prototype.isCubicBezierCurve=!0,th.prototype.getPoint=function(e,t){const n=t||new zn,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(eh(e,i.x,r.x,o.x,a.x),eh(e,i.y,r.y,o.y,a.y)),n},th.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},th.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},th.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},nh.prototype=Object.create(Gu.prototype),nh.prototype.constructor=nh,nh.prototype.isCubicBezierCurve3=!0,nh.prototype.getPoint=function(e,t){const n=t||new Qn,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(eh(e,i.x,r.x,o.x,a.x),eh(e,i.y,r.y,o.y,a.y),eh(e,i.z,r.z,o.z,a.z)),n},nh.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},nh.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},nh.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ih.prototype=Object.create(Gu.prototype),ih.prototype.constructor=ih,ih.prototype.isLineCurve=!0,ih.prototype.getPoint=function(e,t){const n=t||new zn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ih.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ih.prototype.getTangent=function(e,t){const n=t||new zn;return n.copy(this.v2).sub(this.v1).normalize(),n},ih.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ih.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ih.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},rh.prototype=Object.create(Gu.prototype),rh.prototype.constructor=rh,rh.prototype.isLineCurve3=!0,rh.prototype.getPoint=function(e,t){const n=t||new Qn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},rh.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},rh.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},rh.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},rh.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},oh.prototype=Object.create(Gu.prototype),oh.prototype.constructor=oh,oh.prototype.isQuadraticBezierCurve=!0,oh.prototype.getPoint=function(e,t){const n=t||new zn,i=this.v0,r=this.v1,o=this.v2;return n.set(Zu(e,i.x,r.x,o.x),Zu(e,i.y,r.y,o.y)),n},oh.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},oh.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},oh.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ah.prototype=Object.create(Gu.prototype),ah.prototype.constructor=ah,ah.prototype.isQuadraticBezierCurve3=!0,ah.prototype.getPoint=function(e,t){const n=t||new Qn,i=this.v0,r=this.v1,o=this.v2;return n.set(Zu(e,i.x,r.x,o.x),Zu(e,i.y,r.y,o.y),Zu(e,i.z,r.z,o.z)),n},ah.prototype.copy=function(e){return Gu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ah.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ah.prototype.fromJSON=function(e){return Gu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},sh.prototype=Object.create(Gu.prototype),sh.prototype.constructor=sh,sh.prototype.isSplineCurve=!0,sh.prototype.getPoint=function(e,t){const n=t||new zn,i=this.points,r=(i.length-1)*e,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Ju(a,s.x,l.x,c.x,u.x),Ju(a,s.y,l.y,c.y,u.y)),n},sh.prototype.copy=function(e){Gu.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this},sh.prototype.toJSON=function(){const e=Gu.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e},sh.prototype.fromJSON=function(e){Gu.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new zn).fromArray(n))}return this};var lh=Object.freeze({__proto__:null,ArcCurve:Wu,CatmullRomCurve3:Ku,CubicBezierCurve:th,CubicBezierCurve3:nh,EllipseCurve:Hu,LineCurve:ih,LineCurve3:rh,QuadraticBezierCurve:oh,QuadraticBezierCurve3:ah,SplineCurve:sh});function ch(){Gu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function uh(e){ch.call(this),this.type="Path",this.currentPoint=new zn,e&&this.setFromPoints(e)}function hh(e){uh.call(this,e),this.uuid=jn.generateUUID(),this.type="Shape",this.holes=[]}function dh(e,t){Xi.call(this),this.type="Light",this.color=new gr(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function fh(e,t,n){dh.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Xi.DefaultUp),this.updateMatrix(),this.groundColor=new gr(t)}function ph(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new zn(512,512),this.map=null,this.mapPass=null,this.matrix=new Mi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Oo,this._frameExtents=new zn(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}function mh(){ph.call(this,new So(50,1,.5,500))}function vh(e,t,n,i,r,o){dh.call(this,e,t),this.type="SpotLight",this.position.copy(Xi.DefaultUp),this.updateMatrix(),this.target=new Xi,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new mh}function gh(){ph.call(this,new So(90,1,.5,500)),this._frameExtents=new zn(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new Qn(1,0,0),new Qn(-1,0,0),new Qn(0,0,1),new Qn(0,0,-1),new Qn(0,1,0),new Qn(0,-1,0)],this._cubeUps=[new Qn(0,1,0),new Qn(0,1,0),new Qn(0,1,0),new Qn(0,1,0),new Qn(0,0,1),new Qn(0,0,-1)]}function yh(e,t,n,i){dh.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new gh}function bh(e,t,n,i,r,o){_o.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function xh(){ph.call(this,new bh(-5,5,5,-5,.5,500))}function wh(e,t){dh.call(this,e,t),this.type="DirectionalLight",this.position.copy(Xi.DefaultUp),this.updateMatrix(),this.target=new Xi,this.shadow=new xh}function _h(e,t){dh.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Sh(e,t,n,i){dh.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}ch.prototype=Object.assign(Object.create(Gu.prototype),{constructor:ch,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ih(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],o=r.getLength(),a=0===o?0:1-e/o;return r.getPointAt(a)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Gu.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Gu.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Gu.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new lh[n.type]).fromJSON(n))}return this}}),uh.prototype=Object.assign(Object.create(ch.prototype),{constructor:uh,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new ih(this.currentPoint.clone(),new zn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new oh(this.currentPoint.clone(),new zn(e,t),new zn(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,o){const a=new th(this.currentPoint.clone(),new zn(e,t),new zn(n,i),new zn(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this},splineThru:function(e){const t=new sh([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,i,r,o),this},absarc:function(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this},ellipse:function(e,t,n,i,r,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,o,a,s),this},absellipse:function(e,t,n,i,r,o,a,s){const l=new Hu(e,t,n,i,r,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return ch.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=ch.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ch.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),hh.prototype=Object.assign(Object.create(uh.prototype),{constructor:hh,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){uh.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){const e=uh.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){uh.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new uh).fromJSON(n))}return this}}),dh.prototype=Object.assign(Object.create(Xi.prototype),{constructor:dh,isLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=Xi.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),fh.prototype=Object.assign(Object.create(dh.prototype),{constructor:fh,isHemisphereLight:!0,copy:function(e){return dh.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ph.prototype,{_projScreenMatrix:new Mi,_lightPositionWorld:new Qn,_lookTarget:new Qn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),mh.prototype=Object.assign(Object.create(ph.prototype),{constructor:mh,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*jn.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),ph.prototype.updateMatrices.call(this,e)}}),vh.prototype=Object.assign(Object.create(dh.prototype),{constructor:vh,isSpotLight:!0,copy:function(e){return dh.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),gh.prototype=Object.assign(Object.create(ph.prototype),{constructor:gh,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),yh.prototype=Object.assign(Object.create(dh.prototype),{constructor:yh,isPointLight:!0,copy:function(e){return dh.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),bh.prototype=Object.assign(Object.create(_o.prototype),{constructor:bh,isOrthographicCamera:!0,copy:function(e,t){return _o.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=Xi.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),xh.prototype=Object.assign(Object.create(ph.prototype),{constructor:xh,isDirectionalLightShadow:!0,updateMatrices:function(e){ph.prototype.updateMatrices.call(this,e)}}),wh.prototype=Object.assign(Object.create(dh.prototype),{constructor:wh,isDirectionalLight:!0,copy:function(e){return dh.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),_h.prototype=Object.assign(Object.create(dh.prototype),{constructor:_h,isAmbientLight:!0}),Sh.prototype=Object.assign(Object.create(dh.prototype),{constructor:Sh,isRectAreaLight:!0,copy:function(e){return dh.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=dh.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class Mh{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Qn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t){void 0===t&&(t=0);const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}function Th(e,t){dh.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Mh}function Eh(e){Iu.call(this,e),this.textures={}}Th.prototype=Object.assign(Object.create(dh.prototype),{constructor:Th,isLightProbe:!0,copy:function(e){return dh.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=dh.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),Eh.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Eh,load:function(e,t,n,i){const r=this,o=new Fu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=new mu[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new gr).setHex(e.sheen)),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(i.uniforms[t]={},r.type){case"t":i.uniforms[t].value=n(r.value);break;case"c":i.uniforms[t].value=(new gr).setHex(r.value);break;case"v2":i.uniforms[t].value=(new zn).fromArray(r.value);break;case"v3":i.uniforms[t].value=(new Qn).fromArray(r.value);break;case"v4":i.uniforms[t].value=(new qn).fromArray(r.value);break;case"m3":i.uniforms[t].value=(new Un).fromArray(r.value);break;case"m4":i.uniforms[t].value=(new Mi).fromArray(r.value);break;default:i.uniforms[t].value=r.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)i.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new zn).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new zn).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const Ch={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ah(){Gr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Oh(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Mr.call(this,e,t,n),this.meshPerAttribute=i||1}function Lh(e){Iu.call(this,e)}Ah.prototype=Object.assign(Object.create(Gr.prototype),{constructor:Ah,isInstancedBufferGeometry:!0,copy:function(e){return Gr.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=Gr.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Oh.prototype=Object.assign(Object.create(Mr.prototype),{constructor:Oh,isInstancedBufferAttribute:!0,copy:function(e){return Mr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=Mr.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Lh.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Lh,load:function(e,t,n,i){const r=this,o=new Fu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],o=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),a=new Gs(new kh[r.type](o),r.stride);return a.uuid=r.uuid,t[i]=a,a}const r=e.isInstancedBufferGeometry?new Ah:new Gr,o=e.data.index;if(void 0!==o){const e=new kh[o.type](o.array);r.setIndex(new Mr(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let o;if(n.isInterleavedBufferAttribute){o=new Ws(i(e.data,n.data),n.itemSize,n.offset,n.normalized)}else{const e=new kh[n.type](n.array);o=new(n.isInstancedBufferAttribute?Oh:Mr)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),r.setAttribute(t,o)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];let a;if(r.isInterleavedBufferAttribute){a=new Ws(i(e.data,r.data),r.itemSize,r.offset,r.normalized)}else{a=new Mr(new kh[r.type](r.array),r.itemSize,r.normalized)}void 0!==r.name&&(a.name=r.name),o.push(a)}r.morphAttributes[t]=o}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];r.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Qn;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new mi(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});const kh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ph(e){Iu.call(this,e)}Ph.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Ph,load:function(e,t,n,i){const r=this,o=""===this.path?Ch.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Fu(r.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)},parse:function(e,t){const n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new hh).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){const n={};let i;if(void 0!==e){const r=new Lh;for(let o=0,a=e.length;o<a;o++){let a;const s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new ru[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new ru[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new ru[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new ru[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new ru[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new ru[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new ru[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new ru[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new ru[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new ru[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new ru[s.type]((new lh[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new ru[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new ru[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];i.push(n)}a=new ru[s.type](i,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];i.push(n)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new lh[e.type]).fromJSON(e)),a=new ru[s.type](i,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n},parseMaterials:function(e,t){const n={},i={};if(void 0!==e){const r=new Eh;r.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const i=o.materials[t];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),e.push(n[i.uuid])}i[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i},parseAnimations:function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n],r=Ou.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){const n=this,i={};let r;function o(e){return n.manager.itemStart(e),r.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){const a=new Pu(t);r=new ju(a),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){i[r.uuid]=[];for(let e=0,t=a.length;e<t;e++){const t=a[e],s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t;i[r.uuid].push(o(s))}}else{const e=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r.url)?r.url:n.resourcePath+r.url;i[r.uuid]=o(e)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,o=e.length;r<o;r++){const o=e[r];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image),a=Array.isArray(t[o.image])?new Ko(t[o.image]):new Wn(t[o.image]),a.needsUpdate=!0,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Dh)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],Ih),a.wrapT=n(o.wrap[1],Ih)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,Nh)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,Nh)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),i[o.uuid]=a}return i},parseObject:function(e,t,n){let i,r,o;function a(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Vs,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new gr(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Us(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new zs(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new So(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new bh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new _h(e.color,e.intensity);break;case"DirectionalLight":i=new wh(e.color,e.intensity);break;case"PointLight":i=new yh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Sh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new vh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new fh(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new Th).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=a(e.geometry),o=s(e.material),i=new so(r,o);break;case"InstancedMesh":r=a(e.geometry),o=s(e.material);const t=e.count,n=e.instanceMatrix;i=new xl(r,o,t),i.instanceMatrix=new Mr(new Float32Array(n.array),16);break;case"LOD":i=new ul;break;case"Line":i=new Cl(a(e.geometry),s(e.material),e.mode);break;case"LineLoop":i=new kl(a(e.geometry),s(e.material));break;case"LineSegments":i=new Ll(a(e.geometry),s(e.material));break;case"PointCloud":case"Points":i=new Rl(a(e.geometry),s(e.material));break;case"Sprite":i=new al(s(e.material));break;case"Group":i=new Is;break;default:i=new Xi}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const r=e.children;for(let e=0;e<r.length;e++)i.add(this.parseObject(r[e],t,n))}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}});const Dh={UVMapping:re,CubeReflectionMapping:oe,CubeRefractionMapping:ae,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:ue},Ih={RepeatWrapping:he,ClampToEdgeWrapping:de,MirroredRepeatWrapping:fe},Nh={NearestFilter:pe,NearestMipmapNearestFilter:me,NearestMipmapLinearFilter:ge,LinearFilter:be,LinearMipmapNearestFilter:xe,LinearMipmapLinearFilter:_e};function Fh(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Iu.call(this,e),this.options={premultiplyAlpha:"none"}}function Rh(){this.type="ShapePath",this.color=new gr,this.subPaths=[],this.currentPath=null}function Bh(e){this.type="Font",this.data=e}function jh(e,t,n,i,r){const o=r.glyphs[e]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const a=new Rh;let s,l,c,u,h,d,f,p;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=e.length;r<o;){switch(e[r++]){case"m":s=e[r++]*t+n,l=e[r++]*t+i,a.moveTo(s,l);break;case"l":s=e[r++]*t+n,l=e[r++]*t+i,a.lineTo(s,l);break;case"q":c=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,a.quadraticCurveTo(h,d,c,u);break;case"b":c=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,f=e[r++]*t+n,p=e[r++]*t+i,a.bezierCurveTo(h,d,f,p,c,u)}}}return{offsetX:o.ha*t,path:a}}function zh(e){Iu.call(this,e)}let Uh;Fh.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Fh,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ku.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){ku.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(Rh.prototype,{moveTo:function(e,t){return this.currentPath=new uh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new hh;r.curves=i.curves,t.push(r)}return t}function i(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[r],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const r=Dc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,l;const c=[];if(1===o.length)return s=o[0],l=new hh,l.curves=s.curves,c.push(l),c;let u=!r(o[0].getPoints());u=e?!u:u;const h=[],d=[];let f,p,m=[],v=0;d[v]=void 0,m[v]=[];for(let t=0,n=o.length;t<n;t++)s=o[t],f=s.getPoints(),a=r(f),a=e?!a:a,a?(!u&&d[v]&&v++,d[v]={s:new hh,p:f},d[v].s.curves=s.curves,u&&v++,m[v]=[]):m[v].push({h:s,p:f[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,r=d.length;n<r;n++){const r=m[n];for(let o=0;o<r.length;o++){const a=r[o];let s=!0;for(let r=0;r<d.length;r++)i(a.p,d[r].p)&&(n!==r&&t.push({froms:n,tos:r,hole:o}),s?(s=!1,h[r].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){l=d[e].s,c.push(l),p=m[e];for(let e=0,t=p.length;e<t;e++)l.holes.push(p[e].h)}return c}}),Object.assign(Bh.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);const n=[],i=function(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[];let s=0,l=0;for(let e=0;e<i.length;e++){const t=i[e];if("\n"===t)s=0,l-=o;else{const e=jh(t,r,s,l,n);s+=e.offsetX,a.push(e.path)}}return a}(e,t,this.data);for(let e=0,t=i.length;e<t;e++)Array.prototype.push.apply(n,i[e].toShapes());return n}}),zh.prototype=Object.assign(Object.create(Iu.prototype),{constructor:zh,load:function(e,t,n,i){const r=this,o=new Fu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new Bh(e)}});const Vh={getContext:function(){return void 0===Uh&&(Uh=new(window.AudioContext||window.webkitAudioContext)),Uh},setContext:function(e){Uh=e}};function Gh(e){Iu.call(this,e)}function Hh(e,t,n){Th.call(this,void 0,n);const i=(new gr).set(e),r=(new gr).set(t),o=new Qn(i.r,i.g,i.b),a=new Qn(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function Wh(e,t){Th.call(this,void 0,t);const n=(new gr).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Gh.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Gh,load:function(e,t,n,i){const r=this,o=new Fu(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{const e=n.slice(0);Vh.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}),Hh.prototype=Object.assign(Object.create(Th.prototype),{constructor:Hh,isHemisphereLightProbe:!0,copy:function(e){return Th.prototype.copy.call(this,e),this},toJSON:function(e){return Th.prototype.toJSON.call(this,e)}}),Wh.prototype=Object.assign(Object.create(Th.prototype),{constructor:Wh,isAmbientLightProbe:!0,copy:function(e){return Th.prototype.copy.call(this,e),this},toJSON:function(e){return Th.prototype.toJSON.call(this,e)}});const qh=new Mi,Yh=new Mi;function $h(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new So,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new So,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign($h.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),i=t.eyeSep/2,r=i*t.near/t.focus,o=t.near*Math.tan(jn.DEG2RAD*t.fov*.5)/t.zoom;let a,s;Yh.elements[12]=-i,qh.elements[12]=i,a=-o*t.aspect+r,s=o*t.aspect+r,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*t.aspect-r,s=o*t.aspect-r,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Yh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qh)}});class Xh{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Qh=new Qn,Kh=new Xn,Jh=new Qn,Zh=new Qn;class ed extends Xi{constructor(){super(),this.type="AudioListener",this.context=Vh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Xh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qh,Kh,Jh),Zh.set(0,0,-1).applyQuaternion(Kh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qh.x,e),t.positionY.linearRampToValueAtTime(Qh.y,e),t.positionZ.linearRampToValueAtTime(Qh.z,e),t.forwardX.linearRampToValueAtTime(Zh.x,e),t.forwardY.linearRampToValueAtTime(Zh.y,e),t.forwardZ.linearRampToValueAtTime(Zh.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Qh.x,Qh.y,Qh.z),t.setOrientation(Zh.x,Zh.y,Zh.z,n.x,n.y,n.z)}}class td extends Xi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e){if(void 0===e&&(e=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const nd=new Qn,id=new Xn,rd=new Qn,od=new Qn;class ad extends td{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(nd,id,rd),od.set(0,0,1).applyQuaternion(id);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(nd.x,e),t.positionY.linearRampToValueAtTime(nd.y,e),t.positionZ.linearRampToValueAtTime(nd.z,e),t.orientationX.linearRampToValueAtTime(od.x,e),t.orientationY.linearRampToValueAtTime(od.y,e),t.orientationZ.linearRampToValueAtTime(od.z,e)}else t.setPosition(nd.x,nd.y,nd.z),t.setOrientation(od.x,od.y,od.z)}}class sd{constructor(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}function ld(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(ld.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){a.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]},_slerp:function(e,t,n,i){Xn.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const o=this._workIndex*r;Xn.multiplyQuaternionsFlat(e,o,e,t,e,n),Xn.slerpFlat(e,t,e,t,e,o,i)},_lerp:function(e,t,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*o+e[n+a]*i}},_lerpAdditive:function(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}});const cd=new RegExp("[\\[\\]\\.:\\/]","g"),ud="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",hd=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),dd=/(WCOD+)?/.source.replace("WCOD",ud),fd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),pd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),md=new RegExp("^"+hd+dd+fd+pd+"$"),vd=["material","materials","bones"];function gd(e,t,n){const i=n||yd.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function yd(e,t,n){this.path=t,this.parsedPath=n||yd.parseTrackName(t),this.node=yd.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function bd(){this.uuid=jn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(gd.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(yd,{Composite:gd,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new yd.Composite(e,t,n):new yd(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(cd,"")},parseTrackName:function(e){const t=md.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==vd.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(yd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=yd.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(yd.prototype,{_getValue_unbound:yd.prototype.getValue,_setValue_unbound:yd.prototype.setValue}),Object.assign(bd.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a=void 0,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)r[e].push(new yd(u,n[e],i[e]))}else if(d<l){a=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new yd(u,n[e],i[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=r){const o=r++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[l]=i,t[o]=r}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<r){const a=--r,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[l]=i,t[a]=r,t.pop()}}else{const r=--o,a=e[r];t[a.uuid]=l,e[l]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(u);for(let n=c,i=s.length;n!==i;++n){const i=s[n];u[n]=new yd(i,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}});class xd{constructor(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;const r=t.tracks,o=r.length,a=new Array(o),s={endingStart:Vt,endingEnd:Vt};for(let e=0;e!==o;++e){const t=r[e].createInterpolant(null);a[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Rt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case qt:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);break;case Wt:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=n===Bt;if(0===e)return-1===r?i:o&&1==(1&r)?t-i:i;if(n===Ft){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Gt,i.endingEnd=Gt):(i.endingStart=e?this.zeroSlopeAtStart?Gt:Vt:Ht,i.endingEnd=t?this.zeroSlopeAtEnd?Gt:Vt:Ht)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}function wd(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}wd.prototype=Object.assign(Object.create(Fn.prototype),{constructor:wd,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==r;++e){const r=i[e],l=r.name;let u=c[l];if(void 0!==u)o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new ld(yd.create(n,l,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),o[e]=u}a[e].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new bu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let o="string"==typeof e?Ou.findByName(i,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Wt),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new xd(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?Ou.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a){t[a]._update(i,e,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this},setTime:function(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class _d{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new _d(void 0===this.value.clone?this.value:this.value.clone())}}function Sd(e,t,n){Gs.call(this,e,t),this.meshPerAttribute=n||1}function Md(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function Td(e,t,n,i){this.ray=new Si(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Ni,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ed(e,t){return e.distance-t.distance}function Cd(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Cd(i[e],t,n,!0)}}Sd.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Sd,isInstancedInterleavedBuffer:!0,copy:function(e){return Gs.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Gs.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Gs.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(Md.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Md.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(Td.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return Cd(e,this,i,t),i.sort(Ed),i},intersectObjects:function(e,t,n){const i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let n=0,r=e.length;n<r;n++)Cd(e[n],this,i,t);return i.sort(Ed),i}});class Ad{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(jn.clamp(t/this.radius,-1,1))),this}}class Od{constructor(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}const Ld=new zn;class kd{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new zn(1/0,1/0),this.max=void 0!==t?t:new zn(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ld.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new zn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new zn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new zn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new zn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ld.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Pd=new Qn,Dd=new Qn;class Id{constructor(e,t){this.start=void 0!==e?e:new Qn,this.end=void 0!==t?t:new Qn}set(e,t){return this.start.copy(e),this.end.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Qn),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Qn),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Qn),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Pd.subVectors(e,this.start),Dd.subVectors(this.end,this.start);const n=Dd.dot(Dd);let i=Dd.dot(Pd)/n;return t&&(i=jn.clamp(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Qn),this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}function Nd(e){Xi.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Nd.prototype=Object.create(Xi.prototype),Nd.prototype.constructor=Nd,Nd.prototype.isImmediateRenderObject=!0;const Fd=new Qn;class Rd extends Xi{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Gr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const r=e/n*Math.PI*2,o=t/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Pr(i,3));const r=new wl({fog:!1,toneMapped:!1});this.cone=new Ll(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Fd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Fd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bd=new Qn,jd=new Mi,zd=new Mi;class Ud extends Ll{constructor(e){const t=function e(t){const n=[];t&&t.isBone&&n.push(t);for(let i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Gr,i=[],r=[],o=new gr(0,0,1),a=new gr(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Pr(i,3)),n.setAttribute("color",new Pr(r,3));super(n,new wl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");zd.getInverse(this.root.matrixWorld);for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(jd.multiplyMatrices(zd,r.matrixWorld),Bd.setFromMatrixPosition(jd),i.setXYZ(n,Bd.x,Bd.y,Bd.z),jd.multiplyMatrices(zd,r.parent.matrixWorld),Bd.setFromMatrixPosition(jd),i.setXYZ(n+1,Bd.x,Bd.y,Bd.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}class Vd extends so{constructor(e,t,n){super(new Gc(t,4,2),new wr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Gd=new Qn,Hd=new gr,Wd=new gr;class qd extends Xi{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new Kl(t);i.rotateY(.5*Math.PI),this.material=new wr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Mr(o,3)),this.add(new so(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Hd.copy(this.light.color),Wd.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?Hd:Wd;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Gd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Yd extends Ll{constructor(e,t,n,i){e=e||10,t=t||10,n=new gr(void 0!==n?n:4473924),i=new gr(void 0!==i?i:8947848);const r=t/2,o=e/t,a=e/2,s=[],l=[];for(let e=0,c=0,u=-a;e<=t;e++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const t=e===r?n:i;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Gr;c.setAttribute("position",new Pr(s,3)),c.setAttribute("color",new Pr(l,3));super(c,new wl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class $d extends Ll{constructor(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new gr(void 0!==r?r:4473924),o=new gr(void 0!==o?o:8947848);const a=[],s=[];for(let n=0;n<=t;n++){const i=n/t*(2*Math.PI),l=Math.sin(i)*e,c=Math.cos(i)*e;a.push(0,0,0),a.push(l,0,c);const u=1&n?r:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const l=1&t?r:o,c=e-e/n*t;for(let e=0;e<i;e++){let t=e/i*(2*Math.PI),n=Math.sin(t)*c,r=Math.cos(t)*c;a.push(n,0,r),s.push(l.r,l.g,l.b),t=(e+1)/i*(2*Math.PI),n=Math.sin(t)*c,r=Math.cos(t)*c,a.push(n,0,r),s.push(l.r,l.g,l.b)}}const l=new Gr;l.setAttribute("position",new Pr(a,3)),l.setAttribute("color",new Pr(s,3));super(l,new wl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Xd=new Qn,Qd=new Qn,Kd=new Qn;class Jd extends Xi{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let i=new Gr;i.setAttribute("position",new Pr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new wl({fog:!1,toneMapped:!1});this.lightPlane=new Cl(i,r),this.add(this.lightPlane),i=new Gr,i.setAttribute("position",new Pr([0,0,0,0,0,1],3)),this.targetLine=new Cl(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Xd.setFromMatrixPosition(this.light.matrixWorld),Qd.setFromMatrixPosition(this.light.target.matrixWorld),Kd.subVectors(Qd,Xd),this.lightPlane.lookAt(Qd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Qd),this.targetLine.scale.z=Kd.length()}}const Zd=new Qn,ef=new _o;class tf extends Ll{constructor(e){const t=new Gr,n=new wl({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={},a=new gr(16755200),s=new gr(16711680),l=new gr(43775),c=new gr(16777215),u=new gr(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new Pr(i,3)),t.setAttribute("color",new Pr(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;ef.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),nf("c",t,e,ef,0,0,-1),nf("t",t,e,ef,0,0,1),nf("n1",t,e,ef,-1,-1,-1),nf("n2",t,e,ef,1,-1,-1),nf("n3",t,e,ef,-1,1,-1),nf("n4",t,e,ef,1,1,-1),nf("f1",t,e,ef,-1,-1,1),nf("f2",t,e,ef,1,-1,1),nf("f3",t,e,ef,-1,1,1),nf("f4",t,e,ef,1,1,1),nf("u1",t,e,ef,.7,1.1,-1),nf("u2",t,e,ef,-.7,1.1,-1),nf("u3",t,e,ef,0,2,-1),nf("cf1",t,e,ef,-1,0,1),nf("cf2",t,e,ef,1,0,1),nf("cf3",t,e,ef,0,-1,1),nf("cf4",t,e,ef,0,1,1),nf("cn1",t,e,ef,-1,0,-1),nf("cn2",t,e,ef,1,0,-1),nf("cn3",t,e,ef,0,-1,-1),nf("cn4",t,e,ef,0,1,-1),e.getAttribute("position").needsUpdate=!0}}function nf(e,t,n,i,r,o,a){Zd.set(r,o,a).unproject(i);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Zd.x,Zd.y,Zd.z)}}const rf=new Zn;class of extends Ll{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Gr;r.setIndex(new Mr(n,1)),r.setAttribute("position",new Mr(i,3)),super(r,new wl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&rf.setFromObject(this.object),rf.isEmpty())return;const t=rf.min,n=rf.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Ll.prototype.copy.call(this,e),this.object=e.object,this}}class af extends Ll{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Gr;i.setIndex(new Mr(n,1)),i.setAttribute("position",new Pr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new wl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class sf extends Cl{constructor(e,t,n){const i=void 0!==n?n:16776960,r=new Gr;r.setAttribute("position",new Pr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new wl({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;const o=new Gr;o.setAttribute("position",new Pr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new so(o,new wr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?m:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const lf=new Qn;let cf,uf;class hf extends Xi{constructor(e,t,n,i,r,o){super(),this.type="ArrowHelper",void 0===e&&(e=new Qn(0,0,1)),void 0===t&&(t=new Qn(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===cf&&(cf=new Gr,cf.setAttribute("position",new Pr([0,0,0,0,1,0],3)),uf=new Zc(0,.5,1,5,1),uf.translate(0,-.5,0)),this.position.copy(t),this.line=new Cl(cf,new wl({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new so(uf,new wr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lf.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lf,t)}}setLength(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class df extends Ll{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Gr;n.setAttribute("position",new Pr(t,3)),n.setAttribute("color",new Pr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new wl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const ff=Math.pow(2,8),pf=[.125,.215,.35,.446,.526,.582],mf=5+pf.length,vf={[Qt]:0,[Kt]:1,[Zt]:2,[tn]:3,[nn]:4,[rn]:5,[Jt]:6},gf=new bh,{_lodPlanes:yf,_sizeLods:bf,_sigmas:xf}=function(){const e=[],t=[],n=[];let i=8;for(let r=0;r<mf;r++){const o=Math.pow(2,i);t.push(o);let a=1/o;r>4?a=pf[r-8+4-1]:0==r&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,f=3,p=2,m=1,v=new Float32Array(f*d*h),g=new Float32Array(p*d*h),y=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*d*e),g.set(u,p*d*e);const r=[e,e,e,e,e,e];y.set(r,m*d*e)}const b=new Gr;b.setAttribute("position",new Mr(v,f)),b.setAttribute("uv",new Mr(g,p)),b.setAttribute("faceIndex",new Mr(y,m)),e.push(b),i>4&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}();let wf=null;const _f=(1+Math.sqrt(5))/2,Sf=1/_f,Mf=[new Qn(1,1,1),new Qn(-1,1,1),new Qn(1,1,-1),new Qn(-1,1,-1),new Qn(0,_f,Sf),new Qn(0,_f,-Sf),new Qn(Sf,0,_f),new Qn(-Sf,0,_f),new Qn(_f,Sf,0),new Qn(-_f,Sf,0)];class Tf{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new Qn(0,1,0);return new au({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:vf[Qt]},outputEncoding:{value:vf[Qt]}},vertexShader:kf(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Pf()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){wf=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Lf(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Of(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<yf.length;e++)yf[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(wf),e.scissorTest=!1,Af(e,0,0,e.width,e.height)}_fromTexture(e){wf=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:pe,minFilter:pe,generateMipmaps:!1,type:Me,format:Ue,encoding:Ef(e)?e.encoding:Zt,depthBuffer:!1},n=Cf(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Cf(t),n}_compileMaterial(e){const t=new so(yf[0],e);this._renderer.compile(t,gf)}_sceneToCubeUV(e,t,n,i){const r=new So(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.outputEncoding,c=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=J,s.outputEncoding=Qt;let d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();const t=Math.max(d.r,d.g,d.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);d=d.multiplyScalar(Math.pow(2,-n));const i=(n+128)/255;s.setClearColor(d,i),e.background=null}for(let t=0;t<6;t++){const n=t%3;0==n?(r.up.set(0,o[t],0),r.lookAt(a[t],0,0)):1==n?(r.up.set(0,0,o[t]),r.lookAt(0,a[t],0)):(r.up.set(0,o[t],0),r.lookAt(0,0,a[t])),Af(i,n*ff,t>2?ff:0,ff,ff),s.setRenderTarget(i),s.render(e,r)}s.toneMapping=c,s.outputEncoding=l,s.setClearColor(u,h)}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Lf()):null==this._equirectShader&&(this._equirectShader=Of());const i=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new so(yf[0],i),o=i.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=vf[e.encoding],o.outputEncoding.value=vf[t.texture.encoding],Af(t,0,0,3*ff,2*ff),n.setRenderTarget(t),n.render(r,gf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<mf;t++){const n=Math.sqrt(xf[t]*xf[t]-xf[t-1]*xf[t-1]),i=Mf[(t-1)%Mf.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new so(yf[i],l),u=l.uniforms,h=bf[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let v=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0==e?v+=n:e<p&&(v+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/v;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=vf[e.texture.encoding],u.outputEncoding.value=vf[e.texture.encoding];const g=bf[i];Af(t,3*Math.max(0,ff-2*g),(0===i?0:2*ff)+2*g*(i>4?i-8+4:0),3*g,2*g),s.setRenderTarget(t),s.render(c,gf)}}function Ef(e){return void 0!==e&&e.type===Me&&(e.encoding===Qt||e.encoding===Kt||e.encoding===Jt)}function Cf(e){const t=new Yn(3*ff,3*ff,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Af(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Of(){return new au({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new zn(1,1)},inputEncoding:{value:vf[Qt]},outputEncoding:{value:vf[Qt]}},vertexShader:kf(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Pf()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function Lf(){return new au({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:vf[Qt]},outputEncoding:{value:vf[Qt]}},vertexShader:kf(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Pf()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function kf(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Pf(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Df(e,t,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new yr(e,t,n,r,o,a)}const If=0,Nf=1,Ff=0,Rf=1,Bf=2;function jf(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function zf(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Uf(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Rl(e,t)}function Vf(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new al(e)}function Gf(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Rl(e,t)}function Hf(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Pl(e)}function Wf(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Pl(e)}function qf(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Pl(e)}function Yf(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Qn(e,t,n)}function $f(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Mr(e,t).setUsage(En)}function Xf(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Tr(e,t)}function Qf(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Er(e,t)}function Kf(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Cr(e,t)}function Jf(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ar(e,t)}function Zf(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Or(e,t)}function ep(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Lr(e,t)}function tp(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new kr(e,t)}function np(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Pr(e,t)}function ip(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Dr(e,t)}function rp(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ku.call(this,e),this.type="catmullrom",this.closed=!0}function op(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ku.call(this,e),this.type="catmullrom"}function ap(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ku.call(this,e),this.type="catmullrom"}function sp(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new df(e)}function lp(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new of(e,t)}function cp(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ll(new Kc(e.geometry),new wl({color:void 0!==t?t:16777215}))}function up(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ll(new Gl(e.geometry),new wl({color:void 0!==t?t:16777215}))}function hp(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Fu(e)}function dp(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Uu(e)}function fp(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new To(e,n)}Gu.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Gu.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(ch.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new mo;for(let n=0,i=e.length;n<i;n++){const i=e[n];t.vertices.push(new Qn(i.x,i.y,i.z||0))}return t}}),Object.assign(uh.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),rp.prototype=Object.create(Ku.prototype),op.prototype=Object.create(Ku.prototype),ap.prototype=Object.create(Ku.prototype),Object.assign(ap.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Yd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ud.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Iu.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ch.extractUrlBase(e)}}),Iu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Ph.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(kd.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Zn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(mi.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Oo.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Id.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(jn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),jn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),jn.ceilPowerOfTwo(e)}}),Object.assign(Un.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Mi.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Qn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),Zi.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Xn.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Si.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ur.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ur,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ur.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ur.getNormal(e,t,n,i)}}),Object.assign(hh.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new $c(this,e)}}),Object.assign(zn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Qn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(mo.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(Xi.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Xi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(so.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(so.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Yt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(ul.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(pl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),hl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Gu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),So.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(dh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Mr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===En},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(En)}}}),Object.assign(Mr.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?En:Tn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Gr.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Mr(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Gr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ah.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Td.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Gs.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===En},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Gs.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?En:Tn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Rc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(Vs.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(_d.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(xr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new gr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===g}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(cu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(lu.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(wo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Bs.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Bs.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Kt:Qt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Os.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(td.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Gh).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),sd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Mo.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};const pp={merge:function(e,t,n){let i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function mp(){console.error("THREE.CanvasRenderer has been removed")}function vp(){console.error("THREE.JSONLoader has been removed.")}Gn.crossOrigin=void 0,Gn.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Vu;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},Gn.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new zu;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},Gn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Gn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const gp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function yp(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g}));var i=n(15),r=n(12),o=n(85),a=n(146);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return d(e,arguments,m(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),p(i,e)})(e)}function d(e,t,n){return(d=f()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&p(r,n.prototype),r}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(v,e);var t,n,a,s,h,d=(t=v,n=f(),function(){var e,i=m(t);if(n){var r=m(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return c(this,e)});function v(e,t,n,r,a,s,l){var h,f,p,m,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),g=d.call(this,e);var y,b=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,x=n;!x&&b&&(x=null===(y=b[0].loc)||void 0===y?void 0:y.source);var w,_=r;!_&&b&&(_=b.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),_&&0===_.length&&(_=void 0),r&&n?w=r.map((function(e){return Object(o.a)(n,e)})):b&&(w=b.reduce((function(e,t){return t.loc&&e.push(Object(o.a)(t.loc.source,t.loc.start)),e}),[]));var S=l;if(null==S&&null!=s){var M=s.extensions;Object(i.a)(M)&&(S=M)}return Object.defineProperties(u(g),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(h=w)&&void 0!==h?h:void 0,enumerable:null!=w},path:{value:null!=a?a:void 0,enumerable:null!=a},nodes:{value:null!=b?b:void 0},source:{value:null!==(f=x)&&void 0!==f?f:void 0},positions:{value:null!==(p=_)&&void 0!==p?p:void 0},originalError:{value:s},extensions:{value:null!==(m=S)&&void 0!==m?m:void 0,enumerable:null!=S}}),null!=s&&s.stack?(Object.defineProperty(u(g),"stack",{value:s.stack,writable:!0,configurable:!0}),c(g)):(Error.captureStackTrace?Error.captureStackTrace(u(g),v):Object.defineProperty(u(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g)}return a=v,(s=[{key:"toString",value:function(){return g(this)}},{key:r.c,get:function(){return"Object"}}])&&l(a.prototype,s),h&&l(a,h),v}(h(Error));function g(e){var t=e.message;if(e.nodes)for(var n=0,i=e.nodes;n<i.length;n++){var r=i[n];r.loc&&(t+="\n\n"+Object(a.a)(r.loc))}else if(e.source&&e.locations)for(var o=0,s=e.locations;o<s.length;o++){var l=s[o];t+="\n\n"+Object(a.b)(e.source,l)}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(84);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return a(e,[])}function a(e,t){switch(r(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(i.a)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==r){var o=r.call(e);if(o!==e)return"string"==typeof o?o:a(o,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),i=e.length-n,r=[],o=0;o<n;++o)r.push(a(e[o],t));1===i?r.push("... 1 more item"):i>1&&r.push("... ".concat(i," more items"));return"["+r.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+a(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function l(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"})},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"addTypenameToDocument",(function(){return Q})),n.d(t,"argumentsObjectFromField",(function(){return m})),n.d(t,"assign",(function(){return P})),n.d(t,"buildQueryFromSelectionSet",(function(){return re})),n.d(t,"canUseWeakMap",(function(){return ae})),n.d(t,"checkDocument",(function(){return I})),n.d(t,"cloneDeep",(function(){return le})),n.d(t,"createFragmentMap",(function(){return V})),n.d(t,"getDefaultValues",(function(){return G})),n.d(t,"getDirectiveInfoFromField",(function(){return M})),n.d(t,"getDirectiveNames",(function(){return E})),n.d(t,"getDirectivesFromDocument",(function(){return te})),n.d(t,"getEnv",(function(){return ce})),n.d(t,"getFragmentDefinition",(function(){return z})),n.d(t,"getFragmentDefinitions",(function(){return B})),n.d(t,"getFragmentQueryDocument",(function(){return k})),n.d(t,"getInclusionDirectives",(function(){return L})),n.d(t,"getMainDefinition",(function(){return U})),n.d(t,"getMutationDefinition",(function(){return D})),n.d(t,"getOperationDefinition",(function(){return N})),n.d(t,"getOperationDefinitionOrDie",(function(){return F})),n.d(t,"getOperationName",(function(){return R})),n.d(t,"getQueryDefinition",(function(){return j})),n.d(t,"getStoreKeyName",(function(){return p})),n.d(t,"graphQLResultHasError",(function(){return me})),n.d(t,"hasClientExports",(function(){return A})),n.d(t,"hasDirectives",(function(){return C})),n.d(t,"isDevelopment",(function(){return de})),n.d(t,"isEnv",(function(){return ue})),n.d(t,"isField",(function(){return g})),n.d(t,"isIdValue",(function(){return b})),n.d(t,"isInlineFragment",(function(){return y})),n.d(t,"isJsonValue",(function(){return w})),n.d(t,"isNumberValue",(function(){return u})),n.d(t,"isProduction",(function(){return he})),n.d(t,"isScalarValue",(function(){return c})),n.d(t,"isTest",(function(){return fe})),n.d(t,"maybeDeepFreeze",(function(){return ve})),n.d(t,"mergeDeep",(function(){return ye})),n.d(t,"mergeDeepArray",(function(){return be})),n.d(t,"removeArgumentsFromDocument",(function(){return ne})),n.d(t,"removeClientSetsFromDocument",(function(){return oe})),n.d(t,"removeConnectionDirectiveFromDocument",(function(){return J})),n.d(t,"removeDirectivesFromDocument",(function(){return X})),n.d(t,"removeFragmentSpreadFromDocument",(function(){return ie})),n.d(t,"resultKeyNameFromField",(function(){return v})),n.d(t,"shouldInclude",(function(){return T})),n.d(t,"storeKeyNameFromField",(function(){return d})),n.d(t,"stripSymbols",(function(){return Te})),n.d(t,"toIdValue",(function(){return x})),n.d(t,"tryFunctionOrLogError",(function(){return pe})),n.d(t,"valueFromNode",(function(){return S})),n.d(t,"valueToObjectRepresentation",(function(){return h})),n.d(t,"variablesInOperation",(function(){return H})),n.d(t,"warnOnceInDevelopment",(function(){return Me}));var i=n(35),r=n(7),o=n(4),a=n(215),s=n.n(a),l=n(53);function c(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1}function u(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1}function h(e,t,n,i){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var o={};n.fields.map((function(e){return h(o,e.name,e.value,i)})),e[t.value]=o}else if(function(e){return"Variable"===e.kind}(n)){var a=(i||{})[n.name.value];e[t.value]=a}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return h(n,t,e,i),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw new r.a(17);e[t.value]=null}}function d(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(i){var r=i.name,o=i.value;return h(n[e.name.value],r,o,t)}))})));var i=null;return e.arguments&&e.arguments.length&&(i={},e.arguments.forEach((function(e){var n=e.name,r=e.value;return h(i,n,r,t)}))),p(e.name.value,i,n)}n.d(t,"isEqual",(function(){return l.a}));var f=["connection","include","skip","client","rest","export"];function p(e,t,n){if(n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var i=n.connection.filter?n.connection.filter:[];i.sort();var r=t,o={};return i.forEach((function(e){o[e]=r[e]})),n.connection.key+"("+JSON.stringify(o)+")"}return n.connection.key}var a=e;if(t){var l=s()(t);a+="("+l+")"}return n&&Object.keys(n).forEach((function(e){-1===f.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?a+="@"+e+"("+JSON.stringify(n[e])+")":a+="@"+e)})),a}function m(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var i=e.name,r=e.value;return h(n,i,r,t)})),n}return null}function v(e){return e.alias?e.alias.value:e.name.value}function g(e){return"Field"===e.kind}function y(e){return"InlineFragment"===e.kind}function b(e){return e&&"id"===e.type&&"boolean"==typeof e.generated}function x(e,t){return void 0===t&&(t=!1),Object(o.a)({type:"id",generated:t},"string"==typeof e?{id:e,typename:void 0}:e)}function w(e){return null!=e&&"object"==typeof e&&"json"===e.type}function _(e){throw new r.a(18)}function S(e,t){switch(void 0===t&&(t=_),e.kind){case"Variable":return t(e);case"NullValue":return null;case"IntValue":return parseInt(e.value,10);case"FloatValue":return parseFloat(e.value);case"ListValue":return e.values.map((function(e){return S(e,t)}));case"ObjectValue":for(var n={},i=0,r=e.fields;i<r.length;i++){var o=r[i];n[o.name.value]=S(o.value,t)}return n;default:return e.value}}function M(e,t){if(e.directives&&e.directives.length){var n={};return e.directives.forEach((function(e){n[e.name.value]=m(e,t)})),n}return null}function T(e,t){return void 0===t&&(t={}),L(e.directives).every((function(e){var n=e.directive,i=e.ifArgument,o=!1;return"Variable"===i.value.kind?(o=t[i.value.name.value],Object(r.b)(void 0!==o,13)):o=i.value.value,"skip"===n.name.value?!o:o}))}function E(e){var t=[];return Object(i.visit)(e,{Directive:function(e){t.push(e.name.value)}}),t}function C(e,t){return E(t).some((function(t){return e.indexOf(t)>-1}))}function A(e){return e&&C(["client"],e)&&C(["export"],e)}function O(e){var t=e.name.value;return"skip"===t||"include"===t}function L(e){return e?e.filter(O).map((function(e){var t=e.arguments;e.name.value;Object(r.b)(t&&1===t.length,14);var n=t[0];Object(r.b)(n.name&&"if"===n.name.value,15);var i=n.value;return Object(r.b)(i&&("Variable"===i.kind||"BooleanValue"===i.kind),16),{directive:e,ifArgument:n}})):[]}function k(e,t){var n=t,i=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw new r.a(11);"FragmentDefinition"===e.kind&&i.push(e)})),void 0===n&&(Object(r.b)(1===i.length,12),n=i[0].name.value),Object(o.a)(Object(o.a)({},e),{definitions:Object(o.f)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions)})}function P(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){null!=t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function D(e){I(e);var t=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))[0];return Object(r.b)(t,1),t}function I(e){Object(r.b)(e&&"Document"===e.kind,2);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw new r.a(3);return e}));return Object(r.b)(t.length<=1,4),e}function N(e){return I(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function F(e){var t=N(e);return Object(r.b)(t,5),t}function R(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||null}function B(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function j(e){var t=N(e);return Object(r.b)(t&&"query"===t.operation,6),t}function z(e){Object(r.b)("Document"===e.kind,7),Object(r.b)(e.definitions.length<=1,8);var t=e.definitions[0];return Object(r.b)("FragmentDefinition"===t.kind,9),t}function U(e){var t;I(e);for(var n=0,i=e.definitions;n<i.length;n++){var o=i[n];if("OperationDefinition"===o.kind){var a=o.operation;if("query"===a||"mutation"===a||"subscription"===a)return o}"FragmentDefinition"!==o.kind||t||(t=o)}if(t)return t;throw new r.a(10)}function V(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function G(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter((function(e){return e.defaultValue})).map((function(e){var t=e.variable,n=e.defaultValue,i={};return h(i,t.name,n),i}));return P.apply(void 0,Object(o.f)([{}],t))}return{}}function H(e){var t=new Set;if(e.variableDefinitions)for(var n=0,i=e.variableDefinitions;n<i.length;n++){var r=i[n];t.add(r.variable.name.value)}return t}function W(e,t,n){var i=0;return e.forEach((function(n,r){t.call(this,n,r,e)&&(e[i++]=n)}),n),e.length=i,e}var q={kind:"Field",name:{kind:"Name",value:"__typename"}};function Y(e){return function e(t,n){return t.selectionSet.selections.every((function(t){return"FragmentSpread"===t.kind&&e(n[t.name.value],n)}))}(N(e)||z(e),V(B(e)))?null:e}function $(e){return function(t){return e.some((function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)}))}}function X(e,t){var n=Object.create(null),r=[],o=Object.create(null),a=[],s=Y(Object(i.visit)(t,{Variable:{enter:function(e,t,i){"VariableDefinition"!==i.kind&&(n[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some((function(e){return e.remove}))&&t.directives&&t.directives.some($(e))))return t.arguments&&t.arguments.forEach((function(e){"Variable"===e.value.kind&&r.push({name:e.value.name.value})})),t.selectionSet&&function e(t){var n=[];return t.selections.forEach((function(t){(g(t)||y(t))&&t.selectionSet?e(t.selectionSet).forEach((function(e){return n.push(e)})):"FragmentSpread"===t.kind&&n.push(t)})),n}(t.selectionSet).forEach((function(e){a.push({name:e.name.value})})),null}},FragmentSpread:{enter:function(e){o[e.name.value]=!0}},Directive:{enter:function(t){if($(e)(t))return null}}}));return s&&W(r,(function(e){return!n[e.name]})).length&&(s=ne(r,s)),s&&W(a,(function(e){return!o[e.name]})).length&&(s=ie(a,s)),s}function Q(e){return Object(i.visit)(I(e),{SelectionSet:{enter:function(e,t,n){if(!n||"OperationDefinition"!==n.kind){var i=e.selections;if(i)if(!i.some((function(e){return g(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var r=n;if(!(g(r)&&r.directives&&r.directives.some((function(e){return"export"===e.name.value}))))return Object(o.a)(Object(o.a)({},e),{selections:Object(o.f)(i,[q])})}}}}})}var K={test:function(e){var t="connection"===e.name.value;return t&&(!e.arguments||e.arguments.some((function(e){return"key"===e.name.value}))),t}};function J(e){return X([K],I(e))}function Z(e,t,n){return void 0===n&&(n=!0),t&&t.selections&&t.selections.some((function(t){return ee(e,t,n)}))}function ee(e,t,n){return void 0===n&&(n=!0),!g(t)||!!t.directives&&(t.directives.some($(e))||n&&Z(e,t.selectionSet,n))}function te(e,t){var n;return I(t),Y(Object(i.visit)(t,{SelectionSet:{enter:function(t,i,r,a){var s=a.join("-");if(!n||s===n||!s.startsWith(n)){if(t.selections){var l=t.selections.filter((function(t){return ee(e,t)}));return Z(e,t,!1)&&(n=s),Object(o.a)(Object(o.a)({},t),{selections:l})}return null}}}}))}function ne(e,t){var n=function(e){return function(t){return e.some((function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))}))}}(e);return Y(Object(i.visit)(t,{OperationDefinition:{enter:function(t){return Object(o.a)(Object(o.a)({},t),{variableDefinitions:t.variableDefinitions.filter((function(t){return!e.some((function(e){return e.name===t.variable.name.value}))}))})}},Field:{enter:function(t){if(e.some((function(e){return e.remove}))){var i=0;if(t.arguments.forEach((function(e){n(e)&&(i+=1)})),1===i)return null}}},Argument:{enter:function(e){if(n(e))return null}}}))}function ie(e,t){function n(t){if(e.some((function(e){return e.name===t.name.value})))return null}return Y(Object(i.visit)(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function re(e){return"query"===U(e).operation?e:Object(i.visit)(e,{OperationDefinition:{enter:function(e){return Object(o.a)(Object(o.a)({},e),{operation:"query"})}}})}function oe(e){I(e);var t=X([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=Object(i.visit)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every((function(e){return g(e)&&"__typename"===e.name.value})))return null}}})),t}var ae="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),se=Object.prototype.toString;function le(e){return function e(t,n){switch(se.call(t)){case"[object Array]":if(n.has(t))return n.get(t);var i=t.slice(0);return n.set(t,i),i.forEach((function(t,r){i[r]=e(t,n)})),i;case"[object Object]":if(n.has(t))return n.get(t);var r=Object.create(Object.getPrototypeOf(t));return n.set(t,r),Object.keys(t).forEach((function(i){r[i]=e(t[i],n)})),r;default:return t}}(e,new Map)}function ce(){return void 0!==e?"production":"development"}function ue(e){return ce()===e}function he(){return!0===ue("production")}function de(){return!0===ue("development")}function fe(){return!0===ue("test")}function pe(e){try{return e()}catch(e){console.error&&console.error(e)}}function me(e){return e.errors&&e.errors.length}function ve(e){if((de()||fe())&&!("function"==typeof Symbol&&"string"==typeof Symbol("")))return function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(n){null===t[n]||"object"!=typeof t[n]&&"function"!=typeof t[n]||Object.isFrozen(t[n])||e(t[n])})),t}(e);return e}var ge=Object.prototype.hasOwnProperty;function ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return be(e)}function be(e){var t=e[0]||{},n=e.length;if(n>1){var i=[];t=_e(t,i);for(var r=1;r<n;++r)t=we(t,e[r],i)}return t}function xe(e){return null!==e&&"object"==typeof e}function we(e,t,n){return xe(t)&&xe(e)?(Object.isExtensible&&!Object.isExtensible(e)&&(e=_e(e,n)),Object.keys(t).forEach((function(i){var r=t[i];if(ge.call(e,i)){var o=e[i];r!==o&&(e[i]=we(_e(o,n),r,n))}else e[i]=r})),e):t}function _e(e,t){return null!==e&&"object"==typeof e&&t.indexOf(e)<0&&(e=Array.isArray(e)?e.slice(0):Object(o.a)({__proto__:Object.getPrototypeOf(e)},e),t.push(e)),e}var Se=Object.create({});function Me(e,t){void 0===t&&(t="warn"),he()||Se[e]||(fe()||(Se[e]=!0),"error"===t?console.error(e):console.warn(e))}function Te(e){return JSON.parse(JSON.stringify(e))}}.call(this,n(59))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(4),r=Object.setPrototypeOf,o=void 0===r?function(e,t){return e.__proto__=t,e}:r,a=function(e){function t(n){void 0===n&&(n="Invariant Violation");var i=e.call(this,"number"==typeof n?"Invariant Violation: "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return i.framesToPop=1,i.name="Invariant Violation",o(i,t.prototype),i}return Object(i.c)(t,e),t}(Error);function s(e,t){if(!e)throw new a(t)}function l(e){return function(){return console[e].apply(console,arguments)}}!function(e){e.warn=l("warn"),e.error=l("error")}(s||(s={}));var c={env:{}};if("object"==typeof e)c=e;else try{Function("stub","process = stub")(c)}catch(e){}}).call(this,n(59))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"})},function(e,t,n){"use strict";function i(e,t){if(!Boolean(e))throw new Error(t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function i(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var i=n(32),r=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();Object(i.a)(r);var o=function(){function e(e,t,n,i,r,o,a){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=a,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function a(e){return null!=e&&"string"==typeof e.kind}Object(i.a)(o)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));var i="function"==typeof Symbol&&null!=Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Symbol&&null!=Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator",o="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag"},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(73),o=(i=r)&&i.__esModule?i:{default:i};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"object"==i(e)&&null!==e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Pass",(function(){return r}));var i=n(0);function r(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(r.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),r.FullScreenQuad=function(){var e=new i.OrthographicCamera(-1,1,1,-1,0,1),t=new i.PlaneBufferGeometry(2,2),n=function(e){this._mesh=new i.Mesh(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}()},function(e,t,n){!function(e,t,n,i,r,o,a,s,l,c,u,h,d,f,p,m,v,g,y,b,x,w,_,S,M,T,E,C,A,O,L){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,v=v&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v,g=g&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g;var k="default"in y?y.default:y;x=x&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x,L=L&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L;const P="https://mapdata.bj.bcebos.com/maptv",D={bus:"/model/bus.glb",car:"/model/car.glb",bicycle:"/model/bicycle.glb",truck:"/model/truck.glb",pedestrian:"/model/pedestrian.glb",trafficCone:"/model/traffic_cone.glb"},I={accidentSection:"/img/trafficEvent/accidentSection.png",bridge:"/img/trafficEvent/bridge.png",construction:"/img/trafficEvent/construction.png",heightLimit:"/img/trafficEvent/heightLimit.png",impasse:"/img/trafficEvent/impasse.png",noParking:"/img/trafficEvent/noParking.png",noTooting:"/img/trafficEvent/noTooting.png",others:"/img/trafficEvent/others.png",recommendedSpeedLimit:"/img/trafficEvent/recommendedSpeedLimit.png",slowDown:"/img/trafficEvent/slowDown.png",specialLane:"/img/trafficEvent/specialLane.png",speedLimit:"/img/trafficEvent/speedLimit.png",speedLimitMin:"/img/trafficEvent/speedLimitMin.png",tidalLine:"/img/trafficEvent/tidalLine.png",trafficAccident:"/img/trafficEvent/trafficAccident.png",trafficControl:"/img/trafficEvent/trafficControl.png",trafficJam:"/img/trafficEvent/trafficJam.png",trafficLight:"/img/trafficEvent/trafficLight.png",tunnel:"/img/trafficEvent/tunnel.png",widthLimit:"/img/trafficEvent/widthLimit.png"},N={grayforward:"/img/signal/grayforward.png",grayleft:"/img/signal/grayleft.png",grayreverse:"/img/signal/grayreverse.png",grayright:"/img/signal/grayright.png",greenforward:"/img/signal/greenforward.png",greenleft:"/img/signal/greenleft.png",greenreverse:"/img/signal/greenreverse.png",greenright:"/img/signal/greenright.png",redforward:"/img/signal/redforward.png",redleft:"/img/signal/redleft.png",redreverse:"/img/signal/redreverse.png",redright:"/img/signal/redright.png",yellowforward:"/img/signal/yellowforward.png",yellowleft:"/img/signal/yellowleft.png",yellowreverse:"/img/signal/yellowreverse.png",yellowright:"/img/signal/yellowright.png",serviceBack:"/img/trafficEvent/serviceBack.png",serviceIcon:"/img/trafficEvent/serviceIcon.png",serviceRight:"/img/trafficEvent/serviceRight.png",trafficBack:"/img/trafficEvent/trafficBack.png",tarfficRight:"/img/trafficEvent/tarfficRight.png",carBack:"/img/trafficEvent/carBack.png",carIcon:"/img/trafficEvent/carIcon.png",carRight:"/img/trafficEvent/carRight.png"};let F="";document.currentScript&&document.currentScript.src?(F=new URL(document.currentScript.src+"/..").href,"/"===F.slice(-1)&&(F=F.slice(0,-1))):console.error("");const R={snow:P+"/img/snow.png"},B=P+"/img/waternormals.jpg",j={crosswalk:{color:"#8BAFE9",opacity:1,offset:[0,0,.25],visible:!0},road:{color:"#5B77AF",opacity:1,offset:[0,0,.2],visible:!0},arrow:{color:"#eeeeee",opacity:1,offset:[0,0,.3],visible:!0},laneSolidWhite:{color:"#B9D4FF",opacity:1,width:2,offset:[0,0,.2],visible:!0},laneDottedWhite:{color:"#B9D4FF",opacity:1,width:2,dashSize:3,gapSize:2,offset:[0,0,.2],visible:!0},laneDottedYellow:{color:"#D7D089",opacity:1,width:2,dashSize:3,gapSize:2,offset:[0,0,.2],visible:!0},laneSolidYellow:{color:"#CFC77C",opacity:1,width:2,offset:[0,0,.2],visible:!0},roadEdge:{color:"#e5e2fa",opacity:1,offset:[0,0,.2],visible:!1},stopLine:{color:"#93B9F6",opacity:1,width:3,offset:[0,0,.2],visible:!0},river:{color:"#24427e",opacity:.6,offset:[0,0,-.2],visible:!0},grass:{color:"#195F65",opacity:1,offset:[0,0,.23],visible:!0},linkTownshipRoad:{color:"#35456F",opacity:1,width:1,offset:[0,0,0],visible:!0},linkHightway:{color:"#4D6799",opacity:1,width:4,offset:[0,0,0],visible:!0},linkExpressway:{color:"#425986",opacity:1,width:4,offset:[0,0,.1],visible:!0},linkNPRoad:{color:"#354769",opacity:1,width:2,offset:[0,0,.1],visible:!0},linkCountyRoad:{color:"#35456F",opacity:1,width:2,offset:[0,0,1],visible:!0},linkOther:{color:"#202E54",opacity:0,width:3,offset:[0,0,-9.9],visible:!0},region:{color:"#5472A3",opacity:1,width:1,offset:[0,0,.1],visible:!0},township:{color:"#0D60EE",opacity:1,width:4,offset:[0,0,.1],visible:!0},range:{color:"#092C71",opacity:.4,width:1,offset:[0,0,270],visible:!0},building:{color:"#324770",topColor:"#4e6495",opacity:.8,outline:!1,outlineColor:"#aaaaaa",transprent:!0,offset:[0,0,0],visible:!0,scale:[1,1,2]},pointlight:{color:"#FFFFFF",intensity:.3,distance:900,offset:[0,0,0],visible:!0},hemiLight:{color:"#fff",groundColor:"fff",intensity:1,offset:[0,0,0],visible:!0},directional:{color:"#fff",intensity:.4,offset:[0,0,0],visible:!0},back:{color:"#122246",opacity:1,offset:[0,0,.1],visible:!0},plane:{color:"#101F3a",opacity:1,offset:[749956,2566189,-2],visible:!0},mountain:{color:"#2A4352",width:1,visible:!0},other:{color:"#7ECEFC",offset:[0,0,.11],visible:!0},greenBelt:{color:"#195F65",offset:[0,0,.55],visible:!0},underpass:{color:"#2450A6",offset:[0,0,.1],visible:!0}},z={LEFT:1,RIGHT:2,MIDDLE:4},U={BUS:null,CAR:null,TRACK:null,BICYCLE:null,PEDESTRIAN:null,TRAFFIC_CONE:null},V={SCENE_ONLY:1,SCEME_WITH_GLOW:2,GLOW_ONLY:3},G={NO_AA:0,FXAA:1,TAA:2,SMAA:3,SSAA:4},H={ENTIRE_SCENE:0,BLOOM_SCENE:1};
/**
    @license
    tween.js - https://github.com/sole/tween.js

    Copyright (c) 2010-2012 Tween.js authors.

    Easing equations Copyright (c) 2001 Robert Penner http://robertpenner.com/easing/

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.
    */void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var W,q,Y=Y||(W=[],{REVISION:"13",getAll:function(){return W},removeAll:function(){W=[]},add:function(e){W.push(e)},remove:function(e){var t=W.indexOf(e);-1!==t&&W.splice(t,1)},update:function(e){if(0===W.length)return!1;var t=0;for(e=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();t<W.length;)W[t].update(e)?t++:W.splice(t,1);return!0}});function $(e={}){const n=e.time||1,i=e.bloomComposer.renderTarget2.texture||null,r=e.opacity||.2,o=new a.ShaderPass(new t.ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:i},time:{value:n},opacity:{value:r}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",fragmentShader:"\n    uniform sampler2D baseTexture;\n    uniform sampler2D bloomTexture;\n    varying vec2 vUv;\n    uniform float time;\n    uniform float opacity;\n    vec4 getTexture( sampler2D texelToLinearTexture ) {\n        vec4 texColor = LinearToLinear( texture2D( texelToLinearTexture , vUv ) );\n        return texColor;\n    }\n\nvec4 getColor(vec4 o,vec2 u)\n{\n    vec2 mo = vec2(.25,.0);\n    vec3 origin = vec3(6.0*mo.x, 3.0 + 4.0*mo.y, -4.0);\n\tvec3 target = vec3( 0.0, 0.8, 1.2 );\n\n\tvec3 cw = normalize( target-origin);\n    o += 1.-fract((u.y*0.001+u.x*.11)*fract(u.x*.41)+time*0.4 )*100.-1.5*o -cw.x;\n    return o;\n}\n\nvoid main() {\n    vec4 color=( getTexture( baseTexture ) + vec4( opacity ) * getTexture( bloomTexture ) );\n    vec4 _color3057 =vec4(0.0, 0.0, 0.0, 1.0);\n    vec4 color2=getColor(_color3057,gl_FragCoord.xy);\n    if (color2.x < 0.0){\n      (color2 = vec4(0.0, 0.0, 0.0, 1.0));\n    }\n    if (color2.y < 0.0){\n      (color2 = vec4(0.0, 0.0, 0.0, 1.0));\n    }\n    if (color2.z < 0.0){\n      (color2 = vec4(0.0, 0.0, 0.0, 1.0));\n    }\n    if (color2.w < 0.0){\n      (color2 = vec4(0.0, 0.0, 0.0, 1.0));\n    }\n    color2 = vec4(color2.xyz, 1.0);\n    gl_FragColor = color+color2;\n\n}",defines:{}}),"baseTexture");return o.name="RainPass",o.render=function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.uniforms.time.value+=.1,this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))},o}function X(e={}){const n=e.time||1,i=e.bloomComposer.renderTarget2.texture||null,r=new a.ShaderPass(new t.ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:i},time:{value:n}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",fragmentShader:"\n    #define PI 3.14159\n    #define\tTAU 6.28318\n    uniform sampler2D baseTexture;\n    uniform sampler2D bloomTexture;\n    varying vec2 vUv;\n    uniform float time;\n    vec4 getTexture( sampler2D texelToLinearTexture ) {\n        vec4 texColor = LinearToLinear( texture2D( texelToLinearTexture , vUv ) );\n        return texColor;\n    }\n    //snow original -> http://glslsandbox.com/e#36547.1\n    float snow(vec2 uv,float scale)\n    {\n        //float time = iTime*0.75;\n        uv+=time/scale;\n        uv.y+=time*2./scale;\n        uv.x+=sin(uv.y+time*.5)/scale;\n        uv*=scale;\n        vec2 s=floor(uv);\n        vec2 f=fract(uv);\n        float k=3.0;\n        vec2 p =.5+.35*sin(11.*fract(sin((s+scale)*mat2(7.0,3.0,6.0,5.0))*5.))-f;\n        float d=length(p);\n        k=min(d,k);\n        k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n        return k;\n    }\n\n\n    vec3 _Snow(vec2 uv,vec3 background)\n    {\n        float c = snow(uv,30.)*.3;\n        c+=snow(uv,20.)*.5;\n        c+=snow(uv,15.)*.8;\n        c+=snow(uv,10.);\n        c+=snow(uv,8.);\n        c+=snow(uv,6.);\n        c+=snow(uv,5.);\n        c = clamp(c,0.0,1.0);\n        vec3 scol = vec3(0.8,0.8,0.8);\n        scol = mix(background,scol,c);\n        return scol;\n    }\n    void main() {\n        vec2 iResolution = vec2(3840,2160);\n        vec2 p = (gl_FragCoord.xy * 2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);\n        vec4 color = getTexture( bloomTexture );\n        vec3 col = _Snow(p.xy*0.5, color.rgb);\n        gl_FragColor = vec4(col,color.a);\n\n    }",defines:{}}),"baseTexture");return r.name="SnowPass",r.render=function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.uniforms.time.value+=.01,this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))},r}Y.Tween=function(e){var t=e,n={},i={},r={},o=1e3,a=0,s=!1,l=!1,c=0,u=null,h=Y.Easing.Linear.None,d=Y.Interpolation.Linear,f=[],p=null,m=!1,v=null,g=null,y=null;for(var b in e)n[b]=parseFloat(e[b],10);this.to=function(e,t){return void 0!==t&&(o=t),i=e,this},this.start=function(e){if(l)return this;for(var o in Y.add(this),l=!0,m=!1,u=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),u+=c,i){if(i[o]instanceof Array){if(0===i[o].length)continue;i[o]=[t[o]].concat(i[o])}n[o]=t[o],n[o]instanceof Array==0&&(n[o]*=1),r[o]=n[o]||0}return this},this.stop=function(){return l?(Y.remove(this),l=!1,null!==y&&y.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=f.length;e<t;e++)f[e].stop()},this.delay=function(e){return c=e,this},this.repeat=function(e){return a=e,this},this.yoyo=function(e){return s=e,this},this.easing=function(e){return h=e,this},this.interpolation=function(e){return d=e,this},this.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f=e,this},this.onStart=function(e){return p=e,this},this.onUpdate=function(e){return v=e,this},this.onComplete=function(e){return g=e,this},this.onStop=function(e){return y=e,this},this.update=function(e){var y;if(e<u)return!0;!1===m&&(null!==p&&p.call(t),m=!0);var b=(e-u)/o,x=h(b=b>1?1:b);for(y in i){var w=n[y]||0,_=i[y];_ instanceof Array?t[y]=d(_,x):("string"==typeof _&&(_=w+parseFloat(_,10)),"number"==typeof _&&(t[y]=w+(_-w)*x))}if(null!==v&&v.call(t,x),1==b){if(a>0){for(y in isFinite(a)&&a--,r){if("string"==typeof i[y]&&(r[y]=r[y]+parseFloat(i[y],10)),s){var S=r[y];r[y]=i[y],i[y]=S}n[y]=r[y]}return u=e+c,!0}null!==g&&g.call(t);for(var M=0,T=f.length;M<T;M++)f[M].start(u+o);return l=!1,!1}return!0}},Y.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-Y.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*Y.Easing.Bounce.In(2*e):.5*Y.Easing.Bounce.Out(2*e-1)+.5}}},Y.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=Y.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],i):t>1?o(e[n],e[n-1],n-i):o(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){var n,i=0,r=e.length-1,o=Math.pow,a=Y.Interpolation.Utils.Bernstein;for(n=0;n<=r;n++)i+=o(1-t,r-n)*o(t,n)*e[n]*a(r,n);return i},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=Y.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),o(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):o(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=Y.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(q=[1],function(e){var t,n=1;if(q[e])return q[e];for(t=e;t>1;t--)n*=t;return q[e]=n}),CatmullRom:function(e,t,n,i,r){var o=.5*(n-e),a=.5*(i-t),s=r*r;return(2*t-2*n+o+a)*(r*s)+(-3*t+3*n-2*o-a)*s+o*r+t}}};class Q extends t.Object3D{constructor(e){super(),Object.assign(this,e)}get particleEmitter(){return this.emitter}set particleEmitter(e){this.emitter=e,this.mesh=this.emitter.mesh,this.add(this.mesh)}particleUpdate(){const e=+new Date,t=(e-this.startTime)/1e3;this.emitter.particleUpdate(.5*t),this.startTime=e,this.requestid=requestAnimationFrame(this.particleUpdate.bind(this))}start(){this.startTime=+new Date,this.particleUpdate()}stop(){cancelAnimationFrame(this.requestid)}destroy(){this.stop(),this.mesh.parent.remove(this.mesh)}}class K{constructor(e,t){this.times=e||[],this.values=t||[]}lerp(e){if(0===this.times.length)return;let n=0,i=this.times.length;for(;n<i&&e>this.times[n];)n++;if(0===n)return this.values[0];if(n===i)return this.values[i-1];const r=(e-this.times[n-1])/(this.times[n]-this.times[n-1]);return this.values[0]instanceof t.Vector3?this.values[n-1].clone().lerp(this.values[n],r):this.values[n-1]+r*(this.values[n]-this.values[n-1])}}const J=Math.PI/180;class Z{constructor(){this.position=new t.Vector3,this.velocity=new t.Vector3,this.acceleration=new t.Vector3,this.angle=0,this.angleVelocity=0,this.angleAcceleration=0,this.size=16,this.color=new t.Color,this.opacity=1,this.age=0,this.alive=0,this.sizeTween=null,this.colorTween=null,this.opacityTween=null}up(e){if(this.position.add(this.velocity.clone().multiplyScalar(e)),this.velocity.add(this.acceleration.clone().multiplyScalar(e)),this.angle+=this.angleVelocity*J*e,this.angleVelocity+=this.angleAcceleration*J*e,this.age+=e,this.sizeTween.times.length>0&&(this.size=this.sizeTween.lerp(this.age)),this.colorTween.times.length>0){const e=this.colorTween.lerp(this.age);this.color=(new t.Color).setHSL(e.x,e.y,e.z)}this.opacityTween.times.length>0&&(this.opacity=this.opacityTween.lerp(this.age))}}class ee extends t.Object3D{constructor(e={}){super(),this.name=e.name||"",this.width=e.width||30,this.height=e.height||60,this.lightType=e.lightType||"grayforward",this.light=N.grayforward;const n=new t.Texture;n.minFilter=t.LinearFilter,n.magFilter=t.LinearFilter;const i=new t.SpriteMaterial({map:n,depthTest:!0,depthWrite:!0});this.texture=n,this.material=i,this.sprite=new t.Sprite(this.material),this.add(this.sprite),this.fontface="Arial",this.borderColor=e.borderColor||"rgba(0, 10, 32, 0.7)",this.backgroundColor=e.backgroundColor||"rgba(0, 10, 32, 0.7)",this.textColor={r:255,g:0,b:0,a:1},this.text=e.text||"00",this.setText(e.text,this.lightType)}setText(e,t){this.text!==e&&(this.text=e),this.initLightType(t),this.update()}initLightType(e){const t=P+N[e];t&&(this.light=t),e.indexOf("gray")>-1?this.textColor={r:113,g:122,b:141,a:1}:e.indexOf("green")>-1?this.textColor={r:14,g:199,b:117,a:1}:e.indexOf("red")>-1?this.textColor={r:255,g:96,b:96,a:1}:e.indexOf("yellow")>-1&&(this.textColor={r:244,g:203,b:94,a:1})}setTextColor(e){this.textColor.r=255*e.r,this.textColor.g=255*e.g,this.textColor.b=255*e.b,this.update()}update(){const e=new Image;e.crossOrigin="Anonymous",e.src=this.light;const n=document.createElement("canvas"),i=n.getContext("2d");n.width=this.width,n.height=this.height,i.fillStyle=this.backgroundColor,i.strokeStyle=this.borderColor,this.roundRect(i,0,0,this.width,this.height,6);let r="rgba("+this.textColor.r+","+this.textColor.g+",";r=r+this.textColor.b+","+this.textColor.a+")",i.fillStyle=r,i.font=Math.round(this.width/1.4)+"px "+this.fontface;const o=i.measureText(this.text);i.fillText(this.text,this.width/2-o.width/2,this.height*(3/4)+o.width/2),e.addEventListener("load",()=>{i.drawImage(e,this.width/6,this.width/6,2*this.width/3,this.height/2*2/3);const r=new t.Texture(n);r.minFilter=t.LinearFilter,r.magFilter=t.LinearFilter,r.needsUpdate=!0,this.sprite.material.map=r,this.texture=r,this.sprite.scale.set(.1*this.width,.1*this.height,1)})}roundRect(e,t,n,i,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),console.log(e.fillStyle),e.fill(),e.stroke()}dispose(){this.texture.dispose(),this.sprite.material.dispose(),this.sprite.dispose()}}class te{constructor(e,t,n,i,r,o){this.path=e,this.length=this.path.spline.getLength(),this.speed=i,this.callback=r,this.completeCallback=o,this.tween=null,this.repeat=!1,this.startPoint=Math.max(t,0),this.endPoint=Math.min(n,this.length),this.t=0,this.over=!1}start(e=!1,t=0){let n;this.tween&&(this.tween.stop(),this.tween=null),n=e?this.startPoint/this.length:this.t;let i=this.endPoint/this.length,r=0;if(!(Math.abs(this.speed)>.001))return this.over=!0,void(this.completeCallback&&this.completeCallback());r=(i-n)*this.length*1e3/this.speed;let o={t:n};this.tween=new Y.Tween(o).to({t:i},r),this.tween.easing(Y.Easing.Linear.None),this.tween.onUpdate(e=>{this.t=o.t,this.callback(o.t)}),this.tween.onComplete(()=>{this.repeat?this.start():(this.over=!0,this.completeCallback&&this.completeCallback())}),this.tween.delay(t),setTimeout(()=>{this.tween.start()},10)}stop(){this.tween&&(this.tween.stop(),this.tween=null,this.t=0)}pause(){this.tween&&(this.tween.stop(),Y.remove(this.tween),this.tween=null)}resume(){this.start(!0)}getPoint(e){return isNaN(e)&&(e=0),this.path.spline.getPoint(e)}}class ne{constructor(e=[]){this.points=e,this.spline=new t.CatmullRomCurve3(e)}get(e){return isNaN(e)&&(e=0),this.spline.getPoint(e)}getLength(){return this.spline.getLength()}animate(e,t,n,i,r,o=0){let a=new te(this,e,t,n,i,r);return a.start(!1,o),this.animation=a,a}pause(){this.animation&&this.animation.stop()}resume(){this.animation&&this.animation.start(!0)}getGeometry(){let e=new t.Geometry,n=0;for(let i=0;i<=1;i+=.002){let r=this.spline.getPoint(i);e.vertices[n]=new t.Vector3(r.x,r.y,r.z),n++}if(this.closed){let i=this.spline.getPoint(0);e.vertices[n]=new t.Vector3(i.x,i.y,i.z)}return e}get closed(){return this.spline.closed}set closed(e){this.spline.closed=e}}function ie(e){return e?e instanceof Array?new t.Vector2(e[0],e[1]):new t.Vector2(e.x,e.y):new t.Vector2}function re(e,n=0){return e?e instanceof Array?new t.Vector3(e[0],e[1],e[2]||n):new t.Vector3(e.x,e.y,e.z||n):new t.Vector3(0,0,n)}function oe(e){return e?e instanceof Array?new t.Box3(re(e[0],-1),re(e[1],1)):new t.Box3(re(e.min,-1),re(e.max,1)):new t.Box3}function ae(e){return e?e instanceof t.Color?(new t.Color).copy(e):new t.Color(e):new t.Color(.6,.6,.6)}function se(e){var n=e.length;e[0]instanceof t.Vector3||e[0]instanceof t.Vector2?n>2&&e[n-1].equals(e[0])&&e.pop():n>2&&ue(e[n-1],e[0])&&e.pop()}function le(e,t){let n=e.length/2;ce(e,0,t&&t.length?t[0]:n)>0&&e.reverse()}function ce(e,t,n){if(n-t<3)return 0;let i=0;for(let r=2*(n-1),o=2*t;o<2*n;o+=2){const t=e[r],n=e[r+1],a=e[o],s=e[o+1];r=o,i+=t*s-a*n}return i}function ue(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])<.01}const he=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];function de(e={}){return(e.geometry||{}).type}function fe(e={}){const t=de(e);return!(!t||t!==he[4]&&t!==he[5])}function pe(e={}){const t=de(e);return!(!t||t!==he[2]&&t!==he[3])}function me(e={}){const t=de(e);return!(!t||t!==he[0]&&t!==he[1])}function ve(e={}){const t=de(e);return!!(t&&t.indexOf("Multi")>-1)}function ge(e={}){return(e.geometry||{}).coordinates||[]}function ye(e={}){const t=de(e);if(!t)return null;const n=(e.geometry||{}).coordinates;if(!n)return null;const i=[];switch(t){case"Point":i.push(n);break;case"MultiPoint":case"LineString":for(let e=0,t=n.length;e<t;e++)i.push(n[e]);break;case"MultiLineString":case"Polygon":for(let e=0,t=n.length;e<t;e++)for(let t=0,r=n[e].length;t<r;t++)i.push(n[e][t]);break;case"MultiPolygon":for(let e=0,t=n.length;e<t;e++)for(let t=0,r=n[e].length;t<r;t++)for(let r=0,o=n[e][t].length;r<o;r++)i.push(n[e][t][r])}return be(i)}function be(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(let o=0,a=e.length;o<a;o++){const a=e[o],s=a[0],l=a[1];t=Math.min(t,s),n=Math.min(n,l),i=Math.max(i,s),r=Math.max(r,l)}return[(t+i)/2,(n+r)/2,i-t,r-n]}function xe(e={}){const t=de(e);if(!t)return null;const n=e.geometry||{},i=e.properties||{},r=n.coordinates;if(!r)return null;const o=[];let a;switch(t){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}if(a)for(let e=0,t=r.length;e<t;e++)o.push({type:"Feature",geometry:{type:a,coordinates:r[e]},properties:i});else o.push(e);return o}const we=parseInt(t.REVISION,10);function _e(e,t,n){return we>109?e.setAttribute(t,n):e.addAttribute(t,n),e}function Se(e,t,n,{needsOutline:i,top:r,bottom:o,side:a}){const s=function(e,t,n=!1){if(!e)return null;let i=[];if(fe(e)){const r=ye(e);if(ve(e)){const o=xe(e);for(let e=0,a=o.length;e<a;e++)i.push(Ae(o[e],t||r,n))}else{const o=Ae(e,t||r,n);i.push(o)}}return i}(e,n);if(!s)return null;const{position:u,normal:h,uv:d,indices:f}=l.extrudePolygon(s,{depth:t});if(i){const{outline:e}=function(e,t){const n=t.depth,i=t.translate||[0,0],r=t.scale||[1,1],o=t.top,a=t.bottom,s=t.side,l=[];for(let t=0;t<e.length;t++){let u=Oe(e[t],.01);if(!u)continue;const{vertices:h,holes:d,dimensions:f}=c.flatten(u);for(let e=0;e<h.length;e+=2)h[e]=h[e]*r[0]+i[0],h[e+1]=h[e+1]*r[1]+i[1],s&&(l.push(h[e],h[e+1],0),l.push(h[e],h[e+1],n)),e<h.length-3&&(o&&(l.push(h[e],h[e+1],n),l.push(h[e+2],h[e+3],n)),a&&(l.push(h[e],h[e+1],0),l.push(h[e+2],h[e+3],0)))}return{outline:new Float32Array(l)}}(s,{depth:t,top:void 0===r||r,bottom:o,side:void 0===a||a});return{position:u,normal:h,uv:d,indices:f,outline:e}}return{position:u,normal:h,uv:d,indices:f}}function Me(e,n,i,{topColor:r,bottomColor:o}){const a=function(e,t){if(!e)return null;let n=[];if(pe(e)){const i=ye(e);if(ve(e)){const r=xe(e);for(let e=0,o=r.length;e<o;e++)n.push(Ce(r[e],t||i))}else{const r=Ce(e,t||i);n.push(r)}}return n}(e,i);return a?function(e,{depth:n,topColor:i,bottomColor:r}){const o=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].length;return t}(e),a=new Float32Array(3*o*2),s=new Float32Array(2*o*2),l=new Float32Array(3*o*2),c=new Float32Array(3*o*2),u=new Uint32Array(3*o*2),h=new t.Vector3(1/0,1/0,5e3),d=new t.Vector3(-1/0,-1/0,-5e3);let f=0;for(let t=0;t<e.length;t++){const o=e[t];for(let e=0;e<o.length;e++)h.x>o[e][0]&&(h.x=o[e][0]),h.y>o[e][1]&&(h.y=o[e][1]),o[e][2]?h.z>o[e][2]&&(h.z=o[e][2]):h.z=-1,d.x<o[e][0]&&(d.x=o[e][0]),d.y<o[e][1]&&(d.y=o[e][1]),o[e][2]?d.z<o[e][2]&&(d.z=o[e][2]):d.z=1,a[3*e+3*f*2]=o[e][0],a[3*e+3*f*2+1]=o[e][1],a[3*e+3*f*2+2]=0,a[3*e+3*f*2+3*o.length]=o[e][0],a[3*e+3*f*2+1+3*o.length]=o[e][1],a[3*e+3*f*2+2+3*o.length]=-1*n,s[2*e+2*f*2]=e/(o.length-1),s[2*e+2*f*2+1]=1,s[2*e+2*f*2+2*o.length]=e/(o.length-1),s[2*e+2*f*2+1+2*o.length]=0,c[3*e+3*f*2]=i.r,c[3*e+3*f*2+1]=i.g,c[3*e+3*f*2+2]=i.b,c[3*e+3*f*2+3*o.length]=r.r,c[3*e+3*f*2+1+3*o.length]=r.g,c[3*e+3*f*2+2+3*o.length]=r.b,l[3*e+3*f*2]=.707,l[3*e+3*f*2+1]=.707,l[3*e+3*f*2+2]=0,l[3*e+3*f*2+3*o.length]=.707,l[3*e+3*f*2+1+3*o.length]=.707,l[3*e+3*f*2+2+3*o.length]=0,e<o.length-1&&(u[6*e+6*f]=2*f+e+1,u[6*e+6*f+1]=2*f+e,u[6*e+6*f+2]=2*f+e+o.length,u[6*e+6*f+3]=2*f+e+1,u[6*e+6*f+4]=2*f+e+o.length,u[6*e+6*f+5]=2*f+e+1+o.length);f+=o.length}return{position:a,uv:s,indices:u,color:c,normal:l,min:h,max:d}}(a,{depth:n,topColor:r,bottomColor:o}):null}function Te(e,n,i){const r=(new t.Geometry).fromBufferGeometry(e);n=n instanceof t.Color?n:new t.Color(n);const{vertices:o,faces:a,faceVertexUvs:s}=r;for(let e=0,t=a.length;e<t;e++){const{a:t,b:r,c:d}=a[e],f=o[t],p=o[r],m=o[d];if(f.z>0&&p.z>0&&m.z>0){const t=a[e].vertexColors;if(t.length)for(var l=0,c=t.length;l<c;l++)t[l].r=n.r,t[l].g=n.g,t[l].b=n.b;else t.push(n,n,n);var u=s[0][e];for(l=0,c=u.length;l<c;l++)u[l].x=0,u[l].y=0}else if(i){var h=a[e].vertexColors;if(h.length)for(l=0,c=h.length;l<c;l++)h[l].r=i.r,h[l].g=i.g,h[l].b=i.b;else h.push(i,i,i)}}const d=(new t.BufferGeometry).fromGeometry(r);return r.dispose(),d}function Ee(e=[]){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(let a=0,s=e.length;a<s;a++){const s=e[a];let l,c;Array.isArray(s)?(l=s[0],c=s[1]):(s instanceof t.Vector2||s instanceof t.Vector3)&&(l=s.x,c=s.y),n=Math.min(n,l),i=Math.min(i,c),r=Math.max(r,l),o=Math.max(o,c)}return new t.Vector2((n+r)/2,(i+o)/2)}function Ce(e,t){let n=[];pe(e)&&(n=ge(e),le(n),t=t||ye(e));let i=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];i.push([r[0]-t.x,r[1]-t.y])}return i}function Ae(e,n,i=!1){let r,o;if(fe(e)){const t=ge(e);r=t[0],o=t.slice(1,t.length),n=n||ye(e)}const a=n;let s;s=i?new Float32Array(2*r.length):[];for(let e=0,n=r.length;e<n;e++){const n=r[e],o=new t.Vector2(n[0]-a.x,n[1]-a.y);if(i){const t=2*e;s[t]=o.x,s[t+1]=o.y}else s.push([o.x,o.y])}const l=[i?s.buffer:s];if(o&&o.length>0)for(let e=0,n=o.length;e<n;e++){const n=i?new Float32Array(2*o[e].length):[];for(let r=0,s=o[e].length;r<s;r++){const s=o[e][r],l=new t.Vector2(s[0]-a.x,s[1]-a.y);if(i){const e=2*r;n[e]=l.x,n[e+1]=l.y}else n.push([l.x,l.y])}l.push(i?n.buffer:n)}return l}function Oe(e,t){const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=[],a=r.length;let s=r[a-1][0],l=r[a-1][1],c=0;for(let e=0;e<a;e++){let n=r[e][0],i=r[e][1];const a=n-s,u=i-l;c+=Math.sqrt(a*a+u*u),c>t&&(o.push(r[e]),c=0),s=n,l=i}o.length>=3&&n.push(o)}return n.length>0?n:null}function Le(e,n){if(e.length<1)return null;const i={};for(let t=0;t<e.length;++t){const n=e[t];for(let e in n)void 0===i[e]&&(i[e]=[]),i[e].push(n[e])}const r={};let o=0;const a=[];for(let e in i)if("indices"===e){const t=i[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];for(let e=0,t=n.length;e<t;e++)a.push(n[e]+o);o+=i.position[e].length/3}}else{const t=ke(i[e]);if(!t)return null;r[e]=t}r.indices=new Uint32Array(a);const{position:s,normal:l,uv:c,indices:u}=r,h=new t.BufferGeometry;let d=r.color;return d||(d=new Float32Array(s.length),d.fill(1,0,s.length)),_e(h,"color",new t.BufferAttribute(d,3)),_e(h,"position",new t.BufferAttribute(s,3)),c&&c.length&&_e(h,"uv",new t.BufferAttribute(c,2)),l&&l.length&&_e(h,"normal",new t.BufferAttribute(l,3)),n&&(function(e,t){e.deleteAttribute("normal")}(h),_e(h,"instanceStart",new t.BufferAttribute(r.instanceStart,3)),_e(h,"instanceEnd",new t.BufferAttribute(r.instanceEnd,3))),h.setIndex(new t.BufferAttribute(u,1)),h}function ke(e){let t=0;for(let n=0;n<e.length;++n)t+=e[n].length;const n=new Float32Array(t);let i=0;for(let t=0;t<e.length;++t)n.set(e[t],i),i+=e[t].length;return n}function Pe(e,n,i){const r=e.geometry.coordinates,o=[],a=new t.Vector3(1/0,1/0,1/0),s=new t.Vector3(-1/0,-1/0,-1/0),l=i?e.properties[i]:.02;for(let e=0;e<r.length;e++)e<1||e>r.length-2||o.push(r[e][0]-n.x,r[e][1]-n.y,r[e][2]?r[e][2]:l),o.push(r[e][0]-n.x,r[e][1]-n.y,r[e][2]?r[e][2]:l),r[e][0]>s.x&&(s.x=r[e][0]),r[e][1]>s.y&&(s.y=r[e][1]),r[e][2]&&r[e][2]>s.z?s.z=r[e][2]:r[e][2]||(s.z=1),r[e][0]<a.x&&(a.x=r[e][0]),r[e][1]<a.y&&(a.y=r[e][1]),r[e][2]&&r[e][2]<a.z?a.z=r[e][2]:r[e][2]||(a.z=0);return{position:new Float32Array(o),min:a,max:s}}function De(e,n){if(e&&e.geometry){const i=c.flatten(e.geometry.coordinates),r=i.dimensions,o=i.holes,a=[],s=[],l=[],u=[],h=function(e){const n=new t.Vector3(1/0,1/0,1/0),i=new t.Vector3(-1/0,-1/0,-1/0);if(e&&e.length){const t=e[0];for(let e=0;e<t.length;e++)n.x>t[e][0]&&(n.x=t[e][0]),n.y>t[e][1]&&(n.y=t[e][1]),t[e][2]&&n.z>t[e][2]&&(n.z=t[e][2]),i.x<t[e][0]&&(i.x=t[e][0]),i.y<t[e][1]&&(i.y=t[e][1]),t[e][2]&&i.z<t[e][2]&&(i.z=t[e][2]);t[0][2]||(n.z=-1,i.z=1)}return new t.Box3(n,i)}(e.geometry.coordinates),d=h.min.x-n.x,f=h.min.y-n.y,p=h.max.x-n.x,m=h.max.y-n.y;for(let t=0;t<i.vertices.length;){const o=i.vertices[t+0]-n.x,c=i.vertices[t+1]-n.y;if(a.push(o,c,r>2?i.vertices[t+2]:.05),s.push(o,c),t<e.geometry.coordinates[0].length*r){const e=(o-d)/(p-d),t=(c-f)/(m-f);l.push(e,t)}else l.push(0,0);u.push(0,0,1),t+=r}return{position:a,normal:u,uv:l,indices:c(s,o,2),min:h.min,max:h.max}}}function Ie(e,t){return e.length<2||t.length<2?(console.error("坐标数组数据不正确"),null):(e[0]=e[0]-t[0],e[1]=e[1]-t[1],e.length>2&&t.length>2&&(e[2]=e[2]-t[2]),e[2]=e[2]||.01,e)}t.UniformsLib.line={linewidth:{value:1},resolution:{value:new t.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}},t.ShaderLib.line={uniforms:t.UniformsUtils.merge([t.UniformsLib.common,t.UniformsLib.fog,t.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\t\tvarying vec2 vUv;\n\t\t#ifdef USE_DASH\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\t\t#endif\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\t\t}\n\t\tvoid main() {\n\t\t\t#ifdef USE_COLOR\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\t\t\t#endif\n\t\t\t#ifdef USE_DASH\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t#endif\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\t\t\tvUv = uv;\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\t\t\tif ( perspective ) {\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\t\t\t\t\ttrimSegment( start, end );\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\t\t\t\t\ttrimSegment( end, start );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\t\t\t\toffset += - dir;\n\t\t\t} else if ( position.y > 1.0 ) {\n\t\t\t\toffset += dir;\n\t\t\t}\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\t\t\tclip.xy += offset;\n\t\t\tgl_Position = clip;\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\t#ifdef USE_DASH\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\t\t#endif\n\t\tvarying float vLineDistance;\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\t#include <clipping_planes_fragment>\n\t\t\t#ifdef USE_DASH\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\t\t\t#endif\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\t\t\t}\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t}\n\t\t"};var Ne=function(e){t.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:t.UniformsUtils.clone(t.ShaderLib.line.uniforms),vertexShader:t.ShaderLib.line.vertexShader,fragmentShader:t.ShaderLib.line.fragmentShader,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};function Fe(e){e.color=ae(e.color),e.size=e.size||4,e.width=e.width||1,e.opacity=e.opacity||1,e.offset=re(e.offset),e.map&&(e.texture=(new t.TextureLoader).load(e.map),e.texture.wrapS=t.ClampToEdgeWrapping,e.texture.wrapT=t.RepeatWrapping,e.texture.magFilter=t.NearestFilter,e.texture.repeat=new t.Vector2(1,6))}(Ne.prototype=Object.create(t.ShaderMaterial.prototype)).constructor=Ne,Ne.prototype.isLineMaterial=!0;var Re,Be,je=function(){t.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry",this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new t.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new t.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};je.prototype=Object.assign(Object.create(t.InstancedBufferGeometry.prototype),{constructor:je,isLineSegmentsGeometry:!0,applyMatrix4:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));var i=new t.InstancedInterleavedBuffer(n,6,1);return this.setAttribute("instanceStart",new t.InterleavedBufferAttribute(i,3,0)),this.setAttribute("instanceEnd",new t.InterleavedBufferAttribute(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));var i=new t.InstancedInterleavedBuffer(n,6,1);return this.setAttribute("instanceColorStart",new t.InterleavedBufferAttribute(i,3,0)),this.setAttribute("instanceColorEnd",new t.InterleavedBufferAttribute(i,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new t.WireframeGeometry(e.geometry)),this},fromLineSegments:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},computeBoundingBox:(Be=new t.Box3,function(){null===this.boundingBox&&(this.boundingBox=new t.Box3);var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;void 0!==e&&void 0!==n&&(this.boundingBox.setFromBufferAttribute(e),Be.setFromBufferAttribute(n),this.boundingBox.union(Be))}),computeBoundingSphere:(Re=new t.Vector3,function(){null===this.boundingSphere&&(this.boundingSphere=new t.Sphere),null===this.boundingBox&&this.computeBoundingBox();var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(void 0!==e&&void 0!==n){var i=this.boundingSphere.center;this.boundingBox.getCenter(i);for(var r=0,o=0,a=e.count;o<a;o++)Re.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Re)),Re.fromBufferAttribute(n,o),r=Math.max(r,i.distanceToSquared(Re));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}),toJSON:function(){},applyMatrix:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}});var ze,Ue,Ve=function(e,n){t.Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==e?e:new je,this.material=void 0!==n?n:new Ne({color:16777215*Math.random()})};Ve.prototype=Object.assign(Object.create(t.Mesh.prototype),{constructor:Ve,isLineSegments2:!0,computeLineDistances:(ze=new t.Vector3,Ue=new t.Vector3,function(){for(var e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.data.count),o=0,a=0,s=n.data.count;o<s;o++,a+=2)ze.fromBufferAttribute(n,o),Ue.fromBufferAttribute(i,o),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+ze.distanceTo(Ue);var l=new t.InstancedInterleavedBuffer(r,2,1);return e.setAttribute("instanceDistanceStart",new t.InterleavedBufferAttribute(l,1,0)),e.setAttribute("instanceDistanceEnd",new t.InterleavedBufferAttribute(l,1,1)),this}),raycast:function(){var e=new t.Vector4,n=new t.Vector4,i=new t.Vector4,r=new t.Vector3,o=new t.Matrix4,a=new t.Line3,s=new t.Vector3;return function(l,c){null===l.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var u=l.ray,h=l.camera,d=h.projectionMatrix,f=this.geometry,p=this.material,m=p.resolution,v=p.linewidth,g=f.attributes.instanceStart,y=f.attributes.instanceEnd;u.at(1,i),i.w=1,i.applyMatrix4(h.matrixWorldInverse),i.applyMatrix4(d),i.multiplyScalar(1/i.w),i.x*=m.x/2,i.y*=m.y/2,i.z=0,r.copy(i);var b=this.matrixWorld;o.multiplyMatrices(h.matrixWorldInverse,b);for(var x=0,w=g.count;x<w;x++){e.fromBufferAttribute(g,x),n.fromBufferAttribute(y,x),e.w=1,n.w=1,e.applyMatrix4(o),n.applyMatrix4(o),e.applyMatrix4(d),n.applyMatrix4(d),e.multiplyScalar(1/e.w),n.multiplyScalar(1/n.w);var _=e.z<-1&&n.z<-1,S=e.z>1&&n.z>1;if(!_&&!S){e.x*=m.x/2,e.y*=m.y/2,n.x*=m.x/2,n.y*=m.y/2,a.start.copy(e),a.start.z=0,a.end.copy(n),a.end.z=0;var M=a.closestPointToPointParameter(r,!0);a.at(M,s);var T=t.Math.lerp(e.z,n.z,M),E=T>=-1&&T<=1,C=r.distanceTo(s)<.5*v;if(E&&C){a.start.fromBufferAttribute(g,x),a.end.fromBufferAttribute(y,x),a.start.applyMatrix4(b),a.end.applyMatrix4(b);var A=new t.Vector3,O=new t.Vector3;u.distanceSqToSegment(a.start,a.end,O,A),c.push({point:O,pointOnLine:A,distance:u.origin.distanceTo(O),object:this,face:null,faceIndex:x,uv:null,uv2:null})}}}}}()});const Ge=["#include <common>","#include <packing>","#include <bsdfs>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <lights_pars_begin>","uniform vec3 iResolution;","uniform float iTime;","uniform float alpha;","uniform float SEA_HEIGHT;","uniform float SEA_CHOPPY;","uniform float SEA_SPEED;","uniform float SEA_FREQ ;","uniform vec3 SEA_BASE;","uniform vec3 SEA_WATER_COLOR;","varying vec2 vUv;","#define TAU 6.28318530718","#define MAX_ITER 5","const int NUM_STEPS = 8;","#define EPSILON_NRM (0.1 / iResolution.x)","#define AA","const int ITER_GEOMETRY = 3;","const int ITER_FRAGMENT = 5;","#define SEA_TIME (1.0 + iTime * SEA_SPEED)","const mat2 octave_m = mat2(1.6,1.2,-1.2,1.6);","mat3 fromEuler(vec3 ang) {","vec2 a1 = vec2(sin(ang.x),cos(ang.x));","vec2 a2 = vec2(sin(ang.y),cos(ang.y));","vec2 a3 = vec2(sin(ang.z),cos(ang.z));","mat3 m;","m[0] = vec3(a1.y*a3.y+a1.x*a2.x*a3.x,a1.y*a2.x*a3.x+a3.y*a1.x,-a2.y*a3.x);","m[1] = vec3(-a2.y*a1.x,a1.y*a2.y,a2.x);","m[2] = vec3(a3.y*a1.x*a2.x+a1.y*a3.x,a1.x*a3.x-a1.y*a3.y*a2.x,a2.y*a3.y);","return m;","}","float hash( vec2 p ) {","float h = dot(p,vec2(127.1,311.7));","return fract(sin(h)*43758.5453123);","}","float noise( in vec2 p ) {","vec2 i = floor( p );"," vec2 f = fract( p );","vec2 u = f*f*(3.0-2.0*f);","return -1.0+2.0*mix( mix( hash( i + vec2(0.0,0.0) ),"," hash( i + vec2(1.0,0.0) ), u.x),","mix( hash( i + vec2(0.0,1.0) ),"," hash( i + vec2(1.0,1.0) ), u.x), u.y);","}","float diffuse(vec3 n,vec3 l,float p) {","return pow(dot(n,l) * 0.4 + 0.6,p);","}","float specular(vec3 n,vec3 l,vec3 e,float s) {","float nrm = (s + 8.0) / (PI * 8.0);","return pow(max(dot(reflect(e,n),l),0.1),s) * nrm;","}","vec3 getSkyColor(vec3 e) {","e.y = (max(e.y,0.0)*0.8+0.2)*0.8;","return vec3(pow(1.0-e.y,2.0), 1.0-e.y, 0.6+(1.0-e.y)*0.4) * 1.1;","}","float sea_octave(vec2 uv, float choppy) {","uv += noise(uv);","vec2 wv = 1.0-abs(sin(uv));"," vec2 swv = abs(cos(uv));"," wv = mix(wv,swv,wv);","return pow(1.0-pow(wv.x * wv.y,0.65),choppy);","}","float map(vec3 p) {","float freq = SEA_FREQ;","float amp = SEA_HEIGHT;","float choppy = SEA_CHOPPY;","vec2 uv = p.xz; uv.x *= 0.75;","float d, h = 0.0;","for(int i = 0; i < ITER_GEOMETRY; i++) {","d = sea_octave((uv+SEA_TIME)*freq,choppy);"," d += sea_octave((uv-SEA_TIME)*freq,choppy);"," h += d * amp;","uv *= octave_m; freq *= 1.9; amp *= 0.22;","choppy = mix(choppy,1.0,0.2);"," }"," return p.y - h;","}","float map_detailed(vec3 p) {","float freq = SEA_FREQ;","float amp = SEA_HEIGHT;","float choppy = SEA_CHOPPY;","vec2 uv = p.xz; uv.x *= 0.75;","float d, h = 0.0;","for(int i = 0; i < ITER_FRAGMENT; i++) {","d = sea_octave((uv+SEA_TIME)*freq,choppy);","d += sea_octave((uv-SEA_TIME)*freq,choppy);"," h += d * amp;","uv *= octave_m; freq *= 1.9; amp *= 0.22;","choppy = mix(choppy,1.0,0.2);","}","return p.y - h;","}","vec3 getSeaColor(vec3 p, vec3 n, vec3 l, vec3 eye, vec3 dist) {","float fresnel = clamp(1.0 - dot(n,-eye), 0.0, 1.0);","fresnel = pow(fresnel,3.0) * 0.5;","vec3 reflected = getSkyColor(reflect(eye,n));","vec3 refracted = SEA_BASE + diffuse(n,l,80.0) * SEA_WATER_COLOR * 0.12;","vec3 color = mix(refracted,reflected,fresnel);","float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);"," color += SEA_WATER_COLOR * (p.y - SEA_HEIGHT) * 0.18 * atten;","color += vec3(specular(n,l,eye,60.0));","return color;"," }","vec3 getNormal(vec3 p, float eps) {","vec3 n;","n.y = map_detailed(p);","n.x = map_detailed(vec3(p.x+eps,p.y,p.z)) - n.y;","n.z = map_detailed(vec3(p.x,p.y,p.z+eps)) - n.y;","n.y = eps;","return normalize(n);","}","float heightMapTracing(vec3 ori, vec3 dir, out vec3 p) {","float tm = 0.0;","float tx = 1000.0;","float hx = map(ori + dir * tx);","if(hx > 0.0) return tx;","float hm = map(ori + dir * tm);","float tmid = 0.0;","for(int i = 0; i < NUM_STEPS; i++) {","tmid = mix(tm,tx, hm/(hm-hx));","p = ori + dir * tmid;","float hmid = map(p);","if(hmid < 0.0) {","tx = tmid;","hx = hmid;","} else {","tm = tmid;","hm = hmid;","}","}","return tmid;","}","vec3 getPixel(in vec2 coord, float time) {","vec2 uv = coord / iResolution.xy;","uv = uv * 2.0 - 1.0;","uv.x *= iResolution.x / iResolution.y;","vec3 ang = vec3(sin(time*3.0)*0.01,sin(time)*0.02+0.3,time*0.1);","vec3 ori = vec3(0.0,3.5,time*0.5);","vec3 dir = normalize(vec3(uv.xy,-9.0)); dir.z += length(uv) * 0.16;","dir = normalize(dir) * fromEuler(ang);","vec3 p;","heightMapTracing(ori,dir,p);","vec3 dist = p - ori;","vec3 n = getNormal(p, dot(dist,dist) * EPSILON_NRM);","vec3 light = normalize(vec3(0.0,1.0,1.0));","return mix(","getSkyColor(dir),","getSeaColor(p,n,light,dir,dist),","pow(smoothstep(0.0,-0.02,dir.y),0.2));","}","void main(  )","{","#include <logdepthbuf_fragment>","float time = -0.5*iTime;//+ iMouse.x*0.01;","vec2 uv = gl_FragCoord.xy / 5.0;","vec3 color = getPixel(uv, time);","gl_FragColor = vec4(pow(color,vec3(0.65)), alpha);","#include <tonemapping_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","}"].join("\n");function He(e={}){const n=e.iTime||(new Date).getSeconds(),i=e.iResolution||new t.Vector3(1080,768,1),r=e.alpha||1,o=e.SEA_HEIGHT||.5,a=e.SEA_CHOPPY||4,s=e.SEA_SPEED||.6,l=e.SEA_FREQ||.16,c=e.SEA_BASE||new t.Color(0,.125,.24),u=e.SEA_WATER_COLOR||new t.Color(.32,.36,.24);return new t.ShaderMaterial({transparent:r<1,opacity:r,uniforms:{iTime:{type:"f",value:n},iResolution:{type:"v3",value:i},alpha:{type:"f",value:r},SEA_HEIGHT:{type:"f",value:o},SEA_CHOPPY:{type:"f",value:a},SEA_SPEED:{type:"f",value:s},SEA_FREQ:{type:"f",value:l},SEA_BASE:{type:"v3",value:c},SEA_WATER_COLOR:{type:"v3",value:u}},vertexShader:"\n                uniform float time;\n                varying vec2 vUv;\n                void main(){\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }\n",fragmentShader:Ge,side:t.FrontSide})}class We extends t.Mesh{constructor(e,n={}){super(e);const i=this,r=void 0!==n.isShadow&&n.isShadow,o=void 0!==n.cameraZ?n.cameraZ:200,a=void 0!==n.textureWidth?n.textureWidth:512,s=void 0!==n.textureHeight?n.textureHeight:512,l=void 0!==n.alpha?n.alpha:1,c=void 0!==n.iTime?n.iTime:0,u=void 0!==n.waterNormals?n.waterNormals:null,h=void 0!==n.sunDirection?n.sunDirection:new t.Vector3(.70707,.70707,0),d=new t.Color(void 0!==n.sunColor?n.sunColor:16777215),f=new t.Color(void 0!==n.waterColor?n.waterColor:8355711),p=void 0!==n.eye?n.eye:new t.Vector3(0,0,0),m=void 0!==n.distortionScale?n.distortionScale:20,v=void 0!==n.side?n.side:t.FrontSide,g=void 0!==n.fog&&n.fog,y=new t.Vector3,b=new t.Vector3,x=new t.Vector3,w=new t.Matrix4,_=new t.Vector3(0,0,-1),S=new t.Vector3,M=new t.Vector3,T=new t.Matrix4,E=new t.PerspectiveCamera,C={minFilter:t.LinearFilter,magFilter:t.LinearFilter,format:t.RGBFormat},A=new t.WebGLRenderTarget(a,s,C);t.MathUtils.isPowerOfTwo(a)&&t.MathUtils.isPowerOfTwo(s)||(A.texture.generateMipmaps=!1);const O={uniforms:t.UniformsUtils.merge([t.UniformsLib.fog,t.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},iTime:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new t.Matrix4},sunColor:{value:new t.Color(8355711)},sunDirection:{value:new t.Vector3(.70707,.70707,0)},eye:{value:new t.Vector3},waterColor:{value:new t.Color(5592405)}}]),vertexShader:"\n            uniform mat4 textureMatrix;\n            uniform float iTime;\n            varying vec4 mirrorCoord;\n            varying vec4 worldPosition;\n            #include <common>\n            #include <fog_pars_vertex>\n            // #include <shadowmap_pars_vertex>\n            #include <logdepthbuf_pars_vertex>\n            void main() {\n             mirrorCoord = modelMatrix * vec4( position, 1.0 );\n             worldPosition = mirrorCoord.xyzw;\n             mirrorCoord = textureMatrix * mirrorCoord;\n             vec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n             gl_Position = projectionMatrix * mvPosition;\n            #include <beginnormal_vertex>\n            // #include <defaultnormal_vertex>\n            #include <logdepthbuf_vertex>\n            #include <fog_vertex>\n            // #include <shadowmap_vertex>\n            }",fragmentShader:"\n            uniform sampler2D mirrorSampler;\n            uniform float alpha;\n            uniform float iTime;\n            uniform float size;\n            uniform float distortionScale;\n            uniform sampler2D normalSampler;\n            uniform vec3 sunColor;\n            uniform vec3 sunDirection;\n            uniform vec3 eye;\n            uniform vec3 waterColor;\n            varying vec4 mirrorCoord;\n            varying vec4 worldPosition;\n            vec4 getNoise( vec2 uv ) {\n             vec2 uv0 = ( uv / 103.0 ) + vec2(iTime / 17.0, iTime / 29.0);\n             vec2 uv1 = uv / 107.0-vec2( iTime / -19.0, iTime / 31.0 );\n             vec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( iTime / 101.0, iTime / 97.0 );\n             vec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( iTime / 109.0, iTime / -113.0 );\n             vec4 noise = texture2D( normalSampler, uv0 ) +\n              texture2D( normalSampler, uv1 ) +\n              texture2D( normalSampler, uv2 ) +\n              texture2D( normalSampler, uv3 );\n             return noise * 0.5 - 1.0;\n            }\n            void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection,\n             float shiny, float spec, float diffuse,\n             inout vec3 diffuseColor, inout vec3 specularColor ) {\n             vec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n             float direction = max( 0.0, dot( eyeDirection, reflection ) );\n             specularColor += pow( direction, shiny ) * sunColor * spec;\n             diffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n            }\n            #include <common>\n            #include <packing>\n            #include <bsdfs>\n            #include <fog_pars_fragment>\n            #include <logdepthbuf_pars_fragment>\n            #include <lights_pars_begin>\n\n            // #include <shadowmap_pars_fragment>\n            // #include <shadowmask_pars_fragment>\n            void main() {\n             #include <logdepthbuf_fragment>\n             vec4 noise = getNoise( worldPosition.xy * size );\n             vec3 surfaceNormal = normalize( noise.xyz * vec3( 1.5, 1.0, 1.5 ) );\n             vec3 diffuseLight = vec3(0.0);\n             vec3 specularLight = vec3(0.0);\n             vec3 worldToEye = eye-worldPosition.xyz;\n             vec3 eyeDirection = normalize( worldToEye );\n             sunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n             float distance = length(worldToEye);\n             vec2 distortion = surfaceNormal.xy * ( 0.001 + 1.0 / distance ) * distortionScale;\n             vec2 d=mirrorCoord.xy / mirrorCoord.w + distortion;\n             vec3 reflectionSample = vec3( texture2D( mirrorSampler,d  ) );\n             float theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n             float rf0 = 0.3;\n             float reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n             vec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n             vec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) ,\n              ( vec3(0.1) + reflectionSample * 0.9 +\n              reflectionSample * specularLight ), reflectance);\n             vec3 outgoingLight = albedo;\n             gl_FragColor = vec4( outgoingLight, alpha );\n             #include <tonemapping_fragment>\n             #include <fog_fragment>\n            }"},L=new t.ShaderMaterial({fragmentShader:O.fragmentShader,vertexShader:O.vertexShader,uniforms:t.UniformsUtils.clone(O.uniforms),lights:!1,side:v,fog:g,name:"waterFive"});L.uniforms.mirrorSampler.value=A.texture,L.uniforms.textureMatrix.value=T,L.uniforms.alpha.value=l,L.uniforms.iTime.value=c,L.uniforms.normalSampler.value=u,L.uniforms.sunColor.value=d,L.uniforms.waterColor.value=f,L.uniforms.sunDirection.value=h,L.uniforms.distortionScale.value=m,L.uniforms.eye.value=p,i.material=L,i.p=new t.Vector3(0,0,0),i.far=0,i.onBeforeRender=function(e,t,n){if(b.setFromMatrixPosition(i.matrixWorld),x.setFromMatrixPosition(n.matrixWorld),w.extractRotation(i.matrixWorld),y.set(0,0,1),y.applyMatrix4(w),S.subVectors(b,x),S.dot(y)>0)return;if(i.p.x.toFixed(2)===n.position.x.toFixed(2)&&i.p.y.toFixed(2)===n.position.y.toFixed(2)&&i.far===n.far)return;i.p.set(n.position.x,n.position.y,n.position.z),i.far=n.far,S.reflect(y).negate(),S.add(b),w.extractRotation(n.matrixWorld),_.set(0,0,-1),_.applyMatrix4(w),_.add(x),r&&(M.subVectors(b,_),M.reflect(y).negate(),M.add(b),E.position.copy(S),E.up.set(0,1,0),E.up.applyMatrix4(w),E.up.reflect(y),E.lookAt(M),E.far=n.far,E.updateMatrixWorld(),i.p.z<o?(E.projectionMatrix.copy(n.projectionMatrix),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(E.projectionMatrix),T.multiply(E.matrixWorldInverse)):(T.set(0),T.multiply(E.projectionMatrix),T.multiply(E.matrixWorldInverse))),p.setFromMatrixPosition(n.matrixWorld);const a=e.getRenderTarget(),s=e.xr.enabled,l=e.shadowMap.autoUpdate;i.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(A),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,E),i.visible=!0,e.xr.enabled=s,e.shadowMap.autoUpdate=l,e.setRenderTarget(a);const c=n.viewport;void 0!==c&&e.state.viewport(c)}}}function qe(e,n,i){if(n.geometry){const r=function(e){Fe(e),e.sizeAttenuation;const n=e.dashSize,i=e.gapSize;let r=null;return e.width>=2?(r=new Ne({color:e.color,opacity:e.opacity,linewidth:e.width,transparent:e.opacity<1,depthWrite:e.opacity>=1}),n&&i&&(r.dashed=!0,r.dashSize=n,r.gapSize=i,r.defines.USE_DASH=""),r.resolution.set(window.innerWidth,window.innerHeight),r.needsUpdate=!0):r=n&&i?new t.LineDashedMaterial({color:e.color,linewidth:1,scale:1,dashSize:n,gapSize:i}):new t.LineBasicMaterial({color:e.color,opacity:e.opacity,transparent:e.opacity<1,depthWrite:e.opacity>=1}),r}(e),o=new t.BufferGeometry;i?n.geometry.attributes?(o.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.attributes.position),3)),e.vertexColors&&o.setAttribute("color",new t.BufferAttribute(new Float32Array(n.geometry.attributes.color),3))):(o.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.position),3)),e.vertexColors&&o.setAttribute("color",new t.BufferAttribute(new Float32Array(n.geometry.color),3))):(o.setAttribute("position",n.geometry.getAttribute("position")),e.vertexColors&&o.setAttribute("color",n.geometry.getAttribute("color"))),n.geometry=null;let a=new t.LineSegments(o,r);if(e.width>=2){const e=new je;e.fromLineSegments(a),a=new Ve(e,r)}return e.dashSize&&e.gapSize&&a.computeLineDistances(),a.name="mergedLine",a.boundingBox=i?new t.Box3(n.min,n.max):n.boundingBox,a.position.x=n.center.x+e.offset.x,a.position.y=n.center.y+e.offset.y,a.position.z=e.offset.z,a.matrixAutoUpdate=!1,a.updateMatrix(),a}}function Ye(e,n,i,r){if(n.geometry){let o=function(e){return Fe(e),new t.MeshPhongMaterial({color:e.color,opacity:e.opacity,transparent:e.opacity<1,depthWrite:e.opacity>=1,map:e.texture||null,side:e.side||0,vertexColors:e.vertexColors||!1})}(e);const a=new t.BufferGeometry;i?n.geometry.attributes?(a.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.attributes.position),3)),a.setAttribute("normal",new t.BufferAttribute(new Float32Array(n.geometry.attributes.normal),3)),e.vertexColors&&a.setAttribute("color",new t.BufferAttribute(new Float32Array(n.geometry.attributes.color),3)),a.setAttribute("uv",new t.BufferAttribute(new Float32Array(n.geometry.attributes.uv),2)),a.setIndex(new t.BufferAttribute(new Uint32Array(n.geometry.attributes.indices),1))):(a.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.position),3)),a.setAttribute("normal",new t.BufferAttribute(new Float32Array(n.geometry.normal),3)),e.vertexColors&&a.setAttribute("color",new t.BufferAttribute(new Float32Array(n.geometry.color),3)),a.setAttribute("uv",new t.BufferAttribute(new Float32Array(n.geometry.uv),2)),a.setIndex(new t.BufferAttribute(new Uint32Array(n.geometry.indices),1))):(a.setAttribute("position",n.geometry.getAttribute("position")),n.geometry.getAttribute("normal")&&a.setAttribute("normal",n.geometry.getAttribute("normal")),n.geometry.getAttribute("uv")&&a.setAttribute("uv",n.geometry.getAttribute("uv")),e.vertexColors&&a.setAttribute("color",n.geometry.getAttribute("color")),a.setIndex(n.geometry.getIndex())),n.geometry=null;let s=null;return r&&"river"===r?5===e.type?s=new We(a,{textureWidth:512,textureHeight:512,waterNormals:(new t.TextureLoader).load(B,(function(e){e.wrapS=e.wrapT=t.RepeatWrapping})),sunDirection:new t.Vector3(3,3,.5),sunColor:"#fff",waterColor:e.color,distortionScale:3,fog:!1,size:2}):6===e.type?s=new We(a,{isShadow:!0,textureWidth:512,textureHeight:512,waterNormals:(new t.TextureLoader).load(B,(function(e){e.wrapS=e.wrapT=t.RepeatWrapping})),sunDirection:new t.Vector3(5,5,1),sunColor:"#fff",waterColor:e.color,distortionScale:5,fog:!1,size:2}):(o=He(),s=new t.Mesh(a,o)):s=new t.Mesh(a,o),s.receiveShadow=!0,s.position.x=n.center.x+e.offset.x,s.position.y=n.center.y+e.offset.y,s.position.z=e.offset.z,s.boundingBox=i?new t.Box3(n.min,n.max):n.boundingBox,s.matrixAutoUpdate=!1,s.updateMatrix(),s.updateMatrixWorld(),s}}function $e(e,n,i){if(n.geometry){const r=function(e){return Fe(e),e.topColor&&(e.topColor instanceof t.Color?e.topColor:new t.Color(e.topColor)),e.bottomColor&&(e.bottomColor instanceof t.Color?e.bottomColor:new t.Color(e.bottomColor)),e.enableEffect,e.gradient?new t.MeshPhongMaterial({color:e.color,opacity:e.opacity,blendEquation:t.CustomBlending,transparent:e.opacity<1,depthWrite:e.opacity>=1,map:e.texture}):new t.MeshPhongMaterial({opacity:e.opacity,transparent:e.opacity<1,depthWrite:e.opacity>=1})}(e);let o=new t.BufferGeometry;i?n.geometry.attributes?(o.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.attributes.position),3)),o.setAttribute("color",new t.BufferAttribute(new Float32Array(n.geometry.attributes.color),3)),o.setAttribute("uv",new t.BufferAttribute(new Float32Array(n.geometry.attributes.uv),2)),o.setAttribute("normal",new t.BufferAttribute(new Float32Array(n.geometry.attributes.normal),3)),o.setIndex(new t.BufferAttribute(new Uint32Array(n.geometry.attributes.indices),1))):(o.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.position),3)),o.setAttribute("color",new t.BufferAttribute(new Float32Array(n.geometry.color),3)),o.setAttribute("uv",new t.BufferAttribute(new Float32Array(n.geometry.uv),2)),o.setAttribute("normal",new t.BufferAttribute(new Float32Array(n.geometry.normal),3)),o.setIndex(new t.BufferAttribute(new Uint32Array(n.geometry.indices),1))):(o.setAttribute("position",n.geometry.getAttribute("position")),e.gradient&&o.setAttribute("color",n.geometry.getAttribute("color")),o.setAttribute("uv",n.geometry.getAttribute("uv")),o.setAttribute("normal",n.geometry.getAttribute("normal")),o.setIndex(n.geometry.getIndex())),e.topColor&&(e.gradient?r.map?o=Te(o,e.topColor):function(e,n,i,r){const o=e.attributes.position.array,a=o.length,s=n instanceof t.Color?n:new t.Color(n);i=i instanceof t.Color?i:new t.Color(i);const l=[];for(let e=0;e<a;e+=3){const t=o[e+2];t>0?l.push(i.r,i.g,i.b):l.push(s.r,s.g,s.b)}_e(e,"color",new t.Float32BufferAttribute(l,3,!0))}(o,e.bottomColor,e.topColor):o=Te(o,e.topColor,e.color),r.vertexColors=t.VertexColors);const a=new t.Mesh(o,r);if(a.position.x=n.center.x,a.position.y=n.center.y,a.castShadow=!0,a.matrixAutoUpdate=!1,a.updateMatrix(),e.outline){const i=new t.LineSegments((new t.BufferGeometry).setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.attributes.position),3)),new t.LineBasicMaterial({color:e.outlineColor||"#ff0000"}));return n.geometry=null,i.position.x=n.center.x,i.position.y=n.center.y,i.matrixAutoUpdate=!1,i.updateMatrix(),e.scale&&(a.scale.x=e.scale[0]||e.scale.x,a.scale.y=e.scale[1]||e.scale.y,a.scale.z=e.scale[2]||e.scale.z,i.scale.x=e.scale[0]||e.scale.x,i.scale.y=e.scale[1]||e.scale.y,i.scale.z=e.scale[2]||e.scale.z,a.updateMatrix(),i.updateMatrix()),{building:a,outline:i}}return e.scale&&(a.scale.x=e.scale[0]||e.scale.x,a.scale.y=e.scale[1]||e.scale.y,a.scale.z=e.scale[2]||e.scale.z,a.updateMatrix()),n.geometry=null,{building:a}}}We.prototype.isWater=!0;class Xe extends t.InstancedMesh{constructor(e,t,n){super(e,t,n),this.unused=new Array(n).map((e,t)=>t),this.used=[]}setPosition(e,t){const n=this.used.indexOf(e);t=re(t),n<0&&this.take(e);const i=this.getMatrixAt(e).setPosition(t);this.setMatrixAt(e,i),this.instanceMatrix.needsUpdate=!0}setColor(e,t){const n=this.used.indexOf(e);t=ae(t),n<0&&this.take(e);const i=this.geometry.getAttribute("instanceColor");i&&(i.setXYZ(e,t.r,t.g,t.b),i.needsUpdate=!0)}take(e){const t=this.unused.indexOf(e);return t>-1&&(this.used.push(e),this.unused.splice(t,1),!0)}release(e){const n=this.used.indexOf(e);return n>-1&&(this.used.splice(n,1),this.setMatrixAt(e,new t.Matrix4),this.unused.push(e),!0)}}r.defs("EPSG:4326","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs");class Qe{constructor(){}static transformUTMToWGS84(e,t){e instanceof Array&&(e={x:e[0],y:e[1]});const n=`+proj=utm +zone= ${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs `;return Qe.transformPosition(e,n,"EPSG:4326")}static transformWGS84ToUTM(e){e instanceof Array&&(e={x:e[0],y:e[1]});const t=`+proj=utm +zone= ${function(e,t){let n=0;return n=e>=0?Math.floor(e/6)+31:Math.ceil(30+e/6),n}(e.x,e.y)} +ellps=WGS84 +datum=WGS84 +units=m +no_defs `;return Qe.transformPosition(e,"EPSG:4326",t)}static transformPosition(e,n,i){let o=null;return o=e instanceof Array?r(n,i).forward(e,e):r(n,i).forward([e.x,e.y]),new t.Vector3(o[0],o[1],e.z?e.z:0)}static transformPositions(e,t,n){const i=[];for(let r=0,o=e.length;r<o;r++)i.push(Qe.transformPosition(e[r],t,n));return i}static addTrafficLights(e){var n=new t.Group;for(let t=0;t<e.length;t++)for(let i=0;i<e[t].lampIds.length;i++){const r=new ee({name:e[t].lampIds[i].lampId,text:"15",imgUrl:"./img/left-green.png"}),o=parseFloat(e[t].poleLon),a=parseFloat(e[t].poleLat);r.position.set(o,a,3),r.sprite.center.x=0===i?0:1.5*i,n.add(r)}return n}static triangulateShape(e,t=[]){const n=[],i=[];se(e),Ke(n,e);let r=e.length;t.forEach(se);for(var a=0;a<t.length;a++)i.push(r),r+=t[a].length,Ke(n,t[a]);return o.Earcut.triangulate(n,i)}static computeTransformedBoundingBox(e,n){const i=[new t.Vector3(e.min.x,e.min.y,e.min.z).applyMatrix4(n),new t.Vector3(e.min.x,e.min.y,e.min.z).applyMatrix4(n),new t.Vector3(e.max.x,e.min.y,e.min.z).applyMatrix4(n),new t.Vector3(e.min.x,e.max.y,e.min.z).applyMatrix4(n),new t.Vector3(e.min.x,e.min.y,e.max.z).applyMatrix4(n),new t.Vector3(e.min.x,e.max.y,e.max.z).applyMatrix4(n),new t.Vector3(e.max.x,e.max.y,e.min.z).applyMatrix4(n),new t.Vector3(e.max.x,e.min.y,e.max.z).applyMatrix4(n),new t.Vector3(e.max.x,e.max.y,e.max.z).applyMatrix4(n)],r=new t.Box3;return r.setFromPoints(i),r}static mouseToRay(e,n,i,r){const o={x:e.x/i*2-1,y:-e.y/r*2+1},a=new t.Vector3(o.x,o.y,.5),s=n.position.clone();a.unproject(n);const l=(new t.Vector3).subVectors(a,s).normalize();return new t.Ray(s,l)}static getScaleByDepth(e,t,n){const i=e.getWorldPosition(),r=t.scene.getActiveCamera(),o=t.area.clientWidth,a=t.area.clientHeight;let s=i.distanceTo(r.position);return n/Qe.projectedRadius(1,r,s,o,a)}static projectedRadius(e,n,i,r,o){if(n instanceof t.OrthographicCamera)return Qe.projectedRadiusOrtho(e,n.projectionMatrix,r,o);if(n instanceof t.PerspectiveCamera)return Qe.projectedRadiusPerspective(e,n.fov*Math.PI/180,i,o);throw new Error("invalid parameters")}static computeAzimuth(e,t,n){let i=0;if(n){let o;n.includes("EPSG")?o=r(n,"WGS84"):(r.defs("scene",n),o=r("scene","WGS84"));const a=o.forward(e.toArray()),s=o.forward(t.toArray()),l=[s[0]-a[0],s[1]-a[1]];i=Math.atan2(l[1],l[0])-Math.PI/2}else{const n=[t.x-e.x,t.y-e.y];i=Math.atan2(n[1],n[0])-Math.PI/2}return i=-i,i}static projectedRadiusPerspective(e,t,n,i){let r=1/Math.tan(t/2)/n;return r=r*i/2,e*r}static projectedRadiusOrtho(e,n,i,r){let o=new t.Vector4(0),a=new t.Vector4(e);return o.applyMatrix4(n),a.applyMatrix4(n),o=new t.Vector3(o.x,o.y,o.z),a=new t.Vector3(a.x,a.y,a.z),o.x=.5*(o.x+1)*i,o.y=.5*(o.y+1)*r,a.x=.5*(a.x+1)*i,a.y=.5*(a.y+1)*r,o.distanceTo(a)}static degreeToRadian(e){const t=e*Math.PI/180;return Qe.clampRadian(t)}static radianTodegree(e){return 180*Qe.clampRadian(e)/Math.PI}static clampRadian(e){const t=2*Math.PI;for(;e>Math.PI||e<-Math.PI;)e>Math.PI&&(e-=t),e<-Math.PI&&(e+=t);return e}static densityPoint(e={},n={},i=1,r=5){const{x:o,y:a}=function(e,t,n={x:0,y:0},i=1){let r=0,o=0;t=Qe.degreeToRadian(t);const a=-e*Math.sin(t),s=e*Math.cos(t);return r=2*(n.x-a*i)/(i*i),o=2*(n.y-s*i)/(i*i),{x:r,y:o}}(e.speed,e.heading,{x:n.position.x-e.position.x,y:n.position.y-e.position.y},i),s=-e.speed*Math.sin(Qe.degreeToRadian(e.heading)),l=e.speed*Math.cos(Qe.degreeToRadian(e.heading)),c=(n.position.z-e.position.z)/i;let u=n.heading-e.heading;u>180?u=360-u:u<-180&&(u=360+u);const h=u/i;let d=[];d.push({position:e.position,heading:e.heading});const f=i/(r+1);for(let n=0;n<r;n++){const i=new t.Vector3,r=f*(n+1),u=s*r+.5*o*r*r;i.x=e.position.x+u;const p=l*r+.5*a*r*r;i.y=e.position.y+p,i.z=e.position.z+c*r;const m=e.heading+h*r;d.push({position:i,heading:m})}return d.push({position:n.position,heading:n.heading}),d}static getCameraByTargetAndView(e,n,i={}){i.yaw||(i.yaw=0),i.pitch||(i.pitch=-Math.PI/2),i.radius||(i.radius=1);const r=e.scene.cameraP.clone();let o;if(r.rotation.copy(e.scene.cameraP.rotation),r.rotation.order="ZXY",r.rotation.x=Math.PI/2+i.pitch,r.rotation.z=i.yaw,r.updateMatrix(),r.updateMatrixWorld(),n instanceof t.Object3D){let e;o=n.getWorldPosition(),e=n.boundingSphere?n.boundingSphere:n.geometry&&n.geometry.boundingSphere?n.geometry.boundingSphere:n.boundingBox.getBoundingSphere(new t.Sphere),i.radius=e.radius,o=e.center}else if(n instanceof t.Vector3)o=n.clone();else{if(!(n instanceof Array))return null;o=new t.Vector3(n[0],n[1],n[2]||0)}const a=r.getWorldDirection(new t.Vector3).multiplyScalar(-i.radius);return r.position.copy(o.add(a)),r}static moveTo(e,n,i,r=500,o=!0){const a=e.view,s=e.getActiveCamera();n=re(n),o&&e.rtcPoint&&n.sub(e.rtcPoint);const l=Y.Easing.Quartic.Out;{const e=new Y.Tween(a.position).to(n,r);e.easing(l),e.start()}{const e=s.position.distanceTo(i),n=(new t.Vector3).addVectors(s.position,s.getWorldDirection(new t.Vector3).clone().multiplyScalar(e)),o=new Y.Tween(n).to(i,r);o.easing(l),o.onUpdate(()=>{a.lookAt(n)}),o.onComplete(()=>{a.lookAt(n)}),o.start()}}static animateTo(e,n,i,r,o=!1,a=500,s,l=!0){const c=e.view;n=re(n),l&&e.rtcPoint&&n.sub(e.rtcPoint);const u=c.position.clone(),h=new t.Vector3;if(o){h.x=.5*(u.x+n.x),h.y=.5*(u.y+n.y);const e=.5*(u.z+n.z);h.z=e;const t=u.distanceTo(n);h.add(c.direction.normalize().multiplyScalar(-t))}else{h.x=.5*(u.x+n.x),h.y=.5*(u.y+n.y);const e=.5*(u.z+n.z);h.z=e,h.add(c.direction.normalize().multiplyScalar(-100))}const d=c.yaw,f=c.pitch,p=d+Je(d,i),m=f+Je(f,r);{let t=new ne([u,h,n]),[i,r,o]=[0,t.getLength(),1e3*t.getLength()/a];return t.animate(i,r,o,e=>{c.position.copy(t.spline.getPoint(e)),c.yaw=d*(1-e)+p*e,c.pitch=f*(1-e)+m*e},()=>{e.rtcPoint&&c.updateRealPosition();const t=e.getBoundingBox().getCenter();c.radius=(c.position.z-t.z)/Math.abs(Math.sin(c.pitch)),s&&s()})}}static createBackgroundTexture(e,n){function i(e,t){return 1/(2*Math.PI)*Math.exp(-(e*e+t*t)/2)}const r=new Uint8Array(e*n*3),o=[.3,1.7,2.8],a=i(0,0);for(let t=0;t<e;t++)for(let s=0;s<n;s++){const l=t+e*s,c=i(2*(t/e*2-1),2*(s/n*2-1))/a;let u=(Math.random()+Math.random()+Math.random())/3;u=(.5*c+.5)*u*.03,u*=.4,r[3*l+0]=255*(c/15+.05+u)*o[0],r[3*l+1]=255*(c/15+.05+u)*o[1],r[3*l+2]=255*(c/15+.05+u)*o[2]}const s=new t.DataTexture(r,e,n,t.RGBFormat);return s.needsUpdate=!0,s}static loadGLTFModel(e,i){(new n.GLTFLoader).load(e,(function(e){const n=[];e.scene.traverse((function(e){(e.isMesh||e.isPoints||e.isLine)&&(e.material=new t.MeshPhysicalMaterial({color:e.material.color,map:e.material.map}),e.rotateOnAxis(new t.Vector3(1,0,0),.5*Math.PI),n.push(e))})),i(n)}),(function(e){const t=e.loaded/e.total*100;t%10<.1&&console.log(t+"% loaded")}),(function(t){console.log("An error happened",t,e)}))}static getInstancedModelByUrl(e,n=2e3,i=!1,r=null){Qe.loadGLTFModel(e,(function(e){e.length>1&&(e=e[0]);const o=[];for(let t=0;t<n;t++)o.push(e.material.color.r,e.material.color.g,e.material.color.b);e.geometry.setAttribute("instanceColor",new t.InstancedBufferAttribute(new Float32Array(o),3));const a=["attribute vec3 instanceColor;","varying vec3 vInstanceColor;","#include <common>"].join("\n"),s=["#include <begin_vertex>","\tvInstanceColor = instanceColor;"].join("\n"),l=["varying vec3 vInstanceColor;","#include <common>"].join("\n"),c=["vec4 diffuseColor = vec4( diffuse * vInstanceColor, opacity );"].join("\n");e.material.onBeforeCompile=function(e){e.vertexShader=e.vertexShader.replace("#include <common>",a).replace("#include <begin_vertex>",s),e.fragmentShader=e.fragmentShader.replace("#include <common>",l).replace("vec4 diffuseColor = vec4( diffuse, opacity );",c)};const u=new Xe(e.geometry,e.material,n);i&&u.instanceMatrix.setUsage(t.DynamicDrawUsage),geometry.computeVertexNormals();for(let t=0;t<n;t++){const n=e.matrix.clone();u.setMatrixAt(t,n)}r&&r(u)}))}static loadDynamicGLTFModel(e,i){(new n.GLTFLoader).load(e,(function(e){e.scene.rotateOnAxis(new t.Vector3(1,0,0),.5*Math.PI),i(e)}),(function(e){const t=e.loaded/e.total*100;t%10<.1&&console.log(t+"% loaded")}),(function(t){console.log("An error happened",t,e)}))}static getSkybox(e=10,t=6e4){const n=new i.Sky;n.name="sky",n.scale.setScalar(t);const r=Qe.computeSkyFactor(e,Math.min(.5*t,8e4)),o=n.material.uniforms;return o.turbidity.value=r.turbidity,o.rayleigh.value=r.rayleigh,o.mieCoefficient.value=r.mieCoefficient,o.mieDirectionalG.value=r.mieDirectionalG,o.up.value=r.up,o.sunPosition.value.copy(r.sunPosition),n.material.needsUpdate=!0,n}static computeSkyFactor(e,n=8e4){const i={turbidity:10,rayleigh:.2,mieCoefficient:.012,mieDirectionalG:.73,luminance:.98,inclination:.1,azimuth:.02,up:new t.Vector3(0,0,1),sunPosition:new t.Vector3(0,0,0)},r=(e-5)/15;i.inclination=r,i.azimuth=r;const o=Math.PI*i.inclination,a=Math.PI*(i.azimuth-.5);return i.sunPosition.x=n*Math.sin(a)*Math.cos(o),i.sunPosition.y=-n+n*Math.sin(a)*Math.sin(o),i.sunPosition.z=n*Math.cos(a),i.turbidity=t.MathUtils.clamp(20*Math.abs(r-.5),2,12),i.rayleigh=t.MathUtils.clamp(3-6*Math.abs(r-.5),.01,3),i.luminance=t.MathUtils.clamp(.6*Math.abs(r-.5),.1,.6),i.mieCoefficient=t.MathUtils.clamp(.08+.08*(r-.5),.02,.08),i.mieDirectionalG=t.MathUtils.clamp(1+1*(r-.5),.2,.7),i}static getWorldPositionByMouse(e,n,i,r=!1){const o={x:e.x/i.renderer.domElement.clientWidth*2-1,y:-e.y/i.renderer.domElement.clientHeight*2+1};return r&&i.scene.rtcPoint?new t.Vector3(o.x,o.y,.5).unproject(n.clone()).add(i.scene.rtcPoint):new t.Vector3(o.x,o.y,.5).unproject(n.clone())}static getMouseObjectIntersection(e,n,i,r,o={}){const a=i.renderer,s={x:e.x/a.domElement.clientWidth*2-1,y:-e.y/a.domElement.clientHeight*2+1},l={};o.pickClipped&&(l.pickClipped=o.pickClipped),l.x=e.x,l.y=a.domElement.clientHeight-e.y;const c=new t.Raycaster;c.setFromCamera(s,n);let u=1/0,h=null,d=null;for(let e=0,t=r.length;e<t;e++){let t=c.intersectObject(r[e],!0);if(t.length>0)for(let n=0;n<t.length;n++)t[n].distance<u&&(u=t[n].distance,h=r[e],d=t[n].point)}return h?o._isRealPosition_&&i.scene.rtcPoint?{location:d.add(i.scene.rtcPoint),object:h,distance:u,point:d.add(i.scene.rtcPoint)}:{location:d,object:h,distance:u,point:d}:null}static json2building(e,t={}){if(e.length,!(e.length<1))return $e(t,function(e,t){const n=[],i=[],r=[],o=[];for(let t=0;t<e.length;t++){const n=e[t];o.push(fe(n)?ye(n):n.boundingBox.getCenter())}const a=Ee(o);let s=0,l=0,c=0;for(let o=0;o<e.length;o++){const u=e[o];let h=t.height||1;h=fe(u)&&u.properties.height?u.properties.height:h;const d=Se(u,h,a,{needsOutline:t.outline,top:t.top,bottom:t.bottom,side:t.side});t.outline&&(i.push({position:d.outline}),delete d.outline),n.push(d);const{position:f,normal:p,uv:m,indices:v}=d,g=f.length/3,y=p.length/3,b=m.length/2;r[o]={position:{count:g,start:s,end:s+3*g},normal:{count:y,start:l,end:l+3*y},uv:{count:b,start:c,end:c+2*b},hide:!1},s+=3*g,l+=3*y,c+=2*b}return{geometry:Le(n),center:a,lineGeometry:Le(i)}}(e,t),!1)}static json2fence(e,n={}){if(e.length,!(e.length<1))return Ye(n,function(e,n){const i=[],r=[];for(let t=0;t<e.length;t++){const n=e[t];r.push(pe(n)?ye(n):n.boundingBox.getCenter())}const o=Ee(r);let a;for(let r=0;r<e.length;r++){const s=Me(e[r],n.depth,o,{topColor:ae(n.topColor),bottomColor:ae(n.bottomColor)});a?a.union(new t.Box3(s.min,s.max)):a=new t.Box3(s.min,s.max);const{position:l,color:c,indices:u,normal:h,uv:d}=s;i.push({position:l,color:c,indices:u,normal:h,uv:d})}return a.min.x+=o.x,a.min.y+=o.y,a.max.x+=o.x,a.max.y+=o.y,{geometry:Le(i),center:o,boundingBox:a}}(e,n),!1)}static json2point(e,n={}){if(e&&!(e.length<1))return function(e,n,i){if(n.position||n.geometry){const r=function(e){return Fe(e),new t.PointsMaterial({color:e.color,opacity:e.opacity,transparent:e.opacity,depthWrite:e.opacity>=1,map:e.texture,size:e.size})}(e),o=new t.BufferGeometry;i&&(n.geometry.attributes?o.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.attributes.position),3)):o.setAttribute("position",new t.BufferAttribute(new Float32Array(n.geometry.position),3)));const a=new t.Points(n.geometry,r);return a.position.x=n.center.x+e.offset.x,a.position.y=n.center.y+e.offset.y,a.position.z=e.offset.z,a.boundingBox=i?new t.Box3(n.min,n.max):n.boundingBox,a.matrixAutoUpdate=!1,a.updateMatrix(),a}}(n,function(e){const n=[],i=[];for(let t=0;t<e.length;t++){const n=e[t];i.push(me(n)?ye(n):n.geometry.coordinates)}const r=Ee(i);let o;for(let i=0;i<e.length;i++){const a=Ie(e[i].geometry.coordinates,r);n.push(a[0],a[1],a[2]),o?o.expandByPoint((new t.Vector3).fromArray(a)):o=new t.Box3((new t.Vector3).fromArray(a),(new t.Vector3).fromArray(a))}if(n.length<1)return{geometry:null,center:r,boundingBox:o};const a=new t.BufferGeometry;return a.setAttribute("position",new t.BufferAttribute(new Float32Array(n),3)),{geometry:a,center:r,boundingBox:o}}(e))}static json2line(e,n={},i){if(e.length,!(e.length<1))return qe(n,function(e,n){const i=[],r=[];for(let t=0;t<e.length;t++){const n=e[t];if(r.push(pe(n)?ye(n):n.boundingBox.getCenter()),ve(n)){const i=xe(n);if(e.splice(t,1),i.length)for(let n=0;n<i.length;n++)e.splice(t-1,0,i[n])}}const o=Ee(r);let a;for(let r=0;r<e.length;r++){const s=Pe(e[r],o,n);a?a.union(new t.Box3(s.min,s.max)):a=new t.Box3(s.min,s.max),i.push({position:s.position})}return{geometry:Le(i),center:o,boundingBox:a}}(e,i),!1)}static json2polygon(e,n={}){if(e&&!(e.length<1))return Ye(n,function(e){const n=[],i=[],r=[];for(let t=0;t<e.length;t++){const n=e[t];if(r.push(fe(n)?ye(n):n.boundingBox.getCenter()),ve(n)){const i=xe(n);if(e.splice(t,1),i.length)for(let n=0;n<i.length;n++)e.splice(t-1,0,i[n])}}const o=Ee(r);let a,s=0,l=0,c=0;for(let r=0;r<e.length;r++){const u=e[r];if(ve(u))continue;const h=De(u,o);a?a.union(new t.Box3(h.min,h.max)):a=new t.Box3(h.min,h.max);const{position:d,normal:f,uv:p,indices:m}=h;n.push({position:d,normal:f,uv:p,indices:m});const v=d.length/3,g=f.length/3,y=p.length/2;i[r]={position:{count:v,start:s,end:s+3*v},normal:{count:g,start:l,end:l+3*g},uv:{count:y,start:c,end:c+2*y},hide:!1},s+=3*v,l+=3*g,c+=2*y}return{geometry:Le(n),boundingBox:a,center:o}}(e),!1)}static turnOnWeather(e,n,i){if(!e||!n)return!1;switch(n){case"rain":e.vRenderer&&e.vRenderer.finalComposer&&(e.vRenderer.finalComposer.addPass(new $({bloomComposer:e.vRenderer.finalComposer})),e.vRenderer.rain=!0);break;case"snow":e.vRenderer&&e.vRenderer.finalComposer&&(e.vRenderer.finalComposer.addPass(new X({bloomComposer:e.vRenderer.finalComposer})),e.vRenderer.snow=!0);break;case"fog":e.vRenderer&&e.vRenderer.finalComposer&&(e.scene.scene.fog=new t.Fog("#434343",100,1e3),e.fog=!0)}}static turnOffWeather(e,t){if(!e||!t)return!1;switch(t){case"rain":if(e.vRenderer&&e.vRenderer.finalComposer&&(e.vRenderer.finalComposer.passes.length,e.vRenderer.rain)){const t=e.vRenderer.finalComposer.passes.findIndex(e=>"RainPass"===e.name);t>-1&&(e.vRenderer.finalComposer.passes.splice(t,1),e.vRenderer.rain=!1)}break;case"snow":if(e.vRenderer&&e.vRenderer.finalComposer&&(e.vRenderer.finalComposer.passes.length,e.vRenderer.snow)){const t=e.vRenderer.finalComposer.passes.findIndex(e=>"SnowPass"===e.name);t>-1&&(e.vRenderer.finalComposer.passes.splice(t,1),e.vRenderer.snow=!1)}break;case"fog":if(e.vRenderer&&e.vRenderer.finalComposer&&e.vRenderer.fog){const t=e.vRenderer.finalComposer.passes.findIndex(e=>"Fog2Pass"===e.name);t>-1&&(e.vRenderer.finalComposer.passes.splice(t,1),e.vRenderer.fog=!1)}e.fog=!1}}static getNameByUrl(e){const t=e.lastIndexOf("/"),n=e.slice(t+1),i=n.lastIndexOf("."),r=n.slice(i+1);return{name:n.slice(0,i),fileType:r}}static computeTopLevelHeight(e,t){if(e&&e.spacing){const n=e.spacing,i=e.minimumTilePixelSize/(.707*n);return.5*t.area.clientHeight/(i*Math.tan(t.fov*Math.PI/360))}return!1}static randomValue(e,t){return e+(t-e)*Math.random()}static randomVector3(e,n){const i=new t.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5);return(new t.Vector3).addVectors(e,(new t.Vector3).multiplyVectors(n,i))}static addLight(e){let n=new t.Group;const i=new t.Mesh(new t.PlaneGeometry(2,11),new t.MeshPhongMaterial({side:t.DoubleSide,transparent:!0,opacity:.3,color:"#fff",depthTest:!1,alphaMap:(new t.TextureLoader).load(e)}));i.name="plane",i.position.z=-.01,i.rotation.x=t.Math.degToRad(15),n.add(i);let r=i.clone();r.rotation.x=t.Math.degToRad(60),n.add(r);let o=i.clone();o.rotation.x=t.Math.degToRad(120),n.add(o);const a=new t.Mesh(new t.PlaneGeometry(1.8,.3),new t.MeshPhongMaterial({color:"#fff",side:t.DoubleSide,transparent:!0,depthTest:!1,opacity:1,emissive:"#fff"}));a.name="plane",a.layers.enable(1),n.add(a);let s=a.clone();return s.layers.enable(1),s.rotation.x=t.Math.degToRad(90),n.add(s),n}static addRadarScan(e){const n=new t.Group,i=new t.Mesh(new t.CylinderBufferGeometry(24,24,15,32,3,!0,0,.6667*Math.PI),new t.MeshPhongMaterial({color:"#0025FF",transparent:!0,side:t.DoubleSide,alphaMap:(new t.TextureLoader).load(e)}));i.position.set(0,0,2.5),i.rotation.x=.5*-Math.PI,i.layers.enable(1),n.add(i);const r=new t.Mesh(new t.CylinderBufferGeometry(24,24,.2,32,3,!0,0,.6667*Math.PI),new t.MeshPhongMaterial({color:"#0025FF",side:t.DoubleSide}));return r.position.set(0,0,.3),r.rotation.x=.5*-Math.PI,r.layers.enable(1),n.add(r),n}static createCameraScanArea(e,n,i={xRadius:24,yRadius:18,meshColor:3291359,lineColor:1182124,opacity:1,alphaMap:null}){if(!e||!n)return null;const r=(new t.Vector3).subVectors(n,e),o=new t.Group,a=new t.EllipseCurve(0,0,i.xRadius,i.yRadius,0,2*Math.PI,!1,0).getPoints(12),s=[],l=[];s.push(0,0,0),l.push(.5,1);const c=[],u=[],h=[];for(let t=0;t<a.length-1;t++)s.push(a[t].x+r.x,a[t].y+r.y,n.z-e.z),s.push(a[t+1].x+r.x,a[t+1].y+r.y,n.z-e.z),l.push(t/(a.length-1),(t+1)/(a.length-1)),c.push(0,2*t+1,2*t+2),h.push(a[t].x+r.x,a[t].y+r.y,n.z-e.z),h.push(a[t+1].x+r.x,a[t+1].y+r.y,n.z-e.z),u.push(2*t,2*t+1);const d=new t.BufferGeometry;d.setAttribute("position",new t.Float32BufferAttribute(s,3)),d.setAttribute("uv",new t.Float32BufferAttribute(l,2)),d.setIndex(c);const f=new t.BufferGeometry;f.setAttribute("position",new t.Float32BufferAttribute(s,3)),f.setIndex(u);let p=null;i.alphaMap&&(p=(new t.TextureLoader).load(i.alphaMap));const m=new t.MeshBasicMaterial({color:i.meshColor,opacity:i.opacity,transparent:!0,alphaMap:p,depthTest:!1}),v=new t.Line(d,new t.LineBasicMaterial({color:i.lineColor})),g=new t.Mesh(d,m);g.layers.enable(1);const y=new t.Line(f,new t.LineBasicMaterial({color:i.lineColor}));return o.add(g),o.add(v),o.add(y),o.add(y.scale.set(.75,.75,.75)),o.add(y.clone().scale.set(.5,.5,.5)),o.position.set(e.x,e.y,e.z),o}static createCarScanArea(e,n,i,r,o){const a=new t.Group,s=new t.TextureLoader,l=s.load(i),c=s.load(r),u=s.load(o),h=new t.Mesh(new t.PlaneBufferGeometry(e,n),new t.MeshPhongMaterial({map:c,transparent:!0,blending:t.CustomBlending,depthWrite:!1,depthTest:!0})),d=new t.Mesh(new t.PlaneBufferGeometry(1.6*e,1.6*n),new t.MeshPhongMaterial({map:l,transparent:!0,blending:t.CustomBlending,depthWrite:!1,depthTest:!0})),f=new t.Mesh(new t.PlaneBufferGeometry(1.3*e,1.3*n),new t.MeshPhongMaterial({map:u,transparent:!0,blending:t.CustomBlending,depthWrite:!1,depthTest:!0}));return h.position.z=.2,f.position.z=.1,f.rotation.z=.157*Math.PI,h.update=function(){this.rotation.z+=.01},d.update=function(){this.rotation.z-=.01},a.add(h),a.add(d),a.add(f),a}static createFence(e,n){let i={time:{value:0},repeat:{type:"v2",value:new t.Vector2(1,2)},texture:{value:(new t.TextureLoader).load(n.imgUrl1)},repeat2:{type:"v2",value:new t.Vector2(1,1)},texture2:{value:(new t.TextureLoader).load(n.imgUrl2)},fogColor:t.UniformsLib.fog.fogColor,fogNear:t.UniformsLib.fog.fogNear,fogFar:t.UniformsLib.fog.fogFar,fogDensity:t.UniformsLib.fog.fogDensity},r={height:n.height||80,material:new t.ShaderMaterial({uniforms:i,vertexShader:"\n\n                varying vec2 vUv;\n                varying vec3 vPosition;\n                #include <fog_pars_vertex>\n                void main()\n                {\n                    vUv = uv;\n                    vPosition=position;\n                    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n                    gl_Position = projectionMatrix * mvPosition;\n                    #include <fog_vertex>\n                }\n                ",fragmentShader:"\n\n                uniform float time;\n                varying vec2 vUv;\n                uniform sampler2D texture;\n                uniform vec2 repeat;\n                #ifdef TEXTURE2\n                    uniform sampler2D texture2;\n                    uniform vec2 repeat2;\n                #endif\n                varying vec3 vPosition;\n                #include <fog_pars_fragment>\n                void main( void ) {\n                    vec2 position = vUv;\n                    vec4 colora = texture2D(texture,vec2(fract(vUv.x*repeat.x),fract(vUv.y-time)));\n\n                 gl_FragColor =colora;\n\n                 #ifdef TEXTURE2\n                 vec4 colorb = texture2D(texture2,vec2(vUv.x,vUv.y+0.001)/repeat2);\n                 gl_FragColor =vec4(colorb+colorb*colora);\n                 #endif\n                 #include <fog_fragment>\n                 #include <premultiplied_alpha_fragment>\n                }\n                ",blending:t.AdditiveBlending,transparent:!0,depthTest:n.depthTest||!0,depthWrite:!1,side:t.DoubleSide,fog:n.fog||!0})};n.imgUrl2&&(r.material.defines.TEXTURE2=!0);let o=new t.Group;for(let t=0;t<e.length;t++){let i=null;t==e.length-1?i=this.createPlane2Points(e[t],e[0],r):(r.material.uniforms.time.value=5*t,i=this.createPlane2Points(e[t],e[t+1],r)),i.update=function(){this.material.uniforms.time.value+=5e-4*t},n.isBloom&&i.layers.enable(1),o.add(i)}return o}static createPlane2Points(e,n,i){let r=new t.PlaneGeometry(1,1);r.verticesNeedUpdate=!0;let o=[new t.Vector3(e.x,e.y+i.height,e.z),new t.Vector3(n.x,n.y+i.height,n.z),e,n];return r.setFromPoints(o),new t.Mesh(r,i.material)}}function Ke(e,n){let i=!1;n&&(n[0]instanceof t.Vector3||n[0]instanceof t.Vector2)&&(i=!0);for(var r=0;r<n.length;r++)i?(e.push(n[r].x),e.push(n[r].y)):(e.push(n[r][0]),e.push(n[r][1]))}function Je(e,t){const n=Qe.clampRadian(e);let i=Qe.clampRadian(t)-n;return i>Math.PI?i-=2*Math.PI:i<=-Math.PI&&(i+=2*Math.PI),i}class Ze extends t.Object3D{constructor(e,n={}){super();const i=new t.Texture;i.minFilter=t.NearestFilter,i.magFilter=t.NearestFilter;const r=new t.SpriteMaterial({opacity:n.opacity||1,map:i,depthTest:!0,transparent:n.transparent||!1,depthWrite:!0,sizeAttenuation:!1,fog:n.fog||!0});r.alphaTest=.1,this.renderOrder=1,this.texture=i,this.material=r,this.center=ie(n.center),this.sprite=new t.Sprite(this.material),this.sprite.center.copy(this.center),this.add(this.sprite),this.borderThickness=n.borderThickness||4,this.fontface=n.fontface||"Arial",this.fontsize=n.fontsize||28,this.drawRoundRect=n.drawRoundRect||!1,this.borderColor=n.borderColor||{r:255,g:255,b:255,a:1},this.backgroundColor=n.backgroundColor||{r:37,g:37,b:37,a:1},this.textColor=n.textColor||{r:255,g:255,b:255,a:1},this.drawStrokeStyle=n.drawStrokeStyle||!1,this.strokeStyle=n.strokeStyle||{r:0,g:0,b:0,a:1},this.text="",this._geometryType="label",this.setText(e)}setSize(e){this.fontsize!==e&&(this.fontsize=e,this.update())}setText(e){this.text!==e&&(this.text=e,this.update())}setPosition(e){e instanceof Array?(this.position.x=e[0]?e[0]:this.position.x,this.position.y=e[1]?e[1]:this.position.y,this.position.z=e[2]?e[2]:this.position.z):(this.position.x=e.x?e.x:this.position.x,this.position.y=e.y?e.y:this.position.y,this.position.z=e.z?e.z:this.position.z)}setTextColor(e){this.textColor.r=255*e.r,this.textColor.g=255*e.g,this.textColor.b=255*e.b,this.update()}setBorderColor(e){this.borderColor.r=255*e.r,this.borderColor.g=255*e.g,this.borderColor.b=255*e.b,this.update()}setBackgroundColor(e){this.backgroundColor.r=255*e.r,this.backgroundColor.g=255*e.g,this.backgroundColor.b=255*e.b,this.update()}update(){const e=document.createElement("canvas"),n=e.getContext("2d");n.font="Bold "+3*this.fontsize+"px "+this.fontface;const i=3*n.measureText(this.text).width,r=30+i+2*this.borderThickness*3,o=3*this.fontsize*1.4+2*this.borderThickness*3;n.canvas.width=r,n.canvas.height=o,n.font="Bold "+3*this.fontsize+"px "+this.fontface;const{r:a,g:s,b:l,a:c}=this.backgroundColor;if(n.fillStyle="rgba("+a+","+s+","+l+","+c+")",this.drawRoundRect){const{r:e,g:t,b:r,a:o}=this.borderColor;n.strokeStyle="rgba("+e+","+t+","+r+","+o+")",n.lineWidth=3*this.borderThickness,this.roundRect(n,this.borderThickness/2,this.borderThickness/2,i+this.borderThickness+30,3*this.fontsize*1.4+this.borderThickness,6)}if(this.drawStrokeStyle){const{r:e,g:t,b:i,a:r}=this.strokeStyle;n.strokeStyle="rgba("+e+","+t+","+i+","+r+")",n.strokeText(this.text,3*(this.borderThickness+5),3*(this.fontsize+this.borderThickness))}const{r:u,g:h,b:d,a:f}=this.textColor;n.fillStyle="rgba("+u+","+h+","+d+","+f+")",n.fillText(this.text,3*(this.borderThickness+5),3*(this.fontsize+this.borderThickness));const p=new t.Texture(e);p.minFilter=t.NearestFilter,p.magFilter=t.NearestFilter,p.needsUpdate=!0,this.sprite.material.map=p,this.texture=p,this.sprite.scale.set(r/3*.001,o/3*.001,1)}roundRect(e,t,n,i,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}dispose(){this.texture&&this.texture.dispose&&this.texture.dispose(),this.texture=null,this.children=[],this.material&&(this.material.dispose(),this.material=null),this.sprite=null}}class et extends t.Object3D{constructor(e={}){super(),this._rotation=re(e.rotation),this._scale=e.scale||new t.Vector3(1,1,1),this.speed=e.speed||0,this.name=e.name||"",this.color=e.color?new t.Color(e.color):null,this.colorChangeable=void 0===e.colorChangeable||e.colorChangeable,this.opacity=e.opacity||null,e.modelType&&(this.modelType=e.modelType.toLowerCase()||"car"),this.modelUrl=e.modelUrl||null,this.models=[],this.text=e.text||null,this.labelOffset=re(e.labelOffset,1),this.label=null,this.loaded=!1,this.onLoad=e.onLoad||null,this.isLoadScene=e.isLoadScene||!1,this.isReceiveShadow=e.isReceiveShadow||!1,this.iScastShadow=e.iScastShadow||!1,this.isBloom=e.isBloom||!1,this.maps=e.maps||[],this.encoding=e.encoding||1,this.init()}init(){this.initModel(),this.initLabel(),this.renderOrder=3,this.rotation.set(this._rotation.x,this._rotation.y,this._rotation.z),this.scale.copy(re(this._scale))}initModel(){const e=this;if(e.modelType){const t=e.modelType.toUpperCase();if(U[t])this.loaded=!0,this.isLoadScene?this.setScene(U[t].scene):this.setModels(U[t]);else{if(!e.modelUrl)return void console.log("未使用给定的模型类型，需要输入modelUrl参数");const n=e.modelUrl||P+D[e.modelType];this.isLoadScene?Qe.loadDynamicGLTFModel(n,e=>{U[t]||(U[t]=e),this.loaded=!0,this.setScene(e.scene)}):Qe.loadGLTFModel(n,e=>{U[t]||(U[t]=e),this.loaded=!0,this.setModels(e)})}}else this.isLoadScene?Qe.loadDynamicGLTFModel(e.modelUrl,t=>{e.loaded=!0,this.setScene(t.scene)}):Qe.loadGLTFModel(e.modelUrl,t=>{e.loaded=!0,this.setModels(t)})}setScene(e){if(!e)return!1;const n=this,i=e.clone();i.traverse((function(e){if(e.updateMatrixWorld(),(e.isMesh||e.isLine||e.isPoints)&&(n.isBloom&&e.layers.enable(1),n.maps.length>0&&n.maps.forEach(n=>{e.name==="img"+n[0]&&(e.material.map=(new t.TextureLoader).load(n[1]),e.material.map.flipY=!1)}),e.receiveShadow=n.isReceiveShadow,e.castShadow=n.iScastShadow,n.setEncoding(e,n.encoding),e.material&&n.colorChangeable&&(e.material=e.material.clone()),e.material&&n.color&&e.material.color.copy(n.color),e.material&&n.opacity&&(e.material.transparent=e.material.transparent||n.opacity<1,e.material.opacity=n.opacity),e.geometry)){e.geometry.boundingBox||e.geometry.computeBoundingBox(),e.updateMatrixWorld();const t=Qe.computeTransformedBoundingBox(e.geometry.boundingBox,e.matrixWorld);n.boundingBox?n.boundingBox.union(t):n.boundingBox=t}})),n.add(i),n.loaded&&n.onLoad&&n.onLoad()}setModels(e){if(!e||e.length<1)return!1;for(let t=0;t<e.length;t++){const n=e[t].clone();if(n.receiveShadow=this.isReceiveShadow,n.castShadow=this.iScastShadow,this.isBloom&&n.layers.enable(1),n.material&&this.colorChangeable&&(n.material=e[t].material.clone()),n.material&&this.color&&(n.material.color=this.color),n.material&&this.opacity&&(n.material.transparent=n.material.transparent||this.opacity<1,n.material.opacity=this.opacity),this.setEncoding(n,this.encoding),n.geometry){n.geometry.boundingBox||n.geometry.computeBoundingBox(),n.updateMatrixWorld();const e=Qe.computeTransformedBoundingBox(n.geometry.boundingBox,n.matrixWorld);this.boundingBox?this.boundingBox.union(e):this.boundingBox=e}this.add(n)}this.loaded&&this.onLoad&&this.onLoad()}setEncoding(e,n){n>0&&(e.material.map&&(e.material.map.encoding=1===n?t.LinearEncoding:t.sRGBEncoding),e.material.emissiveMap&&(e.material.emissiveMap.encoding=1===n?t.LinearEncoding:t.sRGBEncoding))}initLabel(){this.text&&(this.label=new Ze(this.text),this.label.position.copy(this.labelOffset),this.add(this.label))}showLabel(){this.label&&(this.label.visible=!0)}hideLabel(){this.label&&(this.label.visible=!1)}setModelType(e){(e=e.toLowerCase())!==this.modelType&&(this.dispose(),this.modelType=e,this.initModel())}setText(e){e!==this.text&&(this.text=e,this.label?this.label.setText(e):this.initLabel())}setLabelOffset(e){e=re(e),this.labelOffset.copy(e),this.label&&this.label.position.copy(this.labelOffset)}setColor(e){if(e=ae(e),this.color){if(this.color.equals(e))return;this.color.copy(e)}else this.color=e;if(this.children&&this.children.length)for(let e=0;e<this.children.length;e++)this.children[e].material&&(this.children[e].material.color.copy(this.color),this.children[e].material.needsUpdate=!0)}setNameColor(e,t){if(t=ae(t),this.color){if(this.color.equals(t))return;this.color.copy(t)}else this.color=t;if(this.children&&this.children.length){const t=this.getObjectByName(e);t.material.color.copy(this.color),t.material.needsUpdate=!0}}setVisible(e){this.children&&this.children.length&&(this.visible=e),this.label&&(this.label.visible=e)}getBoundingBoxWorld(){if(this.updateMatrixWorld(!0),!this.boundingBox)for(let e=0;e<this.children.length;e++)this.children[e].geometry&&!this.children[e].geometry.boundingBox&&this.children[e].geometry.computeBoundingBox(),this.boundingBox?this.boundingBox.union(this.children[e].geometry.boundingBox):this.boundingBox=this.children[e].geometry.boundingBox;let e=this.boundingBox,t=this.matrixWorld;return Qe.computeTransformedBoundingBox(e,t)}raycast(e,n){const i=[];if(this.boundingBox){const n=new t.Box3;n.copy(this.boundingBox),n.applyMatrix4(this.matrixWorld);const r=e.ray.intersectsBox(n);if(!r)return;i.push({object:this,point:r,distance:e.ray.origin.distanceTo(r)})}for(let t=0;t<this.children.length;t++){const n=this.children[t];n.visible&&n.raycast(e,i)}for(let t=0;t<i.length;t++){const n=i[t];n.distance=e.ray.origin.distanceTo(n.point)}if(i.sort((e,t)=>e.distance-t.distance),i.length)return n.push({object:this,point:i[0].point,distance:i[0].distance,target:i[0].object}),[{object:this,point:i[0].point,distance:i[0].distance,target:i[0].object}]}dispose(){if(this.children&&this.children.length){for(let e=0;e<this.children.length;e++)(this.children[e].isMesh||this.children[e].isLine||this.children[e].isPoints||this.children[e].isSprite)&&this.colorChangeable&&this.children[e].material&&this.children[e].material.dispose(),this.children[e].dispose&&this.children[e].dispose(),this.children[e].children=[],this.remove(this.children[e]);this.children=[]}this.label&&this.label.dispose&&(this.label.dispose(),this.remove(this.label)),this.label=null}}class tt extends t.Object3D{constructor(e={}){super(),this._rotation=re(e.rotation),this._scale=e.scale||new t.Vector3(1,1,1),this.speed=e.speed||0,this.name=e.name||"",this.color=e.color?new t.Color(e.color):null,this.colorChangeable=void 0===e.colorChangeable||e.colorChangeable,this.opacity=e.opacity||null,e.modelType&&(this.modelType=e.modelType.toLowerCase()||"pedestrian"),this.modelUrl=e.modelUrl||null,this.models=[],this.text=e.text||null,this.labelOffset=re(e.labelOffset,1),this.label=null,this.loaded=!1,this.onLoad=e.onLoad||null,this.dynamicType=e.dynamicType||"dynamic",this.animations=null,this.mixer=null,this.boundingBoxHelper=e.boxHelper||!1,this.animationAction=[],this.encoding=e.encoding||1,this.init()}init(){this.initModel(),this.initLabel(),this.renderOrder=3,this.rotation.set(this._rotation.x,this._rotation.y,this._rotation.z),this.scale.copy(re(this._scale))}initModel(){const e=this;if(e.modelType){const t=e.modelType.toUpperCase();if(U[t])this.loaded=!0,this.setMeshs(this.dynamicType,U[t]);else{if(!e.modelUrl)return void console.log("未使用给定的模型类型，需要输入modelUrl参数");const n=e.modelUrl||P+D[e.modelType];Qe.loadDynamicGLTFModel(n,e=>{U[t]||(U[t]=e),this.loaded=!0,this.setMeshs(this.dynamicType,e)})}}else Qe.loadDynamicGLTFModel(e.modelUrl,t=>{e.loaded=!0,this.setMeshs(this.dynamicType,t)})}setMeshs(e,n){const i=this;let r=null;if(r="dynamic"===e?u.SkeletonUtils.clone(n.scene):n.scene.clone(),r.updateMatrixWorld(),r.traverse((function(e){if((e.isMesh||e.isLine||e.isPoints)&&(i.models.push(e),i.colorChangeable&&(e.material=e.material.clone()),e.material&&i.color&&e.material.color.copy(i.color),e.material&&i.opacity&&(e.material.transparent=e.material.transparent||i.opacity<1,e.material.opacity=i.opacity),i.setEncoding(e,i.encoding),e.geometry)){e.geometry.boundingBox||e.geometry.computeBoundingBox(),e.updateMatrixWorld();const t=Qe.computeTransformedBoundingBox(e.geometry.boundingBox,e.matrixWorld);i.boundingBox?i.boundingBox=i.boundingBox.union(t):i.boundingBox=t}})),this.animations=n.animations,null===this.mixer&&(this.mixer=new t.AnimationMixer(r)),"dynamic"===e)this.animations.forEach(e=>{i.mixer.clipAction(e).play()});else if(this.animations.length>0){for(let e=0;e<this.animations.length;e++)this.animationAction[e]=this.mixer.clipAction(this.animations[e]);this.animationAction[0].stop()}if(this.boundingBoxHelper){const e=Qe.computeTransformedBoundingBox(this.boundingBox,this.matrixWorld),n=new t.BoxBufferGeometry(e.max.x-e.min.x,e.max.y-e.min.y,e.max.z-e.min.z,1,1,1),i=new t.Mesh(n,new t.MeshBasicMaterial({color:"red",wireframe:!0}));this.add(i)}i.add(r),i.loaded&&i.onLoad&&i.onLoad(),i.loaded&&i.onLoadAnimations&&i.onLoadAnimations()}setEncoding(e,n){n>0&&(e.material.map&&(e.material.map.encoding=1===n?t.LinearEncoding:t.sRGBEncoding),e.material.emissiveMap&&(e.material.emissiveMap.encoding=1===n?t.LinearEncoding:t.sRGBEncoding))}stop(){"dynamic"===this.dynamicType&&this.animations.forEach(e=>{this.mixer.clipAction(e).stop()})}play(){"dynamic"===this.dynamicType&&this.animations.forEach(e=>{this.mixer.clipAction(e).play()})}initLabel(){this.text&&(this.label=new Ze(this.text),this.label.position.copy(this.labelOffset),this.add(this.label))}showLabel(){this.label&&(this.label.visible=!0)}hideLabel(){this.label&&(this.label.visible=!1)}setModelType(e){(e=e.toLowerCase())!==this.modelType&&(this.dispose(),this.modelType=e,this.initModel())}setText(e){e!==this.text&&(this.text=e,this.label?this.label.setText(e):this.initLabel())}setLabelOffset(e){e=re(e),this.labelOffset.copy(e),this.label&&this.label.position.copy(this.labelOffset)}setColor(e){if(e=ae(e),this.color){if(this.color.equals(e))return;this.color.copy(e)}else this.color=e;if(this.models&&this.models.length)for(let e=0;e<this.models.length;e++)this.models[e].material.color.copy(this.color),this.models[e].material.needsUpdate=!0}setVisible(e){this.models&&this.models.length&&(this.visible=e),this.label&&(this.label.visible=e)}getBoundingBoxWorld(){if(this.updateMatrixWorld(!0),!this.boundingBox)for(let e=0;e<this.models.length;e++)this.models[e].geometry.computeBoundingBox(),this.boundingBox?this.boundingBox.union(this.models[e].geometry.boundingBox):this.boundingBox=this.models[e].geometry.boundingBox.clone();let e=this.boundingBox,t=this.matrixWorld;return Qe.computeTransformedBoundingBox(e,t)}setFrameAction(e,n,i,r){this.animationAction.length>e&&(this.animationAction[e].stop(),this.animations.length>0&&(this.animationAction[e]=this.mixer.clipAction(t.AnimationUtils.subclip(this.animations[e],this.animations[e].name+e+n+i,n,i,r))),this.animationAction[e].setLoop(t.LoopOnce),this.animationAction[e].clampWhenFinished=!0,this.animationAction[e].enable=!0,this.animationAction[e].play())}raycast(e,n){const i=[];if(this.boundingBox){const n=new t.Box3;n.copy(this.boundingBox),this.updateMatrixWorld(),n.applyMatrix4(this.matrixWorld);const r=e.ray.intersectsBox(n);if(!r)return;i.push({object:this,point:r,distance:e.ray.origin.distanceTo(r)})}for(let t=0;t<this.children.length;t++){const n=this.children[t];n.visible&&n.raycast(e,i)}for(let t=0;t<i.length;t++){const n=i[t];n.distance=e.ray.origin.distanceTo(n.point)}if(i.sort((e,t)=>e.distance-t.distance),i.length)return n.push({object:this,point:i[0].point,distance:i[0].distance,target:i[0].object}),[{object:this,point:i[0].point,distance:i[0].distance,target:i[0].object}]}dispose(){if(this.children&&this.children.length){for(let e=0;e<this.children.length;e++)(this.children[e].isMesh||this.children[e].isSkinnedMesh||this.children[e].isLine||this.children[e].isPoints||this.children[e].isSprite)&&this.colorChangeable&&this.children[e].material&&this.children[e].material.dispose(),this.children[e].dispose&&this.children[e].dispose(),this.children[e]instanceof t.Skeleton&&(this.children[e].bones=[]),this.children[e].children=[],this.remove(this.children[e]);this.children=[]}this.label&&(this.label.dispose(),this.remove(this.label)),this.models=[],this.label=null,this.mixer&&(this.mixer.stopAllAction(),this.mixer.uncacheAction()),this.mixer=null,this.animations=null}}class nt extends t.EventDispatcher{constructor(e,t={}){super(),this.constructor.counter=void 0===this.constructor.counter?0:this.constructor.counter+1;const{name:n,type:i}=t||{};t.onMessage&&(this.onMessage=t.onMessage),this.name=t.name||this.counter,this.type=i,this.worker=new Worker(e),this.worker.onmessage=e=>{this.onMessage(e.data),this.dispatchEvent({type:"message",data:e,name:n})},this.worker.onerror=e=>{this.dispatchEvent({type:"error",error:e,name:n})}}postMessage(e,t){this.worker.postMessage(e,t)}terminate(){this.worker.terminate(),this.dispatchEvent({type:"cancelled",name:name})}onMessage(e){}}class it{constructor(e){this.previous=null,this.next=null,this.tile=e}}var rt=2e3,ot=6,at=0;const st=new t.Layers;st.set(H.BLOOM_SCENE);const lt=new t.MeshBasicMaterial({color:"black"}),ct=new t.LineBasicMaterial({color:"black"}),ut=new t.PointsMaterial({color:"black"}),ht=new t.SpriteMaterial({color:0}),dt=new class{constructor(){this.workerManager=new Map,this.workerSize=0}getWorkService(e){this.workerManager.has(e)||this.workerManager.set(e,[]);const t=this.workerManager.get(e);if(0===t.length){const n=new nt(e);t.push(n)}return t.pop()}addWorkService(e){if(!e||!e.url)return;const t=this.workerManager.get(e.url);t?t.push(e):this.workerManager.set(e.url,[e]),this.workerSize+=1}returnWorker(e,t){const n=this.workerManager.get(e);n.push(t),this.workerManager.set(e,n),this.workerSize+=1}removeWorkService(e){if(e&&!this.workerManager.has(e.url))return;const t=this.workerManager.get(e.url);for(let e=0;e<t.length;e++)t[e].terminate();this.workerManager.delete(e.url),this.workerSize-=t.length}},ft=new class{constructor(){this.oldest=null,this.newest=null,this.items={},this.elements=0,this.numGeometries=0}size(){return this.elements}contains(e){return null==this.items[e.id]}touch(e){if(!e.loaded)return;let t;null==this.items[e.id]?(t=new it(e),t.previous=this.newest,this.newest=t,null!==t.previous&&(t.previous.next=t),this.items[e.id]=t,this.elements++,null===this.oldest&&(this.oldest=t),this.numGeometries+=e.numGeometries):(t=this.items[e.id],null===t.previous?null!==t.next&&(this.oldest=t.next,this.oldest.previous=null,t.previous=this.newest,t.next=null,this.newest=t,t.previous.next=t):null===t.next||(t.previous.next=t.next,t.next.previous=t.previous,t.previous=this.newest,t.next=null,this.newest=t,t.previous.next=t))}remove(e){let t=this.items[e.id];t&&(1===this.elements?(this.oldest=null,this.newest=null):(t.previous||(this.oldest=t.next,this.oldest.previous=null),t.next||(this.newest=t.previous,this.newest.next=null),t.previous&&t.next&&(t.previous.next=t.next,t.next.previous=t.previous)),delete this.items[e.id],this.elements--,this.numGeometries-=e.numGeometries)}getLRUItem(){return null===this.oldest?null:this.oldest.tile}freeMemory(){if(this.elements<=1)return;const e=Ot();for(;this.numGeotries>e;){let e=this.oldest.tile;this.disposeDescendants(e)}}disposeDescendants(e){let t=[];for(t.push(e);t.length>0;){let e=t.pop();e.dispose(),this.remove(e);for(let n in e.childrenTile)e.childrenTile.hasOwnProperty(n)&&e.childrenTile[n].loaded&&t.push(e.childrenTile[n])}}};var pt=null,mt=null,vt=null;function gt(e){return!pt&&(pt=e,!0)}function yt(e){return!mt&&(mt=e,!0)}function bt(e){return!vt&&(vt=e,!0)}function xt(){return pt}function wt(e){return mt}function _t(e){return vt}const St=h.createInstance({name:"pointcloud",description:"1.0"}),Mt=h.createInstance({name:"tile",description:"1.0"});function Tt(){at+=1}function Et(){at-=1}function Ct(){return at}function At(){return ot}function Ot(){return rt}const Lt=new d.DRACOLoader;Lt.setDecoderPath("workers/"),Lt.setDecoderConfig({type:"js"});const kt="\nvarying vec2 vUv;\n\nvoid main() {\n\n    vUv = uv;\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",Pt="\nuniform sampler2D baseTexture;\nuniform sampler2D bloomTexture;\n\nvarying vec2 vUv;\n\nvec4 getTexture( sampler2D texelToLinearTexture ) {\n\n    vec4 texColor = LinearToLinear( texture2D( texelToLinearTexture , vUv ) );\n    return texColor;\n}\n\nvoid main() {\n\n    gl_FragColor = ( getTexture( baseTexture ) + vec4( 1.0 ) * getTexture( bloomTexture ) );\n\n}\n";var Dt={uniforms:{uScreenHeight:{value:1080},size:{value:1},elevationRange:{value:new t.Vector2(0,50)},intensityRange:{value:new t.Vector2(0,255)},wRGB:{value:.5},wIntensity:{value:0},wElevation:{value:.5},gradient:{value:null}},vertexShader:"\n\tprecision mediump float;\n\tprecision mediump int;\n\n\t// attribute vec3 position;\n\t// attribute vec3 color;\n\n\t// uniform mat4 modelMatrix;\n\t// uniform mat4 modelViewMatrix;\n\t// uniform mat4 projectionMatrix;\n\t// uniform mat4 viewMatrix;\n\n\tattribute float intensity;\n\tuniform float uScreenHeight;\n\tuniform float size;\n\n\tuniform vec3 uColor;\n\tuniform float uOpacity;\n\n\tuniform vec2 elevationRange;\n\tuniform vec2 intensityRange;\n\n\n\tuniform float wRGB;\n\tuniform float wIntensity;\n\tuniform float wElevation;\n\n\tuniform sampler2D gradient;\n\n\tvarying vec3 vColor;\n\tvarying vec3 vViewPosition;\n\n\t#define PI 3.141592653589793\n\t#define USE_SIZEATTENUATION 1\n\t#define fixed_point_size true\n\t#define fov 60.0\n\n\tbool isPerspectiveMatrix( mat4 m ) {\n\n\t\treturn m[ 2 ][ 3 ] == - 1.0;\n\n\t  }\n\n\tfloat getIntensity(){\n\t\tfloat w = (intensity - intensityRange.x) / (intensityRange.y - intensityRange.x);\n\t\tw = clamp(w, 0.0, 1.0);\n\n\t\treturn w;\n\t}\n\tvec3 getElevation(){\n\t\tvec4 world = modelMatrix * vec4( position, 1.0 );\n\t\tfloat w = (world.z - elevationRange.x) / (elevationRange.y - elevationRange.x);\n\t\tvec3 cElevation = texture2D(gradient, vec2(w,1.0-w)).rgb;\n\n\t\treturn cElevation;\n\t}\n\n\tvec3 getCompositeColor(){\n\t\tvec3 c;\n\t\tfloat w;\n\t\tc += wRGB * color;\n\t\tw += wRGB;\n\n\t\tc += wIntensity * getIntensity() * vec3(1.0, 1.0, 1.0);\n\t\tw += wIntensity;\n\n\t\tc += wElevation * getElevation();\n\t\tw += wElevation;\n\n\t\tc = c / w;\n\n\t\tif(w == 0.0){\n\t\t\tgl_Position = vec4(100.0, 100.0, 100.0, 0.0);\n\t\t}\n\n\t\treturn c;\n\t}\n\n\tfloat getPointSize(){\n\t\tfloat pointSize = 1.0;\n\n\t\tfloat slope = tan(fov / 2.0);\n\t\tfloat projFactor =  -0.5 * uScreenHeight / (slope * vViewPosition.z);\n\n\t\t#if defined fixed_point_size\n\t\t\tpointSize = size;\n\t\t#elif defined USE_SIZEATTENUATION\n\n\t\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\t\tif(isPerspective){\n\t\t\t\tpointSize = pointSize * projFactor;\n\t\t\t}else{\n\t\t\t\tpointSize = size;\n\t\t\t}\n\t\t#endif\n\n\n\n\t\treturn pointSize;\n\t}\n\n\tvoid main() {\n\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tvViewPosition = mvPosition.xyz;\n\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t// POINT SIZE\n\t\tfloat pointSize = getPointSize();\n\t\tgl_PointSize = pointSize;\n\n\t\t// COLOR\n\t\tvColor = getCompositeColor();\n\t}\n",fragmentShader:"\n\tprecision mediump float;\n\tprecision mediump int;\n\n\tvarying vec3 vColor;\n\n\tvoid main() {\n\t\tgl_FragColor = vec4(vColor,1.0);\n\n}"};function It(e={}){const n=e.color||new t.Color("rgb(242, 202, 126)"),i=e.colorRing0||new t.Color(1,0,0),r=e.colorRing1||new t.Color(0,1,0),o=e.colorRing2||new t.Color(0,0,1),a=e.radius1||10,s=e.radius2||20,l=e.width||4,c=e.speed||1,u=new t.PlaneBufferGeometry(2*(s+l),2*(s+l),1,1),h=new t.RawShaderMaterial({uniforms:{color:{value:n},colorRing0:{value:i},colorRing1:{value:r},colorRing2:{value:o},radius1:{value:a},radius2:{value:s},width:{value:l}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform vec3 color;\n    uniform vec3 colorRing0;\n    uniform vec3 colorRing1;\n    uniform vec3 colorRing2;\n    varying vec3 vPosition;\n    uniform float radius1;\n    uniform float radius2;\n    uniform float width;\n\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        if(d<radius1){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(radius2<d && d<radius2+width){\n            if(dot(normalize(vec2(vPosition.xy)),vec2(0.0,1.0))>0.60){\n                gl_FragColor = vec4(colorRing0, 1.0);\n            }else if(normalize(vPosition.xy).x>0.1 && normalize(vPosition.xy).y<0.40){\n                gl_FragColor = vec4(colorRing1, 1.0);\n            }else if(normalize(vPosition.xy).x<-0.1 && normalize(vPosition.xy).y<0.40){\n                gl_FragColor = vec4(colorRing2, 1.0);\n            }\n\n        }else{\n            discard;\n        }\n    }\n  ",side:t.FrontSide,transparent:!0});let d=new t.Mesh(u,h);return d.flag=1,d.update=function(){this.rotation.z+=.01*this.flag*c,this.rotation.z>1?this.flag=-1:this.rotation.z<-1&&(this.flag=1)},d}t.UniformsLib.line={linewidth:{value:1},resolution:{value:new t.Vector2(1,1)},dashScale:{value:1},dashOffset:{value:.01},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}};const Nt={uniforms:t.UniformsUtils.merge([t.UniformsLib.common,t.UniformsLib.fog,t.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection,\n//and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat random (vec2 st) {\n\t\t\treturn fract(sin(dot(st.xy,\n\t\t\t\t\t\t\t\t vec2(12.9898,78.233)))*\n\t\t\t\t43758.5453123);\n\t\t}\n\t\t\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\t\t\t\t // todo - FIX\n\t\t\t\t float dash = mod( vLineDistance+dashOffset, dashSize + gapSize );\n\t\t\t\t #ifdef USE_RANDOM\n\t\t\t\t \tfloat r = random(vec2(dashOffset));\n\t\t\t\t\tdash = mod( vLineDistance+dashOffset, dashSize + gapSize  + r);\n\t\t\t\t#endif\n\t\t\t\tfloat tmpOpacity = opacity;\n\t\t\t\tif ( dash > dashSize ){\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\n\t\t\t\t#ifdef USE_OPACITY\n\t\t\t\t\ttmpOpacity = 1.0 - dash/dashSize;\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, tmpOpacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var Ft=function(e){t.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:t.UniformsUtils.clone(Nt.uniforms),vertexShader:Nt.vertexShader,fragmentShader:Nt.fragmentShader,transparent:!0,blending:t.CustomBlending,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset?this.uniforms.dashOffset.value:0},set:function(e){this.uniforms.dashOffset?this.uniforms.dashOffset.value=e:this.uniforms.dashOffset={value:e}}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};(Ft.prototype=Object.create(t.ShaderMaterial.prototype)).constructor=Ft,Ft.prototype.isLineMaterial=!0,t.UniformsLib.line={linewidth:{value:1},resolution:{value:new t.Vector2(1,1)},dashScale:{value:1},offset1:{value:.01},offset2:{value:1},length1:{value:2},length2:{value:2},color1:{value:new t.Color(1,0,1)},color2:{value:new t.Color(0,1,.5)},opacity:{value:1}};const Rt={uniforms:t.UniformsUtils.merge([t.UniformsLib.common,t.UniformsLib.fog,t.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\t\tvarying vec2 vUv;\n\t\t#ifdef USE_DASH\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\t\t#endif\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\t\t}\n\t\tvoid main() {\n\t\t\t#ifdef USE_COLOR\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\t\t\t#endif\n\t\t\t#ifdef USE_DASH\n\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t#endif\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\t\t\tvUv = uv;\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\t\t\t// special case for perspective projection,\n//and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\t\t\tif ( perspective ) {\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\t\t\t\t\ttrimSegment( start, end );\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\t\t\t\t\ttrimSegment( end, start );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\t\t\t\toffset += - dir;\n\t\t\t} else if ( position.y > 1.0 ) {\n\t\t\t\toffset += dir;\n\t\t\t}\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\t\t\tclip.xy += offset;\n\t\t\tgl_Position = clip;\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\t#ifdef USE_DASH\n\t\t\tuniform float offset1;\n\t\t\tuniform float offset2;\n\t\t\tuniform float length1;\n\t\t\tuniform float length2;\n\t\t\tuniform vec3 color;\n\t\t\tuniform vec3 color1;\n\t\t\tuniform vec3 color2;\n\t\t#endif\n\t\tvarying float vLineDistance;\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\t\t\t}\n            float tmpOpacity = 1.0;\n\t\t\tvec4 diffuseColor = vec4( diffuse, tmpOpacity );\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\n\t\t\tif ( offset1 < vLineDistance &&  vLineDistance< offset1+length1 ){\n\t\t\t\t#ifdef USE_OPACITY\n\t\t\t\t\ttmpOpacity = 1.0 - (vLineDistance-offset1/length1);\n\t\t\t\t#endif\n\t\t\t\tgl_FragColor = vec4(color1, tmpOpacity);\n\t\t\t}else if(offset2 < vLineDistance &&  vLineDistance< offset2+length2 ){\n\t\t\t\t#ifdef USE_OPACITY\n\t\t\t\t\ttmpOpacity = (vLineDistance-offset2/length2)-1.0;\n\t\t\t\t#endif\n\t\t\t\tgl_FragColor = vec4(color2, tmpOpacity);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\t\t\t}\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t}\n\t\t"};var Bt=function(e){t.ShaderMaterial.call(this,{type:"LineMaterial2",uniforms:t.UniformsUtils.clone(Rt.uniforms),vertexShader:Rt.vertexShader,fragmentShader:Rt.fragmentShader,transparent:!0,blending:t.CustomBlending,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},offset1:{enumerable:!0,get:function(){return this.uniforms.offset1?this.uniforms.offset1.value:0},set:function(e){this.uniforms.offset1?this.uniforms.offset1.value=e:this.uniforms.offset1={value:e}}},offset2:{enumerable:!0,get:function(){return this.uniforms.offset2?this.uniforms.offset2.value:0},set:function(e){this.uniforms.offset2?this.uniforms.offset2.value=e:this.uniforms.offset2={value:e}}},length1:{enumerable:!0,get:function(){return this.uniforms.length1?this.uniforms.length1.value:0},set:function(e){this.uniforms.length1?this.uniforms.length1.value=e:this.uniforms.length1={value:e}}},length2:{enumerable:!0,get:function(){return this.uniforms.length2?this.uniforms.length2.value:0},set:function(e){this.uniforms.length2?this.uniforms.length2.value=e:this.uniforms.length2={value:e}}},color1:{enumerable:!0,get:function(){return this.uniforms.color1?this.uniforms.color1.value:new t.Color(1,1,0)},set:function(e){this.uniforms.color1?this.uniforms.color1.value=e:this.uniforms.color1={value:e}}},color2:{enumerable:!0,get:function(){return this.uniforms.color2?this.uniforms.color2.value:new t.Color(0,1,1)},set:function(e){this.uniforms.color2?this.uniforms.color2.value=e:this.uniforms.color2={value:e}}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};(Bt.prototype=Object.create(t.ShaderMaterial.prototype)).constructor=Bt,Bt.prototype.isLineMaterial2=!0,t.PerspectiveCamera.prototype.zoomTo=function(e,n,i=new t.Vector3){if(!e.geometry&&!e.boundingSphere&&!e.boundingBox)return;let r;e.geometry&&null===e.geometry.boundingSphere&&e.geometry.computeBoundingSphere(),e.updateMatrixWorld(),r=e.boundingSphere?e.boundingSphere:e.geometry&&e.geometry.boundingSphere?e.geometry.boundingSphere:e.boundingBox.getBoundingSphere(new t.Sphere);let o=n||1;r=r.clone().applyMatrix4(e.matrixWorld);let a=r.radius,s=this.fov*Math.PI/180;this.aspect<1&&(s*=this.aspect);let l=Math.abs(a/Math.sin(s/2))*o,c=this.getWorldDirection(new t.Vector3).multiplyScalar(-l);this.position.copy(r.center.clone().sub(i).add(c))},t.OrthographicCamera.prototype.zoomTo=function(e,t=1){(e.geometry||e.boundingBox)&&this.updateProjectionMatrix()};class jt extends t.Object3D{constructor(e={}){super(),this.name=e.name||"",this.sprite=null,this.texture=null,this.material=null,this.scaleNum=e.scaleNum||.3,this.factor=e.factor||{},this.center=e.center||{x:.12,y:0},this.mainView=null,this.drawCanvas=document.createElement("canvas"),this.sizeAttenuation=e.sizeAttenuation||!1,this.init(e)}init(e){const{mainView:n,updateView:i}=e,{width:r,height:o}=n,a=o/r;this.drawCanvas.width=r,this.drawCanvas.height=o,this.mainView=n,this.texture=new t.Texture(this.mainView),this.texture.minFilter=t.NearestFilter,this.texture.magFilter=t.NearestFilter,this.texture.anisotropy=4,this.texture.needsUpdate=!0;const s=new t.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:this.sizeAttenuation});this.material=s,this.sprite=new t.Sprite(this.material),this.sprite.material.map=this.texture,this.sprite.scale.set(1/this.factor.x*this.scaleNum,1/this.factor.y*a*this.scaleNum,1);const{x:l,y:c}=this.center;this.sprite.center=new t.Vector2(l,c),this.add(this.sprite),i&&this.update(i)}update(e,t=[0,0,100,100]){const[n,i,r,o]=t,{width:a,height:s}=this.drawCanvas,l=this.drawCanvas.getContext("2d");l.clearRect(0,0,a,s),l.drawImage(this.mainView,n,i,a,s),l.drawImage(e,n,i,r*this.factor.x,o*this.factor.y),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}updateText(e,t=[0,0,100,100]){const[n,i]=t,{width:r,height:o}=this.drawCanvas,a=this.drawCanvas.getContext("2d");a.clearRect(0,0,r,o),a.drawImage(this.mainView,n,i,r,o),e.forEach(e=>{const{text:t,position:n,size:i,color:r,fontFamily:o,textAlign:s}=e;a.font=`${i*this.factor.y}px ${o}`,a.fillStyle=r,a.textBaseline="top",a.textAlign=s||"left",a.fillText(t,n[0]*this.factor.x,n[1]*this.factor.y)}),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}updateInfo(e,t=[0,0,100,100],n,i=3){const[r,o]=t,{width:a,height:s}=this.drawCanvas,l=this.drawCanvas.getContext("2d");l.clearRect(0,0,a,s),l.drawImage(this.mainView,r,o,a,s),n&&n.forEach(e=>{const{img:t,imgInfo:n}=e;l.drawImage(t,n.position[0]*this.factor.x,n.position[1]*this.factor.y,n.size[0]*this.factor.x*i,n.size[1]*this.factor.y*i)}),e.forEach(e=>{const{text:t,position:n,size:r,color:o,fontFamily:a,textAlign:s}=e;l.font=`${r*this.factor.y}px ${a}`,l.fillStyle=o,l.textBaseline="top",l.textAlign=s||"left";const c=l.measureText(t).width;l.fillText(t,n[0]*this.factor.x,n[1]*this.factor.y,c/this.factor.y*i)}),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}dispose(){this.texture&&this.texture.dispose(),this.sprite&&(this.sprite.material&&(this.sprite.material.dispose(),this.sprite.material.map.dispose(),this.sprite.material=null),this.sprite=null)}}const zt="https://mapdata.bj.bcebos.com/images/guangzhou/",Ut={100:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违章占道"},10001:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用公交车道停车"},10002:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用非机动车道停车"},10003:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用人行道"},10004:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用机动车道停车"},200:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯故障"},20001:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯正常"},20002:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯闪烁故障"},20003:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯不亮故障"},300:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"路面遗撒"},30001:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"机动车道抛洒物"},30002:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"非机动车道抛洒物"},30003:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"人行道抛洒物"},trafficAccident:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"交通事故"},overSpeed:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"车辆超速"},emergencyBrake:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"车辆急刹"},antiDromic:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"车辆逆行"},illegalOccupation:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违规占道"},trafficJam:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"交通拥堵"},construction:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"道路施工"},others:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"其他事件"}};class Vt extends t.Object3D{constructor(e={}){super(e),this.type="carFlag",this.name=e.name,this.style=Object.assign({bottom:{},middle:{},top:{},right:{}},e.style),this.trafficType=e.trafficType||"noPark",this.color=new t.Color(e.color),this.fillColor=e.fillColor,this.strokeColor=e.strokeColor,this.fontsize=e.fontsize||14,this.imgUrlMap=e.imgUrlMap,this.sizeAttenuation=e.sizeAttenuation||!1,this.iconSprite=null,this.itemScale=e.scale||1,this.flagSprite=null,this.flagCanvas=document.createElement("canvas"),this.flag=e.flag,this.flagFactor=e.factor||{},this.texture=null,this.scaleNum=e.scaleNum||1,this.onlyAnimition=!0,this.init()}init(){this.initBottom(),this.initMiddle(),this.initTop(),this.drawCarInfo(),this.initHover(),this.boundingSphere=new t.Sphere(new t.Vector3(0,0,2.5),2.5),this.boundingBox=new t.Box3(new t.Vector3(-1,-1,0),new t.Vector3(2,2,5))}initBottom(){const e=new t.SphereBufferGeometry(.039),n=new t.MeshBasicMaterial({color:this.color}),i=new t.Mesh(e,n);this.bottom=i,this.add(this.bottom)}initMiddle(){const e=new t.CylinderBufferGeometry(.013,.013,3,32,1),n=new t.MeshBasicMaterial({color:this.color});this.middle=new t.Mesh(e,n),this.middle.rotateX(.5*Math.PI),this.middle.position.z=1.5,this.add(this.middle)}initTop(){this.iconSprite?this.iconSprite.visible=!0:this.drawIconImg();const e=It({color:this.color,colorRing0:this.color,colorRing1:this.color,colorRing2:this.color,radius1:.01,radius2:.6,width:.1});this.top=e,this.top.rotateX(.5*Math.PI),this.top.position.z=4,this.add(this.top)}initHover(){this.addEventListener("mouseover",Ht),this.addEventListener("mouseleave",Wt)}removeHover(){this.removeEventListener("mouseover",Ht),this.removeEventListener("mouseleave",Wt)}setSpriteStatus(e){this.flagSprite.visible=e}releaseHover(){this.hoverObject&&(this.hoverObject.visible=!1),this.top.flag=!1,this.hoverState=!1}setPosition(e){if(!e)return;const t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}drawIconImg(e={}){const n=e.iconWidth||36*this.itemScale,i=e.iconHeight||36*this.itemScale,r=function(e,n){const i=document.createElement("canvas"),r=t.MathUtils.ceilPowerOfTwo(e);return i.width=r,i.height=n*r/e,i}(n,i);var o=r.getContext("2d");const a=r.width/n,s=new Image;if(s.crossOrigin="Anonymous",this.imgUrlMap){const{icon:e}=this.imgUrlMap;s.src=e}else{const e=Ut[this.trafficType].icon;s.src=zt+e}s.addEventListener("load",()=>{var e,l,c;o.fillStyle=this.fillColor,o.lineWidth=4,o.strokeStyle=this.strokeColor,e=o,l=r.width,c=r.height,e.beginPath(),e.moveTo(.5*l,0*c+4),e.lineTo(.067*l,.25*c),e.lineTo(.067*l,.75*c),e.lineTo(.5*l,c-4),e.lineTo(.933*l,.75*c),e.lineTo(.933*l,.25*c),e.moveTo(.5*l,0*c+4),e.closePath(),e.fill(),e.stroke(),o.drawImage(s,Math.floor(4*this.itemScale*a),Math.floor(4*this.itemScale*a),Math.ceil(28*this.itemScale*a),Math.ceil(28*this.itemScale*a));const u=new t.Texture(r);u.needsUpdate=!0,u.anisotropy=8,this.iconSprite?this.iconSprite.material.map=u:(this.iconSprite=Gt(n,i,u),this.iconSprite.position.z=4,this.add(this.iconSprite))})}drawCarInfo(e={}){if(this.flagSprite)this.flagSprite.visible=!0;else{const{width:n,height:i}=this.flag;this.flagCanvas.width=n,this.flagCanvas.height=i,this.texture=new t.Texture(this.flag),this.texture.needsUpdate=!0,this.texture.anisotropy=8;const r=Gt(this.flagCanvas.width,this.flagCanvas.height,this.texture);r.scale.set(1/this.flagFactor.x*this.scaleNum,1/this.flagFactor.y*this.scaleNum,1);const o=e.offset||new t.Vector3(3.6,0,3.5);this.flagSprite=r,r.name=e.name,r.position.x=o.x,r.position.z=o.z,r.position.y=o.y,this.add(r)}}updateText(e,t=[0,0,100,100]){const[n,i,r,o]=t,{width:a,height:s}=this.flagCanvas,l=this.flagCanvas.getContext("2d");l.clearRect(0,0,a,s),l.drawImage(this.flag,n,i,a,s),l.drawImage(e,n,i,r*this.flagFactor.x,o*this.flagFactor.y),this.texture.image=this.flagCanvas,this.texture.needsUpdate=!0,this.flagSprite.material.map=this.texture}updateTextList(e,t=[0,0,100,100]){const[n,i]=t,{width:r,height:o}=this.flagCanvas,a=this.flagCanvas.getContext("2d");a.clearRect(0,0,r,o),a.drawImage(this.flag,n,i,r,o),e.forEach(e=>{const{text:t,position:n,size:i,color:r,fontFamily:o,textAlign:s}=e;a.font=`${i*this.flagFactor.y}px ${o}`,a.fillStyle=r,a.textBaseline="top",a.textAlign=s||"left";const l=a.measureText(t).width;a.fillText(t,n[0]*this.flagFactor.x,n[1]*this.flagFactor.y,l/this.flagFactor.y*3)}),this.texture.image=this.flagCanvas,this.texture.needsUpdate=!0,this.flagSprite.material.map=this.texture}raycast(e,n){const i=[],r=new t.Sphere;r.copy(this.boundingSphere),r.applyMatrix4(this.matrixWorld);const o=e.ray.intersectsSphere(r);if(o){n.push({object:this,point:o,distance:e.ray.origin.distanceTo(o)});for(let t=0;t<this.children.length;t++){const n=this.children[t];n.visible&&n.raycast(e,i)}for(let t=0;t<i.length;t++){const n=i[t];n.distance=e.ray.origin.distanceTo(n.point)}if(i.sort((e,t)=>e.distance-t.distance),i.length)for(let e=0;e<i.length;e++)n.push(i[e]);return n}}faceToCamera(e){if(this.top.rotation.y=e.rotation.z,this.flagSprite){const t=e.rotation.z;this.flagSprite.rotation.y=t,this.flagSprite.position.x=3.6*Math.cos(t),this.flagSprite.position.y=3.6*Math.sin(t)}this.iconSprite&&(this.iconSprite.rotation.y=e.rotation.z)}update(){this.hoverState&&this.top.update()}dispose(){const e=[];for(e.push(...this.children);e.length;){const t=e.pop();t.children&&t.children.length&&e.push(...t.children),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}function Gt(e,n,i){const r=new t.MeshBasicMaterial({map:i,transparent:!0}),o=new t.PlaneBufferGeometry(.03*e,.03*n,1,1),a=new t.Mesh(o,r);return a.rotateX(.5*Math.PI),a}function Ht(){this.flagSprite?this.flagSprite.visible=!0:this.drawCarInfo(),this.hoverState=!0,this.iconSprite.scale.x=1.2,this.iconSprite.scale.y=1.2,this.top.scale.x=1.2,this.top.scale.y=1.2}function Wt(){this.iconSprite.scale.x=1,this.iconSprite.scale.y=1,this.top.scale.x=1,this.top.scale.y=1,this.hoverState=!1,!this.onlyAnimition&&this.flagSprite&&(this.flagSprite.visible=!1)}function qt(e,n){if(!(this instanceof qt))return new qt(e,n);t.BufferGeometry.call(this),Array.isArray(e)?n=n||{}:"object"==typeof e&&(n=e,e=[]),n=n||{},this.setAttribute("position",new t.BufferAttribute(void 0,3)),this.setAttribute("lineNormal",new t.BufferAttribute(void 0,2)),this.setAttribute("lineMiter",new t.BufferAttribute(void 0,1)),n.vertexColors&&(this.vertexColors=!0,this.setAttribute("vertexColors",new t.BufferAttribute(void 0,3))),n.distances&&this.setAttribute("lineDistance",new t.BufferAttribute(void 0,1)),"function"==typeof this.setIndex?this.setIndex(new t.BufferAttribute(void 0,1)):this.setAttribute("index",new t.BufferAttribute(void 0,1)),this.update(e,n.closed)}function Yt(e){const n=e.colorA?new t.Vector4(e.colorA[0]/255,e.colorA[1]/255,e.colorA[2]/255,e.colorA[3]):new t.Vector4(1,1,1,1),i=e.colorB?new t.Vector4(e.colorB[0]/255,e.colorB[1]/255,e.colorB[2]/255,e.colorB[3]):new t.Vector4(1,1,1,1),r=e.colorC?new t.Vector4(e.colorC[0]/255,e.colorC[1]/255,e.colorC[2]/255,e.colorC[3]):new t.Vector4(1,1,1,1),o=e.width/10||.3,a=e.opacity||1;return new t.ShaderMaterial({uniforms:{width:{type:"f",value:o},colorA:{type:"v4",value:n},colorB:{type:"v4",value:i},colorC:{type:"v4",value:r},opacity:{type:"f",value:a}},vertexShader:"\n         uniform float width;\n         attribute float lineMiter;\n         attribute vec2 lineNormal;\n         attribute float lineDistance;\n\n         #ifdef USE_VERTEXCOLORS\n             attribute vec3  vertexColors;\n             varying vec3 vColors;\n         #endif\n         varying float vlineDistance;\n         void main() {\n             vlineDistance= lineDistance;\n             #ifdef USE_VERTEXCOLORS\n                 vColors = vertexColors;\n             #endif\n             vec3 pointPos = position.xyz + vec3(lineNormal * width / 2.0 * lineMiter, 0.0);\n             gl_Position = projectionMatrix * modelViewMatrix * vec4(pointPos, 1.0);\n  } ",fragmentShader:"\n         varying vec3 vPosition;\n         varying float vlineDistance;\n         #ifdef USE_VERTEXCOLORS\n             varying vec3 vColors;\n         #endif\n         uniform vec4 colorA;\n         uniform vec4 colorB;\n         uniform vec4 colorC;\n         uniform float opacity;\n         void main() {\n             #ifdef USE_COLORS\n\n                 if(0.0<vlineDistance&&vlineDistance<0.5)\n                 {\n                     gl_FragColor =(1.0-vlineDistance/0.5)*colorA+vlineDistance/0.5*colorB;\n                 }else{\n                     gl_FragColor =(1.0-vlineDistance)*2.0*colorB+(vlineDistance*2.0-1.0)*colorC;\n                 }\n\n             #else\n                 #ifdef USE_TYPE\n                     if(0.0<vlineDistance&&vlineDistance<0.01)\n                     {\n                         gl_FragColor =colorB;\n                     }else{\n                         gl_FragColor =colorA;\n                     }\n                 #else\n                     #ifdef USE_VERTEXCOLORS\n                         gl_FragColor = vec4(vColors,opacity);\n                     #else\n                         gl_FragColor = vec4(colorA.xyz,1.0-vlineDistance);\n                     #endif\n                 #endif\n\n             #endif\n         }\n  ",side:t.DoubleSide,depthTest:!0,depthWrite:!0,transparent:!0})}v(qt,t.BufferGeometry),qt.prototype.update=function(e,t){let n=g(e=e||[],t);t&&((e=e.slice()).push(e[0]),n.push(n[0]));let i=this.getAttribute("position"),r=this.getAttribute("lineNormal"),o=this.getAttribute("lineMiter"),a=this.getAttribute("lineDistance"),s="function"==typeof this.getIndex?this.getIndex():this.getAttribute("index"),l=Math.max(0,6*(e.length-1)),c=0;i.array&&e.length===i.array.length/3/2||(c=2*e.length,i.array=new Float32Array(3*c),r.array=new Float32Array(2*c),o.array=new Float32Array(c),s.array=new Uint16Array(l),a&&(a.array=new Float32Array(c))),void 0!==i.count&&(i.count=c),i.needsUpdate=!0,void 0!==r.count&&(r.count=c),r.needsUpdate=!0,void 0!==o.count&&(o.count=c),o.needsUpdate=!0,void 0!==s.count&&(s.count=l),s.needsUpdate=!0,a&&(void 0!==a.count&&(a.count=c),a.needsUpdate=!0);let u=0,h=0,d=s.array;e.forEach((function(e,t,n){let r=u;if(d[h++]=r+0,d[h++]=r+1,d[h++]=r+2,d[h++]=r+2,d[h++]=r+1,d[h++]=r+3,i.setXYZ(u,e[0],e[1],e[2]||.02),i.setXYZ(u+1,e[0],e[1],e[2]||.02),a){let e=t/(n.length-1);a.setX(u,e),a.setX(u+1,e)}u+=2}));let f=0,p=0;n.forEach((function(t,a){let s=t[0],l=t[1];Math.abs(l)>1.5?(s=n[a-1][0],l=n[a-1][1],i.setXYZ(2*a,e[a-1][0],e[a-1][1],e[a-1][2]||.02),i.setXYZ(2*a+1,e[a-1][0],e[a-1][1],e[a-1][2]||.02),r.setXY(f++,s[0],s[1]),r.setXY(f++,s[0],s[1]),o.setX(p++,-l),o.setX(p++,l),n[a]=n[a-1]):(r.setXY(f++,s[0],s[1]),r.setXY(f++,s[0],s[1]),o.setX(p++,-l),o.setX(p++,l))}))},qt.prototype.updateColors=function(e){let t=this.getAttribute("vertexColors");const n=this.getAttribute("position").count;t&&e.length&&(t.array=new Float32Array(3*n)),t&&e.length&&(void 0!==t.count&&(t.count=n),t.needsUpdate=!0),e.forEach((function(n,i){t.setXYZ(2*i,e[i][0],e[i][1],e[i][2]),t.setXYZ(2*i+1,e[i][0],e[i][1],e[i][2])}))};class $t extends t.Object3D{constructor(e={}){super(),this.vertices=e.vertices||[],this.colors=e.colors||[[0,237,255,1],[86,111,238,.6],[255,86,229,.2]],this.width=e.width||10,this.distance=e.distance||!0,this.mesh=null,this.typeLine=e.typeLine||0,this.isUpdateColor=!1,this.updateMesh()}updateMesh(){if(this.vertices.length<2)return;const e=[],n=new t.Vector3(this.vertices[0][0],this.vertices[0][1],this.vertices[0][2]||0);for(let t=0;t<this.vertices.length;t++)e.push(this.vertices[t][0],this.vertices[t][1],this.vertices[t][2]||0),n.x>this.vertices[t][0]&&(n.x=this.vertices[t][0]),n.y>this.vertices[t][1]&&(n.y=this.vertices[t][1]),this.vertices[t][2]&&n.z>this.vertices[t][2]&&(n.z=this.vertices[t][2]);const i=[];for(let t=0;t<e.length;t+=3){e[t]-=n.x,e[t+1]-=n.y,e[t+2]-=n.z;let r=[];r.push(e[t],e[t+1],e[t+2]),i.push(r)}let r=qt(i,{distances:this.distance});if(this.position.addVectors(n,new t.Vector3(0,0,0)),this.mesh){if(this.isUpdateColor){let e=this.setMater(this.colors);this.mesh.material=e}this.mesh.geometry=r,this.mesh.updateMatrix(),this.updateMatrix()}else{let e=this.setMater(this.colors);this.mesh=new t.Mesh(r,e),this.add(this.mesh),this.mesh.updateMatrix()}}setMater(e){let t=[],n=[],i=[];1===e.length?t=e[0]:2===e.length?0===this.typeLine?(t=e[0],n[0]=(e[1][0]+e[0][0])/2,n[1]=(e[1][1]+e[0][1])/2,n[2]=(e[1][2]+e[0][2])/2,n[3]=(e[1][3]+e[0][3])/2,i=e[1]):(t=e[0],n=e[1],i=e[1]):(e.length,t=e[0],n=e[1],i=e[2]);let r=Yt({width:this.width,colorA:t,colorB:n,colorC:i});return e.length>2&&(r.defines.USE_COLORS=!0),this.typeLine>0&&(r.defines.USE_TYPE=!0),r}}class Xt extends t.Object3D{constructor(e={}){super(),this.vertices=e.vertices||[],this.color=e.color||[.6,.6,.6],this.width=e.width||10,this.distance=e.distance||!0,this.mesh=null,this.coordsPoint=[],this.opacity=e.opacity||1,this.init()}init(){if(this.vertices.length<3)return;const e=[];this.minPoint=new t.Vector3(this.vertices[0][0],this.vertices[0][1],this.vertices[0][2]||0);for(let t=0;t<this.vertices.length;t++)e.push(this.vertices[t][0],this.vertices[t][1],this.vertices[t][2]||0),this.minPoint.x>this.vertices[t][0]&&(this.minPoint.x=this.vertices[t][0]),this.minPoint.y>this.vertices[t][1]&&(this.minPoint.y=this.vertices[t][1]),this.vertices[t][2]&&this.minPoint.z>this.vertices[t][2]&&(this.minPoint.z=this.vertices[t][2]);const n=[];for(let t=0;t<e.length;t+=3){e[t]-=this.minPoint.x,e[t+1]-=this.minPoint.y,e[t+2]-=this.minPoint.z;let i=[];i.push(e[t],e[t+1],e[t+2]),this.coordsPoint.push(i);const r=Math.ceil(.245*e.length),o=t%r;o<.8*r?n.push([.38,1,.305]):o<.9*r?n.push([1,.894,.305]):o<.96*r?n.push([1,.564,.141]):n.push([1,.305,.305])}let i=qt(this.coordsPoint,{distances:this.distance,vertexColors:!0});if(i.updateColors(n),this.position.addVectors(this.minPoint,new t.Vector3(0,0,0)),this.mesh)this.mesh.geometry=i,this.mesh.updateMatrix(),this.updateMatrix();else{let e=Yt({width:this.width,opacity:this.opacity});e.defines.USE_VERTEXCOLORS=!0,this.mesh=new t.Mesh(i,e),this.add(this.mesh),this.mesh.updateMatrix()}}updateColors(e){this.mesh&&(this.mesh.geometry.updateColors(e),this.mesh.updateMatrix(),this.updateMatrix())}}function Qt(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new t.BufferGeometry,this.widthCallback=null,this.matrixWorld=new t.Matrix4}var Kt,Jt,Zt;function en(e,t,n,i,r){var o;if(e=e.subarray||e.slice?e:e.buffer,n=n.subarray||n.slice?n:n.buffer,e=t?e.subarray?e.subarray(t,r&&t+r):e.slice(t,r&&t+r):e,n.set)n.set(e,i);else for(o=0;o<e.length;o++)n[o+i]=e[o];return n}function tn(e){t.ShaderMaterial.call(this,{uniforms:Object.assign({},t.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new t.Color(16777215)},opacity:{value:1},resolution:{value:new t.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},isTrip:{value:0},isMax:{value:0},colorTrip:{value:new t.Color(16777215)},alphaTest:{value:0},repeat:{value:new t.Vector2(1,1)}}),vertexShader:t.ShaderChunk.meshline_vert,fragmentShader:t.ShaderChunk.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(e){this.uniforms.lineWidth.value=e}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(e){this.uniforms.map.value=e}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(e){this.uniforms.useMap.value=e}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(e){this.uniforms.alphaMap.value=e}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(e){this.uniforms.useAlphaMap.value=e}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(e){this.uniforms.color.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(e){this.uniforms.sizeAttenuation.value=e}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(e){this.uniforms.near.value=e}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(e){this.uniforms.far.value=e}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(e){this.uniforms.dashArray.value=e,this.useDash=0!==e?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(e){this.uniforms.dashRatio.value=e}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(e){this.uniforms.useDash.value=e}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(e){this.uniforms.visibility.value=e}},isTrip:{enumerable:!0,get:function(){return this.uniforms.isTrip.value},set:function(e){this.uniforms.isTrip.value=e}},isMax:{enumerable:!0,get:function(){return this.uniforms.isMax.value},set:function(e){this.uniforms.isMax.value=e}},colorTrip:{enumerable:!0,get:function(){return this.uniforms.colorTrip.value},set:function(e){this.uniforms.colorTrip.value=e}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(e){this.uniforms.alphaTest.value=e}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(e){this.uniforms.repeat.value.copy(e)}}}),this.setValues(e)}Qt.prototype.setMatrixWorld=function(e){this.matrixWorld=e},Qt.prototype.setGeometry=function(e,n){if(this.widthCallback=n,this.positions=[],this.counters=[],e instanceof t.Geometry)for(var i=0;i<e.vertices.length;i++){var r=e.vertices[i];n=i/e.vertices.length,this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(n),this.counters.push(n)}if(e instanceof Float32Array||e instanceof Array)for(i=0;i<e.length;i+=3)n=i/e.length,this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(n),this.counters.push(n);this.process()},Qt.prototype.raycast=(Kt=new t.Matrix4,Jt=new t.Ray,Zt=new t.Sphere,function(e,n){var i=e.linePrecision,r=i*i,o=new t.Vector3,a=this.geometry;if(null===a.boundingSphere&&a.computeBoundingSphere(),Zt.copy(a.boundingSphere),Zt.applyMatrix4(this.matrixWorld),!1!==e.ray.intersectSphere(Zt,o)){Kt.getInverse(this.matrixWorld),Jt.copy(e.ray).applyMatrix4(Kt);var s=new t.Vector3,l=new t.Vector3,c=new t.Vector3,u=this instanceof t.LineSegments?2:1;if(a instanceof t.BufferGeometry){var h=a.index,d=a.attributes;if(null!==h)for(var f=h.array,p=d.position.array,m=0,v=f.length-1;m<v;m+=u){var g=f[m],y=f[m+1];s.fromArray(p,3*g),l.fromArray(p,3*y),Jt.distanceSqToSegment(s,l,o,c)>r||(o.applyMatrix4(this.matrixWorld),(w=e.ray.origin.distanceTo(o))<e.near||w>e.far||n.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else for(m=0,v=(p=d.position.array).length/3-1;m<v;m+=u)s.fromArray(p,3*m),l.fromArray(p,3*m+3),Jt.distanceSqToSegment(s,l,o,c)>r||(o.applyMatrix4(this.matrixWorld),(w=e.ray.origin.distanceTo(o))<e.near||w>e.far||n.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(a instanceof t.Geometry){var b=a.vertices,x=b.length;for(m=0;m<x-1;m+=u){var w;Jt.distanceSqToSegment(b[m],b[m+1],o,c)>r||(o.applyMatrix4(this.matrixWorld),(w=e.ray.origin.distanceTo(o))<e.near||w>e.far||n.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}}}}),Qt.prototype.compareV3=function(e,t){var n=6*e,i=6*t;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]},Qt.prototype.copyV3=function(e){var t=6*e;return[this.positions[t],this.positions[t+1],this.positions[t+2]]},Qt.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=this.geometry.computeBoundingSphere())},Qt.prototype.process=function(){var e,n,i=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var r=0;r<i;r++)this.side.push(1),this.side.push(-1);for(r=0;r<i;r++)e=this.widthCallback?this.widthCallback(r/(i-1)):1,this.width.push(e),this.width.push(e);for(r=0;r<i;r++)this.uvs.push(r/(i-1),0),this.uvs.push(r/(i-1),1);for(n=this.compareV3(0,i-1)?this.copyV3(i-2):this.copyV3(0),this.previous.push(n[0],n[1],n[2]),this.previous.push(n[0],n[1],n[2]),r=0;r<i-1;r++)n=this.copyV3(r),this.previous.push(n[0],n[1],n[2]),this.previous.push(n[0],n[1],n[2]);for(r=1;r<i;r++)n=this.copyV3(r),this.next.push(n[0],n[1],n[2]),this.next.push(n[0],n[1],n[2]);for(n=this.compareV3(i-1,0)?this.copyV3(1):this.copyV3(i-1),this.next.push(n[0],n[1],n[2]),this.next.push(n[0],n[1],n[2]),r=0;r<i-1;r++){var o=2*r;this.indices_array.push(o,o+1,o+2),this.indices_array.push(o+2,o+1,o+3)}this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new t.BufferAttribute(new Float32Array(this.positions),3),previous:new t.BufferAttribute(new Float32Array(this.previous),3),next:new t.BufferAttribute(new Float32Array(this.next),3),side:new t.BufferAttribute(new Float32Array(this.side),1),width:new t.BufferAttribute(new Float32Array(this.width),1),uv:new t.BufferAttribute(new Float32Array(this.uvs),2),index:new t.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new t.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.setAttribute("position",this.attributes.position),this.geometry.setAttribute("previous",this.attributes.previous),this.geometry.setAttribute("next",this.attributes.next),this.geometry.setAttribute("side",this.attributes.side),this.geometry.setAttribute("width",this.attributes.width),this.geometry.setAttribute("uv",this.attributes.uv),this.geometry.setAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},Qt.prototype.advance=function(e){var t=this.attributes.position.array,n=this.attributes.previous.array,i=this.attributes.next.array,r=t.length;en(t,0,n,0,r),en(t,6,t,0,r-6),t[r-6]=e.x,t[r-5]=e.y,t[r-4]=e.z,t[r-3]=e.x,t[r-2]=e.y,t[r-1]=e.z,en(t,6,i,0,r-6),i[r-6]=e.x,i[r-5]=e.y,i[r-4]=e.z,i[r-3]=e.x,i[r-2]=e.y,i[r-1]=e.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},t.ShaderChunk.meshline_vert=["",t.ShaderChunk.logdepthbuf_pars_vertex,t.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float near;","uniform float far;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.xy *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float pixelWidth = finalPosition.w * pixelWidthRatio;","    float w = 1.8 * pixelWidth * lineWidth * width;","","    if( sizeAttenuation == 1. ) {","        w = 1.8 * lineWidth * width;","    }","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w =1.0 / max(dot(miter, dir1), 0.5);// clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec2 normal = vec2( -dir.y, dir.x );","    normal.x /= aspect;","    normal *= .5 * w;","","    vec4 offset = vec4( normal * side, 0.0, 1.0 );","    finalPosition.xy += offset.xy;","","    gl_Position = finalPosition;","",t.ShaderChunk.logdepthbuf_vertex,t.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",t.ShaderChunk.fog_vertex,"}"].join("\r\n"),t.ShaderChunk.meshline_frag=["",t.ShaderChunk.fog_pars_fragment,t.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float isTrip;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","uniform float isMax;","varying vec4 vColor;","varying float vCounters;","uniform vec3 colorTrip;","","void main() {","",t.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    if(isTrip==1.){","        if(c.a==0.0){","            gl_FragColor = vec4(colorTrip,1.0);}","        else { gl_FragColor = c;}","    }","    else if(isTrip==2.0){","         if(isMax==0.0){","           if(vCounters<dashOffset){","              gl_FragColor = vec4(colorTrip,1.0);","              }else{","              discard;}}","           else{","              if(vCounters>dashOffset){","                gl_FragColor = vec4(colorTrip,1.0);","                }else{","              discard;","              }}}","    else {gl_FragColor = c;}","    gl_FragColor.a *= step(vCounters, visibility);","",t.ShaderChunk.fog_fragment,"}"].join("\r\n"),tn.prototype=Object.create(t.ShaderMaterial.prototype),tn.prototype.constructor=tn,tn.prototype.isMeshLineMaterial=!0,tn.prototype.copy=function(e){return t.ShaderMaterial.prototype.copy.call(this,e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.near=e.near,this.far=e.far,this.dashArray.copy(e.dashArray),this.dashOffset.copy(e.dashOffset),this.dashRatio.copy(e.dashRatio),this.useDash=e.useDash,this.visibility=e.visibility,this.isTrip=e.isTrip,this.isMax=e.isMax,this.colorTrip=e.colorTrip,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this};class nn extends t.Object3D{constructor(e={}){super(),this.height=e.height||200,this.time=e.time||1,this.textureColor=new t.Color(e.textureColor)||new t.Color(1,0,0),this.color=new t.Color(e.color)||new t.Color(1,0,0),this.pointCount=e.pointCount||50,this.lineWidth=e.lineWidth/10||10,this.lineWidthA=e.lineWidthA/10||10,this.group=new t.Group,this.line=null,this.lineMesh=null,this.imgUrl=e.imgUrl||null,this.imgUrlA=e.imgUrlA||null,this.opacity=e.opacity||1,this.opacityA=e.opacityA||1,this.group.renderOrder=9,this.lineVisible=e.lineVisible||!0,this.dashArray=e.dashArray||.9,this.dashRatio=e.dashRatio||.9,this.dashOffset=e.dashOffset||0,this.isBloom=e.isBloom||!0,this.step=e.step||.018,this.stepY=e.stepY||!1,this.isCurve=e.isCurve||!1,this.isAnimate=e.isAnimate||!1,this.isCircle=e.isCircle||!1,this.circleStart=null,this.circleEnd=null}setData(e,n){let i=window.innerWidth,r=window.innerHeight;const o=new t.Vector2(i,r);let a=new t.Vector3;a.x=(n.x-e.x)/4,a.y=(n.y-e.y)/4,a.z=(n.z-e.z)/4+this.height;let s=new t.Vector3;s.x=(n.x-e.x)/2,s.y=(n.y-e.y)/2,s.z=(n.z-e.z)/2+this.height;let l=[];this.isCurve?(l.push(new t.Vector3(0,0,0)),l.push(new t.Vector3(n.x-e.x,n.y-e.y,n.z-e.z))):l=new t.CubicBezierCurve3(new t.Vector3(0,0,0),a,s,new t.Vector3(n.x-e.x,n.y-e.y,n.z-e.z)).getPoints(this.pointCount);var c=(new t.Geometry).setFromPoints(l);const u=new Qt;if(u.setGeometry(c,(function(e){return 1-e})),!this.isAnimate)if(this.lineMesh)this.lineMesh.geometry=u.geometry,this.lineMesh.updateMatrix(),this.updateMatrix();else{let e=new tn({color:this.textureColor,opacity:this.opacity,resolution:o,lineWidth:this.lineWidth,depthTest:!0,depthWrite:!0,blending:t.AdditiveBlending,transparent:this.opacity<1,side:t.DoubleSide,dashArray:this.dashArray,dashRatio:this.dashRatio,dashOffset:this.dashOffset,sizeAttenuation:!0});if(null!=this.imgUrl){const n=(new t.TextureLoader).load(this.imgUrl);e.map=n,e.useMap=!0}this.lineMesh=new t.Mesh(u.geometry,e),this.isBloom&&this.lineMesh.layers.enable(1),this.group.add(this.lineMesh)}if(this.lineVisible)if(this.line)u.setGeometry(c),this.line.geometry=u.geometry,this.line.updateMatrix(),this.updateMatrix();else{let e=new tn({opacity:this.opacityA,resolution:o,lineWidth:this.lineWidthA,depthTest:!0,depthWrite:!0,blending:t.AdditiveBlending,transparent:this.opacityA<1,side:t.DoubleSide,sizeAttenuation:!0});if(null!=this.imgUrlA){const n=(new t.TextureLoader).load(this.imgUrlA);e.map=n,e.useMap=!0}else e.color.set(this.color);u.setGeometry(c),this.line=new t.Mesh(u.geometry,e),this.group.add(this.line)}if(this.isCircle){if(!this.circleStart){const e=new t.CircleGeometry(this.lineWidthA,32),n=new t.MeshBasicMaterial({color:this.color});this.circleStart=new t.Mesh(e,n),this.group.add(this.circleStart)}this.circleEnd||(this.circleEnd=this.circleStart.clone(),this.group.add(this.circleEnd)),this.circleEnd.position.set(n.x-e.x,n.y-e.y,n.z-e.z)}this.position.set(e.x,e.y,e.z),(this.lineMesh||this.line)&&this.add(this.group)}update(e){this.isAnimate||(this.stepY?this.lineMesh.material.uniforms.dashOffset.value-=this.step:this.lineMesh.material.uniforms.dashOffset.value+=this.step)}dispose(){this.line&&(this.line.material.dispose(),this.line.material.map.dispose()),this.lineMesh&&(this.lineMesh.material.dispose(),this.lineMesh.material.map.dispose()),this.circleStart&&(this.circleStart.material.dispose(),this.circleStart.material.map.dispose()),this.circleEnd&&(this.circleEnd.material.dispose(),this.circleEnd.material.map.dispose())}}class rn extends t.Object3D{constructor(e={}){super(),this.width=e.width||2,this.vertices=e.vertices||[],this.time=e.time||1,this.color=e.color?new t.Color(e.color):new t.Color(1,0,0),this.colorTrip=e.colorTrip?new t.Color(e.colorTrip):new t.Color(1,0,0),this.dashOffset=e.Offset||.01,this.dashRatio=e.dashRatio||.5,this.dashArray=e.dashArray||.9,this.type=e.type||0,this._geometrytype="PolylineTrip",this.line=null,this.boundingBox=new t.Box3,this.offset=re(e.offset),this.imgUrl=e.imgUrl||null,this.isBloom=e.isBloom||!0,this.init()}init(){const e=new t.Vector3(1/0,1/0,.02),n=new t.Vector3(-1/0,-1/0,.02);var i=new t.BufferGeometry;let r=null;if(this.width<2)1===this.type?r=function(e){const n=ae(e.color),i=ae(e.colorTrip),r=e.time||1,o=e.dashOffset||.01,a=e.dashRatio||.5,s=e.dashArray||.9;return new t.RawShaderMaterial({uniforms:{time:{value:r},color:{value:n},colorTrip:{value:i},dashOffset:{value:o},dashRatio:{value:a},dashArray:{value:s}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n    attribute vec3 position;\n    attribute float counters;\n    varying float vCounters;\n    void main()\t{\n        vCounters=counters;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    precision mediump float;\n    precision mediump int;\n    uniform vec3 color;\n    uniform vec3 colorTrip;\n    uniform float time;\n    varying float vCounters;\n    uniform float dashOffset;\n    uniform float dashRatio;\n    uniform float dashArray;\n    void main() {\n        vec4 c = vec4( color, 1.0 );\n        float a=ceil(mod(vCounters+ dashOffset, dashArray) - (dashArray * dashRatio));\n        c.a *=a;\n        if(a==0.0)\n        {\n           gl_FragColor = vec4(colorTrip,1.0);\n        }\n        else\n        {\n            gl_FragColor=c;\n        }\n    }",side:t.FrontSide,transparent:!0})}({color:this.color,time:this.time,colorTrip:this.colorTrip,dashOffset:this.dashOffset,dashRatio:this.dashRatio,dashArray:this.dashArray}):2===this.type&&(r=function(e){const n=ae(e.color),i=ae(e.colorTrip),r=e.time||1,o=e.dashOffset||.01,a=e.dashRatio||.5,s=e.dashArray||.9,l=e.isMax||0;return new t.RawShaderMaterial({uniforms:{time:{value:r},color:{value:n},colorTrip:{value:i},dashOffset:{value:o},dashRatio:{value:a},dashArray:{value:s},isMax:{value:l}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n    attribute vec3 position;\n    attribute float counters;\n    attribute float max;\n    varying float vMax;\n    varying float vCounters;\n    void main()\t{\n        vCounters=counters;\n        vMax=max;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    precision mediump float;\n    precision mediump int;\n    uniform vec3 color;\n    uniform vec3 colorTrip;\n    uniform float time;\n    varying float vCounters;\n    varying float vMax;\n    uniform float dashOffset;\n    uniform float isMax;\n    uniform float dashRatio;\n    uniform float dashArray;\n    void main() {\n        if(isMax==0.0)\n        {\n            if(vCounters<dashOffset)\n            {\n               gl_FragColor = vec4(colorTrip,1.0);\n            }else{\n                discard;\n            }\n        }\n        else\n        {\n            if(vCounters>dashOffset)\n            {\n               gl_FragColor = vec4(colorTrip,1.0);\n            }else{\n                discard;\n            }\n        }\n    }",side:t.FrontSide,transparent:!0})}({color:this.color,time:this.time,colorTrip:this.colorTrip,dashOffset:this.dashOffset,dashRatio:this.dashRatio,dashArray:this.dashArray}));else{r=new tn({color:this.color,colorTrip:this.colorTrip,opacity:1,lineWidth:10*this.width,depthTest:!1,blending:t.AdditiveBlending,transparent:!0,side:t.FrontSide,dashOffset:this.dashOffset,dashRatio:this.dashRatio,dashArray:this.dashArray}),this.type>0&&(r.isTrip=this.type);let e=window.innerWidth,n=window.innerHeight;r.resolution.set(e,n)}const o=[],a=[];for(let t=0;t<this.vertices.length;t++)o.push(this.vertices[t][0]),o.push(this.vertices[t][1]),o.push(this.vertices[t][2]||.02),t<1?(e.x=this.vertices[t][0],e.y=this.vertices[t][1],e.z>this.vertices[t][2]&&(e.z=this.vertices[t][2]),n.x=this.vertices[t][0],n.y=this.vertices[t][1],n.z>this.vertices[t][2]&&(n.z=this.vertices[t][2])):(e.x>this.vertices[t][0]&&(e.x=this.vertices[t][0]),e.y>this.vertices[t][1]&&(e.y=this.vertices[t][1]),n.x<this.vertices[t][0]&&(n.x=this.vertices[t][0]),n.y<this.vertices[t][1]&&(n.y=this.vertices[t][1]),this.vertices[t][2]&&(e.z>this.vertices[t][2]&&(e.z=this.vertices[t][2]),n.z<this.vertices[t][2]&&(n.z=this.vertices[t][2])));for(let t=0;t<o.length;t+=3){o[t]-=e.x,o[t+1]-=e.y,o[t+2]-=e.z;var s=t/o.length;a.push(s)}if(this.width<2){const e=new Float32Array(o);i.setAttribute("position",new t.Float32BufferAttribute(e,3)),i.setAttribute("counters",new t.Float32BufferAttribute(a,1)),this.line=new t.Line(i,r),this.line.computeLineDistances(),this.line.matrixAutoUpdate=!1,this.line.updateMatrix()}else{const e=new Qt;if(e.setGeometry(o),this.line=new t.Mesh(e.geometry,r),this.isBloom&&this.line.layers.enable(1),null!=this.imgUrl){const e=(new t.TextureLoader).load(this.imgUrl);r.map=e,r.useMap=!0}this.line.matrixAutoUpdate=!1,this.line.updateMatrix()}this.position.addVectors(e,this.offset),this.add(this.line),this.renderOrder=1}setColor(e){this.line.material.color.copy(e),this.line.material.needsUpdate=!0}getColor(){return this.color.clone()}dispose(){this.line&&(this.line.geometry.dispose(),this.line.material.dispose()),this.prototype={}}update(){(this.line.material instanceof t.RawShaderMaterial||this.line.material instanceof tn)&&(2===this.type?(this.line.material.uniforms.dashOffset.value+=.01,this.line.material.uniforms.dashOffset.value>1&&(this.line.material.uniforms.dashOffset.value=0,1===this.line.material.uniforms.isMax.value?this.line.material.uniforms.isMax.value=0:this.line.material.uniforms.isMax.value=1)):this.line.material.uniforms.dashOffset.value-=.01)}}t.Ray.prototype.distanceToPlaneWithNegative=function(e){let t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:-(this.origin.dot(e.normal)+e.constant)/t};class on extends t.Object3D{constructor(e={}){super(e),this.type="trafficevent",this.name=e.name,this.style=Object.assign({bottom:{},middle:{},top:{},right:{}},e.style),this.source=e.source||"robocop",this.trafficType=e.trafficType||100,this.color="robocop"===this.source?new t.Color("#FF8B0A"):new t.Color("#D25454"),this.wireColor="robocop"===this.source?new t.Color("#FFC165"):new t.Color("#FF9393"),this.fontsize=e.fontsize||12,this.imgUrlMap=e.imgUrlMap,this.eventImg=e.eventImg,this.sizeAttenuation=e.sizeAttenuation||!1,this.iconSprite=null,this.itemScale=e.scale||1,this.trafficEventSprite=null,this.onlyAnimition=!0,this.init(e)}init(e){this.initBottom(),this.initMiddle(),this.initTop(),this.drawTrafficEventImg(e),this.initHover(),"robocop"===this.source&&this.initClick(),this.boundingSphere=new t.Sphere(new t.Vector3(0,0,2.5),2.5),this.boundingBox=new t.Box3(new t.Vector3(-1,-1,0),new t.Vector3(2,2,5)),setTimeout(()=>{Ut[this.trafficType].event||(Ut[this.trafficType].event={bottom:this.bottom.clone(),top:this.top.clone(),middle:this.middle.clone()})},0)}initBottom(){Ut[this.trafficType].event?this.bottom=Ut[this.trafficType].event.bottom.clone():this.bottom=function(e={}){const n=e.color||new t.Color("rgb(242, 202, 126)"),i=e.colorRing||new t.Color(1,0,0),r=e.radius1||10,o=e.radius2||20,a=e.width||4,s=new t.PlaneBufferGeometry(2*(o+a),2*(o+a),1,1),l=new t.RawShaderMaterial({uniforms:{color:{value:n},colorRing:{value:i},radius1:{value:r},radius2:{value:o},width:{value:a}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform vec3 color;\n    uniform vec3 colorRing;\n    varying vec3 vPosition;\n    uniform float radius1;\n    uniform float radius2;\n    uniform float width;\n\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        if(d<radius1){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(radius2<d && d<radius2+width){          \n            gl_FragColor = vec4(colorRing, 1.0);\n        }else{\n            discard;\n        }\n    }\n  ",side:t.FrontSide,transparent:!0});return new t.Mesh(s,l)}({color:this.color,colorRing:this.color,radius1:.25,radius2:.375,width:.05}),this.add(this.bottom)}initMiddle(){if(Ut[this.trafficType].event)this.middle=Ut[this.trafficType].event.middle.clone(),this.middle.position.z=Ut[this.trafficType].event.middle.position.z;else{const e=new t.CylinderBufferGeometry(.05,.05,4,32,1),n=new t.MeshBasicMaterial({color:this.color});this.middle=new t.Mesh(e,n),this.middle.rotateX(.5*Math.PI),this.middle.position.z=2}this.add(this.middle)}initTop(){if(this.iconSprite?this.iconSprite.visible=!0:this.drawIconImg(),Ut[this.trafficType].event)this.top=Ut[this.trafficType].event.top.clone(),this.top.position.z=Ut[this.trafficType].event.top.position.z;else{const e=It({color:this.color,colorRing0:this.color,colorRing1:this.color,colorRing2:this.color,radius1:.01,radius2:.6,width:.1});this.top=e,this.top.rotateX(.5*Math.PI),this.top.position.z=4.5}this.add(this.top)}initHover(){this.addEventListener("mouseover",cn),this.addEventListener("mouseleave",un)}removeHover(){this.removeEventListener("mouseover",cn),this.removeEventListener("mouseleave",un)}initClick(){this.addEventListener("mouseup",hn)}removeCilck(){this.removeEventListener("mouseup",hn)}getTopHeight(){const e=this.top.position.z;return this.scale.z*e}setSpriteStatus(e){this.trafficEventSprite.visible=e}releaseHover(){this.hoverObject&&(this.hoverObject.visible=!1),this.top.flag=!1,this.hoverState=!1}setColor(e){e&&(e=new t.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.middle.material.uniforms.color.value=this.color,this.top.material.uniforms.color.value=this.color)}setPosition(e){if(!e)return;const t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}drawIconImg(e={}){const n=e.iconWidth||72*this.itemScale,i=e.iconHeight||72*this.itemScale,r=(e.fontsize||this.itemScale,e.color||this.color),o=e.wireColor||this.wireColor,a=sn(n,i);var s=a.getContext("2d");const l=a.width/n,c=new Image;if(c.crossOrigin="Anonymous",this.imgUrlMap){const{icon:e}=this.imgUrlMap;c.src=e}else{const e=Ut[this.trafficType].icon;c.src=zt+e}c.addEventListener("load",()=>{s.fillStyle=an(r),s.strokeStyle=an(o),s.lineWidth=6,s.beginPath(),s.arc(.5*a.width,.5*a.height,.5*a.width-6,0,2*Math.PI),s.closePath(),s.fill(),s.stroke(),s.drawImage(c,Math.floor(16*this.itemScale*l),Math.floor(16*this.itemScale*l),Math.ceil(40*this.itemScale*l),Math.ceil(40*this.itemScale*l));const e=new t.Texture(a);e.minFilter=t.NearestFilter,e.magFilter=t.NearestFilter,e.anisotropy=4,e.needsUpdate=!0,this.iconSprite?this.iconSprite.material.map=e:(this.iconSprite=ln(n,i,e),this.iconSprite.position.z=4.5,this.add(this.iconSprite))})}drawTrafficEventImg(e={}){if(this.trafficEventSprite)this.trafficEventSprite.visible=!0;else{const n=3,i=e.fontsize||12*n,r=e.iconWidth||70*n,o=sn(r,e.iconHeight||22*n),a=e.color||this.color.clone(),s=o.width/r,l=o.getContext("2d");l.font="Bold "+i+"px Arial";const c=e.offset||new t.Vector3(0,0,6.5);(new Image).crossOrigin="Anonymous";const u=Ut[this.trafficType].name||e.eventName;l.fillStyle=an(a,.75),l.fillRect(0,0,o.width,o.height),l.fillStyle=an(a.multiplyScalar(1.2)),l.fillRect(0,0,.05*o.width,o.height),this.drawText(l,u,.1*o.width*s,(.52*o.height+4)*s,i*s,null,!0);const h=new t.Texture(o);h.anisotropy=16,h.minFilter=t.NearestFilter,h.magFilter=t.NearestFilter,h.needsUpdate=!0;const d=ln(o.width,o.height,h);this.trafficEventSprite=d,d.name=e.name,d.position.x=c.x,d.position.z=c.z,this.add(d)}}drawRobocopEventImg(){if(this.imgSprite)this.imgSprite.visible=!0;else{const e=.1,n=1920*e,i=1080*e,r=this,o=new t.Vector3(0,0,9);if(this.eventImg){const e=this.eventImg.slice(0,this.eventImg.indexOf("?")),a=new Image;a.crossOrigin="Anonymous",a.width=n,a.height=i,a.src=e,a.onload=function(e){const a=new t.Texture(this);a.anisotropy=4,a.minFilter=t.NearestFilter,a.magFilter=t.NearestFilter,a.needsUpdate=!0;const s=ln(n,i,a);s.material.transparent=!1,r.imgSprite=s,s.name="robocopEvent",s.position.x=o.x,s.position.z=o.z,r.add(s)}}}}drawText(e,n,i,r,o,a,s){e.fillStyle=an(a||new t.Color(1,1,1)),e.font=(s?"Bold ":"")+(Math.floor(o)||12)+"px Arial",e.fillText(n,Math.ceil(i),Math.ceil(r))}raycast(e,n){const i=[],r=new t.Sphere;r.copy(this.boundingSphere),r.applyMatrix4(this.matrixWorld);const o=e.ray.intersectsSphere(r);if(o){n.push({object:this,point:o,distance:e.ray.origin.distanceTo(o)});for(let t=0;t<this.children.length;t++){const n=this.children[t];n.visible&&n.raycast(e,i)}for(let t=0;t<i.length;t++){const n=i[t];n.distance=e.ray.origin.distanceTo(n.point)}if(i.sort((e,t)=>e.distance-t.distance),i.length)for(let e=0;e<i.length;e++)n.push(i[e]);return n}}faceToCamera(e){this.top.rotation.y=e.rotation.z;const t=e.rotation.z;this.trafficEventSprite&&(this.trafficEventSprite.rotation.y=t),this.iconSprite&&(this.iconSprite.rotation.y=e.rotation.z)}update(){this.hoverState}dispose(){const e=[];for(e.push(...this.children);e.length;){const t=e.pop();t.children&&t.children.length&&e.push(...t.children),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}function an(e,t){return"rgba("+255*e.r+","+255*e.g+","+255*e.b+","+(t=t||1)+")"}function sn(e,n){const i=document.createElement("canvas"),r=t.MathUtils.ceilPowerOfTwo(e);return i.width=r,i.height=n*r/e,i}function ln(e,n,i){const r=new t.MeshBasicMaterial({map:i,transparent:!0}),o=new t.PlaneBufferGeometry(.02*e,.02*n,1,1),a=new t.Mesh(o,r);return a.rotateX(.5*Math.PI),a}function cn(){this.trafficEventSprite?this.trafficEventSprite.visible=!0:this.drawTrafficEventImg(),this.hoverState=!0,this.iconSprite.scale.x=1.2,this.iconSprite.scale.y=1.2}function un(){this.iconSprite.scale.x=1,this.iconSprite.scale.y=1,this.top.scale.x=1,this.top.scale.y=1,this.hoverState=!1,this.clickState=!1,this.imgSprite&&(this.imgSprite.visible=!1),!this.onlyAnimition&&this.trafficEventSprite&&(this.trafficEventSprite.visible=!1)}function hn(){this.clickState=!0,this.imgSprite?this.imgSprite.visible=!0:this.drawRobocopEventImg()}class dn extends t.Object3D{constructor(e={}){super(),this.name=e.name||"";const n=new t.Texture;n.minFilter=t.LinearFilter,n.magFilter=t.LinearFilter;const i=new t.SpriteMaterial({map:n,depthTest:!1,depthWrite:!1});this.texture=n,this.material=i,this.sprite=new t.Sprite(this.material),this.borderThickness=4,this.fontface="Arial",this.fontsize=28,this.borderColor={r:255,g:255,b:255,a:1},this.backgroundColor={r:37,g:37,b:37,a:1},this.textColor={r:235,g:235,b:235,a:1},this.text=e.text||"";var r=new t.CylinderGeometry(.1,.1,15.5,3),o=new t.MeshBasicMaterial({color:"#FF6161"});this.cylinder=new t.Mesh(r,o),this.cylinder.rotation.x=.5*Math.PI,this.type=e.type||"others",this.traffic=I.others,this.group=new t.Group,this.group.add(this.sprite),this.group.add(this.cylinder),this.sprite.center=new t.Vector2(.4,0),this.add(this.group),this.update(),this.initTrafficType(this.type)}initTrafficType(e){const t=P+I[e];t&&(this.traffic=t)}setTextIcon(e,t){this.text!==e&&(this.text=e,t&&this.initTrafficType(t),this.update())}setTextColor(e){this.textColor.r=255*e.r,this.textColor.g=255*e.g,this.textColor.b=255*e.b,this.update()}update(){var e=this.text.length;const n=new Image;n.crossOrigin="Anonymous",n.src=P+"/img/incidentBackM.png",n.addEventListener("load",()=>{const i=new Image;i.crossOrigin="Anonymous",i.src=P+"/img/incidentBackL.png",i.addEventListener("load",()=>{const r=new Image;r.crossOrigin="Anonymous",r.src=P+"/img/incidentBackR.png",r.addEventListener("load",()=>{var o=document.createElement("canvas"),a=o.getContext("2d");o.width=t.Math.floorPowerOfTwo(150+32*e),o.height=t.Math.floorPowerOfTwo(58),a.drawImage(i,0,0,10,32),a.drawImage(r,40+32*e,0,10,32);var s=a.createPattern(n,"repeat-x");a.fillStyle=s,a.fillRect(10,0,30+32*e,32),n.width=150+o.width,a.fillStyle="#fff",a.font='28px "微软雅黑"',a.fillText(this.text,50,29);const l=new Image;if(l.crossOrigin="Anonymous",l.src=this.traffic,this.traffic)l.addEventListener("load",()=>{a.drawImage(l,10,5,28,28);const n=new t.Texture(o);n.needsUpdate=!0,this.sprite.material.map=n,this.texture=n,this.sprite.position.z=this.sprite.position.z+6,this.sprite.scale.set((150+32*e)/58*3,3,1)});else{const n=new t.Texture(o);n.needsUpdate=!0,this.sprite.material.map=n,this.texture=n,this.sprite.position.z=this.sprite.position.z+8,this.sprite.scale.set((150+32*e)/58*3,3,1)}})})})}dispose(){this.texture.dispose(),this.sprite.material.dispose(),this.sprite.material.map.dispose()}}class fn extends t.Object3D{constructor(e={}){super(),this.name=e.name||"",this.textType=e.textType||"traffic",this.imgUrl=e.imgUrl,this.imgUrlMap=e.imgUrlMap,this.scaleXYZ=e.scale||600;const n=new t.Texture;n.minFilter=t.LinearFilter,n.magFilter=t.LinearFilter,this.sizeAttenuation=e.sizeAttenuation||!0;const i=new t.SpriteMaterial({map:n,depthTest:!0,depthWrite:!0,transparent:!0});this.texture=n,this.material=i,this.sprite=new t.Sprite(this.material),this.sprite.center=new t.Vector2(0,0),this.borderThickness=4,this.fontface="Arial",this.fontsize=e.fontsize||360,this.borderColor={r:255,g:255,b:255,a:1},this.topBackgroundColor={r:255,g:0,b:0,a:1},this.backgroundColor={r:255,g:0,b:0,a:1},this.textColor={r:235,g:235,b:235,a:1},this.text=e.text||"",this.type="others",this.traffic=I.others,this.sizeAttenuation?(this.scaleXYZ=e.scale||600,this.fontsize=e.fontsize||360):(this.scaleXYZ=e.scale||.5,this.fontsize=e.fontsize||36),i.sizeAttenuation=this.sizeAttenuation,this.add(this.sprite),this.init(),this.initTrafficType(this.type)}initTrafficType(e){const t=P+I[e];t&&(this.traffic=t)}setTextIcon(e,t){this.text!==e&&(this.text=e,t&&this.initTrafficType(t),this.init())}setTextColor(e){this.textColor.r=255*e.r,this.textColor.g=255*e.g,this.textColor.b=255*e.b,this.init()}init(){var e=document.createElement("canvas"),n=e.getContext("2d");n.font="Bold "+this.fontsize+"px Arial";let i=this.text.split("/n");if(i.length>0){const r=n.measureText(i[0]),o=r.width/i[0].length,a=r.width,s=2*a,l=t.MathUtils.floorPowerOfTwo(s)/s;e.width=s*l,e.height=s*l;const c=new Image;c.crossOrigin="Anonymous";const u=new Image;u.crossOrigin="Anonymous";const h=new Image;if(h.crossOrigin="Anonymous",this.imgUrlMap){const{back:e,icon:t,right:n}=this.imgUrlMap;c.src=P+e,u.src=P+t,h.src=P+n}else"car"===this.textType?(c.src=P+I.carBack,u.src=P+I.carIcon,h.src=P+I.carRight):"service"===this.textType?(c.src=P+I.serviceBack,u.src=P+I.serviceIcon,h.src=P+I.serviceRight):(c.src=P+I.trafficBack,u.src=P+this.traffic,h.src=P+I.tarfficRight);if(this.traffic){const r=new Promise(e=>{c.addEventListener("load",()=>{n.drawImage(c,0,0,.3*a*l,10*o*l),e()})}),s=new Promise(e=>{u.addEventListener("load",()=>{e()})}),d=new Promise(e=>{h.addEventListener("load",()=>{n.drawImage(h,.4*a*l,0,1.8*a*l,a*l),e()})});Promise.all([r,s,d]).then(()=>{"car"===this.textType?(n.drawImage(u,.05*a*l,.05*a*l,.2*a*l,.2*a*l),this.carCanvas(n,i,a,o)):(this.textType,n.drawImage(u,.05*a*l,200*l,.2*a*l,.2*a*l),this.trafficCanvas(n,i,a));const r=new t.Texture(e);r.needsUpdate=!0,this.sprite.material.map=r,this.texture=r,this.sprite.scale.set(this.scaleXYZ,this.scaleXYZ,1)})}}}carCanvas(e,t,n,i){e.fillStyle="rgba(255,255,255,0.8)",e.font="Bold "+this.fontsize+"px Arial",e.fillText(t[0],.7*n,.25*n),t[1]&&(e.fillStyle="rgba(255,255,255,1)",e.font="Bold "+1.8*parseFloat(this.fontsize)+"px Arial",e.fillText(t[1],.7*n,.8*n)),t[2]&&(e.fillStyle="rgba(255,255,255,0.8)",e.font="Bold "+.8*parseFloat(this.fontsize)+"px Arial",e.fillText(t[2],1.7*n,.65*n)),t[3]&&(e.fillStyle="rgba(255,255,255,0.7)",e.font="Bold "+.5*parseFloat(this.fontsize)+"px Arial",e.fillText(t[3],1.7*n,.8*n))}trafficCanvas(e,t,n){e.fillStyle="rgba(255,255,255,0.8)",e.font="Bold "+this.fontsize+"px Arial",e.fillText(t[0],.7*n,.25*n),t[1]&&(e.fillStyle="rgba(255,255,255,0.6)",e.font=.5*parseFloat(this.fontsize)+"px Arial",e.fillText(t[1],.7*n,.6*n)),t[2]&&(e.fillStyle="rgba(255,255,255,0.8)",e.font="Bold "+.5*parseFloat(this.fontsize)+"px Arial",e.fillText(t[2],.7*n+e.measureText(t[1]).width,.6*n)),t[3]&&(e.fillStyle="rgba(255,255,255,0.6)",e.font=.5*parseFloat(this.fontsize)+"px Arial",e.fillText(t[3],.7*n,.8*n)),t[4]&&(e.fillStyle="rgba(255,255,255,0.8)",e.font="Bold "+.5*parseFloat(this.fontsize)+"px Arial",e.fillText(t[4],.7*n+e.measureText(t[3]).width,.8*n))}dispose(){this.texture.dispose(),this.sprite.material.dispose(),this.sprite.material.map.dispose()}}class pn extends t.Object3D{constructor(e){super(e),this._level=0,this.url="",this.mapLayer=e.mapLayer,this.boundingBox=e.boundingBox,this.boundingSphere=e.boundingBox?e.boundingBox.getBoundingSphere(new t.Sphere):null,this.loaded=!1,this.loading=!1,this.childTiles=[],this.parentTile=null,this.numGeometries=0,this.spacing=0}load(){!0===this.loading||!0===this.loaded||Ct()>=At()||(this.loading=!0,Tt(),this.loadGeometries())}loadGeometries(){this.mapLayer&&this.mapLayer.loader?this.mapLayer.loader.load(this):console.error("未定义mapLayer.loader")}isLoaded(){return this.loaded}get level(){return this._level}set level(e){this._level=e}getUrl(){return this.url}setUrl(e){if(e){const{name:t,fileType:n}=Qe.getNameByUrl(e);this.name=t,this.fileType=n,this.url=e}}getChildren(){let e=[];for(let t=0;t<this.children.length;t++)e.push(this.children[t]);return e}getChildTiles(){const e=[];for(let t=0;t<this.childTiles.length;t++)e.push(this.childTiles[t]);return e}getNumGeometries(){return this.numGeometries}addGeometry(e){e&&(this.add(e),e.matrixWorld.multiplyMatrices(e.parent.matrixWorld,e.matrix),e.updateMatrix(),this.numGeometries++)}removeGeometry(e){e&&(this.remove(e),this.numGeometries--)}getBoundingBox(){if(this.boundingBox)return this.boundingBox.clone()}setBoundingBox(e){e&&(this.boundingBox.copy(oe(e)),this.boundingSphere=this.boundingBox.getBoundingSphere())}getBoundingSphere(){if(this.boundingSphere)return this.boundingSphere.clone()}setBoundingSphere(e){e&&(this.boundingSphere.copy(e),this.boundingBox=this.boundingSphere.getBoundingBox())}setPosition(e){e&&this.position.copy(re(e))}updateMatrixWorld(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}hideDescendants(){let e=[this];for(;e.length>0;){let t=e.shift();t.visible=!1;for(let n=0;n<t.childTiles.length;n++){let i=t.childTiles[n];i.visible&&e.push(i)}}}createChildTiles(){if(this.level>=this.mapLayer.deepestVisibleLevel)return[];for(let e=0;e<4;e++){const t=mn(this.boundingBox,e),n=new pn({mapLayer:this.mapLayer,boundingBox:t});n.level=this.level+1,n.name=this.name+"-"+e,n.fileType=this.fileType,n.url=this.mapLayer.baseUri+n.level+"/"+n.name+"."+n.fileType,n.parentTile=this,n.spacing=.5*this.spacing,n.position.z=.1*n.level,this.mapLayer.add(n),n.updateMatrixWorld(),this.childTiles.push(n)}return this.childTiles}dispose(){if(this.children&&null!=this.parent){for(let e=0;e<this.children.length;e++)this.children[e].geometry&&(this.children[e].geometry.dispose(),this.children[e].geometry=null),this.children[e].material&&(this.children[e].material.dispose(),this.children[e].material=null),this.remove(this.children[e]);this.childrenTile={},this.children=[],this.loaded=!1,this.numGeometries=0}}}function mn(e,n){let i=e.min.clone(),r=e.max.clone(),o=(new t.Vector3).subVectors(r,i);return n<1?(r.x-=.5*o.x,i.y+=.5*o.y):n<2?(i.x+=.5*o.x,i.y+=.5*o.y):n<3?(r.x-=.5*o.x,r.y-=.5*o.y):(r.y-=.5*o.y,i.x+=.5*o.x),new t.Box3(i,r)}class vn{constructor(e,t){this.name="MapTileLoader",this.mapLayer=e,this.workerUrl=null,this.debuggerMode=t||!1}load(e){if(e.loaded)return;e.loading=!0;const t=e.getUrl();Mt.getItem(t).then(n=>{if(n)this.onmessage(n,e);else if(this.debuggerMode){const n=dt.getWorkService("./workers/jsonWorker.js");n.onMessage=i=>{this.saveAttribute2DB(t,i),this.onmessage(i,e),dt.returnWorker("./workers/jsonWorker.js",n)},n.postMessage({url:t})}else(async()=>{if(!this.workerUrl){const e=await y.get("https://mapdata.bj.bcebos.com/maptv/workers/jsonWorker.js").then(({data:e})=>e);this.workerUrl=window.URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}const n=dt.getWorkService(this.workerUrl);n.onMessage=i=>{this.saveAttribute2DB(t,i),this.onmessage(i,e),dt.returnWorker(this.workerUrl,n)},n.postMessage({url:t})})()})}generateObject(e,t,n){if(!t)return;const i=this.mapLayer.style?this.mapLayer.style[e]:j[e];if(!i)return console.log(e+",缺少样式"),null;let r;switch(e.toLowerCase()){case"crosswalk":case"road":case"arrow":r=Ye(i,t,!0);break;case"lanesolidwhite":case"lanedottedwhite":case"lanedottedyellow":case"lanesolidyellow":case"roadedge":case"stopline":r=qe(i,t,!0);break;case"building":r=$e(i,t,!0);break;case"mountain":r=qe(i,t,!0);break;case"grass":r=Ye(i,t,!0);break;case"linktownshiproad":case"linkhightway":case"linkexpressway":case"linknproad":case"linkcountyroad":case"linkother":r=qe(i,t,!0);break;case"river":r=Ye(i,t,!0,"river"),i.speed?r.speed=i.speed:r.speed=400,r.update=function(){const e=new Date;"waterFive"===this.material.name?this.material.uniforms.iTime.value+=4/this.speed:this.material.uniforms.iTime.value=.1*e.getSeconds()+1e-4*e.getMilliseconds()}}r&&(r.name=e,"building"===e?(r.building.name=e,n.addGeometry(r.building),r.outline&&(r.outline.name="building_outline",n.addGeometry(r.outline))):"river"===e?(n.addGeometry(r),n.update||(n.update=()=>{for(let e=0;e<n.children.length;e++)n.children[e].update&&n.children[e].update()})):n.addGeometry(r))}onmessage(e,t){const n=Object.keys(e);if(n.length)for(let i=0;i<n.length;i++){const r=n[i],o=e[r];this.generateObject(r,o,t)}t.loaded=!0,Et(),t.loading=!1}saveAttribute2DB(e,t){const n=Object.keys(t);let i={};if(n.length){window.millisecond||(window.millisecond=(new Date).getTime());for(let e=0;e<n.length;e++){const r=n[e],o=t[r];if(o){i[r]=Object.assign({},o),t[r].geometry=o.geometry.attributes;for(let e in o)if("geometry"===e){i[r][e]={};for(let t in o[e])i[r][e][t]=o[e][t]}}else delete t[r]}}Mt.setItem(e,i)}}class gn extends t.Object3D{constructor(e){super(e),this.root=[],this.boundingBox=null,this.center=null,this.url=e.url||null,this.loaded=!1,this.spacing=0,this.style=null,this._visible=!0,this.minimumTilePixelSize=64,this.numVisibleGeometries=0,this.numVisibleTiles=0,this.visibleTiles=new Map,this.deepestVisibleLevel=6,this.maxVisibledLevel=0,this.geometryBudget=Math.min(Math.max(e.geometryBudget||500,50),5e3),this.loader=new vn(this,e.debuggerMode),this.initCallback=e.initCallback||null}isLoaded(){return this.loaded}isInitialized(){return this.loaded}initialized(){this.baseUri=function(e){const t=e.lastIndexOf("/");return e.substring(0,t+1)}(this.url),this.loaded=!0,this.initCallback&&this.initCallback()}initRootTile(e,t=0){for(let n=0;n<e.length;n++){const i=oe(e[n].bbox),r=new pn({mapLayer:this,boundingBox:i.translate(this.position.clone().negate())});r.name=e[n].name,r.fileType=e[n].fileType||"geojson",r.level=t,r.spacing=this.spacing/e.length,r.setUrl(this.baseUri+t+"/"+r.name+"."+r.fileType),this.add(r),r.updateMatrixWorld(),this.root.push(r)}}updateMatrixWorld(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!1);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}nodesOnRay(e,t){let n=[],i=t.clone();for(let t=0;t<e.length;t++){let r=e[t],o=r.getBoundingSphere().clone().applyMatrix4(this.matrixWorld);i.intersectsSphere(o)&&n.push(r)}return n}getBoundingBoxWorld(){this.updateMatrixWorld(!0);let e=this.boundingBox,t=this.matrixWorld;return Qe.computeTransformedBoundingBox(e,t)}getTilesByName(e){let t=[];for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty("name",e);void 0!==i&&t.push(i)}return t}addTile(e){this.visibleTiles.set(e.name,e),this.add(e)}removeTile(e){this.visibleTiles.has(e.name)&&this.visibleTiles.delete(e.name),this.remove(e),e.dispose()}setVisible(e){this._visible=e}getVisible(){return this._visible}setStyle(e){this.style?Object.assign(this.style,e):this.style=e}getStyle(){return JSON.parse(JSON.stringify(this.style))}update(){}dispose(){for(let e=0;e<this.children.length;e++){const t=this.children[e];this.removeTile(t)}this.visibleTiles=null,this.numVisibleGeometries=0,this.numVisibleTiles=0}}var yn=function(e){t.Loader.call(this,e),this.littleEndian=!0};yn.prototype=Object.assign(Object.create(t.Loader.prototype),{constructor:yn,load:function(e,n,i,r){var o=this,a=new t.FileLoader(o.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.load(e,(function(t){try{n(o.parse(t,e))}catch(t){r?r(t):console.error(t),o.manager.itemError(e)}}),i,r)},parse:function(e,n){var i=t.LoaderUtils.decodeText(new Uint8Array(e)),r=function(e){var t={},n=e.search(/[\r\n]DATA\s(\S*)\s/i),i=/[\r\n]DATA\s(\S*)\s/i.exec(e.substr(n-1));if(t.data=i[1],t.headerLen=i[0].length+n,t.str=e.substr(0,t.headerLen),t.str=t.str.replace(/\#.*/gi,""),t.version=/VERSION (.*)/i.exec(t.str),t.fields=/FIELDS (.*)/i.exec(t.str),t.size=/SIZE (.*)/i.exec(t.str),t.type=/TYPE (.*)/i.exec(t.str),t.count=/COUNT (.*)/.exec(t.str),t.width=/WIDTH (.*)/i.exec(t.str),t.height=/HEIGHT (.*)/i.exec(t.str),t.viewpoint=/VIEWPOINT (.*)/i.exec(t.str),t.points=/POINTS (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),null!==t.fields&&(t.fields=t.fields[1].split(" ")),null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1],10)),null!==t.height&&(t.height=parseInt(t.height[1],10)),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map((function(e){return parseInt(e,10)}))),null!==t.count)t.count=t.count[1].split(" ").map((function(e){return parseInt(e,10)}));else{t.count=[];for(var r=0,o=t.fields.length;r<o;r++)t.count.push(1)}t.offset={};var a=0;for(r=0,o=t.fields.length;r<o;r++)"ascii"===t.data?t.offset[t.fields[r]]=r:(t.offset[t.fields[r]]=a,a+=t.size[r]*t.count[r]);return t.rowSize=a,t}(i),o=[],a=[],s=[],l=[],c=[];if("ascii"===r.data)for(var u=r.offset,h=i.substr(r.headerLen).split("\n"),d=0,f=h.length;d<f;d++)if(""!==h[d]){var p=h[d].split(" ");if(void 0!==u.x&&(o.push(parseFloat(p[u.x])),o.push(parseFloat(p[u.y])),o.push(parseFloat(p[u.z]))),void 0!==u.intensity&&a.push(parseFloat(p[u.intensity])),void 0!==u.label&&s.push(parseInt(p[u.label],10)),void 0!==u.rgb){var m=parseFloat(p[u.rgb]),v=m>>16&255,g=m>>8&255,y=m>>0&255;c.push(v/255,g/255,y/255)}void 0!==u.normal_x&&(l.push(parseFloat(p[u.normal_x])),l.push(parseFloat(p[u.normal_y])),l.push(parseFloat(p[u.normal_z])))}if("binary_compressed"===r.data){var b=new Uint32Array(e.slice(r.headerLen,r.headerLen+8)),x=b[0],w=b[1],_=function(e,t){var n,i,r,o=e.length,a=new Uint8Array(t),s=0,l=0;do{if((n=e[s++])<32){if(l+ ++n>t)throw new Error("Output buffer is not large enough");if(s+n>o)throw new Error("Invalid compressed data");do{a[l++]=e[s++]}while(--n)}else{if(i=n>>5,r=l-((31&n)<<8)-1,s>=o)throw new Error("Invalid compressed data");if(7===i&&(i+=e[s++],s>=o))throw new Error("Invalid compressed data");if(r-=e[s++],l+i+2>t)throw new Error("Output buffer is not large enough");if(r<0)throw new Error("Invalid compressed data");if(r>=l)throw new Error("Invalid compressed data");do{a[l++]=a[r++]}while(2+--i)}}while(s<o);return a}(new Uint8Array(e,r.headerLen+8,x),w),S=new DataView(_.buffer);for(u=r.offset,d=0;d<r.points;d++)void 0!==u.x&&(o.push(S.getFloat32(r.points*u.x+r.size[0]*d,this.littleEndian)),o.push(S.getFloat32(r.points*u.y+r.size[1]*d,this.littleEndian)),o.push(S.getFloat32(r.points*u.z+r.size[2]*d,this.littleEndian))),void 0!==u.rgb&&(c.push(S.getUint8(r.points*u.rgb+r.size[3]*d+0)/255),c.push(S.getUint8(r.points*u.rgb+r.size[3]*d+1)/255),c.push(S.getUint8(r.points*u.rgb+r.size[3]*d+2)/255)),void 0!==u.intensity&&a.push(S.getFloat32(r.points*u.intensity+r.size[4]*d,this.littleEndian)),void 0!==u.label&&s.push(S.getUint8(r.points*u.label+r.size[5])),void 0!==u.normal_x&&(l.push(S.getFloat32(r.points*u.normal_x+r.size[6]*d,this.littleEndian)),l.push(S.getFloat32(r.points*u.normal_y+r.size[7]*d,this.littleEndian)),l.push(S.getFloat32(r.points*u.normal_z+r.size[8]*d,this.littleEndian)))}if("binary"===r.data){S=new DataView(e,r.headerLen),u=r.offset,d=0;for(var M=0;d<r.points;d++,M+=r.rowSize)void 0!==u.x&&(o.push(S.getFloat32(M+u.x,this.littleEndian)),o.push(S.getFloat32(M+u.y,this.littleEndian)),o.push(S.getFloat32(M+u.z,this.littleEndian))),void 0!==u.intensity&&a.push(S.getUint8(M+u.intensity,this.littleEndian)),void 0!==u.label&&s.push(S.getUint8(M+u.label,this.littleEndian)),void 0!==u.rgb&&(c.push(S.getUint8(M+u.rgb+2)/255),c.push(S.getUint8(M+u.rgb+1)/255),c.push(S.getUint8(M+u.rgb+0)/255)),void 0!==u.normal_x&&(l.push(S.getFloat32(M+u.normal_x,this.littleEndian)),l.push(S.getFloat32(M+u.normal_y,this.littleEndian)),l.push(S.getFloat32(M+u.normal_z,this.littleEndian)))}var T=new t.BufferGeometry;o.length>0&&T.setAttribute("position",new t.Float32BufferAttribute(o,3)),l.length>0&&T.setAttribute("normal",new t.Float32BufferAttribute(l,3)),c.length>0&&T.setAttribute("color",new t.Float32BufferAttribute(c,3)),a.length>0&&T.setAttribute("intensity",new t.Int16BufferAttribute(a,1)),s.length>0&&T.setAttribute("label",new t.Int16BufferAttribute(s,1)),T.computeBoundingSphere();var E=new t.PointsMaterial({size:1,sizeAttenuation:!1});c.length>0?E.vertexColors=!0:E.color.setHex(16777215*Math.random());var C=new t.Points(T,E),A=n.split("").reverse().join("");const O=(A=(A=/([^\/]*)/.exec(A))[1].split("").reverse().join("")).slice(0,A.lastIndexOf("."));let L=16*parseInt(O.split("_")[0],10),k=16*parseInt(O.split("_")[1],10);return C.position.x+=L,C.position.y+=k,C.position.z-=1e4,C.name=A,C}});const bn=function(e){t.Loader.call(this,e),this.decoderPath="./workers",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};bn.prototype=Object.assign(Object.create(t.Loader.prototype),{constructor:bn,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,n,i,r){St.getItem(e).then(o=>{if(o){for(let e in o.attributes)o.attributes[e]=(new t.BufferAttribute).copy(o.attributes[e]);o.index&&(o.index=(new t.BufferAttribute).copy(o.index)),n((new t.BufferGeometry).copy(o))}else{const o=new t.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&o.setWithCredentials(!0),o.load(e,t=>{console.log((new Date).getTime(),"start parse");const i={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,i).then(t=>{St.setItem(e,t),n(t)}).catch(r)},i,r)}})},decodeDracoFile:function(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)},decodeGeometry:function(e,t){for(let e in t.attributeTypes){const n=t.attributeTypes[e];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=n.name)}const n=JSON.stringify(t);if(bn.taskCache.has(e)){const t=bn.taskCache.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(n=>(i=n,new Promise((n,o)=>{i._callbacks[r]={resolve:n,reject:o},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),bn.taskCache.set(e,{key:n,promise:a}),a},_createGeometry:function(e){const n=new t.BufferGeometry;e.index&&n.setIndex(new t.BufferAttribute(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],o=r.name,a=r.array,s=r.itemSize;n.setAttribute(o,new t.BufferAttribute(a,s))}return n},_loadLibrary:function(e,n){const i=new t.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),new Promise((t,n)=>{i.load(e,t,void 0,n)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=bn.DRACOWorker.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),bn.DRACOWorker=function(){let e,t;function n(e,t,n,i,r,o){const a=o.num_components(),s=n.num_points()*a;let l,c;switch(r){case Float32Array:l=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,l),c=new Float32Array(s);break;case Int8Array:l=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,l),c=new Int8Array(s);break;case Int16Array:l=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,l),c=new Int16Array(s);break;case Int32Array:l=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,l),c=new Int32Array(s);break;case Uint8Array:l=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,l),c=new Uint8Array(s);break;case Uint16Array:l=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,l),c=new Uint16Array(s);break;case Uint32Array:l=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,l),c=new Uint32Array(s);break;default:throw new Error("DRACOLoader: Unexpected attribute type.")}for(let e=0;e<s;e++)c[e]=l.GetValue(e);return e.destroy(l),{name:i,array:c,itemSize:a}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const i=r.buffer,o=r.taskConfig;t.then(e=>{const t=e.draco,a=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(i),i.byteLength);try{const e=function(e,t,i,r){const o=r.attributeIDs,a=r.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeBufferToMesh(i,s);else{if(c!==e.POINT_CLOUD)throw new Error("DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeBufferToPointCloud(i,s)}if(!l.ok()||0===s.ptr)throw new Error("DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(let i in o){const l=self[a[i]];let c,h;if(r.useUniqueIDs)h=o[i],c=t.GetAttributeByUniqueId(s,h);else{if(h=t.GetAttributeId(s,e[o[i]]),-1===h)continue;c=t.GetAttribute(s,h)}u.attributes.push(n(e,t,s,i,l,c))}if(c===e.TRIANGULAR_MESH){const n=s.num_faces(),i=new Uint32Array(3*n),r=new e.DracoInt32Array;for(let e=0;e<n;++e){t.GetFaceFromMesh(s,e,r);for(let t=0;t<3;++t)i[3*e+t]=r.GetValue(t)}u.index={array:i,itemSize:1},e.destroy(r)}return e.destroy(s),u}(t,a,s,o),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(s),t.destroy(a)}})}}},bn.taskCache=new WeakMap,bn.setDecoderPath=function(){console.warn("DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},bn.setDecoderConfig=function(){console.warn("DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},bn.releaseDecoderModule=function(){console.warn("DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},bn.getDecoderModule=function(){console.warn("DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var xn=function(){je.call(this),this.type="LineGeometry"};xn.prototype=Object.assign(Object.create(je.prototype),{constructor:xn,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,n=new Float32Array(2*t),i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return je.prototype.setPositions.call(this,n),this},setPositionsMerge:function(e){return je.prototype.setPositions.call(this,e),this},setColors:function(e){for(var t=e.length-3,n=new Float32Array(2*t),i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return je.prototype.setColors.call(this,n),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},copy:function(){return this}});var wn=function(e,t){Ve.call(this),this.type="Line2",this.geometry=void 0!==e?e:new xn,this.material=void 0!==t?t:new Ne({color:16777215*Math.random()})};wn.prototype=Object.assign(Object.create(Ve.prototype),{constructor:wn,isLine2:!0});class _n extends t.Object3D{constructor(e={}){super(),this.vertices=e.vertices||[],this.color=ae(e.color),this.width=e.width?Math.floor(e.width):1,this.sizeAttenuation=e.sizeAttenuation||1,this.opacity=e.opacity||1,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this.line=null,this.offset=re(e.offset),this.boundingBox=new t.Box3,this._geometryType="line",this.init()}init(){const e=new t.Vector3(1/0,1/0,1/0),n=new t.Vector3(-1/0,-1/0,-1/0),i=[],r=[];if(!(this.vertices.length<1)){for(let t=0;t<this.vertices.length;t++)i.push(this.vertices[t][0]),i.push(this.vertices[t][1]),i.push(this.vertices[t][2]||.02),e.x>this.vertices[t][0]&&(e.x=this.vertices[t][0]),e.y>this.vertices[t][1]&&(e.y=this.vertices[t][1]),n.x<this.vertices[t][0]&&(n.x=this.vertices[t][0]),n.y<this.vertices[t][1]&&(n.y=this.vertices[t][1]),this.vertices[t][2]&&(e.z>this.vertices[t][2]&&(e.z=this.vertices[t][2]),n.z<this.vertices[t][2]&&(n.z=this.vertices[t][2]));this.vertices[0][2]||(e.z=0,n.z=.02);for(let t=0;t<i.length;t+=3)i[t]-=e.x,i[t+1]-=e.y,i[t+2]-=e.z,r.push(i[t],i[t+1],i[t+2]);this.width<2?this.line=function(e,n,i={}){let r=new t.LineBasicMaterial({color:i.color,precision:"mediump"});i.dashSize&&i.gapSize&&(r=new t.LineDashedMaterial({color:i.color,dashSize:i.dashSize,gapSize:i.gapSize,precision:"mediump"}));const o=new t.BufferGeometry;o.setAttribute("position",new t.Float32BufferAttribute(e,3));const a=new t.Line(o,r);return i.dashSize&&i.gapSize&&a.computeLineDistances(),r=null,a}(i,0,{color:this.color,dashSize:this.dashSize,gapSize:this.gapSize}):this.line=Sn(r,0,{color:this.color,dashSize:this.dashSize,gapSize:this.gapSize,width:this.width,opacity:this.opacity,sizeAttenuation:this.sizeAttenuation}),this.vertices=null,this.add(this.line),this.position.x=e.x+this.offset.x,this.position.y=e.y+this.offset.y,this.position.z=e.z+this.offset.z,this.boundingBox.min=(new t.Vector3).addVectors(e,this.offset),this.boundingBox.max=(new t.Vector3).addVectors(n,this.offset),this.matrixAutoUpdate=!1,this.updateMatrix()}}setVertices(e){e.length<2?console.log("2 points at less"):(this.line&&this.dispose(),this.vertices=e,this.init())}setColor(e){e=ae(e),this.line.material.color.copy(e),this.line.material.needsUpdate=!0,this.color=e}getColor(){return this.color.clone()}setOffset(e){e=re(e),this.position.x+=e.x-this.offset.x,this.position.y+=e.y-this.offset.y,this.position.z+=e.z-this.offset.z,this.offset=e}setWidth(e){if((e=Math.floor(e)||1)!==this.width){if(e>1&&this.width>1)this.line.material.linewidth=e,this.line.material.needsUpdate=!0;else if(e>1&&this.width<2){const t=Sn(this.line.geometry.attributes.position.array,0,{color:this.color,width:e,opacity:this.opacity,dashSize:this.dashSize,gapSize:this.gapSize});this.line.geometry.dispose(),this.line.material.dispose(),this.line=null,this.line=t}else this.line.material.linewidth=e,this.line.material.needsUpdate=!0;this.width=e}}dispose(){this.line&&(this.line.geometry.dispose(),this.line.material.dispose()),this.line=null,this.prototype={},this.position.set(0,0,0)}}function Sn(e,t,n={}){const i=new Ne({dashed:!(!n.dashSize||!n.gapSize),linewidth:n.width,opacity:n.opacity||1,tranparent:n.opacity<1,depthWrite:this.opacity>=1,color:n.color,precision:"mediump"});i.resolution.set(window.innerWidth,window.innerHeight),n.dashSize&&n.gapSize?(i.dashSize=n.dashSize||1,i.gapSize=n.gapSize||1,i.defines.USE_DASH=""):delete i.defines.USE_DASH,i.resolution.set(window.innerWidth,window.innerHeight);const r=new xn;r.setPositions(e);const o=new wn(r,i);return n.dashSize&&n.gapSize&&o.computeLineDistances(),o}class Mn extends t.Object3D{constructor(e={}){super(),this.name=e.name||"",this.vertices=e.vertices||[],this.color=ae(e.color),this.size=e.size||4,this.opacity=e.opacity||1,this.map=e.map||null,this.offset=re(e.offset),this.sizeAttenuation=e.sizeAttenuation||!1,this._geometryType="point",this.point=null,this.boundingBox=new t.Box3,this.init()}init(){if(this.vertices.length<1)return!1;const e=new t.PointsMaterial({color:this.color,size:this.size,precision:"mediump",opacity:this.opacity,sizeAttenuation:this.sizeAttenuation,transparent:this.opacity<1,depthWrite:this.opacity>=1});if(this.map){const n=(new t.TextureLoader).load(this.map);n.wrapS=t.RepeatWrapping,n.wrapT=t.RepeatWrapping,e.map=n}const n=new t.BufferGeometry,i=[],r=new t.Vector3(1/0,1/0,.1),o=new t.Vector3(-1/0,-1/0,.1);for(let e=0,t=this.vertices.length;e<t;e++)i.push(this.vertices[e][0]),i.push(this.vertices[e][1]),i.push(this.vertices[e][2]||.1),r.x>this.vertices[e][0]&&(r.x=this.vertices[e][0]),o.x<this.vertices[e][0]&&(o.x=this.vertices[e][0]),r.y>this.vertices[e][1]&&(r.y=this.vertices[e][1]),o.y<this.vertices[e][1]&&(o.y=this.vertices[e][1]),void 0!==this.vertices[e][2]&&(r.z>this.vertices[e][2]&&(r.z=this.vertices[e][2]),o.z<this.vertices[e][2]&&(o.z=this.vertices[e][2]));for(let e=0;e<i.length;e+=3)i[e]-=r.x,i[e+1]-=r.y,i[e+2]-=r.z;this.boundingBox.set(r,o);const a=new Float32Array(i);n.setAttribute("position",new t.BufferAttribute(a,3)),this.point=new t.Points(n,e),this.point.matrixAutoUpdate=!1,this.point.updateMatrix(),this.add(this.point),this.position.addVectors(r,this.offset),this.renderOrder=2,this.vertices=[]}setVertices(e){e.length<1?console.log("1 point at less"):(this.point&&this.dispose(),this.vertices=e,this.init())}setColor(e){e=ae(e),this.point.material.color.copy(e),this.point.material.needsUpdate=!0,this.color=e}getColor(){return this.color.clone()}setSize(e){(e=Math.floor(e))!==this.size&&(this.point.material.size=e,this.point.material.needsUpdate=!0,this.size=e)}getSize(){return this.size}setMap(e){if(this.map&&e===this.map)return;const n=(new t.TextureLoader).load(e);n.wrapS=t.RepeatWrapping,n.wrapT=t.RepeatWrapping,this.point.material.map=n,this.map=e,this.point.material.needsUpdate=!0}getMap(){return this.map}setOpacity(e){e>1&&(e=1),e<0&&(e=0),this.point.material.transparent=e<1,this.point.material.opacity=e,this.point.material.needsUpdate=!0,this.opacity=e}getOpacity(){return this.opacity}setOffset(e){e=re(e),this.position.x+=e.x-this.offset.x,this.position.y+=e.y-this.offset.y,this.position.z+=e.z-this.offset.z,this.offset=e}dispose(){this.point.geometry.dispose(),this.point.material.dispose(),this.texture&&this.texture.dispose(),this.remove(this.point),this.point=null,this.vertices=null,this.position.set(0,0,0)}}class Tn extends t.Object3D{constructor(e={}){super(),this.name=e.name||"",this.vertices=e.vertices||[],this.color=ae(e.color),this.opacity=e.opacity||1,this.map=e.map||null,this.wire=e.wire||!1,this.wireColor=ae(e.wireColor),this.offset=re(e.offset),this.wireWidth=e.wireWidth||1,this._geometryType="polygon",this.boundingBox=new t.Box3,this.mesh=null,this.line=null,this.init()}init(){if(this.vertices.length<3)return!1;const e=new t.MeshBasicMaterial({color:this.color,precision:"mediump",opacity:this.opacity,polygonOffset:!0,transparent:this.opacity<1,depthWrite:this.opacity>=1});if(this.map){const n=(new t.TextureLoader).load(this.map);n.wrapS=t.RepeatWrapping,n.wrapT=t.RepeatWrapping,e.map=n}const n=[],i=new t.BufferGeometry,r=[],o=new t.Vector3(1/0,1/0,1/0),a=new t.Vector3(-1/0,-1/0,-1/0);for(let e=0;e<this.vertices.length;e++)r.push(this.vertices[e][0]),r.push(this.vertices[e][1]),r.push(this.vertices[e][2]||.01),o.x>this.vertices[e][0]&&(o.x=this.vertices[e][0]),o.y>this.vertices[e][1]&&(o.y=this.vertices[e][1]),a.x<this.vertices[e][0]&&(a.x=this.vertices[e][0]),a.y<this.vertices[e][1]&&(a.y=this.vertices[e][1]),void 0!==this.vertices[e][2]?(o.z>this.vertices[e][2]&&(o.z=this.vertices[e][2]),a.z<this.vertices[e][2]&&(a.z=this.vertices[e][2])):(o.z=.01,a.z=.01);for(let e=0;e<r.length;e+=3)r[e]-=o.x,r[e+1]-=o.y,r[e+2]-=o.z,n.push(0,0,1);this.boundingBox.set(o,a);const s=Qe.triangulateShape(this.vertices,[]),l=new Float32Array(r);i.setAttribute("position",new t.BufferAttribute(l,3)),i.setAttribute("normal",new t.Float32BufferAttribute(n,3)),i.setIndex(s),this.mesh=new t.Mesh(i,e),this.mesh.matrixAutoUpdate=!1,this.mesh.updateMatrix(),this.add(this.mesh),this.wire&&(this.line=new t.Line(i,new t.LineBasicMaterial({color:this.wireColor,width:this.wireWidth})),this.add(this.line)),this.position.addVectors(o,this.offset),this.vertices=[]}setVertices(e){e.length<3?console.log("3 points at less"):(this.mesh&&this.dispose(),this.vertices=e,this.init())}setColor(e){e=ae(e),this.mesh.material.color.copy(e),this.mesh.material.needsUpdate=!0,this.color=e}getColor(){return this.color.clone()}setOffset(e){e=re(e),this.position.x+=e.x-this.offset.x,this.position.y+=e.y-this.offset.y,this.position.z+=e.z-this.offset.z,this.offset=e}setOpacity(e){e>1&&(e=1),e<0&&(e=0),this.mesh.material.transparent=e<1,this.mesh.material.opacity=e,this.point.material.needsUpdate=!0,this.opacity=e}getOpacity(){return this.opacity}setWire(e){if(this.wire!==e){if(e&&!this.line){const e=this.mesh.geometry.getAttribute("position"),n=new t.BufferGeometry;n.setAttribute("position",e),this.line=new t.Line(n,new t.LineBasicMaterial({color:this.wireColor,width:this.wireWidth})),this.add(this.line)}this.line.visible=e,this.wire=e}}getWire(){return this.wire}setWireColor(e){this.wire&&this.line&&(e=ae(e),this.line.material.color.copy(e),this.line.material.needsUpdate=!0)}getWireColor(){return this.wireColor.clone()}setWireWidth(e){this.wire&&this.line&&(this.line.material.width=Math.floor(e),this.line.material.needsUpdate=!0)}getWireWidth(){return this.wireWidth}setMap(e){const n=(new t.TextureLoader).load(e);n.wrapS=t.RepeatWrapping,n.wrapT=t.RepeatWrapping,this.mesh.material.map=n,this.map=e,this.mesh.material.needsUpdate=!0}getMap(){return this.map}dispose(){this.mesh&&(this.mesh.geometry.dispose(),this.mesh.material.dispose(),this.mesh=null),this.line&&(this.line.geometry.dispose(),this.line.material.dispose(),this.line=null),this.children=[],this.position.set(0,0,0),this.vertices=null}}class En extends t.Object3D{constructor(e){super(e),this.name=e.name||"",this.vertices=e.vertices||[],this.color=ae(e.color),this.opacity=e.opacity||1,this.height=e.height||10,this.useEffect=e.useEffect||!1,this._geometryType="building",this.mesh=null,this.init()}init(){if(this.vertices.length<3)return;var e=[],n={steps:1,bevelEnabled:!1,depth:this.height};const i=new t.Vector3(1/0,1/0,0),r=new t.Vector3(-1/0,-1/0,1);for(let e=0;e<this.vertices.length;e++)this.vertices[e][0]<i.x&&(i.x=this.vertices[e][0]),this.vertices[e][1]<i.y&&(i.y=this.vertices[e][1]),this.vertices[e][0]>r.x&&(r.x=this.vertices[e][0]),this.vertices[e][1]>r.y&&(r.y=this.vertices[e][1]);for(let n=0;n<this.vertices.length;n++){const r=new t.Vector2(this.vertices[n][0]-i.x,this.vertices[n][1]-i.y);e.push(r)}e[0].equals(e[e.length-1])||(e.push(e[0]),this.vertices.push(this.vertices[0]));const o=new t.Shape(e),a=new t.ExtrudeBufferGeometry(o,n);let s;s=this.useEffect?function(e){const n=e.color||new t.Color(.45,.45,.45),i=e.colorBlock||new t.Color(.2,.745,.48),r=e.minZ||0,o=e.maxZ||10,a=e.opacity||1,s=e.renderWidth||1080,l=e.renderHeight||960;return new t.RawShaderMaterial({uniforms:{time:{value:1},resolution:{value:new t.Vector2(s,l)},zRange:{value:new t.Vector2(r,o)},color:{value:n},colorBlock:{value:i},opacity:{value:a}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main()\t{\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"precision mediump float;\nprecision mediump int;\n\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 zRange;\nuniform vec3 color;\nuniform vec3 colorBlock;\nvarying vec3 vPosition;\n\n#define iter 60.0\n#define scaleSpeed 2.0\n#define satSpeed 6.2\n\n//from book of shaders\nfloat random (vec2 st) {\n    return fract(tan(dot(st.xy,\n                        vec2(12.9898,78.233)))*\n        438.5453123);\n}\n\nvoid main( ) {\n    vec2 uv = (gl_FragCoord.xy - 0.1 * resolution.xy)/resolution.y;\n\n    uv*=iter;\n    vec2 gv=fract(uv)-0.5;\n    vec2 id=floor(uv);\n\n    float ran = random(id);\n    float ran2 = random(id+64.0);\n    vec2 d = abs(gv) - (abs(sin((time*scaleSpeed)*ran)*0.5)-0.05);\n    float rect = min(max(d.x, d.y),0.0) + length(max(d, 0.));\n    float r = step(0., rect);\n    vec3 col = vec3(1.-r)*vec3(abs(sin((time*satSpeed)*ran2))*.8);\n    // col *= vec3(.3,.8,1.4);\n    if(zRange.x < vPosition.z && vPosition.z < zRange.y){\n        gl_FragColor = vec4(col*colorBlock,1.0);\n    }else{\n        gl_FragColor = vec4(color, 1.0);\n    }\n\n}",side:t.FrontSide,transparent:!0})}({color:new t.Color(Math.random(),Math.random(),Math.random()),minZ:0,maxZ:this.height}):new t.MeshStandardMaterial({color:this.color,wireframe:!1,opacity:this.opacity,transparent:this.opacity<1,depthWrite:this.opacity>=1}),this.boundingBox=new t.Box3(i,r),this.mesh=new t.Mesh(a,s),this.mesh.matrixAutoUpdate=!1,this.mesh.updateMatrix(),this.position.copy(i),this.add(this.mesh)}mergeBuilding(e){if(e.mesh)if(this.mesh){const n=e.mesh.geometry.getAttribute("position"),i=e.mesh.geometry.getAttribute("normal"),r=e.mesh.geometry.getIndex(),o=this.mesh.geometry.getAttribute("position"),a=this.mesh.geometry.getAttribute("normal"),s=this.mesh.geometry.getIndex();let l=[],c=[],u=[];this.vertices;for(let e=0;e<o.count;e+=3)l.push(o[e+0]),l.push(o[e+1]),l.push(o[e+2]);for(let e=0;e<a.count;e+=3)c.push(a[e+0]),c.push(a[e+1]),c.push(a[e+2]);for(let e=0;e<s.count;e++)u.push(s[e]);const h=o.count,d=e.position.x-this.position.x,f=e.position.y-this.position.y,p=e.position.z-this.position.z;for(let e=0;e<n.count;e+=3)l.push(n[e+0]+d),l.push(n[e+1]+f),l.push(n[e+2]+p);for(let e=0;e<i.count;e+=3)c.push(i[e+0]),c.push(i[e+1]),c.push(i[e+2]);for(let e=0;e<r.count;e++)u.push(r[e]+h);this.mesh.geometry.dispose();let m=new t.BufferGeometry;m.setAttribute("position",new t.Float32BufferAttribute(l,3)),m.setAttribute("normal",new t.Float32BufferAttribute(c,3)),m.setIndex(u),this.mesh.geometry=m,this.mesh.matrixAutoUpdate=!1,this.mesh.updateMatrix(),this._geometryType="multibuilding",this.vertices=[this.vertices,e.vertices],m=null,e.dispose()}else this.mesh=e.mesh.clone(),this.vertices=e.vertices,e.dispose()}getColor(){return this.color.clone()}setColor(e){e=e?e instanceof t.Color?e:new t.Color(e):new t.Color(.45,.45,.45),this.color.copy(e),this.mesh.material.color.copy(e),this.mesh.material.needsUpdate=!0}getHeight(){return this.height}setHeight(e){this.height=e>0?e:1;const t=e/this.height;this.scale.z=t,this.mesh.updateMatrix()}getVertices(){return this.vertices}setVertices(e){e.length<3||(this.mesh&&this.dispose(),this.vertices=e,this.init())}dispose(){this.mesh&&(this.mesh.geometry.dispose(),this.mesh.material.dispose(),this.remove(this.mesh),this.mesh=null),this.vertices=[]}}class Cn extends t.Object3D{constructor(e={}){super(),this.imgUrl=e.imgUrl||null,this.material=null,this.sprite=null,this.texture=null,this._geometryType="billboard",this.name=e.name||"",this.scaleXY=e.scale||1,this.color=e.color?e.color instanceof t.Color?e.color:new t.Color(e.color):new t.Color(.45,.45,.45),this.isColor=!1,e.color&&(this.isColor=!0),this.init()}init(){this.imgUrl?this.texture=(new t.TextureLoader).load(this.imgUrl):this.texture=new t.Texture,this.texture.minFilter=t.LinearFilter,this.texture.magFilter=t.LinearFilter,this.texture.needsUpdate=!0;const e=new t.SpriteMaterial({map:this.texture,depthTest:!0,depthWrite:!1,transparent:!0});this.isColor&&(e.color=this.color),this.material=e,this.sprite=new t.Sprite(this.material),this.sprite.scale.set(this.scaleXY,this.scaleXY,1),this.add(this.sprite)}setImg(e){this.imgUrl!==e&&(this.imgUrl=e,this.texture=(new t.TextureLoader).load(e),this.modify())}setPosition(e){if(e instanceof Array){if(e.length<2)return;this.position.x=e[0],this.position.y=e[1],this.position.z="Number"==typeof e[2]?e[2]:this.position.z}else this.position.x=e.x,this.position.y=e.y,this.position.z="Number"==typeof e.z?e.z:this.position.z}setTextColor(e){this.color!==e&&(this.color=e,this.modify())}modify(){const e=new t.SpriteMaterial({map:this.texture,depthTest:!1,depthWrite:!1,transparent:!0});this.isColor&&(e.color=this.color),this.sprite.material.dispose(),this.sprite.material=e,this.material=this.sprite.material}dispose(){this.texture.dispose(),this.sprite.material.dispose(),this.sprite.dispose()}}class An extends t.EventDispatcher{constructor(e){super(e),this.viewer=e,this.renderer=e.renderer,this.scene=null,this.sceneControls=new t.Scene,this.rotationSpeed=10,this.mouseOnMap=!1,this.fadeFactor=20,this.wheelDelta=0,this.zoomDelta=new t.Vector3,this.camStart=null,this.tweens=[],this.panDelta=new t.Vector2(0,0);{const e=new t.RingBufferGeometry(.2,.4,64,1),n=new t.MeshBasicMaterial({color:16776960,side:t.DoubleSide});this.pivotIndicator=new t.Mesh(e,n),this.pivotIndicator.visible=!1,this.sceneControls.add(this.pivotIndicator)}this.showIndicator=!0;let n=null;this.addEventListener("touchstart",e=>{n=e;const t=Qe.getMouseObjectIntersection(e.mouse,this.scene.getActiveCamera(),this.viewer,[this.scene.basemap],{pickClipped:!0});t&&(this.pivot=t.location,this.mouseOnMap=!0,this.pivotIndicator.visible=this.showIndicator,this.pivotIndicator.position.copy(t.location))}),this.addEventListener("touchend",e=>{n=e}),this.addEventListener("touchmove",e=>{if(2===e.touches.length&&2===n.touches.length){const t=n,i=e,r=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(r*r+o*o),s=i.touches[0].pageX-i.touches[1].pageX,l=i.touches[0].pageY-i.touches[1].pageY,c=Math.sqrt(s*s+l*l)/a,u=this.scene.view.radius+this.wheelDelta,h=u/c;this.wheelDelta=h-u}else if(3===e.touches.length&&3===n.touches.length){const t=n,i=e,r=(t.touches[0].pageX+t.touches[1].pageX+t.touches[2].pageX)/3,o=(t.touches[0].pageY+t.touches[1].pageY+t.touches[2].pageY)/3,a=(i.touches[0].pageX+i.touches[1].pageX+i.touches[2].pageX)/3,s=(i.touches[0].pageY+i.touches[1].pageY+i.touches[2].pageY)/3,l={x:(a-r)/this.renderer.domElement.clientWidth,y:(s-o)/this.renderer.domElement.clientHeight};this.panDelta.x+=l.x,this.panDelta.y+=l.y,this.stopTweens()}n=e}),this.addEventListener("drag",n=>{if(null!==n.drag.object)return;if(!this.pivot)return;void 0===n.drag.startHandled&&(n.drag.startHandled=!0,this.dispatchEvent({type:"start"}));const i=this.scene.getActiveCamera(),r=this.viewer.scene.view;this.camStart||(this.camStart=i.clone());const o=this.camStart,a=n.drag.end,s=this.viewer.renderer.domElement,l=n.drag.lastDrag.x/this.renderer.domElement.clientWidth,c=n.drag.lastDrag.y/this.renderer.domElement.clientHeight;if(n.drag.mouse===z.LEFT&&e.enablePan)if(this.mouseOnMap){const e=Qe.mouseToRay(a,i,s.clientWidth,s.clientHeight),n=(new t.Plane).setFromNormalAndCoplanarPoint(new t.Vector3(0,0,1),this.pivot),l=e.distanceToPlane(n);if(l>0){const n=(new t.Vector3).addVectors(o.position,e.direction.clone().multiplyScalar(l)),i=(new t.Vector3).subVectors(n,this.pivot),a=o.position.clone().sub(i);r.position.copy(a);{const e=a.distanceTo(this.pivot);r.radius=e;const t=r.radius/2.5;this.viewer.setMoveSpeed(t)}}this.panDelta.x=0,this.panDelta.y=0}else this.panDelta.x+=l,this.panDelta.y+=c;else if(n.drag.mouse===z.RIGHT&&e.enableRotation){const e=-l*this.rotationSpeed*.5;let n=-c*this.rotationSpeed*.2;const i=r.pitch,o=r.clone();o.pitch=o.pitch+n,n=o.pitch-i;const a=(new t.Vector3).subVectors(r.position,this.pivot),s=(new t.Vector3).subVectors(r.getPivot(),this.pivot),u=r.getSide();a.applyAxisAngle(u,n),s.applyAxisAngle(u,n),a.applyAxisAngle(new t.Vector3(0,0,1),e),s.applyAxisAngle(new t.Vector3(0,0,1),e);const h=(new t.Vector3).addVectors(this.pivot,a);r.position.copy(h),r.yaw+=e,r.pitch+=n}}),this.addEventListener("drop",e=>{this.dispatchEvent({type:"end"})}),this.addEventListener("mousewheel",e=>{this.wheelDelta+=e.delta}),this.addEventListener("mousedown",e=>{const n=this.viewer.scene.view;this.camStart=this.scene.getActiveCamera().clone();const i=Qe.getMouseObjectIntersection(e.mouse,this.scene.getActiveCamera(),this.viewer,[this.scene.basemap],{pickClipped:!0});i?(this.pivot=i.location,this.mouseOnMap=!0,this.pivotIndicator.visible=this.showIndicator,this.pivotIndicator.position.copy(i.location)):(this.mouseOnMap=!1,this.pivot=(new t.Vector3).addVectors(n.position,n.direction.clone().multiplyScalar(n.radius)))}),this.addEventListener("mouseup",e=>{this.camStart=null,this.pivot=null,this.pivotIndicator.visible=!1}),this.addEventListener("dblclick",e=>!1)}setScene(e){this.scene=e}stop(){this.wheelDelta=0,this.zoomDelta.set(0,0,0)}zoomToLocation(e){const n=this.scene.getActiveCamera(),i=Qe.getMouseObjectIntersection(e,n,this.viewer,[this.scene.basemap]);if(null===i)return;let r=0;{const e=.2,n=i.object;let o=n.boundingBox?n.boundingBox:n.geometry.boundingBox;o||(n.geometry.computeBoundingBox(),o=n.geometry.boundingBox);const a=o.getBoundingSphere(new t.Sphere).radius;r=Math.min(this.scene.view.radius,a),r=Math.max(e,r)}const o=this.scene.view.direction.multiplyScalar(-1),a=(new t.Vector3).addVectors(i.location,o.multiplyScalar(r)),s=Y.Easing.Quartic.Out;{const e={x:0},t=new Y.Tween(e).to({x:1},600);t.easing(s),this.tweens.push(t);const n=this.scene.view.position.clone(),r=a.clone(),o=this.scene.view.radius,l=a.distanceTo(i.location);t.onUpdate(()=>{const t=e.x;this.scene.view.position.x=(1-t)*n.x+t*r.x,this.scene.view.position.y=(1-t)*n.y+t*r.y,this.scene.view.position.z=(1-t)*n.z+t*r.z,this.scene.view.radius=(1-t)*o+t*l,this.viewer.setMoveSpeed(this.scene.view.radius/2.5)}),t.onComplete(()=>{this.scene.view.updateRealPosition(),this.tweens=this.tweens.filter(e=>e!==t)}),t.start()}}update(e){const n=this.scene.view,i=Math.pow(.5,this.fadeFactor*e),r=1-i,o=this.scene.getActiveCamera();if(0!==this.wheelDelta&&this.viewer.enableZoom){const e=Qe.getMouseObjectIntersection(this.viewer.inputHandler.mouse,this.scene.getActiveCamera(),this.viewer,[this.scene.basemap]);if(e){const i=(new t.Vector3).addVectors(n.position,this.zoomDelta),r=.2*e.location.distanceTo(i)*this.wheelDelta,o=(new t.Vector3).subVectors(e.location,n.position);o.normalize(),i.add(o.multiplyScalar(r)),this.zoomDelta.subVectors(i,n.position);{let t=i.distanceTo(e.location);(t>n.maxRadius&&this.wheelDelta<0||t<n.minRadius&&this.wheelDelta>0)&&(t=Math.min(n.maxRadius,Math.max(n.minRadius,t)),this.zoomDelta.x=0,this.zoomDelta.y=0,this.zoomDelta.z=0),n.radius=t;const r=n.radius/2.5;this.viewer.setMoveSpeed(r)}}else{this.zoomDelta=n.direction.clone().multiplyScalar(this.wheelDelta*n.radius*.1);let e=n.radius+r*this.wheelDelta*n.radius*.1;e>n.maxRadius&&(e=n.maxRadius,this.zoomDelta.x=0,this.zoomDelta.y=0,this.zoomDelta.z=0),n.radius=e}}if(0!==this.zoomDelta.length()){const e=this.zoomDelta.clone().multiplyScalar(r),i=(new t.Vector3).addVectors(n.position,e);n.position.copy(i),n.updateRealPosition()}if(0!==this.panDelta.length()){const t=Math.min(1,this.fadeFactor*e)*n.radius*3,i=-this.panDelta.x*t,r=this.panDelta.y*t;n.pan(i,r)}if(this.pivotIndicator.visible){const e=this.pivotIndicator.position.distanceTo(n.position),t=this.renderer.domElement.clientwidth,i=this.renderer.domElement.clientHeight,r=10/Qe.projectedRadius(1,o,e,t,i);this.pivotIndicator.scale.set(r,r,r)}this.zoomDelta.multiplyScalar(i),this.wheelDelta=0,this.panDelta.multiplyScalar(i)}}class On extends t.EventDispatcher{constructor(e){super(e),this.viewer=e,this.renderer=e.renderer,this.scene=null,this.sceneControls=new t.Scene,this.rotationSpeed=10,this.fadeFactor=20,this.wheelDelta=0,this.zoomDelta=new t.Vector3,this.camStart=null,this.tweens=[];{const e=new t.SphereGeometry(.2,16,16),n=new t.MeshNormalMaterial;this.pivotIndicator=new t.Mesh(e,n),this.pivotIndicator.visible=!1,this.sceneControls.add(this.pivotIndicator)}this.addEventListener("drag",e=>{if(null!==e.drag.object)return;if(!this.pivot)return;void 0===e.drag.startHandled&&(e.drag.startHandled=!0,this.dispatchEvent({type:"start"}));const n=this.camStart,i=this.scene.getActiveCamera(),r=this.viewer.scene.view,o=e.drag.end,a=this.viewer.renderer.domElement;if(e.drag.mouse===z.LEFT){const e=Qe.mouseToRay(o,i,a.clientWidth,a.clientHeight),s=(new t.Plane).setFromNormalAndCoplanarPoint(new t.Vector3(0,0,1),this.pivot),l=e.distanceToPlane(s);if(l>0){const i=(new t.Vector3).addVectors(n.position,e.direction.clone().multiplyScalar(l)),o=(new t.Vector3).subVectors(i,this.pivot),a=n.position.clone().sub(o);r.position.copy(a);{const e=a.distanceTo(this.pivot);r.radius=e;const t=r.radius/2.5;this.viewer.setMoveSpeed(t)}}}else if(e.drag.mouse===z.RIGHT){const n={x:e.drag.lastDrag.x/this.renderer.domElement.clientWidth,y:e.drag.lastDrag.y/this.renderer.domElement.clientHeight},i=-n.x*this.rotationSpeed*.5;let o=-n.y*this.rotationSpeed*.2;const a=r.pitch,s=r.clone();s.pitch=s.pitch+o,o=s.pitch-a;const l=(new t.Vector3).subVectors(r.position,this.pivot),c=(new t.Vector3).subVectors(r.getPivot(),this.pivot),u=r.getSide();l.applyAxisAngle(u,o),c.applyAxisAngle(u,o),l.applyAxisAngle(new t.Vector3(0,0,1),i),c.applyAxisAngle(new t.Vector3(0,0,1),i);const h=(new t.Vector3).addVectors(this.pivot,l);r.position.copy(h),r.yaw+=i,r.pitch+=o}}),this.addEventListener("drop",e=>{this.dispatchEvent({type:"end"})}),this.addEventListener("mousewheel",e=>{this.wheelDelta+=e.delta}),this.addEventListener("mousedown",e=>{const t=Qe.getMouseObjectIntersection(e.mouse,this.scene.getActiveCamera(),this.viewer,this.scene.maps,{pickClipped:!1});t&&(this.pivot=t.location,this.camStart=this.scene.getActiveCamera().clone(),this.pivotIndicator.visible=!0,this.pivotIndicator.position.copy(t.location))}),this.addEventListener("mouseup",e=>{this.camStart=null,this.pivot=null,this.pivotIndicator.visible=!1}),this.addEventListener("dblclick",e=>!1)}setScene(e){this.scene=e}stop(){this.wheelDelta=0,this.zoomDelta.set(0,0,0)}zoomToLocation(e){const n=this.scene.getActiveCamera(),i=Qe.getMouseObjectIntersection(e,n,this.viewer,this.scene.maps);if(null===i)return;let r=0;{const e=.2,n=i.object;let o=n.boundingBox?n.boundingBox:n.geometry.boundingBox;o||(n.geometry.computeBoundingBox(),o=n.geometry.boundingBox);const a=o.getBoundingSphere(new t.Sphere).radius;r=Math.min(this.scene.view.radius,a),r=Math.max(e,r)}const o=this.scene.view.direction.multiplyScalar(-1),a=(new t.Vector3).addVectors(i.location,o.multiplyScalar(r)),s=Y.Easing.Quartic.Out;{const e={x:0},t=new Y.Tween(e).to({x:1},600);t.easing(s),this.tweens.push(t);const n=this.scene.view.position.clone(),r=a.clone(),o=this.scene.view.radius,l=a.distanceTo(i.location);t.onUpdate(()=>{const t=e.x;this.scene.view.position.x=(1-t)*n.x+t*r.x,this.scene.view.position.y=(1-t)*n.y+t*r.y,this.scene.view.position.z=(1-t)*n.z+t*r.z,this.scene.view.radius=(1-t)*o+t*l,this.viewer.setMoveSpeed(this.scene.view.radius/2.5)}),t.onComplete(()=>{this.tweens=this.tweens.filter(e=>e!==t)}),t.start()}}update(e){const n=this.scene.view,i=Math.pow(.5,this.fadeFactor*e),r=1-i,o=this.scene.getActiveCamera();if(0!==this.wheelDelta){const e=Qe.getMouseObjectIntersection(this.viewer.inputHandler.mouse,this.scene.getActiveCamera(),this.viewer,this.scene.maps);if(e){const i=(new t.Vector3).addVectors(n.position,this.zoomDelta),r=.2*e.location.distanceTo(i)*this.wheelDelta,o=(new t.Vector3).subVectors(e.location,n.position);o.normalize(),i.add(o.multiplyScalar(r)),this.zoomDelta.subVectors(i,n.position);{const t=i.distanceTo(e.location);n.radius=t;const r=n.radius/2.5;this.viewer.setMoveSpeed(r)}}}if(0!==this.zoomDelta.length()){const e=this.zoomDelta.clone().multiplyScalar(r),i=(new t.Vector3).addVectors(n.position,e);n.position.copy(i)}if(this.pivotIndicator.visible){const e=this.pivotIndicator.position.distanceTo(n.position),t=this.renderer.domElement.clientwidth,i=this.renderer.domElement.clientHeight,r=10/Qe.projectedRadius(1,o,e,t,i);this.pivotIndicator.scale.set(r,r,r)}this.zoomDelta.multiplyScalar(i),this.wheelDelta=0}}class Ln extends t.EventDispatcher{constructor(e){super(),this.viewer=e,this.renderer=e.renderer,this.domElement=this.renderer.domElement,this.enabled=!0,this.scene=null,this.interactiveScenes=[],this.interactiveObjects=new Set,this.inputListeners=[],this.blacklist=new Set,this.mousedownTime=null,this.drag=null,this.mouse=new t.Vector2(0,0),this.selection=[],this.hoveredElements=[],this.pressedKeys={},this.wheelDelta=0,this.speed=1,this.logMessages=!1,-1===this.domElement.tabIndex&&(this.domElement.tabIndex=2222),this.domElement.addEventListener("contextmenu",e=>{e.preventDefault()},!1),this.domElement.addEventListener("click",this.onMouseClick.bind(this),!1),this.domElement.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.domElement.addEventListener("mouseup",this.onMouseUp.bind(this),!1),this.domElement.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.domElement.addEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.domElement.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.domElement.addEventListener("dblclick",this.onDoubleClick.bind(this)),this.domElement.addEventListener("keydown",this.onKeyDown.bind(this)),this.domElement.addEventListener("keyup",this.onKeyUp.bind(this)),this.domElement.addEventListener("touchstart",this.onTouchStart.bind(this)),this.domElement.addEventListener("touchend",this.onTouchEnd.bind(this)),this.domElement.addEventListener("touchmove",this.onTouchMove.bind(this))}addInputListener(e){this.inputListeners.push(e)}removeInputListener(e){this.inputListeners=this.inputListeners.filter(t=>t!==e)}getSortedListeners(){return this.inputListeners.sort((e,t)=>{let n=void 0!==e.importance?e.importance:0;return(void 0!==t.importance?t.importance:0)-n})}onTouchStart(e){if(this.logMessages&&console.log(this.constructor.name+": onTouchStart"),e.preventDefault(),this.mousedownTime=(new Date).getTime(),1===e.touches.length){let t=this.domElement.getBoundingClientRect(),n=e.touches[0].pageX-t.left,i=e.touches[0].pageY-t.top;this.mouse.set(n,i),this.startDragging(null)}for(let t=0,n=this.getSortedListeners().length;t<n;t++)this.getSortedListeners()[t].dispatchEvent({type:e.type,touches:e.touches,mouse:this.mouse,changedTouches:e.changedTouches})}onTouchEnd(e){this.logMessages&&console.log(this.constructor.name+": onTouchEnd"),e.preventDefault();for(let e=0,t=this.getSortedListeners().length;e<t;e++)this.getSortedListeners()[e].dispatchEvent({type:"drop",drag:this.drag,viewer:this.viewer});this.drag=null;const t=this.getHoveredElements();if(t.length>0)for(let e=0;e<t.length;e++){let n=t[e].object;n&&n._listeners&&n._listeners.touchend&&n.dispatchEvent({type:"touchend",viewer:this.viewer,consume:!1})}for(let t=0,n=this.getSortedListeners().length;t<n;t++)this.getSortedListeners()[t].dispatchEvent({type:e.type,touches:e.touches,changedTouches:e.changedTouches})}onTouchMove(e){this.logMessages&&console.log(this.constructor.name+": onTouchMove"),e.preventDefault();const t=this.getSortedListeners();if(1===e.touches.length){let n=this.domElement.getBoundingClientRect(),i=e.touches[0].pageX-n.left,r=e.touches[0].pageY-n.top;if(this.mouse.set(i,r),this.drag){this.drag.mouse=1,this.drag.lastDrag.x=i-this.drag.end.x,this.drag.lastDrag.y=r-this.drag.end.y,this.drag.end.set(i,r),this.logMessages&&console.log(this.constructor.name+": drag: ");for(let e=0,n=t.length;e<n;e++)t[e].dispatchEvent({type:"drag",drag:this.drag,viewer:this.viewer})}}for(let n=0,i=t.length;n<i;n++)t[n].dispatchEvent({type:e.type,touches:e.touches,changedTouches:e.changedTouches})}onKeyDown(e){this.logMessages&&console.log(this.constructor.name+": onKeyDown"),46===e.keyCode&&this.selection.length>0&&(this.dispatchEvent({type:"delete",selection:this.selection}),this.deselectAll()),this.dispatchEvent({type:"keydown",keyCode:e.keyCode,event:e}),this.pressedKeys[e.keyCode]=!0}onKeyUp(e){this.logMessages&&console.log(this.constructor.name+": onKeyUp"),delete this.pressedKeys[e.keyCode],e.preventDefault()}onDoubleClick(e){this.logMessages&&console.log(this.constructor.name+": onDoubleClick");let t=!1;for(let e=0,n=this.hoveredElements.length;e<n;e++)if(this.hoveredElements[e]._listeners&&this.hoveredElements[e]._listeners.dblclick){this.hoveredElements[e].object.dispatchEvent({type:"dblclick",mouse:this.mouse,object:this.hoveredElements[e].object}),t=!0;break}if(!t)for(let e=0,t=this.getSortedListeners().length;e<t;e++)this.getSortedListeners()[e].dispatchEvent({type:"dblclick",mouse:this.mouse,object:null});e.preventDefault()}onMouseClick(e){this.logMessages&&console.log(this.constructor.name+": onMouseClick"),e.preventDefault()}onMouseDown(e){this.logMessages&&console.log(this.constructor.name+": onMouseDown"),e.preventDefault();let t=!1,n=()=>t=!0;if(this.mousedownTime=(new Date).getTime(),this.hoveredElements.length>0)for(let e=0;e<this.hoveredElements.length;e++){let i=this.hoveredElements[e].object;if(i&&i._listeners&&i._listeners.mousedown&&i.dispatchEvent({type:"mousedown",viewer:this.viewer,consume:n}),t)break}for(let e=0,t=this.getSortedListeners().length;e<t;e++)this.getSortedListeners()[e].dispatchEvent({type:"mousedown",viewer:this.viewer,mouse:this.mouse});if(!this.drag){let e=this.hoveredElements.find(e=>e.object._listeners&&e.object._listeners.drag&&e.object._listeners.drag.length>0);e?this.startDragging(e.object,{location:e.point}):this.startDragging(null)}this.scene&&(this.viewStart=this.scene.view.clone())}onMouseUp(e){this.logMessages&&console.log(this.constructor.name+": onMouseUp"),e.preventDefault();let n=0===this.getNormalizedDrag().length(),i=!1,r=()=>i=!0;if(0===this.hoveredElements.length)for(let e=0,t=this.getSortedListeners().length;e<t&&(this.getSortedListeners()[e].dispatchEvent({type:"mouseup",viewer:this.viewer,mouse:this.mouse,consume:r}),!i);e++);else{let e=this.hoveredElements.map(e=>e.object).find(e=>e._listeners&&e._listeners.mouseup);e&&e.dispatchEvent({type:"mouseup",viewer:this.viewer,consume:r})}if((new Date).getTime()-this.mousedownTime<500){let e=this.hoveredElements.map(e=>e.object).find(e=>e._listeners&&e._listeners.click);e&&(this.logMessages&&console.log(`${this.constructor.name}: click ${this.drag.object.name}`),e.dispatchEvent({type:"click",viewer:this.viewer,consume:r}))}if(this.drag){if(this.drag.object)this.logMessages&&console.log(`${this.constructor.name}: drop ${this.drag.object.name}`),this.drag.object.dispatchEvent({type:"drop",drag:this.drag,viewer:this.viewer});else for(let e=0,t=this.getSortedListeners().length;e<t;e++)this.getSortedListeners()[e].dispatchEvent({type:"drop",drag:this.drag,viewer:this.viewer});this.drag=null}if(!i)if(e.button===t.MOUSE.LEFT){if(n){let e=this.hoveredElements.find(e=>e.object._listeners&&e.object._listeners.select);e?(e=e.object,this.isSelected(e)?this.selection.filter(t=>t!==e).forEach(e=>this.toggleSelection(e)):(this.deselectAll(),this.toggleSelection(e))):this.deselectAll()}}else e.button===t.MOUSE.RIGHT&&n&&this.deselectAll()}onMouseMove(e){e.preventDefault();let t=this.domElement.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;this.mouse.set(n,i);let r=this.getHoveredElements();if(r.length>0){let e=r.map(e=>e.object.name).join(", ");this.logMessages&&console.log(`${this.constructor.name}: onMouseMove; hovered: '${e}'`)}if(this.drag)if(this.drag.mouse=e.buttons,this.drag.lastDrag.x=n-this.drag.end.x,this.drag.lastDrag.y=i-this.drag.end.y,this.drag.end.set(n,i),this.drag.object)this.logMessages&&console.log(this.constructor.name+": drag: "+this.drag.object.name),this.drag.object.dispatchEvent({type:"drag",drag:this.drag,viewer:this.viewer});else{this.logMessages&&console.log(this.constructor.name+": drag: ");let e=!1;for(let t=0,n=this.getSortedListeners().length;t<n&&(this.getSortedListeners()[t].dispatchEvent({type:"drag",drag:this.drag,viewer:this.viewer,consume:()=>{e=!0}}),!e);t++);}else{let e=r.map(e=>e.object),t=this.hoveredElements.map(e=>e.object);if((e||t)&&(e&&e.length&&e.forEach(e=>{let n=-1;t&&t.length&&(n=t.indexOf(e)),n<0?(this.logMessages&&console.log(`${this.constructor.name}: mouseover: ${e.name}`),e.dispatchEvent({type:"mouseover",object:e})):t.splice(n,1)}),t&&t.length&&t.forEach(e=>{this.logMessages&&console.log(`${this.constructor.name}: mouseleave: ${e.name}`),e.dispatchEvent({type:"mouseleave",object:e})})),r.length>0){let e=r.map(e=>e.object).find(e=>e._listeners&&e._listeners.mousemove);e&&e.dispatchEvent({type:"mousemove",object:e})}}this.hoveredElements=r}onMouseWheel(e){if(!this.enabled)return;this.logMessages&&console.log(this.constructor.name+": onMouseWheel"),e.preventDefault();let t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail);let n=Math.sign(t);if(this.hoveredElement)this.hoveredElement.object.dispatchEvent({type:"mousewheel",delta:n,object:this.hoveredElement.object});else for(let e=0,t=this.getSortedListeners().length;e<t;e++)this.getSortedListeners()[e].dispatchEvent({type:"mousewheel",delta:n,object:null})}startDragging(e,n=null){let i=e?e.name:"no name";if(this.logMessages&&console.log(`${this.constructor.name}: startDragging: '${i}'`),this.drag={start:this.mouse.clone(),end:this.mouse.clone(),lastDrag:new t.Vector2(0,0),startView:this.scene.view.clone(),object:e},n)for(let e in Object.keys(n))this.drag[e]=n[e]}getMouseObjectIntersection(e){return Qe.getMouseObjectIntersection(this.mouse,this.scene.getActiveCamera(),this.viewer,this.scene.maps)}toggleSelection(e){let t=this.selection,n=this.selection.indexOf(e);-1===n?(this.selection.push(e),e.dispatchEvent({type:"select"})):(this.selection.splice(n,1),e.dispatchEvent({type:"deselect"})),this.dispatchEvent({type:"selection_changed",oldSelection:t,selection:this.selection})}deselect(e){let t=this.selection,n=this.selection.indexOf(e);n>=0&&(this.selection.splice(n,1),e.dispatchEvent({type:"deselect"}),this.dispatchEvent({type:"selection_changed",oldSelection:t,selection:this.selection}))}deselectAll(){for(let e in this.selection)e.dispatchEvent({type:"deselect"});let e=this.selection;this.selection.length>0&&(this.selection=[],this.dispatchEvent({type:"selection_changed",oldSelection:e,selection:this.selection}))}isSelected(e){return-1!==this.selection.indexOf(e)}registerInteractiveObject(e){this.interactiveObjects.add(e)}removeInteractiveObject(e){this.interactiveObjects.delete(e)}registerInteractiveScene(e){-1===this.interactiveScenes.indexOf(e)&&this.interactiveScenes.push(e)}unregisterInteractiveScene(e){let t=this.interactiveScenes.indexOf(e);t>-1&&this.interactiveScenes.splice(t,1)}getHoveredElement(){let e=this.getHoveredElements();return e.length>0?e[0]:null}getHoveredElements(){let e=this.interactiveScenes.concat(this.scene.scene),n=["mouseup","mousemove","mouseover","mouseleave","touchstart","touchend","touchmove","drag","drop","click","select","deselect"],i=[];for(let t=0,r=e.length;t<r;t++)e[t].traverseVisible(e=>{e._listeners&&e.visible&&!this.blacklist.has(e)&&n.filter(t=>void 0!==e._listeners[t]).length>0&&i.push(e)});let r=this.scene.getActiveCamera(),o=Qe.mouseToRay(this.mouse,r,this.domElement.clientWidth,this.domElement.clientHeight),a=new t.Raycaster;return a.camera=r,a.ray.set(o.origin,o.direction),a.params.Line.threshold=.2,a.intersectObjects(i.filter(e=>e.visible),!1)}setScene(e){this.deselectAll(),this.scene=e}update(e){}getNormalizedDrag(){if(!this.drag)return new t.Vector2(0,0);let e=(new t.Vector2).subVectors(this.drag.end,this.drag.start);return e.x=e.x/this.domElement.clientWidth,e.y=e.y/this.domElement.clientHeight,e}getNormalizedLastDrag(){if(!this.drag)return new t.Vector2(0,0);let e=this.drag.lastDrag.clone();return e.x=e.x/this.domElement.clientWidth,e.y=e.y/this.domElement.clientHeight,e}}class kn extends t.EventDispatcher{constructor(e){super(),this.viewer=e,this.renderer=e.renderer,this.scene=null,this.sceneControls=new t.Scene,this.rotationSpeed=5,this.minRadius=0,this.maxRadius=1/0,this.minPolarAngle=-Math.PI,this.maxPolarAngle=0,this.minAzimuthAngle=-Math.PI,this.maxAzimuthAngle=Math.PI,this.fadeFactor=20,this.yawDelta=0,this.pitchDelta=0,this.panDelta=new t.Vector2(0,0),this.radiusDelta=0,this.tweens=[];let n=null;this.addEventListener("touchstart",e=>{n=e}),this.addEventListener("touchend",e=>{n=e}),this.addEventListener("touchmove",e=>{if(2===e.touches.length&&2===n.touches.length){const t=n,i=e,r=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(r*r+o*o),s=i.touches[0].pageX-i.touches[1].pageX,l=i.touches[0].pageY-i.touches[1].pageY,c=Math.sqrt(s*s+l*l)/a,u=this.scene.view.radius+this.radiusDelta,h=u/c;this.radiusDelta=h-u,this.stopTweens()}else if(3===e.touches.length&&3===n.touches.length){const t=n,i=e,r=(t.touches[0].pageX+t.touches[1].pageX+t.touches[2].pageX)/3,o=(t.touches[0].pageY+t.touches[1].pageY+t.touches[2].pageY)/3,a=(i.touches[0].pageX+i.touches[1].pageX+i.touches[2].pageX)/3,s=(i.touches[0].pageY+i.touches[1].pageY+i.touches[2].pageY)/3,l={x:(a-r)/this.renderer.domElement.clientWidth,y:(s-o)/this.renderer.domElement.clientHeight};this.panDelta.x+=l.x,this.panDelta.y+=l.y,this.stopTweens()}n=e}),this.addEventListener("drag",e=>{if(null!==e.drag.object)return;void 0===e.drag.startHandled&&(e.drag.startHandled=!0,this.dispatchEvent({type:"start"}));const t=e.drag.lastDrag.x/this.renderer.domElement.clientWidth,n=e.drag.lastDrag.y/this.renderer.domElement.clientHeight;e.drag.mouse===z.RIGHT?(this.yawDelta+=t*this.rotationSpeed,this.pitchDelta+=n*this.rotationSpeed,this.stopTweens()):e.drag.mouse===z.LEFT&&(this.panDelta.x+=t,this.panDelta.y+=n,this.stopTweens())}),this.addEventListener("drop",e=>{this.dispatchEvent({type:"end"})}),this.addEventListener("mousewheel",e=>{const t=this.scene.view.radius+this.radiusDelta;this.radiusDelta+=-e.delta*t*.1,this.stopTweens()}),this.addEventListener("dblclick",e=>{this.zoomToLocation(e.mouse)})}setScene(e){this.scene=e}stop(){this.yawDelta=0,this.pitchDelta=0,this.radiusDelta=0,this.panDelta.set(0,0)}zoomToLocation(e){const n=this.scene.getActiveCamera(),i=Qe.getMouseMapIntersection(e,n,this.viewer,this.scene.maps,{pickClipped:!0});if(null===i)return;let r=0;{const e=.2,n=i.object.boundingBox.getBoundingSphere(new t.Sphere).radius;r=Math.min(this.scene.view.radius,n),r=Math.max(e,r)}const o=this.scene.view.direction.multiplyScalar(-1),a=(new t.Vector3).addVectors(i.location,o.multiplyScalar(r)),s=Y.Easing.Quartic.Out;{const e={x:0},t=new Y.Tween(e).to({x:1},600);t.easing(s),this.tweens.push(t);const n=this.scene.view.position.clone(),r=a.clone(),o=this.scene.view.radius,l=a.distanceTo(i.location);t.onUpdate(()=>{const t=e.x;this.scene.view.position.x=(1-t)*n.x+t*r.x,this.scene.view.position.y=(1-t)*n.y+t*r.y,this.scene.view.position.z=(1-t)*n.z+t*r.z,this.scene.view.radius=(1-t)*o+t*l,this.viewer.setMoveSpeed(this.scene.view.radius/2.5)}),t.onComplete(()=>{this.tweens=this.tweens.filter(e=>e!==t)}),t.start()}}stopTweens(){this.tweens.forEach(e=>e.stop()),this.tweens=[]}update(e){const n=this.scene.view;{const i=Math.min(1,this.fadeFactor*e);let r=n.yaw,o=n.pitch;const a=n.getPivot();r-=i*this.yawDelta,o-=i*this.pitchDelta,r=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,r)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),n.yaw=r,n.pitch=o;const s=this.scene.view.direction.multiplyScalar(-n.radius),l=(new t.Vector3).addVectors(a,s);n.position.copy(l)}{const t=Math.min(1,this.fadeFactor*e)*n.radius*3,i=-this.panDelta.x*t,r=this.panDelta.y*t;n.pan(i,r)}{const i=Math.min(1,this.fadeFactor*e);let r=n.radius+i*this.radiusDelta;r=Math.max(this.minRadius,Math.min(this.maxRadius,r));const o=n.direction.multiplyScalar(-r),a=(new t.Vector3).addVectors(n.getPivot(),o);n.radius=r,n.position.copy(a)}{const e=n.radius/2.5;this.viewer.setMoveSpeed(e)}{const t=Math.min(1,this.fadeFactor*e),n=Math.max(0,1-this.fadeFactor*e);this.yawDelta*=n,this.pitchDelta*=n,this.panDelta.multiplyScalar(n),this.radiusDelta-=t*this.radiusDelta}}}const Pn={defines:{FXAA_QUALITY_PRESET:24},uniforms:{tDiffuse:{value:null},resolution:{value:new t.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","// #define FXAA_QUALITY_PRESET 23","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 29","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")};var Dn=function(e,n){E.Pass.call(this),this.edgesRT=new t.WebGLRenderTarget(e,n,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:t.LinearFilter,format:t.RGBFormat}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new t.WebGLRenderTarget(e,n,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:t.LinearFilter,format:t.RGBAFormat}),this.weightsRT.texture.name="SMAAPass.weights";var i=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){i.areaTexture.needsUpdate=!0},this.areaTexture=new t.Texture,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.format=t.RGBFormat,this.areaTexture.minFilter=t.LinearFilter,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;var o=new Image;o.src=this.getSearchTexture(),o.onload=function(){i.searchTexture.needsUpdate=!0},this.searchTexture=new t.Texture,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=o,this.searchTexture.magFilter=t.NearestFilter,this.searchTexture.minFilter=t.NearestFilter,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,void 0===C.SMAAEdgesShader&&console.error("SMAAPass relies on SMAAShader"),this.uniformsEdges=t.UniformsUtils.clone(C.SMAAEdgesShader.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/n),this.materialEdges=new t.ShaderMaterial({defines:Object.assign({},C.SMAAEdgesShader.defines),uniforms:this.uniformsEdges,vertexShader:C.SMAAEdgesShader.vertexShader,fragmentShader:C.SMAAEdgesShader.fragmentShader}),this.uniformsWeights=t.UniformsUtils.clone(C.SMAAWeightsShader.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/n),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new t.ShaderMaterial({defines:Object.assign({},C.SMAAWeightsShader.defines),uniforms:this.uniformsWeights,vertexShader:C.SMAAWeightsShader.vertexShader,fragmentShader:C.SMAAWeightsShader.fragmentShader}),this.uniformsBlend=t.UniformsUtils.clone(C.SMAABlendShader.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/n),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new t.ShaderMaterial({uniforms:this.uniformsBlend,vertexShader:C.SMAABlendShader.vertexShader,fragmentShader:C.SMAABlendShader.fragmentShader}),this.needsSwap=!1,this.fsQuad=new E.Pass.FullScreenQuad(null)};Dn.prototype=Object.assign(Object.create(E.Pass.prototype),{constructor:Dn,render:function(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))},setSize:function(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)},getAreaTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="},getSearchTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}});const In=function(e,n,i,r){E.Pass.call(this),this.scene=e,this.camera=n,this.sampleLevel=3,this.unbiased=!0,this.clearColor=void 0!==i?i:0,this.clearAlpha=void 0!==r?r:0,void 0===S.CopyShader&&console.error("SSAARenderPass relies on CopyShader");let o=S.CopyShader;this.copyUniforms=t.UniformsUtils.clone(o.uniforms),this.copyMaterial=new t.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:t.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.fsQuad=new E.Pass.FullScreenQuad(this.copyMaterial)};In.prototype=Object.assign(Object.create(E.Pass.prototype),{constructor:In,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,n,i){this.sampleRenderTarget||(this.sampleRenderTarget=new t.WebGLRenderTarget(i.width,i.height,{minFilter:t.LinearFilter,magFilter:t.LinearFilter,format:t.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var r=In.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],o=e.autoClear;e.autoClear=!1;var a=e.getClearColor().getHex(),s=e.getClearAlpha(),l=1/r.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;const c=i.width,u=i.height;for(var h=0;h<r.length;h++){var d=r[h];this.camera.setViewOffset&&this.camera.setViewOffset(c,u,.0625*d[0],.0625*d[1],c,u);var f=l;this.unbiased&&(f+=.03125*((h+.5)/r.length-.5)),this.copyUniforms.opacity.value=f,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:n),0===h&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=o,e.setClearColor(a,s)}}),In.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];class Nn{constructor(e,n={shadowMap:!1}){this.viewer=e,this.aaMode=e.aaMode||G.NO_AA,this.aaLevel=void 0===e.aaLevel?1:e.aaLevel,this.renderer=e.renderer,this.renderScene=new _.RenderPass(e.scene.scene,e.scene.getActiveCamera()),this.renderer.shadowMap.enabled=e.shadow||n.shadowMap,this.renderer.shadowMap.type=t.PCFSoftShadowMap,this.bloomPass=new M.UnrealBloomPass(new t.Vector2(e.area.clientWidth,e.area.clientHeight),2.8,.5,.05),this.renderer.toneMappingExposure=1,this.renderer.gammaOutput=!0,this.renderer.gammaFactor=2.2,this.bloomPass.threshold=n.bloomThreshold||0,this.bloomPass.strength=n.bloomStrength||2,this.bloomPass.radius=n.bloomRadius||.65,this.bloomComposer=new T.EffectComposer(this.renderer),this.bloomComposer.renderToScreen=!1,this.bloomComposer.addPass(this.renderScene),this.bloomComposer.addPass(this.bloomPass),this.taaRenderPass=new A.TAARenderPass(e.scene.scene,e.scene.getActiveCamera()),this.taaRenderPass.unbiased=!1,this.taaRenderPass.sampleLevel=t.MathUtils.clamp(parseInt(this.aaLevel,10),0,8),this.taaRenderPass.accumulate=!1,this.taaRenderPass.enabled=!0,this.fxaaPass=new a.ShaderPass(Pn);const i=this.renderer.getPixelRatio();this.fxaaPass.material.uniforms.resolution.value.x=1/(e.area.clientWidth*i),this.fxaaPass.material.uniforms.resolution.value.y=1/(e.area.clientHeight*i),this.fxaaPass.renderToScreen=!0,this.finalPass=new a.ShaderPass(new t.ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.bloomComposer.renderTarget2.texture}},vertexShader:kt,fragmentShader:Pt,defines:{}}),"baseTexture"),this.finalComposer=new T.EffectComposer(this.renderer),this.smaaPass=new Dn(e.area.clientWidth*this.renderer.getPixelRatio(),e.area.clientHeight*this.renderer.getPixelRatio()),this.ssaaRenderPass=new In(e.scene.scene,e.scene.getActiveCamera()),this.ssaaRenderPass.sampleLevel=3,this.ssaaRenderPass.unbiased=!0,this.ssaaRenderPass.enabled=!0,this.aaMode>3?(this.finalComposer.setPixelRatio(this.renderer.getPixelRatio()),this.finalComposer.addPass(this.ssaaRenderPass)):this.aaMode>2?this.finalComposer.addPass(this.smaaPass):this.aaMode>1?(this.finalPass.needsSwap=!0,this.finalComposer.addPass(this.taaRenderPass)):this.aaMode>0&&(this.finalPass.needsSwap=!0,this.finalComposer.addPass(this.fxaaPass)),this.finalComposer.addPass(this.renderScene),this.finalComposer.addPass(this.finalPass)}renderBloom(e,t){if(!0===t)e.traverse(this.darkenNonBloomed),this.bloomComposer.render(),e.traverse(this.restoreMaterial);else{const e=this.viewer.scene.getActiveCamera();e.layers.set(H.BLOOM_SCENE),this.bloomComposer.render(),e.layers.set(H.ENTIRE_SCENE)}}darkenNonBloomed(e){e.isLight||e.isScene||st.test(e.layers)||(e.isMesh||e.isLine||e.isPoints||e.isSprite)&&(e.material instanceof t.RawShaderMaterial||e.material instanceof t.ShaderMaterial?(e._visible=e.visible,e.visible=!1):e.material&&(e._material=e.material,e.isMesh?e.material=lt:e.isLine?e.material=ct:e.isPoints?e.material=ut:e.isSprite&&(e.material=ht)))}restoreMaterial(e){e.isLight||e.isScene||st.test(e.layers)||(e.isMesh||e.isLine||e.isPoints||e.isSprite)&&(e.material instanceof t.RawShaderMaterial||e.material instanceof t.ShaderMaterial?e.visible=e._visible:(e.material=e._material,e.material.needsUpdate=!0))}clear(){let{viewer:e,renderer:t}=this;"skybox"===e.background?(t.setClearColor(0,0),t.clear(!0,!0,!1),this.aaMode>3&&(ssaaRenderPassP.clearColor=0,ssaaRenderPassP.clearAlpha=!0)):"gradient"===e.background?(t.setClearColor(0,0),t.clear(!0,!0,!1)):"black"===e.background?(t.setClearColor(0,1),t.clear(!0,!0,!1)):"white"===e.background?(t.setClearColor(16777215,1),t.clear(!0,!0,!1)):"personal"===e.background?(t.setClearColor(e.backgroundColor,1),this.aaMode>3&&(this.ssaaRenderPass.clearColor=e.backgroundColor,this.ssaaRenderPass.clearAlpha=!0),t.clear(!0,!0,!1)):(t.setClearColor(0,0),t.clear(!0,!0,!1))}render(e){let{viewer:n,renderer:i}=this;const r=e.camera?e.camera:n.scene.getActiveCamera();n.dispatchEvent({type:"render.pass.begin",viewer:n});const o=i.getSize(new t.Vector2);e.viewport?e.viewport[2]:o.x,e.viewport?e.viewport[3]:o.y,n.scene.scene.background=null,this.viewer.fog&&(n.scene.scene.fog=new t.FogExp2(14674419,5e-4)),"gradient"===this.viewer.background?n.scene.scene.background=n.scene.sceneBGTexture:"skybox"===this.viewer.background&&(n.scene.scene.background=n.scene.sceneBGSkyBox),n.renderMode===V.SCENE_ONLY?(i.toneMapping=t.NoToneMapping,i.render(n.scene.scene,r)):n.renderMode===V.GLOW_ONLY?this.renderBloom(n.scene.scene,!1):n.renderMode===V.SCEME_WITH_GLOW&&(i.toneMapping=t.CineonToneMapping,i.setClearColor(0,1),n.scene.scene.background=null,this.aaMode>1&&(this.renderScene.enabled=!0),this.renderBloom(n.scene.scene,!0),i.toneMapping=t.NoToneMapping,"gradient"===this.viewer.background?n.scene.scene.background=n.scene.sceneBGTexture:"skybox"===this.viewer.background&&(n.scene.scene.background=n.scene.sceneBGSkyBox),this.clear(),2===this.aaMode&&(this.renderScene.enabled=!1),this.finalComposer.render()),n.dispatchEvent({type:"render.pass.scene",viewer:n}),i.clearDepth(),i.render(n.controls.sceneControls,r),i.setViewport(0,0,i.domElement.clientWidth,i.domElement.clientHeight),n.dispatchEvent({type:"render.pass.end",viewer:n})}dispose(){this.bloomComposer=null,this.bloomPass=null,this.finalPass=null,this.finalComposer=null,this.taaComposer=null,this.taaRenderPass=null,this.renderer.dispose()}}class Fn{constructor(){this.position=new t.Vector3(0,0,0),this._realPosition=new t.Vector3(0,0,0),this.yaw=0,this._pitch=-Math.PI/2,this._radius=1,this.spacing=0,this._level=0,this._levelChange=!1,this.minRadius=.2,this.maxRadius=1e5,this.maxPitch=Math.PI/2,this.minPitch=-Math.PI/2,this.minHeight=0,this.maxHeight=1/0}clone(){let e=new Fn;return e.yaw=this.yaw,e._pitch=this.pitch,e.radius=this.radius,e.maxPitch=this.maxPitch,e.minPitch=this.minPitch,e.minHeight=this.minHeight,e.maxHeight=this.maxHeight,e._level=this.level,e._levelChange=0,e.spacing=this.spacing,e}get radius(){return this._radius}set radius(e){e<.1&&(e=.1),this._radius=e,this.level=Math.ceil(Math.max(Math.log2(10.33*this.spacing/e),0))}get pitch(){return this._pitch}set pitch(e){this._pitch=t.MathUtils.clamp(e,this.minPitch,this.maxPitch)}get level(){return this._level}set level(e){const t=Math.floor(e);this._levelChange=this._level-t,this._level=t}get direction(){let e=new t.Vector3(0,1,0);return e.applyAxisAngle(new t.Vector3(1,0,0),this.pitch),e.applyAxisAngle(new t.Vector3(0,0,1),this.yaw),e}set direction(e){if(0===e.x&&0===e.y)this.pitch=Math.PI/2*Math.sign(e.z);else{let t=Math.atan2(e.y,e.x)-Math.PI/2,n=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));this.yaw=t,this.pitch=n}}lookAt(e,n=!0){let i;e.isVector3?i=n?(new t.Vector3).subVectors(e,this._realPosition):(new t.Vector3).subVectors(e,this.position):3===e.length&&(i=n?(new t.Vector3).subVectors(new t.Vector3(...e),this._realPosition):(new t.Vector3).subVectors(new t.Vector3(...e),this.position));let r=i.length(),o=i.normalize();this.radius=t.MathUtils.clamp(r,this.minRadius,this.maxRadius),this.direction=o}getPivot(e=!1){return e?(new t.Vector3).addVectors(this.position,this.direction.multiplyScalar(this.radius)):(new t.Vector3).addVectors(this._realPosition,this.direction.multiplyScalar(this.radius))}getSide(){let e=new t.Vector3(1,0,0);return e.applyAxisAngle(new t.Vector3(0,0,1),this.yaw),e}pan(e,n){new t.Vector3(0,1,0).applyAxisAngle(new t.Vector3(1,0,0),this.pitch);let i=this.getSide();i.equals(new t.Vector3(1,0,0))&&(i.y=i.x);let r=new t.Vector3(i.x*e,i.y*n);this.position=this.position.add(r),this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.updateRealPosition()}translate(e,n,i){let r=new t.Vector3(0,1,0);r.applyAxisAngle(new t.Vector3(1,0,0),this.pitch),r.applyAxisAngle(new t.Vector3(0,0,1),this.yaw);let o=new t.Vector3(1,0,0);o.applyAxisAngle(new t.Vector3(0,0,1),this.yaw);let a=o.clone().cross(r),s=o.multiplyScalar(e).add(r.multiplyScalar(n)).add(a.multiplyScalar(i));this.position=this.position.add(s),this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.updateRealPosition()}rotate(e=0,n=0){const i=this.getPivot(!0),r=(new t.Vector3).subVectors(this.position,i),o=this.getSide();r.applyAxisAngle(o,n),r.applyAxisAngle(new t.Vector3(0,0,1),e);const a=(new t.Vector3).addVectors(i,r);this.position.copy(a),this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.yaw+=e,this.pitch+=n}translateWorld(e,n,i){this.position.x+=e,this.position.y+=n,this.position.z+=i,this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.updateRealPosition()}updateRealPosition(){this.rtcPoint&&(this._realPosition=(new t.Vector3).addVectors(this.position,this.rtcPoint))}zoomIn(){const e=.5*this.radius;e<this.minRadius||(this.position=this.position.add(this.direction.multiplyScalar(e)),this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.updateRealPosition(),this.radius-=.5*this.radius,this.radius=t.MathUtils.clamp(this.radius,this.minRadius,this.maxRadius))}zoomOut(){if(2*this.radius>this.maxRadius)return;const e=-this.radius;this.position=this.position.add(this.direction.multiplyScalar(e)),this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.updateRealPosition(),this.radius=2*this.radius,this.radius=t.MathUtils.clamp(this.radius,this.minRadius,this.maxRadius)}setView(e,n,i=0,r=null,o=!0){let a=re(e),s=re(n);o&&this._rtcPoint&&s.sub(this._rtcPoint);const l=this.position.clone(),c=this.getPivot();let u=Y.Easing.Quartic.Out;if(0===i)this.position.copy(a),this.updateRealPosition(),this.lookAt(s);else{let e={x:0},n=new Y.Tween(e).to({x:1},i);n.easing(u),n.onUpdate(()=>{let n=e.x;const i=new t.Vector3((1-n)*l.x+n*a.x,(1-n)*l.y+n*a.y,(1-n)*l.z+n*a.z),r=new t.Vector3((1-n)*c.x+n*s.x,(1-n)*c.y+n*s.y,(1-n)*c.z+n*s.z);this.position.copy(i),this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.lookAt(r)}),n.start(),n.onComplete(()=>{this.updateRealPosition(),r&&r()})}}move(e=new t.Vector3,n=0,i=0){this.position.x+=e.x,this.position.y+=e.y,this.position.z+=e.z,this.position.z=t.MathUtils.clamp(this.position.z,this.minHeight,this.maxHeight),this.updateRealPosition(),this.yaw+=n,this.pitch=this.pitch+i}}class Rn extends t.EventDispatcher{constructor(){super(),this.scene=new t.Scene,this.sceneBGTexture=null,this.mixers=[],this.cameraP=new t.PerspectiveCamera(this.fov,1,.1,1e6),this.cameraO=new t.OrthographicCamera(-1,1,1,-1,.1,1e6),this.cameraMode="PERSPECTIVE",this.maxSpacing=1e4,this.maps=[],this.mapLayers=[],this.models=[],this.i3dTileLayers=[],this.trafficLights=[],this.blurObjects=[],this.animateObjects=[],this.basemap=null,this.rtcPoint=null,this.directionalLight=null,this.pointLight=null,this.view=new Fn,this.view.spacing=this.maxSpacing,this.bbox=null,this.initialize()}getBoundingBox(e=this.maps){if(this.bbox)return this.rtcPoint?this.bbox.clone().translate(this.rtcPoint.clone().negate()):this.bbox.clone();{const n=new t.Box3;this.scene.updateMatrixWorld(!0);for(const t in e)if(t.updateMatrixWorld(!0),t.boundingBox)n.union(t.boundingBox);else{const e=t.geometry.boundingBox?t.geometry.boundingBox:t.boundingBox,i=Qe.computeTransformedBoundingBox(e,t.matrixWorld);n.union(i)}return n}}addMap(e){this.maps.push(e),this.scene.add(e),this.updateBaseMap(e),this.dispatchEvent({type:"map_added",map:e})}addMapLayer(e){if(e){if(!this.rtcPoint){const n=new t.Vector3;e.boundingBox.getCenter(n),this.rtcPoint=n,this.initRtc(this.rtcPoint)}this.mapLayers.push(e),this.scene.add(e),e.updateWorldMatrix(!1,!0),e.spacing&&(this.maxSpacing=Math.max(e.spacing,this.maxSpacing),this.view.spacing=this.maxSpacing),this.updateBaseMap(e),this.dispatchEvent({type:"mapLayer_added",scene:this,mapLayer:e})}}addObject(e){this.scene.add(e)}addModel(e){this.models.push(e),e instanceof tt&&(e.loaded?e.mixer&&this.addMixer(e.mixer):e.onLoad=()=>{e.mixer&&this.addMixer(e.mixer)}),this.scene.add(e),this.dispatchEvent({type:"model_added",scene:this,model:e})}addTrafficLight(e){this.trafficLights.push(e),this.scene.add(e),this.dispatchEvent({type:"trafficLight_added",scene:this,trafficLight:e})}addBlurObject(e){this.blurObjects.push(e),this.scene.add(e),e.layers.enable(H.BLOOM_SCENE),this.dispatchEvent({type:"blur_object_added",object:e})}addAnimateObject(e){this.animateObjects.push(e),this.scene.add(e),this.dispatchEvent({type:"animate_object_added",object:e})}addMixer(e){if(this.mixers.includes(e))return!0;this.mixers.push(e)}addI3DTileLayer(e){this.i3dTileLayers.push(e),this.scene.add(e.tilesRenderer.group),this.dispatchEvent({type:"i3dtilelayer_object_added",object:e})}getObjectByName(e){return this.scene.getObjectByName(e)}getObjectByProperty(e,t){return this.scene.getObjectByProperty(e,t)}removeTrafficLight(e){try{const t=this.trafficLights.indexOf(e);t>-1&&(this.trafficLights.splice(t,1),this.scene.remove(e),e.dispose(),this.dispatchEvent({type:"trafficLight_removed",scene:this,trafficLight:e}))}catch(e){}}removeMap(e){try{const t=this.maps.indexOf(e);t>-1&&(this.maps.splice(t,1),this.scene.remove(e),e.dispose(),this.dispatchEvent({type:"map_removed",scene:this,map:e}))}catch(e){}}removeMapLayer(e){const t=this.mapLayers.indexOf(e);t>-1&&(this.mapLayers.splice(t,1),this.scene.remove(e),e.dispose(),this.dispatchEvent({type:"mapLayer_removed",scene:this,mapLayer:e}))}removeModel(e){try{const t=this.models.indexOf(e);if(t>-1){if(this.models.splice(t,1),this.scene.remove(e),e instanceof tt){this.scene.remove(e.mixer);const t=this.mixers.indexOf(e.mixer);t>-1&&this.mixers.splice(t,1)}e.dispose(),this.dispatchEvent({type:"model_removed",scene:this,model:e})}}catch(e){console.error(e)}}removeBlurObject(e){const t=this.blurObjects.indexOf(e);t>-1&&(this.blurObjects.splice(t,1),this.scene.remove(e),e.geometry.dispose(),e.material.dispose(),this.dispatchEvent({type:"blur_object_removed",scene:this,object:e}))}removeAnimateObject(e){const t=this.animateObjects.indexOf(e);if(t>-1){try{this.animateObjects.splice(t,1),this.scene.remove(e),e.dispose()}catch(e){}this.dispatchEvent({type:"animate_removed",scene:this,animate:e})}}removeI3DTileLayer(e){const t=this.i3dTileLayers.indexOf(e);if(t>-1){try{this.i3dTileLayers.splice(t,1),this.scene.remove(i3dTileLayers.group),i3dTileLayers.dispose()}catch(e){}this.dispatchEvent({type:"i3dtilelayer_removed",scene:this,animate:e})}}removeObjectByName(e){const t=this.models.filter((function(t){return t.name===e}));if(t&&t.length>0)for(let e=0,n=t.length;e<n;e++)this.removeModel(t[e]);const n=this.maps.filter((function(t){return t.name===e}));if(n&&n.length>0)for(let e=0,t=n.length;e<t;e++)this.removeMap(n[e]);const i=this.mapLayers.filter((function(t){return t.name===e}));if(i&&i.length>0)for(let e=0,t=i.length;e<t;e++)this.removeMapLayer(i[e]);const r=this.blurObjects.filter((function(t){return t.name===e}));if(r&&r.length>0)for(let e=0,t=r.length;e<t;e++)this.removeBlurObject(r[e]);const o=this.animateObjects.filter((function(t){return t.name===e}));if(o&&o.length>0)for(let e=0,t=o.length;e<t;e++)this.removeAnimateObject(o[e]);const a=this.trafficLights.filter((function(t){return t.name===e}));if(a&&a.length>0)for(let e=0,t=a.length;e<t;e++)this.removeTrafficLight(a[e]);const s=this.scene.getObjectByName(e);if(s&&s.length>0)for(let e=0,t=s.length;e<t;e++)this.scene.remove(s[e]),s[e].dispose&&s[e].dispose()}removeMixer(e){const t=this.mixers.indexOf(e);return t>-1&&this.mixers.splice(t,1),e.stopAllAction(),e.uncacheClip(),e.uncacheRoot(),e.uncacheAction(),!1}removeAllMaps(){for(;this.maps.length>0;)this.removeMap(this.maps[0])}removeAllModels(){for(;this.models.length>0;)this.removeModel(this.models[0])}removeAllTrafficLights(){for(;this.trafficLights.length>0;)this.removeTrafficLight(this.trafficLights[0])}removeAllBlurObjects(){for(;this.blurObjects.length>0;)this.removeBlurObject(this.blurObjects[0])}removeAllAnimateObjects(){for(;this.animateObjects.length>0;)this.removeAnimateObject(this.animateObjects[0])}removeAllI3DTileLayers(){for(;this.i3dTileLayers.length>0;)this.removeI3dTileLayer(this.i3dTileLayers[0])}updateBaseMap(e){if(e.updateMatrixWorld(!0),e.boundingBox)this.bbox?this.bbox.union(e.boundingBox):this.bbox=e.boundingBox.clone();else{const t=e.geometry.boundingBox?e.geometry.boundingBox:e.boundingBox,n=Qe.computeTransformedBoundingBox(t,e.matrixWorld);this.bbox?this.bbox.union(n):this.bbox=n.clone()}const n=new t.Vector3;this.bbox.getCenter(n);const i=new t.Vector3;this.bbox.getSize(i),this.basemap.position.x=n.x,this.basemap.position.y=n.y,this.basemap.scale.x=Math.ceil(.005*i.x),this.basemap.scale.y=Math.ceil(.005*i.y)}getActiveCamera(){return"PERSPECTIVE"===this.cameraMode?this.cameraP:"ORTHOGRAPHIC"===this.cameraMode?this.cameraO:null}initRtc(e){const t=e.clone().negate();this.scene.position.copy(t),this.view.rtcPoint=e.clone(),this.scene.updateWorldMatrix(!1,!0),this.view.rtcPoint=e.clone(),this.bbox&&this.bbox.translate(t)}initialize(){this.cameraP.up.set(0,0,1),this.cameraP.position.set(1e3,1e3,1e3),this.cameraO.up.set(0,0,1),this.cameraO.position.set(1e3,1e3,1e3),this.pointLight=new t.PointLight("#FFFFFF",.7,300),this.directionalLight=new t.DirectionalLight(16777215,1),this.directionalLight.position.set(10,10,100),this.directionalLight.castShadow=!0,this.directionalLight.shadow.camera.left=-5e3,this.directionalLight.shadow.camera.right=5e3,this.directionalLight.shadow.camera.top=5e3,this.directionalLight.shadow.camera.bottom=-5e3,this.directionalLight.shadow.mapSize.width=8192,this.directionalLight.shadow.mapSize.height=8192,this.directionalLight.shadow.camera.near=100,this.directionalLight.shadow.camera.far=1e4,this.directionalLight.shadow.bias=-.001,this.directionalLight.lookAt(new t.Vector3(0,0,0)),this.scene.add(this.directionalLight);const e=new t.AmbientLight(16777215);e.name="ambientLight",this.scene.add(e),this.basemap=new t.Mesh(new t.PlaneBufferGeometry(1e3,1e3,1,1),new t.MeshPhongMaterial({color:10526880,dithering:!0})),this.basemap.receiveShadow=!0,this.basemap.position.z=-10,this.basemap.visible=!1,this.scene.add(this.basemap);const n=Qe.createBackgroundTexture(512,512);n.minFilter=n.magFilter=t.NearestFilter,n.minFilter=n.magFilter=t.LinearFilter,this.sceneBGTexture=n}loadSkyBox(e){this.sceneBGSkyBox=(new t.CubeTextureLoader).setPath(e).load(["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"])}}class Bn{constructor(e){this.viewer=e,this.visible=!1,this.dom=this.createElement(),e.addEventListener("update",()=>{const n=e.scene.view.direction.clone();n.z=0,n.normalize();const i=e.scene.getActiveCamera().getWorldPosition(new t.Vector3),r=i.clone().add(n),o=e.getProjection(),a=Qe.computeAzimuth(i,r,o);this.dom.img.style.transform=`rotateZ(${a}rad)`}),this.dom.div.click(()=>{e.setTopView()}),e.area.appendChild(this.dom.div),this.setVisible(this.visible)}setVisible(e){this.visible=e;const t=e?"":"none";this.dom.div.style.display=t}isVisible(){return this.visible}createElement(){const e=document.createElement("div");e.className="compas",e.style.width="60px",e.style.height="60px",e.style.position="absolute",e.style.top="10px",e.style.right="10px",e.style.zIndex=1e4;const t=document.createElement("div");return t.style.backgroundImage=`url(${P}/img/compas.svg)`,t.style.backgroundSize="100%",t.style.backgroundRepeat="no-repeat",t.style.width="100%",t.style.height="100%",e.appendChild(t),{div:e,img:t}}}class jn{constructor(e,t,n){this.mapLayers=e||[],this.maxLevel=t||Number.MAX_VALUE,this.callback=n,this.priorityQueue=new L((function(e,t){return e.weight>t.weight})),this.initialize()}addMapLayer(e){this.getMapLayer(e.url)||(this.mapLayers.push(e),this.addRootTileToQueue(e.root,this.mapLayers.length-1),this.callback&&this.callback())}getMapLayer(e){for(let t=0;t<this.mapLayers.length;t++)if(this.mapLayers[t].url===e)return this.mapLayers[t];return null}removeMapLayer(e){const t=this.mapLayers.indexOf(e);t>-1&&(this.mapLayers.splice(t,1),this.removeRootTileFromQueue(e.root),this.priorityQueue.trim())}initialize(){for(let e=0;e<this.mapLayers.length;e++)this.mapLayers[e].url&&this.addRootTileToQueue(this.mapLayers[e].root,e);this.priorityQueue.trim()}addRootTileToQueue(e,t){for(let n=0;n<e.length;n++)this.priorityQueue.add({mapLayer:t,tile:e[n],weight:Number.MAX_VALUE,parent:null})}removeRootTileFromQueue(e,t){for(let n=0;n<e.length;n++)this.priorityQueue.remove({mapLayer:t,tile:e[n],weight:Number.MAX_VALUE,parent:null})}updateVisibilityStructures(e,n){let i=[],r=[];for(let o=0;o<e.length;o++){let a=e[o];if(!a.isInitialized())continue;a.numVisibleGeometries=0,a.numVisibleTiles=0,a.visibleTiles.clear(),n.updateMatrixWorld();let s=new t.Frustum,l=n.matrixWorldInverse,c=a.matrixWorld,u=n.clone();u.near=Math.min(n.near,.1),u.updateProjectionMatrix();let h=n.projectionMatrix,d=(new t.Matrix4).multiply(h).multiply(l).multiply(c);s.setFromProjectionMatrix(d),i.push(s);let f=n.matrixWorld,p=(new t.Matrix4).getInverse(c),m=(new t.Matrix4).multiply(p).multiply(f),v=(new t.Vector3).setFromMatrixPosition(m);r.push(v),a.visible&&null!==a.root&&this.addRootTileToQueue(a.root,o)}return{frustums:i,camObjPositions:r,priorityQueue:this.priorityQueue}}updateVisibility(e,t,n){let i=0;const r=new Map(e.map(e=>[e,0])),o=[],a=[];let s=1/0;const l=this.updateVisibilityStructures(e,t),c=l.frustums,u=l.camObjPositions,h=l.priorityQueue;n.domElement.clientWidth;let d=n.domElement.clientHeight;for(let t=0;t<e.length;t++){const n=e[t];n.visible&&(n.maxVisibledLevel=0,n.updateMatrixWorld())}for(;!h.isEmpty();){let n=h.poll(),l=n.tile,f=(n.parent,e[n.mapLayer]),p=l.getBoundingBox(),m=c[n.mapLayer],v=u[n.mapLayer],g=m.intersectsBox(p),y=f.deepestVisibleLevel||1/0,b=l.level,x=g;if(x=x&&!(i+l.getNumGeometries()>Ot()),x=x&&!(r.get(f)+l.getNumGeometries()>f.geometryBudget),x=x&&b<=y,l.spacing&&(s=Math.min(s,l.spacing)),i+l.getNumGeometries()>Ot())break;if(!x)continue;i+=l.getNumGeometries();const w=r.get(f);r.set(f,w+l.getNumGeometries()),f.numVisibleTiles++,f.numVisibleGeometries+=l.getNumGeometries(),f.maxVisibledLevel=Math.max(l.level,f.maxVisibledLevel),l.isLoaded()||(a.push(l),o.push(l)),l&&(ft.touch(l),o.push(l),l.update&&l.update(),f.visibleTiles.set(l.name,l));let _=l.getChildTiles();_.length<1&&(_=l.createChildTiles());for(let e=0;e<_.length;e++){let i=_[e],r=0;if(t.isPerspectiveCamera){let e=i.getBoundingSphere(),n=e.center;const o=v.x-n.x,a=v.y-n.y,s=v.z-n.z,l=o*o+a*a+s*s,c=Math.sqrt(l),u=e.radius,h=t.fov*Math.PI/180,p=u*(.5*d/(Math.tan(h/2)*c));if(p<f.minimumTilePixelSize){i.hideDescendants();continue}if(i.level>5&&p<4*f.minimumTilePixelSize){i.hideDescendants();continue}i.visible=!0,r=p,c-u<0&&(r=Number.MAX_VALUE)}else{let e=i.getBoundingBox();r=e.max.clone().sub(e.min).length()}h.add({mapLayer:n.mapLayer,tile:i,parent:l,weight:r})}}h.trim();for(let e=0;e<Math.min(At(),a.length);e++)a[e].load();return{visibleTiles:o,numVisibleGeometries:i,lowestSpacing:s}}updateMapLayers(e,t,n){const i=e.filter(e=>e.visible);let r=this.updateVisibility(i,t,n);for(let t=0;t<e.length;t++)e[t].update();return ft.freeMemory(),r}}class zn extends t.EventDispatcher{constructor(e,n={}){super(),this.scaleFactor=1,this.area=e,this.moveSpeed=10,this.freeze=!1,this.enablePan=!0,this.enableZoom=!0,this.enableRotation=!0,this.projection=null,this.clock=new t.Clock,this.renderer=null,this.vRenderer=null,this.scene=null,this.compass=null,this.inputHandler=null,this.controls=null,this.isFlipYZ=!1,this.skybox=null,this.background=null,this.shadow=n.shadow,this.renderMode=V.SCENE_ONLY,this.aaMode=void 0===n.aaMode?G.FXAA:n.aaMode,this.aaLevel=void 0===n.aaLevel?1:n.aaLevel,this.backgroundColor=n.backgroundColor||2302755,null!=n.backgroundColor?this.background="personal":this.background="gradient",this.fov=n.fov||60,this.showAxesHelper=!1,this.mapRequest=new jn,this.init(),this.renderer.domElement.addEventListener("webglcontextlost",e=>{console.log(e),this.postMessage("WebGL context lost. ☹");const t=this.renderer.getContext().getError();console.log(t)},!1);const i=new Rn(this.renderer);this.setScene(i);{this.inputHandler=new Ln(this),this.inputHandler.setScene(this.scene),this.createControls(),this.campass=new Bn(this);const e=e=>{if(1===this.scene.maps.length&&e.map.boundingBox){let n=e.map.boundingBox.getSize(new t.Vector3).length();n/=5,this.setMoveSpeed(n)}};this.addEventListener("scene_changed",t=>{this.inputHandler.setScene(t.scene),t.scene.hasEventListener("map_added",e)||t.scene.addEventListener("map_added",e)}),this.scene.addEventListener("map_added",e)}this.setFOV(60),this.setFreeze(!1),this.setControls(this.composeControls),this.setBackground(this.background),this.setAxesHelperVisible(!1),this.scaleFactor=1,this.vRenderer=new Nn(this),void 0!==n.useDefaultRenderLoop&&!0!==n.useDefaultRenderLoop||requestAnimationFrame(this.loop.bind(this))}init(){this.initThree()}onCrash(e){console.error(e)}fitToScene(e=1,n=0){const i=this.getBoundingBox(this.scene.maps),r=new t.Object3D;r.boundingBox=i,this.zoomTo(r,e,n,this.scene.view.yaw,this.scene.view.pitch,!1),this.controls.stop()}flyTo(e,n=0,i=0,r=0,o=!0){if(!e)return!1;e=re(e);const a=new t.Box3,s=(new t.Vector3).subVectors(e,new t.Vector3(10,10,10)),l=(new t.Vector3).addVectors(e,new t.Vector3(10,10,10));a.set(s,l),o&&this.scene.rtcPoint&&a.translate(this.scene.rtcPoint.clone().negate());const c=new t.Object3D;c.boundingBox=a,this.scene.view.pitch=i,this.scene.view.yaw=n,this.zoomTo(c,1,n,i,r),this.controls.stop()}getCameraPosition(e=!1){const t={x:this.scene.cameraP.position.x,y:this.scene.cameraP.position.y,z:this.scene.cameraP.position.z,yaw:this.scene.view.yaw,pitch:this.scene.view.pitch};return e&&this.scene.rtcPoint&&(t.x+=this.scene.rtcPoint.x,t.y+=this.scene.rtcPoint.y,t.z+=this.scene.rtcPoint.z),t}initControl(){this.controls=new An(this.camera,this.renderer.domElement),this.controls.rotateSpeed=1,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.8,this.controls.update()}initThree(){const e=this.area.clientWidth,n=this.area.clientHeight,i={alpha:!0,depth:!0,stencil:!1,antialias:!0,preserveDrawingBuffer:!0,powerPreference:"high-performance"},r=document.createElement("canvas");let o=r.getContext("webgl",i);O.WEBGL.isWebGL2Available()&&(o=r.getContext("webgl2",i)),this.renderer=new t.WebGLRenderer({alpha:!0,antialias:!0,premultipliedAlpha:!1,canvas:r,context:o,precision:"highp",powerPreference:"high-performance"}),this.renderer.sortObjects=!1,this.renderer.setSize(e,n),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,this.area.appendChild(this.renderer.domElement),this.renderer.domElement.tabIndex="2222",this.renderer.domElement.style.position="relative",this.renderer.domElement.style.left=0,this.renderer.domElement.style.top=0,this.renderer.domElement.addEventListener("mousedown",()=>{this.renderer.domElement.focus()});const a=this.renderer.getContext();a.getExtension("EXT_frag_depth"),a.getExtension("WEBGL_depth_texture"),a.getExtension("WEBGL_color_buffer_float");const s=a.getExtension("OES_vertex_array_object");if(!s)throw new Error("OES_vertex_array_object extension not supported");a.createVertexArray=s.createVertexArrayOES.bind(s),a.bindVertexArray=s.bindVertexArrayOES.bind(s)}setAxesHelperVisible(e){this.axisHelper||(this.axisHelper=new t.AxesHelper(10,10,10),this.scene.scene.add(this.axisHelper)),this.axisHelper.visible=e}setRenderMode(e){if(!e)return!1;e!==this.renderMode&&(this.renderMode=e,e===V.SCEME_WITH_GLOW?this.vRenderer.bloomComposer.renderToScreen=!1:e===V.GLOW_ONLY&&(this.vRenderer.bloomComposer.renderToScreen=!0)),this.dispatchEvent({type:"render_mode_change",renderMode:e})}getRenderMode(){return this.renderMode}setExposure(e){const n=t.Math.clamp(e,.1,2);this.renderer.toneMappingExposure=Math.pow(n,4)}setBloomThreshold(e){this.vRenderer.bloomPass.threshold=t.Math.clamp(e,.01,1)}setBloomStrength(e){this.vRenderer.bloomPass.strength=t.Math.clamp(e,0,10)}setBloomRadius(e){this.vRenderer.bloomPass.radius=t.Math.clamp(e,0,8)}setControls(e){e!==this.controls&&(this.controls&&(this.controls.enabled=!1,this.inputHandler.removeInputListener(this.controls)),this.controls=e,this.controls.enabled=!0,this.inputHandler.addInputListener(this.controls))}getControls(){return this.controls}createControls(){this.orbitControls=new kn(this),this.orbitControls.enabled=!1,this.geoControls=new On(this),this.geoControls.enabled=!1,this.composeControls=new An(this),this.composeControls.enabled=!1}setScene(e){if(e===this.scene)return;const t=this.scene;this.scene=e,this.dispatchEvent({type:"scene_changed",oldScene:t,scene:e})}setFOV(e){this.fov!==e&&(this.fov=e,this.dispatchEvent({type:"fov_changed",viewer:this}))}getFOV(){return this.fov}setFreeze(e){e=Boolean(e),this.freeze!==e&&(this.freeze=e,this.dispatchEvent({type:"freeze_changed",viewer:this}))}getFreeze(){return this.freeze}getProjection(){return this.projection}setProjection(e){this.projection!==e&&(this.projection=e)}getBackground(){return this.background}setBackground(e){this.background!==e&&("skybox"===e&&(this.skybox=Qe.loadSkybox(new URL(P+"/textures/skybox/").href)),this.background=e,this.dispatchEvent({type:"background_changed",viewer:this}))}setFog(e){this.fog=e}setBackgroundColor(e){"personal"===self.background&&(this.backgroundColor=e)}setMoveSpeed(e){this.moveSpeed!==e&&(this.moveSpeed=e,this.dispatchEvent({type:"move_speed_changed",viewer:this,speed:e}))}getMoveSpeed(){return this.moveSpeed}zoomTo(e,n,i=100,r,o,a=!0){const s=this.scene.view;r&&(s.yaw=Qe.clampRadian(r)),o&&(s.pitch=Qe.clampRadian(o));const l=this.scene.cameraP.clone();let c;l.rotation.copy(this.scene.cameraP.rotation),l.rotation.order="ZXY",l.rotation.x=Math.PI/2+s.pitch,l.rotation.z=s.yaw,l.updateMatrix(),l.updateMatrixWorld(),a?l.zoomTo(e,n,this.scene.rtcPoint):l.zoomTo(e,n),c=e.boundingSphere?e.boundingSphere:e.geometry&&e.geometry.boundingSphere?e.geometry.boundingSphere:e.boundingBox.getBoundingSphere(new t.Sphere),c=c.clone().applyMatrix4(e.matrixWorld);const u=s.position.clone(),h=l.position.clone(),d=s.getPivot(),f=c.center.clone();a&&f.sub(this.scene.rtcPoint),s.radius,h.distanceTo(f);const p=Y.Easing.Quartic.Out;{const e=u.clone(),t=new Y.Tween(e).to(h,i);t.easing(p),t.onUpdate(()=>{s.position.copy(e)}),t.start()}{const e=d.clone(),t=new Y.Tween(e).to(f,i);t.easing(p),t.onUpdate(()=>{s.lookAt(f,!1)}),t.onComplete(()=>{s.updateRealPosition(),this.dispatchEvent({type:"focusing_finished",target:this})}),this.dispatchEvent({type:"focusing_started",target:this}),t.start()}}switchDimension(e="2d",n=500,i){let r=new t.Vector3(0,0,.5);const o=this.scene.cameraP.clone();if("2d"===e.toLowerCase()&&this.scene.view.pitch>-.499*Math.PI){r=this.scene.view.getPivot(!0);const e=this.scene.view.direction.clone();r.z=o.position.z/Math.cos(e.angleTo(new t.Vector3(0,0,-1)))}else{if(!("3d"===e.toLowerCase()&&this.scene.view.pitch<=-.5*Math.PI))return!1;{const e=o.position.z,n=Math.cos(.2*Math.PI)*e,i=e-Math.sin(.2*Math.PI)*e;r=(new t.Vector3).subVectors(o.position,new t.Vector3(0,n,i))}}const a=Y.Easing.Quartic.Out;{let t={t:0};const i=new Y.Tween(t).to({t:1},n);i.easing(a);const o=this.scene.view.yaw,s=0,l=this.scene.view.pitch;let c=-.5*Math.PI;"3d"===e&&(c=-.2*Math.PI);const u=this.scene.cameraP.position.clone(),h=r.clone();i.onUpdate(()=>{this.scene.view.yaw=o*(1-t.t)+s*t.t,this.scene.view.pitch=l*(1-t.t)+c*t.t,this.scene.view.position.x=u.x*(1-t.t)+h.x*t.t,this.scene.view.position.y=u.y*(1-t.t)+h.y*t.t,this.scene.view.position.z=u.z*(1-t.t)+h.z*t.t}),i.onComplete(()=>{this.scene.view.updateRealPosition()}),i.start()}}getBoundingBox(e){return this.scene.getBoundingBox(e)}setTopView(){this.scene.view.yaw=0,this.scene.view.pitch=-Math.PI/2,this.fitToScene()}setBottomView(){this.scene.view.yaw=-Math.PI,this.scene.view.pitch=Math.PI/2,this.fitToScene()}setFrontView(){this.scene.view.yaw=0,this.scene.view.pitch=0,this.fitToScene()}setBackView(){this.scene.view.yaw=Math.PI,this.scene.view.pitch=0,this.fitToScene()}setLeftView(){this.scene.view.yaw=-Math.PI/2,this.scene.view.pitch=0,this.fitToScene()}setRightView(){this.scene.view.yaw=Math.PI/2,this.scene.view.pitch=0,this.fitToScene()}flipYZ(){this.isFlipYZ=!this.isFlipYZ,console.log("TODO")}update(e,n){const i=this.scene,r=i.getActiveCamera();if(this.shadow){const e=i.getObjectByName("sky");if(e&&e.length){const n=e[0].material.uniforms.sunPosition.value.clone().normalize(),r=Math.max(i.view._radius,500);i.directionalLight.shadow.camera.left=-5*r,i.directionalLight.shadow.camera.right=5*r,i.directionalLight.shadow.camera.top=5*r,i.directionalLight.shadow.camera.bottom=-5*r,i.directionalLight.shadow.camera.far=Math.max(5e3,i.view._radius),i.directionalLight.position.copy((new t.Vector3).addVectors(n.multiplyScalar(r),new t.Vector3(i.rtcPoint.x,i.rtcPoint.y,3e3)))}}if(this.scene.pointLight.position.copy(r.position),this.scene.pointLight.position.x+=10,r.fov=this.fov,!this.freeze){const o=this.mapRequest.updateMapLayers(this.scene.mapLayers,r,this.renderer);if(o.lowestSpacing!==1/0){let e=10*o.lowestSpacing;const t=this.getBoundingBox().applyMatrix4(r.matrixWorldInverse);let n=Math.abs(t.min.z);n=Math.max(1.1*n,5e3),e=Math.min(1,Math.max(.01,e)),n=Math.max(n,e+5e3),e===1/0&&(e=.1),r.near=e,r.far=n}if("ORTHOGRAPHIC"===this.scene.cameraMode&&(r.near=-r.far),this.getControls()===this.deviceControls?(this.controls.setScene(i),this.controls.update(e),i.cameraP.position.copy(i.view.position),i.cameraO.position.copy(i.view.position)):null!==this.controls&&(this.controls.setScene(i),this.controls.update(e),"undefined"==typeof debugDisabled&&(i.cameraP.position.copy(i.view.position),i.cameraP.rotation.order="ZXY",i.cameraP.rotation.x=Math.PI/2+i.view.pitch,i.cameraP.rotation.z=i.view.yaw),i.cameraO.position.copy(i.view.position),i.cameraO.rotation.order="ZXY",i.cameraO.rotation.x=Math.PI/2+i.view.pitch,i.cameraO.rotation.z=i.view.yaw),r.updateMatrix(),r.updateMatrixWorld(),r.matrixWorldInverse.getInverse(r.matrixWorld),void 0===this._previousCamera&&(this._previousCamera=i.getActiveCamera().clone(),this._previousCamera.rotation.copy(i.getActiveCamera().rotation)),this._previousCamera.matrixWorld.equals(r.matrixWorld)&&this._previousCamera.projectionMatrix.equals(r.projectionMatrix)||(this.dispatchEvent({type:"camera_changed",previous:this._previousCamera,camera:r}),i.view._levelChange&&this.dispatchEvent({type:"level_change",level:i.view.level,change:i.view._levelChange})),this._previousCamera=this.scene.getActiveCamera().clone(),this._previousCamera.rotation.copy(this.scene.getActiveCamera().rotation),Y.update(n),this.scene.animateObjects.length){const e=Qe.projectedRadius(1,r,1e3,this.area.clientWidth,this.area.clientHeight);for(let i=0;i<this.scene.animateObjects.length;i++)if(this.scene.animateObjects[i]&&(this.scene.animateObjects[i].traverse(e=>{e.update&&e.update(n)}),this.scene.animateObjects[i].sizeAttenuation)){const n=r.position.distanceTo(this.scene.animateObjects[i].getWorldPosition(new t.Vector3));let o=.001*(this.scene.animateObjects[i].size||20)*n/e,a=1e3;this.scene.animateObjects[i].maxScale&&(a=Math.max(this.scene.animateObjects[i].maxScale,1)),o=Math.min(a,Math.max(o,1)),this.scene.animateObjects[i].scale.set(o,o,o),this.scene.animateObjects[i].faceToCamera&&this.scene.animateObjects[i].faceToCamera(r)}}if(this.scene.mixers&&this.scene.mixers.length)for(let t=0;t<this.scene.mixers.length;t++)this.scene.mixers[t].update(e);this.scene.i3dTileLayers&&this.scene.i3dTileLayers.length&&this.scene.i3dTileLayers.forEach(e=>{e.tilesRenderer&&e.visible&&(e.initCamera||(e.tilesRenderer.setCamera(r),e.tilesRenderer.setResolutionFromRenderer(r,this.renderer),e.initCamera=!0),e.tilesRenderer.update())})}this.dispatchEvent({type:"update",delta:e,timestamp:n})}render(){try{this.renderer||(this.renderer=new t.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.area.clientWidth,this.area.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio)),this.vRenderer||(this.vRenderer=new Nn(this));{const e=this.scaleFactor*this.area.clientWidth,t=this.scaleFactor*this.area.clientHeight;this.renderer.setSize(e,t),this.vRenderer.bloomComposer.setSize(e,t),this.renderer.getPixelRatio();const n=e/t,i=this.scene;i.cameraP.aspect=isNaN(n)?1:n,i.cameraP.updateProjectionMatrix();const r=this.scene.view.radius;i.cameraO.left=-r,i.cameraO.right=r,i.cameraO.top=1*r/n,i.cameraO.bottom=1*-r/n,i.cameraO.updateProjectionMatrix()}this.vRenderer.clear(),this.vRenderer.render(this.renderer)}catch(e){this.onCrash(e)}}loop(e){requestAnimationFrame(this.loop.bind(this)),this.update(this.clock.getDelta(),e),this.render()}}class Un{constructor(e,n,i,r,o){this.navigation=e,this.path=new t.CatmullRomCurve3(n),this.length=this.path.getLength(),this.viewParams=i,this.callback=r,this.completeCallback=o,this.tween=null,this.repeat=!1,this.t=0,this.over=!1,this.init()}init(e=0){let t=0;const n=this.viewParams[0].speed;if(!(Math.abs(n)>.001))return this.over=!0,void(this.completeCallback&&this.completeCallback());t=1e3*this.length*2/n;let i={t:0};this.tween=new Y.Tween(i).to({t:1},t),this.tween.easing(Y.Easing.Linear.None),this.tween.onUpdate(e=>{this.t=i.t;const t=this.getPoint(i.t);let n,r,o,a,s,l,c=0;i.t<.5?(n=this.viewParams[0].yaw,r=this.viewParams[0].pitch,a=this.viewParams[1].yaw,s=this.viewParams[1].pitch,c=i.t):(n=this.viewParams[1].yaw,r=this.viewParams[1].pitch,a=this.viewParams[2].yaw,s=this.viewParams[2].pitch,c=i.t-.5),o=a-n,l=s-r,this.navigation.viewer.scene.view.position.copy(t.sub(this.navigation.viewer.scene.rtcPoint)),this.navigation.viewer.scene.view.yaw=n+o*c*2,this.navigation.viewer.scene.view.pitch=r+l*c*2,this.callback(i.t)}),this.tween.onComplete(()=>{this.repeat?this.start():(this.over=!0,this.completeCallback&&this.completeCallback())}),this.tween.delay(e)}start(){this.tween&&(this.tween.stop(),this.tween.start())}stop(){this.tween&&(this.tween.stop(),this.t=0)}pause(){this.tween&&this.tween.stop()}resume(){this.start()}getPoint(e){return isNaN(e)&&(e=0),this.path.getPoint(e)}}class Vn extends t.Object3D{constructor(e,t={}){super(),this.fontsize=t.fontsize||500,this.letterSpacing=t.letterSpacing||30,this.text=e||"",this.name=t.name||"",this.color=t.color||t.color||"#FF0000",this.drawStrokeStyle=t.drawStrokeStyle||!1,this.strokeColor=t.strokeColor||"#FF0000",this.fontface=t.fontface||"微软雅黑",this._rotation=re(t.rotation),this._width=t.width||15,this.mesh=null,this.texture=null,this.material=null,this.init()}init(){this.updateText(),this.rotation.set(this._rotation.x,this._rotation.y,this._rotation.z)}setTextColor(e){this.color=e,this.updateText()}updateText(){try{var e=document.createElement("canvas"),n=e.getContext("2d");n.font=this.fontsize/this.text.length+"px "+this.fontface;let r=n.measureText(this.text).width+this.text.length*this.letterSpacing;e.width=r,e.height=r,n.font=this.fontsize/this.text.length+"px "+this.fontface,n.fillStyle=this.color,n.textAlign="center";let o=r/2,a=0;for(let e=0;e<this.text.length;e++){const t=this.text.slice(e,e+1).toString();t.match(/[A-Za-z0-9]/)&&a<576?(n.save(),n.translate(o,a),n.rotate(Math.PI/180*90),n.textBaseline="bottom",n.fillText(t,0,0),this.drawStrokeStyle&&(n.strokeStyle=this.strokeColor,n.strokeText(t,0,0)),n.restore(),a+=n.measureText(t).width+this.letterSpacing):t.match(/[\u4E00-\u9FA5]/)&&a<576&&(n.save(),n.textBaseline="top",n.fillText(t,o,a),this.drawStrokeStyle&&(n.strokeStyle=this.strokeColor,n.strokeText(t,o,a)),n.restore(),a+=n.measureText(t).width+this.letterSpacing)}this.texture=new t.CanvasTexture(e);var i=new t.PlaneGeometry(this._width,2*this._width);this.material=new t.MeshPhongMaterial({depthTest:!1,depthWrite:!1,transparent:!0,map:this.texture}),this.mesh?(this.mesh.material=this.material,this.mesh.updateMatrix()):(this.mesh=new t.Mesh(i,this.material),this.add(this.mesh))}catch(e){}}dispose(){this.texture.dispose(),this.material.dispose(),this.material.map.dispose()}}e.ANTIALIASING_MODE=G,e.AnimationPath=ne,e.AreaLabel=class extends jt{constructor(e={}){super(e),this.color=new t.Color(e.color),e.needEnter&&this.initEnter(),e.needLine&&this.initLine()}initEnter(){const e=new t.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:!1,opacity:0}),n=new t.Sprite(e);n.scale.set(1/this.factor.x*.2*.5,1/this.factor.y*.09*.5,1),n.material.color=new t.Color("#58d2d4"),n.center.set(-2.75,-6.45),this.enter=n,this.add(this.enter)}initLine(){const e=new t.CylinderBufferGeometry(.08,.08,20,32,1),n=new t.MeshBasicMaterial({color:this.color});this.line=new t.Mesh(e,n),this.line.rotateX(.5*Math.PI),this.line.position.z=-10,this.add(this.line)}updateInfo(e,t=[0,0,100,100],n){const[i,r]=t,{width:o,height:a}=this.drawCanvas,s=this.drawCanvas.getContext("2d");s.clearRect(0,0,o,a),s.drawImage(this.mainView,i,r,o,a),n&&n.forEach(e=>{const{img:t,imgInfo:n}=e;s.drawImage(t,n.position[0]*this.factor.x*3,n.position[1]*this.factor.y*3,n.size[0]*this.factor.x*3,n.size[1]*this.factor.y*3)}),e.forEach(e=>{const{text:t,position:n,size:i,color:r,fontFamily:o,textAlign:a,fontWeight:l}=e;s.font=`${l||"normal"} ${i*this.factor.y}px ${o}`,s.fillStyle=r,s.textBaseline="top",s.textAlign=a||"left";const c=s.measureText(t).width;s.fillText(t,n[0]*this.factor.x,n[1]*this.factor.y,c/this.factor.y*3)}),this.texture.image=this.drawCanvas,this.texture.needsUpdate=!0,this.sprite.material.map=this.texture}raycast(e,t){for(let n=0;n<this.children.length;n++){const i=this.children[n];i.visible&&i.raycast(e,t)}return t}dispose(){const e=[];for(e.push(...this.children);e.length;){const t=e.pop();t.children&&t.children.length&&e.push(...t.children),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}},e.BACKGROUND={BLACK:"black",WHITE:"white",SKYBOX:"skybox",GRADIEN:"gradient",PERSONAL:"personal"},e.Billboard=Cn,e.BloomLayer=st,e.Building=En,e.CarFlag=Vt,e.ComposeControls=An,e.DRACOLoader=bn,e.DynamicModel=tt,e.FlyLineLayer=nn,e.GeoControls=On,e.GeoJsonLoader=class{constructor(e={}){this.scene=e.scene||null,this.data=e.data||null,this.options={color:"#ffffff",width:1,size:1,dashSize:null,gapSize:null,offset:new t.Vector3(0,0,0)}}loadData(e,n={}){n={color:n.color||this.options.color,width:n.width||this.options.width,size:n.size||this.options.size,dashSize:n.dashSize||this.options.dashSize,gapSize:n.gapSize||this.options.gapSize,offset:n.offset||this.options.offset,encryption:n.encryption||!1};const i=x.defer();let r="json";return this.encryption&&(r="text"),k.request({url:e,responseType:r}).then(e=>{let r;if(this.encryption){const t=b.Base64.decode(e.data);r=JSON.parse(t).features}else r=e.data.features;const o=new t.Object3D;o.boundingBox=new t.Box3;for(let e=0,t=r.length;e<t;e++){const t=Qe.featureToSceneNode(r[e],n);o.add(t)}r=null,i.resolve(o)}),i.promise}setData(e,n={}){n={color:n.color||this.options.color,width:n.width||this.options.width,size:n.size||this.options.size,dashSize:n.dashSize||this.options.dashSize,gapSize:n.gapSize||this.options.gapSize,offset:n.offset||this.options.offset,isMerge:n.isMerge||!1};const i=e.features;let r=null;for(let e=0,o=i.length;e<o;e++){const o=Qe.featureToSceneNode(i[e],n);n.isMerge?r?r.merge(o):r=o:(r||(r=new t.Object3D),r.add(o)),r.boundingBox?r.boundingBox.union(o.boundingBox):r.boundingBox=o.boundingBox.clone()}return r.matrixAutoUpdate=!1,r.updateMatrix(),e=null,r}load(e,t={}){if(this.scene){let n=this;return this.loadData(e,t).then((function(e){for(let t=0;t<e.children.length;t++)n.scene.addMap(e.children[t]);return e}))}return this.loadData(e,t)}},e.InputHandler=Ln,e.LINE_TYPE={SOLIDE_LINE:0,DASHED_LINE:1,FAT_SOLIDE_LINE:2,FAT_DASHED_LINE:3},e.Label=jt,e.LineMesh=qt,e.MODELS=U,e.MOUSE=z,e.MapLayer=gn,e.MapLayerLoader=class{constructor(e={}){this.name="MapLayerLoader",this.debuggerMode=e.debuggerMode}load(e,t,n){e?(n||(n=new gn({url:e,debuggerMode:this.debuggerMode})),n.loaded||(Tt(),y.get(e).then(i=>{i&&i.data&&(Mt.getItem(e).then(t=>{t!==i.data.version&&(Mt.clear(),Mt.setItem(e,i.data.version))}),i.data.bbox&&(n.initialized(),n.rootLevel=i.data.startLevel,n.deepestVisibleLevel=i.data.endLevel||6,n.spacing=i.data.spacing,n.boundingBox=oe(i.data.bbox),n.position.copy(re(i.data.offset)),n.updateMatrix(),n.updateMatrixWorld(),n.initRootTile(i.data.root,n.rootLevel),t&&t(n)))}).catch(e=>{console.log("MapLayer loading failed: "+this.url),console.log(e)}).finally(()=>{Et()}))):console.error("no url")}},e.MapTile=pn,e.MapTileLoader=vn,e.Model=et,e.NavigationPath=class{constructor(e=[],t){this.keyPoints=e,this.animations=[],this.viewer=t}get(e){return isNaN(e)&&(e=0),this.spline.getPoint(e)}getLength(){return this.spline.getLength()}animate(e,n,i=0){if(this.keyPoints.length<3)return!1;for(let i=0;i<this.keyPoints.length-2;i+=2){const r=[];r.push((new t.Vector3).fromArray(this.keyPoints[i].point),(new t.Vector3).fromArray(this.keyPoints[i+1].point),(new t.Vector3).fromArray(this.keyPoints[i+2].point));const o=[];o.push({yaw:this.keyPoints[i].yaw,pitch:this.keyPoints[i].pitch,speed:this.keyPoints[i].speed||10},{yaw:this.keyPoints[i+1].yaw,pitch:this.keyPoints[i+1].pitch,speed:this.keyPoints[i+1].speed},{yaw:this.keyPoints[i+2].yaw,pitch:this.keyPoints[i+2].pitch,speed:this.keyPoints[i+2].speed});let a=null;a=i>this.keyPoints.length-3?new Un(this,r,o,e,n):new Un(this,r,o,e),this.animations.push(a)}for(let e=0;e<this.animations.length-1;e++)this.animations[e].tween&&this.animations[e].tween.chain(this.animations[e+1].tween)}start(){this.animations[0]&&this.animations[0].start()}pause(){this.animations[0]&&this.animation[0].stop()}resume(){this.animation[0]&&(this.animation[0].tween.stop(),this.animation[0].start(!0))}getGeometry(){let e=new t.Geometry,n=0;for(let i=0;i<=1;i+=.002){let r=this.spline.getPoint(i);e.vertices[n]=new t.Vector3(r.x,r.y,r.z),n++}if(this.closed){let i=this.spline.getPoint(0);e.vertices[n]=new t.Vector3(i.x,i.y,i.z)}return e}get closed(){return this.spline.closed}set closed(e){this.spline.closed=e}},e.OrbitControls=kn,e.PCDLoader=yn,e.ParticleManagement=Q,e.PathAnimation=te,e.PathNavigation=Un,e.PcdShader=Dt,e.Point=Mn,e.PointcloudStore=St,e.Polygon=Tn,e.Polyline=_n,e.PolylineTrip=rn,e.RENDER_MODE=V,e.RoadText=Vn,e.RotationCircle=It,e.RotationCircle1=function(e){const n=e.radius||20,i=e.speed||1,r=new t.PlaneBufferGeometry(2*n,2*n,1,1),o=new t.RawShaderMaterial({uniforms:{radius:{value:n},time:{value:1}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    #ifdef GL_ES\n        precision mediump float;\n    #endif\n\n    #define PI 3.1415926\n    varying vec3 vPosition;\n    uniform float time;\n    uniform vec2 resolution;\n    uniform float radius;\n    vec3 hsv2rgb(  vec3 c )\n    {\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n    return c.z * mix( vec3(1.0), rgb, c.y);\n    }\n\n\n    void main()\n    {\n        vec2 st = vPosition.xy;\n        float angle = atan(st.y,st.x) / (2.0*PI);\n        float d = length(st)-0.5*radius;\n        d = 1.0-smoothstep(0.0,0.1,abs(d)/radius);\n        d = smoothstep(0.0,1.0,d*d);\n        vec3 color = hsv2rgb(vec3(time+angle,1.0,1.0))*d;\n        gl_FragColor = vec4(color,1.0);\n    }\n  ",side:t.FrontSide,transparent:!0});let a=new t.Mesh(r,o);return a.update=function(e){this.material.uniforms.time.value+=.001*i*e},a},e.SCENE_LAYER=H,e.SnowEmitter=class extends class{constructor(e){this.particles=[],this.particlesPerSecond=100,this.particleDeathAge=1,this.age=0,this.alive=!0,this.deathAge=60,this.loop=!0,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.age),this.position=new t.Vector3,this.positionShape=1,this.positionRange=new t.Vector3,this.positionRadius=0,this.velocity=new t.Vector3,this.velocityShape=1,this.velocityRange=new t.Vector3,this.speed=0,this.speedRange=0,this.acceleration=new t.Vector3,this.accelerationRange=new t.Vector3,this.angle=0,this.angleRange=0,this.angleVelocity=0,this.angleVelocityRange=0,this.angleAcceleration=0,this.angleAccelerationRange=0,this.size=0,this.sizeRange=0,this.color=new t.Vector3(1,1,1),this.colorRange=new t.Vector3(0,0,0),this.colorTween=new K,this.opacity=1,this.opacityRange=0,this.blendMode=t.NormalBlending,this.setParameters(e),this.createParticles()}createParticles(){const e=this.particleCount,n=new Float32Array(3*e),i=new Float32Array(3*e),r=new Float32Array(e),o=new Float32Array(e),a=new Float32Array(e),s=new Float32Array(e);for(let t=0;t<e;t++){const e=this.createParticle();n[3*t]=e.position.x,n[3*t+1]=e.position.y,n[3*t+2]=e.position.z,i[3*t]=e.color.r,i[3*t+1]=e.color.g,i[3*t+2]=e.color.b,r[t]=e.size,o[t]=e.angle,a[t]=e.opacity,s[t]=e.alive,this.particles[t]=e}this.geometry.setAttribute("position",new t.BufferAttribute(n,3)),this.geometry.setAttribute("color",new t.BufferAttribute(i,3)),this.geometry.setAttribute("angle",new t.BufferAttribute(o,1)),this.geometry.setAttribute("size",new t.BufferAttribute(r,1)),this.geometry.setAttribute("visible",new t.BufferAttribute(s,1)),this.geometry.setAttribute("opacity",new t.BufferAttribute(a,1)),this.material.blending=this.blendMode,this.blendMode!==t.NormalBlending&&(this.material.depthTest=!0),this.mesh?this.mesh.geometry=this.geometry:this.mesh=new t.Points(this.geometry,this.material)}setParameters(e){this.sizeTween=new K,this.colorTween=new K,this.opacityTween=new K,Object.assign(this,e),this.particles=[],this.age=0,this.alive=!0,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.deathAge),this.geometry=new t.BufferGeometry,this.material=new t.ShaderMaterial({uniforms:{texture:{value:this.texture}},vertexShader:"\n  attribute vec3 color;\n  attribute float size;\n  attribute float angle;\n  attribute float opacity;\n  attribute float visible;\n  varying vec4 vColor;\n  varying float vAngle;\n\n  void main() {\n    if(visible > 0.5) {\n      vColor = vec4(color, opacity);\n    } else {\n      vColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n    vAngle = angle;\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    gl_PointSize = size * (300.0 / length(mvPosition.xyz));\n    gl_Position = projectionMatrix * mvPosition;\n  }\n",fragmentShader:"\n  uniform sampler2D texture;\n  varying vec4 vColor;\n  varying float vAngle;\n  void main() {\n    gl_FragColor = vColor;\n    float u = cos(vAngle);\n    float v = sin(vAngle);\n    vec2 uv = vec2(\n      u * (gl_PointCoord.x - 0.5) + v * (gl_PointCoord.y - 0.5) + 0.5,\n      u * (gl_PointCoord.y - 0.5) - v * (gl_PointCoord.x - 0.5) + 0.5\n    );\n    vec4 texture = texture2D(texture, uv);\n    gl_FragColor = gl_FragColor * texture;\n  }\n",transparent:!0,alphaTest:.5,depthTest:!1,blending:t.AdditiveBlending}),this.mesh=new t.Points(this.geometry,this.material)}createParticle(){const e=new Z;if(e.sizeTween=this.sizeTween,e.colorTween=this.colorTween,e.opacityTween=this.opacityTween,1===this.positionShape&&(e.position=Qe.randomVector3(this.position,this.positionRange)),2===this.positionShape){const n=2*Math.random()-1,i=2*Math.PI*Math.random(),r=Math.sqrt(1-n*n),o=new t.Vector3(r*Math.cos(i),r*Math.sin(i),n);e.position=(new t.Vector3).addVectors(this.position,o.multiplyScalar(this.positionRadius))}if(1===this.velocityShape&&(e.velocity=Qe.randomVector3(this.velocity,this.velocityRange)),2===this.velocityShape){const n=(new t.Vector3).subVectors(e.position,this.position),i=Qe.randomValue(this.speed,this.speedRange);e.velocity=n.normalize().multiplyScalar(i)}e.acceleration=Qe.randomVector3(this.acceleration,this.accelerationRange),e.angle=Qe.randomValue(this.angle,this.angleRange),e.angleVelocity=Qe.randomValue(this.angleVelocity,this.angleVelocityRange),e.angleAcceleration=Qe.randomValue(this.angleAcceleration,this.angleAccelerationRange),e.size=Qe.randomValue(this.size,this.sizeRange);const n=Qe.randomVector3(this.color,this.colorRange);return e.color=(new t.Color).setHSL(n.x,n.y,n.z),e.opacity=Qe.randomValue(this.opacity,this.opacityRange),e.age=0,e}particleUpdate(e){const t=[],n=this.geometry.attributes.position.array,i=this.geometry.attributes.opacity.array,r=this.geometry.attributes.visible.array,o=this.geometry.attributes.color.array,a=this.geometry.attributes.angle.array,s=this.geometry.attributes.size.array;for(let l=0;l<this.particleCount;l++){const c=this.particles[l];c.alive&&(c.up(e),c.age>this.particleDeathAge&&(c.alive=0,t.push(l)),n[3*l]=c.position.x,n[3*l+1]=c.position.y,n[3*l+2]=c.position.z,o[3*l]=c.color.r,o[3*l+1]=c.color.g,o[3*l+2]=c.color.b,r[l]=c.alive,i[l]=c.opacity,a[l]=c.angle,s[l]=c.size)}if(this.geometry.attributes.size.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.attributes.angle.needsUpdate=!0,this.geometry.attributes.visible.needsUpdate=!0,this.geometry.attributes.opacity.needsUpdate=!0,this.geometry.attributes.position.needsUpdate=!0,this.alive){if(this.age<this.particleDeathAge){let t=Math.round(this.particlesPerSecond*(this.age+0)),n=Math.round(this.particlesPerSecond*(this.age+e));n>this.particleCount&&(n=this.particleCount);for(let e=t;e<n;e++)this.particles[e].alive=1}for(let e=0;e<t.length;e++){let i=t[e];this.particles[i]=this.createParticle(),this.particles[i].alive=1,n[3*i]=this.particles[i].position.x,n[3*i+1]=this.particles[i].position.y,n[3*i+2]=this.particles[i].position.z}this.geometry.attributes.position.needsUpdate=!0,this.age+=e,this.age>this.deathAge&&!this.loop&&(this.alive=!1)}}}{constructor(){super({positionShape:1,position:new t.Vector3(0,0,0),positionRange:new t.Vector3(1e3,1e3,1e3),velocity:1,velocity:new t.Vector3(0,0,-90),velocityRange:new t.Vector3(50,20,50),acceleration:new t.Vector3(0,-10,0),angle:30,angleRange:720,angleVelocity:0,angleVelocityRange:60,texture:(new t.TextureLoader).load(R.snow),sizeTween:new K([0,.5],[1,20]),colorBase:new t.Vector3(.66,1,.9),opacityTween:new K([2,3],[.8,0]),particlesPerSecond:200,particleDeathAge:60,deathAge:40})}},e.TWEEN=Y,e.TextSprite=Ze,e.TileStore=Mt,e.TrafficEvent=on,e.TrafficLabel=dn,e.TrafficLabel2=fn,e.TrafficLights=ee,e.Utils=Qe,e.VRenderer=Nn,e.VScene=Rn,e.View=Fn,e.Viewer=zn,e.area=ce,e.computeCenter=be,e.convertToClockwise=le,e.createPopSphere=function(e={}){const n=e.color||new t.Color("rgb(242, 202, 126)"),i=e.radius||100,r=new t.SphereGeometry(i,64,64),o=(new t.TextureLoader).load("./resources/img/sprite.png"),a=new t.ShaderMaterial({uniforms:{color:{value:n},time:{value:1},map:{value:o}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n    uniform float time;\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position * abs(sin(fract(time))), 1.0 ) ;\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform vec3 color;\n    uniform float time;\n    uniform sampler2D map;\n    varying vec2 vUv;\n    void main( ) {\n\n        float opcity = 1.0 - abs(sin(time));\n        vec4 diffuseColor = vec4(color, opcity);\n        \n        gl_FragColor = diffuseColor;\n      \n    }\n  ",side:t.FrontSide,map:o,transparent:!0,blending:t.AdditiveBlending}),s=new t.Mesh(r,a);return s.update=function(e){this.material.uniforms.time.value=5e-4*e},s},e.createPopSphere1=function(e={}){const n=e.color||new t.Color("rgb(242, 202, 126)"),i=e.radius||100,r=new t.SphereBufferGeometry(i,16,16).attributes.position,o=new t.BufferGeometry,a=[],s=[],l=[];for(let e=0;e<256;e++)a.push(20*Math.random()-10+r.array[3*e]),a.push(20*Math.random()-10+r.array[3*e+1]),a.push(20*Math.random()-10+r.array[3*e+2]),n.setHSL(Math.random(),1,.5),s.push(n.r,n.g,n.b),l.push(20);o.setAttribute("position",new t.Float32BufferAttribute(a,3)),o.setAttribute("color",new t.Float32BufferAttribute(s,3)),o.setAttribute("size",new t.Float32BufferAttribute(l,1));const c=(new t.TextureLoader).load("./resources/img/spark1.png"),u=new t.ShaderMaterial({uniforms:{pointTexture:{value:c},time:{value:1}},vertexShader:"\n    attribute float size;\n    varying vec3 vColor;\n    uniform float time;\n    void main() {\n\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4( position * abs(sin(fract(time))), 1.0 );\n\n        gl_PointSize = size * ( 300.0 / -mvPosition.z ) ; // ;\n\n        gl_Position = projectionMatrix * mvPosition;\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform sampler2D pointTexture;\n    varying vec3 vColor;\n\n    void main() {\n\n        gl_FragColor = vec4( vColor, 1.0 );\n\n        gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord );\n\n    }\n  ",blending:t.AdditiveBlending,depthTest:!1,transparent:!0,vertexColors:!0}),h=new t.Points(o,u);return h.update=function(e){this.material.uniforms.time.value=5e-4*e},h},e.createRadarCircle2=function(e={}){e.color||new t.Color("rgb(242, 202, 126)"),e.startAng,e.endAng||Math.PI;const n=e.radius||10,i=(e.speed,new t.PlaneBufferGeometry(720,720,1,1)),r=new t.RawShaderMaterial({uniforms:{iTime:{value:.01},radius:{value:n}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    //Sci-fi radar based on the work of gmunk for Oblivion\n    //http://work.gmunk.com/OBLIVION-GFX\n    \n    #define SMOOTH(r,R) (1.0-smoothstep(R-1.0,R+1.0, r))\n    #define RANGE(a,b,x) ( step(a,x)*(1.0-step(b,x)) )\n    #define RS(a,b,x) ( smoothstep(a-1.0,a+1.0,x)*(1.0-smoothstep(b-1.0,b+1.0,x)) )\n    #define M_PI 3.1415926535897932384626433832795\n    \n    #define blue1 vec3(0.74,0.95,1.00)\n    #define blue2 vec3(0.87,0.98,1.00)\n    #define blue3 vec3(0.35,0.76,0.83)\n    #define blue4 vec3(0.953,0.969,0.89)\n    #define red   vec3(1.00,0.38,0.227)\n\n    #define MOV(a,b,c,d,t) (vec2(a*cos(t)+b*cos(0.1*(t)), c*sin(t)+d*cos(0.1*(t))))\n    \n    uniform float iTime;\n    varying vec3 vPosition;\n\n    float movingLine(vec2 uv, vec2 center, float radius)\n    {\n        //angle of the line\n        float theta0 = 90.0 * iTime;\n        vec2 d = uv - center;\n        float r = sqrt( dot( d, d ) );\n        if(r<radius)\n        {\n            //compute the distance to the line theta=theta0\n            vec2 p = radius*vec2(cos(theta0*M_PI/180.0),\n                                -sin(theta0*M_PI/180.0));\n            float l = length( d - p*clamp( dot(d,p)/dot(p,p), 0.0, 1.0) );\n            d = normalize(d);\n            //compute gradient based on angle difference to theta0\n                float theta = mod(180.0*atan(d.y,d.x)/M_PI+theta0,360.0);\n            float gradient = clamp(1.0-theta/90.0,0.3,1.0);\n            return SMOOTH(l,1.0)+0.5*gradient;\n        }\n        else return 0.0;\n    }\n    \n    float circle(vec2 uv, vec2 center, float radius, float width)\n    {\n        float r = length(uv - center);\n        return SMOOTH(r-width/2.0,radius)-SMOOTH(r+width/2.0,radius);\n    }\n    \n    float circle2(vec2 uv, vec2 center, float radius, float width, float opening)\n    {\n        vec2 d = uv - center;\n        float r = sqrt( dot( d, d ) );\n        d = normalize(d);\n        if( abs(d.y) > opening )\n            return SMOOTH(r-width/2.0,radius)-SMOOTH(r+width/2.0,radius);\n        else\n            return 0.0;\n    }\n    float circle3(vec2 uv, vec2 center, float radius, float width)\n    {\n        vec2 d = uv - center;\n        float r = sqrt( dot( d, d ) );\n        d = normalize(d);\n        float theta = 180.0*(atan(d.y,d.x)/M_PI);\n        return smoothstep(2.0, 2.1, abs(mod(theta+2.0,45.0)-2.0)) *\n            mix( 0.5, 1.0, step(45.0, abs(mod(theta, 180.0)-90.0)) ) *\n            (SMOOTH(r-width/2.0,radius)-SMOOTH(r+width/2.0,radius));\n    }\n    \n    float triangles(vec2 uv, vec2 center, float radius)\n    {\n        vec2 d = uv - center;\n        return RS(-8.0, 0.0, d.x-radius) * (1.0-smoothstep( 7.0+d.x-radius,9.0+d.x-radius, abs(d.y)))\n             + RS( 0.0, 8.0, d.x+radius) * (1.0-smoothstep( 7.0-d.x-radius,9.0-d.x-radius, abs(d.y)))\n             + RS(-8.0, 0.0, d.y-radius) * (1.0-smoothstep( 7.0+d.y-radius,9.0+d.y-radius, abs(d.x)))\n             + RS( 0.0, 8.0, d.y+radius) * (1.0-smoothstep( 7.0-d.y-radius,9.0-d.y-radius, abs(d.x)));\n    }\n    \n    float _cross(vec2 uv, vec2 center, float radius)\n    {\n        vec2 d = uv - center;\n        int x = int(d.x);\n        int y = int(d.y);\n        float r = sqrt( dot( d, d ) );\n        if( (r<radius) && ( (x==y) || (x==-y) ) )\n            return 1.0;\n        else return 0.0;\n    }\n    float dots(vec2 uv, vec2 center, float radius)\n    {\n        vec2 d = uv - center;\n        float r = sqrt( dot( d, d ) );\n        if( r <= 2.5 )\n            return 1.0;\n        if( ( r<= radius) && ( (abs(d.y+0.5)<=1.0) && ( mod(d.x+1.0, 50.0) < 2.0 ) ) )\n            return 1.0;\n        else if ( (abs(d.y+0.5)<=1.0) && ( r >= 50.0 ) && ( r < 115.0 ) )\n            return 0.5;\n        else\n            return 0.0;\n    }\n    float bip1(vec2 uv, vec2 center)\n    {\n        return SMOOTH(length(uv - center),3.0);\n    }\n    float bip2(vec2 uv, vec2 center)\n    {\n        float r = length(uv - center);\n        float R = 8.0+mod(87.0*iTime, 80.0);\n        return (0.5-0.5*cos(30.0*iTime)) * SMOOTH(r,5.0)\n            + SMOOTH(6.0,r)-SMOOTH(8.0,r)\n            + smoothstep(max(8.0,R-20.0),R,r)-SMOOTH(R,r);\n    }\n    void main()\n    {\n        vec3 finalColor;\n        vec2 uv = vPosition.xy;\n        //center of the image\n        vec2 c = vec2(0.0, 0.0);\n        finalColor = vec3( 0.3*_cross( vPosition.xy, c, 240.0) );\n        finalColor += ( circle(uv, c, 100.0, 1.0)\n                      + circle(uv, c, 165.0, 1.0) ) * blue1;\n        finalColor += (circle(uv, c, 240.0, 2.0) );//+ dots(uv,c,240.0)) * blue4;\n        finalColor += circle3(uv, c, 313.0, 4.0) * blue1;\n        finalColor += triangles(uv, c, 315.0 + 30.0*sin(iTime)) * blue2;\n        finalColor += movingLine(uv, c, 240.0) * blue3;\n        finalColor += circle(uv, c, 10.0, 1.0) * blue3;\n        finalColor += 0.7 * circle2(uv, c, 262.0, 1.0, 0.5+0.2*cos(iTime)) * blue3;\n        if( length(uv-c) < 240.0 )\n        {\n            //animate some bips with random movements\n            // vec2 p = 130.0*MOV(1.3,1.0,1.0,1.4,3.0+0.1*iTime);\n            //    finalColor += bip1(uv, c+p) * vec3(1,1,1);\n            // p = 130.0*MOV(0.9,-1.1,1.7,0.8,-2.0+sin(0.1*iTime)+0.15*iTime);\n            // finalColor += bip1(uv, c+p) * vec3(1,1,1);\n            // p = 50.0*MOV(1.54,1.7,1.37,1.8,sin(0.1*iTime+7.0)+0.2*iTime);\n            // finalColor += bip2(uv,c+p) * red;\n            if(length(finalColor)<0.2){\n                discard;\n            }else{\n                gl_FragColor = vec4( finalColor, 1.0 );\n            }\n            \n        }else{\n            discard;\n        }\n    \n        \n    }\n  ",side:t.FrontSide,transparent:!0});let o=new t.Mesh(i,r);return o.update=function(){this.material.uniforms.iTime.value+=.01},o},e.createRadarCircle3=function(e={}){const n=e.color||new t.Color("#00b7ff"),i=e.speed||1,r=new t.PlaneBufferGeometry(100,100,1,1),o=new t.RawShaderMaterial({uniforms:{uTime:{value:.01},uColor:{value:n}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n    attribute vec2 uv;\n\n    varying vec2 vUV;\n\n    void main() {\n\n        vUV = uv;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n    varying vec2 vUV;\n    uniform float uTime;\n    uniform vec3 uColor;\n\n    // returns a vec3 color from every pixel requested.\n    // Generates a BnW Ping on normalized 2d coordinate system\n    vec3 RadarPing(in vec2 uv, in vec2 center, in float innerTail, \n                in float frontierBorder, in float timeResetSeconds, \n                in float radarPingSpeed, in float fadeDistance, float t)\n    {\n        vec2 diff = center-uv;\n        float r = length(diff);\n        float time = mod(t, timeResetSeconds) * radarPingSpeed;\n    \n        float circle;\n        // r is the distance to the center.\n        // circle = BipCenter---//---innerTail---time---frontierBorder\n        //illustration\n        //https://sketch.io/render/sk-14b54f90080084bad1602f81cadd4d07.jpeg\n        circle += smoothstep(time - innerTail, time, r) * smoothstep(time + frontierBorder,time, r);\n        circle *= smoothstep(fadeDistance, 0.25, r); // fade to 0 after fadeDistance\n            \n        return vec3(circle);\n    }\n\n    void main()\n    {\t\n        //normalize coordinates \n        vec2 uv = vUV; //move coordinates to 0..1\n        uv = uv.xy*2.; // translate to the center\n        uv += vec2(-1.0, -1.0);\n        \n        vec3 color;\n        // generate some radar pings\n        float fadeDistance = 0.8;\n        float resetTimeSec = 3.0;\n        float radarPingSpeed = 0.2;\n        vec2 greenPing = vec2(0.0, 0.0);\n        color += RadarPing(uv, greenPing, 0.08, 0.00025, resetTimeSec,\n            radarPingSpeed, fadeDistance, uTime) * uColor;\n        // color += RadarPing(uv, greenPing, 0.08, 0.00025, resetTimeSec,\n            radarPingSpeed, fadeDistance, uTime + 1.) * uColor;\n        color += RadarPing(uv, greenPing, 0.08, 0.00025, resetTimeSec,\n            radarPingSpeed, fadeDistance, uTime + 2.) * uColor;\n        //return the new color\n        if(length(color)<0.001){\n            discard;\n        }else{\n            gl_FragColor = vec4(color,clamp(length(color),0.5,1.0));\n        }\n        \n    }\n\n  ",side:t.FrontSide,transparent:!0});let a=new t.Mesh(r,o);return a.update=function(){this.material.uniforms.uTime.value+=.01*i},a},e.createRoadConstrutionArea=function(e,n={color:null,lineColor:["#A56F35","#FF782B","#FF7928"],map:"./resources/img/road-basemap.png",opacity:1,offset:[0,0,1],trafficCone:"https://mapdata.bj.bcebos.com/model/common/trafficcone.glb"}){if(!e||e.length<4)return null;const i=[],r=[],o=[],a=be(e),s=new t.Group;for(let t=0;t<e.length;t++){const l=e[t][0]-a[0],c=e[t][1]-a[1];i.push(l,c,e[t][2]||.1),r.push(l,c,e[t][2]||.1);const u=l/a[2]+.5,h=c/a[3]+.5;o.push(u,h);const d=new et({name:"traffic_cone",modelType:"traffic_cone",modelUrl:n.trafficCone||"https://mapdata.bj.bcebos.com/model/common/trafficcone.glb"});d.position.x=l,d.position.y=c,s.add(d)}r.push(i[0],i[1],i[2]);const l=Qe.triangulateShape(e),c=new t.BufferGeometry;c.setAttribute("position",new t.Float32BufferAttribute(i,3)),c.setAttribute("uv",new t.Float32BufferAttribute(o,2)),c.setIndex(l);const u=new t.BufferGeometry;u.setAttribute("position",new t.Float32BufferAttribute(r,3));let h=null;n.map&&(h=(new t.TextureLoader).load(n.map));const d=new t.MeshBasicMaterial({color:n.color||"#fff",opacity:n.opacity||1,transparent:!!n.opacity&&n.opacity<1,map:h}),f=new t.Mesh(c,d);for(let e=0;e<n.lineColor.length;e++){const i=new t.Line(u,new t.LineBasicMaterial({color:n.lineColor[e]}));i.position.z=.1+.5*e,s.add(i)}s.add(f);const p=n.offset||[0,0,0];return s.position.set(a[0]+p[0],a[1]+p[1],p[2]),s},e.createTripLine=function(e={}){const n=e.vertices||[],i=e.line||null,r=e.color?new t.Color(e.color):new t.Color(1,0,0),o=e.dashOffset||10*Math.random(),a=e.dashOffsetDirection||!1,s=e.gapSize||100,l=e.tripSize||100,c=e.linewidth||4,u=e.speed||10,h=e.opacity||1,d=e.useOpacity||!1,v=e.useRandom||!1,g=e.doubleFlow||!1,y=new p.LineGeometry,b=new t.Vector3;if(n.length){const e=[];b.x=n[0][0],b.y=n[0][1],b.z=n[0][2]||0;for(let t=0;t<n.length;t++)e.push(n[t][0]-b.x+.1,n[t][1]-b.y+.1,n[t][2]||0);y.setPositions(e)}else{if(!i)return null;y.fromLineSegments(i),b.copy(i.position)}let x=new Ft({color:r,linewidth:c,vertexColors:!1,dashSize:l,gapSize:s,dashOffset:o,dashed:!0,opacity:h});e.doubleFlow&&(x=new Bt({color:r,linewidth:c,vertexColors:!1,color1:e.color1?new t.Color(e.color1):new t.Color(1,0,0),color2:e.color2?new t.Color(e.color2):new t.Color(0,1,.5),offset1:e.offset1||.01,offset2:e.offset2||.01,length1:e.length1||1,length2:e.length2||1,opacity:h}));const w=document.getElementsByTagName("body");let _;x.resolution.set(w[0].clientWidth,w[0].clientHeight||.5625*w[0].clientWidth),_=n.length?new f.Line2(y,x):new m.LineSegments2(y,x),_.computeLineDistances();const S=_.geometry.attributes.instanceDistanceEnd.array.length;return _.totalLength=_.geometry.attributes.instanceDistanceEnd.array[S-1],_.doubleFlow=g,_.scale.set(1,1,1),x.defines.USE_DASH="",d||(x.defines.USE_OPACITY=""),v&&(x.defines.USE_RANDOM=""),x.needsUpdate=!0,_.position.copy(b),_.speed=u,_.flag=1,_.dashOffset=o,_.dashSize=l,_.gapSize=s,_.dashOffsetDirection=a,_.update=function(){this.material instanceof Ft&&this.flag&&(this.doubleFlow?(this.material.offset1+=4*_.speed,this.material.offset2-=4*_.speed,this.material.dashOffset=this.dashOffset,this.material.offset1>this.totalLength&&(this.material.offset1=0),this.material.offset2<0&&(this.material.offset2=this.totalLength)):(this.dashOffsetDirection?this.dashOffset-=4*(Math.random()+_.speed):this.dashOffset+=4*(Math.random()+_.speed),this.material.dashOffset=this.dashOffset,!this.dashOffsetDirection&&this.dashOffset>this.dashSize+this.gapSize&&(this.dashOffset=0),this.dashOffsetDirection&&this.dashOffset<0&&(this.dashOffset=this.dashSize+this.gapSize)),this.material.needsUpdate=!0)},_},e.createTripLine2=function(e={}){const n=e.vertices||[],i=e.line||null,r=e.speed||1,o=e.color?e.color:new t.Color(1,0,0),a=e.colorTrip?e.colorTrip:new t.Color(1,1,0),s=e.dashOffset||.01,l=e.dashSize||.1,c=e.tripSize||.4,u=new t.Vector3;let h;if(n.length){const e=[];u.x=n[0][0],u.y=n[0][1],u.z=n[0][2]||0;for(let t=0;t<n.length;t++)e.push({x:n[t][0]-u.x+.1,y:n[t][1]-u.y+.1});h=(new t.Geometry).setFromPoints(e)}else{if(!i)return null;u.copy(i.position),h=i.geometry}const d=new t.RawShaderMaterial({uniforms:{color:{value:o},colorTrip:{value:a},dashOffset:{value:s},dashSize:{value:l},totalSize:{value:l+c}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    attribute vec3 position;\n    attribute float lineDistance;\n\n    varying float vLineDistance;\n\n    void main() {\n\n        vLineDistance = lineDistance;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n    precision mediump float;\n    precision mediump int;\n    varying float vLineDistance;\n    uniform vec3 color;\n    uniform vec3 colorTrip;\n    uniform float dashOffset;\n    uniform float totalSize;\n    uniform float dashSize;\n    \n    float random (vec2 st) {\n        return fract(sin(dot(st.xy,\n                             vec2(12.9898,78.233)))*\n            43758.5453123);\n    }\n    \n    void main() {\n        float r = clamp(random(vec2(dashOffset)), 0.0, 10.0);\n        if (mod(vLineDistance + dashOffset, totalSize ) > dashSize+r) {\n\n            gl_FragColor = vec4(colorTrip, 1.0);\n    \n        }else{\n            discard;\n            // gl_FragColor = vec4(color, 1.0 );\n        }\n    }",side:t.DoubleSide,transparent:!0}),f=new t.LineSegments(h,d);return f.computeLineDistances(),f.position.x=u.x,f.position.y=u.y,f.flag=1,f.update=function(){this.material instanceof t.RawShaderMaterial&&this.flag&&(this.material.uniforms.dashOffset.value+=5*r,this.material.uniforms.dashOffset.value>this.dashSize+this.tripSize&&(this.material.uniforms.dashOffset.value=0))},f},e.createWaterFour=He,e.createWaterOne=function(e={}){const n=e.iTime||(new Date).getSeconds(),i=e.iResolution||new t.Vector3(1024,768,1);return new t.ShaderMaterial({uniforms:{iTime:{type:"f",value:n},iResolution:{type:"v3",value:i}},vertexShader:"\n                uniform float time;\n                varying vec2 vUv;\n                void main(){\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }\n",fragmentShader:"\n                uniform vec3      iResolution;\n                uniform float     iTime;                 // shader playback time (in seconds)\n                varying vec2 vUv;\n                #define TAU 6.28318530718\n                #define MAX_ITER 5\n                void main(){\n                    float time = iTime * .5+23.0;\n                    // vec2 uv = gl_FragCoord.xy / iResolution.xy;\n                    vec2 p = mod(vUv*TAU, TAU)-250.0;\n                    vec2 i = vec2(p);\n                    float c = 1.0;\n                    float inten = .005;\n                    for (int n = 0; n < MAX_ITER; n++)\n                    {\n                        float t = time * (1.0 - (3.5 / float(n+1)));\n                        i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n                        c += 1.0/length(vec2(p.x / (sin(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n                    }\n                    c /= float(MAX_ITER);\n                    c = 1.17-pow(c, 1.4);\n                    vec3 colour = vec3(pow(abs(c), 8.0));\n                    colour = clamp(colour + vec3(0.0, 0.1, 0.225), 0.0, 0.65);\n                    gl_FragColor = vec4(colour, 1.0);\n                }\n  ",side:t.DoubleSide})},e.createWaterThree=function(e={}){const n=e.iTime||(new Date).getSeconds(),i=e.iResolution||new t.Vector3(1024,768,1);return new t.ShaderMaterial({uniforms:{iTime:{type:"f",value:n},iResolution:{type:"v3",value:i}},vertexShader:"\n                uniform float time;\n                void main(){\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }\n",fragmentShader:"\nuniform vec3      iResolution;\nuniform float     iTime;                 // shader playback time (in seconds)\nvec2 hash2(vec2 p ) {\n    return fract(sin(vec2(dot(p, vec2(123.4, 748.6)), dot(p, vec2(547.3, 659.3))))*5232.85324);\n }\n float hash(vec2 p) {\n   return fract(sin(dot(p, vec2(43.232, 75.876)))*4526.3257);\n }\n float voronoi(vec2 p) {\n     vec2 n = floor(p);\n     vec2 f = fract(p);\n     float md = 5.0;\n     vec2 m = vec2(0.0);\n     for (int i = -1;i<=1;i++) {\n         for (int j = -1;j<=1;j++) {\n             vec2 g = vec2(i, j);\n             vec2 o = hash2(n+g);\n             o = 0.5+0.5*sin(iTime+5.038*o);\n             vec2 r = g + o - f;\n             float d = dot(r, r);\n             if (d<md) {\n               md = d;\n               m = n+g+o;\n             }\n         }\n     }\n     return md;\n }\n float ov(vec2 p) {\n     float v = 0.0;\n     float a = 0.4;\n     for (int i = 0;i<3;i++) {\n         v+= voronoi(p)*a;\n         p*=2.0;\n         a*=0.5;\n     }\n     return v;\n }\nvoid main(  )\n{\n    vec2 uv = gl_FragCoord.xy / iResolution.xy;\n     vec4 a = vec4(0.1, 0.2, 0.8, 1.0);\n     vec4 b = vec4(0.45, 0.5, 0.8, 1.0);\n     gl_FragColor = vec4(mix(a, b, smoothstep(0.0, 0.5, ov(uv*5.0))));\n}\n  ",side:t.DoubleSide})},e.createWaterTwo=function(e={}){const n=e.iTime||(new Date).getSeconds(),i=e.iResolution||new t.Vector3(1024,768,1);return new t.ShaderMaterial({uniforms:{iTime:{type:"f",value:n},iResolution:{type:"v3",value:i}},vertexShader:"\n                uniform float time;\n                varying vec2 vUv;\n                void main(){\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }\n",fragmentShader:"\nuniform vec3      iResolution;\nuniform float     iTime;                 // shader playback time (in seconds)\nvarying vec2 vUv;\n#define TAU 6.28318530718\n#define MAX_ITER 5\nfloat random(float x) {\n    return fract(sin(x) * 10000.);\n}\nfloat noise(vec2 p) {\n    return random(p.x + p.y * 10000.);\n}\nvec2 sw(vec2 p) { return vec2(floor(p.x), floor(p.y)); }\nvec2 se(vec2 p) { return vec2(ceil(p.x), floor(p.y)); }\nvec2 nw(vec2 p) { return vec2(floor(p.x), ceil(p.y)); }\nvec2 ne(vec2 p) { return vec2(ceil(p.x), ceil(p.y)); }\nfloat smoothNoise(vec2 p) {\n    vec2 interp = smoothstep(0., 1., fract(p));\n    float s = mix(noise(sw(p)), noise(se(p)), interp.x);\n    float n = mix(noise(nw(p)), noise(ne(p)), interp.x);\n    return mix(s, n, interp.y);\n}\nfloat fractalNoise(vec2 p) {\n    float x = 0.;\n    x += smoothNoise(p      );\n    x += smoothNoise(p * 2. ) / 2.;\n    x += smoothNoise(p * 4. ) / 4.;\n    x += smoothNoise(p * 8. ) / 8.;\n    x += smoothNoise(p * 16.) / 16.;\n    x /= 1. + 1./2. + 1./4. + 1./8. + 1./16.;\n    return x;\n}\nfloat movingNoise(vec2 p) {\n    float x = fractalNoise(p + iTime);\n    float y = fractalNoise(p - iTime);\n    return fractalNoise(p + vec2(x, y));\n}\n// call this for water noise function\nfloat nestedNoise(vec2 p) {\n    float x = movingNoise(p);\n    float y = movingNoise(p + 100.);\n    return movingNoise(p + vec2(x, y));\n}\nvoid main(  )\n{\n\t// vec2 uv = gl_FragCoord.xy / iResolution.xy;\n    float n = nestedNoise(vUv * 6.);\n\tgl_FragColor = vec4(mix(vec3(.4, .6, 1.), vec3(.1, .2, 1.), n), 1.);\n}\n  ",side:t.DoubleSide})},e.createWaveCircle=function(e){const n=e.color||new t.Color,i=e.radius||10,r=e.speed||1,o=new t.PlaneBufferGeometry(2*i,2*i,1,1),a=new t.RawShaderMaterial({uniforms:{factor:{value:0},color:{value:n},radius:{value:.5*i}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform float factor;\n    uniform vec3 color;\n    varying vec3 vPosition;\n    uniform float radius;\n\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        float r1 = abs(radius*factor);\n        float r2 = r1 + 0.5*r1;\n        float r3 = r1 + 0.75*r1;\n        if(d<=r1) {\n            gl_FragColor = vec4(color, clamp(d/radius,0.25,0.9));\n        }else if(d<=r2) {\n            gl_FragColor = vec4(color, clamp((d-r1)/radius,0.2,1.0));\n        }else if(d<=r3) {\n            gl_FragColor = vec4(color, clamp((d-r2)/radius,0.2,1.0));\n        }else{\n            // gl_FragColor = vec4(color, 1.0);\n            discard;\n        }\n\n\n\n    }\n  ",side:t.FrontSide,transparent:!0});let s=new t.Mesh(o,a);return s.update=function(){this.material.uniforms.factor.value+=this.material.uniforms.factor.value>1?-.8:.01*r},s},e.createWaveCircle2=function(e){const n=e.color||new t.Color,i=e.radius||10,r=e.speed||1,o=e.lineWidth||.2,a=new t.PlaneBufferGeometry(2*i,2*i,1,1),s=new t.RawShaderMaterial({uniforms:{factors:{value:[0,-.2,-.4,-.6,-.8,-1]},color:{value:n},radius:{value:i},lineWidth:{value:o}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform float factors[6];\n    uniform vec3 color;\n    varying vec3 vPosition;\n    uniform float radius;\n    uniform float lineWidth;\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        gl_FragColor = vec4(color, 0.0);\n        for(int i=0;i<6;i++){\n            float r1 = radius*clamp(factors[i],0.0,1.0);\n            if(r1-lineWidth*0.5< d&&d <r1+lineWidth*0.5) {\n                gl_FragColor = vec4(color, 1.0-d/radius);\n            }\n\n        }\n\n    }\n  ",side:t.FrontSide,transparent:!0});let l=new t.Mesh(a,s);return l.update=function(){for(let e=0;e<6;e++){const t=this.material.uniforms.factors.value[e];this.material.uniforms.factors.value[e]=t>1?0:t+.001*r}},l},e.createWaveCircle3=function(e){const n=e.color||new t.Color,i=e.radius||10,r=e.speed||1,o=e.width||.06,a=new t.PlaneBufferGeometry(2*i,2*i,1,1),s=new t.RawShaderMaterial({uniforms:{color:{value:n},radius:{value:i},width:{value:o},iTime:{value:1}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n    attribute vec2 uv;\n    varying vec2 vUV;\n\n    void main() {\n\n        vUV = uv;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n    \n    varying vec2 vUV;\n    uniform vec3 color;\n    uniform float radius;\n    uniform float width;\n    uniform float iTime;\n    void main( ) {\n\n        // -1.0 ~ 1.0\n        vec2 pos = 2.0 * vUV - vec2(1.0);\n        float len = length(pos); \n        float radius1 = (0.3-width) + 0.2*1.0 * abs(sin(iTime));\n        float radius2 = (0.5-width) +  0.2*2.0 * abs(sin(iTime));\n\n        // gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        if(len<0.2){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(len<radius1+width*0.5&&len>radius1-width*0.5){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(len<radius2+width*0.5&&len>radius2-width*0.5){\n            gl_FragColor = vec4(color, 1.0);\n        }else{\n            discard;\n        }\n\n    }\n  ",side:t.FrontSide,transparent:!0});let l=new t.Mesh(a,s);return l.update=function(){this.material.uniforms.iTime.value+=.1*r},l},e.createWaveCircle4=function(e={}){const n=e.color||new t.Color,i=e.height||10,r=e.radius||5,o=e.iTime||1,a=e.width||.4,s=new t.CylinderBufferGeometry(1.8*r,2*r,i,64,1,!0),l=new t.RawShaderMaterial({uniforms:{color:{value:n},height:{value:i},width:{value:a},iTime:{value:o}},vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n    varying vec3 vPosition;\n\n    void main() {\n        vPosition = position.xyz;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n\n    precision mediump float;\n    precision mediump int;\n    \n    varying vec3 vPosition;\n    uniform float iTime;\n    uniform vec3 color;\n    uniform float height;\n    uniform float width;\n    void main( ) {\n        float len = vPosition.y + 0.5*height;\n        // -1.0 ~ 1.0\n        float time = fract(iTime*0.11)*3.1415926*0.5;\n        float height1 = height*0.15 + fract(len - iTime)*0.85*height;\n\n        // gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        if(len<height*0.15){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(len>height1-width*2.0&&len<height1+width*2.0){\n            gl_FragColor = vec4(color, 0.8);\n        }else{\n            discard;\n        }\n\n    }\n  ",side:t.DoubleSide,transparent:!0});let c=new t.Mesh(s,l);return c.rotateX(.5*Math.PI),c.update=function(){this.material.uniforms.iTime.value+=.03},c},e.createWaveRectangle=function(e){const n=e.color1||new t.Color(1,0,0),i=e.color2||new t.Color(.7,0,0),r=e.radius||10,o=e.speed||1,a=e.width||.1,s=new t.PlaneBufferGeometry(2*r,2*r,1,1),l=new t.RawShaderMaterial({uniforms:{color1:{value:n},color2:{value:i},width:{value:a},iTime:{value:1}},vertexShader:"\n     precision mediump float;\n     precision mediump int;\n \n     uniform mat4 modelViewMatrix; // optional\n     uniform mat4 projectionMatrix; // optional\n \n     attribute vec3 position;\n     attribute vec2 uv;\n     varying vec2 vUV;\n \n     void main() {\n \n         vUV = uv;\n \n         gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n \n     }\n ",fragmentShader:"\n \n     precision mediump float;\n     precision mediump int;\n     \n     varying vec2 vUV;\n     uniform vec3 color1;\n     uniform vec3 color2;\n     uniform float radius;\n     uniform float width;\n     uniform float iTime;\n     void main( ) {\n \n         // -1.0 ~ 1.0\n         vec2 pos = 2.0 * vUV - vec2(1.0);\n         float len = length(pos); \n         float xPlusY = abs(pos.x) + abs(pos.y);\n         float fxy = fract(iTime*0.01)*0.25;\n         if(xPlusY<0.6+fxy && xPlusY>0.5+fxy){\n            gl_FragColor = vec4(color1 - 2.0*fxy,1.0 - 2.0*fxy);\n         }else if(xPlusY<0.7+fxy && xPlusY>0.6+fxy){\n            gl_FragColor = vec4(color2 - 3.0*fxy,1.0 - 2.0*fxy);\n         }else{\n            discard;\n         }\n     }\n   ",side:t.FrontSide,transparent:!0});let c=new t.Mesh(s,l);return c.update=function(){this.material.uniforms.iTime.value+=o},c},e.curveLineMesh=$t,e.darkLineMaterial=ct,e.darkMeshMaterial=lt,e.darkPointMaterial=ut,e.darkSpriteMaterial=ht,e.debuggerMode=!1,e.decreaseTileLoading=Et,e.defaultStyle=j,e.dracoLoader=Lt,e.equals=ue,e.fragmentShader=Pt,e.getBox3=oe,e.getColor=ae,e.getColorGradualMaterial=function(e={}){return new t.RawShaderMaterial({vertexShader:"\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n    attribute vec3 vertexcolor;\n    attribute float opacity;\n\n    varying vec3 vColor;\n    varying float vOpacity;\n\n    void main()\t{\n\n        vColor = vertexcolor;\n        vOpacity = opacity;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",fragmentShader:"\n    precision mediump float;\n    precision mediump int;\n\n    varying vec3 vColor;\n    varying float vOpacity;\n\n    void main( ) {\n        gl_FragColor = vec4(vColor, vOpacity);\n    }",side:void 0===e.side?t.DoubleSide:e.side,transparent:!0})},e.getEulerRotationFromCameraParams=function(e){return!!e&&(e=e instanceof Array?(new t.Quaternion).fromArray(e):new t.Quaternion(e.x,e.y,e.z,e.w),(new t.Euler).setFromQuaternion(e,"ZXY"))},e.getGeoJSONCenter=ye,e.getGeoJSONCoordinates=ge,e.getGeometryBudget=Ot,e.getMatrixFromCameraParams=function(e=new t.Vector3(0,0,0),n=new t.Quaternion,i=new t.Vector3(1,1,1)){return(new t.Matrix4).compose(e,n,i)},e.getMaxTileLoading=At,e.getNumTileLoading=Ct,e.getTilesDownloadQueue=wt,e.getTilesLruCache=xt,e.getTilesParseQueue=_t,e.getVector2=ie,e.getVector3=re,e.i3DTileLayer=class{constructor(e){this.name=e.name||"",this.url=e.url,this.visible=e.visible||!0,this.tilesRenderer=null,this.errorTarget=e.errorTarget||6,this.errorThreshold=e.errorThreshold||1/0,this.maxDepth=e.maxDepth||12,this.stopAtEmptyTiles=e.stopAtEmptyTiles||!0,this.loadSiblings=e.loadSiblings||!0,this.offset=e.offset||[0,0,0],this.initCamera=!1,this.initialize()}initialize(){if(!this.url)return!1;const e=new w.TilesRenderer(this.url);e.group.name=this.name,e.errorTarget=this.errorTarget,e.errorThreshold=this.errorThreshold,e.maxDepth=this.maxDepth,e.loadSiblings=this.loadSiblings,e.stopAtEmptyTiles=this.stopAtEmptyTiles;const i=new n.GLTFLoader(e.manager);i.setDRACOLoader(Lt),e.manager.addHandler(/\.gltf$/,i),e.onLoadTileSet=()=>{const n=new t.Box3,i=new t.Matrix4;e.getOrientedBounds(n,i),e.group.position.x=this.offset[0],e.group.position.y=this.offset[1],e.group.position.z=this.offset[2],e.group.updateMatrixWorld(),this.needsRerender=!0},e.onLoadModel=()=>this.needsRerender=!0,this.tilesRenderer=e,this.initLruCache(),this.initDownloadQueue(),this.initParseQueue()}initLruCache(){const e=xt();e?this.tilesRenderer.lruCache=e:(this.tilesRenderer.lruCache.minSize=10,gt(this.tilesRenderer.lruCache))}initDownloadQueue(){const e=wt();e?this.tilesRenderer.downloadQueue=e:(this.tilesRenderer.downloadQueue.maxJobs=6,yt(this.tilesRenderer.downloadQueue))}initParseQueue(){const e=_t();e?this.tilesRenderer.parseQueue=e:(this.tilesRenderer.parseQueue.maxJobs=4,bt(this.tilesRenderer.parseQueue))}setVisible(e){this.visible=e,this.tilesRenderer.group.visible=e}dispose(){this.tilesRenderer.dispose(),this.tilesRenderer.lruCache=null,this.tilesRenderer.downloadQueue=null,this.tilesRenderer.parseQueue=null,this.tilesRenderer.cameras=null,this.tilesRenderer.cameraMap=null,this.tilesRenderer.activeTiles=null,this.tilesRenderer.visibleTiles=null,this.tilesRenderer.manager=null}},e.increaseTileLoading=Tt,e.isGeoJSON=function(e={}){const t=de(e);if(t)for(let e=0,n=he.length;e<n;e++)if(he[e]===t)return!0;return!1},e.isGeoJSONLine=pe,e.isGeoJSONMulti=ve,e.isGeoJSONPoint=me,e.isGeoJSONPolygon=fe,e.lru=ft,e.mergeBufferGeometries=Le,e.modelsPath=D,e.removeDupEndPts=se,e.setGeometryBudget=function(e){rt=e},e.setMaxTileLoading=function(e){ot=e},e.setNumTileLoading=function(e){at=e},e.setTilesDownloadQueue=yt,e.setTilesLruCache=gt,e.setTilesParseQueue=bt,e.spliteGeoJSONMulti=xe,e.trafficLineMesh=Xt,e.vertexShader=kt,e.workServiceManeger=dt,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0),n(81),n(275),n(438),n(276),n(105),n(277),n(285),n(286),n(287),n(288),n(289),n(176),n(80),n(82),n(290),n(291),n(40),n(314),n(315),n(440),n(330),n(45),n(442),n(443),n(16),n(331),n(444),n(332),n(333))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(175),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){e.exports={default:n(269),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i=a(n(235)),r=a(n(243)),o="function"==typeof r.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){"use strict";var i=n(214),r=n.n(i).a;t.a=r},function(e,t,n){e.exports={default:n(250),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i=o(n(263)),r=o(n(266));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,l=(0,r.default)(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";t.a=function(e,t){return e instanceof t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(2);function r(e,t,n){return new i.a("Syntax Error: ".concat(n),void 0,e,[t])}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(116)("wks"),r=n(91),o=n(28).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l=typeof(e=e||{}).default;"object"!==l&&"function"!==l||(e=e.default);var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),o&&(u._scopeId=o),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):r&&(c=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(u.functional){u._injectStyles=c;var h=u.render;u.render=function(e,t){return c.call(t),h(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.r(t),function(e,n){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function r(e){return null==e}function o(e){return null!=e}function a(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function l(e){return null!==e&&"object"==typeof e}var c=Object.prototype.toString;function u(e){return"[object Object]"===c.call(e)}function h(e){return"[object RegExp]"===c.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===c?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}v("slot,component",!0);var g=v("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function x(e,t){return b.call(e,t)}function w(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var _=/-(\w)/g,S=w((function(e){return e.replace(_,(function(e,t){return t?t.toUpperCase():""}))})),M=w((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,E=w((function(e){return e.replace(T,"-$1").toLowerCase()}));var C=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function A(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function O(e,t){for(var n in t)e[n]=t[n];return e}function L(e){for(var t={},n=0;n<e.length;n++)e[n]&&O(t,e[n]);return t}function k(e,t,n){}var P=function(e,t,n){return!1},D=function(e){return e};function I(e,t){if(e===t)return!0;var n=l(e),i=l(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),o=Array.isArray(t);if(r&&o)return e.length===t.length&&e.every((function(e,n){return I(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return I(e[n],t[n])}))}catch(e){return!1}}function N(e,t){for(var n=0;n<e.length;n++)if(I(e[n],t))return n;return-1}function F(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var R=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],j={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:k,parsePlatformTagName:D,mustUseProp:P,async:!0,_lifecycleHooks:B},z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function U(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var V=new RegExp("[^"+z.source+".$_\\d]");var G,H="__proto__"in{},W="undefined"!=typeof window,q="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Y=q&&WXEnvironment.platform.toLowerCase(),$=W&&window.navigator.userAgent.toLowerCase(),X=$&&/msie|trident/.test($),Q=$&&$.indexOf("msie 9.0")>0,K=$&&$.indexOf("edge/")>0,J=($&&$.indexOf("android"),$&&/iphone|ipad|ipod|ios/.test($)||"ios"===Y),Z=($&&/chrome\/\d+/.test($),$&&/phantomjs/.test($),$&&$.match(/firefox\/(\d+)/)),ee={}.watch,te=!1;if(W)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){te=!0}}),window.addEventListener("test-passive",null,ne)}catch(e){}var ie=function(){return void 0===G&&(G=!W&&!q&&void 0!==e&&(e.process&&"server"===e.process.env.VUE_ENV)),G},re=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return"function"==typeof e&&/native code/.test(e.toString())}var ae,se="undefined"!=typeof Symbol&&oe(Symbol)&&"undefined"!=typeof Reflect&&oe(Reflect.ownKeys);ae="undefined"!=typeof Set&&oe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var le=k,ce=0,ue=function(){this.id=ce++,this.subs=[]};ue.prototype.addSub=function(e){this.subs.push(e)},ue.prototype.removeSub=function(e){y(this.subs,e)},ue.prototype.depend=function(){ue.target&&ue.target.addDep(this)},ue.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},ue.target=null;var he=[];function de(e){he.push(e),ue.target=e}function fe(){he.pop(),ue.target=he[he.length-1]}var pe=function(e,t,n,i,r,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(pe.prototype,me);var ve=function(e){void 0===e&&(e="");var t=new pe;return t.text=e,t.isComment=!0,t};function ge(e){return new pe(void 0,void 0,void 0,String(e))}function ye(e){var t=new pe(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var be=Array.prototype,xe=Object.create(be);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=be[e];U(xe,e,(function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&a.observeArray(r),a.dep.notify(),o}))}));var we=Object.getOwnPropertyNames(xe),_e=!0;function Se(e){_e=e}var Me=function(e){this.value=e,this.dep=new ue,this.vmCount=0,U(e,"__ob__",this),Array.isArray(e)?(H?function(e,t){e.__proto__=t}(e,xe):function(e,t,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];U(e,o,t[o])}}(e,xe,we),this.observeArray(e)):this.walk(e)};function Te(e,t){var n;if(l(e)&&!(e instanceof pe))return x(e,"__ob__")&&e.__ob__ instanceof Me?n=e.__ob__:_e&&!ie()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Me(e)),t&&n&&n.vmCount++,n}function Ee(e,t,n,i,r){var o=new ue,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,l=a&&a.set;s&&!l||2!==arguments.length||(n=e[t]);var c=!r&&Te(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return ue.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(t)&&Oe(t))),t},set:function(t){var i=s?s.call(e):n;t===i||t!=t&&i!=i||s&&!l||(l?l.call(e,t):n=t,c=!r&&Te(t),o.notify())}})}}function Ce(e,t,n){if(Array.isArray(e)&&d(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(Ee(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}function Ae(e,t){if(Array.isArray(e)&&d(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||x(e,t)&&(delete e[t],n&&n.dep.notify())}}function Oe(e){for(var t=void 0,n=0,i=e.length;n<i;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Oe(t)}Me.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Ee(e,t[n])},Me.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Te(e[t])};var Le=j.optionMergeStrategies;function ke(e,t){if(!t)return e;for(var n,i,r,o=se?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(i=e[n],r=t[n],x(e,n)?i!==r&&u(i)&&u(r)&&ke(i,r):Ce(e,n,r));return e}function Pe(e,t,n){return n?function(){var i="function"==typeof t?t.call(n,n):t,r="function"==typeof e?e.call(n,n):e;return i?ke(i,r):r}:t?e?function(){return ke("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function De(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function Ie(e,t,n,i){var r=Object.create(e||null);return t?O(r,t):r}Le.data=function(e,t,n){return n?Pe(e,t,n):t&&"function"!=typeof t?e:Pe(e,t)},B.forEach((function(e){Le[e]=De})),R.forEach((function(e){Le[e+"s"]=Ie})),Le.watch=function(e,t,n,i){if(e===ee&&(e=void 0),t===ee&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var o in O(r,e),t){var a=r[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},Le.props=Le.methods=Le.inject=Le.computed=function(e,t,n,i){if(!e)return t;var r=Object.create(null);return O(r,e),t&&O(r,t),r},Le.provide=Pe;var Ne=function(e,t){return void 0===t?e:t};function Fe(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var i,r,o={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(r=n[i])&&(o[S(r)]={type:null});else if(u(n))for(var a in n)r=n[a],o[S(a)]=u(r)?r:{type:r};else 0;e.props=o}}(t),function(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(u(n))for(var o in n){var a=n[o];i[o]=u(a)?O({from:o},a):{from:a}}else 0}}(t),function(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"==typeof i&&(t[n]={bind:i,update:i})}}(t),!t._base&&(t.extends&&(e=Fe(e,t.extends,n)),t.mixins))for(var i=0,r=t.mixins.length;i<r;i++)e=Fe(e,t.mixins[i],n);var o,a={};for(o in e)s(o);for(o in t)x(e,o)||s(o);function s(i){var r=Le[i]||Ne;a[i]=r(e[i],t[i],n,i)}return a}function Re(e,t,n,i){if("string"==typeof n){var r=e[t];if(x(r,n))return r[n];var o=S(n);if(x(r,o))return r[o];var a=M(o);return x(r,a)?r[a]:r[n]||r[o]||r[a]}}function Be(e,t,n,i){var r=t[e],o=!x(n,e),a=n[e],s=Ue(Boolean,r.type);if(s>-1)if(o&&!x(r,"default"))a=!1;else if(""===a||a===E(e)){var l=Ue(String,r.type);(l<0||s<l)&&(a=!0)}if(void 0===a){a=function(e,t,n){if(!x(t,"default"))return;var i=t.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof i&&"Function"!==je(t.type)?i.call(e):i}(i,r,e);var c=_e;Se(!0),Te(a),Se(c)}return a}function je(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function ze(e,t){return je(e)===je(t)}function Ue(e,t){if(!Array.isArray(t))return ze(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(ze(t[n],e))return n;return-1}function Ve(e,t,n){de();try{if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(i,e,t,n))return}catch(e){He(e,i,"errorCaptured hook")}}He(e,t,n)}finally{fe()}}function Ge(e,t,n,i,r){var o;try{(o=n?e.apply(t,n):e.call(t))&&!o._isVue&&f(o)&&!o._handled&&(o.catch((function(e){return Ve(e,i,r+" (Promise/async)")})),o._handled=!0)}catch(e){Ve(e,i,r)}return o}function He(e,t,n){if(j.errorHandler)try{return j.errorHandler.call(null,e,t,n)}catch(t){t!==e&&We(t,null,"config.errorHandler")}We(e,t,n)}function We(e,t,n){if(!W&&!q||"undefined"==typeof console)throw e;console.error(e)}var qe,Ye=!1,$e=[],Xe=!1;function Qe(){Xe=!1;var e=$e.slice(0);$e.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&oe(Promise)){var Ke=Promise.resolve();qe=function(){Ke.then(Qe),J&&setTimeout(k)},Ye=!0}else if(X||"undefined"==typeof MutationObserver||!oe(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())qe=void 0!==n&&oe(n)?function(){n(Qe)}:function(){setTimeout(Qe,0)};else{var Je=1,Ze=new MutationObserver(Qe),et=document.createTextNode(String(Je));Ze.observe(et,{characterData:!0}),qe=function(){Je=(Je+1)%2,et.data=String(Je)},Ye=!0}function tt(e,t){var n;if($e.push((function(){if(e)try{e.call(t)}catch(e){Ve(e,t,"nextTick")}else n&&n(t)})),Xe||(Xe=!0,qe()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var nt=new ae;function it(e){!function e(t,n){var i,r,o=Array.isArray(t);if(!o&&!l(t)||Object.isFrozen(t)||t instanceof pe)return;if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(i=t.length;i--;)e(t[i],n);else for(r=Object.keys(t),i=r.length;i--;)e(t[r[i]],n)}(e,nt),nt.clear()}var rt=w((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:n,capture:i,passive:t}}));function ot(e,t){function n(){var e=arguments,i=n.fns;if(!Array.isArray(i))return Ge(i,null,arguments,t,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)Ge(r[o],null,e,t,"v-on handler")}return n.fns=e,n}function at(e,t,n,i,o,s){var l,c,u,h;for(l in e)c=e[l],u=t[l],h=rt(l),r(c)||(r(u)?(r(c.fns)&&(c=e[l]=ot(c,s)),a(h.once)&&(c=e[l]=o(h.name,c,h.capture)),n(h.name,c,h.capture,h.passive,h.params)):c!==u&&(u.fns=c,e[l]=u));for(l in t)r(e[l])&&i((h=rt(l)).name,t[l],h.capture)}function st(e,t,n){var i;e instanceof pe&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function l(){n.apply(this,arguments),y(i.fns,l)}r(s)?i=ot([l]):o(s.fns)&&a(s.merged)?(i=s).fns.push(l):i=ot([s,l]),i.merged=!0,e[t]=i}function lt(e,t,n,i,r){if(o(t)){if(x(t,n))return e[n]=t[n],r||delete t[n],!0;if(x(t,i))return e[n]=t[i],r||delete t[i],!0}return!1}function ct(e){return s(e)?[ge(e)]:Array.isArray(e)?function e(t,n){var i,l,c,u,h=[];for(i=0;i<t.length;i++)r(l=t[i])||"boolean"==typeof l||(c=h.length-1,u=h[c],Array.isArray(l)?l.length>0&&(ut((l=e(l,(n||"")+"_"+i))[0])&&ut(u)&&(h[c]=ge(u.text+l[0].text),l.shift()),h.push.apply(h,l)):s(l)?ut(u)?h[c]=ge(u.text+l):""!==l&&h.push(ge(l)):ut(l)&&ut(u)?h[c]=ge(u.text+l.text):(a(t._isVList)&&o(l.tag)&&r(l.key)&&o(n)&&(l.key="__vlist"+n+"_"+i+"__"),h.push(l)));return h}(e):void 0}function ut(e){return o(e)&&o(e.text)&&!1===e.isComment}function ht(e,t){if(e){for(var n=Object.create(null),i=se?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){for(var a=e[o].from,s=t;s;){if(s._provided&&x(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var l=e[o].default;n[o]="function"==typeof l?l.call(t):l}else 0}}return n}}function dt(e,t){if(!e||!e.length)return{};for(var n={},i=0,r=e.length;i<r;i++){var o=e[i],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,l=n[s]||(n[s]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var c in n)n[c].every(ft)&&delete n[c];return n}function ft(e){return e.isComment&&!e.asyncFactory||" "===e.text}function pt(e,t,n){var r,o=Object.keys(t).length>0,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==i&&s===n.$key&&!o&&!n.$hasNormal)return n;for(var l in r={},e)e[l]&&"$"!==l[0]&&(r[l]=mt(t,l,e[l]))}else r={};for(var c in t)c in r||(r[c]=vt(t,c));return e&&Object.isExtensible(e)&&(e._normalized=r),U(r,"$stable",a),U(r,"$key",s),U(r,"$hasNormal",o),r}function mt(e,t,n){var i=function(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:ct(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function vt(e,t){return function(){return e[t]}}function gt(e,t){var n,i,r,a,s;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=t(e[i],i);else if("number"==typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(l(e))if(se&&e[Symbol.iterator]){n=[];for(var c=e[Symbol.iterator](),u=c.next();!u.done;)n.push(t(u.value,n.length)),u=c.next()}else for(a=Object.keys(e),n=new Array(a.length),i=0,r=a.length;i<r;i++)s=a[i],n[i]=t(e[s],s,i);return o(n)||(n=[]),n._isVList=!0,n}function yt(e,t,n,i){var r,o=this.$scopedSlots[e];o?(n=n||{},i&&(n=O(O({},i),n)),r=o(n)||t):r=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},r):r}function bt(e){return Re(this.$options,"filters",e)||D}function xt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function wt(e,t,n,i,r){var o=j.keyCodes[t]||n;return r&&i&&!j.keyCodes[t]?xt(r,i):o?xt(o,e):i?E(i)!==t:void 0}function _t(e,t,n,i,r){if(n)if(l(n)){var o;Array.isArray(n)&&(n=L(n));var a=function(a){if("class"===a||"style"===a||g(a))o=e;else{var s=e.attrs&&e.attrs.type;o=i||j.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=S(a),c=E(a);l in o||c in o||(o[a]=n[a],r&&((e.on||(e.on={}))["update:"+a]=function(e){n[a]=e}))};for(var s in n)a(s)}else;return e}function St(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||Tt(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i}function Mt(e,t,n){return Tt(e,"__once__"+t+(n?"_"+n:""),!0),e}function Tt(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&Et(e[i],t+"_"+i,n);else Et(e,t,n)}function Et(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Ct(e,t){if(t)if(u(t)){var n=e.on=e.on?O({},e.on):{};for(var i in t){var r=n[i],o=t[i];n[i]=r?[].concat(r,o):o}}else;return e}function At(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?At(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function Ot(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"==typeof i&&i&&(e[t[n]]=t[n+1])}return e}function Lt(e,t){return"string"==typeof e?t+e:e}function kt(e){e._o=Mt,e._n=m,e._s=p,e._l=gt,e._t=yt,e._q=I,e._i=N,e._m=St,e._f=bt,e._k=wt,e._b=_t,e._v=ge,e._e=ve,e._u=At,e._g=Ct,e._d=Ot,e._p=Lt}function Pt(e,t,n,r,o){var s,l=this,c=o.options;x(r,"_uid")?(s=Object.create(r))._original=r:(s=r,r=r._original);var u=a(c._compiled),h=!u;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||i,this.injections=ht(c.inject,r),this.slots=function(){return l.$slots||pt(e.scopedSlots,l.$slots=dt(n,r)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return pt(e.scopedSlots,this.slots())}}),u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=pt(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,n,i){var o=jt(s,e,t,n,i,h);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=r),o}:this._c=function(e,t,n,i){return jt(s,e,t,n,i,h)}}function Dt(e,t,n,i,r){var o=ye(e);return o.fnContext=n,o.fnOptions=i,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function It(e,t){for(var n in t)e[S(n)]=t[n]}kt(Pt.prototype);var Nt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Nt.prepatch(n,n)}else{(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;o(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns);return new e.componentOptions.Ctor(n)}(e,Xt)).$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,r,o){0;var a=r.data.scopedSlots,s=e.$scopedSlots,l=!!(a&&!a.$stable||s!==i&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),c=!!(o||e.$options._renderChildren||l);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=o,e.$attrs=r.data.attrs||i,e.$listeners=n||i,t&&e.$options.props){Se(!1);for(var u=e._props,h=e.$options._propKeys||[],d=0;d<h.length;d++){var f=h[d],p=e.$options.props;u[f]=Be(f,p,t,e)}Se(!0),e.$options.propsData=t}n=n||i;var m=e.$options._parentListeners;e.$options._parentListeners=n,$t(e,n,m),c&&(e.$slots=dt(o,r.context),e.$forceUpdate());0}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t,n=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,Zt(i,"mounted")),e.data.keepAlive&&(n._isMounted?((t=i)._inactive=!1,tn.push(t)):Jt(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(n&&(t._directInactive=!0,Kt(t)))return;if(!t._inactive){t._inactive=!0;for(var i=0;i<t.$children.length;i++)e(t.$children[i]);Zt(t,"deactivated")}}(t,!0):t.$destroy())}},Ft=Object.keys(Nt);function Rt(e,t,n,s,c){if(!r(e)){var u=n.$options._base;if(l(e)&&(e=u.extend(e)),"function"==typeof e){var h;if(r(e.cid)&&void 0===(e=function(e,t){if(a(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=Ut;n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n);if(a(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var i=e.owners=[n],s=!0,c=null,u=null;n.$on("hook:destroyed",(function(){return y(i,n)}));var h=function(e){for(var t=0,n=i.length;t<n;t++)i[t].$forceUpdate();e&&(i.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},d=F((function(n){e.resolved=Vt(n,t),s?i.length=0:h(!0)})),p=F((function(t){o(e.errorComp)&&(e.error=!0,h(!0))})),m=e(d,p);return l(m)&&(f(m)?r(e.resolved)&&m.then(d,p):f(m.component)&&(m.component.then(d,p),o(m.error)&&(e.errorComp=Vt(m.error,t)),o(m.loading)&&(e.loadingComp=Vt(m.loading,t),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,h(!1))}),m.delay||200)),o(m.timeout)&&(u=setTimeout((function(){u=null,r(e.resolved)&&p(null)}),m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}(h=e,u)))return function(e,t,n,i,r){var o=ve();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:i,tag:r},o}(h,t,n,s,c);t=t||{},_n(e),o(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var r=t.on||(t.on={}),a=r[i],s=t.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(r[i]=[s].concat(a)):r[i]=s}(e.options,t);var d=function(e,t,n){var i=t.options.props;if(!r(i)){var a={},s=e.attrs,l=e.props;if(o(s)||o(l))for(var c in i){var u=E(c);lt(a,l,c,u,!0)||lt(a,s,c,u,!1)}return a}}(t,e);if(a(e.options.functional))return function(e,t,n,r,a){var s=e.options,l={},c=s.props;if(o(c))for(var u in c)l[u]=Be(u,c,t||i);else o(n.attrs)&&It(l,n.attrs),o(n.props)&&It(l,n.props);var h=new Pt(n,l,a,r,e),d=s.render.call(null,h._c,h);if(d instanceof pe)return Dt(d,n,h.parent,s,h);if(Array.isArray(d)){for(var f=ct(d)||[],p=new Array(f.length),m=0;m<f.length;m++)p[m]=Dt(f[m],n,h.parent,s,h);return p}}(e,d,t,n,s);var p=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var m=t.slot;t={},m&&(t.slot=m)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Ft.length;n++){var i=Ft[n],r=t[i],o=Nt[i];r===o||r&&r._merged||(t[i]=r?Bt(o,r):o)}}(t);var v=e.options.name||c;return new pe("vue-component-"+e.cid+(v?"-"+v:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:p,tag:c,children:s},h)}}}function Bt(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function jt(e,t,n,i,c,u){return(Array.isArray(n)||s(n))&&(c=i,i=n,n=void 0),a(u)&&(c=2),function(e,t,n,i,s){if(o(n)&&o(n.__ob__))return ve();o(n)&&o(n.is)&&(t=n.is);if(!t)return ve();0;Array.isArray(i)&&"function"==typeof i[0]&&((n=n||{}).scopedSlots={default:i[0]},i.length=0);2===s?i=ct(i):1===s&&(i=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(i));var c,u;if("string"==typeof t){var h;u=e.$vnode&&e.$vnode.ns||j.getTagNamespace(t),c=j.isReservedTag(t)?new pe(j.parsePlatformTagName(t),n,i,void 0,void 0,e):n&&n.pre||!o(h=Re(e.$options,"components",t))?new pe(t,n,i,void 0,void 0,e):Rt(h,n,e,i,t)}else c=Rt(t,n,e,i);return Array.isArray(c)?c:o(c)?(o(u)&&function e(t,n,i){t.ns=n,"foreignObject"===t.tag&&(n=void 0,i=!0);if(o(t.children))for(var s=0,l=t.children.length;s<l;s++){var c=t.children[s];o(c.tag)&&(r(c.ns)||a(i)&&"svg"!==c.tag)&&e(c,n,i)}}(c,u),o(n)&&function(e){l(e.style)&&it(e.style);l(e.class)&&it(e.class)}(n),c):ve()}(e,t,n,i,c)}var zt,Ut=null;function Vt(e,t){return(e.__esModule||se&&"Module"===e[Symbol.toStringTag])&&(e=e.default),l(e)?t.extend(e):e}function Gt(e){return e.isComment&&e.asyncFactory}function Ht(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(o(n)&&(o(n.componentOptions)||Gt(n)))return n}}function Wt(e,t){zt.$on(e,t)}function qt(e,t){zt.$off(e,t)}function Yt(e,t){var n=zt;return function i(){var r=t.apply(null,arguments);null!==r&&n.$off(e,i)}}function $t(e,t,n){zt=e,at(t,n||{},Wt,qt,Yt,e),zt=void 0}var Xt=null;function Qt(e){var t=Xt;return Xt=e,function(){Xt=t}}function Kt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Jt(e,t){if(t){if(e._directInactive=!1,Kt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Jt(e.$children[n]);Zt(e,"activated")}}function Zt(e,t){de();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,o=n.length;r<o;r++)Ge(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),fe()}var en=[],tn=[],nn={},rn=!1,on=!1,an=0;var sn=0,ln=Date.now;if(W&&!X){var cn=window.performance;cn&&"function"==typeof cn.now&&ln()>document.createEvent("Event").timeStamp&&(ln=function(){return cn.now()})}function un(){var e,t;for(sn=ln(),on=!0,en.sort((function(e,t){return e.id-t.id})),an=0;an<en.length;an++)(e=en[an]).before&&e.before(),t=e.id,nn[t]=null,e.run();var n=tn.slice(),i=en.slice();an=en.length=tn.length=0,nn={},rn=on=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Jt(e[t],!0)}(n),function(e){var t=e.length;for(;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Zt(i,"updated")}}(i),re&&j.devtools&&re.emit("flush")}var hn=0,dn=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++hn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ae,this.newDepIds=new ae,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!V.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=k)),this.value=this.lazy?void 0:this.get()};dn.prototype.get=function(){var e;de(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Ve(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&it(e),fe(),this.cleanupDeps()}return e},dn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},dn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},dn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==nn[t]){if(nn[t]=!0,on){for(var n=en.length-1;n>an&&en[n].id>e.id;)n--;en.splice(n+1,0,e)}else en.push(e);rn||(rn=!0,tt(un))}}(this)},dn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){Ve(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},dn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},dn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},dn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var fn={enumerable:!0,configurable:!0,get:k,set:k};function pn(e,t,n){fn.get=function(){return this[t][n]},fn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,fn)}function mn(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[];e.$parent&&Se(!1);var o=function(o){r.push(o);var a=Be(o,t,n,e);Ee(i,o,a),o in e||pn(e,"_props",o)};for(var a in t)o(a);Se(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t)e[n]="function"!=typeof t[n]?k:C(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;u(t=e._data="function"==typeof t?function(e,t){de();try{return e.call(t,t)}catch(e){return Ve(e,t,"data()"),{}}finally{fe()}}(t,e):t||{})||(t={});var n=Object.keys(t),i=e.$options.props,r=(e.$options.methods,n.length);for(;r--;){var o=n[r];0,i&&x(i,o)||(a=void 0,36!==(a=(o+"").charCodeAt(0))&&95!==a&&pn(e,"_data",o))}var a;Te(t,!0)}(e):Te(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),i=ie();for(var r in t){var o=t[r],a="function"==typeof o?o:o.get;0,i||(n[r]=new dn(e,a||k,k,vn)),r in e||gn(e,r,o)}}(e,t.computed),t.watch&&t.watch!==ee&&function(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)xn(e,n,i[r]);else xn(e,n,i)}}(e,t.watch)}var vn={lazy:!0};function gn(e,t,n){var i=!ie();"function"==typeof n?(fn.get=i?yn(t):bn(n),fn.set=k):(fn.get=n.get?i&&!1!==n.cache?yn(t):bn(n.get):k,fn.set=n.set||k),Object.defineProperty(e,t,fn)}function yn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ue.target&&t.depend(),t.value}}function bn(e){return function(){return e.call(this,this)}}function xn(e,t,n,i){return u(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,i)}var wn=0;function _n(e){var t=e.options;if(e.super){var n=_n(e.super);if(n!==e.superOptions){e.superOptions=n;var i=function(e){var t,n=e.options,i=e.sealedOptions;for(var r in n)n[r]!==i[r]&&(t||(t={}),t[r]=n[r]);return t}(e);i&&O(e.extendOptions,i),(t=e.options=Fe(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function Sn(e){this._init(e)}function Mn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var o=e.name||n.options.name;var a=function(e){this._init(e)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=t++,a.options=Fe(n.options,e),a.super=n,a.options.props&&function(e){var t=e.options.props;for(var n in t)pn(e.prototype,"_props",n)}(a),a.options.computed&&function(e){var t=e.options.computed;for(var n in t)gn(e.prototype,n,t[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,R.forEach((function(e){a[e]=n[e]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=O({},a.options),r[i]=a,a}}function Tn(e){return e&&(e.Ctor.options.name||e.tag)}function En(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!h(e)&&e.test(t)}function Cn(e,t){var n=e.cache,i=e.keys,r=e._vnode;for(var o in n){var a=n[o];if(a){var s=Tn(a.componentOptions);s&&!t(s)&&An(n,o,i,r)}}}function An(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,y(n,t)}!function(e){e.prototype._init=function(e){var t=this;t._uid=wn++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=Fe(_n(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&$t(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=dt(t._renderChildren,r),e.$scopedSlots=i,e._c=function(t,n,i,r){return jt(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return jt(e,t,n,i,r,!0)};var o=n&&n.data;Ee(e,"$attrs",o&&o.attrs||i,null,!0),Ee(e,"$listeners",t._parentListeners||i,null,!0)}(t),Zt(t,"beforeCreate"),function(e){var t=ht(e.$options.inject,e);t&&(Se(!1),Object.keys(t).forEach((function(n){Ee(e,n,t[n])})),Se(!0))}(t),mn(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),Zt(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(Sn),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ce,e.prototype.$delete=Ae,e.prototype.$watch=function(e,t,n){if(u(t))return xn(this,e,t,n);(n=n||{}).user=!0;var i=new dn(this,e,t,n);if(n.immediate)try{t.call(this,i.value)}catch(e){Ve(e,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Sn),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;for(var s=a.length;s--;)if((o=a[s])===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?A(n):n;for(var i=A(arguments,1),r='event handler for "'+e+'"',o=0,a=n.length;o<a;o++)Ge(n[o],t,i,t,r)}return t}}(Sn),function(e){e.prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,o=Qt(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Zt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Zt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Sn),function(e){kt(e.prototype),e.prototype.$nextTick=function(e){return tt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,r=n._parentVnode;r&&(t.$scopedSlots=pt(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{Ut=t,e=i.call(t._renderProxy,t.$createElement)}catch(n){Ve(n,t,"render"),e=t._vnode}finally{Ut=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof pe||(e=ve()),e.parent=r,e}}(Sn);var On=[String,RegExp,Array],Ln={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:On,exclude:On,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)An(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Cn(e,(function(e){return En(t,e)}))})),this.$watch("exclude",(function(t){Cn(e,(function(e){return!En(t,e)}))}))},render:function(){var e=this.$slots.default,t=Ht(e),n=t&&t.componentOptions;if(n){var i=Tn(n),r=this.include,o=this.exclude;if(r&&(!i||!En(r,i))||o&&i&&En(o,i))return t;var a=this.cache,s=this.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;a[l]?(t.componentInstance=a[l].componentInstance,y(s,l),s.push(l)):(a[l]=t,s.push(l),this.max&&s.length>parseInt(this.max)&&An(a,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return j}};Object.defineProperty(e,"config",t),e.util={warn:le,extend:O,mergeOptions:Fe,defineReactive:Ee},e.set=Ce,e.delete=Ae,e.nextTick=tt,e.observable=function(e){return Te(e),e},e.options=Object.create(null),R.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,O(e.options.components,Ln),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=A(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Fe(this.options,e),this}}(e),Mn(e),function(e){R.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&u(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(Sn),Object.defineProperty(Sn.prototype,"$isServer",{get:ie}),Object.defineProperty(Sn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Sn,"FunctionalRenderContext",{value:Pt}),Sn.version="2.6.12";var kn=v("style,class"),Pn=v("input,textarea,option,select,progress"),Dn=v("contenteditable,draggable,spellcheck"),In=v("events,caret,typing,plaintext-only"),Nn=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Fn="http://www.w3.org/1999/xlink",Rn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Bn=function(e){return Rn(e)?e.slice(6,e.length):""},jn=function(e){return null==e||!1===e};function zn(e){for(var t=e.data,n=e,i=e;o(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(t=Un(i.data,t));for(;o(n=n.parent);)n&&n.data&&(t=Un(t,n.data));return function(e,t){if(o(e)||o(t))return Vn(e,Gn(t));return""}(t.staticClass,t.class)}function Un(e,t){return{staticClass:Vn(e.staticClass,t.staticClass),class:o(e.class)?[e.class,t.class]:t.class}}function Vn(e,t){return e?t?e+" "+t:e:t||""}function Gn(e){return Array.isArray(e)?function(e){for(var t,n="",i=0,r=e.length;i<r;i++)o(t=Gn(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):l(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var Hn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Wn=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),qn=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Yn=function(e){return Wn(e)||qn(e)};var $n=Object.create(null);var Xn=v("text,number,password,search,email,tel,url");var Qn=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(Hn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Kn={create:function(e,t){Jn(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Jn(e,!0),Jn(t))},destroy:function(e){Jn(e,!0)}};function Jn(e,t){var n=e.data.ref;if(o(n)){var i=e.context,r=e.componentInstance||e.elm,a=i.$refs;t?Array.isArray(a[n])?y(a[n],r):a[n]===r&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(r)<0&&a[n].push(r):a[n]=[r]:a[n]=r}}var Zn=new pe("",{},[]),ei=["create","activate","update","remove","destroy"];function ti(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&o(e.data)===o(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,i=o(n=e.data)&&o(n=n.attrs)&&n.type,r=o(n=t.data)&&o(n=n.attrs)&&n.type;return i===r||Xn(i)&&Xn(r)}(e,t)||a(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&r(t.asyncFactory.error))}function ni(e,t,n){var i,r,a={};for(i=t;i<=n;++i)o(r=e[i].key)&&(a[r]=i);return a}var ii={create:ri,update:ri,destroy:function(e){ri(e,Zn)}};function ri(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,i,r,o=e===Zn,a=t===Zn,s=ai(e.data.directives,e.context),l=ai(t.data.directives,t.context),c=[],u=[];for(n in l)i=s[n],r=l[n],i?(r.oldValue=i.value,r.oldArg=i.arg,li(r,"update",t,e),r.def&&r.def.componentUpdated&&u.push(r)):(li(r,"bind",t,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var h=function(){for(var n=0;n<c.length;n++)li(c[n],"inserted",t,e)};o?st(t,"insert",h):h()}u.length&&st(t,"postpatch",(function(){for(var n=0;n<u.length;n++)li(u[n],"componentUpdated",t,e)}));if(!o)for(n in s)l[n]||li(s[n],"unbind",e,e,a)}(e,t)}var oi=Object.create(null);function ai(e,t){var n,i,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++)(i=e[n]).modifiers||(i.modifiers=oi),r[si(i)]=i,i.def=Re(t.$options,"directives",i.name);return r}function si(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function li(e,t,n,i,r){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,i,r)}catch(i){Ve(i,n.context,"directive "+e.name+" "+t+" hook")}}var ci=[Kn,ii];function ui(e,t){var n=t.componentOptions;if(!(o(n)&&!1===n.Ctor.options.inheritAttrs||r(e.data.attrs)&&r(t.data.attrs))){var i,a,s=t.elm,l=e.data.attrs||{},c=t.data.attrs||{};for(i in o(c.__ob__)&&(c=t.data.attrs=O({},c)),c)a=c[i],l[i]!==a&&hi(s,i,a);for(i in(X||K)&&c.value!==l.value&&hi(s,"value",c.value),l)r(c[i])&&(Rn(i)?s.removeAttributeNS(Fn,Bn(i)):Dn(i)||s.removeAttribute(i))}}function hi(e,t,n){e.tagName.indexOf("-")>-1?di(e,t,n):Nn(t)?jn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Dn(t)?e.setAttribute(t,function(e,t){return jn(t)||"false"===t?"false":"contenteditable"===e&&In(t)?t:"true"}(t,n)):Rn(t)?jn(n)?e.removeAttributeNS(Fn,Bn(t)):e.setAttributeNS(Fn,t,n):di(e,t,n)}function di(e,t,n){if(jn(n))e.removeAttribute(t);else{if(X&&!Q&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var fi={create:ui,update:ui};function pi(e,t){var n=t.elm,i=t.data,a=e.data;if(!(r(i.staticClass)&&r(i.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=zn(t),l=n._transitionClasses;o(l)&&(s=Vn(s,Gn(l))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var mi,vi={create:pi,update:pi};function gi(e,t,n){var i=mi;return function r(){var o=t.apply(null,arguments);null!==o&&xi(e,r,n,i)}}var yi=Ye&&!(Z&&Number(Z[1])<=53);function bi(e,t,n,i){if(yi){var r=sn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}mi.addEventListener(e,t,te?{capture:n,passive:i}:n)}function xi(e,t,n,i){(i||mi).removeEventListener(e,t._wrapper||t,n)}function wi(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};mi=t.elm,function(e){if(o(e.__r)){var t=X?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}o(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(n),at(n,i,bi,xi,gi,t.context),mi=void 0}}var _i,Si={create:wi,update:wi};function Mi(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,i,a=t.elm,s=e.data.domProps||{},l=t.data.domProps||{};for(n in o(l.__ob__)&&(l=t.data.domProps=O({},l)),s)n in l||(a[n]="");for(n in l){if(i=l[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),i===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=i;var c=r(i)?"":String(i);Ti(a,c)&&(a.value=c)}else if("innerHTML"===n&&qn(a.tagName)&&r(a.innerHTML)){(_i=_i||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var u=_i.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}else if(i!==s[n])try{a[n]=i}catch(e){}}}}function Ti(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,i=e._vModifiers;if(o(i)){if(i.number)return m(n)!==m(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var Ei={create:Mi,update:Mi},Ci=w((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var i=e.split(n);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}));function Ai(e){var t=Oi(e.style);return e.staticStyle?O(e.staticStyle,t):t}function Oi(e){return Array.isArray(e)?L(e):"string"==typeof e?Ci(e):e}var Li,ki=/^--/,Pi=/\s*!important$/,Di=function(e,t,n){if(ki.test(t))e.style.setProperty(t,n);else if(Pi.test(n))e.style.setProperty(E(t),n.replace(Pi,""),"important");else{var i=Ni(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)e.style[i]=n[r];else e.style[i]=n}},Ii=["Webkit","Moz","ms"],Ni=w((function(e){if(Li=Li||document.createElement("div").style,"filter"!==(e=S(e))&&e in Li)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Ii.length;n++){var i=Ii[n]+t;if(i in Li)return i}}));function Fi(e,t){var n=t.data,i=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(i.staticStyle)&&r(i.style))){var a,s,l=t.elm,c=i.staticStyle,u=i.normalizedStyle||i.style||{},h=c||u,d=Oi(t.data.style)||{};t.data.normalizedStyle=o(d.__ob__)?O({},d):d;var f=function(e,t){var n,i={};if(t)for(var r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=Ai(r.data))&&O(i,n);(n=Ai(e.data))&&O(i,n);for(var o=e;o=o.parent;)o.data&&(n=Ai(o.data))&&O(i,n);return i}(t,!0);for(s in h)r(f[s])&&Di(l,s,"");for(s in f)(a=f[s])!==h[s]&&Di(l,s,null==a?"":a)}}var Ri={create:Fi,update:Fi},Bi=/\s+/;function ji(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Bi).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function zi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Bi).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function Ui(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&O(t,Vi(e.name||"v")),O(t,e),t}return"string"==typeof e?Vi(e):void 0}}var Vi=w((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Gi=W&&!Q,Hi="transition",Wi="transitionend",qi="animation",Yi="animationend";Gi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Hi="WebkitTransition",Wi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(qi="WebkitAnimation",Yi="webkitAnimationEnd"));var $i=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Xi(e){$i((function(){$i(e)}))}function Qi(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),ji(e,t))}function Ki(e,t){e._transitionClasses&&y(e._transitionClasses,t),zi(e,t)}function Ji(e,t,n){var i=er(e,t),r=i.type,o=i.timeout,a=i.propCount;if(!r)return n();var s="transition"===r?Wi:Yi,l=0,c=function(){e.removeEventListener(s,u),n()},u=function(t){t.target===e&&++l>=a&&c()};setTimeout((function(){l<a&&c()}),o+1),e.addEventListener(s,u)}var Zi=/\b(transform|all)(,|$)/;function er(e,t){var n,i=window.getComputedStyle(e),r=(i[Hi+"Delay"]||"").split(", "),o=(i[Hi+"Duration"]||"").split(", "),a=tr(r,o),s=(i[qi+"Delay"]||"").split(", "),l=(i[qi+"Duration"]||"").split(", "),c=tr(s,l),u=0,h=0;return"transition"===t?a>0&&(n="transition",u=a,h=o.length):"animation"===t?c>0&&(n="animation",u=c,h=l.length):h=(n=(u=Math.max(a,c))>0?a>c?"transition":"animation":null)?"transition"===n?o.length:l.length:0,{type:n,timeout:u,propCount:h,hasTransform:"transition"===n&&Zi.test(i[Hi+"Property"])}}function tr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return nr(t)+nr(e[n])})))}function nr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ir(e,t){var n=e.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=Ui(e.data.transition);if(!r(i)&&!o(n._enterCb)&&1===n.nodeType){for(var a=i.css,s=i.type,c=i.enterClass,u=i.enterToClass,h=i.enterActiveClass,d=i.appearClass,f=i.appearToClass,p=i.appearActiveClass,v=i.beforeEnter,g=i.enter,y=i.afterEnter,b=i.enterCancelled,x=i.beforeAppear,w=i.appear,_=i.afterAppear,S=i.appearCancelled,M=i.duration,T=Xt,E=Xt.$vnode;E&&E.parent;)T=E.context,E=E.parent;var C=!T._isMounted||!e.isRootInsert;if(!C||w||""===w){var A=C&&d?d:c,O=C&&p?p:h,L=C&&f?f:u,k=C&&x||v,P=C&&"function"==typeof w?w:g,D=C&&_||y,I=C&&S||b,N=m(l(M)?M.enter:M);0;var R=!1!==a&&!Q,B=ar(P),j=n._enterCb=F((function(){R&&(Ki(n,L),Ki(n,O)),j.cancelled?(R&&Ki(n,A),I&&I(n)):D&&D(n),n._enterCb=null}));e.data.show||st(e,"insert",(function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),P&&P(n,j)})),k&&k(n),R&&(Qi(n,A),Qi(n,O),Xi((function(){Ki(n,A),j.cancelled||(Qi(n,L),B||(or(N)?setTimeout(j,N):Ji(n,s,j)))}))),e.data.show&&(t&&t(),P&&P(n,j)),R||B||j()}}}function rr(e,t){var n=e.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=Ui(e.data.transition);if(r(i)||1!==n.nodeType)return t();if(!o(n._leaveCb)){var a=i.css,s=i.type,c=i.leaveClass,u=i.leaveToClass,h=i.leaveActiveClass,d=i.beforeLeave,f=i.leave,p=i.afterLeave,v=i.leaveCancelled,g=i.delayLeave,y=i.duration,b=!1!==a&&!Q,x=ar(f),w=m(l(y)?y.leave:y);0;var _=n._leaveCb=F((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(Ki(n,u),Ki(n,h)),_.cancelled?(b&&Ki(n,c),v&&v(n)):(t(),p&&p(n)),n._leaveCb=null}));g?g(S):S()}function S(){_.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),d&&d(n),b&&(Qi(n,c),Qi(n,h),Xi((function(){Ki(n,c),_.cancelled||(Qi(n,u),x||(or(w)?setTimeout(_,w):Ji(n,s,_)))}))),f&&f(n,_),b||x||_())}}function or(e){return"number"==typeof e&&!isNaN(e)}function ar(e){if(r(e))return!1;var t=e.fns;return o(t)?ar(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function sr(e,t){!0!==t.data.show&&ir(t)}var lr=function(e){var t,n,i={},l=e.modules,c=e.nodeOps;for(t=0;t<ei.length;++t)for(i[ei[t]]=[],n=0;n<l.length;++n)o(l[n][ei[t]])&&i[ei[t]].push(l[n][ei[t]]);function u(e){var t=c.parentNode(e);o(t)&&c.removeChild(t,e)}function h(e,t,n,r,s,l,u){if(o(e.elm)&&o(l)&&(e=l[u]=ye(e)),e.isRootInsert=!s,!function(e,t,n,r){var s=e.data;if(o(s)){var l=o(e.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(e,!1),o(e.componentInstance))return d(e,t),f(n,e.elm,r),a(l)&&function(e,t,n,r){var a,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<i.activate.length;++a)i.activate[a](Zn,s);t.push(s);break}f(n,e.elm,r)}(e,t,n,r),!0}}(e,t,n,r)){var h=e.data,m=e.children,v=e.tag;o(v)?(e.elm=e.ns?c.createElementNS(e.ns,v):c.createElement(v,e),y(e),p(e,m,t),o(h)&&g(e,t),f(n,e.elm,r)):a(e.isComment)?(e.elm=c.createComment(e.text),f(n,e.elm,r)):(e.elm=c.createTextNode(e.text),f(n,e.elm,r))}}function d(e,t){o(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(g(e,t),y(e)):(Jn(e),t.push(e))}function f(e,t,n){o(e)&&(o(n)?c.parentNode(n)===e&&c.insertBefore(e,t,n):c.appendChild(e,t))}function p(e,t,n){if(Array.isArray(t)){0;for(var i=0;i<t.length;++i)h(t[i],n,e.elm,null,!0,t,i)}else s(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return o(e.tag)}function g(e,n){for(var r=0;r<i.create.length;++r)i.create[r](Zn,e);o(t=e.data.hook)&&(o(t.create)&&t.create(Zn,e),o(t.insert)&&n.push(e))}function y(e){var t;if(o(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var n=e;n;)o(t=n.context)&&o(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),n=n.parent;o(t=Xt)&&t!==e.context&&t!==e.fnContext&&o(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function b(e,t,n,i,r,o){for(;i<=r;++i)h(n[i],o,e,t,!1,n,i)}function x(e){var t,n,r=e.data;if(o(r))for(o(t=r.hook)&&o(t=t.destroy)&&t(e),t=0;t<i.destroy.length;++t)i.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)x(e.children[n])}function w(e,t,n){for(;t<=n;++t){var i=e[t];o(i)&&(o(i.tag)?(_(i),x(i)):u(i.elm))}}function _(e,t){if(o(t)||o(e.data)){var n,r=i.remove.length+1;for(o(t)?t.listeners+=r:t=function(e,t){function n(){0==--n.listeners&&u(e)}return n.listeners=t,n}(e.elm,r),o(n=e.componentInstance)&&o(n=n._vnode)&&o(n.data)&&_(n,t),n=0;n<i.remove.length;++n)i.remove[n](e,t);o(n=e.data.hook)&&o(n=n.remove)?n(e,t):t()}else u(e.elm)}function S(e,t,n,i){for(var r=n;r<i;r++){var a=t[r];if(o(a)&&ti(e,a))return r}}function M(e,t,n,s,l,u){if(e!==t){o(t.elm)&&o(s)&&(t=s[l]=ye(t));var d=t.elm=e.elm;if(a(e.isAsyncPlaceholder))o(t.asyncFactory.resolved)?C(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var f,p=t.data;o(p)&&o(f=p.hook)&&o(f=f.prepatch)&&f(e,t);var v=e.children,g=t.children;if(o(p)&&m(t)){for(f=0;f<i.update.length;++f)i.update[f](e,t);o(f=p.hook)&&o(f=f.update)&&f(e,t)}r(t.text)?o(v)&&o(g)?v!==g&&function(e,t,n,i,a){var s,l,u,d=0,f=0,p=t.length-1,m=t[0],v=t[p],g=n.length-1,y=n[0],x=n[g],_=!a;for(0;d<=p&&f<=g;)r(m)?m=t[++d]:r(v)?v=t[--p]:ti(m,y)?(M(m,y,i,n,f),m=t[++d],y=n[++f]):ti(v,x)?(M(v,x,i,n,g),v=t[--p],x=n[--g]):ti(m,x)?(M(m,x,i,n,g),_&&c.insertBefore(e,m.elm,c.nextSibling(v.elm)),m=t[++d],x=n[--g]):ti(v,y)?(M(v,y,i,n,f),_&&c.insertBefore(e,v.elm,m.elm),v=t[--p],y=n[++f]):(r(s)&&(s=ni(t,d,p)),r(l=o(y.key)?s[y.key]:S(y,t,d,p))?h(y,i,e,m.elm,!1,n,f):ti(u=t[l],y)?(M(u,y,i,n,f),t[l]=void 0,_&&c.insertBefore(e,u.elm,m.elm)):h(y,i,e,m.elm,!1,n,f),y=n[++f]);d>p?b(e,r(n[g+1])?null:n[g+1].elm,n,f,g,i):f>g&&w(t,d,p)}(d,v,g,n,u):o(g)?(o(e.text)&&c.setTextContent(d,""),b(d,null,g,0,g.length-1,n)):o(v)?w(v,0,v.length-1):o(e.text)&&c.setTextContent(d,""):e.text!==t.text&&c.setTextContent(d,t.text),o(p)&&o(f=p.hook)&&o(f=f.postpatch)&&f(e,t)}}}function T(e,t,n){if(a(n)&&o(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var E=v("attrs,class,staticClass,staticStyle,key");function C(e,t,n,i){var r,s=t.tag,l=t.data,c=t.children;if(i=i||l&&l.pre,t.elm=e,a(t.isComment)&&o(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(o(l)&&(o(r=l.hook)&&o(r=r.init)&&r(t,!0),o(r=t.componentInstance)))return d(t,n),!0;if(o(s)){if(o(c))if(e.hasChildNodes())if(o(r=l)&&o(r=r.domProps)&&o(r=r.innerHTML)){if(r!==e.innerHTML)return!1}else{for(var u=!0,h=e.firstChild,f=0;f<c.length;f++){if(!h||!C(h,c[f],n,i)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else p(t,c,n);if(o(l)){var m=!1;for(var v in l)if(!E(v)){m=!0,g(t,n);break}!m&&l.class&&it(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!r(t)){var l,u=!1,d=[];if(r(e))u=!0,h(t,d);else{var f=o(e.nodeType);if(!f&&ti(e,t))M(e,t,d,null,null,s);else{if(f){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),n=!0),a(n)&&C(e,t,d))return T(t,d,!0),e;l=e,e=new pe(c.tagName(l).toLowerCase(),{},[],void 0,l)}var p=e.elm,v=c.parentNode(p);if(h(t,d,p._leaveCb?null:v,c.nextSibling(p)),o(t.parent))for(var g=t.parent,y=m(t);g;){for(var b=0;b<i.destroy.length;++b)i.destroy[b](g);if(g.elm=t.elm,y){for(var _=0;_<i.create.length;++_)i.create[_](Zn,g);var S=g.data.hook.insert;if(S.merged)for(var E=1;E<S.fns.length;E++)S.fns[E]()}else Jn(g);g=g.parent}o(v)?w([e],0,0):o(e.tag)&&x(e)}}return T(t,d,u),t.elm}o(e)&&x(e)}}({nodeOps:Qn,modules:[fi,vi,Si,Ei,Ri,W?{create:sr,activate:sr,remove:function(e,t){!0!==e.data.show?rr(e,t):t()}}:{}].concat(ci)});Q&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&vr(e,"input")}));var cr={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?st(n,"postpatch",(function(){cr.componentUpdated(e,t,n)})):ur(e,t,n.context),e._vOptions=[].map.call(e.options,fr)):("textarea"===n.tag||Xn(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",pr),e.addEventListener("compositionend",mr),e.addEventListener("change",mr),Q&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){ur(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,fr);if(r.some((function(e,t){return!I(e,i[t])})))(e.multiple?t.value.some((function(e){return dr(e,r)})):t.value!==t.oldValue&&dr(t.value,r))&&vr(e,"change")}}};function ur(e,t,n){hr(e,t,n),(X||K)&&setTimeout((function(){hr(e,t,n)}),0)}function hr(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var o,a,s=0,l=e.options.length;s<l;s++)if(a=e.options[s],r)o=N(i,fr(a))>-1,a.selected!==o&&(a.selected=o);else if(I(fr(a),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));r||(e.selectedIndex=-1)}}function dr(e,t){return t.every((function(t){return!I(t,e)}))}function fr(e){return"_value"in e?e._value:e.value}function pr(e){e.target.composing=!0}function mr(e){e.target.composing&&(e.target.composing=!1,vr(e.target,"input"))}function vr(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function gr(e){return!e.componentInstance||e.data&&e.data.transition?e:gr(e.componentInstance._vnode)}var yr={model:cr,show:{bind:function(e,t,n){var i=t.value,r=(n=gr(n)).data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,ir(n,(function(){e.style.display=o}))):e.style.display=i?o:"none"},update:function(e,t,n){var i=t.value;!i!=!t.oldValue&&((n=gr(n)).data&&n.data.transition?(n.data.show=!0,i?ir(n,(function(){e.style.display=e.__vOriginalDisplay})):rr(n,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},br={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function xr(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?xr(Ht(t.children)):e}function wr(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var o in r)t[S(o)]=r[o];return t}function _r(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var Sr=function(e){return e.tag||Gt(e)},Mr=function(e){return"show"===e.name},Tr={name:"transition",props:br,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Sr)).length){0;var i=this.mode;0;var r=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var o=xr(r);if(!o)return r;if(this._leaving)return _r(e,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=wr(this),c=this._vnode,u=xr(c);if(o.data.directives&&o.data.directives.some(Mr)&&(o.data.show=!0),u&&u.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,u)&&!Gt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=O({},l);if("out-in"===i)return this._leaving=!0,st(h,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),_r(e,r);if("in-out"===i){if(Gt(o))return c;var d,f=function(){d()};st(l,"afterEnter",f),st(l,"enterCancelled",f),st(h,"delayLeave",(function(e){d=e}))}}return r}}},Er=O({tag:String,moveClass:String},br);function Cr(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Ar(e){e.data.newPos=e.elm.getBoundingClientRect()}function Or(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}delete Er.mode;var Lr={Transition:Tr,TransitionGroup:{props:Er,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var r=Qt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],a=wr(this),s=0;s<r.length;s++){var l=r[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(i){for(var c=[],u=[],h=0;h<i.length;h++){var d=i[h];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?c.push(d):u.push(d)}this.kept=e(t,null,c),this.removed=u}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Cr),e.forEach(Ar),e.forEach(Or),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,i=n.style;Qi(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Wi,n._moveCb=function e(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Wi,e),n._moveCb=null,Ki(n,t))})}})))},methods:{hasMove:function(e,t){if(!Gi)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){zi(n,e)})),ji(n,t),n.style.display="none",this.$el.appendChild(n);var i=er(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};Sn.config.mustUseProp=function(e,t,n){return"value"===n&&Pn(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Sn.config.isReservedTag=Yn,Sn.config.isReservedAttr=kn,Sn.config.getTagNamespace=function(e){return qn(e)?"svg":"math"===e?"math":void 0},Sn.config.isUnknownElement=function(e){if(!W)return!0;if(Yn(e))return!1;if(e=e.toLowerCase(),null!=$n[e])return $n[e];var t=document.createElement(e);return e.indexOf("-")>-1?$n[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:$n[e]=/HTMLUnknownElement/.test(t.toString())},O(Sn.options.directives,yr),O(Sn.options.components,Lr),Sn.prototype.__patch__=W?lr:k,Sn.prototype.$mount=function(e,t){return function(e,t,n){var i;return e.$el=t,e.$options.render||(e.$options.render=ve),Zt(e,"beforeMount"),i=function(){e._update(e._render(),n)},new dn(e,i,k,{before:function(){e._isMounted&&!e._isDestroyed&&Zt(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Zt(e,"mounted")),e}(this,e=e&&W?function(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}(e):void 0,t)},W&&setTimeout((function(){j.devtools&&re&&re.emit("init",Sn)}),0),t.default=Sn}.call(this,n(54),n(402).setImmediate)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(10),r=n(84);function o(e){var t=e.prototype.toJSON;"function"==typeof t||Object(i.a)(0),e.prototype.inspect=t,r.a&&(e.prototype[r.a]=t)}},function(e,t,n){"use strict";var i=n(177),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===r.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,i){"object"==typeof t[i]&&"object"==typeof n?t[i]=e(t[i],n):t[i]=n}for(var i=0,r=arguments.length;i<r;i++)c(arguments[i],n);return t},deepMerge:function e(){var t={};function n(n,i){"object"==typeof t[i]&&"object"==typeof n?t[i]=e(t[i],n):t[i]="object"==typeof n?e({},n):n}for(var i=0,r=arguments.length;i<r;i++)c(arguments[i],n);return t},extend:function(e,t,n){return c(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";n.r(t),n.d(t,"ApolloLink",(function(){return b})),n.d(t,"concat",(function(){return y})),n.d(t,"createOperation",(function(){return d})),n.d(t,"empty",(function(){return m})),n.d(t,"execute",(function(){return x})),n.d(t,"from",(function(){return v})),n.d(t,"fromError",(function(){return h})),n.d(t,"fromPromise",(function(){return u})),n.d(t,"makePromise",(function(){return c})),n.d(t,"split",(function(){return g})),n.d(t,"toPromise",(function(){return l}));var i=n(23);n.d(t,"Observable",(function(){return i.a}));var r=n(7),o=n(4),a=n(6);n.d(t,"getOperationName",(function(){return a.getOperationName}));!function(e){function t(t,n){var i=e.call(this,t)||this;return i.link=n,i}Object(o.c)(t,e)}(Error);function s(e){return e.request.length<=1}function l(e){var t=!1;return new Promise((function(n,i){e.subscribe({next:function(e){t||(t=!0,n(e))},error:i})}))}var c=l;function u(e){return new i.a((function(t){e.then((function(e){t.next(e),t.complete()})).catch(t.error.bind(t))}))}function h(e){return new i.a((function(t){t.error(e)}))}function d(e,t){var n=Object(o.a)({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n="function"==typeof e?Object(o.a)({},n,e(n)):Object(o.a)({},n,e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Object(o.a)({},n)}}),Object.defineProperty(t,"toKey",{enumerable:!1,value:function(){return function(e){var t=e.query,n=e.variables,i=e.operationName;return JSON.stringify([i,t,n])}(t)}}),t}function f(e,t){return t?t(e):i.a.of()}function p(e){return"function"==typeof e?new b(e):e}function m(){return new b((function(){return i.a.of()}))}function v(e){return 0===e.length?m():e.map(p).reduce((function(e,t){return e.concat(t)}))}function g(e,t,n){var r=p(t),o=p(n||new b(f));return s(r)&&s(o)?new b((function(t){return e(t)?r.request(t)||i.a.of():o.request(t)||i.a.of()})):new b((function(t,n){return e(t)?r.request(t,n)||i.a.of():o.request(t,n)||i.a.of()}))}var y=function(e,t){var n=p(e);if(s(n))return n;var r=p(t);return s(r)?new b((function(e){return n.request(e,(function(e){return r.request(e)||i.a.of()}))||i.a.of()})):new b((function(e,t){return n.request(e,(function(e){return r.request(e,t)||i.a.of()}))||i.a.of()}))},b=function(){function e(e){e&&(this.request=e)}return e.prototype.split=function(t,n,i){return this.concat(g(t,n,i||new e(f)))},e.prototype.concat=function(e){return y(this,e)},e.prototype.request=function(e,t){throw new r.a(1)},e.empty=m,e.from=v,e.split=g,e.execute=x,e}();function x(e,t){return e.request(d(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?Object(a.getOperationName)(t.query):""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(t.indexOf(o)<0)throw new r.a(2)}return e}(t))))||i.a.of()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=void 0,c=Array.isArray(e),u=[e],h=-1,d=[],f=void 0,p=void 0,m=void 0,v=[],g=[],y=e;do{var b=++h===u.length,x=b&&0!==d.length;if(b){if(p=0===g.length?void 0:v[v.length-1],f=m,m=g.pop(),x){if(c)f=f.slice();else{for(var w={},_=0,S=Object.keys(f);_<S.length;_++){var M=S[_];w[M]=f[M]}f=w}for(var T=0,E=0;E<d.length;E++){var C=d[E][0],A=d[E][1];c&&(C-=T),c&&null===A?(f.splice(C,1),T++):f[C]=A}}h=i.index,u=i.keys,d=i.edits,c=i.inArray,i=i.prev}else{if(p=m?c?h:u[h]:void 0,null==(f=m?m[p]:y))continue;m&&v.push(p)}var O,L=void 0;if(!Array.isArray(f)){if(!(0,o.isNode)(f))throw new Error("Invalid AST Node: ".concat((0,r.default)(f),"."));var k=l(t,f.kind,b);if(k){if((L=k.call(t,f,p,m,v,g))===s)break;if(!1===L){if(!b){v.pop();continue}}else if(void 0!==L&&(d.push([p,L]),!b)){if(!(0,o.isNode)(L)){v.pop();continue}f=L}}}if(void 0===L&&x&&d.push([p,f]),b)v.pop();else i={inArray:c,index:h,keys:u,edits:d,prev:i},c=Array.isArray(f),u=c?f:null!==(O=n[f.kind])&&void 0!==O?O:[],h=-1,d=[],m&&g.push(m),m=f}while(void 0!==i);0!==d.length&&(y=d[d.length-1][1]);return y},t.visitInParallel=function(e){var t=new Array(e.length);return{enter:function(n){for(var i=0;i<e.length;i++)if(null==t[i]){var r=l(e[i],n.kind,!1);if(r){var o=r.apply(e[i],arguments);if(!1===o)t[i]=n;else if(o===s)t[i]=s;else if(void 0!==o)return o}}},leave:function(n){for(var i=0;i<e.length;i++)if(null==t[i]){var r=l(e[i],n.kind,!0);if(r){var o=r.apply(e[i],arguments);if(o===s)t[i]=s;else if(void 0!==o&&!1!==o)return o}}else t[i]===n&&(t[i]=null)}}},t.getVisitFn=l,t.BREAK=t.QueryDocumentKeys=void 0;var i,r=(i=n(382))&&i.__esModule?i:{default:i},o=n(383);var a={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};t.QueryDocumentKeys=a;var s=Object.freeze({});function l(e,t,n){var i=e[t];if(i){if(!n&&"function"==typeof i)return i;var r=n?i.leave:i.enter;if("function"==typeof r)return r}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var a=o[t];if("function"==typeof a)return a}}}t.BREAK=s},function(e,t,n){var i=n(28),r=n(14),o=n(63),a=n(57),s=n(58),l=function(e,t,n){var c,u,h,d=e&l.F,f=e&l.G,p=e&l.S,m=e&l.P,v=e&l.B,g=e&l.W,y=f?r:r[t]||(r[t]={}),b=y.prototype,x=f?i:p?i[t]:(i[t]||{}).prototype;for(c in f&&(n=t),n)(u=!d&&x&&void 0!==x[c])&&s(y,c)||(h=u?x[c]:n[c],y[c]=f&&"function"!=typeof x[c]?n[c]:v&&u?o(h,i):g&&x[c]==h?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[c]=h,e&l.R&&b&&!b[c]&&a(b,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){(function(e){e.exports=function(){"use strict";var t,i;function r(){return t.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function f(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,i){return Tt(e,t,n,i,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function v(e){if(null==e._isValid){var t=m(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=p(NaN);return null!=e?f(m(t),e):m(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=r.momentProperties=[],b=!1;function x(e,t){var n,i,r;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=m(t)),c(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)c(r=t[i=y[n]])||(e[i]=r);return e}function w(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,r.updateOffset(this),b=!1)}function _(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function S(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function M(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,a,l=[];for(o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];l.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,E={};function C(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),E[e]||(S(t),E[e]=!0)}function A(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e,t){var n,i=f({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(i[n]=f({},i[n]));return i}function L(e){null!=e&&this.set(e)}function k(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,D=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,I={},N={};function F(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(N[e]=r),t&&(N[t[0]]=function(){return k(r.apply(this,arguments),t[1],t[2])}),n&&(N[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function R(e,t){return e.isValid()?(t=B(t,e.localeData()),I[t]=I[t]||function(e){var t,n,i,r=e.match(P);for(t=0,n=r.length;t<n;t++)N[r[t]]?r[t]=N[r[t]]:r[t]=(i=r[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,o="";for(i=0;i<n;i++)o+=A(r[i])?r[i].call(t,e):r[i];return o}}(t),I[t](e)):e.localeData().invalidDate()}function B(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(D.lastIndex=0;n>=0&&D.test(e);)e=e.replace(D,i),D.lastIndex=0,n-=1;return e}var j={};function z(e,t){var n=e.toLowerCase();j[n]=j[n+"s"]=j[t]=e}function U(e){return"string"==typeof e?j[e]||j[e.toLowerCase()]:void 0}function V(e){var t,n,i={};for(n in e)s(e,n)&&(t=U(n))&&(i[t]=e[n]);return i}var G={};function H(e,t){G[e]=t}function W(e){return e%4==0&&e%100!=0||e%400==0}function q(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=q(t)),n}function $(e,t){return function(n){return null!=n?(Q(this,e,n),r.updateOffset(this,t),this):X(this,e)}}function X(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&W(e.year())&&1===e.month()&&29===e.date()?(n=Y(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),_e(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var K,J=/\d/,Z=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,ie=/\d\d?/,re=/\d\d\d\d?/,oe=/\d\d\d\d\d\d?/,ae=/\d{1,3}/,se=/\d{1,4}/,le=/[+-]?\d{1,6}/,ce=/\d+/,ue=/[+-]?\d+/,he=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pe(e,t,n){K[e]=A(t)?t:function(e,i){return e&&n?n:t}}function me(e,t){return s(K,e)?K[e](t._strict,t._locale):new RegExp(ve(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,r){return t||n||i||r}))))}function ve(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}K={};var ge,ye={};function be(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=Y(e)}),n=0;n<e.length;n++)ye[e[n]]=i}function xe(e,t){be(e,(function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)}))}function we(e,t,n){null!=t&&s(ye,e)&&ye[e](t,n._a,n,e)}function _e(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?W(e)?29:28:31-i%7%2}ge=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",(function(){return this.month()+1})),F("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),F("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),z("month","M"),H("month",8),pe("M",ie),pe("MM",ie,Z),pe("MMM",(function(e,t){return t.monthsShortRegex(e)})),pe("MMMM",(function(e,t){return t.monthsRegex(e)})),be(["M","MM"],(function(e,t){t[1]=Y(e)-1})),be(["MMM","MMMM"],(function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[1]=r:m(n).invalidMonth=e}));var Se="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Te=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee=fe,Ce=fe;function Ae(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=ge.call(this._shortMonthsParse,a))?r:null:-1!==(r=ge.call(this._longMonthsParse,a))?r:null:"MMM"===t?-1!==(r=ge.call(this._shortMonthsParse,a))||-1!==(r=ge.call(this._longMonthsParse,a))?r:null:-1!==(r=ge.call(this._longMonthsParse,a))||-1!==(r=ge.call(this._shortMonthsParse,a))?r:null}function Oe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Y(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),_e(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Le(e){return null!=e?(Oe(this,e),r.updateOffset(this,!0),this):X(this,"Month")}function ke(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;t<12;t++)i[t]=ve(i[t]),r[t]=ve(r[t]);for(t=0;t<24;t++)o[t]=ve(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Pe(e){return W(e)?366:365}F("Y",0,0,(function(){var e=this.year();return e<=9999?k(e,4):"+"+e})),F(0,["YY",2],0,(function(){return this.year()%100})),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),z("year","y"),H("year",1),pe("Y",ue),pe("YY",ie,Z),pe("YYYY",se,te),pe("YYYYY",le,ne),pe("YYYYYY",le,ne),be(["YYYYY","YYYYYY"],0),be("YYYY",(function(e,t){t[0]=2===e.length?r.parseTwoDigitYear(e):Y(e)})),be("YY",(function(e,t){t[0]=r.parseTwoDigitYear(e)})),be("Y",(function(e,t){t[0]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return Y(e)+(Y(e)>68?1900:2e3)};var De=$("FullYear",!0);function Ie(e,t,n,i,r,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,o,a),s}function Ne(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Fe(e,t,n){var i=7+t-n;return-(7+Ne(e,0,i).getUTCDay()-t)%7+i-1}function Re(e,t,n,i,r){var o,a,s=1+7*(t-1)+(7+n-i)%7+Fe(e,i,r);return s<=0?a=Pe(o=e-1)+s:s>Pe(e)?(o=e+1,a=s-Pe(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Be(e,t,n){var i,r,o=Fe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?i=a+je(r=e.year()-1,t,n):a>je(e.year(),t,n)?(i=a-je(e.year(),t,n),r=e.year()+1):(r=e.year(),i=a),{week:i,year:r}}function je(e,t,n){var i=Fe(e,t,n),r=Fe(e+1,t,n);return(Pe(e)-i+r)/7}function ze(e,t){return e.slice(t,7).concat(e.slice(0,t))}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),H("week",5),H("isoWeek",5),pe("w",ie),pe("ww",ie,Z),pe("W",ie),pe("WW",ie,Z),xe(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=Y(e)})),F("d",0,"do","day"),F("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),F("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),F("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),pe("d",ie),pe("e",ie),pe("E",ie),pe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),pe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),pe("dddd",(function(e,t){return t.weekdaysRegex(e)})),xe(["dd","ddd","dddd"],(function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:m(n).invalidWeekday=e})),xe(["d","e","E"],(function(e,t,n,i){t[i]=Y(e)}));var Ue="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ve="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ge="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),He=fe,We=fe,qe=fe;function Ye(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=ge.call(this._weekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ge.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=ge.call(this._minWeekdaysParse,a))?r:null:"dddd"===t?-1!==(r=ge.call(this._weekdaysParse,a))||-1!==(r=ge.call(this._shortWeekdaysParse,a))||-1!==(r=ge.call(this._minWeekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ge.call(this._shortWeekdaysParse,a))||-1!==(r=ge.call(this._weekdaysParse,a))||-1!==(r=ge.call(this._minWeekdaysParse,a))?r:null:-1!==(r=ge.call(this._minWeekdaysParse,a))||-1!==(r=ge.call(this._weekdaysParse,a))||-1!==(r=ge.call(this._shortWeekdaysParse,a))?r:null}function $e(){function e(e,t){return t.length-e.length}var t,n,i,r,o,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),i=ve(this.weekdaysMin(n,"")),r=ve(this.weekdaysShort(n,"")),o=ve(this.weekdays(n,"")),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);a.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Qe(e,t){F(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ke(e,t){return t._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Xe),F("k",["kk",2],0,(function(){return this.hours()||24})),F("hmm",0,0,(function(){return""+Xe.apply(this)+k(this.minutes(),2)})),F("hmmss",0,0,(function(){return""+Xe.apply(this)+k(this.minutes(),2)+k(this.seconds(),2)})),F("Hmm",0,0,(function(){return""+this.hours()+k(this.minutes(),2)})),F("Hmmss",0,0,(function(){return""+this.hours()+k(this.minutes(),2)+k(this.seconds(),2)})),Qe("a",!0),Qe("A",!1),z("hour","h"),H("hour",13),pe("a",Ke),pe("A",Ke),pe("H",ie),pe("h",ie),pe("k",ie),pe("HH",ie,Z),pe("hh",ie,Z),pe("kk",ie,Z),pe("hmm",re),pe("hmmss",oe),pe("Hmm",re),pe("Hmmss",oe),be(["H","HH"],3),be(["k","kk"],(function(e,t,n){var i=Y(e);t[3]=24===i?0:i})),be(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),be(["h","hh"],(function(e,t,n){t[3]=Y(e),m(n).bigHour=!0})),be("hmm",(function(e,t,n){var i=e.length-2;t[3]=Y(e.substr(0,i)),t[4]=Y(e.substr(i)),m(n).bigHour=!0})),be("hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[3]=Y(e.substr(0,i)),t[4]=Y(e.substr(i,2)),t[5]=Y(e.substr(r)),m(n).bigHour=!0})),be("Hmm",(function(e,t,n){var i=e.length-2;t[3]=Y(e.substr(0,i)),t[4]=Y(e.substr(i))})),be("Hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[3]=Y(e.substr(0,i)),t[4]=Y(e.substr(i,2)),t[5]=Y(e.substr(r))}));var Je,Ze=$("Hours",!0),et={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Se,monthsShort:Me,week:{dow:0,doy:6},weekdays:Ue,weekdaysMin:Ge,weekdaysShort:Ve,meridiemParse:/[ap]\.?m?\.?/i},tt={},nt={};function it(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function rt(e){return e?e.toLowerCase().replace("_","-"):e}function ot(t){var i=null;if(void 0===tt[t]&&void 0!==e&&e&&e.exports)try{i=Je._abbr,n(373)("./"+t),at(i)}catch(e){tt[t]=null}return tt[t]}function at(e,t){var n;return e&&((n=c(t)?lt(e):st(e,t))?Je=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Je._abbr}function st(e,t){if(null!==t){var n,i=et;if(t.abbr=e,null!=tt[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=tt[e]._config;else if(null!=t.parentLocale)if(null!=tt[t.parentLocale])i=tt[t.parentLocale]._config;else{if(null==(n=ot(t.parentLocale)))return nt[t.parentLocale]||(nt[t.parentLocale]=[]),nt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return tt[e]=new L(O(i,t)),nt[e]&&nt[e].forEach((function(e){st(e.name,e.config)})),at(e),tt[e]}return delete tt[e],null}function lt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Je;if(!o(e)){if(t=ot(e))return t;e=[e]}return function(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=rt(e[o]).split("-")).length,n=(n=rt(e[o+1]))?n.split("-"):null;t>0;){if(i=ot(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&it(r,n)>=t-1)break;t--}o++}return Je}(e)}function ct(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>_e(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,m(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),m(e)._overflowWeeks&&-1===t&&(t=7),m(e)._overflowWeekday&&-1===t&&(t=8),m(e).overflow=t),e}var ut=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dt=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],mt=/^\/?Date\((-?\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function yt(e){var t,n,i,r,o,a,s=e._i,l=ut.exec(s)||ht.exec(s);if(l){for(m(e).iso=!0,t=0,n=ft.length;t<n;t++)if(ft[t][1].exec(l[1])){r=ft[t][0],i=!1!==ft[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=pt.length;t<n;t++)if(pt[t][1].exec(l[3])){o=(l[2]||" ")+pt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(l[4]){if(!dt.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=r+(o||"")+(a||""),St(e)}else e._isValid=!1}function bt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function xt(e){var t,n,i,r,o,a,s,l,c=vt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],r=c[2],o=c[5],a=c[6],s=c[7],l=[bt(n),Me.indexOf(i),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&l.push(parseInt(s,10)),t=l,!function(e,t,n){return!e||Ve.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return gt[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(c[8],c[9],c[10]),e._d=Ne.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function wt(e,t,n){return null!=e?e:null!=t?t:n}function _t(e){var t,n,i,o,a,s=[];if(!e._d){for(i=function(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,i,r,o,a,s,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=wt(t.GG,e._a[0],Be(Et(),1,4).year),i=wt(t.W,1),((r=wt(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,c=Be(Et(),o,a),n=wt(t.gg,e._a[0],c.year),i=wt(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(l=!0)):r=o),i<1||i>je(n,o,a)?m(e)._overflowWeeks=!0:null!=l?m(e)._overflowWeekday=!0:(s=Re(n,i,r,o,a),e._a[0]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=wt(e._a[0],i[0]),(e._dayOfYear>Pe(a)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=Ne(a,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Ne:Ie).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(m(e).weekdayMismatch=!0)}}function St(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,o,a,s,l=""+e._i,c=l.length,u=0;for(i=B(e._f,e._locale).match(P)||[],t=0;t<i.length;t++)o=i[t],(n=(l.match(me(o,e))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&m(e).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),u+=n.length),N[o]?(n?m(e).empty=!1:m(e).unusedTokens.push(o),we(o,n,e)):e._strict&&!n&&m(e).unusedTokens.push(o);m(e).charsLeftOver=c-u,l.length>0&&m(e).unusedInput.push(l),e._a[3]<=12&&!0===m(e).bigHour&&e._a[3]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(s=m(e).era)&&(e._a[0]=e._locale.erasConvertYear(s,e._a[0])),_t(e),ct(e)}else xt(e);else yt(e)}function Mt(e){var t=e._i,n=e._f;return e._locale=e._locale||lt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),_(t)?new w(ct(t)):(h(t)?e._d=t:o(n)?function(e){var t,n,i,r,o,a,s=!1;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,a=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],St(t),v(t)&&(a=!0),o+=m(t).charsLeftOver,o+=10*m(t).unusedTokens.length,m(t).score=o,s?o<i&&(i=o,n=t):(null==i||o<i||a)&&(i=o,n=t,a&&(s=!0));f(e,n||t)}(e):n?St(e):function(e){var t=e._i;c(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=mt.exec(e._i);null===t?(yt(e),!1===e._isValid&&(delete e._isValid,xt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):o(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),_t(e)):a(t)?function(e){if(!e._d){var t=V(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),_t(e)}}(e):u(t)?e._d=new Date(t):r.createFromInputFallback(e)}(e),v(e)||(e._d=null),e))}function Tt(e,t,n,i,r){var s,c={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(a(e)&&l(e)||o(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=r,c._l=n,c._i=e,c._f=t,c._strict=i,(s=new w(ct(Mt(c))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Et(e,t,n,i){return Tt(e,t,n,i,!1)}r.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Ct=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),At=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Ot(e,t){var n,i;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Et();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Lt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kt(e){var t=V(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,i=!1;for(t in e)if(s(e,t)&&(-1===ge.call(Lt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Lt.length;++n)if(e[Lt[n]]){if(i)return!1;parseFloat(e[Lt[n]])!==Y(e[Lt[n]])&&(i=!0)}return!0}(t),this._milliseconds=+h+1e3*u+6e4*c+1e3*l*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=lt(),this._bubble()}function Pt(e){return e instanceof kt}function Dt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function It(e,t){F(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+k(~~(e/60),2)+t+k(~~e%60,2)}))}It("Z",":"),It("ZZ",""),pe("Z",de),pe("ZZ",de),be(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Ft(de,e)}));var Nt=/([\+\-]|\d\d)/gi;function Ft(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(Nt)||["-",0,0])[1]+Y(n[2]))?0:"+"===n[0]?i:-i}function Rt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(_(e)||h(e)?e.valueOf():Et(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Et(e).local()}function Bt(e){return-Math.round(e._d.getTimezoneOffset())}function jt(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var zt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ut=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Vt(e,t){var n,i,r,o,a,l,c=e,h=null;return Pt(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(c={},t?c[t]=+e:c.milliseconds=+e):(h=zt.exec(e))?(n="-"===h[1]?-1:1,c={y:0,d:Y(h[2])*n,h:Y(h[3])*n,m:Y(h[4])*n,s:Y(h[5])*n,ms:Y(Dt(1e3*h[6]))*n}):(h=Ut.exec(e))?(n="-"===h[1]?-1:1,c={y:Gt(h[2],n),M:Gt(h[3],n),w:Gt(h[4],n),d:Gt(h[5],n),h:Gt(h[6],n),m:Gt(h[7],n),s:Gt(h[8],n)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(o=Et(c.from),a=Et(c.to),r=o.isValid()&&a.isValid()?(a=Rt(a,o),o.isBefore(a)?l=Ht(o,a):((l=Ht(a,o)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=r.milliseconds,c.M=r.months),i=new kt(c),Pt(e)&&s(e,"_locale")&&(i._locale=e._locale),Pt(e)&&s(e,"_isValid")&&(i._isValid=e._isValid),i}function Gt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ht(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Wt(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),qt(this,Vt(n,i),e),this}}function qt(e,t,n,i){var o=t._milliseconds,a=Dt(t._days),s=Dt(t._months);e.isValid()&&(i=null==i||i,s&&Oe(e,X(e,"Month")+s*n),a&&Q(e,"Date",X(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,a||s))}Vt.fn=kt.prototype,Vt.invalid=function(){return Vt(NaN)};var Yt=Wt(1,"add"),$t=Wt(-1,"subtract");function Xt(e){return"string"==typeof e||e instanceof String}function Qt(e){return _(e)||h(e)||Xt(e)||u(e)||function(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Xt(e)})).length),t&&n}(e)||function(e){var t,n,i=a(e)&&!l(e),r=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<o.length;t+=1)n=o[t],r=r||s(e,n);return i&&r}(e)||null==e}function Kt(e){var t,n=a(e)&&!l(e),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)i=i||s(e,r[t]);return n&&i}function Jt(e,t){if(e.date()<t.date())return-Jt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Zt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=lt(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var en=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function tn(){return this._locale}function nn(e,t){return(e%t+t)%t}function rn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function on(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function an(e,t){return t.erasAbbrRegex(e)}function sn(){var e,t,n=[],i=[],r=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)i.push(ve(a[e].name)),n.push(ve(a[e].abbr)),r.push(ve(a[e].narrow)),o.push(ve(a[e].name)),o.push(ve(a[e].abbr)),o.push(ve(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function ln(e,t){F(0,[e,e.length],0,t)}function cn(e,t,n,i,r){var o;return null==e?Be(this,i,r).year:(t>(o=je(e,i,r))&&(t=o),un.call(this,e,t,n,i,r))}function un(e,t,n,i,r){var o=Re(e,t,n,i,r),a=Ne(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),pe("N",an),pe("NN",an),pe("NNN",an),pe("NNNN",(function(e,t){return t.erasNameRegex(e)})),pe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),be(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?m(n).era=r:m(n).invalidEra=e})),pe("y",ce),pe("yy",ce),pe("yyy",ce),pe("yyyy",ce),pe("yo",(function(e,t){return t._eraYearOrdinalRegex||ce})),be(["y","yy","yyy","yyyy"],0),be(["yo"],(function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,r):t[0]=parseInt(e,10)})),F(0,["gg",2],0,(function(){return this.weekYear()%100})),F(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),ln("gggg","weekYear"),ln("ggggg","weekYear"),ln("GGGG","isoWeekYear"),ln("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),pe("G",ue),pe("g",ue),pe("GG",ie,Z),pe("gg",ie,Z),pe("GGGG",se,te),pe("gggg",se,te),pe("GGGGG",le,ne),pe("ggggg",le,ne),xe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=Y(e)})),xe(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),F("Q",0,"Qo","quarter"),z("quarter","Q"),H("quarter",7),pe("Q",J),be("Q",(function(e,t){t[1]=3*(Y(e)-1)})),F("D",["DD",2],"Do","date"),z("date","D"),H("date",9),pe("D",ie),pe("DD",ie,Z),pe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),be(["D","DD"],2),be("Do",(function(e,t){t[2]=Y(e.match(ie)[0])}));var hn=$("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),H("dayOfYear",4),pe("DDD",ae),pe("DDDD",ee),be(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Y(e)})),F("m",["mm",2],0,"minute"),z("minute","m"),H("minute",14),pe("m",ie),pe("mm",ie,Z),be(["m","mm"],4);var dn=$("Minutes",!1);F("s",["ss",2],0,"second"),z("second","s"),H("second",15),pe("s",ie),pe("ss",ie,Z),be(["s","ss"],5);var fn,pn,mn=$("Seconds",!1);for(F("S",0,0,(function(){return~~(this.millisecond()/100)})),F(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),F(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),F(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),F(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),F(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),F(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),z("millisecond","ms"),H("millisecond",16),pe("S",ae,J),pe("SS",ae,Z),pe("SSS",ae,ee),fn="SSSS";fn.length<=9;fn+="S")pe(fn,ce);function vn(e,t){t[6]=Y(1e3*("0."+e))}for(fn="S";fn.length<=9;fn+="S")be(fn,vn);pn=$("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var gn=w.prototype;function yn(e){return e}gn.add=Yt,gn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Qt(arguments[0])?(e=arguments[0],t=void 0):Kt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Et(),i=Rt(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=t&&(A(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,Et(n)))},gn.clone=function(){return new w(this)},gn.diff=function(e,t,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=Rt(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=U(t)){case"year":o=Jt(this,i)/12;break;case"month":o=Jt(this,i);break;case"quarter":o=Jt(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:q(o)},gn.endOf=function(e){var t,n;if(void 0===(e=U(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?on:rn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-nn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-nn(t,1e3)-1}return this._d.setTime(t),r.updateOffset(this,!0),this},gn.format=function(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=R(this,e);return this.localeData().postformat(t)},gn.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Et(e).isValid())?Vt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},gn.fromNow=function(e){return this.from(Et(),e)},gn.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Et(e).isValid())?Vt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},gn.toNow=function(e){return this.to(Et(),e)},gn.get=function(e){return A(this[e=U(e)])?this[e]():this},gn.invalidAt=function(){return m(this).overflow},gn.isAfter=function(e,t){var n=_(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=U(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},gn.isBefore=function(e,t){var n=_(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=U(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},gn.isBetween=function(e,t,n,i){var r=_(e)?e:Et(e),o=_(t)?t:Et(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n)))},gn.isSame=function(e,t){var n,i=_(e)?e:Et(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=U(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},gn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},gn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},gn.isValid=function(){return v(this)},gn.lang=en,gn.locale=Zt,gn.localeData=tn,gn.max=At,gn.min=Ct,gn.parsingFlags=function(){return f({},m(this))},gn.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:G[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=V(e));for(n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit])}else if(A(this[e=U(e)]))return this[e](t);return this},gn.startOf=function(e){var t,n;if(void 0===(e=U(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?on:rn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=nn(t,6e4);break;case"second":t=this._d.valueOf(),t-=nn(t,1e3)}return this._d.setTime(t),r.updateOffset(this,!0),this},gn.subtract=$t,gn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},gn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},gn.toDate=function(){return new Date(this.valueOf())},gn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?R(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",R(n,"Z")):R(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},gn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(gn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),gn.toJSON=function(){return this.isValid()?this.toISOString():null},gn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},gn.unix=function(){return Math.floor(this.valueOf()/1e3)},gn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},gn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},gn.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},gn.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},gn.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},gn.eraYear=function(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()},gn.year=De,gn.isLeapYear=function(){return W(this.year())},gn.weekYear=function(e){return cn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},gn.isoWeekYear=function(e){return cn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},gn.quarter=gn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},gn.month=Le,gn.daysInMonth=function(){return _e(this.year(),this.month())},gn.week=gn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},gn.isoWeek=gn.isoWeeks=function(e){var t=Be(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},gn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},gn.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},gn.isoWeeksInYear=function(){return je(this.year(),1,4)},gn.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},gn.date=hn,gn.day=gn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},gn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},gn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},gn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},gn.hour=gn.hours=Ze,gn.minute=gn.minutes=dn,gn.second=gn.seconds=mn,gn.millisecond=gn.milliseconds=pn,gn.utcOffset=function(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ft(de,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Bt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?qt(this,Vt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Bt(this)},gn.utc=function(e){return this.utcOffset(0,e)},gn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Bt(this),"m")),this},gn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ft(he,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},gn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Et(e).utcOffset():0,(this.utcOffset()-e)%60==0)},gn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},gn.isLocal=function(){return!!this.isValid()&&!this._isUTC},gn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},gn.isUtc=jt,gn.isUTC=jt,gn.zoneAbbr=function(){return this._isUTC?"UTC":""},gn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},gn.dates=M("dates accessor is deprecated. Use date instead.",hn),gn.months=M("months accessor is deprecated. Use month instead",Le),gn.years=M("years accessor is deprecated. Use year instead",De),gn.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),gn.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=Mt(t))._a?(e=t._isUTC?p(t._a):Et(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&Y(e[i])!==Y(t[i]))&&a++;return a+o}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var bn=L.prototype;function xn(e,t,n,i){var r=lt(),o=p().set(i,t);return r[n](o,e)}function wn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return xn(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=xn(e,i,n,"month");return r}function _n(e,t,n,i){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var r,o=lt(),a=e?o._week.dow:0,s=[];if(null!=n)return xn(t,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=xn(t,(r+a)%7,i,"day");return s}bn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return A(i)?i.call(t,n):i},bn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(P).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},bn.invalidDate=function(){return this._invalidDate},bn.ordinal=function(e){return this._ordinal.replace("%d",e)},bn.preparse=yn,bn.postformat=yn,bn.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return A(r)?r(e,t,n,i):r.replace(/%d/i,e)},bn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return A(n)?n(t):n.replace(/%s/i,t)},bn.set=function(e){var t,n;for(n in e)s(e,n)&&(A(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},bn.eras=function(e,t){var n,i,o,a=this._eras||lt("en")._eras;for(n=0,i=a.length;n<i;++n){switch(typeof a[n].since){case"string":o=r(a[n].since).startOf("day"),a[n].since=o.valueOf()}switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=r(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a},bn.erasParse=function(e,t,n){var i,r,o,a,s,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[i];break;case"NNNN":if(o===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if([o,a,s].indexOf(e)>=0)return l[i]},bn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n},bn.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||sn.call(this),e?this._erasAbbrRegex:this._erasRegex},bn.erasNameRegex=function(e){return s(this,"_erasNameRegex")||sn.call(this),e?this._erasNameRegex:this._erasRegex},bn.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||sn.call(this),e?this._erasNarrowRegex:this._erasRegex},bn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Te).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},bn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Te.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},bn.monthsParse=function(e,t,n){var i,r,o;if(this._monthsParseExact)return Ae.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},bn.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||ke.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Ce),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},bn.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||ke.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Ee),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},bn.week=function(e){return Be(e,this._week.dow,this._week.doy).week},bn.firstDayOfYear=function(){return this._week.doy},bn.firstDayOfWeek=function(){return this._week.dow},bn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?ze(n,this._week.dow):e?n[e.day()]:n},bn.weekdaysMin=function(e){return!0===e?ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},bn.weekdaysShort=function(e){return!0===e?ze(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},bn.weekdaysParse=function(e,t,n){var i,r,o;if(this._weekdaysParseExact)return Ye.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},bn.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$e.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=He),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},bn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$e.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=We),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},bn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$e.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},bn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},bn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},at("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=M("moment.lang is deprecated. Use moment.locale instead.",at),r.langData=M("moment.langData is deprecated. Use moment.localeData instead.",lt);var Sn=Math.abs;function Mn(e,t,n,i){var r=Vt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Tn(e){return e<0?Math.floor(e):Math.ceil(e)}function En(e){return 4800*e/146097}function Cn(e){return 146097*e/4800}function An(e){return function(){return this.as(e)}}var On=An("ms"),Ln=An("s"),kn=An("m"),Pn=An("h"),Dn=An("d"),In=An("w"),Nn=An("M"),Fn=An("Q"),Rn=An("y");function Bn(e){return function(){return this.isValid()?this._data[e]:NaN}}var jn=Bn("milliseconds"),zn=Bn("seconds"),Un=Bn("minutes"),Vn=Bn("hours"),Gn=Bn("days"),Hn=Bn("months"),Wn=Bn("years"),qn=Math.round,Yn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function $n(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}var Xn=Math.abs;function Qn(e){return(e>0)-(e<0)||+e}function Kn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,o,a,s,l=Xn(this._milliseconds)/1e3,c=Xn(this._days),u=Xn(this._months),h=this.asSeconds();return h?(e=q(l/60),t=q(e/60),l%=60,e%=60,n=q(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=h<0?"-":"",o=Qn(this._months)!==Qn(h)?"-":"",a=Qn(this._days)!==Qn(h)?"-":"",s=Qn(this._milliseconds)!==Qn(h)?"-":"",r+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(c?a+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var Jn=kt.prototype;return Jn.isValid=function(){return this._isValid},Jn.abs=function(){var e=this._data;return this._milliseconds=Sn(this._milliseconds),this._days=Sn(this._days),this._months=Sn(this._months),e.milliseconds=Sn(e.milliseconds),e.seconds=Sn(e.seconds),e.minutes=Sn(e.minutes),e.hours=Sn(e.hours),e.months=Sn(e.months),e.years=Sn(e.years),this},Jn.add=function(e,t){return Mn(this,e,t,1)},Jn.subtract=function(e,t){return Mn(this,e,t,-1)},Jn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=U(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+En(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Cn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Jn.asMilliseconds=On,Jn.asSeconds=Ln,Jn.asMinutes=kn,Jn.asHours=Pn,Jn.asDays=Dn,Jn.asWeeks=In,Jn.asMonths=Nn,Jn.asQuarters=Fn,Jn.asYears=Rn,Jn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12):NaN},Jn._bubble=function(){var e,t,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Tn(Cn(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=q(o/1e3),l.seconds=e%60,t=q(e/60),l.minutes=t%60,n=q(t/60),l.hours=n%24,a+=q(n/24),r=q(En(a)),s+=r,a-=Tn(Cn(r)),i=q(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},Jn.clone=function(){return Vt(this)},Jn.get=function(e){return e=U(e),this.isValid()?this[e+"s"]():NaN},Jn.milliseconds=jn,Jn.seconds=zn,Jn.minutes=Un,Jn.hours=Vn,Jn.days=Gn,Jn.weeks=function(){return q(this.days()/7)},Jn.months=Hn,Jn.years=Wn,Jn.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=Yn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},Yn,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),n=this.localeData(),i=function(e,t,n,i){var r=Vt(e).abs(),o=qn(r.as("s")),a=qn(r.as("m")),s=qn(r.as("h")),l=qn(r.as("d")),c=qn(r.as("M")),u=qn(r.as("w")),h=qn(r.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=i,$n.apply(null,d)}(this,!r,o,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},Jn.toISOString=Kn,Jn.toString=Kn,Jn.toJSON=Kn,Jn.locale=Zt,Jn.localeData=tn,Jn.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kn),Jn.lang=en,F("X",0,0,"unix"),F("x",0,0,"valueOf"),pe("x",ue),pe("X",/[+-]?\d+(\.\d{1,3})?/),be("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),be("x",(function(e,t,n){n._d=new Date(Y(e))})),
//! moment.js
r.version="2.29.1",t=Et,r.fn=gn,r.min=function(){var e=[].slice.call(arguments,0);return Ot("isBefore",e)},r.max=function(){var e=[].slice.call(arguments,0);return Ot("isAfter",e)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=p,r.unix=function(e){return Et(1e3*e)},r.months=function(e,t){return wn(e,t,"months")},r.isDate=h,r.locale=at,r.invalid=g,r.duration=Vt,r.isMoment=_,r.weekdays=function(e,t,n){return _n(e,t,n,"weekdays")},r.parseZone=function(){return Et.apply(null,arguments).parseZone()},r.localeData=lt,r.isDuration=Pt,r.monthsShort=function(e,t){return wn(e,t,"monthsShort")},r.weekdaysMin=function(e,t,n){return _n(e,t,n,"weekdaysMin")},r.defineLocale=st,r.updateLocale=function(e,t){if(null!=t){var n,i,r=et;null!=tt[e]&&null!=tt[e].parentLocale?tt[e].set(O(tt[e]._config,t)):(null!=(i=ot(e))&&(r=i._config),t=O(r,t),null==i&&(t.abbr=e),(n=new L(t)).parentLocale=tt[e],tt[e]=n),at(e)}else null!=tt[e]&&(null!=tt[e].parentLocale?(tt[e]=tt[e].parentLocale,e===at()&&at(e)):null!=tt[e]&&delete tt[e]);return tt[e]},r.locales=function(){return T(tt)},r.weekdaysShort=function(e,t,n){return _n(e,t,n,"weekdaysShort")},r.normalizeUnits=U,r.relativeTimeRounding=function(e){return void 0===e?qn:"function"==typeof e&&(qn=e,!0)},r.relativeTimeThreshold=function(e,t){return void 0!==Yn[e]&&(void 0===t?Yn[e]:(Yn[e]=t,"s"===e&&(Yn.ss=t-1),!0))},r.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=gn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(173)(e))},function(e,t,n){e.exports=n(260)},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(24),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default((function(e,n){return function i(r,a){try{var s=t[r](a),l=s.value}catch(e){return void n(e)}if(!s.done)return o.default.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}},function(e,t,n){e.exports=n(298)},function(e,t,n){"use strict";function i(e){var t=e.split(/\r\n|[\n\r]/g),n=o(e);if(0!==n)for(var i=1;i<t.length;i++)t[i]=t[i].slice(n);for(var a=0;a<t.length&&r(t[a]);)++a;for(var s=t.length;s>a&&r(t[s-1]);)--s;return t.slice(a,s).join("\n")}function r(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function o(e){for(var t,n=!0,i=!0,r=0,o=null,a=0;a<e.length;++a)switch(e.charCodeAt(a)){case 13:10===e.charCodeAt(a+1)&&++a;case 10:n=!1,i=!0,r=0;break;case 9:case 32:++r;break;default:i&&!n&&(null===o||r<o)&&(o=r),i=!1}return null!==(t=o)&&void 0!==t?t:0}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===e.indexOf("\n"),r=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],a="\\"===e[e.length-1],s=!i||o||a||n,l="";return!s||i&&r||(l+="\n"+t),l+=t?e.replace(/\n/g,"\n"+t):e,s&&(l+="\n"),'"""'+l.replace(/"""/g,'\\"""')+'"""'}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}))},function(e,t,n){e.exports=!n(65)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(50);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";t.__esModule=!0,t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.noop=function(){},t.hasOwn=function(e,t){return l.call(e,t)},t.toObject=function(e){for(var t={},n=0;n<e.length;n++)e[n]&&c(t,e[n]);return t},t.getPropByPath=function(e,t,n){for(var i=e,r=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=0,a=r.length;o<a-1&&(i||n);++o){var s=r[o];if(!(s in i)){if(n)throw new Error("please transfer a valid prop path to form item!");break}i=i[s]}return{o:i,k:r[o],v:i?i[r[o]]:null}},t.rafThrottle=function(e){var t=!1;return function(){for(var n=this,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(i){e.apply(n,r),t=!1})))}},t.objToArray=function(e){if(Array.isArray(e))return e;return f(e)?[]:[e]};var r,o=n(31),a=(r=o)&&r.__esModule?r:{default:r},s=n(203);var l=Object.prototype.hasOwnProperty;function c(e,t){for(var n in t)e[n]=t[n];return e}t.getValueByPath=function(e,t){for(var n=(t=t||"").split("."),i=e,r=null,o=0,a=n.length;o<a;o++){var s=n[o];if(!i)break;if(o===a-1){r=i[s];break}i=i[s]}return r};t.generateId=function(){return Math.floor(1e4*Math.random())},t.valueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Array))return!1;if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0},t.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var u=t.arrayFindIndex=function(e,t){for(var n=0;n!==e.length;++n)if(t(e[n]))return n;return-1},h=(t.arrayFind=function(e,t){var n=u(e,t);return-1!==n?e[n]:void 0},t.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},t.isIE=function(){return!a.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},t.isEdge=function(){return!a.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!a.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.autoprefixer=function(e){if("object"!==(void 0===e?"undefined":i(e)))return e;var t=["ms-","webkit-"];return["transform","transition","animation"].forEach((function(n){var i=e[n];n&&i&&t.forEach((function(t){e[t+n]=i}))})),e},t.kebabCase=function(e){var t=/([^-])([A-Z])/g;return e.replace(t,"$1-$2").replace(t,"$1-$2").toLowerCase()},t.capitalize=function(e){return(0,s.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},t.looseEqual=function(e,t){var n=(0,s.isObject)(e),i=(0,s.isObject)(t);return n&&i?JSON.stringify(e)===JSON.stringify(t):!n&&!i&&String(e)===String(t)}),d=t.arrayEquals=function(e,t){if(t=t||[],(e=e||[]).length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!h(e[n],t[n]))return!1;return!0},f=(t.isEqual=function(e,t){return Array.isArray(e)&&Array.isArray(t)?d(e,t):h(e,t)},t.isEmpty=function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1})},function(e,t,n){"use strict";n.r(t),n.d(t,"CopyShader",(function(){return i}));var i={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fonts=t.crossConfig=t.sideBiggerLabelConfig=t.sideLabelConfig=t.cameraParamsMap=t.footerConfig=t.areaViewMap=t.branchList=t.showLampRoads=t.allRscu=t.modelMap=t.cameraLabelMap=t.specialSide=t.areaSnMap=t.AnimateKey=t.AnimateVertices=t.style=t.areaLabelConfig=t.quotaLabelConfig=t.CarLabelMap=t.TrackEventType=t.RoadSideType=t.ResourcePath=void 0;var i,r,o,a=n(359),s=(i=a)&&i.__esModule?i:{default:i};t.ResourcePath="https://mapdata.bj.bcebos.com/images/guangzhou/",t.RoadSideType={attackEvent:{icon:"attack@3x.png",iconWidth:30,iconHeight:12,fontsize:12,color:"#FF7979"},idNum:{normal:{icon:"equip-normal-notitle@3x.png",iconWidth:70,iconHeight:22,fontsize:14,color:"#79F7FF"},attack:{icon:"equip-dangers-notitle@3x.png",iconWidth:70,iconHeight:22,fontsize:14,color:"#FF7979"}},attackInfo:{icon:"dangers-info-blank@3x.png",iconWidth:219,iconHeight:191,title:{fontsize:16,color:"#FFFFFF"},time:{fontsize:16,color:"#FFFFFF"},detail:{fontsize:12,color:"#FFFFFF"}}},t.TrackEventType={100:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违章占道"},10001:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用公交车道停车"},10002:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用非机动车道停车"},10003:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用人行道"},10004:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违法占用机动车道停车"},200:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯故障"},20001:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯正常"},20002:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯闪烁故障"},20003:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/signal.png",name:"信号灯不亮故障"},300:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"路面遗撒"},30001:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"机动车道抛洒物"},30002:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"非机动车道抛洒物"},30003:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/roadDrop.png",name:"人行道抛洒物"},trafficAccident:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"交通事故"},overSpeed:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"车辆超速"},emergencyBrake:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"车辆急刹"},antiDromic:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"车辆逆行"},illegalOccupation:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"违规占道"},trafficJam:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"交通拥堵"},construction:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"道路施工"},others:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/noPark@3x.png",name:"其他事件"},overWater:{icon:"",name:"涵洞积水"},cityConstruction:{icon:"",name:"市政施工"}},t.CarLabelMap={content:{carNumber:{text:"未知",size:10,color:"#ffffff",position:[5.5,4],fontFamily:"DINAlternate-Bold"},unit:{text:"km/h",size:8,color:"rgba(255,255,255,0.6)",position:[36,29],fontFamily:"DINAlternate-Bold"},speed:{text:"0",size:18,color:"#ffffff",position:[20,21],fontFamily:"DINAlternate-Bold",textAlign:"center"}},size:{width:60,height:50},netCar:{icon:"",color:"rgba(78,186,96,0.6)",fillColor:"#4eba60",strokeColor:"#64e679",bg:[{url:"/images/guangzhou/q-netcar-info-mini@3x.png",position:[0,0],size:[60,50]}]},robotaxi:{icon:"",color:"rgba(133,179,255,0.6)",fillColor:"#2c64ff",strokeColor:"#4a91fc",bg:[{url:"/images/guangzhou/q-robotaxi-info-mini@3x.png",position:[0,0],size:[60,50]}]},robocop:{icon:"",color:"rgba(47,160,229,0.6)",fillColor:"#2fa0e5",strokeColor:"#7eceff",bg:[{url:"/images/guangzhou/q-robocop-info-mini@3x.png",position:[0,0],size:[60,50]}]},robobus:{icon:"",color:"rgba(110,255,212,0.6)",fillColor:"#31b59e",strokeColor:"#6ee0be",bg:[{url:"/images/guangzhou/q-robobus-info-mini@3x.png",position:[0,0],size:[60,50]}]},minibus:{icon:"",color:"rgba(110,255,212,0.6)",fillColor:"#31b59e",strokeColor:"#6ee0be",bg:[{url:"/images/guangzhou/q-minibus-info-mini.png",position:[0,0],size:[60,50]}]},streetcar:{icon:"",color:"rgba(110,255,212,0.6)",fillColor:"#31b59e",strokeColor:"#6ee0be",bg:[{url:"/images/guangzhou/q-streetcar-info-mini.png",position:[0,0],size:[60,50]}]},offline:{icon:"",color:"#8F8F8F",fillColor:"#8F8F8F",strokeColor:"#8F8F8F",bg:[{url:"/images/guangzhou/offline-mini.png",position:[0,0],size:[60,50]}]}},t.quotaLabelConfig={content:{leftPass:{text:"0",size:20,color:"#fff",position:[84,59],textAlign:"center",fontFamily:"DINAlternate-Bold"},leftLine:{text:"0",size:20,color:"#fff",position:[84,89],textAlign:"center",fontFamily:"DINAlternate-Bold"},leftText:{text:"左转",size:12,color:"#fff",position:[84,35.5],textAlign:"center",fontWeight:"bolder",fontFamily:"PingFangSC-Semibold"},straightPass:{text:"0",size:20,color:"#fff",position:[126,59],textAlign:"center",fontFamily:"DINAlternate-Bold"},straightLine:{text:"0",size:20,color:"#fff",position:[126,89],textAlign:"center",fontFamily:"DINAlternate-Bold"},straightText:{text:"直行",size:12,color:"#fff",position:[126,35.5],textAlign:"center",fontWeight:"bolder",fontFamily:"PingFangSC-Semibold"},rightPass:{text:"0",size:20,color:"#fff",position:[168,59],textAlign:"center",fontFamily:"DINAlternate-Bold"},rightLine:{text:"0",size:20,color:"#fff",position:[168,89],textAlign:"center",fontFamily:"DINAlternate-Bold"},rightText:{text:"右转",size:12,color:"#fff",position:[168,35.5],fontWeight:"bolder",textAlign:"center",fontFamily:"PingFangSC-Semibold"}},bg:[{url:"/images/guangzhou/crossQuota-new@3x.png",position:[0,0],size:[198,124]}],activeBg:[{url:"/images/guangzhou/cross-active-bg.png",position:[66,12],size:[36,40]},{url:"/images/guangzhou/cross-active-bg.png",position:[108,12],size:[36,40]},{url:"/images/guangzhou/cross-active-bg.png",position:[150,12],size:[36,40]},{url:"/images/common/left.png",position:[76,15],size:[16,16]},{url:"/images/common/straight.png",position:[118,15],size:[16,16]},{url:"/images/common/right.png",position:[160,15],size:[16,16]}],size:{width:198,height:124}},t.areaLabelConfig={content:{header:{text:"科学城",size:20,color:"#ffffff",position:[19,8],fontFamily:"PingFang-SC-Regular"},slogan:{text:"底座贯通 数字枢纽",size:12,color:"#ffffff",position:[19,36],fontFamily:"PingFang-SC-Regular"},distance:{text:"53.8",size:30,color:"#ffffff",position:[20,80],fontFamily:"DINAlternate-Bold"},distanceUnit:{text:"里程(km)",size:12,color:"#D0D9F2",position:[20,117],fontFamily:"PingFang-SC-Regular"},side:{text:"58",size:30,color:"#ffffff",position:[103,80],fontFamily:"DINAlternate-Bold"},sideUnit:{text:"路侧点数",size:12,color:"#D0D9F2",position:[94,117],fontFamily:"PingFang-SC-Regular"},lamp:{text:"30",size:30,color:"#ffffff",position:[180,80],fontFamily:"DINAlternate-Bold"},lampUnit:{text:"红绿灯",size:12,color:"#D0D9F2",position:[176,117],fontFamily:"PingFang-SC-Regular"}},bg:[{url:"https://mapdata.bj.bcebos.com/images/guangzhou/areaLabel@shadow.png",position:[0,0],size:[310,224]}],size:{width:310,height:224}},t.style={crosswalk:{color:"#8BAFE9",opacity:1,offset:[0,0,.2],visible:!0},road:{color:"#5B77AF",opacity:1,offset:[0,0,.2],visible:!0},laneSolidWhite:{color:"#B9D4FF",opacity:1,width:2,offset:[0,0,.2],visible:!0},laneDottedWhite:{color:"#B9D4FF",opacity:1,width:2,dashSize:5,gapSize:5,offset:[0,0,.2],visible:!0},laneDottedYellow:{color:"#D7D089",opacity:1,width:2,dashSize:5,gapSize:5,offset:[0,0,.2],visible:!0},laneSolidYellow:{color:"#CFC77C",opacity:1,width:2,offset:[0,0,.2],visible:!0},roadEdge:{color:"#e5e2fa",opacity:1,offset:[0,0,.2],visible:!1},stopLine:{color:"#93B9F6",opacity:1,width:3,offset:[0,0,.2],visible:!0},river:{color:"#2E5A75",opacity:.6,offset:[0,0,-1],visible:!0},grass:{color:"#195F65",opacity:.3,offset:[0,0,0],visible:!0},linkTownshipRoad:{color:"#35456F",opacity:1,width:1,offset:[0,0,0],visible:!0},linkHightway:{color:"#4D6799",opacity:1,width:4,offset:[0,0,0],visible:!0},linkExpressway:{color:"#425986",opacity:1,width:4,offset:[0,0,.1],visible:!0},linkNPRoad:{color:"#354769",opacity:1,width:2,offset:[0,0,.1],visible:!0},linkCountyRoad:{color:"#35456F",opacity:1,width:2,offset:[0,0,.1],visible:!0},linkOther:{color:"#202E54",opacity:0,width:3,offset:[0,0,-9.9],visible:!0},region:{color:"#5472A3",opacity:1,width:1,offset:[0,0,.1],visible:!0},township:{color:"#0D60EE",opacity:1,width:4,offset:[0,0,.1],visible:!0},range:{color:"#092C71",opacity:.4,width:1,offset:[0,0,270],visible:!0},building:{color:"#324770",topColor:"#4e6495",opacity:.8,outline:!1,outlineColor:"#aaaaaa",transprent:!0,offset:[0,0,0],visible:!0,scale:[1,1,2]},pointlight:{color:"#FFFFFF",intensity:.3,distance:900,offset:[0,0,0],visible:!0},hemiLight:{color:"#fff",groundColor:"fff",intensity:1,offset:[0,0,0],visible:!0},directional:{color:"#fff",intensity:.4,offset:[0,0,0],visible:!0},back:{color:"#122246",opacity:1,offset:[0,0,.1],visible:!0},plane:{color:"#101F3a",opacity:1,offset:[749956,2566189,-2e3],visible:!0},mountain:{color:"#2A4352",width:1,visible:!0},other:{color:"#7ECEFC",offset:[0,0,.11],visible:!0},greenBelt:{color:"#195F65",offset:[0,0,.55],visible:!0},underpass:{color:"#2450A6",offset:[0,0,.1],visible:!0}},t.AnimateVertices={Guangzhoushi:[[752994.4,2528342,31504],[708269.27,2548079,26861],[709308,2592669.4,21144.2],[753383.8,2622512.2,24144.2],[801195.6,2582290.5,26144.2],[790844.5,2530099.8,28144.2],[752994.4,2528342,31504]],Guangzhou2Kexuecheng:[[752529.3,2552373.1,14625.41],[752769.3,2557343.5,3547.3],[751228,2558843.3,2762.3],[750758,2562909.9,724],[752994.4,2528342,31504]],Kecheng:[[750265.66,2564669.27,36],[750205.44,2564638.09,36],[750173.58,2564621.61,36],[750150.01,2564609.46,36],[750135.86,2564602.25,36],[750131.14,2564599.97,36],[750118.57,2564593.94,36],[750098.15,2564584.14,36],[750076.68,2564573.84,36],[750054.15,2564563.01,36],[750030.13,2564546.89,36],[750004.61,2564525.45,36],[749987.47,2564511.06,36],[749978.72,2564503.71,36],[749966.45,2564492.57,36],[749950.66,2564477.64,36],[749936.18,2564463.95,36],[749923,2564451.49,36],[749909.78,2564438.98,36],[749896.49,2564426.42,36],[749888.24,2564418.56,36],[749885.03,2564415.41,36],[749877.27,2564407.79,36],[749864.96,2564395.71,36],[749852.48,2564383.45,36],[749839.82,2564371.02,36],[749830.03,2564359.45,36],[749823.13,2564348.74,36],[749817.73,2564340.33,36],[749813.82,2564334.22,36],[749809.24,2564325.73,36],[749803.99,2564314.85,36],[749794.81,2564294.32,36],[749781.72,2564264.15,36],[749773.39,2564245.07,36],[749769.82,2564237.08,36],[749767.7,2564232.17,36],[749767.01,2564230.33,36],[749766.49,2564228.69,36],[749766.15,2564227.25,36],[749762.96,2564213.78,36],[749756.93,2564188.3,36],[749753.49,2564173.7,36],[749752.62,2564169.97,36],[749750.51,2564161.07,36],[749747.16,2564146.99,36],[749744.74,2564136.36,36],[749743.26,2564129.18,36],[749741.89,2564117.89,36],[749740.63,2564102.49,36],[749740.07,2564092.82,36],[749740.21,2564088.88,36],[749740.53,2564080.27,36],[749741.03,2564066.99,36],[749742.07,2564057.57,36],[749743.65,2564052,36],[749744.64,2564048.53,36],[749745.04,2564047.15,36],[749745.69,2564044.89,36],[749746.59,2564041.75,36],[749747.35,2564039.14,36],[749747.95,2564037.08,36],[749750.71,2564027.62,36],[749755.63,2564010.76,36],[749759.14,2563998.72,36],[749761.25,2563991.48,36],[749763.44,2563985.12,36],[749765.7,2563979.65,36],[749769.89,2563969.84,36],[749776.02,2563955.7,36],[749782.83,2563939.9,36],[749790.31,2563922.43,36],[749795.54,2563910.84,36],[749798.51,2563905.15,36],[749803.74,2563895.78,36],[749811.23,2563882.74,36],[749820.22,2563867.1,36],[749830.71,2563848.84,36],[749839.22,2563835.16,36],[749845.75,2563826.05,36],[749857.53,2563809.63,36],[749874.55,2563785.91,36],[749885.77,2563770.28,36],[749891.18,2563762.72,36],[749905.51,2563747.65,36],[749928.73,2563725.05,36],[749945.53,2563711.05,36],[749955.91,2563705.67,36],[749970.96,2563698.02,36],[749990.68,2563688.11,36],[750002.47,2563682.92,36],[750006.31,2563682.47,36],[750012.13,2563682.57,36],[750019.93,2563683.24,36],[750027.75,2563684.62,36],[750035.6,2563686.72,36],[750043.61,2563689.27,36],[750051.76,2563692.28,36],[750072.51,2563699.94,36],[750105.84,2563712.24,36],[750136.22,2563722.25,36],[750163.63,2563729.95,36],[750180.09,2563734.18,36],[750185.58,2563734.95,36],[750189.53,2563735.43,36],[750191.95,2563735.6,36],[750194,2563735.73,36],[750195.68,2563735.81,36],[750200.3,2563736.03,36],[750207.86,2563736.39,36],[750213.79,2563736.66,36],[750218.1,2563736.83,36],[750226.14,2563736.32,36],[750237.91,2563735.13,36],[750254.78,2563733.27,36],[750276.76,2563730.77,36],[750302.98,2563727.81,36],[750333.43,2563724.4,36],[750350.58,2563722.43,36],[750354.42,2563721.88,36],[750358.51,2563721.15,36],[750362.83,2563720.23,36],[750365.7,2563719.69,36],[750367.09,2563719.53,36],[750375.41,2563719.21,36],[750390.65,2563718.74,36],[750400.17,2563718.45,36],[750403.95,2563718.34,36],[750406.98,2563718.16,36],[750409.25,2563717.91,36],[750418.95,2563720.35,36],[750436.08,2563725.5,36],[750460.49,2563731.65,36],[750492.2,2563738.82,36],[750523.16,2563745.28,36],[750553.37,2563751.04,36],[750576.99,2563754.69,36],[750594.01,2563756.24,36],[750604.89,2563757.08,36],[750609.61,2563757.23,36],[750616.72,2563757.5,36],[750626.21,2563757.91,36],[750634.19,2563757.93,36],[750640.67,2563757.58,36],[750673.34,2563755.8,36],[750732.2,2563752.58,36],[750770.23,2563750.76,36],[750787.44,2563750.31,36],[750804.9,2563752.09,36],[750822.61,2563756.08,36],[750838.21,2563760.98,36],[750851.72,2563766.78,36],[750863.55,2563773.4,36],[750873.69,2563780.85,36],[750880.94,2563786.42,36],[750885.3,2563790.1,36],[750893.59,2563798.02,36],[750905.82,2563810.16,36],[750913.85,2563818.15,36],[750917.69,2563821.99,36],[750921.25,2563826.71,36],[750924.54,2563832.3,36],[750929.89,2563841.41,36],[750937.31,2563854.04,36],[750944.23,2563865.81,36],[750950.65,2563876.72,36],[750959.56,2563899.72,36],[750970.96,2563934.82,36],[750979.58,2563959.87,36],[750985.41,2563974.87,36],[750992.3,2563992.07,36],[751000.25,2564011.49,36],[751009.64,2564027.79,36],[751020.47,2564040.98,36],[751029.11,2564052.13,36],[751035.55,2564061.22,36],[751044.32,2564072.81,36],[751055.42,2564086.91,36],[751061.9,2564095.15,36],[751063.79,2564097.55,36],[751069.74,2564105.21,36],[751079.74,2564118.12,36],[751102.47,2564147.41,36],[751137.9,2564193.09,36],[751158.25,2564219.34,36],[751163.53,2564226.14,36],[751177.23,2564240.78,36],[751199.35,2564263.25,36],[751216.5,2564286.23,36],[751228.69,2564309.73,36],[751235.2,2564330.18,36],[751236.03,2564347.59,36],[751236.72,2564359.84,36],[751237.27,2564366.94,36],[751235.94,2564377.8,36],[751232.74,2564392.41,36],[751222.31,2564424.5,36],[751204.65,2564474.07,36],[751194.85,2564504.79,36],[751192.9,2564516.65,36],[751191.76,2564524.59,36],[751191.41,2564528.63,36],[751191.07,2564547.48,36],[751190.72,2564581.15,36],[751191.57,2564605.78,36],[751193.62,2564621.38,36],[751198.16,2564654.79,36],[751205.2,2564706.01,36],[751206.78,2564741.88,36],[751202.89,2564762.4,36],[751198.34,2564778.77,36],[751193.12,2564790.99,36],[751181.66,2564806.38,36],[751163.97,2564824.94,36],[751150.95,2564837.89,36],[751142.62,2564845.23,36],[751132.88,2564853.89,36],[751121.73,2564863.86,36],[751105.67,2564877.8,36],[751084.7,2564895.7,36],[751063.35,2564908.98,36],[751041.62,2564917.64,36],[751024.07,2564924.64,36],[751010.68,2564929.98,36],[750992.33,2564934.36,36],[750969.01,2564937.79,36],[750942.6,2564939.17,36],[750913.11,2564938.52,36],[750888.14,2564938.17,36],[750867.68,2564938.13,36],[750841.76,2564938,36],[750810.37,2564937.8,36],[750780.58,2564934.96,36],[750752.37,2564929.49,36],[750726.26,2564922.01,36],[750702.23,2564912.52,36],[750674.09,2564898.71,36],[750641.84,2564880.59,36],[750623.47,2564870.39,36],[750618.99,2564868.12,36],[750614.36,2564865.77,36],[750609.6,2564863.35,36],[750598.62,2564857.1,36],[750581.41,2564847.01,36],[750542.01,2564824.7,36],[750480.4,2564790.17,36],[750444.24,2564769.88,36],[750433.51,2564763.83,36],[750422.26,2564757.5,36],[750410.51,2564750.87,36],[750400.61,2564745.3,36],[750392.58,2564740.77,36],[750381.01,2564734.26,36],[750365.91,2564725.75,36],[750336.88,2564709.41,36],[750293.95,2564685.23,36],[750270.77,2564672.17,36],[750265.66,2564669.27,36]],Kexuecheng:[[749936.85,2560584.09,2348.57],[755295.51,2558380.93,2609.9],[761393.61,2562493.86,4083.8],[759456.4,2566009.68,4206.35],[756214.1,2567579.5,4116.52],[752057.04,2570118.54,3947.14],[745471.79,2568441.1,5479.5],[744596.59,2563181.04,5477.54]],Zhishicheng:[[758716.5,2580844.86,500],[759806.29,2580296.91,500],[760405,2580667.09,500],[760780.71,2580891.33,500],[761230.82,2581321.94,500],[761478.32,2581845.27,500],[760937.89,2582887.39,500],[759945.95,2583644.05,500],[759301.39,2583710.93,500],[758518.36,2583188.47,500],[757837.93,2582389.16,500],[758554.37,2580852.44,500]]},t.AnimateKey={taxi:[{key:{ctrlKey:!1,shiftKey:!0,code:"x"},id:"HQEV576"},{key:{ctrlKey:!1,shiftKey:!0,code:"t"},id:"HQEV578"},{key:{ctrlKey:!1,shiftKey:!0,code:"y"},id:"HQEV577"},{key:{ctrlKey:!1,shiftKey:!0,code:"o"},id:"MKZ067"}],bus:[{key:{ctrlKey:!1,shiftKey:!0,code:"b"},id:"LC9LC20E7LBLA6093"}],cop:[{key:{ctrlKey:!1,shiftKey:!0,code:"c"},id:"HQEV583"}],netcar:[{key:{ctrlKey:!1,shiftKey:!0,code:"n"},id:"粤ABW237"}],roadSide:[{key:{ctrlKey:!1,shiftKey:!0,code:"7"},id:33},{key:{ctrlKey:!1,shiftKey:!0,code:"3"},id:29},{key:{ctrlKey:!1,shiftKey:!0,code:"4"},id:31},{key:{ctrlKey:!1,shiftKey:!0,code:"5"},id:80},{key:{ctrlKey:!1,shiftKey:!0,code:"6"},id:122}]},t.areaSnMap={kexuecheng:["BDOF2008032G04","BDOF2008052G03","BDOF2008062G04","BDOF2008032G06","BDOF2008032G08","BDOF2008032G03","BDOF2008142G02","BDOF2006052G01","BDOF2006172G03","BDOF2008052G02","BDOF2008042G04","BDOF2008042G01","BDOF2008052G04","BDOF2008072G04","BDOF2008062G01","BDOF2008042G03","BDOF2006052G02","BDOF2008102G02","BDOF2006152G10","BDOF2008052G08","BDOF2008072G01","BDOF2008052G05","BDOF2008042G07","BDOF2008072G03","BDOF2008062G05","BDOF2008042G08","BDOF2008142G01","BDOF2008072G05","BDOF2008042G02","BDOF2008062G08","BDOF2008032G02","BDOF2008072G02","BDOF2006152G09","BDOF2008052G01","BDOF2008112G05","BDOF2008072G06","BDOF2008082G03","BDOF2006032G05","BDOF2008172G01","BDOF2008082G02","BDOF2008042G06","BDOF2008112G03","BDOF2006122G01","BDOF2008042G05","BDOF2006092G06","BDOF2006082G04","BDOF2006132G06","BDOF2008082G01","BDOF2008052G06","BDOF2008052G07","BDOF2006132G03","BDOF2008142G05","BDOF2008032G07","BDOF2006152G06","BDOF2006102G06","BDOF2008032G01","BDOF2006112G03","BDOF2006112G04"],shengwudao:["BDOF2006052G05","BDOF2006122G09","BDOF2006082G03","BDOF2006162G03","BDOF2006042G02","BDOF2006132G02","BDOF2006162G07","BDOF2006042G03","BDOF2006102G01","BDOF2006172G04","BDOF2006082G04","BDOF2006172G01","BDOF2008062G06","BDOF2006062G03","BDOF2006172G02","BDOF2006132G08","BDOF2006132G05","BDOF2006152G08","BDOF2006162G08","BDOF2006162G06","BDOF2006122G02","BDOF2006122G08","BDOF2006102G04","BDOF2006152G04","BDOF2008102G01"],zhishicheng:["BDOF2006032G01","BDOF2006092G05","BDOF2006092G07","BDOF2006062G06","BD0F2006082G02","BD0F2006052G03","BDOF2006052G06","BDOF2006042G04","BDOF2006112G02","BDOF2006112G01","BDOF2006032G03","BDOF2006152G01","BDOF2006122G03","BDOF2006092G09","BDOF2006106G05","BDOF2006062G02","BDOF2006162G02","BDOF2006062G07"]},t.specialSide=(r={2:["E78891815","E78891808","E78891886","E78891738"],28:["E80417197","E80417359","E80417313","E80417367"],29:["E79671219","E79671330","E80417379","E79671201"],32:["E78891751","E80417234","E80417259","E79671243"],34:["E80417258","E80417380","E80417289","E80417296"],37:["E78891949","E78891848","E78891978","E78891828"],40:["E80417223","E80417389","E80417216","E80417246"],54:["E80417229","E79671123","E79671147","E80417361"],80:["E79671136","E79671216","E79671162","E79671335"],85:["E78891941","E78891876","E78891750","E78891784"],122:["E78891910","E79671267","E79671176","E79671266"],71:["E79671328","E79671308","E79671196","E79671315"],72:["E79671290","E79671342","E79671319"],73:["E79671303","E79671177","E79671287"],74:["E79671246","E79671279","E79671149","E79671292"],75:["E78891854","E78891770","E79671208","E78891790"],76:["E79671124","E79671173","E79671128","E79671169"],77:["E79671248","E79671268","E79671272"],78:["E79671261","E79671276"],79:["D65068124","E78891874","E78891783","E80417373"]},(0,s.default)(r,"80",["E79671136","E79671127","E79671216"]),(0,s.default)(r,81,["E79671236","E79671271","E79671295"]),(0,s.default)(r,82,["E78891890","E78891961","E79671202"]),(0,s.default)(r,83,["E78891810","E79671194","E78891965","E79671142"]),(0,s.default)(r,84,["E79671256","E79671150","E79671225"]),(0,s.default)(r,"85",["E78891941","E78891876","E78891750","E78891784"]),(0,s.default)(r,86,["E78891950","E78891894","E78891902","E78891892"]),(0,s.default)(r,87,["E79671213","E79671343"]),(0,s.default)(r,88,["E78891839","E78891818"]),(0,s.default)(r,89,["E78891763","E78891736"]),r),t.cameraLabelMap=(o={E79671219:"西北朝东南",E79671330:"东北朝西南",E80417379:"东南朝西北",E79671201:"西南朝东北",E78891949:"东北朝西南",E78891848:"东南朝西北",E78891978:"西南朝东北",E78891828:"东北朝西南",E80417197:"西北朝东南",E80417359:"东北朝西南",E80417313:"西南朝东北",E80417367:"东南朝西北",E80417223:"北朝南",E80417389:"南朝北",E80417216:"西朝东",E80417246:"东朝西",E79671136:"西北朝东南",E79671216:"东南朝西北",E79671162:"西南朝东北",E79671335:"西北朝东南",E78891910:"南朝北",E79671267:"西朝东",E79671176:"北朝南",E79671266:"东朝西",E78891751:"北向南",E80417234:"南向北",E80417259:"东向西",E79671243:"西向东",E80417258:"西南向东北",E80417380:"东南向西北",E80417289:"西南向西北",E80417296:"东北向西南",E78891941:"北向南",E78891876:"东向西",E78891750:"南向北",E78891784:"西向东",E79671328:"西北向东南",E79671308:"东北向西南",E79671196:"东南向西北",E79671315:"西南向东北",E79671290:"东北向西",E79671342:"南向北",E79671319:"西向东北",E79671303:"东南向西北",E79671177:"西南向东北",E79671287:"西北向东南",E79671246:"东北向西南",E79671279:"东南向西北",E79671149:"西南向东北",E79671292:"西北向东南",E78891854:"东北向西南",E78891770:"东南向西北",E79671208:"西南向东北",E78891790:"西北向东南",E79671124:"东北向西南",E79671173:"东南向西北",E79671128:"西南向东北",E79671169:"西北向东南",E79671248:"西北向东南",E79671268:"东北向西南",E79671272:"东南向西北",E79671261:"东北向西南",E79671276:"西南向东北",D65068124:"西北向东南",E78891874:"东北向西南",E78891783:"东南向西北",E80417373:"西南向东北"},(0,s.default)(o,"E79671136","西北向东南"),(0,s.default)(o,"E79671127","东北向西南"),(0,s.default)(o,"E79671216","东南向西北"),(0,s.default)(o,"E79671236","北向西南"),(0,s.default)(o,"E79671271","东南向西北"),(0,s.default)(o,"E79671295","西南向北"),(0,s.default)(o,"E78891890","西北向东南"),(0,s.default)(o,"E78891961","东北向西南"),(0,s.default)(o,"E79671202","西南向东北"),(0,s.default)(o,"E78891810","西北向东南"),(0,s.default)(o,"E79671194","东北向西南"),(0,s.default)(o,"E78891965","东南向西北"),(0,s.default)(o,"E79671142","西南向东北"),(0,s.default)(o,"E79671256","东北向西南"),(0,s.default)(o,"E79671150","西南向东北"),(0,s.default)(o,"E79671225","西北向东南"),(0,s.default)(o,"E78891941","西北向东南"),(0,s.default)(o,"E78891876","东北向西南"),(0,s.default)(o,"E78891750","东南向西北"),(0,s.default)(o,"E78891784","西南向东北"),(0,s.default)(o,"E78891950","西北向东南"),(0,s.default)(o,"E78891894","东北向西南"),(0,s.default)(o,"E78891902","东南向西北"),(0,s.default)(o,"E78891892","西南向东北"),(0,s.default)(o,"E79671213","东南向西北"),(0,s.default)(o,"E79671343","西北向东南"),(0,s.default)(o,"E78891839","东南向西北"),(0,s.default)(o,"E78891818","西北向东南"),(0,s.default)(o,"E78891763","东北向西南"),(0,s.default)(o,"E78891736","西南向东北"),o),t.modelMap={path:"https://mapdata.bj.bcebos.com/model/guangzhou/",names:["guojijiaoliuzhongxin","shenxiezhongxin","haisizhongxin","zhishichengdasha","zhishicheng","huacheng","rencaidasha","linglizhongxin","guangzhouta","pazhouzhanguan","rencaidasha","tianhetiyuzhongxin","zhongxindasha","liededaqiao"],commonPath:"https://mapdata.bj.bcebos.com/model/common/",commonNames:["trafficLights","robobus","robocop","robotaxi","netCar","car","bus","truck","sanlunche","pedestrian","diandongche","bicycle","motorcycle","traffic_cone"]},t.allRscu=["BDOF2006052G02","BDOF2008042G03","BDOF2008062G05","BDOF2008112G08","BDOF2006112G02","BDOF2006122G08","BDOF2006032G01","BDOF2006092G05","BDOF2006092G07","BDOF2006062G06","BD0F2006082G02","BD0F2006052G03","BDOF2006052G06","BDOF2006042G04","BDOF2006032G02","BDOF2006112G02","BDOF2006112G01","BDOF2006032G03","BDOF2006152G01","BDOF2006122G03","BDOF2006092G09","BDOF2006106G05","BDOF2006062G02","BDOF2006162G02","BDOF2006062G07"],t.showLampRoads=[2,22,28,29,31,33,34,37,39,40,48,50,54,60,61,85,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89],t.branchList=[{type:"Feature",properties:{id:"BR_0051_LB_NB1520696414_NB1520695192_1_1",name:"科学大道与开泰大道交叉路口_东北_进口",direction_type:"EAST_NORTH",branch_flow_type:"IN",se_bearing:"63.68299750732939",road_name:"科学大道",policy_direction_type:"DIRECTION_UNKNOWN",id_bmap:"BR_0051_LB_NB1520696414_NB1520695192_1_1",lane_count:5},geometry:{type:"Point",coordinates:[750407.3191957502,2564306.7609752836]}},{type:"Feature",properties:{id:"BR_0051_LB_NB1569759482_NB1520709417_1_1",name:"科学大道与开泰大道交叉路口_西北_进口",direction_type:"WEST_NORTH",branch_flow_type:"IN",se_bearing:"331.92753330120075",road_name:"开泰大道",policy_direction_type:"NORTH",id_bmap:"BR_0051_LB_NB1569759482_NB1520709417_1_1",lane_count:5},geometry:{type:"Point",coordinates:[750363.0420761323,2564300.0816472773]}},{type:"Feature",properties:{id:"BR_0051_LB_NB1520696405_NB1520691717_1_1",name:"科学大道与开泰大道交叉路口_西南_进口",direction_type:"WEST_SOUTH",branch_flow_type:"IN",se_bearing:"241.96813868088412",road_name:"科学大道",policy_direction_type:"DIRECTION_UNKNOWN",id_bmap:"BR_0051_LB_NB1520696405_NB1520691717_1_1",lane_count:5},geometry:{type:"Point",coordinates:[750370.571152442,2564254.3116293205]}},{type:"Feature",properties:{id:"BR_0051_LB_NB1557371532_NB1520679016_1_1",name:"科学大道与开泰大道交叉路口_东南_进口",direction_type:"EAST_SOUTH",branch_flow_type:"IN",se_bearing:"152.448295687714",road_name:"开泰大道",policy_direction_type:"SOUTH",id_bmap:"BR_0051_LB_NB1557371532_NB1520679016_1_1",lane_count:5},geometry:{type:"Point",coordinates:[750414.680716691,2564262.3132684845]}}],t.areaViewMap={kexuecheng:{x:113.4927422,y:23.1314917,z:1954.242823902224,Heading:31.31161473486359,pitch:-.37711634128245636,roll:0},zhishicheng:{x:113.53972349890176,y:23.30363500220818,z:1e3,Heading:0,pitch:-.4023617830776878,roll:0},changzhoudao:{x:113.4476457,y:23.0850618,z:1000.6869576355,Heading:2.366143861546783,pitch:-.3490658503988659,roll:0},shengwudao:{x:113.3798893,y:23.0577214,z:746.2367990576948,Heading:40.62942396730874,pitch:-.3799213903708154,roll:0}},t.footerConfig=[{name:"科学城",key:"kexuecheng"},{name:"知识城",key:"zhishicheng"},{name:"生物岛",key:"shengwudao"},{name:"长洲岛",key:"changzhoudao"}],t.cameraParamsMap={E79671201:{translation:{x:750349.3898429743,y:2564250.806828454,z:21.40930605672315},rotation:{w:-.5509728929158126,x:.6575073641678408,y:-.3924458362497523,z:.3318119994021788}},E79671219:{translation:{x:750357.8229242989,y:2564318.92800197,z:21.65464242738171},rotation:{w:.175394054073218,x:-.1883251550597565,y:.7464749114641825,z:-.6136332522949035}},E79671330:{translation:{x:750426.2274356193,y:2564313.103456743,z:21.1726791873593},rotation:{w:.2983716352412231,x:-.3365855284305233,y:-.6860055501953877,z:.5719099006274917}},E80417379:{translation:{x:750414.5004558425,y:2564251.077546372,z:20.3138278779021},rotation:{w:.628566251393748,x:-.7347990389035597,y:-.1855271032692795,z:.17479855259048}},E78891749:{translation:{x:750473.8240381168,y:2564730.760482965,z:27.23876874344353},rotation:{w:.6224134614340023,x:-.7325919050864496,y:-.2000533888693523,z:.1894445175491703}},E78891917:{translation:{x:750410.4404344261,y:2564741.840769304,z:26.83316553288223},rotation:{w:-.5532717139550136,x:.6464119296132805,y:-.3918509239109135,z:.3499926873822941}},E80417329:{translation:{x:750423.8612595171,y:2564809.202775337,z:28.25206550344162},rotation:{w:.1673326727213846,x:-.1834688933365453,y:.7456248126745965,z:-.6183709085506485}},E78891829:{translation:{x:750481.9582975848,y:2564793.226541827,z:29.0004159929526},rotation:{w:.3281246306898712,x:-.3957915262261405,y:-.6550516859504277,z:.5537062246676663}},E80417258:{translation:{x:750231.2359228979,y:2564656.946781343,z:23.43892675244007},rotation:{w:.3142274216558389,x:-.3682607373906067,y:-.6746726000564405,z:.5571912055202706}},E80417249:{translation:{x:750218.8845861439,y:2564592.786740857,z:23.35716720677192},rotation:{w:.6286035112792816,x:-.7440616634427606,y:-.1779432178099869,z:.1398787969549983}},E80417281:{translation:{x:750152.5591187498,y:2564601.480407546,z:23.56875211002254},rotation:{w:-.5553998703192276,x:.6653220023531772,y:-.3800796157208455,z:.3231363534912758}},E80417384:{translation:{x:750167.0816891566,y:2564663.468059819,z:23.740458598626},rotation:{w:.1651643074355768,x:-.193166229580092,y:.7365216244354177,z:-.6268520208455509}},D65068124:{translation:{x:759235.6177472206,y:2581463.421138843,z:41.77928562554839},rotation:{w:.2111123400978603,x:-.2605480532846631,y:-.7186964870517508,z:.6091154663013004}},E78891874:{translation:{x:759258.9953157121,y:2581395.742479967,z:41.65352446534846},rotation:{w:.57698141309271,x:-.6930945690772761,y:-.3197925911861428,z:.2905943321601043}},E78891783:{translation:{x:759195.1082661626,y:2581371.415572409,z:42.17683088345624},rotation:{w:.6141218435262924,x:-.7362633735353603,y:.224320424478331,z:-.174502015048709}},E80417373:{translation:{x:759171.1631743871,y:2581443.450116104,z:42.08939445143604},rotation:{w:.2624194422365959,x:-.3092724403636871,y:.704807154617646,z:-.582008134623135}}},t.sideLabelConfig={content:{id:{text:"0",size:16,color:"#fff",position:[23,4],textAlign:"left",fontFamily:"HyperspaceRace-Bold"}},bg:[{url:"/images/guangzhou/sideLabel@3x.png",position:[0,0],size:[60,22]}],activeBg:[{url:"/images/guangzhou/sideLabel@3x.png",position:[0,0],size:[60,22]}],size:{width:60,height:22}},t.sideBiggerLabelConfig={content:{id:{text:"0",size:14,color:"#fff",position:[20,6],textAlign:"left",fontFamily:"HyperspaceRace-Bold"},location1:{text:"生物岛国际公寓+",size:12,color:"#fff",position:[12,28.81],textAlign:"left",fontFamily:"FZLTZHK--GBK1-0"},location2:{text:"星岛环南路",size:12,color:"#fff",position:[12,44.81],textAlign:"left",fontFamily:"FZLTZHK--GBK1-0"}},bg:[{url:"/images/guangzhou/sideBiggerLabel@3x.png",position:[0,0],size:[120,67.83]}],activeBg:[{url:"/images/guangzhou/sideBiggerLabel@3x.png",position:[0,0],size:[120,67.83]}],size:{width:120,height:67.83}},t.crossConfig=[{childrenLabel:"关注度最高路口",childrenValue:1,label:"科学大道+映日路/揽月路",value:32}],t.fonts=[{name:"DINAlternate-Bold",url:"https://mapdata.bj.bcebos.com/fonts/DINAlternateBold.ttf"},{name:"PingFang-SC-Regular",url:"https://mapdata.bj.bcebos.com/fonts/PingFang-SC-Regular.ttf"},{name:"PingFangSC-Semibold",url:"https://mapdata.bj.bcebos.com/fonts/PingFang-SC-Semibold.ttf"},{name:"HyperspaceRace-Bold",url:"https://mapdata.bj.bcebos.com/fonts/FontsFree-Net-HyperspaceRace-Bold.ttf"},{name:"FZZYJW--GB1-0",url:"https://mapdata.bj.bcebos.com/fonts/FZZYJW--GB1-0.ttf"},{name:"FZLTZHK--GBK1-0",url:"https://mapdata.bj.bcebos.com/fonts/FZLTZHK--GBK1-0.TTF"},{name:"Detail-icon",url:"https://mapdata.bj.bcebos.com/fonts/detailIcon.ttf"}]},function(e,t,n){e.exports={default:n(335),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(22),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var i=a(n(337)),r=a(n(126)),o=a(n(22));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(43),r=n(158),o=n(114),a=Object.defineProperty;t.f=n(42)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hasClass=f,t.addClass=function(e,t){if(!e)return;for(var n=e.className,i=(t||"").split(" "),r=0,o=i.length;r<o;r++){var a=i[r];a&&(e.classList?e.classList.add(a):f(e,a)||(n+=" "+a))}e.classList||(e.className=n)},t.removeClass=function(e,t){if(!e||!t)return;for(var n=t.split(" "),i=" "+e.className+" ",r=0,o=n.length;r<o;r++){var a=n[r];a&&(e.classList?e.classList.remove(a):f(e,a)&&(i=i.replace(" "+a+" "," ")))}e.classList||(e.className=(i||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""))},t.setStyle=function e(t,n,r){if(!t||!n)return;if("object"===(void 0===n?"undefined":i(n)))for(var o in n)n.hasOwnProperty(o)&&e(t,o,n[o]);else"opacity"===(n=u(n))&&c<9?t.style.filter=isNaN(r)?"":"alpha(opacity="+100*r+")":t.style[n]=r};var r,o=n(31);var a=((r=o)&&r.__esModule?r:{default:r}).default.prototype.$isServer,s=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,c=a?0:Number(document.documentMode),u=function(e){return e.replace(s,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(l,"Moz$1")},h=t.on=!a&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},d=t.off=!a&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};t.once=function(e,t,n){h(e,t,(function i(){n&&n.apply(this,arguments),d(e,t,i)}))};function f(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}var p=t.getStyle=c<9?function(e,t){if(!a){if(!e||!t)return null;"float"===(t=u(t))&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(e){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}}:function(e,t){if(!a){if(!e||!t)return null;"float"===(t=u(t))&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(n){return e.style[t]}}};var m=t.isScroll=function(e,t){if(!a)return p(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)};t.getScrollContainer=function(e,t){if(!a){for(var n=e;n;){if([window,document,document.documentElement].includes(n))return window;if(m(n,t))return n;n=n.parentNode}return n}},t.isInContainer=function(e,t){if(a||!e||!t)return!1;var n=e.getBoundingClientRect(),i=void 0;return i=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=Object.prototype,r=i.toString,o=i.hasOwnProperty,a=new Map;function s(e,t){try{return function e(t,n){if(t===n)return!0;var i=r.call(t),a=r.call(n);if(i!==a)return!1;switch(i){case"[object Array]":if(t.length!==n.length)return!1;case"[object Object]":if(l(t,n))return!0;var s=Object.keys(t),c=Object.keys(n),u=s.length;if(u!==c.length)return!1;for(var h=0;h<u;++h)if(!o.call(n,s[h]))return!1;for(h=0;h<u;++h){var d=s[h];if(!e(t[d],n[d]))return!1}return!0;case"[object Error]":return t.name===n.name&&t.message===n.message;case"[object Number]":if(t!=t)return n!=n;case"[object Boolean]":case"[object Date]":return+t==+n;case"[object RegExp]":case"[object String]":return t==""+n;case"[object Map]":case"[object Set]":if(t.size!==n.size)return!1;if(l(t,n))return!0;for(var f=t.entries(),p="[object Map]"===i;;){var m=f.next();if(m.done)break;var v=m.value,g=v[0],y=v[1];if(!n.has(g))return!1;if(p&&!e(y,n.get(g)))return!1}return!0}return!1}(e,t)}finally{a.clear()}}function l(e,t){var n=a.get(e);if(n){if(n.has(t))return!0}else a.set(e,n=new Set);return n.add(t),!1}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return d}));var i=n(27),r=n(1),o=n(11),a=n(5),s=n(70),l=n(8),c=n(71);function u(e,t){return new f(e,t).parseDocument()}function h(e,t){var n=new f(e,t);n.expectToken(a.a.SOF);var i=n.parseValueLiteral(!1);return n.expectToken(a.a.EOF),i}function d(e,t){var n=new f(e,t);n.expectToken(a.a.SOF);var i=n.parseTypeReference();return n.expectToken(a.a.EOF),i}var f=function(){function e(e,t){var n=Object(s.b)(e)?e:new s.a(e);this._lexer=new c.a(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(a.a.NAME);return{kind:r.a.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:r.a.DOCUMENT,definitions:this.many(a.a.SOF,this.parseDefinition,a.a.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(a.a.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(a.a.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(a.a.BRACE_L))return{kind:r.a.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(a.a.NAME)&&(t=this.parseName()),{kind:r.a.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(a.a.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(a.a.PAREN_L,this.parseVariableDefinition,a.a.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:r.a.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(a.a.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(a.a.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(a.a.DOLLAR),{kind:r.a.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:r.a.SELECTION_SET,selections:this.many(a.a.BRACE_L,this.parseSelection,a.a.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(a.a.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,i=this.parseName();return this.expectOptionalToken(a.a.COLON)?(e=i,t=this.parseName()):t=i,{kind:r.a.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(a.a.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(a.a.PAREN_L,t,a.a.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(a.a.COLON),{kind:r.a.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:r.a.ARGUMENT,name:this.parseName(),value:(this.expectToken(a.a.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(a.a.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(a.a.NAME)?{kind:r.a.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:r.a.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:r.a.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:r.a.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case a.a.BRACKET_L:return this.parseList(e);case a.a.BRACE_L:return this.parseObject(e);case a.a.INT:return this._lexer.advance(),{kind:r.a.INT,value:t.value,loc:this.loc(t)};case a.a.FLOAT:return this._lexer.advance(),{kind:r.a.FLOAT,value:t.value,loc:this.loc(t)};case a.a.STRING:case a.a.BLOCK_STRING:return this.parseStringLiteral();case a.a.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:r.a.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:r.a.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:r.a.NULL,loc:this.loc(t)};default:return{kind:r.a.ENUM,value:t.value,loc:this.loc(t)}}case a.a.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:r.a.STRING,value:e.value,block:e.kind===a.a.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:r.a.LIST,values:this.any(a.a.BRACKET_L,(function(){return t.parseValueLiteral(e)}),a.a.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:r.a.OBJECT,fields:this.any(a.a.BRACE_L,(function(){return t.parseObjectField(e)}),a.a.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(a.a.COLON),{kind:r.a.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(a.a.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(a.a.AT),{kind:r.a.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(a.a.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(a.a.BRACKET_R),e={kind:r.a.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(a.a.BANG)?{kind:r.a.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:r.a.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===a.a.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(a.a.STRING)||this.peek(a.a.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),i=this.many(a.a.BRACE_L,this.parseOperationTypeDefinition,a.a.BRACE_R);return{kind:r.a.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(a.a.COLON);var n=this.parseNamedType();return{kind:r.a.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),i=this.parseDirectives(!0);return{kind:r.a.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),a=this.parseFieldsDefinition();return{kind:r.a.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:o,fields:a,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(a.a.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(a.a.AMP)||this.peek(a.a.NAME));return t}return this.delimitedMany(a.a.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(a.a.BRACE_L)&&this._lexer.lookahead().kind===a.a.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(a.a.BRACE_L,this.parseFieldDefinition,a.a.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(a.a.COLON);var o=this.parseTypeReference(),s=this.parseDirectives(!0);return{kind:r.a.FIELD_DEFINITION,description:t,name:n,arguments:i,type:o,directives:s,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(a.a.PAREN_L,this.parseInputValueDef,a.a.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(a.a.COLON);var i,o=this.parseTypeReference();this.expectOptionalToken(a.a.EQUALS)&&(i=this.parseValueLiteral(!0));var s=this.parseDirectives(!0);return{kind:r.a.INPUT_VALUE_DEFINITION,description:t,name:n,type:o,defaultValue:i,directives:s,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),a=this.parseFieldsDefinition();return{kind:r.a.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:o,fields:a,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),i=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:r.a.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:o,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(a.a.EQUALS)?this.delimitedMany(a.a.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),i=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:r.a.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:o,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(a.a.BRACE_L,this.parseEnumValueDefinition,a.a.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseDirectives(!0);return{kind:r.a.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),i=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:r.a.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:o,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(a.a.BRACE_L,this.parseInputValueDef,a.a.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===a.a.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(a.a.BRACE_L,this.parseOperationTypeDefinition,a.a.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:r.a.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:r.a.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===o.length)throw this.unexpected();return{kind:r.a.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:o,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===o.length)throw this.unexpected();return{kind:r.a.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseUnionMemberTypes();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:r.a.UNION_TYPE_EXTENSION,name:t,directives:n,types:i,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:r.a.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:r.a.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(a.a.AT);var n=this.parseName(),i=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var s=this.parseDirectiveLocations();return{kind:r.a.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:o,locations:s,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(a.a.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==l.a[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new o.a(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw Object(i.a)(this._lexer.source,t.start,"Expected ".concat(m(e),", found ").concat(p(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==a.a.NAME||t.value!==e)throw Object(i.a)(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(p(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===a.a.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return Object(i.a)(this._lexer.source,t.start,"Unexpected ".concat(p(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var i=[];!this.expectOptionalToken(n);)i.push(t.call(this));return i},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i}return[]},t.many=function(e,t,n){this.expectToken(e);var i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function p(e){var t=e.value;return m(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function m(e){return Object(c.b)(e)?'"'.concat(e,'"'):e}},function(e,t,n){"use strict";n.r(t),n.d(t,"LineSegmentsGeometry",(function(){return a}));var i,r,o=n(0),a=function(){o.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new o.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new o.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};a.prototype=Object.assign(Object.create(o.InstancedBufferGeometry.prototype),{constructor:a,isLineSegmentsGeometry:!0,applyMatrix4:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new o.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new o.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new o.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new o.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new o.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new o.InterleavedBufferAttribute(n,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new o.WireframeGeometry(e.geometry)),this},fromLineSegments:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},computeBoundingBox:(r=new o.Box3,function(){null===this.boundingBox&&(this.boundingBox=new o.Box3);var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),r.setFromBufferAttribute(t),this.boundingBox.union(r))}),computeBoundingSphere:(i=new o.Vector3,function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),null===this.boundingBox&&this.computeBoundingBox();var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){var n=this.boundingSphere.center;this.boundingBox.getCenter(n);for(var r=0,a=0,s=e.count;a<s;a++)i.fromBufferAttribute(e,a),r=Math.max(r,n.distanceToSquared(i)),i.fromBufferAttribute(t,a),r=Math.max(r,n.distanceToSquared(i));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}),toJSON:function(){},applyMatrix:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}})},function(e,t,n){var i=n(51),r=n(76);e.exports=n(42)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EVENT_TYPE_SERVICE={trafficAccident:"trafficAccident",dangerousDrivingBehaviuor_OVERSPEED:"overSpeed",dangerousDrivingBehaviuor_EMERGENCY_BRAKING:"brake",dangerousDrivingBehaviuor_ANTIDROMIC:"reverse",illegalOccupation:"illegalOccupation",trafficJam:"trafficJam",construction:"construction",others:"others"},t.EVENT_TYPE={trafficAccident:{eventName:"交通事故",key:"trafficAccident",serviceKey:"trafficAccident",shapeOnMap:"point"},overSpeed:{eventName:"车辆超速",key:"overSpeed",serviceKey:"dangerousDrivingBehaviuor_OVERSPEED",shapeOnMap:"point"},brake:{eventName:"车辆急刹",key:"brake",serviceKey:"dangerousDrivingBehaviuor_EMERGENCY_BRAKING",shapeOnMap:"point"},reverse:{eventName:"车辆逆行",key:"reverse",serviceKey:"dangerousDrivingBehaviuor_ANTIDROMIC",shapeOnMap:"point"},illegalOccupation:{eventName:"违章占道",key:"illegalOccupation",serviceKey:"illegalOccupation",shapeOnMap:"point"},trafficJam:{eventName:"交通拥堵",key:"trafficJam",serviceKey:"trafficJam",shapeOnMap:"line"},construction:{eventName:"道路施工",key:"construction",serviceKey:"construction",shapeOnMap:"region"},others:{eventName:"其他事件",key:"others",serviceKey:"others",shapeOnMap:"point"}},t.ROAD_TYPE={10:{name:"城市直路",priority:100},11:{name:"城市大桥",priority:90},12:{name:"城市隧道",priority:80},13:{name:"城市十字路口",priority:70},14:{name:"城市丁字路口",priority:60},20:{name:"高速直路",priority:50},21:{name:"高速大桥",priority:40},22:{name:"高速隧道",priority:30},23:{name:"高速匝道口",priority:20},0:{name:"其他",priority:0}},t.EVENT_SUB_TYPE_SERVICE={trafficControl:"trafficControl",speedLimit:"speedLimit",slowDown:"slowDown",tidalLine:"tidalLine",accidentSection:"accidentSection",specialLane:"specialLane",impasse:"impasse",danger:"danger",heightLimit:"heightLimit",widthLimit:"widthLimit",noTooting:"noTooting",bridge:"bridge",tunnel:"tunnel",speedLimitMin:"speedLimitMin",recommendedSpeedLimit:"recommendedSpeedLimit"},t.EVENT_SUB_TYPE={trafficControl:{eventName:"交通管制",key:"trafficControl",serviceKey:"trafficControl",shapeOnMap:"point"},speedLimit:{eventName:"限速",key:"speedLimit",serviceKey:"speedLimit",shapeOnMap:"point"},slowDown:{eventName:"减速慢行",key:"slowDown",serviceKey:"slowDown",shapeOnMap:"point"},tidalLine:{eventName:"潮汐车道",key:"tidalLine",serviceKey:"tidalLine",shapeOnMap:"point"},accidentSection:{eventName:"事故易发路段",key:"accidentSection",serviceKey:"accidentSection",shapeOnMap:"point"},specialLane:{eventName:"专用车道",key:"specialLane",serviceKey:"specialLane",shapeOnMap:"point"},impasse:{eventName:"不可通行",key:"impasse",serviceKey:"impasse",shapeOnMap:"point"},danger:{eventName:"注意危险",key:"danger",serviceKey:"danger",shapeOnMap:"point"},heightLimit:{eventName:"限高",key:"heightLimit",serviceKey:"heightLimit",shapeOnMap:"point"},widthLimit:{eventName:"限宽",key:"widthLimit",serviceKey:"widthLimit",shapeOnMap:"point"},noTooting:{eventName:"禁止鸣笛",key:"noTooting",serviceKey:"noTooting",shapeOnMap:"point"},bridge:{eventName:"桥梁",key:"bridge",serviceKey:"bridge",shapeOnMap:"point"},tunnel:{eventName:"隧道",key:"tunnel",serviceKey:"tunnel",shapeOnMap:"point"},speedLimitMin:{eventName:" 最低限速",key:"speedLimitMin",serviceKey:"speedLimitMin",shapeOnMap:"point"},recommendedSpeedLimit:{eventName:"建议限速",key:"recommendedSpeedLimit",serviceKey:"recommendedSpeedLimit",shapeOnMap:"point"}},t.LAMP_STATUS={red:[21,31],yellow:[22,41],green:[23],others:[11,0]},t.ROAD_FLOW_DIRECTION={reverse:{codes:[4,9,14,19,24,29,34,39],priority:10,key:"reverse"},left:{codes:[2,7,12,17,22,27,32,37],priority:20,key:"left"},leftAwait:{codes:[102,107,112,117,122,127,132,137],priority:30,key:"leftAwait"},forward:{codes:[1,6,11,16,21,26,31,36],priority:40,key:"forward"},forwardAwait:{codes:[101,106,111,116,121,126,131,136],priority:50,key:"forwardAwait"},right:{codes:[3,8,13,18,23,28,33,38],priority:60,key:"right"},preserve:{codes:[5,10,15,20,25,30,35,40],priority:70,key:"preserve"}},t.CAR_TYPE={0:{name:"未知障碍物"},1:{name:"未知可移动障碍物"},2:{name:"未知不可移动障碍物"},3:{name:"轿车",key:"newcar",labelOffset:[0,0,2]},4:{name:"面包车",typeName:"轿车",key:"newcar",labelOffset:[0,0,2]},5:{name:"卡车",key:"newtruck",labelOffset:[0,0,4]},6:{name:"大巴",key:"newbus",labelOffset:[0,0,4]},7:{name:"自行车",typeName:"非机动车",key:"newbicycle",labelOffset:[0,0,2]},8:{name:"摩托车",typeName:"非机动车",key:"newmotorcycle",labelOffset:[0,0,2]},9:{name:"三轮车",typeName:"非机动车",key:"newtricycle",labelOffset:[0,0,2]},10:{name:"行人",typeName:"非机动车",key:"pedestrian",labelOffset:[0,0,2]},11:{name:"交通锥",key:"trafficcone",labelOffset:[0,0,1]}},t.EVENT_TRAFFIC_LIST=["accidentSection","bridge","construction","heightLimit","impasse","noParking","noTooting","others","recommendedSpeedLimit","slowDown","specialLane","speedLimit","speedLimitMin","tidalLine","trafficAccident","trafficControl","trafficJam","trafficLight","tunnel","widthLimit"],t.ELEMENT_TYPE={4:{color:"#FFF86A"},3:{color:"#FFB949"},2:{color:"#FC707C"},1:{color:"#E585FF"},default:{color:"#DAE9FF"}},t.CAR_EVENT_LIST=["antiDromic","overSpeed","emergencyBrake","illegalOccupation"],t.TRAFFIC_EVENT_LABEL_MAP={trafficJam:"交通拥堵",impasse:"不可通行",trafficAccident:"交通事故",construction:"道路施工",trafficControl:"交通管制",speedLimit:"限速",slowDown:"减速慢行",widthLimit:"限宽",heightLimit:"限高",tidalLine:"潮汐车道",accidentSection:"事故易发路段",specialLane:"专用车道",danger:"注意危险",noTooting:"禁止鸣笛",noParking:"禁止停车",bridge:"桥梁",tunnel:"隧道",speedLimitMin:"最低限速",recommendedSpeedLimit:"建议限速",antiDromic:"车辆逆行",overSpeed:"车辆超速",emergencyBrake:"车辆急刹",illegalOccupation:"车辆违章占道"}},function(e,t,n){"use strict";function i(e,t,n){this.$children.forEach((function(r){r.$options.componentName===e?r.$emit.apply(r,[t].concat(n)):i.apply(r,[e,t].concat([n]))}))}t.__esModule=!0,t.default={methods:{dispatch:function(e,t,n){for(var i=this.$parent||this.$root,r=i.$options.componentName;i&&(!r||r!==e);)(i=i.$parent)&&(r=i.$options.componentName);i&&i.$emit.apply(i,[t].concat(n))},broadcast:function(e,t,n){i.call(this,e,t,n)}}}},function(e,t,n){e.exports={default:n(262),__esModule:!0}},function(e,t,n){var i=n(86);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ws=t.heartCheck=void 0;var i=u(n(13)),r=u(n(24)),o=u(n(38)),a=u(n(39)),s=u(n(19)),l=u(n(20)),c=u(n(128));function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{needToken:!0};(0,s.default)(this,e),this.lockReconnect=!1,this.connectNumber=0,this.ws=null,this.max=null,this.beforeReconnect=null,this.disposeStatus=!1,this.needToken=t.needToken,this.bindObj=null,this.recentMessage=null}return(0,l.default)(e,[{key:"reconnect",value:function(e,t){var n=this;this.lockReconnect||this.disposeStatus||(this.lockReconnect=!0,this.connectNumber++,setTimeout((0,a.default)(o.default.mark((function i(){var r,a,s,l,c;return o.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("重连中, 请稍候",n.ws),n.lockReconnect=!1,r=n.ws.onmessage,i.next=5,n.connect(e,t,r);case 5:a=i.sent,n.bindObj&&(s=n.bindObj,l=s.obj,c=s.key,l[c]=a,n.recentMessage&&a.send(n.recentMessage));case 7:case"end":return i.stop()}}),i,n)}))),2e3))}},{key:"connect",value:function(e,t,n){var o=this;return new r.default((function(r,a){var s=window.localStorage.getItem("v2x3DToken");if(s||!o.needToken){var l=(0,i.default)({},t);o.needToken&&(l.token=JSON.parse(s).token);var u=c.default.stringify(l),h=new WebSocket(decodeURIComponent(e+"?"+u));o.ws=h,h.onopen=function(){console.log("WebSocket=>onopen"),o.connectNumber=0,r(h)},h.onerror=function(){(!o.max||o.connectNumber<=o.max)&&(o.beforeReconnect&&o.beforeReconnect(),o.reconnect(e,t)),a(h)},h.onclose=function(){(!o.max||o.connectNumber<=o.max)&&(o.beforeReconnect&&o.beforeReconnect(),o.reconnect(e,t)),a(h)},n&&(h.onmessage=n)}else console.log("token不存在，请刷新页面")}))}},{key:"dispose",value:function(){this.disposeStatus=!0,this.ws.onclose=function(){},this.ws.onerror=function(){},this.ws.close()}}]),e}(),d={timeout:5e3,timeoutObj:null,serverTimeoutObj:null,reset:function(){return clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this},start:function(e){var t=this;this.timeoutObj=setTimeout((function(){console.log("ping!"),e.send("ping"),t.serverTimeoutObj=setTimeout((function(){e.close()}),t.timeout)}),this.timeout)}};t.heartCheck=d,t.Ws=h},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(112);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLaneInfoByPoint=t.getConstruction=t.getStationInfo=t.connectReplay=t.getConstructionInfo=t.connectDeviceStatus=t.getBestVideoImg=t.getBestSips=t.queryByCrossBatch=t.getCrossQuota=t.connectMixEvents=t.connectGpsMix=t.connectMix=t.connectRobocopEvent=t.getRobocopEventList=t.getRobocopCount=t.getNetCarAlarmRecordsByDay=t.getNetCarAlarmCountsByDay=t.getDataServiceInfoByDay=t.getCrossTotalBetterInfo=t.getCrossBetterInfo=t.getCrossControlType=t.getControlBetterInfo=t.getCrossFlow=t.getCrossInfo=t.getSafeEventList=t.getSafeInfo=t.getDataServiceInfo=t.getTaxiOrderInfo=t.getTaxiCountInfo=t.getTaxiPassengerCount=t.getNetCarAlarmCounts=t.getNetCarAlarmRecords=t.getBusParkInfo=t.getBusStepInfo=t.connectTrafficData=t.connectLamps=t.connectDevice=t.connectSingleVehicle=t.connectVehicle=t.getEventInfo=t.getCarWaringList=t.getDeviceWarningList=t.getDeviceWarningTrend=t.getDeviceErrorTotal=t.getDeviceWarningTotal=t.getTrafficEventList=t.getEventList=t.getHistoryEvents=t.getReplayUrl=t.getVideoUrl=t.getSideInfo=t.getCameraList=t.getRscuList=t.getSideList=t.getDeviceInfo=t.getLampTotal=t.getSensorTotal=t.getSideTotal=t.getRoadTotal=t.getCarBaseInfo=t.getCarInfo=t.getCarTotal=t.getEventTrend=t.getRegion=t.setServicesConfig=void 0;var i=c(n(13)),r=c(n(38)),o=c(n(39)),a=n(40),s=c(n(128)),l=n(64);function c(e){return e&&e.__esModule?e:{default:e}}var u,h,d,f,p,m,v,g,y,b,x,w,_,S,M,T,E,C,A,O,L,k,P,D,I,N,F,R,B,j,z,U,V,G,H,W,q,Y,$,X,Q,K,J,Z,ee,te,ne,ie,re,oe,ae,se,le,ce,ue,he,de,fe,pe,me,ve,ge,ye,be,xe="",we="",_e=!1,Se="/v2x/platform";t.setServicesConfig=function(e){xe=e.ip,we="http"+(e.ssl?"s":"")+"://"+xe,_e=e.ssl,Se=e.cloudPath?e.cloudPath:"/v2x/platform"},t.getRegion=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guangzhou";return(0,a.get)("https://mapdata.bj.bcebos.com/json/"+t+"/"+e).then((function(e){return e}))},t.getEventTrend=(u=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/traffic/trend");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,void 0)}))),function(){return u.apply(this,arguments)}),t.getCarTotal=(h=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/vehicle/overview/list");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,void 0)}))),function(){return h.apply(this,arguments)}),t.getCarInfo=(d=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/vehicle/query?"+n);case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return d.apply(this,arguments)}),t.getCarBaseInfo=(f=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/vehicle/list",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return f.apply(this,arguments)}),t.getRoadTotal=(p=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/road/data/total");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,void 0)}))),function(){return p.apply(this,arguments)}),t.getSideTotal=(m=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/road/side/total");case 2:return t=e.sent,n=t.data.total,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,void 0)}))),function(){return m.apply(this,arguments)}),t.getSensorTotal=(v=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/monitor/overview/sensor");case 2:return t=e.sent,n=t.data.total,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,void 0)}))),function(){return v.apply(this,arguments)}),t.getLampTotal=(g=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/monitor/overview/lamp");case 2:return t=e.sent,n=t.data.total,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,void 0)}))),function(){return g.apply(this,arguments)}),t.getDeviceInfo=(y=(0,o.default)(r.default.mark((function e(){var t,n,i,o,s,l,c,u,h,d,f,p,m,v,g,y,b;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/monitor/overview/camera");case 2:return t=e.sent,n=t.data,i=n.total,o=n.active,e.next=8,(0,a.get)(""+we+Se+"/device/monitor/overview/rsu");case 8:return s=e.sent,l=s.data,c=l.total,u=l.active,e.next=14,(0,a.get)(""+we+Se+"/device/monitor/overview/rscu");case 14:return h=e.sent,d=h.data,f=d.total,p=d.active,e.next=20,(0,a.get)(""+we+Se+"/device/monitor/online/lidar?sensorTypes=1,2");case 20:return m=e.sent,v=m.data,g=v[0],y=g.total,b=g.active,e.abrupt("return",{camera:{total:i,active:o},rsu:{total:c,active:u},rscu:{total:f,active:p},lidar:{total:y,active:b},total:i+f+y+c});case 24:case"end":return e.stop()}}),e,void 0)}))),function(){return y.apply(this,arguments)}),t.getSideList=(b=(0,o.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/road/side/monitor/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return b.apply(this,arguments)}),t.getRscuList=(x=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/device/rscu/list",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return x.apply(this,arguments)}),t.getCameraList=(w=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/device/sensor/list",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return w.apply(this,arguments)}),t.getSideInfo=(_=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/device/road/side/info?"+n);case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return _.apply(this,arguments)}),t.getVideoUrl=(S=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/device/monitorVideo/sensorSnByProtocol",(0,i.default)({sensorSn:"E79671236",protocol:"hls",streamType:1,streamForm:"rtmp",expand:"streamform=rtp"},t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return S.apply(this,arguments)}),t.getReplayUrl=(M=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/device/monitorVideo/sn",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return M.apply(this,arguments)}),t.getHistoryEvents=(T=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/traffic/events?"+n);case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return T.apply(this,arguments)}),t.getEventList=(E=(0,o.default)(r.default.mark((function e(){var t,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{num:4};return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.default.stringify(o),e.next=3,(0,a.get)(""+we+Se+"/traffic/monitor/event/list?"+t);case 3:return n=e.sent,i=n.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,void 0)}))),function(){return E.apply(this,arguments)}),t.getTrafficEventList=(C=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/traffic/query",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return C.apply(this,arguments)}),t.getDeviceWarningTotal=(A=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/warning/total",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return A.apply(this,arguments)}),t.getDeviceErrorTotal=(O=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/warning/error/total",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return O.apply(this,arguments)}),t.getDeviceWarningTrend=(L=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(""+we+Se+"/device/warning/error/trend",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return L.apply(this,arguments)}),t.getDeviceWarningList=(k=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/device/monitor/history",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return k.apply(this,arguments)}),t.getCarWaringList=(P=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(""+we+Se+"/vehicle/details/fault",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return P.apply(this,arguments)}),t.getEventInfo=(D=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/traffic/event/info?"+n);case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return D.apply(this,arguments)}),t.connectVehicle=(I=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws,e.t0=n,e.next=4,n.connect((_e?"wss":"ws")+"://"+xe+Se+"/ws/vehicle",t);case 4:return e.t1=e.sent,i={ws:e.t0,connect:e.t1},e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return I.apply(this,arguments)}),t.connectSingleVehicle=(N=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws,e.t0=n,e.next=4,n.connect((_e?"wss":"ws")+"://"+xe+Se+"/ws/singleVehicle",t);case 4:return e.t1=e.sent,i={ws:e.t0,connect:e.t1},e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return N.apply(this,arguments)}),t.connectDevice=(F=(0,o.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.Ws,e.next=3,t.connect((_e?"wss":"ws")+"://"+xe+Se+"/ws/device");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return F.apply(this,arguments)}),t.connectLamps=(R=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws,e.next=3,n.connect((_e?"wss":"ws")+"://"+xe+Se+"/ws/lamps",{crossid:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return R.apply(this,arguments)}),t.connectTrafficData=(B=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws,e.t0=n,e.next=4,n.connect((_e?"wss":"ws")+"://"+xe+Se+"/ws/perception",{rscuSn:t,dataRange:1});case 4:return e.t1=e.sent,e.abrupt("return",{ws:e.t0,connect:e.t1});case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return B.apply(this,arguments)}),t.getBusStepInfo=(j=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/roboBus/realTimeVehicleInfo",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return j.apply(this,arguments)}),t.getBusParkInfo=(z=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/roboBus/realTimeParkInfo",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return z.apply(this,arguments)}),t.getNetCarAlarmRecords=(U=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/businessCar/alarmRecords",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return U.apply(this,arguments)}),t.getNetCarAlarmCounts=(V=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/businessCar/alarmStatistics",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return V.apply(this,arguments)}),t.getTaxiPassengerCount=(G=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/robotaxi/passengerCount",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return G.apply(this,arguments)}),t.getTaxiCountInfo=(H=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/robotaxi/orderMiles",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return H.apply(this,arguments)}),t.getTaxiOrderInfo=(W=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/robotaxi/carOrder",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return W.apply(this,arguments)}),t.getDataServiceInfo=(q=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(we+"/v2x/inner/openapi/services/currentTotalCount",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return q.apply(this,arguments)}),t.getSafeInfo=(Y=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/networksecurity/situation",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return Y.apply(this,arguments)}),t.getSafeEventList=($=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/networksecurity/eventlist",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return $.apply(this,arguments)}),t.getCrossInfo=(X=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/signal/cross/desc",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return X.apply(this,arguments)}),t.getCrossFlow=(Q=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/signal/cross/flow",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return Q.apply(this,arguments)}),t.getControlBetterInfo=(K=(0,o.default)(r.default.mark((function e(t){var n,i,o,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/signal/cycle/duration");case 2:return n=e.sent,i=n.data,e.next=6,(0,a.post)(we+"/v2x/inner/openapi/signal/optimize/agg",t);case 6:return o=e.sent,s=o.data,e.abrupt("return",{totalData:i,data:s});case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return K.apply(this,arguments)}),t.getCrossControlType=(J=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/signal/cross/status",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return J.apply(this,arguments)}),t.getCrossBetterInfo=(Z=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/signal/scheme/realtime_background",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return Z.apply(this,arguments)}),t.getCrossTotalBetterInfo=(ee=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/signal/cross/quotas",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return ee.apply(this,arguments)}),t.getDataServiceInfoByDay=(te=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.get)(we+"/v2x/inner/openapi/services/bspInvokeStatistics",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return te.apply(this,arguments)}),t.getNetCarAlarmCountsByDay=(ne=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/businessCarStatistics/recentDays",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return ne.apply(this,arguments)}),t.getNetCarAlarmRecordsByDay=(ie=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/v2x/inner/openapi/abnormalDriving/records",t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return ie.apply(this,arguments)}),t.getRobocopCount=(re=(0,o.default)(r.default.mark((function e(){var t,n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=t.getTime(),i={startTime:new Date((new Date).toLocaleDateString()).getTime(),endTime:n},e.next=5,(0,a.post)(we+"/mapServer/event/robocop/count",i);case 5:if(!(o=e.sent)){e.next=8;break}return e.abrupt("return",o.Data);case 8:throw new Error("获取cop事件统计失败",o);case 9:case"end":return e.stop()}}),e,void 0)}))),function(){return re.apply(this,arguments)}),t.getRobocopEventList=(oe=(0,o.default)(r.default.mark((function e(t){var n,i,o,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,i=new Date((new Date).toLocaleDateString()).getTime(),o={startTime:i,endTime:n.getTime(),total:60},e.next=5,(0,a.post)(we+"/mapServer/event/robocop/list",t||o);case 5:if(!(s=e.sent)){e.next=8;break}return e.abrupt("return",s.Data);case 8:throw new Error("获取cop事件列表失败",s);case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return oe.apply(this,arguments)}),t.connectRobocopEvent=(ae=(0,o.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.Ws,e.next=3,t.connect((_e?"wss":"ws")+"://"+xe+"/mapServer/event/robocop/websocket");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return ae.apply(this,arguments)}),t.connectMix=(se=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws({needToken:!1}),e.t0=n,e.next=4,n.connect((_e?"wss":"ws")+"://"+xe+"/track/mapServer/all/ws",t);case 4:return e.t1=e.sent,e.abrupt("return",{ws:e.t0,connect:e.t1});case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return se.apply(this,arguments)}),t.connectGpsMix=(le=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws({needToken:!1}),e.t0=n,e.next=4,n.connect((_e?"wss":"ws")+"://"+xe+"/track/mapServer/gps/ws",t);case 4:return e.t1=e.sent,e.abrupt("return",{ws:e.t0,connect:e.t1});case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return le.apply(this,arguments)}),t.connectMixEvents=(ce=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.Ws({needToken:!1}),e.t0=n,e.next=4,n.connect((_e?"wss":"ws")+"://"+xe+"/event/mapServer/cell/ws",t);case 4:return e.t1=e.sent,e.abrupt("return",{ws:e.t0,connect:e.t1});case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return ce.apply(this,arguments)}),t.getCrossQuota=(ue=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/traffic/control/queryByCross?"+n,{needToken:!0});case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return ue.apply(this,arguments)}),t.queryByCrossBatch=(he=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/traffic/control/queryByCrossBatch?"+n,{needToken:!0});case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return he.apply(this,arguments)}),t.getBestSips=(de=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(""+we+Se+"/traffic/event/best/sips?"+n,{needToken:!0});case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return de.apply(this,arguments)}),t.getBestVideoImg=(fe=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)("http://pdtmap-kv-ubuntu.bcc-szwg.baidu.com:8815/mapServer/video/bestEventImgRect?"+n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return fe.apply(this,arguments)}),t.connectDeviceStatus=(pe=(0,o.default)(r.default.mark((function e(t,n){var i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new l.Ws({needToken:!1}),e.t0=i,e.next=4,i.connect("ws://"+t+"/mapServer/websocket/pushDeviceStatus",n);case 4:return e.t1=e.sent,e.abrupt("return",{ws:e.t0,connect:e.t1});case 6:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return pe.apply(this,arguments)}),t.getConstructionInfo=(me=(0,o.default)(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/dataserver/roadAlarmList",t);case 2:return n=e.sent,i=n.Result,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return me.apply(this,arguments)}),t.connectReplay=(ve=(0,o.default)(r.default.mark((function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10.12.205.143:8817",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments[2];return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.Ws({needToken:!1}),e.t0=t,e.next=4,t.connect("ws"+(i?"s":"")+"://"+n+"/track/mapServer/replay/ws",o);case 4:return e.t1=e.sent,e.abrupt("return",{ws:e.t0,connect:e.t1});case 6:case"end":return e.stop()}}),e,void 0)}))),function(){return ve.apply(this,arguments)}),t.getStationInfo=(ge=(0,o.default)(r.default.mark((function e(t){var n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.stringify(t),e.next=3,(0,a.get)(we+"/dataserver/station/info?"+n);case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,void 0)}))),function(e){return ge.apply(this,arguments)}),t.getConstruction=(ye=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/dataserver/construction/info",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return ye.apply(this,arguments)}),t.getLaneInfoByPoint=(be=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.post)(we+"/tgisengine/hd/getLaneInfoByPoint",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return be.apply(this,arguments)})},function(e,t){e.exports={}},function(e,t,n){var i=n(152),r=n(112);e.exports=function(e){return i(r(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(12),r=n(3),o=n(9),a=n(26);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Object(o.a)(0,"Body must be a string. Received: ".concat(Object(r.a)(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Object(o.a)(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Object(o.a)(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,a;return t=e,(n=[{key:i.c,get:function(){return"Source"}}])&&s(t.prototype,n),a&&s(t,a),e}();function c(e){return Object(a.a)(e,l)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n(27),r=n(11),o=n(5),a=n(41),s=function(){function e(e){var t=new r.b(o.a.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==o.a.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=u(this,e)}while(e.kind===o.a.COMMENT);return e},e}();function l(e){return e===o.a.BANG||e===o.a.DOLLAR||e===o.a.AMP||e===o.a.PAREN_L||e===o.a.PAREN_R||e===o.a.SPREAD||e===o.a.COLON||e===o.a.EQUALS||e===o.a.AT||e===o.a.BRACKET_L||e===o.a.BRACKET_R||e===o.a.BRACE_L||e===o.a.PIPE||e===o.a.BRACE_R}function c(e){return isNaN(e)?o.a.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function u(e,t){for(var n=e.source,a=n.body,s=a.length,l=t.end;l<s;){var c=a.charCodeAt(l),u=e.line,p=1+l-e.lineStart;switch(c){case 65279:case 9:case 32:case 44:++l;continue;case 10:++l,++e.line,e.lineStart=l;continue;case 13:10===a.charCodeAt(l+1)?l+=2:++l,++e.line,e.lineStart=l;continue;case 33:return new r.b(o.a.BANG,l,l+1,u,p,t);case 35:return d(n,l,u,p,t);case 36:return new r.b(o.a.DOLLAR,l,l+1,u,p,t);case 38:return new r.b(o.a.AMP,l,l+1,u,p,t);case 40:return new r.b(o.a.PAREN_L,l,l+1,u,p,t);case 41:return new r.b(o.a.PAREN_R,l,l+1,u,p,t);case 46:if(46===a.charCodeAt(l+1)&&46===a.charCodeAt(l+2))return new r.b(o.a.SPREAD,l,l+3,u,p,t);break;case 58:return new r.b(o.a.COLON,l,l+1,u,p,t);case 61:return new r.b(o.a.EQUALS,l,l+1,u,p,t);case 64:return new r.b(o.a.AT,l,l+1,u,p,t);case 91:return new r.b(o.a.BRACKET_L,l,l+1,u,p,t);case 93:return new r.b(o.a.BRACKET_R,l,l+1,u,p,t);case 123:return new r.b(o.a.BRACE_L,l,l+1,u,p,t);case 124:return new r.b(o.a.PIPE,l,l+1,u,p,t);case 125:return new r.b(o.a.BRACE_R,l,l+1,u,p,t);case 34:return 34===a.charCodeAt(l+1)&&34===a.charCodeAt(l+2)?v(n,l,u,p,t,e):m(n,l,u,p,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return f(n,l,c,u,p,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return y(n,l,u,p,t)}throw Object(i.a)(n,l,h(c))}var g=e.line,b=1+l-e.lineStart;return new r.b(o.a.EOF,s,s,g,b,t)}function h(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(c(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(c(e),".")}function d(e,t,n,i,a){var s,l=e.body,c=t;do{s=l.charCodeAt(++c)}while(!isNaN(s)&&(s>31||9===s));return new r.b(o.a.COMMENT,t,c,n,i,a,l.slice(t+1,c))}function f(e,t,n,a,s,l){var u=e.body,h=n,d=t,f=!1;if(45===h&&(h=u.charCodeAt(++d)),48===h){if((h=u.charCodeAt(++d))>=48&&h<=57)throw Object(i.a)(e,d,"Invalid number, unexpected digit after 0: ".concat(c(h),"."))}else d=p(e,d,h),h=u.charCodeAt(d);if(46===h&&(f=!0,h=u.charCodeAt(++d),d=p(e,d,h),h=u.charCodeAt(d)),69!==h&&101!==h||(f=!0,43!==(h=u.charCodeAt(++d))&&45!==h||(h=u.charCodeAt(++d)),d=p(e,d,h),h=u.charCodeAt(d)),46===h||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(h))throw Object(i.a)(e,d,"Invalid number, expected digit but got: ".concat(c(h),"."));return new r.b(f?o.a.FLOAT:o.a.INT,t,d,a,s,l,u.slice(t,d))}function p(e,t,n){var r=e.body,o=t,a=n;if(a>=48&&a<=57){do{a=r.charCodeAt(++o)}while(a>=48&&a<=57);return o}throw Object(i.a)(e,o,"Invalid number, expected digit but got: ".concat(c(a),"."))}function m(e,t,n,a,s){for(var l,u,h,d,f=e.body,p=t+1,m=p,v=0,y="";p<f.length&&!isNaN(v=f.charCodeAt(p))&&10!==v&&13!==v;){if(34===v)return y+=f.slice(m,p),new r.b(o.a.STRING,t,p+1,n,a,s,y);if(v<32&&9!==v)throw Object(i.a)(e,p,"Invalid character within String: ".concat(c(v),"."));if(++p,92===v){switch(y+=f.slice(m,p-1),v=f.charCodeAt(p)){case 34:y+='"';break;case 47:y+="/";break;case 92:y+="\\";break;case 98:y+="\b";break;case 102:y+="\f";break;case 110:y+="\n";break;case 114:y+="\r";break;case 116:y+="\t";break;case 117:var b=(l=f.charCodeAt(p+1),u=f.charCodeAt(p+2),h=f.charCodeAt(p+3),d=f.charCodeAt(p+4),g(l)<<12|g(u)<<8|g(h)<<4|g(d));if(b<0){var x=f.slice(p+1,p+5);throw Object(i.a)(e,p,"Invalid character escape sequence: \\u".concat(x,"."))}y+=String.fromCharCode(b),p+=4;break;default:throw Object(i.a)(e,p,"Invalid character escape sequence: \\".concat(String.fromCharCode(v),"."))}m=++p}}throw Object(i.a)(e,p,"Unterminated string.")}function v(e,t,n,s,l,u){for(var h=e.body,d=t+3,f=d,p=0,m="";d<h.length&&!isNaN(p=h.charCodeAt(d));){if(34===p&&34===h.charCodeAt(d+1)&&34===h.charCodeAt(d+2))return m+=h.slice(f,d),new r.b(o.a.BLOCK_STRING,t,d+3,n,s,l,Object(a.a)(m));if(p<32&&9!==p&&10!==p&&13!==p)throw Object(i.a)(e,d,"Invalid character within String: ".concat(c(p),"."));10===p?(++d,++u.line,u.lineStart=d):13===p?(10===h.charCodeAt(d+1)?d+=2:++d,++u.line,u.lineStart=d):92===p&&34===h.charCodeAt(d+1)&&34===h.charCodeAt(d+2)&&34===h.charCodeAt(d+3)?(m+=h.slice(f,d)+'"""',f=d+=4):++d}throw Object(i.a)(e,d,"Unterminated string.")}function g(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function y(e,t,n,i,a){for(var s=e.body,l=s.length,c=t+1,u=0;c!==l&&!isNaN(u=s.charCodeAt(c))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++c;return new r.b(o.a.NAME,t,c,n,i,a,s.slice(t,c))}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(361),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){e.exports={default:n(257),__esModule:!0}},function(e,t,n){"use strict";var i=n(237)(!0);n(151)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(161),r=n(117);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageSplit=t.isJSON=t.carChangeTypeFun=t.getWsType=t.getSignalColorString=t.sortRoadFlowDirection=t.getRoadFlowDirection=t.getEventNameHelper=void 0;var i=s(n(24)),r=s(n(21)),o=s(n(13)),a=n(60);function s(e){return e&&e.__esModule?e:{default:e}}t.getEventNameHelper=function(e){var t=e in a.EVENT_TYPE_SERVICE?a.EVENT_TYPE_SERVICE[e]:a.EVENT_TYPE_SERVICE.others,n=a.EVENT_TYPE[t];if("others"===t&&e in a.EVENT_SUB_TYPE_SERVICE){var i=a.EVENT_SUB_TYPE_SERVICE[e],r=a.EVENT_SUB_TYPE[i];n=(0,o.default)({},n,{eventName:r.eventName})}return n};var l=t.getRoadFlowDirection=function(e){return(0,r.default)(a.ROAD_FLOW_DIRECTION).find((function(t){return a.ROAD_FLOW_DIRECTION[t].codes.includes(e)}))};t.sortRoadFlowDirection=function(e,t){var n=l(Number(t.phaseId)),i=l(Number(e.phaseId));return a.ROAD_FLOW_DIRECTION[n].priority-a.ROAD_FLOW_DIRECTION[i].priority},t.getSignalColorString=function(e){return(0,r.default)(a.LAMP_STATUS).find((function(t){return a.LAMP_STATUS[t].includes(e)}))||"others"},t.getWsType=function(e,t){var n="https:"===window.location.protocol?"wss":"ws";return t&&(n=t),n+"://"+e},t.carChangeTypeFun=function(e){return a.CAR_TYPE[Number(e)].name},t.isJSON=function(e){if("string"==typeof e)try{return JSON.parse(e),!0}catch(e){return console.log(e),!1}return!1},t.imageSplit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:132,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:132,o=document.createElement("canvas");o.width=n,o.height=r;var a=o.getContext("2d"),s=new Image;s.setAttribute("crossOrigin","anonymous"),s.src=e;var l=new i.default((function(e){s.onload=function(){for(var i=[],l=s.width,c=s.height,u=l/t,h=c,d=n,f=r,p=0;p<t;p++){a.clearRect(0,0,l,c);var m=0+u*p;a.drawImage(s,m,0,u,h,0,0,d,f);var v=o.toDataURL("image/png");i.push(v)}e(i)}}));return l}},function(e,t,n){"use strict";n.r(t),n.d(t,"LineGeometry",(function(){return r}));var i=n(56),r=function(){i.LineSegmentsGeometry.call(this),this.type="LineGeometry"};r.prototype=Object.assign(Object.create(i.LineSegmentsGeometry.prototype),{constructor:r,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return i.LineSegmentsGeometry.prototype.setPositions.call(this,n),this},setColors:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return i.LineSegmentsGeometry.prototype.setColors.call(this,n),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},copy:function(){return this}})},function(e,t,n){"use strict";n.r(t),n.d(t,"GLTFLoader",(function(){return r}));var i=n(0),r=function(){function e(e){i.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.pluginCallbacks=[],this.register((function(e){return new s(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new l(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(i.Loader.prototype),{constructor:e,load:function(e,t,n,r){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i.LoaderUtils.extractUrlBase(e),a.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new i.FileLoader(a.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),"use-credentials"===a.crossOrigin&&l.setWithCredentials(!0),l.load(e,(function(n){try{a.parse(n,o,(function(n){t(n),a.manager.itemEnd(e)}),s)}catch(e){s(e)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,s,l){var c,h={},d={};if("string"==typeof e)c=e;else if(i.LoaderUtils.decodeText(new Uint8Array(e,0,4))===u){try{h[n.KHR_BINARY_GLTF]=new f(e)}catch(e){return void(l&&l(e))}c=h[n.KHR_BINARY_GLTF].content}else c=i.LoaderUtils.decodeText(new Uint8Array(e));var v=JSON.parse(c);if(void 0===v.asset||v.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var b=new V(v,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader});b.fileLoader.setRequestHeader(this.requestHeader);for(var x=0;x<this.pluginCallbacks.length;x++){var w=this.pluginCallbacks[x](b);d[w.name]=w,h[w.name]=!0}if(v.extensionsUsed)for(x=0;x<v.extensionsUsed.length;++x){var _=v.extensionsUsed[x],S=v.extensionsRequired||[];switch(_){case n.KHR_LIGHTS_PUNCTUAL:h[_]=new o(v);break;case n.KHR_MATERIALS_UNLIT:h[_]=new a;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:h[_]=new g;break;case n.KHR_DRACO_MESH_COMPRESSION:h[_]=new p(v,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:h[_]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:h[_]=new m;break;case n.KHR_MESH_QUANTIZATION:h[_]=new y;break;default:S.indexOf(_)>=0&&void 0===d[_]&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}b.setExtensions(h),b.setPlugins(d),b.parse(s,l)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function a(){this.name=n.KHR_MATERIALS_UNLIT}function s(e){this.parser=e,this.name=n.KHR_MATERIALS_CLEARCOAT}function l(e){this.parser=e,this.name=n.KHR_MATERIALS_TRANSMISSION}function c(e){this.parser=e,this.name=n.KHR_TEXTURE_BASISU}o.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new i.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var o=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new i.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new i.PointLight(r)).distance=o;break;case"spot":(t=new i.SpotLight(r)).distance=o,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},a.prototype.getMaterialType=function(){return i.MeshBasicMaterial},a.prototype.extendParams=function(e,t,n){var r=[];e.color=new i.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&r.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(r)},s.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null},s.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var o=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.Vector2(s,s)}return Promise.all(o)},l.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null},l.prototype.extendMaterialParams=function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)},c.prototype.loadTexture=function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var r=i.extensions[this.name],o=n.images[r.source],a=t.options.ktx2Loader;if(!a)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return t.loadTextureImage(e,o,a)};var u="glTF",h=1313821514,d=5130562;function f(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==u)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=new DataView(e,12),o=0;o<r.byteLength;){var a=r.getUint32(o,!0);o+=4;var s=r.getUint32(o,!0);if(o+=4,s===h){var l=new Uint8Array(e,12+o,a);this.content=i.LoaderUtils.decodeText(l)}else if(s===d){var c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function p(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function m(){this.name=n.KHR_TEXTURE_TRANSFORM}function v(e){i.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),s={specular:{value:(new i.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var i in s)e.uniforms[i]=s[i];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",o),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function g(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return v},extendParams:function(e,t,n){var r=t.extensions[this.name];e.color=new i.Color(1,1,1),e.opacity=1;var o=[];if(Array.isArray(r.diffuseFactor)){var a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==r.diffuseTexture&&o.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new i.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new i.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var s=r.specularGlossinessTexture;o.push(n.assignTexture(e,"glossinessMap",s)),o.push(n.assignTexture(e,"specularMap",s))}return Promise.all(o)},createMaterial:function(e){var t=new v(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=i.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function y(){this.name=n.KHR_MESH_QUANTIZATION}function b(e,t,n,r){i.Interpolant.call(this,e,t,n,r)}p.prototype.decodePrimitive=function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(var c in o){var u=k[c]||c.toLowerCase();a[u]=o[c]}for(c in e.attributes){u=k[c]||c.toLowerCase();if(void 0!==o[c]){var h=n.accessors[e.attributes[c]],d=C[h.componentType];l[u]=d,s[u]=!0===h.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],r=s[n];void 0!==r&&(i.normalized=r)}t(e)}),a,l)}))}))},m.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},v.prototype=Object.create(i.MeshStandardMaterial.prototype),v.prototype.constructor=v,v.prototype.copy=function(e){return i.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},b.prototype=Object.create(i.Interpolant.prototype),b.prototype.constructor=b,b.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,o=0;o!==i;o++)t[o]=n[r+o];return t},b.prototype.beforeStart_=b.prototype.copySampleValue_,b.prototype.afterEnd_=b.prototype.copySampleValue_,b.prototype.interpolate_=function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=i-t,u=(n-t)/c,h=u*u,d=h*u,f=e*l,p=f-l,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+u,b=0;b!==a;b++){var x=o[p+b+a],w=o[p+b+s]*c,_=o[f+b+a],S=o[f+b]*c;r[b]=g*x+y*w+m*_+v*S}return r};var x=0,w=1,_=2,S=3,M=4,T=5,E=6,C={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},O={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},k={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},P={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},D={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},I="OPAQUE",N="MASK",F="BLEND";function R(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function B(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function j(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(n=0,i=r.length;n<i;n++)e.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function U(e){for(var t="",n=Object.keys(e).sort(),i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function V(e,n){this.json=e||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new i.ImageBitmapLoader(this.options.manager):this.textureLoader=new i.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function G(e,t,n){var r=t.attributes,o=[];function a(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(var s in r){var l=k[s]||s.toLowerCase();l in e.attributes||o.push(a(r[s],l))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(c)}return j(e,t),function(e,t,n){var r=t.attributes,o=new i.Box3;if(void 0!==r.POSITION){var a=(p=n.json.accessors[r.POSITION]).min,s=p.max;if(void 0!==a&&void 0!==s){o.set(new i.Vector3(a[0],a[1],a[2]),new i.Vector3(s[0],s[1],s[2]));var l=t.targets;if(void 0!==l){for(var c=new i.Vector3,u=new i.Vector3,h=0,d=l.length;h<d;h++){var f=l[h];if(void 0!==f.POSITION){var p;a=(p=n.json.accessors[f.POSITION]).min,s=p.max;void 0!==a&&void 0!==s?(u.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),u.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),u.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),c.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(c)}e.boundingBox=o;var m=new i.Sphere;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){for(var i=!1,r=!1,o=0,a=t.length;o<a;o++){if(void 0!==(c=t[o]).POSITION&&(i=!0),void 0!==c.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(e);var s=[],l=[];for(o=0,a=t.length;o<a;o++){var c=t[o];if(i){var u=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(u)}if(r){u=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;l.push(u)}}return Promise.all([Promise.all(s),Promise.all(l)]).then((function(t){var n=t[0],o=t[1];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function H(e,t){var n=e.getIndex();if(null===n){var r=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var s=n.count-2,l=[];if(t===i.TriangleFanDrawMode)for(a=1;a<=s;a++)l.push(n.getX(0)),l.push(n.getX(a)),l.push(n.getX(a+1));else for(a=0;a<s;a++)a%2==0?(l.push(n.getX(a)),l.push(n.getX(a+1)),l.push(n.getX(a+2))):(l.push(n.getX(a+2)),l.push(n.getX(a+1)),l.push(n.getX(a)));l.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(l),c}return V.prototype.setExtensions=function(e){this.extensions=e},V.prototype.setPlugins=function(e){this.plugins=e},V.prototype.parse=function(e,t){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};B(r,o,i),j(o,i),e(o)})).catch(t)},V.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],r=0,o=t.length;r<o;r++)for(var a=t[r].joints,s=0,l=a.length;s<l;s++)e[a[s]].isBone=!0;for(var c=0,u=e.length;c<u;c++){var h=e[c];void 0!==h.mesh&&(this._addNodeRef(this.meshCache,h.mesh),void 0!==h.skin&&(i[h.mesh].isSkinnedMesh=!0)),void 0!==h.camera&&this._addNodeRef(this.cameraCache,h.camera),h.extensions&&h.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==h.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&this._addNodeRef(this.lightCache,h.extensions[n.KHR_LIGHTS_PUNCTUAL].light)}},V.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},V.prototype._getNodeRef=function(e,t,n){if(e.refs[t]<=1)return n;var i=n.clone();return i.name+="_instance_"+e.uses[t]++,i},V.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}},V.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i]));return Promise.all(n)},V.prototype.getDependency=function(e,t){var i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r},V.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t},V.prototype.loadBuffer=function(e){var t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,n){i.load(R(t.uri,r.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},V.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))},V.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var o=[];return void 0!==r.bufferView?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,a,s=e[0],l=L[r.type],c=C[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(f&&f!==h){var m=Math.floor(d/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,g=t.cache.get(v);g||(o=new c(s,m*f,r.count*f/u),g=new i.InterleavedBuffer(o,f/u),t.cache.add(v,g)),a=new i.InterleavedBufferAttribute(g,l,d%f/u,p)}else o=null===s?new c(r.count*l):new c(s,d,r.count*l),a=new i.BufferAttribute(o,l,p);if(void 0!==r.sparse){var y=L.SCALAR,b=C[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,_=new b(e[1],x,r.sparse.count*y),S=new c(e[2],w,r.sparse.count*l);null!==s&&(a=new i.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var M=0,T=_.length;M<T;M++){var E=_[M];if(a.setX(E,S[M*l]),l>=2&&a.setY(E,S[M*l+1]),l>=3&&a.setZ(E,S[M*l+2]),l>=4&&a.setW(E,S[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},V.prototype.loadTexture=function(e){var t,i,r=this.json,o=this.options,a=r.textures[e],s=a.extensions||{};return(t=s[n.MSFT_TEXTURE_DDS]?r.images[s[n.MSFT_TEXTURE_DDS].source]:r.images[a.source]).uri&&(i=o.manager.getHandler(t.uri)),i||(i=s[n.MSFT_TEXTURE_DDS]?this.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,i)},V.prototype.loadTextureImage=function(e,t,n){var r=this,o=this.json,a=this.options,s=o.textures[e],l=self.URL||self.webkitURL,c=t.uri,u=!1,h=!0;return"image/jpeg"===t.mimeType&&(h=!1),void 0!==t.bufferView&&(c=r.getDependency("bufferView",t.bufferView).then((function(e){"image/png"===t.mimeType&&(h=6===new DataView(e,25,1).getUint8(0,!1)),u=!0;var n=new Blob([e],{type:t.mimeType});return c=l.createObjectURL(n)}))),Promise.resolve(c).then((function(e){return new Promise((function(t,r){var o=t;!0===n.isImageBitmapLoader&&(o=function(e){t(new i.CanvasTexture(e))}),n.load(R(e,a.path),o,void 0,r)}))})).then((function(t){!0===u&&l.revokeObjectURL(c),t.flipY=!1,s.name&&(t.name=s.name),h||(t.format=i.RGBFormat);var n=(o.samplers||{})[s.sampler]||{};return t.magFilter=A[n.magFilter]||i.LinearFilter,t.minFilter=A[n.minFilter]||i.LinearMipmapLinearFilter,t.wrapS=O[n.wrapS]||i.RepeatWrapping,t.wrapT=O[n.wrapT]||i.RepeatWrapping,r.associations.set(t,{type:"textures",index:e}),t}))},V.prototype.assignTexture=function(e,t,i){var r=this;return this.getDependency("texture",i.index).then((function(o){if(void 0===i.texCoord||0==i.texCoord||"aoMap"===t&&1==i.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),r.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==i.extensions?i.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=r.associations.get(o);o=r.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,s)}}e[t]=o}))},V.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,l=Object.keys(t.morphAttributes).length>0,c=l&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+n.uuid,h=this.cache.get(u);h||(h=new i.PointsMaterial,i.Material.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(u,h)),n=h}else if(e.isLine){u="LineBasicMaterial:"+n.uuid;var d=this.cache.get(u);d||(d=new i.LineBasicMaterial,i.Material.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(u,d)),n=d}if(r||o||a||s||l){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),r&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),a&&(u+="flat-shading:"),l&&(u+="morph-targets:"),c&&(u+="morph-normals:");var f=this.cache.get(u);f||(f=n.clone(),s&&(f.skinning=!0),r&&(f.vertexTangents=!0),o&&(f.vertexColors=!0),a&&(f.flatShading=!0),l&&(f.morphTargets=!0),c&&(f.morphNormals=!0),this.cache.add(u,f),this.associations.set(f,this.associations.get(n))),n=f}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n},V.prototype.getMaterialType=function(){return i.MeshStandardMaterial},V.prototype.loadMaterial=function(e){var t,r=this,o=this.json,a=this.extensions,s=o.materials[e],l={},c=s.extensions||{},u=[];if(c[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=h.getMaterialType(),u.push(h.extendParams(l,s,r))}else if(c[n.KHR_MATERIALS_UNLIT]){var d=a[n.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),u.push(d.extendParams(l,s,r))}else{var f=s.pbrMetallicRoughness||{};if(l.color=new i.Color(1,1,1),l.opacity=1,Array.isArray(f.baseColorFactor)){var p=f.baseColorFactor;l.color.fromArray(p),l.opacity=p[3]}void 0!==f.baseColorTexture&&u.push(r.assignTexture(l,"map",f.baseColorTexture)),l.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,l.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(u.push(r.assignTexture(l,"metalnessMap",f.metallicRoughnessTexture)),u.push(r.assignTexture(l,"roughnessMap",f.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)})))}!0===s.doubleSided&&(l.side=i.DoubleSide);var m=s.alphaMode||I;return m===F?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===N&&(l.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==i.MeshBasicMaterial&&(u.push(r.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new i.Vector2(1,1),void 0!==s.normalTexture.scale&&l.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==i.MeshBasicMaterial&&(u.push(r.assignTexture(l,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(l.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==i.MeshBasicMaterial&&(l.emissive=(new i.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==i.MeshBasicMaterial&&u.push(r.assignTexture(l,"emissiveMap",s.emissiveTexture)),Promise.all(u).then((function(){var o;return o=t===v?a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new t(l),s.name&&(o.name=s.name),o.map&&(o.map.encoding=i.sRGBEncoding),o.emissiveMap&&(o.emissiveMap.encoding=i.sRGBEncoding),j(o,s),r.associations.set(o,{type:"materials",index:e}),s.extensions&&B(a,o,s),o}))},V.prototype.loadGeometries=function(e){var t=this,r=this.extensions,o=this.primitiveCache;function a(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return G(n,e,t)}))}for(var s,l,c=[],u=0,h=e.length;u<h;u++){var d,f=e[u],p=(l=void 0,(l=(s=f).extensions&&s.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+l.bufferView+":"+l.indices+":"+U(l.attributes):s.indices+":"+U(s.attributes)+":"+s.mode),m=o[p];if(m)c.push(m.promise);else d=f.extensions&&f.extensions[n.KHR_DRACO_MESH_COMPRESSION]?a(f):G(new i.BufferGeometry,f,t),o[p]={primitive:f,promise:d},c.push(d)}return Promise.all(c)},V.prototype.loadMesh=function(e){for(var t,n=this,r=this.json.meshes[e],o=r.primitives,a=[],s=0,l=o.length;s<l;s++){var c=void 0===o[s].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),t.DefaultMaterial):this.getDependency("material",o[s].material);a.push(c)}return a.push(n.loadGeometries(o)),Promise.all(a).then((function(t){for(var a=t.slice(0,t.length-1),s=t[t.length-1],l=[],c=0,u=s.length;c<u;c++){var h,d=s[c],f=o[c],p=a[c];if(f.mode===M||f.mode===T||f.mode===E||void 0===f.mode)!0!==(h=!0===r.isSkinnedMesh?new i.SkinnedMesh(d,p):new i.Mesh(d,p)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),f.mode===T?h.geometry=H(h.geometry,i.TriangleStripDrawMode):f.mode===E&&(h.geometry=H(h.geometry,i.TriangleFanDrawMode));else if(f.mode===w)h=new i.LineSegments(d,p);else if(f.mode===S)h=new i.Line(d,p);else if(f.mode===_)h=new i.LineLoop(d,p);else{if(f.mode!==x)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);h=new i.Points(d,p)}Object.keys(h.geometry.morphAttributes).length>0&&z(h,r),h.name=r.name||"mesh_"+e,s.length>1&&(h.name+="_"+c),j(h,r),n.assignFinalMaterial(h),l.push(h)}if(1===l.length)return l[0];var m=new i.Group;for(c=0,u=l.length;c<u;c++)m.add(l[c]);return m}))},V.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new i.PerspectiveCamera(i.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=n.name),j(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},V.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},V.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],r=[],o=[],a=[],s=[],l=0,c=t.channels.length;l<c;l++){var u=t.channels[l],h=t.samplers[u.sampler],d=u.target,f=void 0!==d.node?d.node:d.id,p=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;n.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",p)),o.push(this.getDependency("accessor",m)),a.push(h),s.push(d)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(n){for(var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=[],u=0,h=r.length;u<h;u++){var d=r[u],f=o[u],p=a[u],m=s[u],v=l[u];if(void 0!==d){var g;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,P[v.path]){case P.weights:g=i.NumberKeyframeTrack;break;case P.rotation:g=i.QuaternionKeyframeTrack;break;case P.position:case P.scale:default:g=i.VectorKeyframeTrack}var y=d.name?d.name:d.uuid,x=void 0!==m.interpolation?D[m.interpolation]:i.InterpolateLinear,w=[];P[v.path]===P.weights?d.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)})):w.push(y);var _=p.array;if(p.normalized){var S;if(_.constructor===Int8Array)S=1/127;else if(_.constructor===Uint8Array)S=1/255;else if(_.constructor==Int16Array)S=1/32767;else{if(_.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");S=1/65535}for(var M=new Float32Array(_.length),T=0,E=_.length;T<E;T++)M[T]=_[T]*S;_=M}for(T=0,E=w.length;T<E;T++){var C=new g(w[T]+"."+P[v.path],f.array,_,x);"CUBICSPLINE"===m.interpolation&&(C.createInterpolant=function(e){return new b(this.times,this.values,this.getValueSize()/3,e)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(C)}}}var A=t.name?t.name:"animation_"+e;return new i.AnimationClip(A,void 0,c)}))},V.prototype.loadNode=function(e){var t=this.json,r=this.extensions,o=this,a=t.nodes[e];return function(){var e=[];if(void 0!==a.mesh&&e.push(o.getDependency("mesh",a.mesh).then((function(e){var t=o._getNodeRef(o.meshCache,a.mesh,e);return void 0!==a.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=a.weights.length;t<n;t++)e.morphTargetInfluences[t]=a.weights[t]})),t}))),void 0!==a.camera&&e.push(o.getDependency("camera",a.camera).then((function(e){return o._getNodeRef(o.cameraCache,a.camera,e)}))),a.extensions&&a.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==a.extensions[n.KHR_LIGHTS_PUNCTUAL].light){var t=a.extensions[n.KHR_LIGHTS_PUNCTUAL].light;e.push(o.getDependency("light",t).then((function(e){return o._getNodeRef(o.lightCache,t,e)})))}return Promise.all(e)}().then((function(t){var n;if((n=!0===a.isBone?new i.Bone:t.length>1?new i.Group:1===t.length?t[0]:new i.Object3D)!==t[0])for(var s=0,l=t.length;s<l;s++)n.add(t[s]);if(a.name&&(n.userData.name=a.name,n.name=i.PropertyBinding.sanitizeNodeName(a.name)),j(n,a),a.extensions&&B(r,n,a),void 0!==a.matrix){var c=new i.Matrix4;c.fromArray(a.matrix),n.applyMatrix4(c)}else void 0!==a.translation&&n.position.fromArray(a.translation),void 0!==a.rotation&&n.quaternion.fromArray(a.rotation),void 0!==a.scale&&n.scale.fromArray(a.scale);return o.associations.set(n,{type:"nodes",index:e}),n}))},V.prototype.loadScene=function(){function e(t,n,r,o){var a=r.nodes[t];return o.getDependency("node",t).then((function(e){return void 0===a.skin?e:o.getDependency("skin",a.skin).then((function(e){for(var n=[],i=0,r=(t=e).joints.length;i<r;i++)n.push(o.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],o=[],a=0,s=n.length;a<s;a++){var l=n[a];if(l){r.push(l);var c=new i.Matrix4;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*a),o.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new i.Skeleton(r,o),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var i=[];if(a.children)for(var s=a.children,l=0,c=s.length;l<c;l++){var u=s[l];i.push(e(u,t,r,o))}return Promise.all(i)}))}return function(t){var n=this.json,r=this.extensions,o=this.json.scenes[t],a=new i.Group;o.name&&(a.name=o.name),j(a,o),o.extensions&&B(r,a,o);for(var s=o.nodes||[],l=[],c=0,u=s.length;c<u;c++)l.push(e(s[c],a,n,this));return Promise.all(l).then((function(){return a}))}}(),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"LineSegments2",(function(){return l}));var i,r,o=n(0),a=n(56),s=n(106),l=function(e,t){o.Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==e?e:new a.LineSegmentsGeometry,this.material=void 0!==t?t:new s.a({color:16777215*Math.random()})};l.prototype=Object.assign(Object.create(o.Mesh.prototype),{constructor:l,isLineSegments2:!0,computeLineDistances:(i=new o.Vector3,r=new o.Vector3,function(){for(var e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,a=new Float32Array(2*t.data.count),s=0,l=0,c=t.data.count;s<c;s++,l+=2)i.fromBufferAttribute(t,s),r.fromBufferAttribute(n,s),a[l]=0===l?0:a[l-1],a[l+1]=a[l]+i.distanceTo(r);var u=new o.InstancedInterleavedBuffer(a,2,1);return e.setAttribute("instanceDistanceStart",new o.InterleavedBufferAttribute(u,1,0)),e.setAttribute("instanceDistanceEnd",new o.InterleavedBufferAttribute(u,1,1)),this}),raycast:function(){var e=new o.Vector4,t=new o.Vector4,n=new o.Vector4,i=new o.Vector3,r=new o.Matrix4,a=new o.Line3,s=new o.Vector3;return function(l,c){null===l.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var u=l.ray,h=l.camera,d=h.projectionMatrix,f=this.geometry,p=this.material,m=p.resolution,v=p.linewidth,g=f.attributes.instanceStart,y=f.attributes.instanceEnd;u.at(1,n),n.w=1,n.applyMatrix4(h.matrixWorldInverse),n.applyMatrix4(d),n.multiplyScalar(1/n.w),n.x*=m.x/2,n.y*=m.y/2,n.z=0,i.copy(n);var b=this.matrixWorld;r.multiplyMatrices(h.matrixWorldInverse,b);for(var x=0,w=g.count;x<w;x++){e.fromBufferAttribute(g,x),t.fromBufferAttribute(y,x),e.w=1,t.w=1,e.applyMatrix4(r),t.applyMatrix4(r),e.applyMatrix4(d),t.applyMatrix4(d),e.multiplyScalar(1/e.w),t.multiplyScalar(1/t.w);var _=e.z<-1&&t.z<-1,S=e.z>1&&t.z>1;if(!_&&!S){e.x*=m.x/2,e.y*=m.y/2,t.x*=m.x/2,t.y*=m.y/2,a.start.copy(e),a.start.z=0,a.end.copy(t),a.end.z=0;var M=a.closestPointToPointParameter(i,!0);a.at(M,s);var T=o.MathUtils.lerp(e.z,t.z,M),E=T>=-1&&T<=1,C=i.distanceTo(s)<.5*v;if(E&&C){a.start.fromBufferAttribute(g,x),a.end.fromBufferAttribute(y,x),a.start.applyMatrix4(b),a.end.applyMatrix4(b);var A=new o.Vector3,O=new o.Vector3;u.distanceSqToSegment(a.start,a.end,O,A),c.push({point:O,pointOnLine:A,distance:u.origin.distanceTo(O),object:this,face:null,faceIndex:x,uv:null,uv2:null})}}}}}()})},function(e,t,n){"use strict";(function(t){function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function i(e,t){for(var n,i="",r=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",r=0):r=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),o=s,a=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=s,a=0;continue}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(o+1,s):i=e.slice(o+1,s),r=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return i}var r={resolve:function(){for(var e,r="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var s;a>=0?s=arguments[a]:(void 0===e&&(e=t.cwd()),s=e),n(s),0!==s.length&&(r=s+"/"+r,o=47===s.charCodeAt(0))}return r=i(r,!o),o?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(n(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=i(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];n(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t)return"";if((e=r.resolve(e))===(t=r.resolve(t)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var l=t.length-s,c=a<l?a:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===t.charCodeAt(s+h))return t.slice(s+h+1);if(0===h)return t.slice(s+h)}else a>c&&(47===e.charCodeAt(i+h)?u=h:0===h&&(u=0));break}var d=e.charCodeAt(i+h);if(d!==t.charCodeAt(s+h))break;47===d&&(u=h)}var f="";for(h=i+u+1;h<=o;++h)h!==o&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return f.length>0?f+t.slice(s+u):(s+=u,47===t.charCodeAt(s)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=e.charCodeAt(0),i=47===t,r=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!o){r=a;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var i,r=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,l=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!a){r=i+1;break}}else-1===l&&(a=!1,l=i+1),s>=0&&(c===t.charCodeAt(s)?-1==--s&&(o=i):(s=-1,o=l))}return r===o?o=l:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!a){r=i+1;break}}else-1===o&&(a=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname:function(e){n(e);for(var t=-1,i=0,r=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===r&&(o=!1,r=s+1),46===l?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){i=s+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===i+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}("/",e)},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var i,r=e.charCodeAt(0),o=47===r;o?(t.root="/",i=1):i=0;for(var a=-1,s=0,l=-1,c=!0,u=e.length-1,h=0;u>=i;--u)if(47!==(r=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===r?-1===a?a=u:1!==h&&(h=1):-1!==a&&(h=-1);else if(!c){s=u+1;break}return-1===a||-1===l||0===h||1===h&&a===l-1&&a===s+1?-1!==l&&(t.base=t.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(t.name=e.slice(1,a),t.base=e.slice(1,l)):(t.name=e.slice(s,a),t.base=e.slice(s,l)),t.ext=e.slice(a,l)),s>0?t.dir=e.slice(0,s-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r}).call(this,n(59))},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.a=i},function(e,t,n){"use strict";function i(e,t){for(var n,i=/\r\n|[\n\r]/g,r=1,o=t+1;(n=i.exec(e.body))&&n.index<t;)r+=1,o=t+1-(n.index+n[0].length);return{line:r,column:o}}n.d(t,"a",(function(){return i}))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(51).f,r=n(58),o=n(29)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){n(241);for(var i=n(28),r=n(57),o=n(68),a=n(29)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],h=u&&u.prototype;h&&!h[a]&&r(h,a,c),o[c]=o.Array}},function(e,t,n){(function(e,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",c="[object Array]",u="[object Boolean]",h="[object Date]",d="[object Error]",f="[object Function]",p="[object GeneratorFunction]",m="[object Map]",v="[object Number]",g="[object Object]",y="[object RegExp]",b="[object Set]",x="[object String]",w="[object Symbol]",_="[object WeakMap]",S="[object ArrayBuffer]",M="[object DataView]",T="[object Float32Array]",E="[object Float64Array]",C="[object Int8Array]",A="[object Int16Array]",O="[object Int32Array]",L="[object Uint8Array]",k="[object Uint16Array]",P="[object Uint32Array]",D=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,R=/[&<>"']/g,B=RegExp(F.source),j=RegExp(R.source),z=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,G=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(q.source),$=/^\s+|\s+$/g,X=/^\s+/,Q=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ie=/\w*$/,re=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,le=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,he=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",me="["+fe+"]",ve="["+de+"]",ge="\\d+",ye="[\\u2700-\\u27bf]",be="[a-z\\xdf-\\xf6\\xf8-\\xff]",xe="[^\\ud800-\\udfff"+fe+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",we="\\ud83c[\\udffb-\\udfff]",_e="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ee="(?:"+be+"|"+xe+")",Ce="(?:"+Te+"|"+xe+")",Ae="(?:"+ve+"|"+we+")"+"?",Oe="[\\ufe0e\\ufe0f]?"+Ae+("(?:\\u200d(?:"+[_e,Se,Me].join("|")+")[\\ufe0e\\ufe0f]?"+Ae+")*"),Le="(?:"+[ye,Se,Me].join("|")+")"+Oe,ke="(?:"+[_e+ve+"?",ve,Se,Me,pe].join("|")+")",Pe=RegExp("['’]","g"),De=RegExp(ve,"g"),Ie=RegExp(we+"(?="+we+")|"+ke+Oe,"g"),Ne=RegExp([Te+"?"+be+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[me,Te,"$"].join("|")+")",Ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[me,Te+Ee,"$"].join("|")+")",Te+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Te+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,Le].join("|"),"g"),Fe=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Be=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],je=-1,ze={};ze[T]=ze[E]=ze[C]=ze[A]=ze[O]=ze[L]=ze["[object Uint8ClampedArray]"]=ze[k]=ze[P]=!0,ze[l]=ze[c]=ze[S]=ze[u]=ze[M]=ze[h]=ze[d]=ze[f]=ze[m]=ze[v]=ze[g]=ze[y]=ze[b]=ze[x]=ze[_]=!1;var Ue={};Ue[l]=Ue[c]=Ue[S]=Ue[M]=Ue[u]=Ue[h]=Ue[T]=Ue[E]=Ue[C]=Ue[A]=Ue[O]=Ue[m]=Ue[v]=Ue[g]=Ue[y]=Ue[b]=Ue[x]=Ue[w]=Ue[L]=Ue["[object Uint8ClampedArray]"]=Ue[k]=Ue[P]=!0,Ue[d]=Ue[f]=Ue[_]=!1;var Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,He=parseInt,We="object"==typeof e&&e&&e.Object===Object&&e,qe="object"==typeof self&&self&&self.Object===Object&&self,Ye=We||qe||Function("return this")(),$e=t&&!t.nodeType&&t,Xe=$e&&"object"==typeof i&&i&&!i.nodeType&&i,Qe=Xe&&Xe.exports===$e,Ke=Qe&&We.process,Je=function(){try{var e=Xe&&Xe.require&&Xe.require("util").types;return e||Ke&&Ke.binding&&Ke.binding("util")}catch(e){}}(),Ze=Je&&Je.isArrayBuffer,et=Je&&Je.isDate,tt=Je&&Je.isMap,nt=Je&&Je.isRegExp,it=Je&&Je.isSet,rt=Je&&Je.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var a=e[r];t(i,a,n(a),e)}return i}function st(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function ut(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}function ht(e,t){return!!(null==e?0:e.length)&&wt(e,t,0)>-1}function dt(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function ft(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function pt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function mt(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function vt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function gt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var yt=Tt("length");function bt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function xt(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function wt(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):xt(e,St,n)}function _t(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function St(e){return e!=e}function Mt(e,t){var n=null==e?0:e.length;return n?At(e,t)/n:NaN}function Tt(e){return function(t){return null==t?void 0:t[e]}}function Et(e){return function(t){return null==e?void 0:e[t]}}function Ct(e,t,n,i,r){return r(e,(function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)})),n}function At(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ot(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Lt(e){return function(t){return e(t)}}function kt(e,t){return ft(t,(function(t){return e[t]}))}function Pt(e,t){return e.has(t)}function Dt(e,t){for(var n=-1,i=e.length;++n<i&&wt(t,e[n],0)>-1;);return n}function It(e,t){for(var n=e.length;n--&&wt(t,e[n],0)>-1;);return n}function Nt(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var Ft=Et({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Rt=Et({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bt(e){return"\\"+Ve[e]}function jt(e){return Fe.test(e)}function zt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Ut(e,t){return function(n){return e(t(n))}}function Vt(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[r++]=n)}return o}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Wt(e){return jt(e)?function(e){var t=Ie.lastIndex=0;for(;Ie.test(e);)++t;return t}(e):yt(e)}function qt(e){return jt(e)?function(e){return e.match(Ie)||[]}(e):function(e){return e.split("")}(e)}var Yt=Et({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var $t=function e(t){var n,i=(t=null==t?Ye:$t.defaults(Ye.Object(),t,$t.pick(Ye,Be))).Array,r=t.Date,de=t.Error,fe=t.Function,pe=t.Math,me=t.Object,ve=t.RegExp,ge=t.String,ye=t.TypeError,be=i.prototype,xe=fe.prototype,we=me.prototype,_e=t["__core-js_shared__"],Se=xe.toString,Me=we.hasOwnProperty,Te=0,Ee=(n=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ce=we.toString,Ae=Se.call(me),Oe=Ye._,Le=ve("^"+Se.call(Me).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=Qe?t.Buffer:void 0,Ie=t.Symbol,Fe=t.Uint8Array,Ve=ke?ke.allocUnsafe:void 0,We=Ut(me.getPrototypeOf,me),qe=me.create,$e=we.propertyIsEnumerable,Xe=be.splice,Ke=Ie?Ie.isConcatSpreadable:void 0,Je=Ie?Ie.iterator:void 0,yt=Ie?Ie.toStringTag:void 0,Et=function(){try{var e=Zr(me,"defineProperty");return e({},"",{}),e}catch(e){}}(),Xt=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,Qt=r&&r.now!==Ye.Date.now&&r.now,Kt=t.setTimeout!==Ye.setTimeout&&t.setTimeout,Jt=pe.ceil,Zt=pe.floor,en=me.getOwnPropertySymbols,tn=ke?ke.isBuffer:void 0,nn=t.isFinite,rn=be.join,on=Ut(me.keys,me),an=pe.max,sn=pe.min,ln=r.now,cn=t.parseInt,un=pe.random,hn=be.reverse,dn=Zr(t,"DataView"),fn=Zr(t,"Map"),pn=Zr(t,"Promise"),mn=Zr(t,"Set"),vn=Zr(t,"WeakMap"),gn=Zr(me,"create"),yn=vn&&new vn,bn={},xn=Co(dn),wn=Co(fn),_n=Co(pn),Sn=Co(mn),Mn=Co(vn),Tn=Ie?Ie.prototype:void 0,En=Tn?Tn.valueOf:void 0,Cn=Tn?Tn.toString:void 0;function An(e){if(Ha(e)&&!Da(e)&&!(e instanceof Pn)){if(e instanceof kn)return e;if(Me.call(e,"__wrapped__"))return Ao(e)}return new kn(e)}var On=function(){function e(){}return function(t){if(!Ga(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ln(){}function kn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Pn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Nn;++t<n;)this.add(e[t])}function Rn(e){var t=this.__data__=new In(e);this.size=t.size}function Bn(e,t){var n=Da(e),i=!n&&Pa(e),r=!n&&!i&&Ra(e),o=!n&&!i&&!r&&Ja(e),a=n||i||r||o,s=a?Ot(e.length,ge):[],l=s.length;for(var c in e)!t&&!Me.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ao(c,l))||s.push(c);return s}function jn(e){var t=e.length;return t?e[Fi(0,t-1)]:void 0}function zn(e,t){return Mo(gr(e),Xn(t,0,e.length))}function Un(e){return Mo(gr(e))}function Vn(e,t,n){(void 0!==n&&!Oa(e[t],n)||void 0===n&&!(t in e))&&Yn(e,t,n)}function Gn(e,t,n){var i=e[t];Me.call(e,t)&&Oa(i,n)&&(void 0!==n||t in e)||Yn(e,t,n)}function Hn(e,t){for(var n=e.length;n--;)if(Oa(e[n][0],t))return n;return-1}function Wn(e,t,n,i){return ei(e,(function(e,r,o){t(i,e,n(e),o)})),i}function qn(e,t){return e&&yr(t,xs(t),e)}function Yn(e,t,n){"__proto__"==t&&Et?Et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $n(e,t){for(var n=-1,r=t.length,o=i(r),a=null==e;++n<r;)o[n]=a?void 0:ms(e,t[n]);return o}function Xn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Qn(e,t,n,i,r,o){var a,s=1&t,c=2&t,d=4&t;if(n&&(a=r?n(e,i,r,o):n(e)),void 0!==a)return a;if(!Ga(e))return e;var _=Da(e);if(_){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Me.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return gr(e,a)}else{var D=no(e),I=D==f||D==p;if(Ra(e))return hr(e,s);if(D==g||D==l||I&&!r){if(a=c||I?{}:ro(e),!s)return c?function(e,t){return yr(e,to(e),t)}(e,function(e,t){return e&&yr(t,ws(t),e)}(a,e)):function(e,t){return yr(e,eo(e),t)}(e,qn(a,e))}else{if(!Ue[D])return r?e:{};a=function(e,t,n){var i=e.constructor;switch(t){case S:return dr(e);case u:case h:return new i(+e);case M:return function(e,t){var n=t?dr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case T:case E:case C:case A:case O:case L:case"[object Uint8ClampedArray]":case k:case P:return fr(e,n);case m:return new i;case v:case x:return new i(e);case y:return function(e){var t=new e.constructor(e.source,ie.exec(e));return t.lastIndex=e.lastIndex,t}(e);case b:return new i;case w:return r=e,En?me(En.call(r)):{}}var r}(e,D,s)}}o||(o=new Rn);var N=o.get(e);if(N)return N;o.set(e,a),Xa(e)?e.forEach((function(i){a.add(Qn(i,t,n,i,e,o))})):Wa(e)&&e.forEach((function(i,r){a.set(r,Qn(i,t,n,r,e,o))}));var F=_?void 0:(d?c?qr:Wr:c?ws:xs)(e);return st(F||e,(function(i,r){F&&(i=e[r=i]),Gn(a,r,Qn(i,t,n,r,e,o))})),a}function Kn(e,t,n){var i=n.length;if(null==e)return!i;for(e=me(e);i--;){var r=n[i],o=t[r],a=e[r];if(void 0===a&&!(r in e)||!o(a))return!1}return!0}function Jn(e,t,n){if("function"!=typeof e)throw new ye(o);return xo((function(){e.apply(void 0,n)}),t)}function Zn(e,t,n,i){var r=-1,o=ht,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=ft(t,Lt(n))),i?(o=dt,a=!1):t.length>=200&&(o=Pt,a=!1,t=new Fn(t));e:for(;++r<s;){var u=e[r],h=null==n?u:n(u);if(u=i||0!==u?u:0,a&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else o(t,h,i)||l.push(u)}return l}An.templateSettings={escape:z,evaluate:U,interpolate:V,variable:"",imports:{_:An}},An.prototype=Ln.prototype,An.prototype.constructor=An,kn.prototype=On(Ln.prototype),kn.prototype.constructor=kn,Pn.prototype=On(Ln.prototype),Pn.prototype.constructor=Pn,Dn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Dn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Dn.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Me.call(t,e)?t[e]:void 0},Dn.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:Me.call(t,e)},Dn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},In.prototype.clear=function(){this.__data__=[],this.size=0},In.prototype.delete=function(e){var t=this.__data__,n=Hn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},In.prototype.get=function(e){var t=this.__data__,n=Hn(t,e);return n<0?void 0:t[n][1]},In.prototype.has=function(e){return Hn(this.__data__,e)>-1},In.prototype.set=function(e,t){var n=this.__data__,i=Hn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new Dn,map:new(fn||In),string:new Dn}},Nn.prototype.delete=function(e){var t=Kr(this,e).delete(e);return this.size-=t?1:0,t},Nn.prototype.get=function(e){return Kr(this,e).get(e)},Nn.prototype.has=function(e){return Kr(this,e).has(e)},Nn.prototype.set=function(e,t){var n=Kr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Fn.prototype.add=Fn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Fn.prototype.has=function(e){return this.__data__.has(e)},Rn.prototype.clear=function(){this.__data__=new In,this.size=0},Rn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Rn.prototype.get=function(e){return this.__data__.get(e)},Rn.prototype.has=function(e){return this.__data__.has(e)},Rn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof In){var i=n.__data__;if(!fn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nn(i)}return n.set(e,t),this.size=n.size,this};var ei=wr(li),ti=wr(ci,!0);function ni(e,t){var n=!0;return ei(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function ii(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],a=t(o);if(null!=a&&(void 0===s?a==a&&!Ka(a):n(a,s)))var s=a,l=o}return l}function ri(e,t){var n=[];return ei(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function oi(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=oo),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?oi(s,t-1,n,i,r):pt(r,s):i||(r[r.length]=s)}return r}var ai=_r(),si=_r(!0);function li(e,t){return e&&ai(e,t,xs)}function ci(e,t){return e&&si(e,t,xs)}function ui(e,t){return ut(t,(function(t){return za(e[t])}))}function hi(e,t){for(var n=0,i=(t=sr(t,e)).length;null!=e&&n<i;)e=e[Eo(t[n++])];return n&&n==i?e:void 0}function di(e,t,n){var i=t(e);return Da(e)?i:pt(i,n(e))}function fi(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yt&&yt in me(e)?function(e){var t=Me.call(e,yt),n=e[yt];try{e[yt]=void 0;var i=!0}catch(e){}var r=Ce.call(e);i&&(t?e[yt]=n:delete e[yt]);return r}(e):function(e){return Ce.call(e)}(e)}function pi(e,t){return e>t}function mi(e,t){return null!=e&&Me.call(e,t)}function vi(e,t){return null!=e&&t in me(e)}function gi(e,t,n){for(var r=n?dt:ht,o=e[0].length,a=e.length,s=a,l=i(a),c=1/0,u=[];s--;){var h=e[s];s&&t&&(h=ft(h,Lt(t))),c=sn(h.length,c),l[s]=!n&&(t||o>=120&&h.length>=120)?new Fn(s&&h):void 0}h=e[0];var d=-1,f=l[0];e:for(;++d<o&&u.length<c;){var p=h[d],m=t?t(p):p;if(p=n||0!==p?p:0,!(f?Pt(f,m):r(u,m,n))){for(s=a;--s;){var v=l[s];if(!(v?Pt(v,m):r(e[s],m,n)))continue e}f&&f.push(m),u.push(p)}}return u}function yi(e,t,n){var i=null==(e=vo(e,t=sr(t,e)))?e:e[Eo(jo(t))];return null==i?void 0:ot(i,e,n)}function bi(e){return Ha(e)&&fi(e)==l}function xi(e,t,n,i,r){return e===t||(null==e||null==t||!Ha(e)&&!Ha(t)?e!=e&&t!=t:function(e,t,n,i,r,o){var a=Da(e),s=Da(t),f=a?c:no(e),p=s?c:no(t),_=(f=f==l?g:f)==g,T=(p=p==l?g:p)==g,E=f==p;if(E&&Ra(e)){if(!Ra(t))return!1;a=!0,_=!1}if(E&&!_)return o||(o=new Rn),a||Ja(e)?Gr(e,t,n,i,r,o):function(e,t,n,i,r,o,a){switch(n){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!o(new Fe(e),new Fe(t)));case u:case h:case v:return Oa(+e,+t);case d:return e.name==t.name&&e.message==t.message;case y:case x:return e==t+"";case m:var s=zt;case b:var l=1&i;if(s||(s=Gt),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;i|=2,a.set(e,t);var f=Gr(s(e),s(t),i,r,o,a);return a.delete(e),f;case w:if(En)return En.call(e)==En.call(t)}return!1}(e,t,f,n,i,r,o);if(!(1&n)){var C=_&&Me.call(e,"__wrapped__"),A=T&&Me.call(t,"__wrapped__");if(C||A){var O=C?e.value():e,L=A?t.value():t;return o||(o=new Rn),r(O,L,n,i,o)}}if(!E)return!1;return o||(o=new Rn),function(e,t,n,i,r,o){var a=1&n,s=Wr(e),l=s.length,c=Wr(t).length;if(l!=c&&!a)return!1;var u=l;for(;u--;){var h=s[u];if(!(a?h in t:Me.call(t,h)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);var m=a;for(;++u<l;){h=s[u];var v=e[h],g=t[h];if(i)var y=a?i(g,v,h,t,e,o):i(v,g,h,e,t,o);if(!(void 0===y?v===g||r(v,g,n,i,o):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var b=e.constructor,x=t.constructor;b==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,i,r,o)}(e,t,n,i,xi,r))}function wi(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=me(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var l=(s=n[r])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Rn;if(i)var d=i(c,u,l,e,t,h);if(!(void 0===d?xi(u,c,3,i,h):d))return!1}}return!0}function _i(e){return!(!Ga(e)||(t=e,Ee&&Ee in t))&&(za(e)?Le:ae).test(Co(e));var t}function Si(e){return"function"==typeof e?e:null==e?qs:"object"==typeof e?Da(e)?Oi(e[0],e[1]):Ai(e):tl(e)}function Mi(e){if(!ho(e))return on(e);var t=[];for(var n in me(e))Me.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ti(e){if(!Ga(e))return function(e){var t=[];if(null!=e)for(var n in me(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var i in e)("constructor"!=i||!t&&Me.call(e,i))&&n.push(i);return n}function Ei(e,t){return e<t}function Ci(e,t){var n=-1,r=Na(e)?i(e.length):[];return ei(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Ai(e){var t=Jr(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(n){return n===e||wi(n,e,t)}}function Oi(e,t){return lo(e)&&fo(t)?po(Eo(e),t):function(n){var i=ms(n,e);return void 0===i&&i===t?vs(n,e):xi(t,i,3)}}function Li(e,t,n,i,r){e!==t&&ai(t,(function(o,a){if(r||(r=new Rn),Ga(o))!function(e,t,n,i,r,o,a){var s=yo(e,n),l=yo(t,n),c=a.get(l);if(c)return void Vn(e,n,c);var u=o?o(s,l,n+"",e,t,a):void 0,h=void 0===u;if(h){var d=Da(l),f=!d&&Ra(l),p=!d&&!f&&Ja(l);u=l,d||f||p?Da(s)?u=s:Fa(s)?u=gr(s):f?(h=!1,u=hr(l,!0)):p?(h=!1,u=fr(l,!0)):u=[]:Ya(l)||Pa(l)?(u=s,Pa(s)?u=as(s):Ga(s)&&!za(s)||(u=ro(l))):h=!1}h&&(a.set(l,u),r(u,l,i,o,a),a.delete(l));Vn(e,n,u)}(e,t,a,n,Li,i,r);else{var s=i?i(yo(e,a),o,a+"",e,t,r):void 0;void 0===s&&(s=o),Vn(e,a,s)}}),ws)}function ki(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:void 0}function Pi(e,t,n){t=t.length?ft(t,(function(e){return Da(e)?function(t){return hi(t,1===e.length?e[0]:e)}:e})):[qs];var i=-1;return t=ft(t,Lt(Qr())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ci(e,(function(e,n,r){return{criteria:ft(t,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;for(;++i<a;){var l=pr(r[i],o[i]);if(l){if(i>=s)return l;var c=n[i];return l*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function Di(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var a=t[i],s=hi(e,a);n(s,a)&&Ui(o,sr(a,e),s)}return o}function Ii(e,t,n,i){var r=i?_t:wt,o=-1,a=t.length,s=e;for(e===t&&(t=gr(t)),n&&(s=ft(e,Lt(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=r(s,u,l,i))>-1;)s!==e&&Xe.call(s,l,1),Xe.call(e,l,1);return e}function Ni(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;ao(r)?Xe.call(e,r,1):Zi(e,r)}}return e}function Fi(e,t){return e+Zt(un()*(t-e+1))}function Ri(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Bi(e,t){return wo(mo(e,t,qs),e+"")}function ji(e){return jn(Os(e))}function zi(e,t){var n=Os(e);return Mo(n,Xn(t,0,n.length))}function Ui(e,t,n,i){if(!Ga(e))return e;for(var r=-1,o=(t=sr(t,e)).length,a=o-1,s=e;null!=s&&++r<o;){var l=Eo(t[r]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=a){var u=s[l];void 0===(c=i?i(u,l,s):void 0)&&(c=Ga(u)?u:ao(t[r+1])?[]:{})}Gn(s,l,c),s=s[l]}return e}var Vi=yn?function(e,t){return yn.set(e,t),e}:qs,Gi=Et?function(e,t){return Et(e,"toString",{configurable:!0,enumerable:!1,value:Gs(t),writable:!0})}:qs;function Hi(e){return Mo(Os(e))}function Wi(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=i(o);++r<o;)a[r]=e[r+t];return a}function qi(e,t){var n;return ei(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function Yi(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=e[o];null!==a&&!Ka(a)&&(n?a<=t:a<t)?i=o+1:r=o}return r}return $i(e,t,qs,n)}function $i(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,l=Ka(t),c=void 0===t;r<o;){var u=Zt((r+o)/2),h=n(e[u]),d=void 0!==h,f=null===h,p=h==h,m=Ka(h);if(a)var v=i||p;else v=c?p&&(i||d):s?p&&d&&(i||!f):l?p&&d&&!f&&(i||!m):!f&&!m&&(i?h<=t:h<t);v?r=u+1:o=u}return sn(o,4294967294)}function Xi(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!Oa(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function Qi(e){return"number"==typeof e?e:Ka(e)?NaN:+e}function Ki(e){if("string"==typeof e)return e;if(Da(e))return ft(e,Ki)+"";if(Ka(e))return Cn?Cn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ji(e,t,n){var i=-1,r=ht,o=e.length,a=!0,s=[],l=s;if(n)a=!1,r=dt;else if(o>=200){var c=t?null:Rr(e);if(c)return Gt(c);a=!1,r=Pt,l=new Fn}else l=t?[]:s;e:for(;++i<o;){var u=e[i],h=t?t(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else r(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function Zi(e,t){return null==(e=vo(e,t=sr(t,e)))||delete e[Eo(jo(t))]}function er(e,t,n,i){return Ui(e,t,n(hi(e,t)),i)}function tr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?Wi(e,i?0:o,i?o+1:r):Wi(e,i?o+1:0,i?r:o)}function nr(e,t){var n=e;return n instanceof Pn&&(n=n.value()),mt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function ir(e,t,n){var r=e.length;if(r<2)return r?Ji(e[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=e[o],l=-1;++l<r;)l!=o&&(a[o]=Zn(a[o]||s,e[l],t,n));return Ji(oi(a,1),t,n)}function rr(e,t,n){for(var i=-1,r=e.length,o=t.length,a={};++i<r;){var s=i<o?t[i]:void 0;n(a,e[i],s)}return a}function or(e){return Fa(e)?e:[]}function ar(e){return"function"==typeof e?e:qs}function sr(e,t){return Da(e)?e:lo(e,t)?[e]:To(ss(e))}var lr=Bi;function cr(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:Wi(e,t,n)}var ur=Xt||function(e){return Ye.clearTimeout(e)};function hr(e,t){if(t)return e.slice();var n=e.length,i=Ve?Ve(n):new e.constructor(n);return e.copy(i),i}function dr(e){var t=new e.constructor(e.byteLength);return new Fe(t).set(new Fe(e)),t}function fr(e,t){var n=t?dr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pr(e,t){if(e!==t){var n=void 0!==e,i=null===e,r=e==e,o=Ka(e),a=void 0!==t,s=null===t,l=t==t,c=Ka(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||i&&a&&l||!n&&l||!r)return 1;if(!i&&!o&&!c&&e<t||c&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!l)return-1}return 0}function mr(e,t,n,r){for(var o=-1,a=e.length,s=n.length,l=-1,c=t.length,u=an(a-s,0),h=i(c+u),d=!r;++l<c;)h[l]=t[l];for(;++o<s;)(d||o<a)&&(h[n[o]]=e[o]);for(;u--;)h[l++]=e[o++];return h}function vr(e,t,n,r){for(var o=-1,a=e.length,s=-1,l=n.length,c=-1,u=t.length,h=an(a-l,0),d=i(h+u),f=!r;++o<h;)d[o]=e[o];for(var p=o;++c<u;)d[p+c]=t[c];for(;++s<l;)(f||o<a)&&(d[p+n[s]]=e[o++]);return d}function gr(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function yr(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?Yn(n,s,l):Gn(n,s,l)}return n}function br(e,t){return function(n,i){var r=Da(n)?at:Wn,o=t?t():{};return r(n,e,Qr(i,2),o)}}function xr(e){return Bi((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,a&&so(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),t=me(t);++i<r;){var s=n[i];s&&e(t,s,i,o)}return t}))}function wr(e,t){return function(n,i){if(null==n)return n;if(!Na(n))return e(n,i);for(var r=n.length,o=t?r:-1,a=me(n);(t?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function _r(e){return function(t,n,i){for(var r=-1,o=me(t),a=i(t),s=a.length;s--;){var l=a[e?s:++r];if(!1===n(o[l],l,o))break}return t}}function Sr(e){return function(t){var n=jt(t=ss(t))?qt(t):void 0,i=n?n[0]:t.charAt(0),r=n?cr(n,1).join(""):t.slice(1);return i[e]()+r}}function Mr(e){return function(t){return mt(zs(Ps(t).replace(Pe,"")),e,"")}}function Tr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),i=e.apply(n,t);return Ga(i)?i:n}}function Er(e){return function(t,n,i){var r=me(t);if(!Na(t)){var o=Qr(n,3);t=xs(t),n=function(e){return o(r[e],e,r)}}var a=e(t,n,i);return a>-1?r[o?t[a]:a]:void 0}}function Cr(e){return Hr((function(t){var n=t.length,i=n,r=kn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new ye(o);if(r&&!s&&"wrapper"==$r(a))var s=new kn([],!0)}for(i=s?i:n;++i<n;){var l=$r(a=t[i]),c="wrapper"==l?Yr(a):void 0;s=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[$r(c[0])].apply(s,c[3]):1==a.length&&co(a)?s[l]():s.thru(a)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&Da(i))return s.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}}))}function Ar(e,t,n,r,o,a,s,l,c,u){var h=128&t,d=1&t,f=2&t,p=24&t,m=512&t,v=f?void 0:Tr(e);return function g(){for(var y=arguments.length,b=i(y),x=y;x--;)b[x]=arguments[x];if(p)var w=Xr(g),_=Nt(b,w);if(r&&(b=mr(b,r,o,p)),a&&(b=vr(b,a,s,p)),y-=_,p&&y<u){var S=Vt(b,w);return Nr(e,t,Ar,g.placeholder,n,b,S,l,c,u-y)}var M=d?n:this,T=f?M[e]:e;return y=b.length,l?b=go(b,l):m&&y>1&&b.reverse(),h&&c<y&&(b.length=c),this&&this!==Ye&&this instanceof g&&(T=v||Tr(T)),T.apply(M,b)}}function Or(e,t){return function(n,i){return function(e,t,n,i){return li(e,(function(e,r,o){t(i,n(e),r,o)})),i}(n,e,t(i),{})}}function Lr(e,t){return function(n,i){var r;if(void 0===n&&void 0===i)return t;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=Ki(n),i=Ki(i)):(n=Qi(n),i=Qi(i)),r=e(n,i)}return r}}function kr(e){return Hr((function(t){return t=ft(t,Lt(Qr())),Bi((function(n){var i=this;return e(t,(function(e){return ot(e,i,n)}))}))}))}function Pr(e,t){var n=(t=void 0===t?" ":Ki(t)).length;if(n<2)return n?Ri(t,e):t;var i=Ri(t,Jt(e/Wt(t)));return jt(t)?cr(qt(i),0,e).join(""):i.slice(0,e)}function Dr(e){return function(t,n,r){return r&&"number"!=typeof r&&so(t,n,r)&&(n=r=void 0),t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n,r){for(var o=-1,a=an(Jt((t-e)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=e,e+=n;return s}(t,n,r=void 0===r?t<n?1:-1:ns(r),e)}}function Ir(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=os(t),n=os(n)),e(t,n)}}function Nr(e,t,n,i,r,o,a,s,l,c){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,r,u?o:void 0,u?a:void 0,u?void 0:o,u?void 0:a,s,l,c],d=n.apply(void 0,h);return co(e)&&bo(d,h),d.placeholder=i,_o(d,e,t)}function Fr(e){var t=pe[e];return function(e,n){if(e=os(e),(n=null==n?0:sn(is(n),292))&&nn(e)){var i=(ss(e)+"e").split("e");return+((i=(ss(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Rr=mn&&1/Gt(new mn([,-0]))[1]==1/0?function(e){return new mn(e)}:Ks;function Br(e){return function(t){var n=no(t);return n==m?zt(t):n==b?Ht(t):function(e,t){return ft(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function jr(e,t,n,r,s,l,c,u){var h=2&t;if(!h&&"function"!=typeof e)throw new ye(o);var d=r?r.length:0;if(d||(t&=-97,r=s=void 0),c=void 0===c?c:an(is(c),0),u=void 0===u?u:is(u),d-=s?s.length:0,64&t){var f=r,p=s;r=s=void 0}var m=h?void 0:Yr(e),v=[e,t,n,r,s,f,p,l,c,u];if(m&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<131,s=128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?mr(c,l,t[4]):l,e[4]=c?Vt(e[3],a):t[4]}(l=t[5])&&(c=e[5],e[5]=c?vr(c,l,t[6]):l,e[6]=c?Vt(e[5],a):t[6]);(l=t[7])&&(e[7]=l);128&i&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(v,m),e=v[0],t=v[1],n=v[2],r=v[3],s=v[4],!(u=v[9]=void 0===v[9]?h?0:e.length:an(v[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,n){var r=Tr(e);return function o(){for(var a=arguments.length,s=i(a),l=a,c=Xr(o);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==c&&s[a-1]!==c?[]:Vt(s,c);if((a-=u.length)<n)return Nr(e,t,Ar,o.placeholder,void 0,s,u,void 0,void 0,n-a);var h=this&&this!==Ye&&this instanceof o?r:e;return ot(h,this,s)}}(e,t,u):32!=t&&33!=t||s.length?Ar.apply(void 0,v):function(e,t,n,r){var o=1&t,a=Tr(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=r.length,h=i(u+l),d=this&&this!==Ye&&this instanceof t?a:e;++c<u;)h[c]=r[c];for(;l--;)h[c++]=arguments[++s];return ot(d,o?n:this,h)}}(e,t,n,r);else var g=function(e,t,n){var i=1&t,r=Tr(e);return function t(){var o=this&&this!==Ye&&this instanceof t?r:e;return o.apply(i?n:this,arguments)}}(e,t,n);return _o((m?Vi:bo)(g,v),e,t)}function zr(e,t,n,i){return void 0===e||Oa(e,we[n])&&!Me.call(i,n)?t:e}function Ur(e,t,n,i,r,o){return Ga(e)&&Ga(t)&&(o.set(t,e),Li(e,t,void 0,Ur,o),o.delete(t)),e}function Vr(e){return Ya(e)?void 0:e}function Gr(e,t,n,i,r,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=2&n?new Fn:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],m=t[h];if(i)var v=a?i(m,p,h,t,e,o):i(p,m,h,e,t,o);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!gt(t,(function(e,t){if(!Pt(f,t)&&(p===e||r(p,e,n,i,o)))return f.push(t)}))){d=!1;break}}else if(p!==m&&!r(p,m,n,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Hr(e){return wo(mo(e,void 0,Io),e+"")}function Wr(e){return di(e,xs,eo)}function qr(e){return di(e,ws,to)}var Yr=yn?function(e){return yn.get(e)}:Ks;function $r(e){for(var t=e.name+"",n=bn[t],i=Me.call(bn,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Xr(e){return(Me.call(An,"placeholder")?An:e).placeholder}function Qr(){var e=An.iteratee||Ys;return e=e===Ys?Si:e,arguments.length?e(arguments[0],arguments[1]):e}function Kr(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Jr(e){for(var t=xs(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,fo(r)]}return t}function Zr(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return _i(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=me(e),ut(en(e),(function(t){return $e.call(e,t)})))}:rl,to=en?function(e){for(var t=[];e;)pt(t,eo(e)),e=We(e);return t}:rl,no=fi;function io(e,t,n){for(var i=-1,r=(t=sr(t,e)).length,o=!1;++i<r;){var a=Eo(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&Va(r)&&ao(a,r)&&(Da(e)||Pa(e))}function ro(e){return"function"!=typeof e.constructor||ho(e)?{}:On(We(e))}function oo(e){return Da(e)||Pa(e)||!!(Ke&&e&&e[Ke])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&le.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,n){if(!Ga(n))return!1;var i=typeof t;return!!("number"==i?Na(n)&&ao(t,n.length):"string"==i&&t in n)&&Oa(n[t],e)}function lo(e,t){if(Da(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ka(e))||(H.test(e)||!G.test(e)||null!=t&&e in me(t))}function co(e){var t=$r(e),n=An[t];if("function"!=typeof n||!(t in Pn.prototype))return!1;if(e===n)return!0;var i=Yr(n);return!!i&&e===i[0]}(dn&&no(new dn(new ArrayBuffer(1)))!=M||fn&&no(new fn)!=m||pn&&"[object Promise]"!=no(pn.resolve())||mn&&no(new mn)!=b||vn&&no(new vn)!=_)&&(no=function(e){var t=fi(e),n=t==g?e.constructor:void 0,i=n?Co(n):"";if(i)switch(i){case xn:return M;case wn:return m;case _n:return"[object Promise]";case Sn:return b;case Mn:return _}return t});var uo=_e?za:ol;function ho(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function fo(e){return e==e&&!Ga(e)}function po(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in me(n)))}}function mo(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=an(r.length-t,0),s=i(a);++o<a;)s[o]=r[t+o];o=-1;for(var l=i(t+1);++o<t;)l[o]=r[o];return l[t]=n(s),ot(e,this,l)}}function vo(e,t){return t.length<2?e:hi(e,Wi(t,0,-1))}function go(e,t){for(var n=e.length,i=sn(t.length,n),r=gr(e);i--;){var o=t[i];e[i]=ao(o,n)?r[o]:void 0}return e}function yo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var bo=So(Vi),xo=Kt||function(e,t){return Ye.setTimeout(e,t)},wo=So(Gi);function _o(e,t,n){var i=t+"";return wo(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return st(s,(function(n){var i="_."+n[0];t&n[1]&&!ht(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(Z):[]}(i),n)))}function So(e){var t=0,n=0;return function(){var i=ln(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Mo(e,t){var n=-1,i=e.length,r=i-1;for(t=void 0===t?i:t;++n<t;){var o=Fi(n,r),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var To=function(e){var t=Sa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,i,r){t.push(i?r.replace(te,"$1"):n||e)})),t}));function Eo(e){if("string"==typeof e||Ka(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Co(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ao(e){if(e instanceof Pn)return e.clone();var t=new kn(e.__wrapped__,e.__chain__);return t.__actions__=gr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Oo=Bi((function(e,t){return Fa(e)?Zn(e,oi(t,1,Fa,!0)):[]})),Lo=Bi((function(e,t){var n=jo(t);return Fa(n)&&(n=void 0),Fa(e)?Zn(e,oi(t,1,Fa,!0),Qr(n,2)):[]})),ko=Bi((function(e,t){var n=jo(t);return Fa(n)&&(n=void 0),Fa(e)?Zn(e,oi(t,1,Fa,!0),void 0,n):[]}));function Po(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:is(n);return r<0&&(r=an(i+r,0)),xt(e,Qr(t,3),r)}function Do(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=is(n),r=n<0?an(i+r,0):sn(r,i-1)),xt(e,Qr(t,3),r,!0)}function Io(e){return(null==e?0:e.length)?oi(e,1):[]}function No(e){return e&&e.length?e[0]:void 0}var Fo=Bi((function(e){var t=ft(e,or);return t.length&&t[0]===e[0]?gi(t):[]})),Ro=Bi((function(e){var t=jo(e),n=ft(e,or);return t===jo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gi(n,Qr(t,2)):[]})),Bo=Bi((function(e){var t=jo(e),n=ft(e,or);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gi(n,void 0,t):[]}));function jo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var zo=Bi(Uo);function Uo(e,t){return e&&e.length&&t&&t.length?Ii(e,t):e}var Vo=Hr((function(e,t){var n=null==e?0:e.length,i=$n(e,t);return Ni(e,ft(t,(function(e){return ao(e,n)?+e:e})).sort(pr)),i}));function Go(e){return null==e?e:hn.call(e)}var Ho=Bi((function(e){return Ji(oi(e,1,Fa,!0))})),Wo=Bi((function(e){var t=jo(e);return Fa(t)&&(t=void 0),Ji(oi(e,1,Fa,!0),Qr(t,2))})),qo=Bi((function(e){var t=jo(e);return t="function"==typeof t?t:void 0,Ji(oi(e,1,Fa,!0),void 0,t)}));function Yo(e){if(!e||!e.length)return[];var t=0;return e=ut(e,(function(e){if(Fa(e))return t=an(e.length,t),!0})),Ot(t,(function(t){return ft(e,Tt(t))}))}function $o(e,t){if(!e||!e.length)return[];var n=Yo(e);return null==t?n:ft(n,(function(e){return ot(t,void 0,e)}))}var Xo=Bi((function(e,t){return Fa(e)?Zn(e,t):[]})),Qo=Bi((function(e){return ir(ut(e,Fa))})),Ko=Bi((function(e){var t=jo(e);return Fa(t)&&(t=void 0),ir(ut(e,Fa),Qr(t,2))})),Jo=Bi((function(e){var t=jo(e);return t="function"==typeof t?t:void 0,ir(ut(e,Fa),void 0,t)})),Zo=Bi(Yo);var ea=Bi((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,$o(e,n)}));function ta(e){var t=An(e);return t.__chain__=!0,t}function na(e,t){return t(e)}var ia=Hr((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return $n(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Pn&&ao(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:na,args:[r],thisArg:void 0}),new kn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(r)}));var ra=br((function(e,t,n){Me.call(e,n)?++e[n]:Yn(e,n,1)}));var oa=Er(Po),aa=Er(Do);function sa(e,t){return(Da(e)?st:ei)(e,Qr(t,3))}function la(e,t){return(Da(e)?lt:ti)(e,Qr(t,3))}var ca=br((function(e,t,n){Me.call(e,n)?e[n].push(t):Yn(e,n,[t])}));var ua=Bi((function(e,t,n){var r=-1,o="function"==typeof t,a=Na(e)?i(e.length):[];return ei(e,(function(e){a[++r]=o?ot(t,e,n):yi(e,t,n)})),a})),ha=br((function(e,t,n){Yn(e,n,t)}));function da(e,t){return(Da(e)?ft:Ci)(e,Qr(t,3))}var fa=br((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var pa=Bi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&so(e,t[0],t[1])?t=[]:n>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),Pi(e,oi(t,1),[])})),ma=Qt||function(){return Ye.Date.now()};function va(e,t,n){return t=n?void 0:t,jr(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ga(e,t){var n;if("function"!=typeof t)throw new ye(o);return e=is(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ya=Bi((function(e,t,n){var i=1;if(n.length){var r=Vt(n,Xr(ya));i|=32}return jr(e,i,t,n,r)})),ba=Bi((function(e,t,n){var i=3;if(n.length){var r=Vt(n,Xr(ba));i|=32}return jr(t,i,e,n,r)}));function xa(e,t,n){var i,r,a,s,l,c,u=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw new ye(o);function p(t){var n=i,o=r;return i=r=void 0,u=t,s=e.apply(o,n)}function m(e){return u=e,l=xo(g,t),h?p(e):s}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=a}function g(){var e=ma();if(v(e))return y(e);l=xo(g,function(e){var n=t-(e-c);return d?sn(n,a-(e-u)):n}(e))}function y(e){return l=void 0,f&&i?p(e):(i=r=void 0,s)}function b(){var e=ma(),n=v(e);if(i=arguments,r=this,c=e,n){if(void 0===l)return m(c);if(d)return ur(l),l=xo(g,t),p(c)}return void 0===l&&(l=xo(g,t)),s}return t=os(t)||0,Ga(n)&&(h=!!n.leading,a=(d="maxWait"in n)?an(os(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){void 0!==l&&ur(l),u=0,i=c=r=l=void 0},b.flush=function(){return void 0===l?s:y(ma())},b}var wa=Bi((function(e,t){return Jn(e,1,t)})),_a=Bi((function(e,t,n){return Jn(e,os(t)||0,n)}));function Sa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(o);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Sa.Cache||Nn),n}function Ma(e){if("function"!=typeof e)throw new ye(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Sa.Cache=Nn;var Ta=lr((function(e,t){var n=(t=1==t.length&&Da(t[0])?ft(t[0],Lt(Qr())):ft(oi(t,1),Lt(Qr()))).length;return Bi((function(i){for(var r=-1,o=sn(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return ot(e,this,i)}))})),Ea=Bi((function(e,t){return jr(e,32,void 0,t,Vt(t,Xr(Ea)))})),Ca=Bi((function(e,t){return jr(e,64,void 0,t,Vt(t,Xr(Ca)))})),Aa=Hr((function(e,t){return jr(e,256,void 0,void 0,void 0,t)}));function Oa(e,t){return e===t||e!=e&&t!=t}var La=Ir(pi),ka=Ir((function(e,t){return e>=t})),Pa=bi(function(){return arguments}())?bi:function(e){return Ha(e)&&Me.call(e,"callee")&&!$e.call(e,"callee")},Da=i.isArray,Ia=Ze?Lt(Ze):function(e){return Ha(e)&&fi(e)==S};function Na(e){return null!=e&&Va(e.length)&&!za(e)}function Fa(e){return Ha(e)&&Na(e)}var Ra=tn||ol,Ba=et?Lt(et):function(e){return Ha(e)&&fi(e)==h};function ja(e){if(!Ha(e))return!1;var t=fi(e);return t==d||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ya(e)}function za(e){if(!Ga(e))return!1;var t=fi(e);return t==f||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ua(e){return"number"==typeof e&&e==is(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ga(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ha(e){return null!=e&&"object"==typeof e}var Wa=tt?Lt(tt):function(e){return Ha(e)&&no(e)==m};function qa(e){return"number"==typeof e||Ha(e)&&fi(e)==v}function Ya(e){if(!Ha(e)||fi(e)!=g)return!1;var t=We(e);if(null===t)return!0;var n=Me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Se.call(n)==Ae}var $a=nt?Lt(nt):function(e){return Ha(e)&&fi(e)==y};var Xa=it?Lt(it):function(e){return Ha(e)&&no(e)==b};function Qa(e){return"string"==typeof e||!Da(e)&&Ha(e)&&fi(e)==x}function Ka(e){return"symbol"==typeof e||Ha(e)&&fi(e)==w}var Ja=rt?Lt(rt):function(e){return Ha(e)&&Va(e.length)&&!!ze[fi(e)]};var Za=Ir(Ei),es=Ir((function(e,t){return e<=t}));function ts(e){if(!e)return[];if(Na(e))return Qa(e)?qt(e):gr(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=no(e);return(t==m?zt:t==b?Gt:Os)(e)}function ns(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function is(e){var t=ns(e),n=t%1;return t==t?n?t-n:t:0}function rs(e){return e?Xn(is(e),0,4294967295):0}function os(e){if("number"==typeof e)return e;if(Ka(e))return NaN;if(Ga(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ga(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace($,"");var n=oe.test(e);return n||se.test(e)?He(e.slice(2),n?2:8):re.test(e)?NaN:+e}function as(e){return yr(e,ws(e))}function ss(e){return null==e?"":Ki(e)}var ls=xr((function(e,t){if(ho(t)||Na(t))yr(t,xs(t),e);else for(var n in t)Me.call(t,n)&&Gn(e,n,t[n])})),cs=xr((function(e,t){yr(t,ws(t),e)})),us=xr((function(e,t,n,i){yr(t,ws(t),e,i)})),hs=xr((function(e,t,n,i){yr(t,xs(t),e,i)})),ds=Hr($n);var fs=Bi((function(e,t){e=me(e);var n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&so(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],a=ws(o),s=-1,l=a.length;++s<l;){var c=a[s],u=e[c];(void 0===u||Oa(u,we[c])&&!Me.call(e,c))&&(e[c]=o[c])}return e})),ps=Bi((function(e){return e.push(void 0,Ur),ot(Ss,void 0,e)}));function ms(e,t,n){var i=null==e?void 0:hi(e,t);return void 0===i?n:i}function vs(e,t){return null!=e&&io(e,t,vi)}var gs=Or((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=n}),Gs(qs)),ys=Or((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),Me.call(e,t)?e[t].push(n):e[t]=[n]}),Qr),bs=Bi(yi);function xs(e){return Na(e)?Bn(e):Mi(e)}function ws(e){return Na(e)?Bn(e,!0):Ti(e)}var _s=xr((function(e,t,n){Li(e,t,n)})),Ss=xr((function(e,t,n,i){Li(e,t,n,i)})),Ms=Hr((function(e,t){var n={};if(null==e)return n;var i=!1;t=ft(t,(function(t){return t=sr(t,e),i||(i=t.length>1),t})),yr(e,qr(e),n),i&&(n=Qn(n,7,Vr));for(var r=t.length;r--;)Zi(n,t[r]);return n}));var Ts=Hr((function(e,t){return null==e?{}:function(e,t){return Di(e,t,(function(t,n){return vs(e,n)}))}(e,t)}));function Es(e,t){if(null==e)return{};var n=ft(qr(e),(function(e){return[e]}));return t=Qr(t),Di(e,n,(function(e,n){return t(e,n[0])}))}var Cs=Br(xs),As=Br(ws);function Os(e){return null==e?[]:kt(e,xs(e))}var Ls=Mr((function(e,t,n){return t=t.toLowerCase(),e+(n?ks(t):t)}));function ks(e){return js(ss(e).toLowerCase())}function Ps(e){return(e=ss(e))&&e.replace(ce,Ft).replace(De,"")}var Ds=Mr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Is=Mr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ns=Sr("toLowerCase");var Fs=Mr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Rs=Mr((function(e,t,n){return e+(n?" ":"")+js(t)}));var Bs=Mr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),js=Sr("toUpperCase");function zs(e,t,n){return e=ss(e),void 0===(t=n?void 0:t)?function(e){return Re.test(e)}(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Us=Bi((function(e,t){try{return ot(e,void 0,t)}catch(e){return ja(e)?e:new de(e)}})),Vs=Hr((function(e,t){return st(t,(function(t){t=Eo(t),Yn(e,t,ya(e[t],e))})),e}));function Gs(e){return function(){return e}}var Hs=Cr(),Ws=Cr(!0);function qs(e){return e}function Ys(e){return Si("function"==typeof e?e:Qn(e,1))}var $s=Bi((function(e,t){return function(n){return yi(n,e,t)}})),Xs=Bi((function(e,t){return function(n){return yi(e,n,t)}}));function Qs(e,t,n){var i=xs(t),r=ui(t,i);null!=n||Ga(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ui(t,xs(t)));var o=!(Ga(n)&&"chain"in n&&!n.chain),a=za(e);return st(r,(function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=gr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,pt([this.value()],arguments))})})),e}function Ks(){}var Js=kr(ft),Zs=kr(ct),el=kr(gt);function tl(e){return lo(e)?Tt(Eo(e)):function(e){return function(t){return hi(t,e)}}(e)}var nl=Dr(),il=Dr(!0);function rl(){return[]}function ol(){return!1}var al=Lr((function(e,t){return e+t}),0),sl=Fr("ceil"),ll=Lr((function(e,t){return e/t}),1),cl=Fr("floor");var ul,hl=Lr((function(e,t){return e*t}),1),dl=Fr("round"),fl=Lr((function(e,t){return e-t}),0);return An.after=function(e,t){if("function"!=typeof t)throw new ye(o);return e=is(e),function(){if(--e<1)return t.apply(this,arguments)}},An.ary=va,An.assign=ls,An.assignIn=cs,An.assignInWith=us,An.assignWith=hs,An.at=ds,An.before=ga,An.bind=ya,An.bindAll=Vs,An.bindKey=ba,An.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Da(e)?e:[e]},An.chain=ta,An.chunk=function(e,t,n){t=(n?so(e,t,n):void 0===t)?1:an(is(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,a=0,s=i(Jt(r/t));o<r;)s[a++]=Wi(e,o,o+=t);return s},An.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},An.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return pt(Da(n)?gr(n):[n],oi(t,1))},An.cond=function(e){var t=null==e?0:e.length,n=Qr();return e=t?ft(e,(function(e){if("function"!=typeof e[1])throw new ye(o);return[n(e[0]),e[1]]})):[],Bi((function(n){for(var i=-1;++i<t;){var r=e[i];if(ot(r[0],this,n))return ot(r[1],this,n)}}))},An.conforms=function(e){return function(e){var t=xs(e);return function(n){return Kn(n,e,t)}}(Qn(e,1))},An.constant=Gs,An.countBy=ra,An.create=function(e,t){var n=On(e);return null==t?n:qn(n,t)},An.curry=function e(t,n,i){var r=jr(t,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},An.curryRight=function e(t,n,i){var r=jr(t,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},An.debounce=xa,An.defaults=fs,An.defaultsDeep=ps,An.defer=wa,An.delay=_a,An.difference=Oo,An.differenceBy=Lo,An.differenceWith=ko,An.drop=function(e,t,n){var i=null==e?0:e.length;return i?Wi(e,(t=n||void 0===t?1:is(t))<0?0:t,i):[]},An.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Wi(e,0,(t=i-(t=n||void 0===t?1:is(t)))<0?0:t):[]},An.dropRightWhile=function(e,t){return e&&e.length?tr(e,Qr(t,3),!0,!0):[]},An.dropWhile=function(e,t){return e&&e.length?tr(e,Qr(t,3),!0):[]},An.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&so(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=is(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:is(i))<0&&(i+=r),i=n>i?0:rs(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},An.filter=function(e,t){return(Da(e)?ut:ri)(e,Qr(t,3))},An.flatMap=function(e,t){return oi(da(e,t),1)},An.flatMapDeep=function(e,t){return oi(da(e,t),1/0)},An.flatMapDepth=function(e,t,n){return n=void 0===n?1:is(n),oi(da(e,t),n)},An.flatten=Io,An.flattenDeep=function(e){return(null==e?0:e.length)?oi(e,1/0):[]},An.flattenDepth=function(e,t){return(null==e?0:e.length)?oi(e,t=void 0===t?1:is(t)):[]},An.flip=function(e){return jr(e,512)},An.flow=Hs,An.flowRight=Ws,An.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},An.functions=function(e){return null==e?[]:ui(e,xs(e))},An.functionsIn=function(e){return null==e?[]:ui(e,ws(e))},An.groupBy=ca,An.initial=function(e){return(null==e?0:e.length)?Wi(e,0,-1):[]},An.intersection=Fo,An.intersectionBy=Ro,An.intersectionWith=Bo,An.invert=gs,An.invertBy=ys,An.invokeMap=ua,An.iteratee=Ys,An.keyBy=ha,An.keys=xs,An.keysIn=ws,An.map=da,An.mapKeys=function(e,t){var n={};return t=Qr(t,3),li(e,(function(e,i,r){Yn(n,t(e,i,r),e)})),n},An.mapValues=function(e,t){var n={};return t=Qr(t,3),li(e,(function(e,i,r){Yn(n,i,t(e,i,r))})),n},An.matches=function(e){return Ai(Qn(e,1))},An.matchesProperty=function(e,t){return Oi(e,Qn(t,1))},An.memoize=Sa,An.merge=_s,An.mergeWith=Ss,An.method=$s,An.methodOf=Xs,An.mixin=Qs,An.negate=Ma,An.nthArg=function(e){return e=is(e),Bi((function(t){return ki(t,e)}))},An.omit=Ms,An.omitBy=function(e,t){return Es(e,Ma(Qr(t)))},An.once=function(e){return ga(2,e)},An.orderBy=function(e,t,n,i){return null==e?[]:(Da(t)||(t=null==t?[]:[t]),Da(n=i?void 0:n)||(n=null==n?[]:[n]),Pi(e,t,n))},An.over=Js,An.overArgs=Ta,An.overEvery=Zs,An.overSome=el,An.partial=Ea,An.partialRight=Ca,An.partition=fa,An.pick=Ts,An.pickBy=Es,An.property=tl,An.propertyOf=function(e){return function(t){return null==e?void 0:hi(e,t)}},An.pull=zo,An.pullAll=Uo,An.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ii(e,t,Qr(n,2)):e},An.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ii(e,t,void 0,n):e},An.pullAt=Vo,An.range=nl,An.rangeRight=il,An.rearg=Aa,An.reject=function(e,t){return(Da(e)?ut:ri)(e,Ma(Qr(t,3)))},An.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Qr(t,3);++i<o;){var a=e[i];t(a,i,e)&&(n.push(a),r.push(i))}return Ni(e,r),n},An.rest=function(e,t){if("function"!=typeof e)throw new ye(o);return Bi(e,t=void 0===t?t:is(t))},An.reverse=Go,An.sampleSize=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:is(t),(Da(e)?zn:zi)(e,t)},An.set=function(e,t,n){return null==e?e:Ui(e,t,n)},An.setWith=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:Ui(e,t,n,i)},An.shuffle=function(e){return(Da(e)?Un:Hi)(e)},An.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&so(e,t,n)?(t=0,n=i):(t=null==t?0:is(t),n=void 0===n?i:is(n)),Wi(e,t,n)):[]},An.sortBy=pa,An.sortedUniq=function(e){return e&&e.length?Xi(e):[]},An.sortedUniqBy=function(e,t){return e&&e.length?Xi(e,Qr(t,2)):[]},An.split=function(e,t,n){return n&&"number"!=typeof n&&so(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ss(e))&&("string"==typeof t||null!=t&&!$a(t))&&!(t=Ki(t))&&jt(e)?cr(qt(e),0,n):e.split(t,n):[]},An.spread=function(e,t){if("function"!=typeof e)throw new ye(o);return t=null==t?0:an(is(t),0),Bi((function(n){var i=n[t],r=cr(n,0,t);return i&&pt(r,i),ot(e,this,r)}))},An.tail=function(e){var t=null==e?0:e.length;return t?Wi(e,1,t):[]},An.take=function(e,t,n){return e&&e.length?Wi(e,0,(t=n||void 0===t?1:is(t))<0?0:t):[]},An.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Wi(e,(t=i-(t=n||void 0===t?1:is(t)))<0?0:t,i):[]},An.takeRightWhile=function(e,t){return e&&e.length?tr(e,Qr(t,3),!1,!0):[]},An.takeWhile=function(e,t){return e&&e.length?tr(e,Qr(t,3)):[]},An.tap=function(e,t){return t(e),e},An.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new ye(o);return Ga(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),xa(e,t,{leading:i,maxWait:t,trailing:r})},An.thru=na,An.toArray=ts,An.toPairs=Cs,An.toPairsIn=As,An.toPath=function(e){return Da(e)?ft(e,Eo):Ka(e)?[e]:gr(To(ss(e)))},An.toPlainObject=as,An.transform=function(e,t,n){var i=Da(e),r=i||Ra(e)||Ja(e);if(t=Qr(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:Ga(e)&&za(o)?On(We(e)):{}}return(r?st:li)(e,(function(e,i,r){return t(n,e,i,r)})),n},An.unary=function(e){return va(e,1)},An.union=Ho,An.unionBy=Wo,An.unionWith=qo,An.uniq=function(e){return e&&e.length?Ji(e):[]},An.uniqBy=function(e,t){return e&&e.length?Ji(e,Qr(t,2)):[]},An.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Ji(e,void 0,t):[]},An.unset=function(e,t){return null==e||Zi(e,t)},An.unzip=Yo,An.unzipWith=$o,An.update=function(e,t,n){return null==e?e:er(e,t,ar(n))},An.updateWith=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:er(e,t,ar(n),i)},An.values=Os,An.valuesIn=function(e){return null==e?[]:kt(e,ws(e))},An.without=Xo,An.words=zs,An.wrap=function(e,t){return Ea(ar(t),e)},An.xor=Qo,An.xorBy=Ko,An.xorWith=Jo,An.zip=Zo,An.zipObject=function(e,t){return rr(e||[],t||[],Gn)},An.zipObjectDeep=function(e,t){return rr(e||[],t||[],Ui)},An.zipWith=ea,An.entries=Cs,An.entriesIn=As,An.extend=cs,An.extendWith=us,Qs(An,An),An.add=al,An.attempt=Us,An.camelCase=Ls,An.capitalize=ks,An.ceil=sl,An.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=os(n))==n?n:0),void 0!==t&&(t=(t=os(t))==t?t:0),Xn(os(e),t,n)},An.clone=function(e){return Qn(e,4)},An.cloneDeep=function(e){return Qn(e,5)},An.cloneDeepWith=function(e,t){return Qn(e,5,t="function"==typeof t?t:void 0)},An.cloneWith=function(e,t){return Qn(e,4,t="function"==typeof t?t:void 0)},An.conformsTo=function(e,t){return null==t||Kn(e,t,xs(t))},An.deburr=Ps,An.defaultTo=function(e,t){return null==e||e!=e?t:e},An.divide=ll,An.endsWith=function(e,t,n){e=ss(e),t=Ki(t);var i=e.length,r=n=void 0===n?i:Xn(is(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},An.eq=Oa,An.escape=function(e){return(e=ss(e))&&j.test(e)?e.replace(R,Rt):e},An.escapeRegExp=function(e){return(e=ss(e))&&Y.test(e)?e.replace(q,"\\$&"):e},An.every=function(e,t,n){var i=Da(e)?ct:ni;return n&&so(e,t,n)&&(t=void 0),i(e,Qr(t,3))},An.find=oa,An.findIndex=Po,An.findKey=function(e,t){return bt(e,Qr(t,3),li)},An.findLast=aa,An.findLastIndex=Do,An.findLastKey=function(e,t){return bt(e,Qr(t,3),ci)},An.floor=cl,An.forEach=sa,An.forEachRight=la,An.forIn=function(e,t){return null==e?e:ai(e,Qr(t,3),ws)},An.forInRight=function(e,t){return null==e?e:si(e,Qr(t,3),ws)},An.forOwn=function(e,t){return e&&li(e,Qr(t,3))},An.forOwnRight=function(e,t){return e&&ci(e,Qr(t,3))},An.get=ms,An.gt=La,An.gte=ka,An.has=function(e,t){return null!=e&&io(e,t,mi)},An.hasIn=vs,An.head=No,An.identity=qs,An.includes=function(e,t,n,i){e=Na(e)?e:Os(e),n=n&&!i?is(n):0;var r=e.length;return n<0&&(n=an(r+n,0)),Qa(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&wt(e,t,n)>-1},An.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:is(n);return r<0&&(r=an(i+r,0)),wt(e,t,r)},An.inRange=function(e,t,n){return t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n){return e>=sn(t,n)&&e<an(t,n)}(e=os(e),t,n)},An.invoke=bs,An.isArguments=Pa,An.isArray=Da,An.isArrayBuffer=Ia,An.isArrayLike=Na,An.isArrayLikeObject=Fa,An.isBoolean=function(e){return!0===e||!1===e||Ha(e)&&fi(e)==u},An.isBuffer=Ra,An.isDate=Ba,An.isElement=function(e){return Ha(e)&&1===e.nodeType&&!Ya(e)},An.isEmpty=function(e){if(null==e)return!0;if(Na(e)&&(Da(e)||"string"==typeof e||"function"==typeof e.splice||Ra(e)||Ja(e)||Pa(e)))return!e.length;var t=no(e);if(t==m||t==b)return!e.size;if(ho(e))return!Mi(e).length;for(var n in e)if(Me.call(e,n))return!1;return!0},An.isEqual=function(e,t){return xi(e,t)},An.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?xi(e,t,void 0,n):!!i},An.isError=ja,An.isFinite=function(e){return"number"==typeof e&&nn(e)},An.isFunction=za,An.isInteger=Ua,An.isLength=Va,An.isMap=Wa,An.isMatch=function(e,t){return e===t||wi(e,t,Jr(t))},An.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wi(e,t,Jr(t),n)},An.isNaN=function(e){return qa(e)&&e!=+e},An.isNative=function(e){if(uo(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return _i(e)},An.isNil=function(e){return null==e},An.isNull=function(e){return null===e},An.isNumber=qa,An.isObject=Ga,An.isObjectLike=Ha,An.isPlainObject=Ya,An.isRegExp=$a,An.isSafeInteger=function(e){return Ua(e)&&e>=-9007199254740991&&e<=9007199254740991},An.isSet=Xa,An.isString=Qa,An.isSymbol=Ka,An.isTypedArray=Ja,An.isUndefined=function(e){return void 0===e},An.isWeakMap=function(e){return Ha(e)&&no(e)==_},An.isWeakSet=function(e){return Ha(e)&&"[object WeakSet]"==fi(e)},An.join=function(e,t){return null==e?"":rn.call(e,t)},An.kebabCase=Ds,An.last=jo,An.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=is(n))<0?an(i+r,0):sn(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):xt(e,St,r,!0)},An.lowerCase=Is,An.lowerFirst=Ns,An.lt=Za,An.lte=es,An.max=function(e){return e&&e.length?ii(e,qs,pi):void 0},An.maxBy=function(e,t){return e&&e.length?ii(e,Qr(t,2),pi):void 0},An.mean=function(e){return Mt(e,qs)},An.meanBy=function(e,t){return Mt(e,Qr(t,2))},An.min=function(e){return e&&e.length?ii(e,qs,Ei):void 0},An.minBy=function(e,t){return e&&e.length?ii(e,Qr(t,2),Ei):void 0},An.stubArray=rl,An.stubFalse=ol,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=hl,An.nth=function(e,t){return e&&e.length?ki(e,is(t)):void 0},An.noConflict=function(){return Ye._===this&&(Ye._=Oe),this},An.noop=Ks,An.now=ma,An.pad=function(e,t,n){e=ss(e);var i=(t=is(t))?Wt(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Pr(Zt(r),n)+e+Pr(Jt(r),n)},An.padEnd=function(e,t,n){e=ss(e);var i=(t=is(t))?Wt(e):0;return t&&i<t?e+Pr(t-i,n):e},An.padStart=function(e,t,n){e=ss(e);var i=(t=is(t))?Wt(e):0;return t&&i<t?Pr(t-i,n)+e:e},An.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(ss(e).replace(X,""),t||0)},An.random=function(e,t,n){if(n&&"boolean"!=typeof n&&so(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ns(e),void 0===t?(t=e,e=0):t=ns(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=un();return sn(e+r*(t-e+Ge("1e-"+((r+"").length-1))),t)}return Fi(e,t)},An.reduce=function(e,t,n){var i=Da(e)?mt:Ct,r=arguments.length<3;return i(e,Qr(t,4),n,r,ei)},An.reduceRight=function(e,t,n){var i=Da(e)?vt:Ct,r=arguments.length<3;return i(e,Qr(t,4),n,r,ti)},An.repeat=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:is(t),Ri(ss(e),t)},An.replace=function(){var e=arguments,t=ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},An.result=function(e,t,n){var i=-1,r=(t=sr(t,e)).length;for(r||(r=1,e=void 0);++i<r;){var o=null==e?void 0:e[Eo(t[i])];void 0===o&&(i=r,o=n),e=za(o)?o.call(e):o}return e},An.round=dl,An.runInContext=e,An.sample=function(e){return(Da(e)?jn:ji)(e)},An.size=function(e){if(null==e)return 0;if(Na(e))return Qa(e)?Wt(e):e.length;var t=no(e);return t==m||t==b?e.size:Mi(e).length},An.snakeCase=Fs,An.some=function(e,t,n){var i=Da(e)?gt:qi;return n&&so(e,t,n)&&(t=void 0),i(e,Qr(t,3))},An.sortedIndex=function(e,t){return Yi(e,t)},An.sortedIndexBy=function(e,t,n){return $i(e,t,Qr(n,2))},An.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Yi(e,t);if(i<n&&Oa(e[i],t))return i}return-1},An.sortedLastIndex=function(e,t){return Yi(e,t,!0)},An.sortedLastIndexBy=function(e,t,n){return $i(e,t,Qr(n,2),!0)},An.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Yi(e,t,!0)-1;if(Oa(e[n],t))return n}return-1},An.startCase=Rs,An.startsWith=function(e,t,n){return e=ss(e),n=null==n?0:Xn(is(n),0,e.length),t=Ki(t),e.slice(n,n+t.length)==t},An.subtract=fl,An.sum=function(e){return e&&e.length?At(e,qs):0},An.sumBy=function(e,t){return e&&e.length?At(e,Qr(t,2)):0},An.template=function(e,t,n){var i=An.templateSettings;n&&so(e,t,n)&&(t=void 0),e=ss(e),t=us({},t,i,zr);var r,o,a=us({},t.imports,i.imports,zr),s=xs(a),l=kt(a,s),c=0,u=t.interpolate||ue,h="__p += '",d=ve((t.escape||ue).source+"|"+u.source+"|"+(u===V?ne:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),f="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++je+"]")+"\n";e.replace(d,(function(t,n,i,a,s,l){return i||(i=a),h+=e.slice(c,l).replace(he,Bt),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),h+="';\n";var p=Me.call(t,"variable")&&t.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(D,""):h).replace(I,"$1").replace(N,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Us((function(){return fe(s,f+"return "+h).apply(void 0,l)}));if(m.source=h,ja(m))throw m;return m},An.times=function(e,t){if((e=is(e))<1||e>9007199254740991)return[];var n=4294967295,i=sn(e,4294967295);e-=4294967295;for(var r=Ot(i,t=Qr(t));++n<e;)t(n);return r},An.toFinite=ns,An.toInteger=is,An.toLength=rs,An.toLower=function(e){return ss(e).toLowerCase()},An.toNumber=os,An.toSafeInteger=function(e){return e?Xn(is(e),-9007199254740991,9007199254740991):0===e?e:0},An.toString=ss,An.toUpper=function(e){return ss(e).toUpperCase()},An.trim=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace($,"");if(!e||!(t=Ki(t)))return e;var i=qt(e),r=qt(t);return cr(i,Dt(i,r),It(i,r)+1).join("")},An.trimEnd=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(Q,"");if(!e||!(t=Ki(t)))return e;var i=qt(e);return cr(i,0,It(i,qt(t))+1).join("")},An.trimStart=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(X,"");if(!e||!(t=Ki(t)))return e;var i=qt(e);return cr(i,Dt(i,qt(t))).join("")},An.truncate=function(e,t){var n=30,i="...";if(Ga(t)){var r="separator"in t?t.separator:r;n="length"in t?is(t.length):n,i="omission"in t?Ki(t.omission):i}var o=(e=ss(e)).length;if(jt(e)){var a=qt(e);o=a.length}if(n>=o)return e;var s=n-Wt(i);if(s<1)return i;var l=a?cr(a,0,s).join(""):e.slice(0,s);if(void 0===r)return l+i;if(a&&(s+=l.length-s),$a(r)){if(e.slice(s).search(r)){var c,u=l;for(r.global||(r=ve(r.source,ss(ie.exec(r))+"g")),r.lastIndex=0;c=r.exec(u);)var h=c.index;l=l.slice(0,void 0===h?s:h)}}else if(e.indexOf(Ki(r),s)!=s){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i},An.unescape=function(e){return(e=ss(e))&&B.test(e)?e.replace(F,Yt):e},An.uniqueId=function(e){var t=++Te;return ss(e)+t},An.upperCase=Bs,An.upperFirst=js,An.each=sa,An.eachRight=la,An.first=No,Qs(An,(ul={},li(An,(function(e,t){Me.call(An.prototype,t)||(ul[t]=e)})),ul),{chain:!1}),An.VERSION="4.17.20",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){An[e].placeholder=An})),st(["drop","take"],(function(e,t){Pn.prototype[e]=function(n){n=void 0===n?1:an(is(n),0);var i=this.__filtered__&&!t?new Pn(this):this.clone();return i.__filtered__?i.__takeCount__=sn(n,i.__takeCount__):i.__views__.push({size:sn(n,4294967295),type:e+(i.__dir__<0?"Right":"")}),i},Pn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Pn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Qr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Pn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Pn.prototype[e]=function(){return this.__filtered__?new Pn(this):this[n](1)}})),Pn.prototype.compact=function(){return this.filter(qs)},Pn.prototype.find=function(e){return this.filter(e).head()},Pn.prototype.findLast=function(e){return this.reverse().find(e)},Pn.prototype.invokeMap=Bi((function(e,t){return"function"==typeof e?new Pn(this):this.map((function(n){return yi(n,e,t)}))})),Pn.prototype.reject=function(e){return this.filter(Ma(Qr(e)))},Pn.prototype.slice=function(e,t){e=is(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Pn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=is(t))<0?n.dropRight(-t):n.take(t-e)),n)},Pn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pn.prototype.toArray=function(){return this.take(4294967295)},li(Pn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=An[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);r&&(An.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,s=t instanceof Pn,l=a[0],c=s||Da(t),u=function(e){var t=r.apply(An,pt([e],a));return i&&h?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var h=this.__chain__,d=!!this.__actions__.length,f=o&&!h,p=s&&!d;if(!o&&c){t=p?t:new Pn(this);var m=e.apply(t,a);return m.__actions__.push({func:na,args:[u],thisArg:void 0}),new kn(m,h)}return f&&p?e.apply(this,a):(m=this.thru(u),f?i?m.value()[0]:m.value():m)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Da(r)?r:[],e)}return this[n]((function(n){return t.apply(Da(n)?n:[],e)}))}})),li(Pn.prototype,(function(e,t){var n=An[t];if(n){var i=n.name+"";Me.call(bn,i)||(bn[i]=[]),bn[i].push({name:t,func:n})}})),bn[Ar(void 0,2).name]=[{name:"wrapper",func:void 0}],Pn.prototype.clone=function(){var e=new Pn(this.__wrapped__);return e.__actions__=gr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gr(this.__views__),e},Pn.prototype.reverse=function(){if(this.__filtered__){var e=new Pn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Pn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Da(e),i=t<0,r=n?e.length:0,o=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=sn(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=sn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return nr(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var m=-1,v=e[c+=t];++m<h;){var g=u[m],y=g.iteratee,b=g.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue e;break e}}p[d++]=v}return p},An.prototype.at=ia,An.prototype.chain=function(){return ta(this)},An.prototype.commit=function(){return new kn(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(e){for(var t,n=this;n instanceof Ln;){var i=Ao(n);i.__index__=0,i.__values__=void 0,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},An.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Pn){var t=e;return this.__actions__.length&&(t=new Pn(this)),(t=t.reverse()).__actions__.push({func:na,args:[Go],thisArg:void 0}),new kn(t,this.__chain__)}return this.thru(Go)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return nr(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,Je&&(An.prototype[Je]=function(){return this}),An}();Ye._=$t,void 0===(r=function(){return $t}.call(t,n,t,i))||(i.exports=r)}).call(this)}).call(this,n(54),n(173)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawSimpleInfo=t.imageSplit=t.pointInArea=void 0;var i=s(n(24)),r=s(n(25));t.getMatrixFromCameraParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Vector3(0,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Quaternion,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.Vector3(1,1,1);return(new o.Matrix4).compose(e,t,n)},t.getEulerRotationFromCameraParams=function(e){if(!e)return!1;e instanceof Array&&(e=(new o.Quaternion).fromArray(e));return(new o.Euler).setFromQuaternion(e,"ZXY")};var o=n(0),a=n(154);function s(e){return e&&e.__esModule?e:{default:e}}t.pointInArea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments[2],i=(0,r.default)(e,2),o=i[0],a=i[1],s=1e-5*t,l=o-s,c=a-s,u=o+s,h=a+s,d=(0,r.default)(n,2),f=d[0],p=d[1];return f>l&&f<u&&p>c&&p<h};t.imageSplit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:132,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:132,o=document.createElement("canvas");o.width=n,o.height=r;var a=o.getContext("2d"),s=new Image;s.setAttribute("crossOrigin","anonymous"),s.src=e;var l=new i.default((function(e){s.onload=function(){for(var i=[],l=s.width,c=s.height,u=l/t,h=c,d=n,f=r,p=0;p<t;p++){a.clearRect(0,0,l,c);var m=0+u*p;a.drawImage(s,m,0,u,h,0,0,d,f);var v=o.toDataURL("image/png");i.push(v)}e(i)}}));return l},t.drawSimpleInfo=function(e,t,n){var i=t.width,r=t.height,o=t.borderColor,s=t.borderWidth,l=t.backgroundColor,c=t.borderRadius,u=void 0;return n?(u=n).drawContent([{textList:e}]):u=new a.BasicLabel({scaleNum:6,sizeAttenuation:!0,style:{width:i,height:r,borderColor:o,borderWidth:s,borderRadius:c,backgroundColor:l},center:{x:.5,y:0},content:[{textList:e}]}),u}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";t.__esModule=!0,t.i18n=t.use=t.t=void 0;var i=a(n(406)),r=a(n(31)),o=a(n(407));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,a(n(408)).default)(r.default),l=i.default,c=!1,u=function(){var e=Object.getPrototypeOf(this||r.default).$t;if("function"==typeof e&&r.default.locale)return c||(c=!0,r.default.locale(r.default.config.lang,(0,o.default)(l,r.default.locale(r.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},h=t.t=function(e,t){var n=u.apply(this,arguments);if(null!=n)return n;for(var i=e.split("."),r=l,o=0,a=i.length;o<a;o++){var c=i[o];if(n=r[c],o===a-1)return s(n,t);if(!n)return"";r=n}return""},d=t.use=function(e){l=e||l},f=t.i18n=function(e){u=e||u};t.default={use:d,t:h,i18n:f}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(31),o=(i=r)&&i.__esModule?i:{default:i},a=n(204);var s=o.default.prototype.$isServer?function(){}:n(410),l=function(e){return e.stopPropagation()};t.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(e){this.showPopper=e,this.$emit("input",e)}},showPopper:function(e){this.disabled||(e?this.updatePopper():this.destroyPopper(),this.$emit("input",e))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var t=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,i=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!i&&this.$slots.reference&&this.$slots.reference[0]&&(i=this.referenceElm=this.$slots.reference[0].elm),n&&i&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),t.placement=this.currentPlacement,t.offset=this.offset,t.arrowOffset=this.arrowOffset,this.popperJS=new s(i,n,t),this.popperJS.onCreate((function(t){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)})),"function"==typeof t.onUpdate&&this.popperJS.onUpdate(t.onUpdate),this.popperJS._popper.style.zIndex=a.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",l))}},updatePopper:function(){var e=this.popperJS;e?(e.update(),e._popper&&(e._popper.style.zIndex=a.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(e){!this.popperJS||this.showPopper&&!e||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var e=this.popperJS._popper.getAttribute("x-placement").split("-")[0],t={top:"bottom",bottom:"top",left:"right",right:"left"}[e];this.popperJS._popper.style.transformOrigin="string"==typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(e)>-1?"center "+t:t+" center"}},appendArrow:function(e){var t=void 0;if(!this.appended){for(var n in this.appended=!0,e.attributes)if(/^_v-/.test(e.attributes[n].name)){t=e.attributes[n].name;break}var i=document.createElement("div");t&&i.setAttribute(t,""),i.setAttribute("x-arrow",""),i.className="popper__arrow",e.appendChild(i)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",l),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t]||{};for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];void 0!==o&&(e[r]=o)}}return e}},function(e,t,n){"use strict";t.__esModule=!0,t.isDef=function(e){return null!=e},t.isKorean=function(e){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)}},function(e,t,n){var i=n(134);e.exports=function(e,t,n){return void 0===n?i(e,t,!1):i(e,n,!1!==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=j(n(22)),o=j(n(24)),a=j(n(13)),s=j(n(38)),l=j(n(62)),c=j(n(39)),u=j(n(25)),h=j(n(21)),d=j(n(271)),f=j(n(348)),p=j(n(349)),m=j(n(351)),v=j(n(353)),g=j(n(355)),y=n(79),b=(n(64),n(60)),x=n(40),w=n(0),_=n(17),S=j(n(357)),M=j(n(89)),T=j(n(358)),E=j(n(371)),C=j(n(372)),A=j(n(374)),O=j(n(375)),L=j(n(397)),k=j(n(398)),P=j(n(399)),D=j(n(400)),I=n(127),N=n(67),F=n(90),R=n(46),B=j(n(37));function j(e){return e&&e.__esModule?e:{default:e}}t.default={name:"MapView",components:{Map:d.default,InfoPane:p.default,ErrorPage:m.default,LoadProgress:v.default,IconMap:g.default},mixins:[T.default,E.default,C.default,A.default,O.default,L.default,k.default,P.default,D.default],props:{id:{type:String,default:function(){return"MapView"}},projectId:{type:Number,default:function(){return 0}},tokenRequest:{type:Object,default:function(){return{username:"big_screen_001",password:"9c32daa08e59d3bb25d3617b4bedc578",clientId:"frontend",grantType:"password"}}},cityId:{type:String},roadId:{},rscuSn:{type:String},roadType:{},viewParam:{type:Array},singleCarId:{type:String},hideModel:{type:Boolean,default:function(){return!1}},mix:{type:Boolean,default:function(){return!1}},getMixNum:{type:Boolean,default:function(){return!1}},resourcePath:{type:String,default:function(){return""}},config:{type:Object,default:function(){return{showInfo:!1,legend:!1,isMock:!1,test:!1,showViewInfo:!1,copyButton:{text:"获取",position:"bottomright"},viewType:null,lamp:!0,traffic:!0,closeWs:!1,showTrafficEvent:!0,showPerception:!1}}},mapConfig:{type:Object,default:function(){return{compass:!1,control:!0,renderMode:"tile"}}},serviceConfig:{type:Object,default:function(){return{}}},styleParams:{type:Object,default:function(){return{}}},fonts:{type:Array,default:function(){return[]}},mobileControl:{type:Boolean,default:function(){return!1}},preLoadMessage:{type:String,default:function(){return"三维城市数据加载中"}},defaultQuickCode:{type:Boolean,default:function(){return!0}},showSpeedLabelLayer:{type:Boolean,default:function(){return!1}},showPlateNumberLabelLayer:{type:Boolean,default:function(){return!1}}},data:function(){return{showErrorPage:!1,viewParams:[],lampsInfo:[],loading:!0,realDataStatus:!1,showViewInfo:!1,dialog:!1,wsConfig:{},viewInfo:{},showLabelKey:[],delay:3e3,tileStatus:0,statsData:{},baseInfo:{},drawModelStatus:!1,betterRenderConfig:{removeShake:!0,rectify:!1,insertData:!1},nodeEnv:void 0,render:!0,singleCar:null,showProgress:!1,loadPercent:0,ServiceConfig:{},ViewParam:[],showModel:[],mode:"normal",isShowcarInside:!1,activeRoadId:null,mapLoading:!0,mapControlStatus:!0,randomNum:null}},watch:{hideModel:function(e){this.drawModelStatus=e},singleCarId:function(e){this.singleCar=e},showModel:function(e){var t=this;console.log("filterKey",e);var n=[];this.filterList.forEach((function(t){e.includes(t.key)&&t.bindKeys.forEach((function(e){n.push(e)}))})),this.filterMap&&(0,h.default)(this.filterMap).forEach((function(e){var i=isNaN(Number(e))?e:Number(e);n.includes(i)?t.filterMap[e].show||(t.filterMap[e].show=!0,t.filterMap[e].list.forEach((function(e){e.visible=!0}))):(t.filterMap[e].show=!1,t.filterMap[e].list.forEach((function(e){e.visible=!1})))}))},mode:function(e,t){switch(this.$emit("modeChange",e),t){case"side":this.RoadId=null,this.sideRscu=null,this.pcdObjList.forEach((function(e){e.visible=!1})),this.removeQuoTaLabel();break;case"car":this.followVehicleId=null,this.vehicleMainCar=null,this.carWave.visible=!1,this.setGpsCarShowStatus(!0),this.singleCarWs&&(this.singleCarWs.dispose(),this.singleCarWs=null,this.singleRenderStatus=!1),this.curveLine&&(this.curveLine.visible=!1)}},activeRoadId:function(e,t){e&&this.updateDiamond(e,"Active"),t&&this.updateDiamond(t)},showSpeedLabelLayer:function(e){this.changePerceptionLabelLayerShow(e,"speed")},showPlateNumberLabelLayer:function(e){this.changePerceptionLabelLayerShow(e,"plateNumber")}},beforeDestroy:function(){this.disposeWs()},created:function(){var e=this;this.mix&&(this.eventMixStatus=!0),this.projectId?(0,I.getCustomInfo)({projectid:this.projectId}).then((function(t){t.content.forEach((function(t){var n=t.type,i=t.content;switch(n){case"specialCameraConfig":i&&(e.specialSide=i,e.homeSpecialSide=i);break;case"cameraLabelConfig":i&&(e.cameraLabelMap=i);break;case"serviceConfig":i&&(e.setServicesConfig(i),e.ServiceConfig=i);break;case"viewConfig":if(i){var r=i.delay,o=i.params,a=i.roadId,s=i.rscuSn;e.ViewParam=o.split(",").map((function(e){return Number(e)})),e.showErrorPage=!e.ViewParam||6!==e.ViewParam.length,e.RoadId=a,e.RscuSn=s,e.setDelay(Number(r))}break;case"quickKeyConfig":i&&e.setQuickKeyConfig(i.quickKey);break;case"crossConfig":if(i){console.log(i);var l=(0,h.default)(i).map((function(e){return i[e]}));console.log(l),e.crossConfig=l}}}))})).catch((function(){e.ServiceConfig=e.serviceConfig,e.setServicesConfig(e.ServiceConfig),e.ViewParam=e.viewParam,e.showErrorPage=!e.ViewParam||6!==e.ViewParam.length,e.RoadId=e.roadId,e.RscuSn=e.rscuSn})):(this.ServiceConfig=this.serviceConfig,this.setServicesConfig(this.ServiceConfig),this.ViewParam=this.viewParam,this.showErrorPage=!this.ViewParam||6!==this.ViewParam.length,this.RoadId=this.roadId,this.RscuSn=this.rscuSn),this.createCarFlagCanvas(),this.layerStatus=!0,this.gpsCarShowStatus=!0,this.viewParamsMap={},this.quotaLabelMap={},this.safeEventMap={},this.colorOption={map:{4:{color:"#FFF86A"},3:{color:"#FFB949"},2:{color:"#FC707C"},1:{color:"#E585FF"},default:{color:"#9BB3EF"}},key:"elementType"},this.labelMap={carLabel:[],sideLabel:[],eventLabel:[],mixEventLabel:[]},this.carInfo={},this.gpsRemoveMap={},this.hasLamps=[],this.roadSnMap={},this.delEvent=[],this.eventNum=0,this.perceptionMap={},this.labelCanvasMap={},this.defaultQuickCode&&this.addDefaultQuickCode(),this.trafficLightZ=17},mounted:function(){var e=this,t=document.body.clientHeight;this.mapLayerScale=t/1080,this.ViewParam&&6===this.ViewParam.length?this.viewParams=this.ViewParam.map((function(e){return Number(e)})):this.loading=!1,this.singleCarId&&(this.singleCar=this.singleCarId),this.vehicleList=[],this.trafficLightIconMap={},this.showViewInfo=this.config.showViewInfo,console.log(void 0),this.event=document.createEvent("Event");var n=this,i=new f.default(".copy-btn",{text:function(){var e=n.viewInfo.map((function(e){return e.split(":")[1].trim()})).join(",");return n.event.initEvent("copy_success",!0,!0),n.event.copyValue=e+",0",e+",0"}});i.on("success",(function(){document.dispatchEvent(n.event),top.postMessage(n.event.copyValue,"*"),n.$message("已复制")})),i.on("error",(function(){n.$message("复制失败")})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.setRenderStatus(!0):"hidden"===document.visibilityState&&e.setRenderStatus(!1),console.log("视窗状态",document.visibilityState)}))},methods:{setServicesConfig:function(e){(0,N.setServicesConfig)(e)},mapInit:function(e){var t=this;if(this.map=this.$refs.map,this.Map=this.map.Map,e&&(this.lodLayer=e),this.Map.addPlane(this.Map.viewer,this.mapConfig.lodStyle.plane),this.loadFonts(this.fonts.length?this.fonts:R.fonts).then((function(){t.$emit("trafficInit",e)})),this.loading=!1,this.projectId&&(this.addCarWaves(),this.addActiveWave()),this.config.showViewInfo){if(2===this.config.showViewInfo){var n=window.viewer.scene.basemap.position,i=n.x,r=n.y;n.z;if(window.viewer.scene.basemap.position.set(i,r,.1),this.$refs.map.addGetObj([window.viewer.scene.basemap]),this.mousePos){var o=this.mousePos.split(","),a=(0,u.default)(o,2),s=a[0],l=a[1],c=_.Utils.transformWGS84ToUTM({x:Number(s),y:Number(l)}),h=c.x,d=c.y;this.setMousePoint({location:{x:h,y:d}})}}}else{var f=this.MockRoadId||this.RoadId,p=this.MockRscuSn||this.RscuSn,m=null;this.roadType&&b.ROAD_TYPE[this.roadType]?m=b.ROAD_TYPE[this.roadType].name:this.roadType&&(m=this.roadType),this.baseInfo={crossId:Number(f),rscuSn:p,roadType:m};var v=window.localStorage.getItem("v2x3DToken");if((0,y.isJSON)(v)||(v=null,window.localStorage.removeItem("v2x3DToken")),v){var g=JSON.parse(v).expiresTime;(new Date).getTime()<g?(this.closeWs||this.connectWs(),this.$emit("getToken")):this.getToken()}else this.getToken();this.hasEventIds=[]}},setLod:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.Map.viewer.addEventListener("camera_changed",M.default.throttle((function(){var t=e.Map.viewer.scene.view,n=t.getPivot();if(e.$emit("viewChange",n,t._level),n.x!==1/0&&n.y!==1/0){var i=e.Map.transformUTMToWGS84(n),r=i.x,o=i.y;console.log(r,o,e.lodLayer.maxVisibledLevel,t._level);var a={render:t._level>9,center:[r,o],radius:300};if(e.editor&&(e.editor.lodModelConfig=a,e.editor.lodModels.forEach((function(t){var n=t.x,i=t.y,r=e.Map.transformUTMToWGS84({x:Number(n),y:Number(i)}),o=r.x,a=r.y;e.editor.setLodModels(t,[o,a])}))),e.setPerceptionMapLodModel(a),"car"!==e.mode)if(t._level<9)e.mix&&(e.eventMixStatus=!0,e.labelMap.mixEventLabel.forEach((function(t){t.visible=e.layerStatus&&!0})),e.labelMap.eventLabel.forEach((function(e){e.visible=!1}))),e.sendMixParams([],"signalConnect");else if(e.mix&&(e.eventMixStatus=!1,e.labelMap.mixEventLabel.forEach((function(e){e.visible=!1})),e.labelMap.eventLabel.forEach((function(t){t.visible=e.layerStatus&&!0}))),e.sideMap){var s=[];(0,h.default)(e.sideMap).forEach((function(t){var n=(0,u.default)(e.sideMap[t],2),i=n[0],a=n[1];(0,F.pointInArea)([r,o],1500,[i,a])&&(s.push(t),e.hasLamps.includes(t)||(e.fetchLights(t,{scaleNum:3,sizeAttenuation:!0}),e.hasLamps.push(t)))})),e.sendMixParams(s,"signalConnect")}}else console.warn("视野中心超过了天际线，无法获取坐标")}),t)),this.Map.viewer.addEventListener("camera_changed",M.default.debounce((function(){var t=e.Map.viewer.scene.view,n=t.getPivot();if(n.x!==1/0&&n.y!==1/0){var i=e.Map.transformUTMToWGS84(n),r=i.x,o=i.y;t._level<9?e.mix&&e.sendMixParams({lng:0,lat:0,dis:300,vehID:""},"mixWs"):e.mix&&e.sendMixParams({lng:r,lat:o,dis:300,vehID:""},"mixWs")}else console.warn("视野中心超过了天际线，无法获取坐标")}),t)),this.Map.viewer.addEventListener("level_change",(function(){var t=e.Map.viewer.scene.view;e.$emit("levelChange",t._level)}))},setPerceptionMapLodModel:function(e){var t=this;this.perceptionMap&&(0,h.default)(this.perceptionMap).forEach((function(n){var i=t.perceptionMap[n];i.lodModelConfig=e,i.colorOption=t.colorOption}))},getUrl:function(e,t,n){return(n?"https:":"http:")+"//"+e+t},getToken:(i=(0,c.default)(s.default.mark((function e(){var t,n,i,r,o,a,c=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ServiceConfig,n=t.ip,i=t.ssl,r=t.tokenUrl,o=this.getUrl(n,r,i),a=this.tokenRequest,e.next=5,(0,x.post)(o,a).then((function(e){var t=e.data;console.log(t);var n=t.expiresIn,i={token:t.accessToken,expiresTime:n||new Date+36e6};window.localStorage.setItem("v2x3DToken",(0,l.default)(i)),c.connectWs(),c.$emit("getToken")})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),connectWs:function(){var e=this.MockRoadId||this.RoadId,t=this.MockRscuSn||this.RscuSn;"singleCar"===this.config.viewType?this.connectSingleVehicle():(this.config.lamp&&(this.fetchLights(e),this.connectSignalWs(e)),this.config.traffic&&this.connectTraffic({dataRange:0,rscuSn:t}))},setPosition:function(){this.$refs.map.resetPosition()},setTimeLine:function(e){var t=this;if(this.timeLine=e,this.singleRenderStatus&&this.singleBuffer&&this.singleBuffer.length){var n=0,i=this.singleBuffer.find((function(e,i){return e.platformTime===t.timeLine&&(n=i,!0)}));if(i){var r=M.default.cloneDeep(this.singleBuffer.slice(n));this.$emit("preLine",r),this.$emit("perceptionSingleCar",i),this.playSingleCar(i),setTimeout((function(){t.singleBuffer.splice(0,n+1)}),0)}}this.getPerceptionNum(null,e)},getRenderData:function(e,t){var n=this;this.$emit("getRenderData",e,t);var i=t.name;if(this.singleRenderStatus&&this.gpsCarShowStatus&&setTimeout((function(){n.setGpsCarShowStatus(!1)}),0),!e||!e.length||!this.mix)return!1;if("car"===this.mode){if("single"===i)return}else if("normal"===i)return;var r=e.filter((function(e){return e.type>99})).map((function(e){var t=e.extra,i=e.id,r=e.heading,o=e.type;n.gpsRemoveMap[i]&&(clearTimeout(n.gpsRemoveMap[i]),delete n.gpsRemoveMap[i]);var s=(0,a.default)({},e,{vehicleId:i,headingAngle:r,thirdPlatform:o-100},t,{isMoving:!t.isMoving});return delete s.extra,delete s.id,delete s.heading,s})),o=r.map((function(e){return e.vehicleId}));this.modelList.forEach((function(e){var t=e.vehicleId;t===n.followVehicleId||o.includes(t)||n.gpsRemoveMap[t]||(n.gpsRemoveMap[t]=setTimeout((function(){e.visible=!1;var t=n.labelMap.carLabel.find((function(e){e.vehicleId}));t&&(t.visible=!1)}),6e4))})),this.setGpsCars(r)},getWsUrl:function(e){var t,n,i=this.ServiceConfig;return t=i.ip,n=i.ssl?"wss":"ws",(0,y.getWsType)(""+t+e,n)},getViewParam:function(e){var t=[];this.viewInfo=(0,h.default)(e).map((function(n){return t.push(e[n]),n+": "+e[n].toFixed(7)})),this.$emit("getViewInfo",t.join(","))},formatLabel:function(e,t){switch(t){case"id":return e;case"speed":return(3.6*e).toFixed(1)+"km/h";case"heading":return e.toFixed(1)+"°"}},getObj:function(e,t){this.$emit("getObj",e,t),2===this.showViewInfo&&this.setMousePoint(t)},setMousePoint:function(e){var t=e.location,n=S.default.transformUTMToWGS84(t),i=n.x,r=n.y;console.log("鼠标坐标",i,r),this.mousePosition=i.toFixed(6)+","+r.toFixed(6),this.mousePoint?this.mousePoint.position.set(t.x,t.y,.2):(this.mousePoint=new _.Point({color:"#EC3C3C",vertices:[[t.x,t.y,.2]],size:1}),this.$refs.map.addModel(this.mousePoint))},setTrafficEvent:function(e){var t=this,n=e?e.map((function(e){return e.id})):[],i=n.filter((function(e){return-1===t.hasEventIds.indexOf(e)})),r=this.hasEventIds.filter((function(e){return-1===n.indexOf(e)}));if(i.length>0){var o=e.filter((function(e,n){var r=e.id,o=(e.eventName,e.longitude),a=e.latitude,s=(e.pointList,e.eventContent);if(o&&a){var l=i.includes(r)&&!b.CAR_EVENT_LIST.includes(s);return l&&t.hasEventIds.push(e.id),l}}));this.config.showTrafficEvent&&this.addTrafficEvents(o),this.$emit("addTrafficEvents",o)}r.length>0&&(r.forEach((function(e,n){var i=t.hasEventIds.findIndex((function(t){return t===e}));-1!==i&&t.hasEventIds.splice(i,1)})),this.config.showTrafficEvent&&this.removeTrafficEvents(r),this.$emit("removeTrafficEvents",r))},drawLabel:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"label",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=n.content,l=n.size,c=n.bg,d=l.width*r,f=l.height*r;e&&(0,h.default)(e).forEach((function(t){s[t]&&(s[t].text=e[t])}));var p=(0,u.default)(t,3),m=p[0],v=p[1],g=p[2],y=w.MathUtils.ceilPowerOfTwo(d),b=(w.MathUtils.ceilPowerOfTwo(f),{width:y,height:y*(f/d),factor:{x:y/d,y:y/d}});return this.createLabelCanvas(s,c,b,r).then((function(e){var t=e.canvas,n=e.textCanvas,r=o.labelClass,s=o.extendOptions,l=new(r||_.Label)((0,a.default)({name:i,mainView:t,factor:b.factor,scaleNum:.5},s));return l.position.set(m,v,g),l.update(n,[0,0,d,f]),l.center=[0,0],window.viewer.scene.addTrafficLight(l),l}))},updateLabel:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{scaleNum:3,shadowPadding:0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=M.default.cloneDeep(n),a=o.content,s=i.scaleNum,l=i.shadowPadding;(0,h.default)(t).forEach((function(e){a[e]&&(a[e].text=t[e])})),(0,h.default)(a).forEach((function(e){a[e].size=a[e].size*s,a[e].position=a[e].position.map((function(e){return(e+l)*s}))})),e.updateInfo((0,h.default)(a).map((function(e){return a[e]})),[0,0],r,s)},drawTrafficLabel:function(e,t){var n=document.createElement("canvas"),i=n.getContext("2d");i.font="12px PingFangSC-Medium";var r=i.measureText(e),o=20+r.width+20,a=w.MathUtils.ceilPowerOfTwo(o),s=w.MathUtils.ceilPowerOfTwo(71.5),l={width:a,height:s,factor:{x:a/o,y:s/71.5}};return n.width=a,n.height=s,this.$refs.map.drawRect(n,{x:0,y:0,width:o*l.factor.x,height:28*l.factor.y,fillColor:"rgba(255, 97, 97, 0.8)",border:{radius:4*l.factor.x,width:1,color:"rgba(255, 97, 97, 0.8)"}}),i.beginPath(),i.moveTo(14*l.factor.x,28*l.factor.y),i.lineTo(14*l.factor.x,s),i.stroke(),this.loadImg(t).then((function(t){return i.drawImage(t,10*l.factor.x,7*l.factor.y,14*l.factor.x,14*l.factor.y),i.textAlign="left",i.textBaseline="top",i.font=12*l.factor.y+"px PingFangSC-Medium",i.fillStyle="#ffffff",i.fillText(e,30*l.factor.x,7*l.factor.y,r.width*l.factor.x),{canvas:n,config:l}}))},loadImg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://mapdata.bj.bcebos.com",n=new Image;return n.crossOrigin="Anonymous",n.src=""===this.resourcePath?t+e:this.resourcePath+e,new o.default((function(e){n.addEventListener("load",(function(){e(n)}))}))},createLabelCanvas:function(e,t,n,i,r){var a=this,l=n.height,u=n.width,d=n.factor,f=(n.blur,d.x),p=d.y,m=document.createElement("canvas"),v=document.createElement("canvas");document.createElement("canvas");m.width=u,m.height=l,v.width=u,v.height=l;var g=m.getContext("2d"),y=v.getContext("2d"),b=t.map((function(e){return a.loadImg(e.url,r)}));return o.default.all(b).then((function(n){var r;return n.forEach((function(e,n){var r=e,o=t[n];g.drawImage(r,o.position[0]*f,o.position[1]*p,o.size[0]*f*i,o.size[1]*p*i)})),(0,h.default)(e).forEach((r=(0,c.default)(s.default.mark((function t(n){var r,o,l,c,u,h,d,m;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e[n],o=r.text,l=r.position,c=r.size,u=r.color,h=r.fontFamily,d=r.textAlign,y.font=c*p*i+"px "+h,y.fillStyle=u,y.textAlign=d||"left",y.textBaseline="top",m=y.measureText(o).width,y.fillText(o,l[0]*f*i,l[1]*p*i,m/p*i);case 7:case"end":return t.stop()}}),t,a)}))),function(e){return r.apply(this,arguments)})),{canvas:m,textCanvas:v}}))},setRenderStatus:function(e){var t=this;this.render=e,this.render||(this.$refs.map&&this.$refs.map.resetRender(),this.SinglePerception&&this.$refs.map.resetRender(this.SinglePerception),this.perceptionMap&&(0,h.default)(this.perceptionMap).forEach((function(e){t.perceptionMap[e]&&t.$refs.map.resetRender(t.perceptionMap[e])})))},singleRender:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{needTileData:!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments[4];if(!e)return console.log("单车数据 空帧"),!1;this.singleCarOptions={render:t,options:n,extraModes:i,mainCar:r},this.singleBuffer.push(e),this.vehicleMainCar||this.playSingleCar(e),this.playSingleObstacles(e,t,n)},playSingleCar:function(e){var t=this,n=this.singleCarOptions,i=n.options,r=n.extraModes,o=n.mainCar,a=n.render,s=i.singleCarId||this.singleCarId,l=e.carId,c=e.headingAngle,u=e.latitude,d=e.longitude,f=e.carType,p=e.speed,m=(e.vehicleId,_.Utils.transformWGS84ToUTM({x:d,y:u})),v=m.x,g=m.y,y=0;if(y=c>180?360-c:-c,this.vehicleMainCar){this.vehicleMainCar.position.set(v,g,i.z||.2),this.vehicleMainCar.heading=y||0,this.vehicleMainCar.rotation.z=_.Utils.degreeToRadian(180+y);var b=this.labelMap.carLabel.find((function(e){return e.vehicleId===t.vehicleMainCar.vehicleId}));this.updateCarLabel(b,{speed:Math.floor(p>0?p:0)},3,b.offline),this.vehicleMainCar.vehicleId===s&&(this.moveCount%10<1||this.diffentTrack)&&this.Map.followObj(this.vehicleMainCar,i.inSide)}else{var x="";switch(Number(f)){case 0:x="robotaxi";break;case 1:x="robobus";break;case 2:x="apollocop"}var w=o||new _.Model({modelUrl:"https://mapdata.bj.bcebos.com/model/guangzhou/"+x+".glb",modelType:x});w.name=l,w.rotation.z=_.Utils.degreeToRadian(180+y),w.heading=y||0,w.vehicleId=l,w.position.x=v,w.position.y=g,w.position.z=i.z||.2,w.scale.set(1,1,1),w.needsUpdate=!0,w.visible=!0,this.vehicleMainCar=w,this.Map.addModel(w),this.Map.followObj(this.vehicleMainCar,i.inSide)}r.length&&r.forEach((function(e){var t=e.mode,n=e.options;t.position.set(v,g,n.z||.2),t.visible=!0})),i.needTileData&&this.$refs.map.getMapDataByTile(d,u,400,"car",{city:this.cityId}),this.moveCount+=1,setTimeout((function(){if(i.intersectModel){var e=a._models,n=(0,h.default)(e).map((function(t){return e[t]}));S.default.intersectModels(t.vehicleMainCar,n)}}),0)},singleGpsRender:function(e,t){var n=this;e&&e.length&&(this.singleGpsTimeStamp||(this.singleGpsTimeStamp=e[0].platformTime),e[0].platformTime-this.singleGpsTimeStamp>this.delay&&(this.singleGpsBuffer[0].forEach((function(e){var i=e.carId,r=e.headingAngle,o=e.latitude,a=e.longitude,s=e.carType;if(n.vehicleMainCar&&i!==n.vehicleMainCar.vehicleId){var l=_.Utils.transformWGS84ToUTM({x:a,y:o}),c=l.x,u=l.y,h=0;h=r>180?360-r:-r;var d=n.singleGpsList.find((function(e){return e.vehicleId===i})),f=(t.labels||[]).find((function(e){return e.vehicleId===i}));if(f.position.set(c,u,t.labelZ||.2),f.visible=!0,d)d.position.set(c,u,t.z||.2),d.heading=h||0,d.rotation.z=_.Utils.degreeToRadian(180+h);else{var p="";switch(Number(s)){case 0:p="robotaxi";break;case 1:p="robobus";break;case 2:p="apollocop"}var m=new _.Model({modelUrl:"https://mapdata.bj.bcebos.com/model/guangzhou/"+p+".glb",modelType:p});m.name=i,m.rotation.z=_.Utils.degreeToRadian(180+h),m.heading=h||0,m.vehicleId=i,m.position.x=c,m.position.y=u,m.position.z=t.z||.2,m.scale.set(1,1,1),n.$refs.map.addModel(m),n.singleGpsList.push(m)}}})),setTimeout((function(){n.singleGpsBuffer.splice(0,1)}),0)),this.singleGpsBuffer.push(e))},playSingleObstacles:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.SinglePerception=t,this.render){var r=e.obstacles,o=e.platformTime,a=i.z,s=i.singleColorMap,l=s||{0:"#2887E7",1:"#7FA3E0",4:"#6BC9BF"};this.modelData=r,r.forEach((function(e){var t="";n.showLabelKey.forEach((function(i,r){t+=(r?"，":"")+n.formatLabel(e[i],i)})),4===Number(e.source)&&console.log("融合感知",e),e.carColor=l[e.source],e.label=""===t?null:t,e.heading=_.Utils.degreeToRadian(e.headingAngle-90)/(Math.PI/180),e.longitude=Number(e.longitude.toFixed(7)),e.latitude=Number(e.latitude.toFixed(7)),e.z=a||.2})),this.$refs.map.drawModels(this.modelData,{timestamp:o,delay:this.delay,delayType:"byTime",rate:2},t)}},disposeWs:function(){console.log("dispose"),this.signalWs&&this.signalWs.dispose(),this.eventsWs&&this.eventsWs.dispose(),this.controlWs&&this.controlWs.dispose(),this.mixEventWsContract&&this.mixEventWsContract.dispose(),this.mixWsContract&&this.mixWsContract.dispose(),this.signalConnectContract&&this.signalConnectContract.dispose(),this.deviceWsContract&&this.deviceWsContract.dispose()},setDelay:function(e){this.delay=e},createFilter:function(e){var t=this;this.filterList=e,this.filterMap={},e.forEach((function(e){var n=e.key;e.bindKeys.forEach((function(e){t.filterMap[e]={show:!0,list:[]}})),t.showModel.push(n)}))},setFilterItem:function(e,t){this.filterMap&&this.filterMap[e]&&this.filterMap[e].list.push(t)},getFilterVisible:function(e){return!this.filterMap||!this.filterMap[e]||this.filterMap[e].show},addClickEvent:function(e,t){var n=this;this.eventFlag=0,e.addEventListener("mousedown",(function(e){n.eventFlag=0})),e.addEventListener("mousemove",(function(e){n.eventFlag=1})),e.addEventListener("mouseup",(function(e){0===n.eventFlag&&(t(e),n.$emit("clickObj",e.target))}))},removeLabel:function(e,t){var n=this.labelMap[t],i=n.findIndex((function(t){return t.name===e.name}));n.splice(i,1),this.Map.viewer.scene.removeAnimateObject(e)},defaultEventDispatcher:function(e){if(!this.config.closeDefaultClick)switch(e.type){case"robotaxi":this.carType=1,this.focusCar(e);break;case"robobus":this.carType=2,this.focusCar(e);break;case"robocop":this.carType=3,this.focusCar(e);break;case"netCar":this.carType=4,this.focusCar(e);break;case"minibus":this.carType=5,this.focusCar(e);break;case"trafficEvent":this.goToSide(e.roadId,{type:"event"});break;case"copEvent":var t=e.bottomColorMap[e.source].color;this.activeEvent&&(this.activeEvent.setActive(!1),this.updateActiveWave(e.position,t,!1)),this.focusEvent(e),this.activeEvent=e,this.activeEvent.setActive(!0),this.updateActiveWave(e.position,t);break;case"attack":case"side":this.mode="side",this.goToSide(e.roadId)}},focusCar:function(e){var t=e.vehicleId;if(!t||this.followVehicleId===t)return!1;this.mode="car",this.followVehicleId=t;var n=this.carBaseInfoMap[t];this.carInfo.type=n.carType.toUpperCase(),this.carInfo.carNumber=n.licenseNumber,this.carInfo.carId=t,n.netCarLabel&&(this.carInfo.netCarLabel=n.netCarLabel);var i=this.modelList.find((function(e){return e.vehicleId===t}));this.singleRenderStatus||this.followCar(i),this.mix?this.sendMixParams({vehID:t,dis:500},"mixWs"):this.connectSingleCar(t)},focusEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;n="object"!==(void 0===e?"undefined":(0,r.default)(e))?window.viewer.scene.getObjectByName(e):e;var i=window.viewer.getCameraPosition(),o=i.pitch,a=i.yaw,s=n.position,l=s.x,c=s.y,u=this.Map.transformUTMToWGS84({x:l,y:c-25}),h=u.x,d=u.y,f=[t.lon||h,t.lat||d,t.z||12,t.pitch||o,t.yaw||a,0];this.map.animationTo(f,1e3,!1)},resetNormal:function(){this.singleCarWs&&(this.singleCarWs.dispose(),this.singleRenderStatus=!1),"car"===this.mode&&(this.setGpsCarShowStatus(!0),this.curveLine&&(this.curveLine.visible=!1)),["event","side"].includes(this.mode)&&(this.activeRoadId=null,this.eventsWs&&this.eventsWs.dispose(),this.connectTraffic({dataRange:0,rscuSn:this.allRscuSn},{z:.7})),this.mode="normal",this.carWave.visible=!1,this.pcdObjList.forEach((function(e){e.visible=!1})),this.updateActiveWave(null,null,!1),this.RoadId=null,this.sideRscu=null,this.followVehicleId=null,this.singleRenderStatus=!1,this.vehicleMainCar=null,this.setVisibleOfDistinctFlow(!0),this.activeEvent&&this.activeEvent.setActive(!1),this.map.animationTo(this.rootView||this.ViewParam,1e3,!1)},setRootView:function(e){this.rootView=e},resetSideView:function(){this.map.animationTo(this.viewParamsMap[this.activeRoadId],400,!0)},resetPosition:function(){var e=this.rootView||this.ViewParam;switch(this.mode){case"normal":this.map.animationTo(e,1e3,!0);break;case"side":this.resetSideView();break;case"home":this.map.animationTo(e,1e3,!0)}},zoomIn:function(){this.map.zoomIn()},zoomOut:function(){this.map.zoomOut()},setStatisticsKey:function(e){this.statisticsKey=e},getPerceptionNum:function(e,t){var n=this,i={},r=e?e._models:this.map.perception._models;this.getMixNum?(0,h.default)(r).forEach((function(e){var t=r[e],o=t.name,a=t.subType,s=t.eventType,l=void 0;o.indexOf("_")>-1&&(l=o.split("_")[0]),i[l]||(i[l]={eventModels:{num:0,name:"绑定事件模型"}}),i[l][a]?i[l][a].num+=1:i[l][a]={num:1,name:b.CAR_TYPE[a].name},s&&(i[l].eventModels.num+=1);var c=void 0;n.statisticsKey&&(c=r[e][n.statisticsKey],i[l][a][n.statisticsKey]||(i[l][a][n.statisticsKey]={}),i[l][a][n.statisticsKey][c]||(i[l][a][n.statisticsKey][c]=0),i[l][a][n.statisticsKey][c]+=1)})):(i.eventModels={num:0,name:"绑定事件模型"},(0,h.default)(r).forEach((function(e){var t=r[e],o=t.subType,a=t.eventType;i[o]?i[o].num+=1:i[o]={num:1,name:b.CAR_TYPE[o].name},a&&(i.eventModels.num+=1);var s=void 0;n.statisticsKey&&(s=r[e][n.statisticsKey],i[o][n.statisticsKey]||(i[o][n.statisticsKey]={}),i[o][n.statisticsKey][s]||(i[o][n.statisticsKey][s]=0),i[o][n.statisticsKey][s]+=1)}))),this.$emit("getPerceptionNum",i,t)},changeControlShow:function(e){this.mapControlStatus=e},computeRandom:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];this.mobileControlConfig||(this.mobileControlConfig=n);var i=this.mobileControlConfig,r=i.cityCode,o=i.ip,a=i.ssl,s=i.sdkControl,c=JSON.parse(window.localStorage.getItem("randomInfo"));if(c&&!t&&c.expireTime>(new Date).getTime())this.randomNum=c.num;else{for(var u="",h=0;h<e;h++)u+=Math.floor(10*Math.random());this.randomNum=u;var d={num:u,expireTime:1e3*(0,B.default)((new Date).toLocaleDateString()).add(1,"d").unix()};window.localStorage.setItem("randomInfo",(0,l.default)(d))}this.controlWs&&(this.controlWs.dispose(),this.controlWs=null);var f=null;o&&(f={ip:o,ssl:a}),this.connectControl(r,this.randomNum,s,f)},getScreenMousePosition:function(e){var t=e.project(this.Map.viewer.scene.getActiveCamera().clone()),n=this.Map.viewer.renderer.domElement.clientWidth/2,i=this.Map.viewer.renderer.domElement.clientHeight/2,r=Math.round(n*t.x+n),o=Math.round(-i*t.y+i);return console.log(r,o),{x:r,y:o}},getScreenModelCenter:function(e){var t=e.matrixWorld;e.updateMatrixWorld(!0);var n=_.Utils.computeTransformedBoundingBox(e.boundingBox,t).getCenter(),i=n.x,r=n.y,o=n.z,a=new w.Vector3(i,r,o);return this.getScreenMousePosition(a)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=m(n(38)),o=m(n(24)),a=m(n(39)),s=m(n(25)),l=m(n(13)),c=m(n(21)),u=(m(n(89)),m(n(174))),h=m(n(334)),d=n(127),f=n(17),p=n(0);function m(e){return e&&e.__esModule?e:{default:e}}t.default={name:"V2xMap",props:{id:{type:String,default:function(){return"3DMap"}},cityId:{type:String},viewParams:{type:Array,default:function(){return[]}},colorModel:{type:Boolean,default:function(){return!0}},lampsInfo:{type:Array,default:function(){return[]}},mapConfig:{type:Object,default:function(){return{compass:!0,control:!0,mode:"SCEME_WITH_GLOW",style:{},baseLayerStyle:{},renderMode:"tile",lodUrl:"",lodStyle:null}}},realDataStatus:{type:Boolean,default:function(){return!1}},betterRenderConfig:{type:Object,default:function(){return{}}},listenViewChange:{type:Boolean,default:function(){return!1}},hideModel:{type:Boolean,default:function(){return!1}},styleParams:{type:Object,default:function(){return{}}},speedLabelLayer:{type:Boolean,default:function(){return!0}},plateNumberLabelLayer:{type:Boolean,default:function(){return!1}}},data:function(){return{lineSurfaceList:[],mapType:"3D",eventFlag:0}},watch:{viewParams:function(e){e&&6===e.length&&e.every((function(e){return!!e||0===e}))&&this.animationTo(e,100)},colorModel:function(e){this.perception.showColor=e},hideModel:function(e){this.perception.changeModelVisible(e)},lampsInfo:function(e){this.loadSignals(e)},realDataStatus:function(e){this.perception.realPlay=e},betterRenderConfig:function(e){this.setBetterRenderConfig(e)},listenViewChange:function(e){e&&this.openViewChange()},mapConfig:function(e){var t=e.compass;e.control;this.Map.setCompass(t)}},created:function(){this.Map=new u.default({id:this.id})},mounted:function(){var e=this,t=this.mapConfig,n=t.style,i=t.mode;if(this.Map.initGL(this.$refs.container,n,i),this.Map.setCompass(this.mapConfig.compass),this.listenViewChange&&this.openViewChange(),this.createPerception(),"normal"===this.mapConfig.renderMode)this.Map.initData(this.cityId,this.styleParams).then((function(){e.$emit("init")}));else if("lod"===this.mapConfig.renderMode){u.default.cityCode=this.cityId;var r=this.mapConfig,o=r.lodUrl,a=r.lodStyle,s=r.lodDebuggerMode;this.Map.initLod(this.cityId,o,a,s).then((function(t){e.$emit("init",t)}))}this.perception.realPlay=this.realDataStatus,this.setBetterRenderConfig(this.betterRenderConfig)},beforeDestroy:function(){this.Map.viewer.scene.removeAllMaps(),this.Map.viewer.scene.removeMapLayer(),this.Map.viewer.scene.removeAllAnimateObjects(),this.Map.viewer.scene.removeAllBlurObjects(),this.Map.viewer.scene.removeAllTrafficLights(),this.Map.viewer.scene.removeAllModels(),this.Map.viewer.scene.scene.dispose(),delete window.viewer},methods:{createPerception:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new h.default({map:this.Map,Vue:this});return t.showSpeed=this.speedLabelLayer,t.showPlateNumber=this.plateNumberLabelLayer,(0,c.default)(e).forEach((function(n){t[n]=e[n]})),this.perception||(this.perception=t),t},openViewChange:function(){var e=this;this.Map.viewer.addEventListener("camera_changed",(function(){var t=e.Map.viewer.getCameraPosition(!0),n=t.x,i=t.y,r=t.z,o=t.yaw,a=e.Map.transformUTMToWGS84({x:n,y:i}),s=(0,l.default)({},t,a,{z:r,yaw:o/(Math.PI/180)});e.$emit("getViewParam",s),"tile"===e.mapConfig.renderMode&&e.getMapDataByTile(n,i,1e3,"mapData",{city:e.cityId})}))},zoomPosition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("viewParams",e);var n=(0,s.default)(e,5),i=n[0],r=n[1],o=n[2],a=n[3],l=n[4];this.Map.zoomPosition(i,r,o,a,l,t)},animationTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,s.default)(e,5),r=i[0],o=i[1],a=i[2],l=i[3],c=i[4];return"tile"===this.mapConfig.renderMode&&this.getMapDataByTile(r,o,1e3,"mapData",{city:this.cityId}),this.Map.animationTo(r,o,a,l,c,n,t)},getMapDataByTile:(i=(0,a.default)(r.default.mark((function e(t,n){var i,a,c,u,h,p,m,v,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,y=this,b=arguments[3],x=arguments[4];return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.Utils.transformWGS84ToUTM({x:t,y:n}),a=i.x,c=i.y,e.next=3,(0,d.fetchTileIdList)((0,l.default)({x:a,y:c,r:g,city:this.cityId},x));case 3:if(u=e.sent,this.tileList||(this.tileList=[]),h=[],p=[],u.forEach((function(e){var t=e.id;if(!y.tileList.includes(t)){y.tileList.push(t);var n=(0,d.fetchTileData)({id:t,type:"line",city:y.cityId});h.push(n);var i=(0,d.fetchTileData)({id:t,type:"face",city:y.cityId});p.push(i)}})),!h.length&&!p.length){e.next=12;break}return m=o.default.all(h),v=o.default.all(p),e.abrupt("return",o.default.all([m,v]).then((function(e){var t=(0,s.default)(e,2),n=t[0],i=t[1];y.mergeFeature(n,"line"),y.mergeFeature(i,"face"),"mapData"===b&&y.$emit("init")})));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)}),mergeFeature:function(e,t){var n=this,i={};e.forEach((function(e){e&&e.forEach((function(e){var t=e.layer_name,n=e.layer_geojson.features;i[t]?i[t]=i[t].concat(n):i[t]=n}))})),(0,c.default)(i).forEach((function(e){var r=n.baseLayerStyle,o=e?r[e].params:{},a=null;switch(t){case"line":a=f.Utils.json2line(i[e],o);break;case"face":a=f.Utils.json2polygon(i[e],o)}n.Map.viewer.scene.scene.add(a)}))},resetPosition:function(){this.mapType="3D",this.animationTo(this.viewParams,2e3)},changeMapType:function(){"2D"===this.mapType?this.mapType="3D":this.mapType="2D",this.Map.mapSwitch(this.mapType.toLowerCase(),500,this.viewParams[2])},loadSignals:function(e){var t=this;e.forEach((function(e){var n=e.poleLat,i=e.poleLon;e.lampIds.forEach((function(e,r){var o=e.lampId;t.Map.addTrafficLight(i,n,{name:o},r)}))}))},updateSignal:function(e){var t=e.id,n=e.num,i=e.type;this.Map.updateTrafficLight(t,n,i)},removeModel:function(e){this.Map.removeObj(e)},removeTrafficLight:function(e){this.Map.removeTrafficLight(e)},drawModels:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{delayType:"byTime"},n=arguments[2],i=n||this.perception,r=t.delay,o=t.delayType,a=t.rate,s=t.timestamp;i.renderType=o,i.rate=a,i.delayRange=r,i.handleData(e,s)},zoomIn:function(){this.Map.viewer.scene.view.zoomIn()},zoomOut:function(){this.Map.viewer.scene.view.zoomOut()},trackedView:function(e){this.Map.followObj(e)},loadMapData:function(e,t){this.Map.addData(e,t)},addModel:function(e){this.Map.addModel(e)},drawBuilds:function(e,t){this.Map.addBuilds(e,t)},mergeLines:function(e,t){return this.Map.mergeLines(e,t)},geoJsonLoad:function(e,t){var n=this.Map.loader.setData(e,t);return this.Map.viewer.scene.addMap(n),n},addTripLayer:function(e){this.tripLayer=this.Map.addTripLayer(e)},loadTripLayer:function(e,t){var n=this.tripLayer.setData(e,t);this.Map.viewer.scene.addBlurObject(n)},addGetObj:function(e){var t=this;this.activeObj?e.forEach((function(e){t.activeObj.push(e)})):(this.activeObj=[].concat(e),this.$refs.container.addEventListener("mousedown",(function(e){t.eventFlag=0})),this.$refs.container.addEventListener("mousemove",(function(e){t.eventFlag=1})),this.$refs.container.addEventListener("mouseup",(function(e){if(0===t.eventFlag){console.log(e);var n=t.Map.getMouseObject(e,t.activeObj);if(console.log(n),n){var i=n.object;t.$emit("getObj",i,n)}}})))},addTextLabel:function(e){return this.Map.addTextLabel(e)},drawRect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.default.drawRect(e,t)},drawPolygon:function(e){this.Map.addPolygon(e)},setBetterRenderConfig:function(e){this.perception.betterRenderConfig=e},resetRender:function(e){(e||this.perception).resetRender()},createAnimation:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments[3];if(!t)return console.warn("缺少观测点"),!1;var o=new f.AnimationPath(e.map((function(e){var t=(0,s.default)(e,3),i=t[0],r=t[1],o=t[2];if(n.Map.viewer.scene.rtcPoint){var a=n.Map.viewer.scene.rtcPoint,l=a.x,c=a.y;return(new p.Vector3).fromArray([i-l,r-c,o])}return(new p.Vector3).fromArray(e)})));o.closed=!0;var a=[0,o.getLength()],l=a[0],c=a[1],u=o.animate(l,c,i,(function(e){n.Map.viewer.scene.view.position.copy(o.spline.getPoint(e)),n.Map.viewer.scene.view.lookAt(t)}));return u.repeat=r||!1,u}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{baseInfo:{type:Object,default:function(){return{}}},realData:{type:Object,default:function(){return{}}}},data:function(){return{}},filters:{defaultText:function(e){return e||"--"},defaultNum:function(e){return-1===e?"--":e}},mounted:function(){},methods:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},data:function(){return{}},mounted:function(){},methods:{jump:function(){var e=window.location.origin;window.parent.location=e+"/#/operation-management/device/road"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{percent:{type:Number,default:0},message:{type:String,default:""}},watch:{percent:function(e){this.width=e>100?100:e}},data:function(){return{width:0,point:""}},mounted:function(){var e=this;setInterval((function(){"..."===e.point?e.point=".":e.point=e.point+"."}),1e3)},methods:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},data:function(){return{}},mounted:function(){},methods:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},data:function(){return{}},created:function(){},mounted:function(){},methods:{}}},function(e,t,n){"use strict";n.r(t),n.d(t,"ShaderPass",(function(){return o}));var i=n(0),r=n(16),o=function(e,t){r.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof i.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=i.UniformsUtils.clone(e.uniforms),this.material=new i.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new r.Pass.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(r.Pass.prototype),{constructor:o,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(0);i.UniformsLib.line={linewidth:{value:1},resolution:{value:new i.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}},i.ShaderLib.line={uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,i.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var r=function(e){i.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:i.UniformsUtils.clone(i.ShaderLib.line.uniforms),vertexShader:i.ShaderLib.line.vertexShader,fragmentShader:i.ShaderLib.line.fragmentShader,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};r.prototype=Object.create(i.ShaderMaterial.prototype),r.prototype.constructor=r,r.prototype.isLineMaterial=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color||new i.Color("rgb(242, 202, 126)"),n=e.colorRing||new i.Color(1,0,0),a=e.radius1||10,s=e.radius2||20,l=e.width||4,c=new i.PlaneBufferGeometry(2*(s+l),2*(s+l),1,1),u=new i.RawShaderMaterial({uniforms:{color:{value:t},colorRing:{value:n},radius1:{value:a},radius2:{value:s},width:{value:l}},vertexShader:r,fragmentShader:o,side:i.FrontSide,transparent:!0}),h=new i.Mesh(c,u);return h};var i=n(0),r="\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",o="\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform vec3 color;\n    uniform vec3 colorRing;\n    varying vec3 vPosition;\n    uniform float radius1;\n    uniform float radius2;\n    uniform float width;\n\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        if(d<radius1){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(radius2<d && d<radius2+width){          \n            gl_FragColor = vec4(colorRing, 1.0);\n        }else{\n            discard;\n        }\n    }\n  "},function(e,t,n){var i=n(43),r=n(160),o=n(117),a=n(115)("IE_PROTO"),s=function(){},l=function(){var e,t=n(113)("iframe"),i=o.length;for(t.style.display="none",n(162).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(111),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(78),r=n(29)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(50),r=n(28).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(50);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(116)("keys"),r=n(91);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(14),r=n(28),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(75)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(29)},function(e,t,n){var i=n(28),r=n(14),o=n(75),a=n(118),s=n(51).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(110),r=n(29)("iterator"),o=n(68);e.exports=n(14).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){"use strict";var i=n(86);function r(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)}e.exports.f=function(e){return new r(e)}},function(e,t,n){var i=n(36),r=n(14),o=n(65);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){(function(i){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";void 0===(r=function(e){var t,r="undefined"!=typeof setTimeout&&setTimeout,o=function(e,t){return setTimeout(e,t)},a=function(e){return clearTimeout(e)},s=function(e){return r(e,0)};if(void 0!==i&&"[object process]"===Object.prototype.toString.call(i))s=function(e){return i.nextTick(e)};else if(t="undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver)s=function(e){var t,n=document.createTextNode("");new e((function(){var e=t;t=void 0,e()})).observe(n,{characterData:!0});var i=0;return function(e){t=e,n.data=i^=1}}(t);else if(!r){var l=n(317);o=function(e,t){return l.setTimer(t,e)},a=l.cancelTimer,s=l.runOnLoop||l.runOnContext}return{setTimer:o,clearTimer:a,asap:s}}.call(t,n,t,e))||(e.exports=r)}(n(18))}).call(this,n(59))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.zoneConfig={cangzhou:50,yizhuang:50,yangquan:49,chongqing:48,changsha:49,guangzhou:49,chengdu:48}},function(e,t,n){e.exports={default:n(341),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectControl=t.getLocationInfo=t.getModelsParams=t.getWeatherInfo=t.updateCustomConfig=t.getCustomList=t.getCustomInfo=t.checkLicense=t.getStyleParams=t.getConfig=t.getViewList=t.fetchTileData=t.fetchTileIdList=t.fetchRTMessageListAction=void 0;var i=d(n(62)),r=d(n(13)),o=d(n(38)),a=d(n(39)),s=n(40),l=n(79),c=d(n(128)),u=d(n(347)),h=n(64);function d(e){return e&&e.__esModule?e:{default:e}}var f,p,m,v,g="http://pdtmap-kv-ubuntu.bcc-szwg.baidu.com:8810",y=(t.fetchRTMessageListAction=(f=(0,a.default)(o.default.mark((function e(t){var n,i,r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.get)("/traffic/monitor/event/list",t);case 2:return n=e.sent,i=n.code,r=n.data,a=[],0==+i&&r&&(a=r.slice(0,4).map((function(e,t){var n=(0,l.getEventNameHelper)(e.eventType);return{mapId:t,eventId:e.eventId,eventType:n.key,longitude:e.longitude,latitude:e.latitude,eventName:n.eventName}})).reverse()),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,void 0)}))),function(e){return f.apply(this,arguments)}),t.fetchTileIdList=(p=(0,a.default)(o.default.mark((function e(t){var n,i,r,a,l,u,h;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.x,i=t.y,r=t.r,a=t.city,l=c.default.stringify({city:a,crs:"utm",x:n,y:i,r:r,dfmt:"json",ctime:(new Date).getTime(),from:"yunkong3d"}),e.next=4,(0,s.get)(g+"/pdtmap/v1.0/view3d?qt=tilelist&"+l);case 4:return u=e.sent,h=u.data,e.abrupt("return",h);case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return p.apply(this,arguments)}),t.fetchTileData=(m=(0,a.default)(o.default.mark((function e(t){var n,i,r,a,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,i=t.type,r=t.city,a=c.default.stringify({city:r,crs:"utm",id:n,type:i,dfmt:"json",ctime:(new Date).getTime(),from:"yunkong3d"}),e.next=4,(0,s.get)(g+"/pdtmap/v1.0/view3d?qt=tiledata&"+a);case 4:return l=e.sent,u=l.data,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return m.apply(this,arguments)}),{token:"PVDGM9DP",channel:"web",sign:"2dca1e97e540696cdf312609972c02b1"});t.getViewList=function(){return(0,s.get)("./mock/list.json").then((function(e){return e}))},t.getConfig=function(e){return(0,s.get)("./mock/config.json").then((function(t){return t.find((function(t){return t.id===e}))}))},t.getStyleParams=function(e){return(0,s.get)("https://ace.apollo.auto/config/info?channel=web&ctime=1611805167190&projectid=147128668164890&sign=2dca1e97e540696cdf312609972c02b1&token=PVDGM9DP").then((function(t){return t.content.find((function(t){return t.name===e})).content}))},t.checkLicense=function(e,t){var n="channel=web&ctime="+(new Date).getTime()+"&sign=2dca1e97e540696cdf312609972c02b1";return(0,s.get)("https://ace.apollo.auto/license/check?token="+e+"&"+n+"&supplier="+t).then((function(e){return e.errno})).catch((function(e){return e.errno}))},t.getCustomInfo=function(e){var t=c.default.stringify((0,r.default)({},y,e,{ctime:(new Date).getTime()}));return(0,s.get)("https://ace.apollo.auto/config/info?"+t).then((function(e){return e}))},t.getCustomList=function(e){var t=c.default.stringify((0,r.default)({},y,e,{ctime:(new Date).getTime()}));return(0,s.get)("https://ace.apollo.auto/config/list?"+t).then((function(e){return e}))},t.updateCustomConfig=function(e,t){var n=c.default.stringify((0,r.default)({},y,e,{ctime:(new Date).getTime()}));return(0,s.post)("https://ace.apollo.auto/config/upload?"+n,(0,i.default)(t)).then((function(e){return e}))},t.getWeatherInfo=function(e){return(0,s.get)("http://wthrcdn.etouch.cn/weather_mini?city="+e).then((function(e){return e.data}))},t.getModelsParams=function(){return(0,s.get)("./mock/modelConfig.json").then((function(e){return e}))},t.getLocationInfo=function(e){var t=e.lon,n=e.lat;return(0,s.get)("https://api.map.baidu.com/reverse_geocoding/v3/?ak=tdsNsICXgIHFZwVg0b7h352mEI2DlVdy&output=json&coordtype=wgs84ll&location="+n+","+t,{adapter:u.default}).then((function(e){return e}))},t.connectControl=(v=(0,a.default)(o.default.mark((function e(t,n){var i,r,a,s,l,c,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ip:"ace.apollo.auto",ssl:!0};return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={ip:"ace.apollo.auto",ssl:!0},u&&(i=u),a=(r=i).ip,s=r.ssl,l=new h.Ws,e.next=6,l.connect("ws"+(s?"s":"")+"://"+a+"/cloudcenter/message_push/websocket",{region:t,code:n});case 6:return c=e.sent,e.abrupt("return",{ws:l,connect:c});case 8:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return v.apply(this,arguments)})},function(e,t,n){"use strict";const i=n(344),r=n(345),o=n(346);function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function l(e,t){return t.decode?r(e):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function h(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const r="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map(t=>l(t,e)):null===n?n:l(n,e);i[t]=r};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const r of e.split("&")){let[e,a]=o(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:l(a,t),n(l(e,t),a,i)}for(const e of Object.keys(i)){const n=i[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=h(n[e],t);else i[e]=h(n,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=u,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const r=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),"[",r,"]"].join("")]:[...n,[s(t,e),"[",s(r,e),"]=",s(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(i,e)].join("")];case"comma":case"separator":return t=>(n,i)=>null==i||0===i.length?n:0===n.length?[[s(t,e),"=",s(i,e)].join("")]:[[n,s(i,e)].join(e.arrayFormatSeparator)];default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,s(t,e)]:[...n,[s(t,e),"=",s(i,e)].join("")]}}(t),r={};for(const t of Object.keys(e))n(t)||(r[t]=e[t]);const o=Object.keys(r);return!1!==t.sort&&o.sort(t.sort),o.map(n=>{const r=e[n];return void 0===r?"":null===r?s(n,t):Array.isArray(r)?r.reduce(i(n),[]).join("&"):s(n,t)+"="+s(r,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(u(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const i=c(e.url).split("?")[0]||"",r=t.extract(e.url),o=t.parse(r,{sort:!1}),a=Object.assign(o,e.query);let l=t.stringify(a,n);l&&(l="?"+l);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#"+s(e.fragmentIdentifier,n)),`${i}${l}${u}`}},function(e,t,n){e.exports={default:n(365),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(93);t.default={methods:{t:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.t.apply(this,t)}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){if(o.default.prototype.$isServer)return 0;if(void 0!==a)return a;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),a=t-i};var i,r=n(31),o=(i=r)&&i.__esModule?i:{default:i};var a=void 0},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=76)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},11:function(e,t){e.exports=n(205)},21:function(e,t){e.exports=n(96)},4:function(e,t){e.exports=n(61)},76:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)};i._withStripped=!0;var r=n(4),o=n.n(r),a=n(11),s=n.n(a),l=void 0,c="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",u=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function h(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),i=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:u.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";"),paddingSize:i,borderSize:r,boxSizing:n}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var i=h(e),r=i.paddingSize,o=i.borderSize,a=i.boxSizing,s=i.contextStyle;l.setAttribute("style",s+";"+c),l.value=e.value||e.placeholder||"";var u=l.scrollHeight,d={};"border-box"===a?u+=o:"content-box"===a&&(u-=r),l.value="";var f=l.scrollHeight-r;if(null!==t){var p=f*t;"border-box"===a&&(p=p+r+o),u=Math.max(p,u),d.minHeight=p+"px"}if(null!==n){var m=f*n;"border-box"===a&&(m=m+r+o),u=Math.min(m,u)}return d.height=u+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,d}var f=n(9),p=n.n(f),m=n(21),v={name:"ElInput",componentName:"ElInput",mixins:[o.a,s.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return p()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize;if("textarea"===this.type)if(e){var t=e.minRows,n=e.maxRows;this.textareaCalcStyle=d(this.$refs.textarea,t,n)}else this.textareaCalcStyle={minHeight:d(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(m.isKorean)(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,i=0;i<t.length;i++)if(t[i].parentNode===this.$el){n=t[i];break}if(n){var r={suffix:"append",prefix:"prepend"}[e];this.$slots[r]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+r).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},g=n(0),y=Object(g.a)(v,i,[],!1,null,null,null);y.options.__file="packages/input/src/input.vue";var b=y.exports;b.install=function(e){e.component(b.name,b)};t.default=b},9:function(e,t){e.exports=n(95)}})},function(e,t,n){"use strict";t.__esModule=!0,t.removeResizeListener=t.addResizeListener=void 0;var i,r=n(412),o=(i=r)&&i.__esModule?i:{default:i};var a="undefined"==typeof window,s=function(e){var t=e,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var o=r.target.__resizeListeners__||[];o.length&&o.forEach((function(e){e()}))}};t.addResizeListener=function(e,t){a||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new o.default(s),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},t.removeResizeListener=function(e,t){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}},function(e,t){e.exports=function(e,t,n,i){var r,o=0;return"boolean"!=typeof t&&(i=n,n=t,t=void 0),function(){var a=this,s=Number(new Date)-o,l=arguments;function c(){o=Number(new Date),n.apply(a,l)}function u(){r=void 0}i&&!r&&c(),r&&clearTimeout(r),void 0===i&&s>e?c():!0!==t&&(r=setTimeout(i?u:c,void 0===i?e-s:e))}}},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=127)}({127:function(e,t,n){"use strict";n.r(t);var i=n(16),r=n(39),o=n.n(r),a=n(3),s=n(2),l={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function c(e){var t=e.move,n=e.size,i=e.bar,r={},o="translate"+i.axis+"("+t+"%)";return r[i.size]=n,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return l[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,i=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:c({size:t,move:n,bar:i})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=100*(Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-this.$refs.thumb[this.bar.offset]/2)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=t*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(s.on)(document,"mousemove",this.mouseMoveDocumentHandler),Object(s.on)(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=100*(-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-(this.$refs.thumb[this.bar.offset]-t))/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=n*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(s.off)(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(s.off)(document,"mouseup",this.mouseUpDocumentHandler)}},h={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=o()(),n=this.wrapStyle;if(t){var i="-"+t+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(n=Object(a.toObject)(this.wrapStyle)).marginRight=n.marginBottom=i:"string"==typeof this.wrapStyle?n+=r:n=r}var s=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),l=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[s]]),c=void 0;return c=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[s]])]:[l,e(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},c)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e,t,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(i.addResizeListener)(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(i.removeResizeListener)(this.$refs.resize,this.update)},install:function(e){e.component(h.name,h)}};t.default=h},16:function(e,t){e.exports=n(133)},2:function(e,t){e.exports=n(52)},3:function(e,t){e.exports=n(44)},39:function(e,t){e.exports=n(131)}})},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{methods:{focus:function(){this.$refs[e].focus()}}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(o.default.prototype.$isServer)return;if(!t)return void(e.scrollTop=0);var n=[],i=t.offsetParent;for(;i&&e!==i&&e.contains(i);)n.push(i),i=i.offsetParent;var r=t.offsetTop+n.reduce((function(e,t){return e+t.offsetTop}),0),a=r+t.offsetHeight,s=e.scrollTop,l=s+e.clientHeight;r<s?e.scrollTop=r:a>l&&(e.scrollTop=a-e.clientHeight)};var i,r=n(31),o=(i=r)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";t.__esModule=!0;var i=i||{};i.Utils=i.Utils||{},i.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(i.Utils.attemptFocus(n)||i.Utils.focusFirstDescendant(n))return!0}return!1},i.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(i.Utils.attemptFocus(n)||i.Utils.focusLastDescendant(n))return!0}return!1},i.Utils.attemptFocus=function(e){if(!i.Utils.isFocusable(e))return!1;i.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return i.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},i.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},i.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(n),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return i.initEvent.apply(i,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i),e},i.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},t.default=i.Utils},function(e,t,n){"use strict";n.r(t),function(e,i){var r,o=n(213);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:i;var a=Object(o.a)(r);t.default=a}.call(this,n(54),n(380)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=function(e){return(0,i.visit)(e,{leave:o})};var i=n(35),r=n(386);var o={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return s(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,i=c("(",s(e.variableDefinitions,", "),")"),r=s(e.directives," "),o=e.selectionSet;return n||r||i||"query"!==t?s([t,s([n,i]),r,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,i=e.defaultValue,r=e.directives;return t+": "+n+c(" = ",i)+c(" ",s(r," "))},SelectionSet:function(e){return l(e.selections)},Field:function(e){var t=e.alias,n=e.name,i=e.arguments,r=e.directives,o=e.selectionSet,a=c("",t,": ")+n,l=a+c("(",s(i,", "),")");return l.length>80&&(l=a+c("(\n",u(s(i,"\n")),"\n)")),s([l,s(r," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+c(" ",s(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,i=e.selectionSet;return s(["...",c("on ",t),s(n," "),i]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,i=e.variableDefinitions,r=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(c("(",s(i,", "),")")," ")+"on ".concat(n," ").concat(c("",s(r," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?(0,r.printBlockString)(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+s(e.values,", ")+"]"},ObjectValue:function(e){return"{"+s(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+c("(",s(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:a((function(e){var t=e.directives,n=e.operationTypes;return s(["schema",s(t," "),l(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:a((function(e){return s(["scalar",e.name,s(e.directives," ")]," ")})),ObjectTypeDefinition:a((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return s(["type",t,c("implements ",s(n," & ")),s(i," "),l(r)]," ")})),FieldDefinition:a((function(e){var t=e.name,n=e.arguments,i=e.type,r=e.directives;return t+(d(n)?c("(\n",u(s(n,"\n")),"\n)"):c("(",s(n,", "),")"))+": "+i+c(" ",s(r," "))})),InputValueDefinition:a((function(e){var t=e.name,n=e.type,i=e.defaultValue,r=e.directives;return s([t+": "+n,c("= ",i),s(r," ")]," ")})),InterfaceTypeDefinition:a((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return s(["interface",t,c("implements ",s(n," & ")),s(i," "),l(r)]," ")})),UnionTypeDefinition:a((function(e){var t=e.name,n=e.directives,i=e.types;return s(["union",t,s(n," "),i&&0!==i.length?"= "+s(i," | "):""]," ")})),EnumTypeDefinition:a((function(e){var t=e.name,n=e.directives,i=e.values;return s(["enum",t,s(n," "),l(i)]," ")})),EnumValueDefinition:a((function(e){return s([e.name,s(e.directives," ")]," ")})),InputObjectTypeDefinition:a((function(e){var t=e.name,n=e.directives,i=e.fields;return s(["input",t,s(n," "),l(i)]," ")})),DirectiveDefinition:a((function(e){var t=e.name,n=e.arguments,i=e.repeatable,r=e.locations;return"directive @"+t+(d(n)?c("(\n",u(s(n,"\n")),"\n)"):c("(",s(n,", "),")"))+(i?" repeatable":"")+" on "+s(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return s(["extend schema",s(t," "),l(n)]," ")},ScalarTypeExtension:function(e){return s(["extend scalar",e.name,s(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return s(["extend type",t,c("implements ",s(n," & ")),s(i," "),l(r)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return s(["extend interface",t,c("implements ",s(n," & ")),s(i," "),l(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,i=e.types;return s(["extend union",t,s(n," "),i&&0!==i.length?"= "+s(i," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,i=e.values;return s(["extend enum",t,s(n," "),l(i)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,i=e.fields;return s(["extend input",t,s(n," "),l(i)]," ")}};function a(e){return function(t){return s([t.description,e(t)],"\n")}}function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function l(e){return c("{\n",u(s(e,"\n")),"\n}")}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function u(e){return c("  ",e.replace(/\n/g,"\n  "))}function h(e){return-1!==e.indexOf("\n")}function d(e){return null!=e&&e.some(h)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"map"},[t("div",{ref:"container",attrs:{id:"container"}}),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:this.mapConfig.control,expression:"mapConfig.control"}],attrs:{id:"mapControlsList"}},[t("div",{staticClass:"control-icon",class:{"icon-2D":"3D"===this.mapType,"icon-3D":"2D"===this.mapType},on:{click:this.changeMapType}}),this._v(" "),t("div",{staticClass:"control-icon icon-local",on:{click:this.resetPosition}})])])},r=[];i._withStripped=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-left"},[n("p",{staticClass:"content-title"},[e._v("路侧点详情")]),e._v(" "),n("ul",{staticClass:"data-list"},[n("li",{staticClass:"data-item"},[n("p",{staticClass:"item-title"},[e._v("路侧点基本信息")]),e._v(" "),n("ul",{staticClass:"base-list"},[n("li",{staticClass:"base-item"},[n("span",{staticClass:"base-item-label"},[e._v("道路类型：")]),e._v(" "),n("span",{staticClass:"base-item-value"},[e._v(e._s(e._f("defaultText")(e.baseInfo.roadType)))])]),e._v(" "),n("li",{staticClass:"base-item"},[n("span",{staticClass:"base-item-label"},[e._v("路口编号：")]),e._v(" "),n("span",{staticClass:"base-item-value"},[e._v(e._s(e._f("defaultText")(e.baseInfo.crossId)))])]),e._v(" "),n("li",{staticClass:"base-item"},[n("span",{staticClass:"base-item-label"},[e._v("RSCU编号：")]),e._v(" "),n("span",{staticClass:"base-item-value"},[e._v(e._s(e._f("defaultText")(e.baseInfo.rscuSn)))])])])]),e._v(" "),n("li",{staticClass:"data-item"},[n("p",{staticClass:"item-title"},[e._v("实时数据统计")]),e._v(" "),n("ul",{staticClass:"statistic-list"},[n("li",{staticClass:"statistic-item"},[n("p",{staticClass:"statistic-item-value"},[e._v(e._s(e._f("defaultNum")(e.realData.vehicleNum)))]),e._v(" "),n("p",{staticClass:"statistic-item-label"},[e._v("车辆数")])]),e._v(" "),n("li",{staticClass:"statistic-item"},[n("p",{staticClass:"statistic-item-value"},[e._v(e._s(e._f("defaultNum")(e.realData.pedestrianNum)))]),e._v(" "),n("p",{staticClass:"statistic-item-label"},[e._v("行人数")])]),e._v(" "),n("li",{staticClass:"statistic-item"},[n("p",{staticClass:"statistic-item-value"},[e._v(e._s(e._f("defaultNum")(e.realData.nonVehicleNum)))]),e._v(" "),n("p",{staticClass:"statistic-item-label"},[e._v("其他")])]),e._v(" "),n("li",{staticClass:"statistic-item"},[n("p",{staticClass:"statistic-item-value"},[e._v(e._s(e._f("defaultNum")(e.realData.eventNum)))]),e._v(" "),n("p",{staticClass:"statistic-item-label"},[e._v("事件数")])])])]),e._v(" "),e.baseInfo.crossId?n("li",{staticClass:"data-item"},[n("p",{staticClass:"item-title"},[e._v("路口车流量统计")]),e._v(" "),n("div",{staticClass:"crossroad-flow"},[n("p",{staticClass:"crossroad-flow-value"},[e._v(e._s(e._f("defaultNum")(e.realData.vehicleFlow)))]),e._v(" "),n("p",{staticClass:"crossroad-flow-label"},[e._v("累计车流量")])])]):e._e()])])},r=[];i._withStripped=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"error_page"},[n("div",{staticClass:"info"},[n("i",{staticClass:"error_icon"}),e._v(" "),n("p",{staticClass:"error_info"},[e._v("地图加载异常")]),e._v(" "),n("div",{staticClass:"error_message"},[n("span",[e._v("路测点位参数异常，请到")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:e.jump}},[e._v("运营管理中心")]),e._v(" "),n("span",[e._v("设置")])],1)])])},r=[];i._withStripped=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"load-progress-page"},[n("div",{staticClass:"load-progress"},[n("div",{staticClass:"percent"},[e._v(e._s(Math.ceil(e.width))+"%")]),e._v(" "),n("div",{staticClass:"bar"},[n("div",{staticClass:"bar-item",style:"width: "+e.width+"%"})]),e._v(" "),n("div",{staticClass:"message"},[e._v(e._s(e.message)+e._s(e.point))])])])},r=[];i._withStripped=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this.$createElement;this._self._c;return this._m(0)},r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon-map"},[t("span",{staticClass:"icon icon-font"},[this._v("")]),this._v(" "),t("span",{staticClass:"icon icon-font"},[this._v("")]),this._v(" "),t("span",{staticClass:"icon icon-font2"},[this._v("")])])}];i._withStripped=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n(85);function r(e){return o(e.source,Object(i.a)(e.source,e.start))}function o(e,t){var n=e.locationOffset.column-1,i=s(n)+e.body,r=t.line-1,o=e.locationOffset.line-1,l=t.line+o,c=1===t.line?n:0,u=t.column+c,h="".concat(e.name,":").concat(l,":").concat(u,"\n"),d=i.split(/\r\n|[\n\r]/g),f=d[r];if(f.length>120){for(var p=Math.floor(u/80),m=u%80,v=[],g=0;g<f.length;g+=80)v.push(f.slice(g,g+80));return h+a([["".concat(l),v[0]]].concat(v.slice(1,p+1).map((function(e){return["",e]})),[[" ",s(m-1)+"^"],["",v[p+1]]]))}return h+a([["".concat(l-1),d[r-1]],["".concat(l),f],["",s(u-1)+"^"],["".concat(l+1),d[r+1]]])}function a(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,i=e[0],r=e[1];return s(n-(t=i).length)+t+(r?" | "+r:" |")})).join("\n")}function s(e){return Array(e+1).join(" ")}},function(e,t,n){"use strict";(function(e){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionClient=void 0;var s=void 0!==e?e:"undefined"!=typeof window?window:{},l=s.WebSocket||s.MozWebSocket,c=n(388),u=n(389),h=n(390),d=n(391),f=n(140),p=n(392),m=n(139),v=n(394),g=n(395),y=n(396),b=function(){function e(e,t,n,i){var r=t||{},o=r.connectionCallback,a=void 0===o?void 0:o,s=r.connectionParams,h=void 0===s?{}:s,d=r.minTimeout,f=void 0===d?g.MIN_WS_TIMEOUT:d,p=r.timeout,m=void 0===p?g.WS_TIMEOUT:p,y=r.reconnect,b=void 0!==y&&y,x=r.reconnectionAttempts,w=void 0===x?1/0:x,_=r.lazy,S=void 0!==_&&_,M=r.inactivityTimeout,T=void 0===M?0:M,E=r.wsOptionArguments,C=void 0===E?[]:E;if(this.wsImpl=n||l,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=i||v.GRAPHQL_WS,this.connectionCallback=a,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=f,this.wsTimeout=m,this.unsentMessagesQueue=[],this.reconnect=b,this.reconnecting=!1,this.reconnectionAttempts=w,this.lazy=!!S,this.inactivityTimeout=T,this.closedByUser=!1,this.backoff=new c({jitter:.5}),this.eventEmitter=new u.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(h),this.wsOptionArguments=C,this.lazy||this.connect()}return Object.defineProperty(e.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,y.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())},e.prototype.request=function(e){var t,n,i=this.getObserver.bind(this),r=this.executeOperation.bind(this),o=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),(t={})[m.default]=function(){return this},t.subscribe=function(t,a,s){var l=i(t,a,s);return n=r(e,(function(e,t){null===e&&null===t?l.complete&&l.complete():e?l.error&&l.error(e[0]):l.next&&l.next(t)})),{unsubscribe:function(){n&&(o(n),n=null)}}},t},e.prototype.on=function(e,t,n){var i=this.eventEmitter.on(e,t,n);return function(){i.off(e,t,n)}},e.prototype.onConnected=function(e,t){return this.on("connected",e,t)},e.prototype.onConnecting=function(e,t){return this.on("connecting",e,t)},e.prototype.onDisconnected=function(e,t){return this.on("disconnected",e,t)},e.prototype.onReconnected=function(e,t){return this.on("reconnected",e,t)},e.prototype.onReconnecting=function(e,t){return this.on("reconnecting",e,t)},e.prototype.onError=function(e,t){return this.on("error",e,t)},e.prototype.unsubscribeAll=function(){var e=this;Object.keys(this.operations).forEach((function(t){e.unsubscribe(t)}))},e.prototype.applyMiddlewares=function(e){var t=this;return new Promise((function(n,i){var r,o,s;r=a(t.middlewares),o=t,(s=function(t){if(t)i(t);else if(r.length>0){var a=r.shift();a&&a.applyMiddleware.apply(o,[e,s])}else n(e)})()}))},e.prototype.use=function(e){var t=this;return e.map((function(e){if("function"!=typeof e.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");t.middlewares.push(e)})),this},e.prototype.getConnectionParams=function(e){return function(){return new Promise((function(t,n){if("function"==typeof e)try{return t(e.call(null))}catch(e){return n(e)}t(e)}))}},e.prototype.executeOperation=function(e,t){var n=this;null===this.client&&this.connect();var i=this.generateOperationId();return this.operations[i]={options:e,handler:t},this.applyMiddlewares(e).then((function(e){n.checkOperationOptions(e,t),n.operations[i]&&(n.operations[i]={options:e,handler:t},n.sendMessage(i,y.default.GQL_START,e))})).catch((function(e){n.unsubscribe(i),t(n.formatErrors(e))})),i},e.prototype.getObserver=function(e,t,n){return"function"==typeof e?{next:function(t){return e(t)},error:function(e){return t&&t(e)},complete:function(){return n&&n()}}:e},e.prototype.createMaxConnectTimeGenerator=function(){var e=this.minWsTimeout,t=this.wsTimeout;return new c({min:e,max:t,factor:1.2})},e.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},e.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},e.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},e.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},e.prototype.setInactivityTimeout=function(){var e=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((function(){0===Object.keys(e.operations).length&&e.close()}),this.inactivityTimeout))},e.prototype.checkOperationOptions=function(e,t){var n=e.query,i=e.variables,r=e.operationName;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!h.default(n)&&!p.getOperationAST(n,r)||r&&!h.default(r)||i&&!d.default(i))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},e.prototype.buildMessage=function(e,t,n){return{id:e,type:t,payload:n&&n.query?i(i({},n),{query:"string"==typeof n.query?n.query:f.print(n.query)}):n}},e.prototype.formatErrors=function(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]},e.prototype.sendMessage=function(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))},e.prototype.sendMessageRaw=function(e){switch(this.status){case this.wsImpl.OPEN:var t=JSON.stringify(e);try{JSON.parse(t)}catch(t){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+e))}this.client.send(t);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}},e.prototype.generateOperationId=function(){return String(++this.nextOperationId)},e.prototype.tryReconnect=function(){var e=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach((function(t){e.unsentMessagesQueue.push(e.buildMessage(t,y.default.GQL_START,e.operations[t].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();var t=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((function(){e.connect()}),t)}},e.prototype.flushUnsentMessagesQueue=function(){var e=this;this.unsentMessagesQueue.forEach((function(t){e.sendMessageRaw(t)})),this.unsentMessagesQueue=[]},e.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},e.prototype.checkMaxConnectTimeout=function(){var e=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((function(){e.status!==e.wsImpl.OPEN&&(e.reconnecting=!0,e.close(!1,!0))}),this.maxConnectTimeGenerator.duration())},e.prototype.connect=function(){var e,t=this;this.client=new((e=this.wsImpl).bind.apply(e,a([void 0,this.url,this.wsProtocols],this.wsOptionArguments))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return r(t,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return e=n.sent(),this.sendMessage(void 0,y.default.GQL_CONNECTION_INIT,e),this.flushUnsentMessagesQueue(),[3,4];case 3:return t=n.sent(),this.sendMessage(void 0,y.default.GQL_CONNECTION_ERROR,t),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}}))}))},this.client.onclose=function(){t.closedByUser||t.close(!1,!1)},this.client.onerror=function(e){t.eventEmitter.emit("error",e)},this.client.onmessage=function(e){var n=e.data;t.processReceivedData(n)}},e.prototype.processReceivedData=function(e){var t,n;try{n=(t=JSON.parse(e)).id}catch(t){throw new Error("Message must be JSON-parseable. Got: "+e)}if(-1===[y.default.GQL_DATA,y.default.GQL_COMPLETE,y.default.GQL_ERROR].indexOf(t.type)||this.operations[n])switch(t.type){case y.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case y.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case y.default.GQL_COMPLETE:var r=this.operations[n].handler;delete this.operations[n],r.call(this,null,null);break;case y.default.GQL_ERROR:this.operations[n].handler(this.formatErrors(t.payload),null),delete this.operations[n];break;case y.default.GQL_DATA:var o=t.payload.errors?i(i({},t.payload),{errors:this.formatErrors(t.payload.errors)}):t.payload;this.operations[n].handler(null,o);break;case y.default.GQL_CONNECTION_KEEP_ALIVE:var a=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,a&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(n)},e.prototype.unsubscribe=function(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,y.default.GQL_STOP,void 0))},e}();t.SubscriptionClient=b}).call(this,n(54))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mapLoading,expression:"mapLoading"}],staticClass:"traffic",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("icon-map"),e._v(" "),i("load-progress",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],attrs:{percent:e.loadPercent,message:e.preLoadMessage}}),e._v(" "),e.config.showInfo?i("info-pane",{attrs:{"real-data":e.statsData,"base-info":e.baseInfo}}):e._e(),e._v(" "),"singleCar"!==e.config.viewType&&!e.config.isMock&&e.showErrorPage?i("error-page"):e._e(),e._v(" "),e.config.isMock||e.ViewParam&&6===e.ViewParam.length||"singleCar"===e.config.viewType?i("Map",{ref:"map",attrs:{"view-params":e.viewParams,"color-model":e.config.legend,"lamps-info":e.lampsInfo,"real-data-status":e.realDataStatus,"better-render-config":e.betterRenderConfig,"listen-view-change":!!e.showViewInfo,"hide-model":e.drawModelStatus,"city-id":e.cityId,"map-config":e.mapConfig,"style-params":e.styleParams,"speed-label-layer":e.showSpeedLabelLayer,"plate-number-label-layer":e.showPlateNumberLabelLayer},on:{init:e.mapInit,getViewParam:e.getViewParam,timeLine:e.setTimeLine,renderData:e.getRenderData,getObj:e.getObj}}):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.config.legend,expression:"config.legend"}],staticClass:"mapIdentification",class:{showInfo:e.config.showInfo}},[i("img",{attrs:{src:n(401),alt:""}})]),e._v(" "),i("dir",{directives:[{name:"show",rawName:"v-show",value:e.config.test,expression:"config.test"}],staticClass:"config-button"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){e.dialog=!0}}},[i("i",{staticClass:"el-icon-s-tools"})])],1),e._v(" "),i("div",{staticClass:"info-pane"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showViewInfo,expression:"showViewInfo"}],staticClass:"view-info"},e._l(e.viewInfo,(function(t,n){return i("p",{key:n},[e._v(e._s(t))])})),0),e._v(" "),e.config.copyButton?i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showViewInfo,expression:"showViewInfo"}],staticClass:"copy-btn",class:e.config.copyButton.position,attrs:{size:"mini",type:"primary"}},[e._v(e._s(e.config.copyButton.text))]):e._e()],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mapControlStatus,expression:"mapControlStatus"}],staticClass:"map-control"},[i("div",{staticClass:"button",on:{click:e.resetPosition}},[i("div",{staticClass:"location-icon"})]),e._v(" "),i("div",{staticClass:"button",on:{click:e.zoomIn}},[i("div",{staticClass:"add-icon"})]),e._v(" "),i("div",{staticClass:"button",on:{click:e.zoomOut}},[i("div",{staticClass:"minus-icon"})])]),e._v(" "),i("el-dialog",{attrs:{title:"配置",visible:e.dialog,width:"50%"},on:{"update:visible":function(t){e.dialog=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"显示Label"}},[i("el-checkbox-group",{model:{value:e.showLabelKey,callback:function(t){e.showLabelKey=t},expression:"showLabelKey"}},[i("el-checkbox",{attrs:{label:"id"}},[e._v("Id")]),e._v(" "),i("el-checkbox",{attrs:{label:"speed"}},[e._v("速度")]),e._v(" "),i("el-checkbox",{attrs:{label:"heading"}},[e._v("航向角")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"隐藏障碍物"}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关"},model:{value:e.drawModelStatus,callback:function(t){e.drawModelStatus=t},expression:"drawModelStatus"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"真实数据"}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关"},model:{value:e.realDataStatus,callback:function(t){e.realDataStatus=t},expression:"realDataStatus"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"3D优化"}},[i("div",[e._v("\n                    去抖\n                    "),i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",disabled:e.realDataStatus},model:{value:e.betterRenderConfig.removeShake,callback:function(t){e.$set(e.betterRenderConfig,"removeShake",t)},expression:"betterRenderConfig.removeShake"}})],1),e._v(" "),i("div",[e._v("\n                    纠偏\n                    "),i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",disabled:e.realDataStatus},model:{value:e.betterRenderConfig.rectify,callback:function(t){e.$set(e.betterRenderConfig,"rectify",t)},expression:"betterRenderConfig.rectify"}})],1),e._v(" "),i("div",[e._v("\n                    补帧\n                    "),i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",disabled:"production"===e.nodeEnv||!e.betterRenderConfig.rectify},model:{value:e.betterRenderConfig.insertData,callback:function(t){e.$set(e.betterRenderConfig,"insertData",t)},expression:"betterRenderConfig.insertData"}})],1)]),e._v(" "),i("el-form-item",{attrs:{label:"显示视角信息"}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关"},model:{value:e.showViewInfo,callback:function(t){e.showViewInfo=t},expression:"showViewInfo"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowcarInside,expression:"isShowcarInside"}],staticClass:"carTop"},[i("img",{attrs:{src:"assets/image/carInside.png"}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mobileControl,expression:"mobileControl"}],staticClass:"mobile-control"},[i("div",{staticClass:"control-content"},[i("div",{staticClass:"num"},[e._v(e._s(e.randomNum))]),e._v(" "),i("div",{staticClass:"btn",on:{click:function(t){return e.computeRandom(6,!0)}}},[e._v("刷新")])])])],1)},r=[];i._withStripped=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"map-view",staticStyle:{height:"100%"}},[t("router-view")],1)},r=[];i._withStripped=!0},function(e,t,n){var i=n(91)("meta"),r=n(50),o=n(58),a=n(51).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(65)((function(){return l(Object.preventExtensions({}))})),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!o(e,i)&&u(e),e}}},function(e,t,n){"use strict";var i=n(75),r=n(36),o=n(159),a=n(57),s=n(68),l=n(238),c=n(87),u=n(163),h=n(29)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,p,m,v,g){l(n,t,p);var y,b,x,w=function(e){if(!d&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",S="values"==m,M=!1,T=e.prototype,E=T[h]||T["@@iterator"]||m&&T[m],C=E||w(m),A=m?S?w("entries"):C:void 0,O="Array"==t&&T.entries||E;if(O&&(x=u(O.call(new e)))!==Object.prototype&&x.next&&(c(x,_,!0),i||"function"==typeof x[h]||a(x,h,f)),S&&E&&"values"!==E.name&&(M=!0,C=function(){return E.call(this)}),i&&!g||!d&&!M&&T[h]||a(T,h,C),s[t]=C,s[_]=f,m)if(y={values:S?C:w("values"),keys:v?C:w("keys"),entries:A},g)for(b in y)b in T||o(T,b,y[b]);else r(r.P+r.F*(d||M),t,y);return y}},function(e,t,n){var i=n(78);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicLabel=void 0;var i=p(n(24)),r=p(n(25)),o=p(n(38)),a=p(n(13)),s=p(n(39)),l=p(n(47)),c=p(n(19)),u=p(n(20)),h=p(n(48)),d=p(n(49)),f=n(0);function p(e){return e&&e.__esModule?e:{default:e}}t.BasicLabel=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return n.name=e.name||"",n.scaleNum=e.scaleNum||.3,n.factor=e.factor||{},n.center=e.center||{x:.12,y:0},n.sizeAttenuation=e.sizeAttenuation||!1,n.style=e.style||{},n.constructionConfig=e.constructionConfig||{},n.drawCanvas=document.createElement("canvas"),n.mainView=null,n.sprite=null,n.texture=null,n.material=null,n.activeAreaList=[],n.init(e),n}var n,p;return(0,d.default)(t,e),(0,u.default)(t,[{key:"init",value:(p=(0,s.default)(o.default.mark((function e(){var n,i,r,s,l,c,u,h,d,p,m,v,g,y,b,x,w,_,S,M,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.style,i=n.height,r=n.width,s=n.backgroundImage,l=n.borderRadius,c=n.borderColor,u=n.borderWidth,h=n.backgroundColor,this.mainView=document.createElement("canvas"),d=this.mainView.getContext("2d"),p=f.MathUtils.ceilPowerOfTwo(r),m={width:p,height:p*(i/r),factor:{xScale:p/r,yScale:p/r}},this.mainView.width=this.drawCanvas.width=m.width,this.mainView.height=this.drawCanvas.height=m.height,v=m.factor,g=v.xScale,y=v.yScale,this.factor=m.factor,!s){e.next=16;break}return e.next=12,t.loadImg(s,"");case 12:b=e.sent,d.drawImage(b,0,0,r*g,i*y),e.next=17;break;case 16:c&&(d.strokeStyle=c,d.fillStyle=h,d.lineWidth=u*g||1*g,t.roundRect(d,d.lineWidth,d.lineWidth,(r-2*d.lineWidth)*g,(i-2*d.lineWidth)*y,l*g));case 17:this.texture=new f.Texture(this.mainView),this.texture.minFilter=f.NearestFilter,this.texture.magFilter=f.NearestFilter,this.texture.anisotropy=4,this.texture.needsUpdate=!0,x=new f.SpriteMaterial((0,a.default)({depthTest:!0,depthWrite:!1,transparent:!0,sizeAttenuation:this.sizeAttenuation},this.constructionConfig)),this.material=x,this.sprite=new f.Sprite(this.material),this.sprite.material.map=this.texture,w=i/r,this.sprite.scale.set(1/g*this.scaleNum,1/y*this.scaleNum*w,1),_=this.center,S=_.x,M=_.y,this.sprite.center=new f.Vector2(S,M),this.add(this.sprite),this.dispatchEvent({type:"loaded",label:this}),T.content&&this.drawContent(T.content);case 33:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"drawContent",value:(n=(0,s.default)(o.default.mark((function e(n){var i,a,s,l,c,u,h,d,f,p,m,v,g,y,b,x,w,_,S,M=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.activeAreaList.length&&this.activeAreaList.forEach((function(e){M.remove(e)})),i=this.drawCanvas.getContext("2d"),a=this.drawCanvas,s=a.width,l=a.height,i.clearRect(0,0,s,l),i.drawImage(this.mainView,0,0,s,l),c=this.style,u=c.paddingTop,h=c.paddingLeft,d=0,f=0,p=0,m=0,v=this.factor,g=v.xScale,y=v.yScale,w=[b=h?h*g:0,x=u?u*y:0],_=o.default.mark((function e(a){var c,u,v,_,S,T,E,C,A,O,L,k,P,D,I,N;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n[a],u=c.width,v=c.height,_=c.textList,S=c.marginRight,T=c.marginBottom,E=c.backgroundImage,C=c.position,A=c.id,C&&(O=(0,r.default)(C,2),L=O[0],k=O[1],w[0]=b+L*g,w[1]=x+k*y,d=0,f=0,p=0,m=0),!E){e.next=28;break}return w[0]+u*g>s&&((p+=d)+v*y<=f?(w[0]=m,w[1]+=d):(w[0]=h?h*g:0,w[1]+=d,f=0,m=0)),e.prev=5,e.next=8,t.loadImg(E,"");case 8:P=e.sent,i.drawImage(P,w[0],w[1],u*g,v*y),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:_.forEach((function(e){var n=(0,r.default)(e.position,2),o=n[0],a=n[1],s=[w[0]+o*g,w[1]+a*y];t.drawText(i,e,M.factor,s)})),D=w[0]===h*g?-.16:-1.3,I=-(l-w[1]-25*y)*(2.05/(107*y))+.1,N=t.addActiveArea({x:D,y:I},{width:5,height:.95}),M.add(N),N.addEventListener("mouseup",(function(){M.dispatchEvent({type:"itemClick",id:A})})),M.activeAreaList.push(N),a===n.length-1&&(M.texture.image=M.drawCanvas,M.texture.needsUpdate=!0,M.sprite.material.map=M.texture),w[0]+=(u+(S||0))*g,(d=(v+(T||0))*y)>f&&(f=d,m=w[0]),e.next=30;break;case 28:_.forEach((function(e){var n=(0,r.default)(e.position,2),o=n[0],a=n[1],s=[w[0]+o*g,w[1]+a*y];t.drawText(i,e,M.factor,s)})),a===n.length-1&&(M.texture.image=M.drawCanvas,M.texture.needsUpdate=!0,M.sprite.material.map=M.texture);case 30:M.dispatchEvent({type:"contentLoaded",label:M});case 31:case"end":return e.stop()}}),e,M,[[5,12]])})),S=0;case 16:if(!(S<n.length)){e.next=21;break}return e.delegateYield(_(S),"t0",18);case 18:S++,e.next=16;break;case 21:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"raycast",value:function(e,t){var n=e.intersectObject(this.sprite);if(n.length)return t.push({object:this,point:n[0],distance:n[0].distance}),t}},{key:"dispose",value:function(){this.texture&&this.texture.dispose(),this.sprite&&this.sprite.material.dispose(),this.sprite&&this.sprite.material.map.dispose()}}],[{key:"loadImg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://mapdata.bj.bcebos.com",n=new Image;return n.crossOrigin="Anonymous",n.src=t+e,new i.default((function(e,t){n.addEventListener("load",(function(){e(n)})),n.onerror=function(e){t(e)}}))}},{key:"drawText",value:function(e,t,n,i){var o=n.xScale,a=(0,r.default)(i,2),s=a[0],l=a[1],c=t.text,u=t.fontSize,h=t.fontFamily,d=t.color,f=t.textAlign;if(c||"number"==typeof c){e.font=u*o+"px "+h,e.fillStyle=d,e.textAlign=f||"left",e.textBaseline="top";e.measureText(c).width;e.fillText(c,s,l)}}},{key:"addActiveArea",value:function(e,t){var n=t.width,i=t.height,r=e.x,o=e.y,s=new f.SpriteMaterial((0,a.default)({depthTest:!0,depthWrite:!1,transparent:!0,sizeAttenuation:!0,opacity:0},this.constructionConfig)),l=new f.Sprite(s);return l.scale.set(n,i,1),l.material.color=new f.Color("#58d2d4"),l.center.set(r,o),l}},{key:"roundRect",value:function(e,t,n,i,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}}]),t}(f.Object3D)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Diamond=void 0;var i=g(n(72)),r=g(n(62)),o=g(n(21)),a=g(n(38)),s=g(n(39)),l=g(n(25)),c=g(n(73)),u=g(n(47)),h=g(n(19)),d=g(n(20)),f=g(n(48)),p=g(n(49)),m=n(0),v=g(n(107));function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.type="diamond",n.name=e.name,n.style=(0,c.default)({bottom:{},top:{}},e.style),n.color=e.color?new m.Color(e.color):new m.Color("#538cb6"),n.borderColor=e.borderColor?new m.Color(e.borderColor):new m.Color("#71f9ff"),n.topColor=e.topColor||[87,143,181],n.bottomColor=e.bottomColor||[12,255,232],n.height=e.height||4,n.sizeAttenuation=e.sizeAttenuation||!1,n.radius=e.radius,n.radiusSegments=e.radiusSegments||4,n.heightSegments=e.heightSegments||1,n.factor=e.factor||{x:1,y:1},n.topOffset=e.topOffset||{x:0,y:1.2,z:5},n.activeOption=e.activeOption||{height:.5,speed:.05},n.labelSize=e.labelSize||"small",n.stop=!0,n.openEnded=!e.closeEnded,n.ringRadius=e.ringRadius||[1,1.5],n.hoverStatus=e.hover||!1,e.clone||n.init(),n}return(0,p.default)(t,e),(0,d.default)(t,[{key:"init",value:function(){this.initBottom(),this.initTop(),this.boundingSphere=new m.Sphere(new m.Vector3(0,0,2.5),2.5),this.boundingBox=new m.Box3(new m.Vector3(-1,-1,0),new m.Vector3(2,2,5)),this.hoverStatus&&this.initHover()}},{key:"initBottom",value:function(){this.bottom=(0,v.default)({color:new m.Color("#bbfaff"),colorRing:new m.Color("#bdf9ff"),radius1:this.ringRadius[0],radius2:this.ringRadius[1],width:.05}),this.bottom.name="bottom",this.add(this.bottom)}},{key:"initTop",value:function(){var e=this.topOffset,t=(e.x,e.y),n=e.z;this.top1=b({color:this.color,height:this.height,radius:this.radius,radiusSegments:this.radiusSegments,heightSegments:this.heightSegments,topColor:this.topColor,bottomColor:this.bottomColor,activeOption:this.activeOption,topOffset:this.topOffset,openEnded:this.openEnded}),this.top1.name="top1",this.top2=b({color:this.borderColor,height:this.height,wireframe:!0,radius:this.radius,radiusSegments:this.radiusSegments,heightSegments:1,topColor:this.topColor,bottomColor:this.bottomColor,activeOption:this.activeOption,topOffset:this.topOffset,openEnded:!0}),this.top2.name="top2",this.top1.rotateX(.5*-Math.PI),this.top2.rotateX(.5*-Math.PI),this.top1.position.z=n,this.top2.position.z=n,this.top1.position.y=t,this.top2.position.y=t,this.add(this.top1),this.add(this.top2)}},{key:"drawLabel",value:function(e,t){var n=e.width,i=e.height;this.drawCanvas||(this.drawCanvas=document.createElement("canvas"),this.drawCanvas.width=n,this.drawCanvas.height=i);var r=this.drawCanvas.getContext("2d");r.clearRect(0,0,n,i),r.drawImage(e,0,0,n,i),r.drawImage(t,0,0,n,i);var o=new m.Texture(this.drawCanvas);this.idSprite=function(e,t,n){var i=new m.MeshBasicMaterial({map:n,transparent:!0,blending:m.CustomBlending,side:m.DoubleSide});i.map.needsUpdate=!0;var r=new m.PlaneGeometry(.01*e,.01*t,1,1),o=new m.Mesh(r,i);return o.name="sprite",o.rotateX(.5*Math.PI),o}(n,i,o),this.idSprite.position.x=0,this.idSprite.position.z="big"===this.labelSize?4:3,this.idSprite.addEventListener((function(e){console.log(e)})),this.add(this.idSprite),this.idSprite.visible=!this.hoverStatus}},{key:"updateLabel",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,100,100],r=arguments[2],o=(0,l.default)(i,2),c=(o[0],o[1],3),u=this.drawCanvas,h=u.width,d=u.height,f=this.drawCanvas.getContext("2d");f.clearRect(0,0,h,d),r&&r.forEach((function(e){var t=e.img,i=e.imgInfo;f.drawImage(t,i.position[0]*n.factor.x*c,i.position[1]*n.factor.y*c,i.size[0]*n.factor.x*c,i.size[1]*n.factor.y*c)})),e.forEach((t=(0,s.default)(a.default.mark((function e(t){var i,r,o,s,l,c,u,h;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.text,r=t.position,o=t.size,s=t.color,l=t.fontFamily,c=t.textAlign,u=t.fontWeight,f.font=(u||"normal")+" "+o*n.factor.y*3+"px "+l,f.fillStyle=s,f.textBaseline="top",f.textAlign=c||"left",h=f.measureText(i).width,f.fillText(i,r[0]*n.factor.x*3,r[1]*n.factor.y*3,h/n.factor.y*3);case 7:case"end":return e.stop()}}),e,n)}))),function(e){return t.apply(this,arguments)}));var p=new m.Texture(this.drawCanvas);p.needsUpdate=!0,this.idSprite.material.map=p}},{key:"setColor",value:function(e){e&&(e=new m.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.top.material.uniforms.color.value=this.color)}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}}},{key:"setSpriteStatus",value:function(e){if(this.idSprite&&(this.idSprite.visible=e),this.attackEvents.length&&(0,o.default)(this.attackEventSprite).length)for(var t in this.attackEventSprite)this.attackEventSprite[t].visible=e}},{key:"raycast",value:function(e,t){var n=new m.Sphere;n.copy(this.boundingSphere),n.applyMatrix4(this.matrixWorld);var i=e.ray.intersectsSphere(n);if(i)return t.push({object:this,point:i,distance:e.ray.origin.distanceTo(i)}),t}},{key:"faceToCamera",value:function(e){this.idSprite&&(this.idSprite.rotation.y=e.rotation.z)}},{key:"update",value:function(){this.top1.update(),this.top2.update()}},{key:"clone",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new this.constructor({clone:t}).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse((0,r.default)(e.userData)),this.type=e.type,this.style=e.style,this.color=e.color,this.borderColor=e.borderColor,this.height=e.height,this.sizeAttenuation=e.sizeAttenuation,this.radius=e.radius,this.stop=e.stop,this.boundingSphere=e.boundingSphere,this.boundingBox=e.boundingBox,this.update=e.update,!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n],o=i.clone();"bottom"===i.name&&(this.bottom=o),"top1"===i.name&&(this.top1=o,o.flag=.01,o.stop=!1,o.factor=1,this.top1.update=i.update),"top2"===i.name&&(this.top2=o,o.flag=.01,o.stop=!1,o.factor=1,this.top2.update=i.update),this.add(o)}return this}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,i.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,i.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.top1=null,this.top2=null}},{key:"initHover",value:function(){this.addEventListener("mouseover",x),this.addEventListener("mouseleave",w)}}]),t}(m.Object3D);function b(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius||2,n=e.height||4,i=e.radiusSegments||4,r=e.heightSegments||1,o=new m.ConeBufferGeometry(t,n,i,r,e.openEnded),a=e.activeOption,s=[],c=e.topColor,u=e.bottomColor,h=0;h<r;h++)for(var d=0;d<i+1;d++){var f=(0,l.default)(u,3),p=f[0],v=f[1],g=f[2];s.push(p/255,v/255,g/255)}for(var y=0;y<i+1;y++){var b=(0,l.default)(c,3);p=b[0],v=b[1],g=b[2];s.push(p/255,v/255,g/255)}for(var x=0;x<3;x++)for(var w=0;w<i;w++)if(0===x){p=50,v=209,g=219;s.push(p/255,v/255,g/255)}else{var _=142,S=248,M=255;s.push(_/255,S/255,M/255)}o.setAttribute("color",new m.Float32BufferAttribute(s,3));var T=new m.MeshBasicMaterial({vertexColors:!e.wireframe,opacity:1,transparent:!0,side:m.DoubleSide,color:e.wireframe?e.color:null,wireframe:e.wireframe||!1}),E=new m.Mesh(o,T);return E.flag=.01,E.stop=!1,E.factor=a.height,E.update=function(){this.stop||(this.position.z=e.topOffset.z+this.flag,this.rotateY(Math.PI*a.speed*.1),this.flag+=a.speed*this.factor,this.flag>a.height?this.factor=-a.height:this.flag<-a.height&&(this.factor=a.height))},E}function x(){this.idSprite.visible=!0}function w(){this.idSprite.visible=!1}t.Diamond=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTripLine=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertices||[],n=e.line||null,c=e.color?new l.Color(e.color):new l.Color(1,0,0),u=e.dashOffset||0,h=e.dashOffsetDirection||!1,d=e.gapSize||100,f=e.tripSize||100,p=e.linewidth||4,m=e.speed||10,v=e.opacity||1,g=e.useOpacity||!1,y=e.doubleFlow||!1,b=new a.LineGeometry,x=new l.Vector3;if(t.length){var w=[];x.x=t[0][0],x.y=t[0][1],x.z=t[0][2]||0;for(var _=0;_<t.length;_++)w.push(t[_][0]-x.x+.1,t[_][1]-x.y+.1,t[_][2]||0);b.setPositions(w)}else{if(!n)return null;b.fromLineSegments(n),x.copy(n.position)}var S=new r.LineMaterial({color:c,linewidth:p,vertexColors:!1,dashSize:f,gapSize:d,dashOffset:u,dashed:!0,opacity:v});e.doubleFlow&&(S=new o.LineMaterial2({color:c,linewidth:p,vertexColors:!1,color1:e.color1?new l.Color(e.color1):new l.Color(1,0,0),color2:e.color2?new l.Color(e.color2):new l.Color(0,1,.5),offset1:e.offset1||.01,offset2:e.offset2||.01,length1:e.length1||1,length2:e.length2||1,opacity:v}));var M=document.getElementsByTagName("body");S.resolution.set(M[0].clientWidth,M[0].clientHeight);var T=void 0;T=t.length?new i.Line2(b,S):new s.LineSegments2(b,S);T.computeLineDistances();var E=T.geometry.attributes.instanceDistanceEnd.array.length;T.totalLength=T.geometry.attributes.instanceDistanceEnd.array[E-1],T.doubleFlow=y,T.scale.set(1,1,1),S.defines.USE_DASH="",g||(S.defines.USE_OPACITY="");return S.needsUpdate=!0,T.position.copy(x),T.speed=m,T.flag=1,T.dashOffset=u,T.dashSize=f,T.gapSize=d,T.update=function(){this.material instanceof r.LineMaterial&&this.flag&&(this.doubleFlow?(this.material.offset1+=4*T.speed,this.material.offset2-=4*T.speed,this.material.dashOffset=this.dashOffset,this.material.offset1>this.totalLength&&(this.material.offset1=0),this.material.offset2<0&&(this.material.offset2=this.totalLength)):(h?this.dashOffset-=4*T.speed:this.dashOffset+=4*T.speed,this.material.dashOffset=this.dashOffset,this.dashOffset>this.dashSize+this.gapSize&&(this.dashOffset=0)),this.material.needsUpdate=!0)},T};var i=n(176),r=n(227),o=n(228),a=n(80),s=(n(56),n(82)),l=n(0)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrafficEvent2=void 0;var _toConsumableArray2=__webpack_require__(72),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_keys=__webpack_require__(21),_keys2=_interopRequireDefault(_keys),_slicedToArray2=__webpack_require__(25),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_assign=__webpack_require__(73),_assign2=_interopRequireDefault(_assign),_getPrototypeOf=__webpack_require__(47),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(19),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(20),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(48),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(49),_inherits3=_interopRequireDefault(_inherits2),_three=__webpack_require__(0),_RingCircle=__webpack_require__(107),_RingCircle2=_interopRequireDefault(_RingCircle),_config=__webpack_require__(46),_v2xMaptv=__webpack_require__(17);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var TrafficEvent2=exports.TrafficEvent2=function(_Object3D){function TrafficEvent2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck3.default)(this,TrafficEvent2);var t=(0,_possibleConstructorReturn3.default)(this,(TrafficEvent2.__proto__||(0,_getPrototypeOf2.default)(TrafficEvent2)).call(this,e));return t.type="trafficevent2",t.name=e.name,t.mixNum=e.num||0,t.style=(0,_assign2.default)({bottom:{},middle:{},top:{},right:{}},e.style),t.source=e.source,t.trafficType=e.trafficType,t.color="robocop"===t.source?new _three.Color("#FF8227"):new _three.Color("#ff4a4a"),t.wireColor="robocop"===t.source?new _three.Color("#FF8126"):new _three.Color("#ff4c4c"),t.fontsize=e.fontsize||12,t.imgUrlMap=e.imgUrlMap,t.eventImg=e.eventImg,t.eventFont=e.eventFont||e.eventIcon||"EventIcon1",t.iconFont=e.iconFont,t.sizeAttenuation=!0,t.iconSprite=null,t.itemScale=e.scale||1,t.trafficEventSprite=null,t.onlyAnimition=!0,t.mixLabel={robocop:"巡检事件",side:"交通事件"},t.colorMap={robocop:{fill:"rgba(117, 61,0,0.6)",stroke:"#ff9c3c",back:"#b96b25",label:"#734e2d"},side:{fill:"rgba(146, 22, 22, 0.6)",stroke:"#ff4747",back:"#ae3f3f",label:"#9a3333"},level1:{fill:"rgba(180, 144, 0, 0.6)",stroke:"#ffe700",back:"#6d5d00",label:"#6d5d00"},level2:{fill:"#cf6e15",stroke:"#ff9c3c",back:"#6d5d00",label:"#9a673a"},level3:{fill:"rgba(249, 34, 34, 0.8)",stroke:"#ff4141",back:"#6d5d00",label:"#9a3333"}},t.bottomColorMap={robocop:{color:"#FF8227",wireColor:"#FF8126"},side:{color:"#ff4a4a",wireColor:"#ff4c4c"},level1:{color:"#ffe400",wireColor:"rgba(255, 228, 0, 0.5)"},level2:{color:"#FF8227",wireColor:"rgba(255, 130, 39, 0.5)"},level3:{color:"#dd2a2f",wireColor:"rgba(221, 42, 47, 0.5)"}},t.iconMap={construction:"&#xe64c;",trafficJam:"&#xe65d;",trafficAccident:"&#xe669;",200:"&#xe66b;",100:"&#xe6b1;",300:"&#xe6b2;",overWater:"&#xe608;",cityConstruction:"&#xe602;"},t.spriteOffsetX=0,t.init(e),t}return(0,_inherits3.default)(TrafficEvent2,_Object3D),(0,_createClass3.default)(TrafficEvent2,[{key:"init",value:function(e){this.initTop(),this.initBottom(),this.drawTrafficEventImg(e),this.boundingSphere=new _three.Sphere(new _three.Vector3(0,0,2.5),2.5),this.boundingBox=new _three.Box3(new _three.Vector3(-1,-1,0),new _three.Vector3(2,2,5))}},{key:"initTop",value:function(){var e=this.colorMap[this.source],t=e.fill,n=e.stroke,i=e.back,r=5,o=this.mixNum?68*r:2*Math.sqrt(450)*r,a=2*Math.sqrt(450)*r,s=getCanvas(o,a),l=s.width/o,c=l*r,u=s.getContext("2d");this.mixNum&&(u.fillStyle=i,u.beginPath(),u.moveTo(29*c,9*c),u.lineTo(68*c,9*c),u.lineTo(68*c,29*c),u.lineTo(65*c,33*c),u.lineTo(29*c,33*c),u.lineTo(2*Math.sqrt(30*c*30*c/2),Math.sqrt(30*c*30*c/2)),u.lineTo(29*c,9*c),u.fill(),u.fillStyle="#fff",u.font=16*c+"px HyperspaceRace-Bold",u.textBaseline="top",u.textAlign="left",u.fillText(this.mixNum,45*c,13*c)),u.fillStyle=t,u.strokeStyle=n,u.lineWidth=2*c,u.translate(Math.sqrt(450)*c,Math.sqrt(2)*c),u.rotate(45*Math.PI/180),u.fillRect(0,0,30*c-u.lineWidth,30*c-u.lineWidth),u.strokeRect(0,0,30*c-u.lineWidth,30*c-u.lineWidth),u.setTransform(1,0,0,1,0,0);var h=this.iconMap[this.trafficType]||"&#xe67a;";this.iconFont&&(h=this.iconFont),this.drawIcon(u,h,{color:n,scale:c,fontsize:16,position:[(u.canvas.height-16*c)/2,13*c]});var d=new _three.Texture(s);this.top?(this.top.material.map=d,this.top.material.map.needsUpdate=!0):(this.top=getRectangle(o,a,d),this.top.position.x=this.mixNum?.6:0,this.top.position.z=1.5,this.top.scale.set(1,1,1),this.add(this.top)),this.createRectangleWave()}},{key:"drawIcon",value:function drawIcon(ctx){var Unicode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&#xe67a;",options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},color=options.color,scale=options.scale,iconFont=options.iconFont,position=options.position,fontsize=options.fontsize;ctx.fillStyle=color,ctx.beginPath(),ctx.font=fontsize*scale+"px "+(iconFont||this.eventFont),-1!==Unicode.indexOf("&amp;")&&(Unicode=Unicode.replace("&amp;","&")),-1!==Unicode.indexOf("&amp")&&(Unicode=Unicode.replace("&amp","&"));var icon=eval('("'+(""+Unicode).replace("&#x","\\u").replace(";","")+'")');ctx.textBaseline="top",ctx.textAlign="left",ctx.fillText(icon,position[0],position[1])}},{key:"drawInfoPane",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{showDetail:!1,showClose:!1},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Detail-icon",a=r.showDetail,s=r.showClose,l=void 0,c=5,u=14,h=10,d=36,f=30,p=t.length/2;l=u*p+h*(p-1)+d+f;var m=this.colorMap[this.source].stroke,v=getCanvas(e*c,l*c),g=v.width/(e*c),y=g*c,b=v.getContext("2d");b.beginPath(),b.moveTo(0,0),b.lineTo((e/2-12-4*Math.tan(60*Math.PI/180))*y,0),b.lineTo((e/2-12)*y,4*y),b.lineTo(e*y,4*y),b.lineTo(e*y,f*y),b.lineTo(0,f*y),b.lineTo(0,0),b.fillStyle=m,b.closePath(),b.fill(),b.beginPath(),b.moveTo(0,f*y),b.lineTo(e*y,f*y),b.lineTo(e*y,l*y),b.lineTo(20*y,l*y),b.lineTo(0,(l-20)*y),b.lineTo(0,f*y),b.fillStyle="rgba(17, 19, 23, 0.8)",b.fill(),b.closePath(),a&&(b.beginPath(),b.moveTo(110*y,8.5*y),b.lineTo(164*y,8.5*y),b.lineTo(164*y,26.5*y),b.lineTo(110*y,26.5*y),b.lineTo(110*y,8.5*y),b.fillStyle="#B89D04",b.fill(),b.closePath(),b.fillStyle="#fff",b.font=12*y+"px FZZYJW--GB1-0",b.textBaseline="top",b.textAlign="left",b.fillText("详情",118*y,11.5*y),this.drawIcon(b,"&#xe926;",{color:"#fff",scale:y,fontsize:16,iconFont:o,position:[145*y,9.5*y]})),s&&this.drawIcon(b,"&#xe952;",{color:"#fff",scale:y,fontsize:12,iconFont:o,position:[228*y,9.5*y]}),b.fillStyle="#161920",b.font=14*y+"px FZZYJW--GB1-0",b.textBaseline="top",b.textAlign="left",b.fillText(n,14*y,8*y),t.forEach((function(e){var t=e.position,n=e.color,i=e.size,r=e.textAlign,o=e.value,a=e.fontFamily,s=e.legend,l=(0,_slicedToArray3.default)(t,2),c=l[0],u=l[1];s&&(b.fillStyle=s,b.fillRect(c*y,(u+2)*y,10*y,10*y)),b.fillStyle=n,b.font=i*y+"px "+a,b.textBaseline="top",b.textAlign=r,b.fillText(o,(s?c+10+8:c)*y,u*y)}));var x=new _three.Texture(v);if(x.anisotropy=16,x.minFilter=_three.NearestFilter,x.magFilter=_three.NearestFilter,x.needsUpdate=!0,this.infoPane&&this.infoHeight===l)this.infoPane.material.map=x,this.infoPane.material.map.needsUpdate=!0;else{this.infoPane&&this.remove(this.infoPane);var w=getRectangle(e,l,x);if(w.position.x=4.8,w.position.z=6+.2*(p-4),w.scale.set(3,3,3),this.add(w),this.infoPane||(w.visible=!1),this.infoPane=w,a){var _=this.initEnter();this.enter&&(0,_keys2.default)(this.enter._listeners).forEach((function(e){_.addEventListener(e,i.enter._listeners[e][0])})),this.enter=_,this.infoPane.add(this.enter),this.enter.center.set(.25,-.625*p)}if(s){var S=this.initClose();this.close&&(0,_keys2.default)(this.close._listeners).forEach((function(e){S.addEventListener(e,i.close._listeners[e][0])})),this.close=S,this.infoPane.add(this.close),this.close.center.set(-5,-.625*p)}this.infoHeight=l}}},{key:"createRectangleWave",value:function(){this.RectangleWave?(this.RectangleWave.material.uniforms.color1.value=new _three.Color(this.bottomColorMap[this.source].color),this.RectangleWave.material.uniforms.color1.value=new _three.Color(this.bottomColorMap[this.source].wireColor),this.RectangleWave.material.needsUpdate=!0):(this.RectangleWave=(0,_v2xMaptv.createWaveRectangle)({color1:new _three.Color(this.bottomColorMap[this.source].color),color2:new _three.Color(this.bottomColorMap[this.source].wireColor),radius:2,speed:2}),this.RectangleWave.position.y=0,this.RectangleWave.position.z=.1,this.RectangleWave.position.x=0,this.RectangleWave.visible=!1,this.top.add(this.RectangleWave))}},{key:"updateRectangleWave",value:function(e){this.RectangleWave.visible=e}},{key:"initBottom",value:function(){this.bottom=(0,_RingCircle2.default)({color:new _three.Color(this.bottomColorMap[this.source].color),colorRing:new _three.Color(this.bottomColorMap[this.source].color),radius1:.25,radius2:.375,width:.05}),this.add(this.bottom)}},{key:"initEnter",value:function(){var e=new _three.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:!0,opacity:0}),t=new _three.Sprite(e);return t.scale.set(.5,.2,1),t.material.color=new _three.Color("#58d2d4"),t.center.set(.25,-2.5),t}},{key:"initClose",value:function(){var e=new _three.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:!0,opacity:0}),t=new _three.Sprite(e);return t.scale.set(.2,.2,1),t.material.color=new _three.Color("#58d2d4"),t.center.set(-5,-2.5),t}},{key:"initHover",value:function(){this.addEventListener("mouseover",hover),this.addEventListener("mouseleave",leave)}},{key:"removeHover",value:function(){this.removeEventListener("mouseover",hover),this.removeEventListener("mouseleave",leave)}},{key:"initClick",value:function(){this.addEventListener("mouseup",click)}},{key:"removeCilck",value:function(){this.removeEventListener("mouseup",click)}},{key:"setSpriteStatus",value:function(e){this.trafficEventSprite.visible=e}},{key:"releaseHover",value:function(){this.hoverObject&&(this.hoverObject.visible=!1),this.hoverState=!1}},{key:"setColor",value:function(e){e&&(e=new _three.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.middle.material.color=this.color,this.right.material.uniforms.color.value=this.color)}},{key:"setActive",value:function(e){this.infoPane&&(this.infoPane.visible=e),this.updateRectangleWave(e),e?(this.top.position.z=2,this.top.scale.set(1.2,1.2,1.2),this.spriteOffsetX=3.8,this.trafficEventSprite.position.x=this.spriteOffsetX,this.trafficEventSprite.position.z=2.1):(this.top.position.z=1.5,this.top.scale.set(1,1,1),this.spriteOffsetX=3.5,this.trafficEventSprite.position.x=this.spriteOffsetX,this.trafficEventSprite.position.z=1.6)}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}}},{key:"drawTrafficEventImg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trafficEventSprite&&this.remove(this.trafficEventSprite);var t=5,n=this.mixLabel[this.source],i=null;if(this.trafficType){var r=_config.TrackEventType[this.trafficType];i=r&&r.name?r.name:e.eventName}var o=this.mixNum?n:i,a=e.iconWidth||t*(o.length+1)*14,s=e.iconHeight||20*t,l=getCanvas(a,s),c=this.colorMap[this.source].label,u=l.width/a,h=u*t,d=e.fontsize||14*h,f=l.getContext("2d");f.font="Bold "+d+"px Arial",this.spriteOffsetX=this.mixNum?4.2:3.5;var p=e.offset||new _three.Vector3(this.spriteOffsetX,0,1.6),m=new Image,v=!1;m.crossOrigin="Anonymous",f.fillStyle=c,fillRect(f,0,0,l.width,l.height),f.fillStyle="#fff",f.font=(v?"Bold ":"")+(Math.floor(d)||12)+"px Arial";var g=f.measureText(o),y=g.width;this.drawText(f,o,.5*(l.width-y),4*h,d,null,v);var b=new _three.Texture(l);b.anisotropy=16,b.minFilter=_three.NearestFilter,b.magFilter=_three.NearestFilter,b.needsUpdate=!0;var x=getRectangle(a,s,b);this.trafficEventSprite=x,x.name=e.name,x.position.x=p.x,x.position.z=p.z,this.add(x)}},{key:"drawRobocopEventImg",value:function(){if(this.imgSprite)this.imgSprite.visible=!0;else{var e=this,t=new _three.Vector3(10,0,8);if(this.eventImg){var n=this.eventImg,i=new Image;i.crossOrigin="Anonymous",i.width=1536,i.height=864,i.src=n,i.onload=function(n){var i=new _three.Texture(this);i.anisotropy=4,i.minFilter=_three.NearestFilter,i.magFilter=_three.NearestFilter,i.needsUpdate=!0;var r=getRectangle(1536,864,i);r.material.transparent=!1,e.imgSprite=r,r.name="robocopEvent",r.position.x=t.x,r.position.z=t.z,e.add(r)}}}}},{key:"drawText",value:function(e,t,n,i,r,o,a){e.fillStyle=getRGBA(o||new _three.Color(1,1,1)),e.font=(a?"Bold ":"")+(Math.floor(r)||12)+"px Arial",e.textBaseline="top";var s=e.measureText(t).width;e.fillText(t,Math.ceil(n),Math.ceil(i),s)}},{key:"raycast",value:function(e,t){var n=[],i=new _three.Sphere;i.copy(this.boundingSphere),i.applyMatrix4(this.matrixWorld);var r=e.ray.intersectsSphere(i);if(r){t.push({object:this,point:r,distance:e.ray.origin.distanceTo(r)});for(var o=0;o<this.children.length;o++){var a=this.children[o];a.visible&&a.raycast(e,n)}for(var s=0;s<n.length;s++){var l=n[s];l.distance=e.ray.origin.distanceTo(l.point)}if(n.sort((function(e,t){return e.distance-t.distance})),n.length)for(var c=0;c<n.length;c++)t.push(n[c]);return t}}},{key:"faceToCamera",value:function(e){this.top.rotation.y=e.rotation.z;var t=e.rotation.z,n=this.mixNum?.6:0;this.top.position.x=Math.cos(t)*n,this.top.position.y=Math.sin(t)*n,this.trafficEventSprite&&(this.trafficEventSprite.rotation.y=t,this.trafficEventSprite.position.x=Math.cos(t)*this.spriteOffsetX,this.trafficEventSprite.position.y=Math.sin(t)*this.spriteOffsetX),this.infoPane&&(this.infoPane.rotation.y=t,this.infoPane.position.x=4.8*Math.cos(t),this.infoPane.position.y=4*Math.sin(t))}},{key:"update",value:function(){}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,_toConsumableArray3.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,_toConsumableArray3.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}]),TrafficEvent2}(_three.Object3D);function getRGBA(e,t){return"rgba("+255*e.r+","+255*e.g+","+255*e.b+","+(t=t||1)+")"}function getCanvas(e,t){var n=document.createElement("canvas"),i=_three.MathUtils.ceilPowerOfTwo(e);return n.width=i,n.height=t*i/e,n}function getRectangle(e,t,n){var i=new _three.MeshBasicMaterial({map:n,transparent:!0,fog:!0});i.map.needsUpdate=!0,i.transparent=!0;var r=new _three.PlaneBufferGeometry(.01*e,.01*t,1,1),o=new _three.Mesh(r,i);return o.rotateX(.5*Math.PI),o}function hover(){this.trafficEventSprite?this.trafficEventSprite.visible=!0:this.drawTrafficEventImg(),this.hoverState=!0,this.iconSprite&&(this.iconSprite.scale.x=1.2,this.iconSprite.scale.y=1.2)}function leave(){this.iconSprite&&(this.iconSprite.scale.x=1,this.iconSprite.scale.y=1),this.hoverState=!1,this.clickState=!1,this.imgSprite&&(this.imgSprite.visible=!1),!this.onlyAnimition&&this.trafficEventSprite&&(this.trafficEventSprite.visible=!1)}function click(){this.clickState=!0,this.imgSprite?this.imgSprite.visible=!0:this.drawRobocopEventImg()}function fillRect(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t+i,n),e.lineTo(t+i,n+3*r/4),e.lineTo(t+i-.07*i,n+r),e.lineTo(t,n+r),e.fill()}},function(e,t,n){e.exports=!n(42)&&!n(65)((function(){return 7!=Object.defineProperty(n(113)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports=n(57)},function(e,t,n){var i=n(51),r=n(43),o=n(77);e.exports=n(42)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(58),r=n(69),o=n(239)(!1),a=n(115)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var i=n(28).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(58),r=n(66),o=n(115)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(161),r=n(117).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(92),r=n(76),o=n(69),a=n(114),s=n(58),l=n(158),c=Object.getOwnPropertyDescriptor;t.f=n(42)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(43);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(68),r=n(29)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(43),r=n(86),o=n(29)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||null==(n=i(a)[o])?t:r(n)}},function(e,t,n){var i,r,o,a=n(63),s=n(252),l=n(162),c=n(113),u=n(28),h=u.process,d=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,m=u.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){y.call(e.data)};d&&f||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},i(v),v},f=function(e){delete g[e]},"process"==n(78)(h)?i=function(e){h.nextTick(a(y,e,1))}:m&&m.now?i=function(e){m.now(a(y,e,1))}:p?(o=(r=new p).port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(43),r=n(50),o=n(122);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(29)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(13)),r=f(n(22)),o=f(n(21)),a=f(n(24)),s=f(n(19)),l=f(n(20)),c=n(17),u=n(0),h=n(40),d=n(125);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),this.viewer=null,this.loader=null,this.cityCode=null,this.trackedEntityId=null,this.tripLayer=null,this.lineNodeList=[],this.faceNodeList=[],this.mapLayer=null,this.MODELS=c.MODELS,this.zoneConfig=d.zoneConfig,this.id=t.id,this.modelBaseUrl="https://mapdata.bj.bcebos.com/maptv/model"}return(0,l.default)(e,[{key:"initGL",value:function(e,t,n){var i=t||{backgroundColor:"#122246"};console.log("Viewer",c.Viewer),this.viewer=new c.Viewer(e,i),this.viewer.setRenderMode(c.RENDER_MODE[n]),this.viewer.scene.view.maxPitch=0*-Math.PI/90,this.viewer.scene.view.minPitch=90*-Math.PI/90,this.viewer.scene.view.maxRadius=8e3,this.viewer.scene.view.minRadius=50,this.viewer.scene.basemap.visible=!1,this.viewer.setExposure(t.Exposure||1),window.viewer?window["viewer-"+this.id]=this.viewer:window.viewer=this.viewer,this.loader=new c.GeoJsonLoader({scene:this.viewer.scene})}},{key:"initData",value:function(e,t){var n=this;this.cityCode=e;var i=(new Date).getTime(),r="https://mapdata.bj.bcebos.com/maptv/json/"+e,s=[],l=[];["pdt"].forEach((function(e){s.push((0,h.get)(r+"/"+e+"_line.json").then((function(e){return e})).catch((function(e){console.log(e)}))),l.push((0,h.get)(r+"/"+e+"_face.json").then((function(e){return e})).catch((function(e){console.log(e)})))}));var u=a.default.all(s).then((function(e){var i={};e.forEach((function(e){e&&e.forEach((function(e){var t=e.layer_name,n=e.layer_geojson.features;i[t]?i[t]=i[t].concat(n):i[t]=n}))})),(0,o.default)(i).forEach((function(e){var r=e?t[e].params:{},o=c.Utils.json2line(i[e],r);n.lineNodeList.push(o),n.viewer.scene.scene.add(o)}))})),d=a.default.all(l).then((function(e){var i={};e.forEach((function(e){e&&e.forEach((function(e){var t=e.layer_name,n=e.layer_geojson.features;i[t]?i[t]=i[t].concat(n):i[t]=n}))})),(0,o.default)(i).forEach((function(e){var r=e?t[e].params:{},o=c.Utils.json2polygon(i[e],r);n.faceNodeList.push(o),n.viewer.scene.scene.add(o)}))}));return a.default.all([u,d]).then((function(){console.log("加载完毕","耗时： "+((new Date).getTime()-i)+"ms")}))}},{key:"initLod",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.cityCode=e;var o=new c.MapLayerLoader({debuggerMode:r});return new a.default((function(e){o.load(t,(function(t){n&&(t.style=n),t.minimumTilePixelSize=128,console.log("mapLayer",i.viewer.scene,t),i.viewer.scene.addMapLayer(t),i.mapLayer=t,i.fitToScene(),e(t)}))}))}},{key:"zoomPosition",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=i*(Math.PI/180),s=c.Utils.transformWGS84ToUTM({x:e,y:t}),l=s.x,u=s.y;this.viewer.flyTo(l,u,n,a,r,o)}},{key:"animationTo",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=i*(Math.PI/180),l=c.Utils.transformWGS84ToUTM({x:e,y:t}),h=l.x,d=l.y;console.log(h,d);var f=c.Utils.animateTo(this.viewer.scene,new u.Vector3(h,d,n),s,r,o,a);return f}},{key:"fitToScene",value:function(){this.viewer.fitToScene()}},{key:"setCompass",value:function(e){this.viewer.campass.setVisible(e)}},{key:"mapSwitch",value:function(e,t,n){this.viewer.switchDimension(e,t,n)}},{key:"addModel",value:function(e){this.viewer.scene.addModel(e)}},{key:"addIncident",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=new c.TrafficLabel({name:e,text:t,trafficType:"bridge"}),a=c.Utils.transformWGS84ToUTM({x:n,y:i}),s=a.x,l=a.y;o.position.set(s,l,r),this.addModel(o)}},{key:"removeObj",value:function(e){var t=null;t="object"!==(void 0===e?"undefined":(0,r.default)(e))?this.viewer.scene.getObjectByName(e):e,this.viewer.scene.removeModel(t)}},{key:"addEntity",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.modelType,a=r.label,s=a.text,l=a.labelOffset,h=a.fontsize,d=r.subType,f=r.source,p=r.z,m=void 0;return(m=o.indexOf("animate")>-1?new c.DynamicModel({name:e,modelUrl:this.modelBaseUrl+"/"+o+".glb",text:s,labelOffset:l,modelType:o}):new c.Model({name:e,modelUrl:this.modelBaseUrl+"/"+o+".glb",text:s,labelOffset:l,modelType:o})).setRotationFromAxisAngle(new u.Vector3(0,0,1),i*(Math.PI/180)),m.label&&m.label.setSize(h||12),m.position.x=t,m.position.y=n,m.position.z=p,m.subType=d,m.source=f,this.addModel(m),m}},{key:"moveEntity",value:function(e,t,n,i,r,o,a){e.position.x=n,e.position.y=i,e.setRotationFromAxisAngle(new u.Vector3(0,0,1),r*(Math.PI/180)),e.text?(o?e.showLabel():e.hideLabel(),e.setText(o)):o&&e.setText(o),o?e.text?e.showLabel():e.setText(o):e.text&&e.hideLabel(),e.text=o}},{key:"removeEntity",value:function(e){this.removeObj(e)}},{key:"addPolygon",value:function(e){var t=new c.Polygon(e);this.addModel(t)}},{key:"addLine",value:function(e){var t=new c.Polyline(e);this.addModel(t)}},{key:"addPolyline",value:function(e){return new c.Polyline(e)}},{key:"addTrafficLight",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=c.Utils.transformWGS84ToUTM({x:e,y:t}),a=o.x,s=o.y,l=new c.TrafficLights((0,i.default)({text:"00",imgUrl:"./img/left-green.png",width:20,height:40},n));l.position.set(a,s,3),l.sprite.center.x=0===r?0:1.5*r,this.viewer.scene.addTrafficLight(l)}},{key:"updateTrafficLight",value:function(e,t,n){var i=this.viewer.scene.getObjectByName(e);i&&i.setText(t,n)}},{key:"removeTrafficLight",value:function(e){var t=this.viewer.scene.getObjectByName(e);console.log("移除Label",t),this.viewer.scene.removeTrafficLight(t)}},{key:"addBuilds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"#222d50",topColor:"#ababab"},n=c.Utils.json2building(e,t),i=n.building;this.addModel(i)}},{key:"mergeLines",value:function(e,t){return c.Utils.json2line(e,t)}},{key:"addTripLayer",value:function(e){return this.tripLayer=new c.PolylineTripLayer(e),this.tripLayer}},{key:"loadTripLayers",value:function(e){var t=this;this.tripLayer.geoJsonload(e).then((function(e){t.viewer.scene.addBlurObject(e)}))}},{key:"openClick",value:function(e){new ScreenSpaceEventHandler(this.viewer.scene.canvas).setInputAction(e,ScreenSpaceEventType.LEFT_CLICK)}},{key:"getMouseObject",value:function(e,t){var n=this.viewer.area.getBoundingClientRect(),i=e.clientX,r=e.clientY,o=this.viewer.scene.getActiveCamera();return c.Utils.getMouseObjectIntersection({x:i-n.left,y:r-n.top},o,this.viewer,t,{_isRealPosition_:!0})}},{key:"addTextLabel",value:function(e){return new c.TextSprite(e)}},{key:"followObj",value:function(e,t){var n=null;if(n="string"==typeof e?this.viewer.scene.getObjectByName(e):e){var i=c.Utils.degreeToRadian(n.heading),r=t?-.15:-.4,o=t?-2:50,a=c.Utils.getCameraByTargetAndView(window.viewer,n.getWorldPosition(),{yaw:i,pitch:r,radius:o}),s=t?a.position.z+2:a.position.z;window.viewer.scene.view.position.x=a.position.x,window.viewer.scene.view.position.y=a.position.y,window.viewer.scene.view.position.z=s,window.viewer.scene.view.yaw=i,window.viewer.scene.view.radius=o,window.viewer.scene.view.pitch=r}}},{key:"transformUTMToWGS84",value:function(e){var t="+proj=utm +zone= "+this.zoneConfig[this.cityCode]+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs ";return c.Utils.transformPosition(e,t,"EPSG:4326")}},{key:"createAnimate",value:function(e){return new c.AnimationPath(e)}},{key:"zoomToPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments[4],o=arguments[5],a=new u.Object3D;a.boundingSphere=new u.Sphere(new u.Vector3(0,0,0),i),a.position.set(e,t,1),a.updateMatrixWorld(),this.viewer.zoomTo(a,1,n,r,o)}},{key:"addPlane",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new u.MeshBasicMaterial({opacity:t.opacity,depthTest:!0,depthWrite:!1}),r=new u.PlaneGeometry(4e5,4e5),o=new u.Mesh(r,i);if(o.position.set(t.offset[0],t.offset[1],t.offset[2]),o.renderOrder=3,n){var a=new u.TextureLoader;a.load(n,(function(t){t.wrapS=RepeatWrapping,t.wrapT=RepeatWrapping,t.repeat.set(40,40),i.map=t,e.scene.addModel(o)}))}else i.color.set(t.color),this.viewer.scene.addModel(o)}}],[{key:"getVector3",value:function(e,t,n){var i=c.Utils.transformWGS84ToUTM({x:e,y:t}),r=i.x,o=i.y;return new u.Vector3(r,o,n)}},{key:"transformUTMToWGS84",value:function(e){var t="+proj=utm +zone= "+d.zoneConfig[this.cityCode]+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs ";return c.Utils.transformPosition(e,t,"EPSG:4326")}},{key:"intersectModels",value:function(e,t){if(e&&t&&t.length)for(var n=e.name,i=e.getBoundingBoxWorld(),r=0;r<t.length;r++)if(n!==t[r].name){var o=t[r].getBoundingBoxWorld();i.intersectsBox(o)?(console.log(t[r].name),t[r].intersectsVisible="false"):t[r].intersectsVisible="true"}}},{key:"getAngle",value:function(e,t){var n=e.angleTo(t),i=e.clone();return i.cross(t),i.z<0&&(n=-n),n}}]),e}();t.default=p},function(e,t,n){e.exports={default:n(273),__esModule:!0}},function(e,t,n){"use strict";n.r(t),n.d(t,"Line2",(function(){return a}));var i=n(82),r=n(80),o=n(106),a=function(e,t){i.LineSegments2.call(this),this.type="Line2",this.geometry=void 0!==e?e:new r.LineGeometry,this.material=void 0!==t?t:new o.a({color:16777215*Math.random()})};a.prototype=Object.assign(Object.create(i.LineSegments2.prototype),{constructor:a,isLine2:!0})},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t,n){"use strict";var i=n(33);function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var i=n(33),r=n(303),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=n(181)),s),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(o)})),e.exports=l}).call(this,n(59))},function(e,t,n){"use strict";var i=n(33),r=n(304),o=n(178),a=n(306),s=n(309),l=n(310),c=n(182);e.exports=function(e){return new Promise((function(t,u){var h=e.data,d=e.headers;i.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",m=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+m)}var v=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};r(t,u,i),f=null}},f.onabort=function(){f&&(u(c("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){u(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(c(t,e,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var g=n(311),y=(e.withCredentials||l(v))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in f&&i.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),u(e),f=null)})),void 0===h&&(h=null),f.send(h)}))}},function(e,t,n){"use strict";var i=n(305);e.exports=function(e,t,n,r,o){var a=new Error(e);return i(a,t,n,r,o)}},function(e,t,n){"use strict";var i=n(33);e.exports=function(e,t){t=t||{};var n={},r=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),i.forEach(o,(function(r){i.isObject(t[r])?n[r]=i.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:i.isObject(e[r])?n[r]=i.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),i.forEach(a,(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])}));var s=r.concat(o).concat(a),l=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return i.forEach(l,(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])})),n}},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return{pending:e,fulfilled:n,rejected:t,inspect:function(e){var i=e.state();return 0===i?{state:"pending"}:i>0?n(e.value):t(e.value)}};function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function n(e){return{state:"fulfilled",value:e}}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return e.tryCatchResolve=t,e;function e(e,n){return arguments.length<2&&(n=t),i;function i(t,i,o){var a=e._defer(),s=o.length;return r({f:t,thisArg:i,args:o,params:new Array(s),i:s-1,call:n},a._handler),a}function r(t,i){if(t.i<0)return n(t.f,t.thisArg,t.params,i);e._handler(t.args[t.i]).fold(o,t,void 0,i)}function o(e,t,n){e.params[e.i]=t,e.i-=1,r(e,n)}}function t(e,t,n,i){try{i.resolve(e.apply(t,n))}catch(e){i.reject(e)}}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(19)),r=l(n(20)),o=n(17),a=n(0),s=n(60);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,i.default)(this,e),this.Map=t.Map,!this.Map)throw new Error("Map 为 ModelPlayer 必传字段");this._models=[]}return(0,r.default)(e,[{key:"render",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ZBindKey:"",z:1},i=n.ZBindKey,r=n.z;this._models.forEach((function(n,i){e.some((function(e){return e.id===n.name}))||(t.Map.removeObj(n),t._models.splice(i,1))})),e.forEach((function(e){var n=o.Utils.transformWGS84ToUTM({x:e.longitude,y:e.latitude}),l=n.x,c=n.y,u=t._models.find((function(t){return t.name===e.id}));if(u)u.position.x=l,u.position.y=c,u.position.z=e[i]||r||1,u.setText(e.label),u.setRotationFromAxisAngle(new a.Vector3(0,0,1),-e.heading*(Math.PI/180)),e.color&&t.setCarColor(u,e.color);else{if(!s.CAR_TYPE[e.type]||!s.CAR_TYPE[e.type].key)return void console.log("暂无模型",e.type);var h=s.CAR_TYPE[e.type].key;"pedestrian"===h&&(h=10*Math.random()>5?"pedestrian_man_animate":"pedestrian_woman_animate");var d=void 0;d=h.indexOf("animate")>-1?new o.DynamicModel({name:e.id,modelUrl:"https://mapdata.bj.bcebos.com/maptv/common/"+h+".glb",modelType:h,label:e.label||""}):new o.Model({name:e.id,modelUrl:"https://mapdata.bj.bcebos.com/maptv/common/"+h+".glb",modelType:h,label:e.label||""}),e.color&&t.setCarColor(d,e.color),d.setRotationFromAxisAngle(new a.Vector3(0,0,1),-e.heading*(Math.PI/180)),d.setText(e.label),d.position.x=l,d.position.y=c,d.position.z=e[i]||r||1,t.Map.addModel(d),t._models.push(d)}}))}},{key:"setCarColor",value:function(e,t){e.modelType.indexOf("new")>-1?e.setNameColor("body",new a.Color(t)):e.setColor(new a.Color(t))}},{key:"clear",value:function(){var e=this;this._models.forEach((function(t){e.Map.removeObj(t)})),this._models=[]}}]),e}();t.default=c},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(37))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(e){return e.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(e){return this.week()!==e.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(37))},function(e,t,n){"use strict";t.__esModule=!0;var i=o(n(129)),r=o(n(376));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return(0,r.default)((0,i.default)(e,{raw:{value:(0,r.default)(t)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(379),r=n(445),o=n(387),a=n(34),s=n(6),l=n(441);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"180.76.36.65:19001",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/mapServer/graphQL",c=new r.HttpLink({uri:"http"+(t?"s":"")+"://"+e+n}),u=new o.WebSocketLink({uri:"ws"+(t?"s":"")+"://"+e+n,options:{reconnect:!0}}),h=(0,a.split)((function(e){var t=e.query,n=(0,s.getMainDefinition)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),u,c),d=new i.ApolloClient({link:h,cache:new l.InMemoryCache,connectToDevTools:!0});return d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.default=i},function(e,t,n){var i,r,o,a,s,l,c,u,h,d,f,p,m,v,g;o=function(e,t,n){if(!h(t)||f(t)||p(t)||m(t)||u(t))return t;var i,r=0,a=0;if(d(t))for(i=[],a=t.length;r<a;r++)i.push(o(e,t[r],n));else for(var s in i={},t)Object.prototype.hasOwnProperty.call(t,s)&&(i[e(s,n)]=o(e,t[s],n));return i},a=function(e){return v(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)},s=function(e){var t=a(e);return t.substr(0,1).toUpperCase()+t.substr(1)},l=function(e,t){return function(e,t){var n=(t=t||{}).separator||"_",i=t.split||/(?=[A-Z])/;return e.split(i).join(n)}(e,t).toLowerCase()},c=Object.prototype.toString,u=function(e){return"function"==typeof e},h=function(e){return e===Object(e)},d=function(e){return"[object Array]"==c.call(e)},f=function(e){return"[object Date]"==c.call(e)},p=function(e){return"[object RegExp]"==c.call(e)},m=function(e){return"[object Boolean]"==c.call(e)},v=function(e){return(e-=0)==e},g=function(e,t){var n=t&&"process"in t?t.process:t;return"function"!=typeof n?e:function(t,i){return n(t,e,i)}},void 0===(r="function"==typeof(i={camelize:a,decamelize:l,pascalize:s,depascalize:l,camelizeKeys:function(e,t){return o(g(a,t),e)},decamelizeKeys:function(e,t){return o(g(l,t),e,t)},pascalizeKeys:function(e,t){return o(g(s,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}})?i.call(t,n,t,e):i)||(e.exports=r)},function(e,t,n){"use strict";var i;!function(r){var o={},a=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,s="[^\\s]+",l=/\[([^]*?)\]/gm,c=function(){};function u(e,t){for(var n=[],i=0,r=e.length;i<r;i++)n.push(e[i].substr(0,t));return n}function h(e){return function(t,n,i){var r=i[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~r&&(t.month=r)}}function d(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=u(p,3),v=u(f,3);o.i18n={dayNamesShort:v,dayNames:f,monthNamesShort:m,monthNames:p,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10)*e%10]}};var g={D:function(e){return e.getDay()},DD:function(e){return d(e.getDay())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDate()},dd:function(e){return d(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return d(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return d(String(e.getFullYear()),4).substr(2)},yyyy:function(e){return d(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return d(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return d(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return d(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return d(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return d(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return d(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+d(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},y={d:["\\d\\d?",function(e,t){e.day=t}],Do:["\\d\\d?"+s,function(e,t){e.day=parseInt(t,10)}],M:["\\d\\d?",function(e,t){e.month=t-1}],yy:["\\d\\d?",function(e,t){var n=+(""+(new Date).getFullYear()).substr(0,2);e.year=""+(t>68?n-1:n)+t}],h:["\\d\\d?",function(e,t){e.hour=t}],m:["\\d\\d?",function(e,t){e.minute=t}],s:["\\d\\d?",function(e,t){e.second=t}],yyyy:["\\d{4}",function(e,t){e.year=t}],S:["\\d",function(e,t){e.millisecond=100*t}],SS:["\\d{2}",function(e,t){e.millisecond=10*t}],SSS:["\\d{3}",function(e,t){e.millisecond=t}],D:["\\d\\d?",c],ddd:[s,c],MMM:[s,h("monthNamesShort")],MMMM:[s,h("monthNames")],a:[s,function(e,t,n){var i=t.toLowerCase();i===n.amPm[0]?e.isPm=!1:i===n.amPm[1]&&(e.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(e,t){var n,i=(t+"").match(/([+-]|\d\d)/gi);i&&(n=60*i[1]+parseInt(i[2],10),e.timezoneOffset="+"===i[0]?n:-n)}]};y.dd=y.d,y.dddd=y.ddd,y.DD=y.D,y.mm=y.m,y.hh=y.H=y.HH=y.h,y.MM=y.M,y.ss=y.s,y.A=y.a,o.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(e,t,n){var i=n||o.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=o.masks[t]||t||o.masks.default;var r=[];return(t=(t=t.replace(l,(function(e,t){return r.push(t),"@@@"}))).replace(a,(function(t){return t in g?g[t](e,i):t.slice(1,t.length-1)}))).replace(/@@@/g,(function(){return r.shift()}))},o.parse=function(e,t,n){var i=n||o.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=o.masks[t]||t,e.length>1e3)return null;var r={},s=[],c=[];t=t.replace(l,(function(e,t){return c.push(t),"@@@"}));var u,h=(u=t,u.replace(/[|\\{()[^$+*?.-]/g,"\\$&")).replace(a,(function(e){if(y[e]){var t=y[e];return s.push(t[1]),"("+t[0]+")"}return e}));h=h.replace(/@@@/g,(function(){return c.shift()}));var d=e.match(new RegExp(h,"i"));if(!d)return null;for(var f=1;f<d.length;f++)s[f-1](r,d[f],i);var p,m=new Date;return!0===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:!1===r.isPm&&12==+r.hour&&(r.hour=0),null!=r.timezoneOffset?(r.minute=+(r.minute||0)-+r.timezoneOffset,p=new Date(Date.UTC(r.year||m.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0))):p=new Date(r.year||m.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0),p},e.exports?e.exports=o:void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}()},function(e,t,n){"use strict";t.__esModule=!0,t.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.isHtmlElement=function(e){return e&&e.nodeType===Node.ELEMENT_NODE};t.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return null!=e}},function(e,t,n){"use strict";t.__esModule=!0,t.PopupManager=void 0;var i=l(n(31)),r=l(n(95)),o=l(n(409)),a=l(n(131)),s=n(52);function l(e){return e&&e.__esModule?e:{default:e}}var c=1,u=void 0;t.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+c++,o.default.register(this._popupId,this)},beforeDestroy:function(){o.default.deregister(this._popupId),o.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,i.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var n=(0,r.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var i=Number(n.openDelay);i>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(n)}),i):this.doOpen(n)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,n=e.modal,i=e.zIndex;if(i&&(o.default.zIndex=i),n&&(this._closing&&(o.default.closeModal(this._popupId),this._closing=!1),o.default.openModal(this._popupId,o.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,s.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,s.getStyle)(document.body,"paddingRight"),10)),u=(0,a.default)();var r=document.documentElement.clientHeight<document.body.scrollHeight,l=(0,s.getStyle)(document.body,"overflowY");u>0&&(r||"scroll"===l)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+u+"px"),(0,s.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=o.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){o.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,s.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=o.default},function(e,t,n){"use strict";t.__esModule=!0;n(44);t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(31),o=(i=r)&&i.__esModule?i:{default:i},a=n(52);var s=[],l="@@clickoutsideContext",c=void 0,u=0;function h(e,t,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&i.target&&r.target)||e.contains(i.target)||e.contains(r.target)||e===i.target||n.context.popperElm&&(n.context.popperElm.contains(i.target)||n.context.popperElm.contains(r.target))||(t.expression&&e[l].methodName&&n.context[e[l].methodName]?n.context[e[l].methodName]():e[l].bindingFn&&e[l].bindingFn())}}!o.default.prototype.$isServer&&(0,a.on)(document,"mousedown",(function(e){return c=e})),!o.default.prototype.$isServer&&(0,a.on)(document,"mouseup",(function(e){s.forEach((function(t){return t[l].documentHandler(e,c)}))})),t.default={bind:function(e,t,n){s.push(e);var i=u++;e[l]={id:i,documentHandler:h(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[l].documentHandler=h(e,t,n),e[l].methodName=t.expression,e[l].bindingFn=t.value},unbind:function(e){for(var t=s.length,n=0;n<t;n++)if(s[n][l].id===e[l].id){s.splice(n,1);break}delete e[l]}}},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=83)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},4:function(e,t){e.exports=n(61)},83:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=e._i(n,null);i.checked?o<0&&(e.model=n.concat([null])):o>-1&&(e.model=n.slice(0,o).concat(n.slice(o+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e.label,a=e._i(n,o);i.checked?a<0&&(e.model=n.concat([o])):a>-1&&(e.model=n.slice(0,a).concat(n.slice(a+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])};i._withStripped=!0;var r=n(4),o={name:"ElCheckbox",mixins:[n.n(r).a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},a=n(0),s=Object(a.a)(o,i,[],!1,null,null,null);s.options.__file="packages/checkbox/src/checkbox.vue";var l=s.exports;l.install=function(e){e.component(l.name,l)};t.default=l}})},function(e,t){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,t){var r,o,a,s,l;for(a in t)if(r=e[a],o=t[a],r&&n.test(a))if("class"===a&&("string"==typeof r&&(l=r,e[a]=r={},r[l]=!0),"string"==typeof o&&(l=o,t[a]=o={},o[l]=!0)),"on"===a||"nativeOn"===a||"hook"===a)for(s in o)r[s]=i(r[s],o[s]);else if(Array.isArray(r))e[a]=r.concat(o);else if(Array.isArray(o))e[a]=[r].concat(o);else for(s in o)r[s]=o[s];else e[a]=t[a];return e}),{})}},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=124)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},124:function(e,t,n){"use strict";n.r(t);var i={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,i=this.hit,r=this.effect,o=e("span",{class:["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",r?"el-tag--"+r:"",i&&"is-hit"],style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?o:e("transition",{attrs:{name:"el-zoom-in-center"}},[o])}},r=n(0),o=Object(r.a)(i,void 0,void 0,!1,null,null,null);o.options.__file="packages/tag/src/tag.vue";var a=o.exports;a.install=function(e){e.component(a.name,a)};t.default=a}})},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=116)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},116:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])};i._withStripped=!0;var r=n(4),o={name:"ElRadio",mixins:[n.n(r).a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){for(var e=this.$parent;e;){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},a=n(0),s=Object(a.a)(o,i,[],!1,null,null,null);s.options.__file="packages/radio/src/radio.vue";var l=s.exports;l.install=function(e){e.component(l.name,l)};t.default=l},4:function(e,t){e.exports=n(61)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"version",(function(){return i})),n.d(t,"versionInfo",(function(){return r})),n.d(t,"graphql",(function(){return wr})),n.d(t,"graphqlSync",(function(){return _r})),n.d(t,"GraphQLSchema",(function(){return Xt})),n.d(t,"GraphQLDirective",(function(){return Bt})),n.d(t,"GraphQLScalarType",(function(){return ze})),n.d(t,"GraphQLObjectType",(function(){return Ue})),n.d(t,"GraphQLInterfaceType",(function(){return $e})),n.d(t,"GraphQLUnionType",(function(){return Xe})),n.d(t,"GraphQLEnumType",(function(){return Ke})),n.d(t,"GraphQLInputObjectType",(function(){return Ze})),n.d(t,"GraphQLList",(function(){return Ae})),n.d(t,"GraphQLNonNull",(function(){return Oe})),n.d(t,"specifiedScalarTypes",(function(){return gt})),n.d(t,"GraphQLInt",(function(){return ht})),n.d(t,"GraphQLFloat",(function(){return dt})),n.d(t,"GraphQLString",(function(){return pt})),n.d(t,"GraphQLBoolean",(function(){return mt})),n.d(t,"GraphQLID",(function(){return vt})),n.d(t,"specifiedDirectives",(function(){return Ht})),n.d(t,"GraphQLIncludeDirective",(function(){return jt})),n.d(t,"GraphQLSkipDirective",(function(){return zt})),n.d(t,"GraphQLDeprecatedDirective",(function(){return Vt})),n.d(t,"GraphQLSpecifiedByDirective",(function(){return Gt})),n.d(t,"TypeKind",(function(){return At})),n.d(t,"DEFAULT_DEPRECATION_REASON",(function(){return Ut})),n.d(t,"introspectionTypes",(function(){return Dt})),n.d(t,"__Schema",(function(){return wt})),n.d(t,"__Directive",(function(){return _t})),n.d(t,"__DirectiveLocation",(function(){return St})),n.d(t,"__Type",(function(){return Mt})),n.d(t,"__Field",(function(){return Tt})),n.d(t,"__InputValue",(function(){return Et})),n.d(t,"__EnumValue",(function(){return Ct})),n.d(t,"__TypeKind",(function(){return Ot})),n.d(t,"SchemaMetaFieldDef",(function(){return Lt})),n.d(t,"TypeMetaFieldDef",(function(){return kt})),n.d(t,"TypeNameMetaFieldDef",(function(){return Pt})),n.d(t,"isSchema",(function(){return Yt})),n.d(t,"isDirective",(function(){return Ft})),n.d(t,"isType",(function(){return ee})),n.d(t,"isScalarType",(function(){return ne})),n.d(t,"isObjectType",(function(){return re})),n.d(t,"isInterfaceType",(function(){return ae})),n.d(t,"isUnionType",(function(){return le})),n.d(t,"isEnumType",(function(){return ue})),n.d(t,"isInputObjectType",(function(){return de})),n.d(t,"isListType",(function(){return pe})),n.d(t,"isNonNullType",(function(){return ve})),n.d(t,"isInputType",(function(){return ye})),n.d(t,"isOutputType",(function(){return xe})),n.d(t,"isLeafType",(function(){return _e})),n.d(t,"isCompositeType",(function(){return Me})),n.d(t,"isAbstractType",(function(){return Ee})),n.d(t,"isWrappingType",(function(){return Le})),n.d(t,"isNullableType",(function(){return Pe})),n.d(t,"isNamedType",(function(){return Ne})),n.d(t,"isRequiredArgument",(function(){return Ye})),n.d(t,"isRequiredInputField",(function(){return tt})),n.d(t,"isSpecifiedScalarType",(function(){return yt})),n.d(t,"isIntrospectionType",(function(){return It})),n.d(t,"isSpecifiedDirective",(function(){return Wt})),n.d(t,"assertSchema",(function(){return $t})),n.d(t,"assertDirective",(function(){return Rt})),n.d(t,"assertType",(function(){return te})),n.d(t,"assertScalarType",(function(){return ie})),n.d(t,"assertObjectType",(function(){return oe})),n.d(t,"assertInterfaceType",(function(){return se})),n.d(t,"assertUnionType",(function(){return ce})),n.d(t,"assertEnumType",(function(){return he})),n.d(t,"assertInputObjectType",(function(){return fe})),n.d(t,"assertListType",(function(){return me})),n.d(t,"assertNonNullType",(function(){return ge})),n.d(t,"assertInputType",(function(){return be})),n.d(t,"assertOutputType",(function(){return we})),n.d(t,"assertLeafType",(function(){return Se})),n.d(t,"assertCompositeType",(function(){return Te})),n.d(t,"assertAbstractType",(function(){return Ce})),n.d(t,"assertWrappingType",(function(){return ke})),n.d(t,"assertNullableType",(function(){return De})),n.d(t,"assertNamedType",(function(){return Fe})),n.d(t,"getNullableType",(function(){return Ie})),n.d(t,"getNamedType",(function(){return Re})),n.d(t,"validateSchema",(function(){return Kt})),n.d(t,"assertValidSchema",(function(){return Jt})),n.d(t,"Token",(function(){return u.b})),n.d(t,"Source",(function(){return Mr.a})),n.d(t,"Location",(function(){return u.a})),n.d(t,"getLocation",(function(){return Tr.a})),n.d(t,"printLocation",(function(){return Er.a})),n.d(t,"printSourceLocation",(function(){return Er.b})),n.d(t,"Lexer",(function(){return Cr.a})),n.d(t,"TokenKind",(function(){return Ar.a})),n.d(t,"parse",(function(){return a.a})),n.d(t,"parseValue",(function(){return a.c})),n.d(t,"parseType",(function(){return a.b})),n.d(t,"print",(function(){return U})),n.d(t,"visit",(function(){return f})),n.d(t,"visitInParallel",(function(){return p})),n.d(t,"getVisitFn",(function(){return m})),n.d(t,"BREAK",(function(){return d})),n.d(t,"Kind",(function(){return j.a})),n.d(t,"DirectiveLocation",(function(){return at.a})),n.d(t,"isDefinitionNode",(function(){return bn})),n.d(t,"isExecutableDefinitionNode",(function(){return xn})),n.d(t,"isSelectionNode",(function(){return wn})),n.d(t,"isValueNode",(function(){return _n})),n.d(t,"isTypeNode",(function(){return Sn})),n.d(t,"isTypeSystemDefinitionNode",(function(){return Mn})),n.d(t,"isTypeDefinitionNode",(function(){return Tn})),n.d(t,"isTypeSystemExtensionNode",(function(){return En})),n.d(t,"isTypeExtensionNode",(function(){return Cn})),n.d(t,"execute",(function(){return Ji})),n.d(t,"executeSync",(function(){return Zi})),n.d(t,"defaultFieldResolver",(function(){return br})),n.d(t,"defaultTypeResolver",(function(){return yr})),n.d(t,"responsePathAsArray",(function(){return zi})),n.d(t,"getDirectiveValues",(function(){return Qi})),n.d(t,"subscribe",(function(){return Dr})),n.d(t,"createSourceEventStream",(function(){return Fr})),n.d(t,"validate",(function(){return Ri})),n.d(t,"ValidationContext",(function(){return Fi})),n.d(t,"specifiedRules",(function(){return ki})),n.d(t,"ExecutableDefinitionsRule",(function(){return An})),n.d(t,"FieldsOnCorrectTypeRule",(function(){return Rn})),n.d(t,"FragmentsOnCompositeTypesRule",(function(){return In})),n.d(t,"KnownArgumentNamesRule",(function(){return Kn})),n.d(t,"KnownDirectivesRule",(function(){return qn})),n.d(t,"KnownFragmentNamesRule",(function(){return jn})),n.d(t,"KnownTypeNamesRule",(function(){return Pn})),n.d(t,"LoneAnonymousOperationRule",(function(){return Ln})),n.d(t,"NoFragmentCyclesRule",(function(){return Vn})),n.d(t,"NoUndefinedVariablesRule",(function(){return Hn})),n.d(t,"NoUnusedFragmentsRule",(function(){return zn})),n.d(t,"NoUnusedVariablesRule",(function(){return Wn})),n.d(t,"OverlappingFieldsCanBeMergedRule",(function(){return hi})),n.d(t,"PossibleFragmentSpreadsRule",(function(){return Un})),n.d(t,"ProvidedRequiredArgumentsRule",(function(){return oi})),n.d(t,"ScalarLeafsRule",(function(){return Fn})),n.d(t,"SingleFieldSubscriptionsRule",(function(){return kn})),n.d(t,"UniqueArgumentNamesRule",(function(){return Zn})),n.d(t,"UniqueDirectivesPerLocationRule",(function(){return Yn})),n.d(t,"UniqueFragmentNamesRule",(function(){return Bn})),n.d(t,"UniqueInputFieldNamesRule",(function(){return xi})),n.d(t,"UniqueOperationNamesRule",(function(){return On})),n.d(t,"UniqueVariableNamesRule",(function(){return Gn})),n.d(t,"ValuesOfCorrectTypeRule",(function(){return ei})),n.d(t,"VariablesAreInputTypesRule",(function(){return Nn})),n.d(t,"VariablesInAllowedPositionRule",(function(){return li})),n.d(t,"LoneSchemaDefinitionRule",(function(){return wi})),n.d(t,"UniqueOperationTypesRule",(function(){return _i})),n.d(t,"UniqueTypeNamesRule",(function(){return Si})),n.d(t,"UniqueEnumValueNamesRule",(function(){return Mi})),n.d(t,"UniqueFieldDefinitionNamesRule",(function(){return Ti})),n.d(t,"UniqueDirectiveNamesRule",(function(){return Ci})),n.d(t,"PossibleTypeExtensionsRule",(function(){return Oi})),n.d(t,"NoDeprecatedCustomRule",(function(){return Rr})),n.d(t,"NoSchemaIntrospectionCustomRule",(function(){return Br})),n.d(t,"GraphQLError",(function(){return l.a})),n.d(t,"syntaxError",(function(){return jr.a})),n.d(t,"locatedError",(function(){return y})),n.d(t,"printError",(function(){return l.b})),n.d(t,"formatError",(function(){return zr})),n.d(t,"getIntrospectionQuery",(function(){return Gr})),n.d(t,"getOperationAST",(function(){return Hr})),n.d(t,"getOperationRootType",(function(){return Ui})),n.d(t,"introspectionFromSchema",(function(){return Yr})),n.d(t,"buildClientSchema",(function(){return $r})),n.d(t,"buildASTSchema",(function(){return ro})),n.d(t,"buildSchema",(function(){return oo})),n.d(t,"getDescription",(function(){return io})),n.d(t,"extendSchema",(function(){return Jr})),n.d(t,"lexicographicSortSchema",(function(){return co})),n.d(t,"printSchema",(function(){return po})),n.d(t,"printType",(function(){return bo})),n.d(t,"printIntrospectionSchema",(function(){return mo})),n.d(t,"typeFromAST",(function(){return mn})),n.d(t,"valueFromAST",(function(){return Gi})),n.d(t,"valueFromASTUntyped",(function(){return K})),n.d(t,"astFromValue",(function(){return bt})),n.d(t,"TypeInfo",(function(){return vn})),n.d(t,"visitWithTypeInfo",(function(){return yn})),n.d(t,"coerceInputValue",(function(){return Wi})),n.d(t,"concatAST",(function(){return Ao})),n.d(t,"separateOperations",(function(){return Oo})),n.d(t,"stripIgnoredCharacters",(function(){return Po})),n.d(t,"isEqualType",(function(){return nt})),n.d(t,"isTypeSubTypeOf",(function(){return it})),n.d(t,"doTypesOverlap",(function(){return rt})),n.d(t,"assertValidName",(function(){return x})),n.d(t,"isValidNameError",(function(){return w})),n.d(t,"BreakingChangeType",(function(){return Ro})),n.d(t,"DangerousChangeType",(function(){return Bo})),n.d(t,"findBreakingChanges",(function(){return jo})),n.d(t,"findDangerousChanges",(function(){return zo})),n.d(t,"findDeprecatedUsages",(function(){return Zo}));var i="15.5.0",r=Object.freeze({major:15,minor:5,patch:0,preReleaseTag:null});function o(e){return"function"==typeof(null==e?void 0:e.then)}var a=n(55),s=n(9),l=n(2),c=n(3),u=n(11),h={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},d=Object.freeze({});function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,i=void 0,r=Array.isArray(e),o=[e],a=-1,s=[],l=void 0,f=void 0,p=void 0,v=[],g=[],y=e;do{var b=++a===o.length,x=b&&0!==s.length;if(b){if(f=0===g.length?void 0:v[v.length-1],l=p,p=g.pop(),x){if(r)l=l.slice();else{for(var w={},_=0,S=Object.keys(l);_<S.length;_++){var M=S[_];w[M]=l[M]}l=w}for(var T=0,E=0;E<s.length;E++){var C=s[E][0],A=s[E][1];r&&(C-=T),r&&null===A?(l.splice(C,1),T++):l[C]=A}}a=i.index,o=i.keys,s=i.edits,r=i.inArray,i=i.prev}else{if(f=p?r?a:o[a]:void 0,null==(l=p?p[f]:y))continue;p&&v.push(f)}var O,L=void 0;if(!Array.isArray(l)){if(!Object(u.c)(l))throw new Error("Invalid AST Node: ".concat(Object(c.a)(l),"."));var k=m(t,l.kind,b);if(k){if((L=k.call(t,l,f,p,v,g))===d)break;if(!1===L){if(!b){v.pop();continue}}else if(void 0!==L&&(s.push([f,L]),!b)){if(!Object(u.c)(L)){v.pop();continue}l=L}}}if(void 0===L&&x&&s.push([f,l]),b)v.pop();else i={inArray:r,index:a,keys:o,edits:s,prev:i},o=(r=Array.isArray(l))?l:null!==(O=n[l.kind])&&void 0!==O?O:[],a=-1,s=[],p&&g.push(p),p=l}while(void 0!==i);return 0!==s.length&&(y=s[s.length-1][1]),y}function p(e){var t=new Array(e.length);return{enter:function(n){for(var i=0;i<e.length;i++)if(null==t[i]){var r=m(e[i],n.kind,!1);if(r){var o=r.apply(e[i],arguments);if(!1===o)t[i]=n;else if(o===d)t[i]=d;else if(void 0!==o)return o}}},leave:function(n){for(var i=0;i<e.length;i++)if(null==t[i]){var r=m(e[i],n.kind,!0);if(r){var o=r.apply(e[i],arguments);if(o===d)t[i]=d;else if(void 0!==o&&!1!==o)return o}}else t[i]===n&&(t[i]=null)}}}function m(e,t,n){var i=e[t];if(i){if(!n&&"function"==typeof i)return i;var r=n?i.leave:i.enter;if("function"==typeof r)return r}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var a=o[t];if("function"==typeof a)return a}}}var v=Array.prototype.find?function(e,t){return Array.prototype.find.call(e,t)}:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(t(i))return i}},g=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))};function y(e,t,n){var i,r=e instanceof Error?e:new Error("Unexpected error value: "+Object(c.a)(e));return Array.isArray(r.path)?r:new l.a(r.message,null!==(i=r.nodes)&&void 0!==i?i:t,r.source,r.positions,n,r)}var b=/^[_a-zA-Z][_a-zA-Z0-9]*$/;function x(e){var t=w(e);if(t)throw t;return e}function w(e){return"string"==typeof e||Object(s.a)(0,"Expected name to be a string."),e.length>1&&"_"===e[0]&&"_"===e[1]?new l.a('Name "'.concat(e,'" must not begin with "__", which is reserved by GraphQL introspection.')):b.test(e)?void 0:new l.a('Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but "'.concat(e,'" does not.'))}var _=Object.entries||function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))},S=n(12);function M(e,t){return e.reduce((function(e,n){return e[t(n)]=n,e}),Object.create(null))}function T(e,t){for(var n=Object.create(null),i=0,r=_(e);i<r.length;i++){var o=r[i],a=o[0],s=o[1];n[a]=t(s,a)}return n}function E(e){if(null===Object.getPrototypeOf(e))return e;for(var t=Object.create(null),n=0,i=_(e);n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}return t}function C(e,t,n){return e.reduce((function(e,i){return e[t(i)]=n(i),e}),Object.create(null))}var A=n(26);function O(e,t){var n="string"==typeof e?[e,t]:[void 0,e],i=n[0],r=" Did you mean ";i&&(r+=i+" ");var o=n[1].map((function(e){return'"'.concat(e,'"')}));switch(o.length){case 0:return"";case 1:return r+o[0]+"?";case 2:return r+o[0]+" or "+o[1]+"?"}var a=o.slice(0,5),s=a.pop();return r+a.join(", ")+", or "+s+"?"}var L=n(15);function k(e){return e}var P=n(32);function D(e,t){for(var n=0,i=0;n<e.length&&i<t.length;){var r=e.charCodeAt(n),o=t.charCodeAt(i);if(N(r)&&N(o)){var a=0;do{++n,a=10*a+r-I,r=e.charCodeAt(n)}while(N(r)&&a>0);var s=0;do{++i,s=10*s+o-I,o=t.charCodeAt(i)}while(N(o)&&s>0);if(a<s)return-1;if(a>s)return 1}else{if(r<o)return-1;if(r>o)return 1;++n,++i}}return e.length-t.length}var I=48;function N(e){return!isNaN(e)&&I<=e&&e<=57}function F(e,t){for(var n=Object.create(null),i=new R(e),r=Math.floor(.4*e.length)+1,o=0;o<t.length;o++){var a=t[o],s=i.measure(a,r);void 0!==s&&(n[a]=s)}return Object.keys(n).sort((function(e,t){var i=n[e]-n[t];return 0!==i?i:D(e,t)}))}var R=function(){function e(e){this._input=e,this._inputLowerCase=e.toLowerCase(),this._inputArray=B(this._inputLowerCase),this._rows=[new Array(e.length+1).fill(0),new Array(e.length+1).fill(0),new Array(e.length+1).fill(0)]}return e.prototype.measure=function(e,t){if(this._input===e)return 0;var n=e.toLowerCase();if(this._inputLowerCase===n)return 1;var i=B(n),r=this._inputArray;if(i.length<r.length){var o=i;i=r,r=o}var a=i.length,s=r.length;if(!(a-s>t)){for(var l=this._rows,c=0;c<=s;c++)l[0][c]=c;for(var u=1;u<=a;u++){for(var h=l[(u-1)%3],d=l[u%3],f=d[0]=u,p=1;p<=s;p++){var m=i[u-1]===r[p-1]?0:1,v=Math.min(h[p]+1,d[p-1]+1,h[p-1]+m);if(u>1&&p>1&&i[u-1]===r[p-2]&&i[u-2]===r[p-1]){var g=l[(u-2)%3][p-2];v=Math.min(v,g+1)}v<f&&(f=v),d[p]=v}if(f>t)return}var y=l[a%3][s];return y<=t?y:void 0}},e}();function B(e){for(var t=e.length,n=new Array(t),i=0;i<t;++i)n[i]=e.charCodeAt(i);return n}var j=n(1),z=n(41);function U(e){return f(e,{leave:V})}var V={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return H(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,i=q("(",H(e.variableDefinitions,", "),")"),r=H(e.directives," "),o=e.selectionSet;return n||r||i||"query"!==t?H([t,H([n,i]),r,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,i=e.defaultValue,r=e.directives;return t+": "+n+q(" = ",i)+q(" ",H(r," "))},SelectionSet:function(e){return W(e.selections)},Field:function(e){var t=e.alias,n=e.name,i=e.arguments,r=e.directives,o=e.selectionSet,a=q("",t,": ")+n,s=a+q("(",H(i,", "),")");return s.length>80&&(s=a+q("(\n",Y(H(i,"\n")),"\n)")),H([s,H(r," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+q(" ",H(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,i=e.selectionSet;return H(["...",q("on ",t),H(n," "),i]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,i=e.variableDefinitions,r=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(q("(",H(i,", "),")")," ")+"on ".concat(n," ").concat(q("",H(r," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?Object(z.c)(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+H(e.values,", ")+"]"},ObjectValue:function(e){return"{"+H(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+q("(",H(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:G((function(e){var t=e.directives,n=e.operationTypes;return H(["schema",H(t," "),W(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:G((function(e){return H(["scalar",e.name,H(e.directives," ")]," ")})),ObjectTypeDefinition:G((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return H(["type",t,q("implements ",H(n," & ")),H(i," "),W(r)]," ")})),FieldDefinition:G((function(e){var t=e.name,n=e.arguments,i=e.type,r=e.directives;return t+(X(n)?q("(\n",Y(H(n,"\n")),"\n)"):q("(",H(n,", "),")"))+": "+i+q(" ",H(r," "))})),InputValueDefinition:G((function(e){var t=e.name,n=e.type,i=e.defaultValue,r=e.directives;return H([t+": "+n,q("= ",i),H(r," ")]," ")})),InterfaceTypeDefinition:G((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return H(["interface",t,q("implements ",H(n," & ")),H(i," "),W(r)]," ")})),UnionTypeDefinition:G((function(e){var t=e.name,n=e.directives,i=e.types;return H(["union",t,H(n," "),i&&0!==i.length?"= "+H(i," | "):""]," ")})),EnumTypeDefinition:G((function(e){var t=e.name,n=e.directives,i=e.values;return H(["enum",t,H(n," "),W(i)]," ")})),EnumValueDefinition:G((function(e){return H([e.name,H(e.directives," ")]," ")})),InputObjectTypeDefinition:G((function(e){var t=e.name,n=e.directives,i=e.fields;return H(["input",t,H(n," "),W(i)]," ")})),DirectiveDefinition:G((function(e){var t=e.name,n=e.arguments,i=e.repeatable,r=e.locations;return"directive @"+t+(X(n)?q("(\n",Y(H(n,"\n")),"\n)"):q("(",H(n,", "),")"))+(i?" repeatable":"")+" on "+H(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return H(["extend schema",H(t," "),W(n)]," ")},ScalarTypeExtension:function(e){return H(["extend scalar",e.name,H(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return H(["extend type",t,q("implements ",H(n," & ")),H(i," "),W(r)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return H(["extend interface",t,q("implements ",H(n," & ")),H(i," "),W(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,i=e.types;return H(["extend union",t,H(n," "),i&&0!==i.length?"= "+H(i," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,i=e.values;return H(["extend enum",t,H(n," "),W(i)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,i=e.fields;return H(["extend input",t,H(n," "),W(i)]," ")}};function G(e){return function(t){return H([t.description,e(t)],"\n")}}function H(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function W(e){return q("{\n",Y(H(e,"\n")),"\n}")}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function Y(e){return q("  ",e.replace(/\n/g,"\n  "))}function $(e){return-1!==e.indexOf("\n")}function X(e){return null!=e&&e.some($)}var Q=n(10);function K(e,t){switch(e.kind){case j.a.NULL:return null;case j.a.INT:return parseInt(e.value,10);case j.a.FLOAT:return parseFloat(e.value);case j.a.STRING:case j.a.ENUM:case j.a.BOOLEAN:return e.value;case j.a.LIST:return e.values.map((function(e){return K(e,t)}));case j.a.OBJECT:return C(e.fields,(function(e){return e.name.value}),(function(e){return K(e.value,t)}));case j.a.VARIABLE:return null==t?void 0:t[e.name.value]}Object(Q.a)(0,"Unexpected value node: "+Object(c.a)(e))}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Z(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}function ee(e){return ne(e)||re(e)||ae(e)||le(e)||ue(e)||de(e)||pe(e)||ve(e)}function te(e){if(!ee(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL type."));return e}function ne(e){return Object(A.a)(e,ze)}function ie(e){if(!ne(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Scalar type."));return e}function re(e){return Object(A.a)(e,Ue)}function oe(e){if(!re(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Object type."));return e}function ae(e){return Object(A.a)(e,$e)}function se(e){if(!ae(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Interface type."));return e}function le(e){return Object(A.a)(e,Xe)}function ce(e){if(!le(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Union type."));return e}function ue(e){return Object(A.a)(e,Ke)}function he(e){if(!ue(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Enum type."));return e}function de(e){return Object(A.a)(e,Ze)}function fe(e){if(!de(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Input Object type."));return e}function pe(e){return Object(A.a)(e,Ae)}function me(e){if(!pe(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL List type."));return e}function ve(e){return Object(A.a)(e,Oe)}function ge(e){if(!ve(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL Non-Null type."));return e}function ye(e){return ne(e)||ue(e)||de(e)||Le(e)&&ye(e.ofType)}function be(e){if(!ye(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL input type."));return e}function xe(e){return ne(e)||re(e)||ae(e)||le(e)||ue(e)||Le(e)&&xe(e.ofType)}function we(e){if(!xe(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL output type."));return e}function _e(e){return ne(e)||ue(e)}function Se(e){if(!_e(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL leaf type."));return e}function Me(e){return re(e)||ae(e)||le(e)}function Te(e){if(!Me(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL composite type."));return e}function Ee(e){return ae(e)||le(e)}function Ce(e){if(!Ee(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL abstract type."));return e}function Ae(e){if(!(this instanceof Ae))return new Ae(e);this.ofType=te(e)}function Oe(e){if(!(this instanceof Oe))return new Oe(e);this.ofType=De(e)}function Le(e){return pe(e)||ve(e)}function ke(e){if(!Le(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL wrapping type."));return e}function Pe(e){return ee(e)&&!ve(e)}function De(e){if(!Pe(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL nullable type."));return e}function Ie(e){if(e)return ve(e)?e.ofType:e}function Ne(e){return ne(e)||re(e)||ae(e)||le(e)||ue(e)||de(e)}function Fe(e){if(!Ne(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL named type."));return e}function Re(e){if(e){for(var t=e;Le(t);)t=t.ofType;return t}}function Be(e){return"function"==typeof e?e():e}function je(e){return e&&e.length>0?e:void 0}Ae.prototype.toString=function(){return"["+String(this.ofType)+"]"},Ae.prototype.toJSON=function(){return this.toString()},Object.defineProperty(Ae.prototype,S.c,{get:function(){return"GraphQLList"}}),Object(P.a)(Ae),Oe.prototype.toString=function(){return String(this.ofType)+"!"},Oe.prototype.toJSON=function(){return this.toString()},Object.defineProperty(Oe.prototype,S.c,{get:function(){return"GraphQLNonNull"}}),Object(P.a)(Oe);var ze=function(){function e(e){var t,n,i,r=null!==(t=e.parseValue)&&void 0!==t?t:k;this.name=e.name,this.description=e.description,this.specifiedByUrl=e.specifiedByUrl,this.serialize=null!==(n=e.serialize)&&void 0!==n?n:k,this.parseValue=r,this.parseLiteral=null!==(i=e.parseLiteral)&&void 0!==i?i:function(e,t){return r(K(e,t))},this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=je(e.extensionASTNodes),"string"==typeof e.name||Object(s.a)(0,"Must provide name."),null==e.specifiedByUrl||"string"==typeof e.specifiedByUrl||Object(s.a)(0,"".concat(this.name,' must provide "specifiedByUrl" as a string, ')+"but got: ".concat(Object(c.a)(e.specifiedByUrl),".")),null==e.serialize||"function"==typeof e.serialize||Object(s.a)(0,"".concat(this.name,' must provide "serialize" function. If this custom Scalar is also used as an input type, ensure "parseValue" and "parseLiteral" functions are also provided.')),e.parseLiteral&&("function"==typeof e.parseValue&&"function"==typeof e.parseLiteral||Object(s.a)(0,"".concat(this.name,' must provide both "parseValue" and "parseLiteral" functions.')))}var t=e.prototype;return t.toConfig=function(){var e;return{name:this.name,description:this.description,specifiedByUrl:this.specifiedByUrl,serialize:this.serialize,parseValue:this.parseValue,parseLiteral:this.parseLiteral,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:null!==(e=this.extensionASTNodes)&&void 0!==e?e:[]}},t.toString=function(){return this.name},t.toJSON=function(){return this.toString()},Z(e,[{key:S.c,get:function(){return"GraphQLScalarType"}}]),e}();Object(P.a)(ze);var Ue=function(){function e(e){this.name=e.name,this.description=e.description,this.isTypeOf=e.isTypeOf,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=je(e.extensionASTNodes),this._fields=Ge.bind(void 0,e),this._interfaces=Ve.bind(void 0,e),"string"==typeof e.name||Object(s.a)(0,"Must provide name."),null==e.isTypeOf||"function"==typeof e.isTypeOf||Object(s.a)(0,"".concat(this.name,' must provide "isTypeOf" as a function, ')+"but got: ".concat(Object(c.a)(e.isTypeOf),"."))}var t=e.prototype;return t.getFields=function(){return"function"==typeof this._fields&&(this._fields=this._fields()),this._fields},t.getInterfaces=function(){return"function"==typeof this._interfaces&&(this._interfaces=this._interfaces()),this._interfaces},t.toConfig=function(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:We(this.getFields()),isTypeOf:this.isTypeOf,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes||[]}},t.toString=function(){return this.name},t.toJSON=function(){return this.toString()},Z(e,[{key:S.c,get:function(){return"GraphQLObjectType"}}]),e}();function Ve(e){var t,n=null!==(t=Be(e.interfaces))&&void 0!==t?t:[];return Array.isArray(n)||Object(s.a)(0,"".concat(e.name," interfaces must be an Array or a function which returns an Array.")),n}function Ge(e){var t=Be(e.fields);return He(t)||Object(s.a)(0,"".concat(e.name," fields must be an object with field names as keys or a function which returns such an object.")),T(t,(function(t,n){var i;He(t)||Object(s.a)(0,"".concat(e.name,".").concat(n," field config must be an object.")),!("isDeprecated"in t)||Object(s.a)(0,"".concat(e.name,".").concat(n,' should provide "deprecationReason" instead of "isDeprecated".')),null==t.resolve||"function"==typeof t.resolve||Object(s.a)(0,"".concat(e.name,".").concat(n," field resolver must be a function if ")+"provided, but got: ".concat(Object(c.a)(t.resolve),"."));var r=null!==(i=t.args)&&void 0!==i?i:{};He(r)||Object(s.a)(0,"".concat(e.name,".").concat(n," args must be an object with argument names as keys."));var o=_(r).map((function(e){var t=e[0],n=e[1];return{name:t,description:n.description,type:n.type,defaultValue:n.defaultValue,deprecationReason:n.deprecationReason,extensions:n.extensions&&E(n.extensions),astNode:n.astNode}}));return{name:n,description:t.description,type:t.type,args:o,resolve:t.resolve,subscribe:t.subscribe,isDeprecated:null!=t.deprecationReason,deprecationReason:t.deprecationReason,extensions:t.extensions&&E(t.extensions),astNode:t.astNode}}))}function He(e){return Object(L.a)(e)&&!Array.isArray(e)}function We(e){return T(e,(function(e){return{description:e.description,type:e.type,args:qe(e.args),resolve:e.resolve,subscribe:e.subscribe,deprecationReason:e.deprecationReason,extensions:e.extensions,astNode:e.astNode}}))}function qe(e){return C(e,(function(e){return e.name}),(function(e){return{description:e.description,type:e.type,defaultValue:e.defaultValue,deprecationReason:e.deprecationReason,extensions:e.extensions,astNode:e.astNode}}))}function Ye(e){return ve(e.type)&&void 0===e.defaultValue}Object(P.a)(Ue);var $e=function(){function e(e){this.name=e.name,this.description=e.description,this.resolveType=e.resolveType,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=je(e.extensionASTNodes),this._fields=Ge.bind(void 0,e),this._interfaces=Ve.bind(void 0,e),"string"==typeof e.name||Object(s.a)(0,"Must provide name."),null==e.resolveType||"function"==typeof e.resolveType||Object(s.a)(0,"".concat(this.name,' must provide "resolveType" as a function, ')+"but got: ".concat(Object(c.a)(e.resolveType),"."))}var t=e.prototype;return t.getFields=function(){return"function"==typeof this._fields&&(this._fields=this._fields()),this._fields},t.getInterfaces=function(){return"function"==typeof this._interfaces&&(this._interfaces=this._interfaces()),this._interfaces},t.toConfig=function(){var e;return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:We(this.getFields()),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:null!==(e=this.extensionASTNodes)&&void 0!==e?e:[]}},t.toString=function(){return this.name},t.toJSON=function(){return this.toString()},Z(e,[{key:S.c,get:function(){return"GraphQLInterfaceType"}}]),e}();Object(P.a)($e);var Xe=function(){function e(e){this.name=e.name,this.description=e.description,this.resolveType=e.resolveType,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=je(e.extensionASTNodes),this._types=Qe.bind(void 0,e),"string"==typeof e.name||Object(s.a)(0,"Must provide name."),null==e.resolveType||"function"==typeof e.resolveType||Object(s.a)(0,"".concat(this.name,' must provide "resolveType" as a function, ')+"but got: ".concat(Object(c.a)(e.resolveType),"."))}var t=e.prototype;return t.getTypes=function(){return"function"==typeof this._types&&(this._types=this._types()),this._types},t.toConfig=function(){var e;return{name:this.name,description:this.description,types:this.getTypes(),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:null!==(e=this.extensionASTNodes)&&void 0!==e?e:[]}},t.toString=function(){return this.name},t.toJSON=function(){return this.toString()},Z(e,[{key:S.c,get:function(){return"GraphQLUnionType"}}]),e}();function Qe(e){var t=Be(e.types);return Array.isArray(t)||Object(s.a)(0,"Must provide Array of types or a function which returns such an array for Union ".concat(e.name,".")),t}Object(P.a)(Xe);var Ke=function(){function e(e){var t,n;this.name=e.name,this.description=e.description,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=je(e.extensionASTNodes),this._values=(t=this.name,He(n=e.values)||Object(s.a)(0,"".concat(t," values must be an object with value names as keys.")),_(n).map((function(e){var n=e[0],i=e[1];return He(i)||Object(s.a)(0,"".concat(t,".").concat(n,' must refer to an object with a "value" key ')+"representing an internal value but got: ".concat(Object(c.a)(i),".")),!("isDeprecated"in i)||Object(s.a)(0,"".concat(t,".").concat(n,' should provide "deprecationReason" instead of "isDeprecated".')),{name:n,description:i.description,value:void 0!==i.value?i.value:n,isDeprecated:null!=i.deprecationReason,deprecationReason:i.deprecationReason,extensions:i.extensions&&E(i.extensions),astNode:i.astNode}}))),this._valueLookup=new Map(this._values.map((function(e){return[e.value,e]}))),this._nameLookup=M(this._values,(function(e){return e.name})),"string"==typeof e.name||Object(s.a)(0,"Must provide name.")}var t=e.prototype;return t.getValues=function(){return this._values},t.getValue=function(e){return this._nameLookup[e]},t.serialize=function(e){var t=this._valueLookup.get(e);if(void 0===t)throw new l.a('Enum "'.concat(this.name,'" cannot represent value: ').concat(Object(c.a)(e)));return t.name},t.parseValue=function(e){if("string"!=typeof e){var t=Object(c.a)(e);throw new l.a('Enum "'.concat(this.name,'" cannot represent non-string value: ').concat(t,".")+Je(this,t))}var n=this.getValue(e);if(null==n)throw new l.a('Value "'.concat(e,'" does not exist in "').concat(this.name,'" enum.')+Je(this,e));return n.value},t.parseLiteral=function(e,t){if(e.kind!==j.a.ENUM){var n=U(e);throw new l.a('Enum "'.concat(this.name,'" cannot represent non-enum value: ').concat(n,".")+Je(this,n),e)}var i=this.getValue(e.value);if(null==i){var r=U(e);throw new l.a('Value "'.concat(r,'" does not exist in "').concat(this.name,'" enum.')+Je(this,r),e)}return i.value},t.toConfig=function(){var e,t=C(this.getValues(),(function(e){return e.name}),(function(e){return{description:e.description,value:e.value,deprecationReason:e.deprecationReason,extensions:e.extensions,astNode:e.astNode}}));return{name:this.name,description:this.description,values:t,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:null!==(e=this.extensionASTNodes)&&void 0!==e?e:[]}},t.toString=function(){return this.name},t.toJSON=function(){return this.toString()},Z(e,[{key:S.c,get:function(){return"GraphQLEnumType"}}]),e}();function Je(e,t){return O("the enum value",F(t,e.getValues().map((function(e){return e.name}))))}Object(P.a)(Ke);var Ze=function(){function e(e){this.name=e.name,this.description=e.description,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=je(e.extensionASTNodes),this._fields=et.bind(void 0,e),"string"==typeof e.name||Object(s.a)(0,"Must provide name.")}var t=e.prototype;return t.getFields=function(){return"function"==typeof this._fields&&(this._fields=this._fields()),this._fields},t.toConfig=function(){var e,t=T(this.getFields(),(function(e){return{description:e.description,type:e.type,defaultValue:e.defaultValue,extensions:e.extensions,astNode:e.astNode}}));return{name:this.name,description:this.description,fields:t,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:null!==(e=this.extensionASTNodes)&&void 0!==e?e:[]}},t.toString=function(){return this.name},t.toJSON=function(){return this.toString()},Z(e,[{key:S.c,get:function(){return"GraphQLInputObjectType"}}]),e}();function et(e){var t=Be(e.fields);return He(t)||Object(s.a)(0,"".concat(e.name," fields must be an object with field names as keys or a function which returns such an object.")),T(t,(function(t,n){return!("resolve"in t)||Object(s.a)(0,"".concat(e.name,".").concat(n," field has a resolve property, but Input Types cannot define resolvers.")),{name:n,description:t.description,type:t.type,defaultValue:t.defaultValue,deprecationReason:t.deprecationReason,extensions:t.extensions&&E(t.extensions),astNode:t.astNode}}))}function tt(e){return ve(e.type)&&void 0===e.defaultValue}function nt(e,t){return e===t||(ve(e)&&ve(t)||!(!pe(e)||!pe(t)))&&nt(e.ofType,t.ofType)}function it(e,t,n){return t===n||(ve(n)?!!ve(t)&&it(e,t.ofType,n.ofType):ve(t)?it(e,t.ofType,n):pe(n)?!!pe(t)&&it(e,t.ofType,n.ofType):!pe(t)&&(Ee(n)&&(ae(t)||re(t))&&e.isSubType(n,t)))}function rt(e,t,n){return t===n||(Ee(t)?Ee(n)?e.getPossibleTypes(t).some((function(t){return e.isSubType(n,t)})):e.isSubType(t,n):!!Ee(n)&&e.isSubType(n,t))}Object(P.a)(Ze);var ot=Array.from||function(e,t,n){if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i=e[S.b];if("function"==typeof i){for(var r,o=i.call(e),a=[],s=0;!(r=o.next()).done;++s)if(a.push(t.call(n,r.value,s)),s>9999999)throw new TypeError("Near-infinite iteration.");return a}var l=e.length;if("number"==typeof l&&l>=0&&l%1==0){for(var c=[],u=0;u<l;++u)Object.prototype.hasOwnProperty.call(e,u)&&c.push(t.call(n,e[u],u));return c}return[]},at=n(8),st=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};if(null==e||"object"!==lt(e))return null;if(Array.isArray(e))return e.map(t);var n=e[S.b];if("function"==typeof n){for(var i,r=n.call(e),o=[],a=0;!(i=r.next()).done;++a)o.push(t(i.value,a));return o}var s=e.length;if("number"==typeof s&&s>=0&&s%1==0){for(var l=[],c=0;c<s;++c){if(!Object.prototype.hasOwnProperty.call(e,c))return null;l.push(t(e[String(c)],c))}return l}return null}var ut=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var ht=new ze({name:"Int",description:"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.",serialize:function(e){var t=ft(e);if("boolean"==typeof t)return t?1:0;var n=t;if("string"==typeof t&&""!==t&&(n=Number(t)),!ut(n))throw new l.a("Int cannot represent non-integer value: ".concat(Object(c.a)(t)));if(n>2147483647||n<-2147483648)throw new l.a("Int cannot represent non 32-bit signed integer value: "+Object(c.a)(t));return n},parseValue:function(e){if(!ut(e))throw new l.a("Int cannot represent non-integer value: ".concat(Object(c.a)(e)));if(e>2147483647||e<-2147483648)throw new l.a("Int cannot represent non 32-bit signed integer value: ".concat(e));return e},parseLiteral:function(e){if(e.kind!==j.a.INT)throw new l.a("Int cannot represent non-integer value: ".concat(U(e)),e);var t=parseInt(e.value,10);if(t>2147483647||t<-2147483648)throw new l.a("Int cannot represent non 32-bit signed integer value: ".concat(e.value),e);return t}});var dt=new ze({name:"Float",description:"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).",serialize:function(e){var t=ft(e);if("boolean"==typeof t)return t?1:0;var n=t;if("string"==typeof t&&""!==t&&(n=Number(t)),!st(n))throw new l.a("Float cannot represent non numeric value: ".concat(Object(c.a)(t)));return n},parseValue:function(e){if(!st(e))throw new l.a("Float cannot represent non numeric value: ".concat(Object(c.a)(e)));return e},parseLiteral:function(e){if(e.kind!==j.a.FLOAT&&e.kind!==j.a.INT)throw new l.a("Float cannot represent non numeric value: ".concat(U(e)),e);return parseFloat(e.value)}});function ft(e){if(Object(L.a)(e)){if("function"==typeof e.valueOf){var t=e.valueOf();if(!Object(L.a)(t))return t}if("function"==typeof e.toJSON)return e.toJSON()}return e}var pt=new ze({name:"String",description:"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.",serialize:function(e){var t=ft(e);if("string"==typeof t)return t;if("boolean"==typeof t)return t?"true":"false";if(st(t))return t.toString();throw new l.a("String cannot represent value: ".concat(Object(c.a)(e)))},parseValue:function(e){if("string"!=typeof e)throw new l.a("String cannot represent a non string value: ".concat(Object(c.a)(e)));return e},parseLiteral:function(e){if(e.kind!==j.a.STRING)throw new l.a("String cannot represent a non string value: ".concat(U(e)),e);return e.value}});var mt=new ze({name:"Boolean",description:"The `Boolean` scalar type represents `true` or `false`.",serialize:function(e){var t=ft(e);if("boolean"==typeof t)return t;if(st(t))return 0!==t;throw new l.a("Boolean cannot represent a non boolean value: ".concat(Object(c.a)(t)))},parseValue:function(e){if("boolean"!=typeof e)throw new l.a("Boolean cannot represent a non boolean value: ".concat(Object(c.a)(e)));return e},parseLiteral:function(e){if(e.kind!==j.a.BOOLEAN)throw new l.a("Boolean cannot represent a non boolean value: ".concat(U(e)),e);return e.value}});var vt=new ze({name:"ID",description:'The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.',serialize:function(e){var t=ft(e);if("string"==typeof t)return t;if(ut(t))return String(t);throw new l.a("ID cannot represent value: ".concat(Object(c.a)(e)))},parseValue:function(e){if("string"==typeof e)return e;if(ut(e))return e.toString();throw new l.a("ID cannot represent value: ".concat(Object(c.a)(e)))},parseLiteral:function(e){if(e.kind!==j.a.STRING&&e.kind!==j.a.INT)throw new l.a("ID cannot represent a non-string and non-integer value: "+U(e),e);return e.value}}),gt=Object.freeze([pt,ht,dt,mt,vt]);function yt(e){return gt.some((function(t){var n=t.name;return e.name===n}))}function bt(e,t){if(ve(t)){var n=bt(e,t.ofType);return(null==n?void 0:n.kind)===j.a.NULL?null:n}if(null===e)return{kind:j.a.NULL};if(void 0===e)return null;if(pe(t)){var i=t.ofType,r=ct(e);if(null!=r){for(var o=[],a=0;a<r.length;a++){var s=bt(r[a],i);null!=s&&o.push(s)}return{kind:j.a.LIST,values:o}}return bt(e,i)}if(de(t)){if(!Object(L.a)(e))return null;for(var l=[],u=0,h=g(t.getFields());u<h.length;u++){var d=h[u],f=bt(e[d.name],d.type);f&&l.push({kind:j.a.OBJECT_FIELD,name:{kind:j.a.NAME,value:d.name},value:f})}return{kind:j.a.OBJECT,fields:l}}if(_e(t)){var p=t.serialize(e);if(null==p)return null;if("boolean"==typeof p)return{kind:j.a.BOOLEAN,value:p};if("number"==typeof p&&st(p)){var m=String(p);return xt.test(m)?{kind:j.a.INT,value:m}:{kind:j.a.FLOAT,value:m}}if("string"==typeof p)return ue(t)?{kind:j.a.ENUM,value:p}:t===vt&&xt.test(p)?{kind:j.a.INT,value:p}:{kind:j.a.STRING,value:p};throw new TypeError("Cannot convert value to AST: ".concat(Object(c.a)(p),"."))}Object(Q.a)(0,"Unexpected input type: "+Object(c.a)(t))}var xt=/^-?(?:0|[1-9][0-9]*)$/,wt=new Ue({name:"__Schema",description:"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.",fields:function(){return{description:{type:pt,resolve:function(e){return e.description}},types:{description:"A list of all types supported by this server.",type:new Oe(new Ae(new Oe(Mt))),resolve:function(e){return g(e.getTypeMap())}},queryType:{description:"The type that query operations will be rooted at.",type:new Oe(Mt),resolve:function(e){return e.getQueryType()}},mutationType:{description:"If this server supports mutation, the type that mutation operations will be rooted at.",type:Mt,resolve:function(e){return e.getMutationType()}},subscriptionType:{description:"If this server support subscription, the type that subscription operations will be rooted at.",type:Mt,resolve:function(e){return e.getSubscriptionType()}},directives:{description:"A list of all directives supported by this server.",type:new Oe(new Ae(new Oe(_t))),resolve:function(e){return e.getDirectives()}}}}}),_t=new Ue({name:"__Directive",description:"A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.\n\nIn some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.",fields:function(){return{name:{type:new Oe(pt),resolve:function(e){return e.name}},description:{type:pt,resolve:function(e){return e.description}},isRepeatable:{type:new Oe(mt),resolve:function(e){return e.isRepeatable}},locations:{type:new Oe(new Ae(new Oe(St))),resolve:function(e){return e.locations}},args:{type:new Oe(new Ae(new Oe(Et))),resolve:function(e){return e.args}}}}}),St=new Ke({name:"__DirectiveLocation",description:"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.",values:{QUERY:{value:at.a.QUERY,description:"Location adjacent to a query operation."},MUTATION:{value:at.a.MUTATION,description:"Location adjacent to a mutation operation."},SUBSCRIPTION:{value:at.a.SUBSCRIPTION,description:"Location adjacent to a subscription operation."},FIELD:{value:at.a.FIELD,description:"Location adjacent to a field."},FRAGMENT_DEFINITION:{value:at.a.FRAGMENT_DEFINITION,description:"Location adjacent to a fragment definition."},FRAGMENT_SPREAD:{value:at.a.FRAGMENT_SPREAD,description:"Location adjacent to a fragment spread."},INLINE_FRAGMENT:{value:at.a.INLINE_FRAGMENT,description:"Location adjacent to an inline fragment."},VARIABLE_DEFINITION:{value:at.a.VARIABLE_DEFINITION,description:"Location adjacent to a variable definition."},SCHEMA:{value:at.a.SCHEMA,description:"Location adjacent to a schema definition."},SCALAR:{value:at.a.SCALAR,description:"Location adjacent to a scalar definition."},OBJECT:{value:at.a.OBJECT,description:"Location adjacent to an object type definition."},FIELD_DEFINITION:{value:at.a.FIELD_DEFINITION,description:"Location adjacent to a field definition."},ARGUMENT_DEFINITION:{value:at.a.ARGUMENT_DEFINITION,description:"Location adjacent to an argument definition."},INTERFACE:{value:at.a.INTERFACE,description:"Location adjacent to an interface definition."},UNION:{value:at.a.UNION,description:"Location adjacent to a union definition."},ENUM:{value:at.a.ENUM,description:"Location adjacent to an enum definition."},ENUM_VALUE:{value:at.a.ENUM_VALUE,description:"Location adjacent to an enum value definition."},INPUT_OBJECT:{value:at.a.INPUT_OBJECT,description:"Location adjacent to an input object type definition."},INPUT_FIELD_DEFINITION:{value:at.a.INPUT_FIELD_DEFINITION,description:"Location adjacent to an input object field definition."}}}),Mt=new Ue({name:"__Type",description:"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByUrl`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.",fields:function(){return{kind:{type:new Oe(Ot),resolve:function(e){return ne(e)?At.SCALAR:re(e)?At.OBJECT:ae(e)?At.INTERFACE:le(e)?At.UNION:ue(e)?At.ENUM:de(e)?At.INPUT_OBJECT:pe(e)?At.LIST:ve(e)?At.NON_NULL:void Object(Q.a)(0,'Unexpected type: "'.concat(Object(c.a)(e),'".'))}},name:{type:pt,resolve:function(e){return void 0!==e.name?e.name:void 0}},description:{type:pt,resolve:function(e){return void 0!==e.description?e.description:void 0}},specifiedByUrl:{type:pt,resolve:function(e){return void 0!==e.specifiedByUrl?e.specifiedByUrl:void 0}},fields:{type:new Ae(new Oe(Tt)),args:{includeDeprecated:{type:mt,defaultValue:!1}},resolve:function(e,t){var n=t.includeDeprecated;if(re(e)||ae(e)){var i=g(e.getFields());return n?i:i.filter((function(e){return null==e.deprecationReason}))}}},interfaces:{type:new Ae(new Oe(Mt)),resolve:function(e){if(re(e)||ae(e))return e.getInterfaces()}},possibleTypes:{type:new Ae(new Oe(Mt)),resolve:function(e,t,n,i){var r=i.schema;if(Ee(e))return r.getPossibleTypes(e)}},enumValues:{type:new Ae(new Oe(Ct)),args:{includeDeprecated:{type:mt,defaultValue:!1}},resolve:function(e,t){var n=t.includeDeprecated;if(ue(e)){var i=e.getValues();return n?i:i.filter((function(e){return null==e.deprecationReason}))}}},inputFields:{type:new Ae(new Oe(Et)),args:{includeDeprecated:{type:mt,defaultValue:!1}},resolve:function(e,t){var n=t.includeDeprecated;if(de(e)){var i=g(e.getFields());return n?i:i.filter((function(e){return null==e.deprecationReason}))}}},ofType:{type:Mt,resolve:function(e){return void 0!==e.ofType?e.ofType:void 0}}}}}),Tt=new Ue({name:"__Field",description:"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.",fields:function(){return{name:{type:new Oe(pt),resolve:function(e){return e.name}},description:{type:pt,resolve:function(e){return e.description}},args:{type:new Oe(new Ae(new Oe(Et))),args:{includeDeprecated:{type:mt,defaultValue:!1}},resolve:function(e,t){return t.includeDeprecated?e.args:e.args.filter((function(e){return null==e.deprecationReason}))}},type:{type:new Oe(Mt),resolve:function(e){return e.type}},isDeprecated:{type:new Oe(mt),resolve:function(e){return null!=e.deprecationReason}},deprecationReason:{type:pt,resolve:function(e){return e.deprecationReason}}}}}),Et=new Ue({name:"__InputValue",description:"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.",fields:function(){return{name:{type:new Oe(pt),resolve:function(e){return e.name}},description:{type:pt,resolve:function(e){return e.description}},type:{type:new Oe(Mt),resolve:function(e){return e.type}},defaultValue:{type:pt,description:"A GraphQL-formatted string representing the default value for this input value.",resolve:function(e){var t=e.type,n=bt(e.defaultValue,t);return n?U(n):null}},isDeprecated:{type:new Oe(mt),resolve:function(e){return null!=e.deprecationReason}},deprecationReason:{type:pt,resolve:function(e){return e.deprecationReason}}}}}),Ct=new Ue({name:"__EnumValue",description:"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.",fields:function(){return{name:{type:new Oe(pt),resolve:function(e){return e.name}},description:{type:pt,resolve:function(e){return e.description}},isDeprecated:{type:new Oe(mt),resolve:function(e){return null!=e.deprecationReason}},deprecationReason:{type:pt,resolve:function(e){return e.deprecationReason}}}}}),At=Object.freeze({SCALAR:"SCALAR",OBJECT:"OBJECT",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",INPUT_OBJECT:"INPUT_OBJECT",LIST:"LIST",NON_NULL:"NON_NULL"}),Ot=new Ke({name:"__TypeKind",description:"An enum describing what kind of type a given `__Type` is.",values:{SCALAR:{value:At.SCALAR,description:"Indicates this type is a scalar."},OBJECT:{value:At.OBJECT,description:"Indicates this type is an object. `fields` and `interfaces` are valid fields."},INTERFACE:{value:At.INTERFACE,description:"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields."},UNION:{value:At.UNION,description:"Indicates this type is a union. `possibleTypes` is a valid field."},ENUM:{value:At.ENUM,description:"Indicates this type is an enum. `enumValues` is a valid field."},INPUT_OBJECT:{value:At.INPUT_OBJECT,description:"Indicates this type is an input object. `inputFields` is a valid field."},LIST:{value:At.LIST,description:"Indicates this type is a list. `ofType` is a valid field."},NON_NULL:{value:At.NON_NULL,description:"Indicates this type is a non-null. `ofType` is a valid field."}}}),Lt={name:"__schema",type:new Oe(wt),description:"Access the current type schema of this server.",args:[],resolve:function(e,t,n,i){return i.schema},isDeprecated:!1,deprecationReason:void 0,extensions:void 0,astNode:void 0},kt={name:"__type",type:Mt,description:"Request the type information of a single type.",args:[{name:"name",description:void 0,type:new Oe(pt),defaultValue:void 0,deprecationReason:void 0,extensions:void 0,astNode:void 0}],resolve:function(e,t,n,i){var r=t.name;return i.schema.getType(r)},isDeprecated:!1,deprecationReason:void 0,extensions:void 0,astNode:void 0},Pt={name:"__typename",type:new Oe(pt),description:"The name of the current Object type at runtime.",args:[],resolve:function(e,t,n,i){return i.parentType.name},isDeprecated:!1,deprecationReason:void 0,extensions:void 0,astNode:void 0},Dt=Object.freeze([wt,_t,St,Mt,Tt,Et,Ct,Ot]);function It(e){return Dt.some((function(t){var n=t.name;return e.name===n}))}function Nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ft(e){return Object(A.a)(e,Bt)}function Rt(e){if(!Ft(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL directive."));return e}var Bt=function(){function e(e){var t,n;this.name=e.name,this.description=e.description,this.locations=e.locations,this.isRepeatable=null!==(t=e.isRepeatable)&&void 0!==t&&t,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,e.name||Object(s.a)(0,"Directive must be named."),Array.isArray(e.locations)||Object(s.a)(0,"@".concat(e.name," locations must be an Array."));var i=null!==(n=e.args)&&void 0!==n?n:{};Object(L.a)(i)&&!Array.isArray(i)||Object(s.a)(0,"@".concat(e.name," args must be an object with argument names as keys.")),this.args=_(i).map((function(e){var t=e[0],n=e[1];return{name:t,description:n.description,type:n.type,defaultValue:n.defaultValue,deprecationReason:n.deprecationReason,extensions:n.extensions&&E(n.extensions),astNode:n.astNode}}))}var t,n,i,r=e.prototype;return r.toConfig=function(){return{name:this.name,description:this.description,locations:this.locations,args:qe(this.args),isRepeatable:this.isRepeatable,extensions:this.extensions,astNode:this.astNode}},r.toString=function(){return"@"+this.name},r.toJSON=function(){return this.toString()},t=e,(n=[{key:S.c,get:function(){return"GraphQLDirective"}}])&&Nt(t.prototype,n),i&&Nt(t,i),e}();Object(P.a)(Bt);var jt=new Bt({name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:[at.a.FIELD,at.a.FRAGMENT_SPREAD,at.a.INLINE_FRAGMENT],args:{if:{type:new Oe(mt),description:"Included when true."}}}),zt=new Bt({name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:[at.a.FIELD,at.a.FRAGMENT_SPREAD,at.a.INLINE_FRAGMENT],args:{if:{type:new Oe(mt),description:"Skipped when true."}}}),Ut="No longer supported",Vt=new Bt({name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:[at.a.FIELD_DEFINITION,at.a.ARGUMENT_DEFINITION,at.a.INPUT_FIELD_DEFINITION,at.a.ENUM_VALUE],args:{reason:{type:pt,description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).",defaultValue:Ut}}}),Gt=new Bt({name:"specifiedBy",description:"Exposes a URL that specifies the behaviour of this scalar.",locations:[at.a.SCALAR],args:{url:{type:new Oe(pt),description:"The URL that specifies the behaviour of this scalar."}}}),Ht=Object.freeze([jt,zt,Vt,Gt]);function Wt(e){return Ht.some((function(t){return t.name===e.name}))}function qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yt(e){return Object(A.a)(e,Xt)}function $t(e){if(!Yt(e))throw new Error("Expected ".concat(Object(c.a)(e)," to be a GraphQL schema."));return e}var Xt=function(){function e(e){var t;this.__validationErrors=!0===e.assumeValid?[]:void 0,Object(L.a)(e)||Object(s.a)(0,"Must provide configuration object."),!e.types||Array.isArray(e.types)||Object(s.a)(0,'"types" must be Array if provided but got: '.concat(Object(c.a)(e.types),".")),!e.directives||Array.isArray(e.directives)||Object(s.a)(0,'"directives" must be Array if provided but got: '+"".concat(Object(c.a)(e.directives),".")),this.description=e.description,this.extensions=e.extensions&&E(e.extensions),this.astNode=e.astNode,this.extensionASTNodes=e.extensionASTNodes,this._queryType=e.query,this._mutationType=e.mutation,this._subscriptionType=e.subscription,this._directives=null!==(t=e.directives)&&void 0!==t?t:Ht;var n=new Set(e.types);if(null!=e.types)for(var i=0,r=e.types;i<r.length;i++){var o=r[i];n.delete(o),Qt(o,n)}null!=this._queryType&&Qt(this._queryType,n),null!=this._mutationType&&Qt(this._mutationType,n),null!=this._subscriptionType&&Qt(this._subscriptionType,n);for(var a=0,l=this._directives;a<l.length;a++){var u=l[a];if(Ft(u))for(var h=0,d=u.args;h<d.length;h++){Qt(d[h].type,n)}}Qt(wt,n),this._typeMap=Object.create(null),this._subTypeMap=Object.create(null),this._implementationsMap=Object.create(null);for(var f=0,p=ot(n);f<p.length;f++){var m=p[f];if(null!=m){var v=m.name;if(v||Object(s.a)(0,"One of the provided types for building the Schema is missing a name."),void 0!==this._typeMap[v])throw new Error('Schema must contain uniquely named types but contains multiple types named "'.concat(v,'".'));if(this._typeMap[v]=m,ae(m))for(var g=0,y=m.getInterfaces();g<y.length;g++){var b=y[g];if(ae(b)){var x=this._implementationsMap[b.name];void 0===x&&(x=this._implementationsMap[b.name]={objects:[],interfaces:[]}),x.interfaces.push(m)}}else if(re(m))for(var w=0,_=m.getInterfaces();w<_.length;w++){var S=_[w];if(ae(S)){var M=this._implementationsMap[S.name];void 0===M&&(M=this._implementationsMap[S.name]={objects:[],interfaces:[]}),M.objects.push(m)}}}}}var t,n,i,r=e.prototype;return r.getQueryType=function(){return this._queryType},r.getMutationType=function(){return this._mutationType},r.getSubscriptionType=function(){return this._subscriptionType},r.getTypeMap=function(){return this._typeMap},r.getType=function(e){return this.getTypeMap()[e]},r.getPossibleTypes=function(e){return le(e)?e.getTypes():this.getImplementations(e).objects},r.getImplementations=function(e){var t=this._implementationsMap[e.name];return null!=t?t:{objects:[],interfaces:[]}},r.isPossibleType=function(e,t){return this.isSubType(e,t)},r.isSubType=function(e,t){var n=this._subTypeMap[e.name];if(void 0===n){if(n=Object.create(null),le(e))for(var i=0,r=e.getTypes();i<r.length;i++){n[r[i].name]=!0}else{for(var o=this.getImplementations(e),a=0,s=o.objects;a<s.length;a++){n[s[a].name]=!0}for(var l=0,c=o.interfaces;l<c.length;l++){n[c[l].name]=!0}}this._subTypeMap[e.name]=n}return void 0!==n[t.name]},r.getDirectives=function(){return this._directives},r.getDirective=function(e){return v(this.getDirectives(),(function(t){return t.name===e}))},r.toConfig=function(){var e;return{description:this.description,query:this.getQueryType(),mutation:this.getMutationType(),subscription:this.getSubscriptionType(),types:g(this.getTypeMap()),directives:this.getDirectives().slice(),extensions:this.extensions,astNode:this.astNode,extensionASTNodes:null!==(e=this.extensionASTNodes)&&void 0!==e?e:[],assumeValid:void 0!==this.__validationErrors}},t=e,(n=[{key:S.c,get:function(){return"GraphQLSchema"}}])&&qt(t.prototype,n),i&&qt(t,i),e}();function Qt(e,t){var n=Re(e);if(!t.has(n))if(t.add(n),le(n))for(var i=0,r=n.getTypes();i<r.length;i++){Qt(r[i],t)}else if(re(n)||ae(n)){for(var o=0,a=n.getInterfaces();o<a.length;o++){Qt(a[o],t)}for(var s=0,l=g(n.getFields());s<l.length;s++){var c=l[s];Qt(c.type,t);for(var u=0,h=c.args;u<h.length;u++){Qt(h[u].type,t)}}}else if(de(n))for(var d=0,f=g(n.getFields());d<f.length;d++){Qt(f[d].type,t)}return t}function Kt(e){if($t(e),e.__validationErrors)return e.__validationErrors;var t=new Zt(e);!function(e){var t=e.schema,n=t.getQueryType();if(n){if(!re(n)){var i;e.reportError("Query root type must be Object type, it cannot be ".concat(Object(c.a)(n),"."),null!==(i=en(t,"query"))&&void 0!==i?i:n.astNode)}}else e.reportError("Query root type must be provided.",t.astNode);var r,o=t.getMutationType();o&&!re(o)&&e.reportError("Mutation root type must be Object type if provided, it cannot be "+"".concat(Object(c.a)(o),"."),null!==(r=en(t,"mutation"))&&void 0!==r?r:o.astNode);var a,s=t.getSubscriptionType();s&&!re(s)&&e.reportError("Subscription root type must be Object type if provided, it cannot be "+"".concat(Object(c.a)(s),"."),null!==(a=en(t,"subscription"))&&void 0!==a?a:s.astNode)}(t),function(e){for(var t=0,n=e.schema.getDirectives();t<n.length;t++){var i=n[t];if(Ft(i)){tn(e,i);for(var r=0,o=i.args;r<o.length;r++){var a,s=o[r];if(tn(e,s),ye(s.type)||e.reportError("The type of @".concat(i.name,"(").concat(s.name,":) must be Input Type ")+"but got: ".concat(Object(c.a)(s.type),"."),s.astNode),Ye(s)&&null!=s.deprecationReason)e.reportError("Required argument @".concat(i.name,"(").concat(s.name,":) cannot be deprecated."),[pn(s.astNode),null===(a=s.astNode)||void 0===a?void 0:a.type])}}else e.reportError("Expected directive but got: ".concat(Object(c.a)(i),"."),null==i?void 0:i.astNode)}}(t),function(e){for(var t=function(e){var t=Object.create(null),n=[],i=Object.create(null);return function r(o){if(t[o.name])return;t[o.name]=!0,i[o.name]=n.length;for(var a=g(o.getFields()),s=0;s<a.length;s++){var l=a[s];if(ve(l.type)&&de(l.type.ofType)){var c=l.type.ofType,u=i[c.name];if(n.push(l),void 0===u)r(c);else{var h=n.slice(u),d=h.map((function(e){return e.name})).join(".");e.reportError('Cannot reference Input Object "'.concat(c.name,'" within itself through a series of non-null fields: "').concat(d,'".'),h.map((function(e){return e.astNode})))}n.pop()}}i[o.name]=void 0}}(e),n=e.schema.getTypeMap(),i=0,r=g(n);i<r.length;i++){var o=r[i];Ne(o)?(It(o)||tn(e,o),re(o)||ae(o)?(nn(e,o),rn(e,o)):le(o)?sn(e,o):ue(o)?ln(e,o):de(o)&&(cn(e,o),t(o))):e.reportError("Expected GraphQL named type but got: ".concat(Object(c.a)(o),"."),o.astNode)}}(t);var n=t.getErrors();return e.__validationErrors=n,n}function Jt(e){var t=Kt(e);if(0!==t.length)throw new Error(t.map((function(e){return e.message})).join("\n\n"))}var Zt=function(){function e(e){this._errors=[],this.schema=e}var t=e.prototype;return t.reportError=function(e,t){var n=Array.isArray(t)?t.filter(Boolean):t;this.addError(new l.a(e,n))},t.addError=function(e){this._errors.push(e)},t.getErrors=function(){return this._errors},e}();function en(e,t){for(var n=hn(e,(function(e){return e.operationTypes})),i=0;i<n.length;i++){var r=n[i];if(r.operation===t)return r.type}}function tn(e,t){var n=w(t.name);n&&e.addError(y(n,t.astNode))}function nn(e,t){var n=g(t.getFields());0===n.length&&e.reportError("Type ".concat(t.name," must define one or more fields."),un(t));for(var i=0;i<n.length;i++){var r,o=n[i];if(tn(e,o),!xe(o.type))e.reportError("The type of ".concat(t.name,".").concat(o.name," must be Output Type ")+"but got: ".concat(Object(c.a)(o.type),"."),null===(r=o.astNode)||void 0===r?void 0:r.type);for(var a=0,s=o.args;a<s.length;a++){var l,u,h=s[a],d=h.name;if(tn(e,h),!ye(h.type))e.reportError("The type of ".concat(t.name,".").concat(o.name,"(").concat(d,":) must be Input ")+"Type but got: ".concat(Object(c.a)(h.type),"."),null===(l=h.astNode)||void 0===l?void 0:l.type);if(Ye(h)&&null!=h.deprecationReason)e.reportError("Required argument ".concat(t.name,".").concat(o.name,"(").concat(d,":) cannot be deprecated."),[pn(h.astNode),null===(u=h.astNode)||void 0===u?void 0:u.type])}}}function rn(e,t){for(var n=Object.create(null),i=0,r=t.getInterfaces();i<r.length;i++){var o=r[i];ae(o)?t!==o?n[o.name]?e.reportError("Type ".concat(t.name," can only implement ").concat(o.name," once."),dn(t,o)):(n[o.name]=!0,an(e,t,o),on(e,t,o)):e.reportError("Type ".concat(t.name," cannot implement itself because it would create a circular reference."),dn(t,o)):e.reportError("Type ".concat(Object(c.a)(t)," must only implement Interface types, ")+"it cannot implement ".concat(Object(c.a)(o),"."),dn(t,o))}}function on(e,t,n){for(var i=t.getFields(),r=0,o=g(n.getFields());r<o.length;r++){var a=o[r],s=a.name,l=i[s];if(l){var u,h;if(!it(e.schema,l.type,a.type))e.reportError("Interface field ".concat(n.name,".").concat(s," expects type ")+"".concat(Object(c.a)(a.type)," but ").concat(t.name,".").concat(s," ")+"is type ".concat(Object(c.a)(l.type),"."),[null===(u=a.astNode)||void 0===u?void 0:u.type,null===(h=l.astNode)||void 0===h?void 0:h.type]);for(var d=function(i,r){var o,a,u=r[i],h=u.name,d=v(l.args,(function(e){return e.name===h}));if(!d)return e.reportError("Interface field argument ".concat(n.name,".").concat(s,"(").concat(h,":) expected but ").concat(t.name,".").concat(s," does not provide it."),[u.astNode,l.astNode]),"continue";nt(u.type,d.type)||e.reportError("Interface field argument ".concat(n.name,".").concat(s,"(").concat(h,":) ")+"expects type ".concat(Object(c.a)(u.type)," but ")+"".concat(t.name,".").concat(s,"(").concat(h,":) is type ")+"".concat(Object(c.a)(d.type),"."),[null===(o=u.astNode)||void 0===o?void 0:o.type,null===(a=d.astNode)||void 0===a?void 0:a.type])},f=0,p=a.args;f<p.length;f++)d(f,p);for(var m=function(i,r){var o=r[i],l=o.name;!v(a.args,(function(e){return e.name===l}))&&Ye(o)&&e.reportError("Object field ".concat(t.name,".").concat(s," includes required argument ").concat(l," that is missing from the Interface field ").concat(n.name,".").concat(s,"."),[o.astNode,a.astNode])},y=0,b=l.args;y<b.length;y++)m(y,b)}else e.reportError("Interface field ".concat(n.name,".").concat(s," expected but ").concat(t.name," does not provide it."),[a.astNode].concat(un(t)))}}function an(e,t,n){for(var i=t.getInterfaces(),r=0,o=n.getInterfaces();r<o.length;r++){var a=o[r];-1===i.indexOf(a)&&e.reportError(a===t?"Type ".concat(t.name," cannot implement ").concat(n.name," because it would create a circular reference."):"Type ".concat(t.name," must implement ").concat(a.name," because it is implemented by ").concat(n.name,"."),[].concat(dn(n,a),dn(t,n)))}}function sn(e,t){var n=t.getTypes();0===n.length&&e.reportError("Union type ".concat(t.name," must define one or more member types."),un(t));for(var i=Object.create(null),r=0;r<n.length;r++){var o=n[r];i[o.name]?e.reportError("Union type ".concat(t.name," can only include type ").concat(o.name," once."),fn(t,o.name)):(i[o.name]=!0,re(o)||e.reportError("Union type ".concat(t.name," can only include Object types, ")+"it cannot include ".concat(Object(c.a)(o),"."),fn(t,String(o))))}}function ln(e,t){var n=t.getValues();0===n.length&&e.reportError("Enum type ".concat(t.name," must define one or more values."),un(t));for(var i=0;i<n.length;i++){var r=n[i],o=r.name;tn(e,r),"true"!==o&&"false"!==o&&"null"!==o||e.reportError("Enum type ".concat(t.name," cannot include value: ").concat(o,"."),r.astNode)}}function cn(e,t){var n=g(t.getFields());0===n.length&&e.reportError("Input Object type ".concat(t.name," must define one or more fields."),un(t));for(var i=0;i<n.length;i++){var r,o,a=n[i];if(tn(e,a),!ye(a.type))e.reportError("The type of ".concat(t.name,".").concat(a.name," must be Input Type ")+"but got: ".concat(Object(c.a)(a.type),"."),null===(r=a.astNode)||void 0===r?void 0:r.type);if(tt(a)&&null!=a.deprecationReason)e.reportError("Required input field ".concat(t.name,".").concat(a.name," cannot be deprecated."),[pn(a.astNode),null===(o=a.astNode)||void 0===o?void 0:o.type])}}function un(e){var t=e.astNode,n=e.extensionASTNodes;return t?n?[t].concat(n):[t]:null!=n?n:[]}function hn(e,t){for(var n=[],i=0,r=un(e);i<r.length;i++){var o,a=r[i];n=n.concat(null!==(o=t(a))&&void 0!==o?o:[])}return n}function dn(e,t){return hn(e,(function(e){return e.interfaces})).filter((function(e){return e.name.value===t.name}))}function fn(e,t){return hn(e,(function(e){return e.types})).filter((function(e){return e.name.value===t}))}function pn(e){var t;return null==e||null===(t=e.directives)||void 0===t?void 0:t.find((function(e){return e.name.value===Vt.name}))}function mn(e,t){var n;return t.kind===j.a.LIST_TYPE?(n=mn(e,t.type))&&new Ae(n):t.kind===j.a.NON_NULL_TYPE?(n=mn(e,t.type))&&new Oe(n):t.kind===j.a.NAMED_TYPE?e.getType(t.name.value):void Object(Q.a)(0,"Unexpected type node: "+Object(c.a)(t))}var vn=function(){function e(e,t,n){this._schema=e,this._typeStack=[],this._parentTypeStack=[],this._inputTypeStack=[],this._fieldDefStack=[],this._defaultValueStack=[],this._directive=null,this._argument=null,this._enumValue=null,this._getFieldDef=null!=t?t:gn,n&&(ye(n)&&this._inputTypeStack.push(n),Me(n)&&this._parentTypeStack.push(n),xe(n)&&this._typeStack.push(n))}var t=e.prototype;return t.getType=function(){if(this._typeStack.length>0)return this._typeStack[this._typeStack.length-1]},t.getParentType=function(){if(this._parentTypeStack.length>0)return this._parentTypeStack[this._parentTypeStack.length-1]},t.getInputType=function(){if(this._inputTypeStack.length>0)return this._inputTypeStack[this._inputTypeStack.length-1]},t.getParentInputType=function(){if(this._inputTypeStack.length>1)return this._inputTypeStack[this._inputTypeStack.length-2]},t.getFieldDef=function(){if(this._fieldDefStack.length>0)return this._fieldDefStack[this._fieldDefStack.length-1]},t.getDefaultValue=function(){if(this._defaultValueStack.length>0)return this._defaultValueStack[this._defaultValueStack.length-1]},t.getDirective=function(){return this._directive},t.getArgument=function(){return this._argument},t.getEnumValue=function(){return this._enumValue},t.enter=function(e){var t=this._schema;switch(e.kind){case j.a.SELECTION_SET:var n=Re(this.getType());this._parentTypeStack.push(Me(n)?n:void 0);break;case j.a.FIELD:var i,r,o=this.getParentType();o&&(i=this._getFieldDef(t,o,e))&&(r=i.type),this._fieldDefStack.push(i),this._typeStack.push(xe(r)?r:void 0);break;case j.a.DIRECTIVE:this._directive=t.getDirective(e.name.value);break;case j.a.OPERATION_DEFINITION:var a;switch(e.operation){case"query":a=t.getQueryType();break;case"mutation":a=t.getMutationType();break;case"subscription":a=t.getSubscriptionType()}this._typeStack.push(re(a)?a:void 0);break;case j.a.INLINE_FRAGMENT:case j.a.FRAGMENT_DEFINITION:var s=e.typeCondition,l=s?mn(t,s):Re(this.getType());this._typeStack.push(xe(l)?l:void 0);break;case j.a.VARIABLE_DEFINITION:var c=mn(t,e.type);this._inputTypeStack.push(ye(c)?c:void 0);break;case j.a.ARGUMENT:var u,h,d,f=null!==(u=this.getDirective())&&void 0!==u?u:this.getFieldDef();f&&(h=v(f.args,(function(t){return t.name===e.name.value})))&&(d=h.type),this._argument=h,this._defaultValueStack.push(h?h.defaultValue:void 0),this._inputTypeStack.push(ye(d)?d:void 0);break;case j.a.LIST:var p=Ie(this.getInputType()),m=pe(p)?p.ofType:p;this._defaultValueStack.push(void 0),this._inputTypeStack.push(ye(m)?m:void 0);break;case j.a.OBJECT_FIELD:var g,y,b=Re(this.getInputType());de(b)&&(y=b.getFields()[e.name.value])&&(g=y.type),this._defaultValueStack.push(y?y.defaultValue:void 0),this._inputTypeStack.push(ye(g)?g:void 0);break;case j.a.ENUM:var x,w=Re(this.getInputType());ue(w)&&(x=w.getValue(e.value)),this._enumValue=x}},t.leave=function(e){switch(e.kind){case j.a.SELECTION_SET:this._parentTypeStack.pop();break;case j.a.FIELD:this._fieldDefStack.pop(),this._typeStack.pop();break;case j.a.DIRECTIVE:this._directive=null;break;case j.a.OPERATION_DEFINITION:case j.a.INLINE_FRAGMENT:case j.a.FRAGMENT_DEFINITION:this._typeStack.pop();break;case j.a.VARIABLE_DEFINITION:this._inputTypeStack.pop();break;case j.a.ARGUMENT:this._argument=null,this._defaultValueStack.pop(),this._inputTypeStack.pop();break;case j.a.LIST:case j.a.OBJECT_FIELD:this._defaultValueStack.pop(),this._inputTypeStack.pop();break;case j.a.ENUM:this._enumValue=null}},e}();function gn(e,t,n){var i=n.name.value;return i===Lt.name&&e.getQueryType()===t?Lt:i===kt.name&&e.getQueryType()===t?kt:i===Pt.name&&Me(t)?Pt:re(t)||ae(t)?t.getFields()[i]:void 0}function yn(e,t){return{enter:function(n){e.enter(n);var i=m(t,n.kind,!1);if(i){var r=i.apply(t,arguments);return void 0!==r&&(e.leave(n),Object(u.c)(r)&&e.enter(r)),r}},leave:function(n){var i,r=m(t,n.kind,!0);return r&&(i=r.apply(t,arguments)),e.leave(n),i}}}function bn(e){return xn(e)||Mn(e)||En(e)}function xn(e){return e.kind===j.a.OPERATION_DEFINITION||e.kind===j.a.FRAGMENT_DEFINITION}function wn(e){return e.kind===j.a.FIELD||e.kind===j.a.FRAGMENT_SPREAD||e.kind===j.a.INLINE_FRAGMENT}function _n(e){return e.kind===j.a.VARIABLE||e.kind===j.a.INT||e.kind===j.a.FLOAT||e.kind===j.a.STRING||e.kind===j.a.BOOLEAN||e.kind===j.a.NULL||e.kind===j.a.ENUM||e.kind===j.a.LIST||e.kind===j.a.OBJECT}function Sn(e){return e.kind===j.a.NAMED_TYPE||e.kind===j.a.LIST_TYPE||e.kind===j.a.NON_NULL_TYPE}function Mn(e){return e.kind===j.a.SCHEMA_DEFINITION||Tn(e)||e.kind===j.a.DIRECTIVE_DEFINITION}function Tn(e){return e.kind===j.a.SCALAR_TYPE_DEFINITION||e.kind===j.a.OBJECT_TYPE_DEFINITION||e.kind===j.a.INTERFACE_TYPE_DEFINITION||e.kind===j.a.UNION_TYPE_DEFINITION||e.kind===j.a.ENUM_TYPE_DEFINITION||e.kind===j.a.INPUT_OBJECT_TYPE_DEFINITION}function En(e){return e.kind===j.a.SCHEMA_EXTENSION||Cn(e)}function Cn(e){return e.kind===j.a.SCALAR_TYPE_EXTENSION||e.kind===j.a.OBJECT_TYPE_EXTENSION||e.kind===j.a.INTERFACE_TYPE_EXTENSION||e.kind===j.a.UNION_TYPE_EXTENSION||e.kind===j.a.ENUM_TYPE_EXTENSION||e.kind===j.a.INPUT_OBJECT_TYPE_EXTENSION}function An(e){return{Document:function(t){for(var n=0,i=t.definitions;n<i.length;n++){var r=i[n];if(!xn(r)){var o=r.kind===j.a.SCHEMA_DEFINITION||r.kind===j.a.SCHEMA_EXTENSION?"schema":'"'+r.name.value+'"';e.reportError(new l.a("The ".concat(o," definition is not executable."),r))}}return!1}}}function On(e){var t=Object.create(null);return{OperationDefinition:function(n){var i=n.name;return i&&(t[i.value]?e.reportError(new l.a('There can be only one operation named "'.concat(i.value,'".'),[t[i.value],i])):t[i.value]=i),!1},FragmentDefinition:function(){return!1}}}function Ln(e){var t=0;return{Document:function(e){t=e.definitions.filter((function(e){return e.kind===j.a.OPERATION_DEFINITION})).length},OperationDefinition:function(n){!n.name&&t>1&&e.reportError(new l.a("This anonymous operation must be the only defined operation.",n))}}}function kn(e){return{OperationDefinition:function(t){"subscription"===t.operation&&1!==t.selectionSet.selections.length&&e.reportError(new l.a(t.name?'Subscription "'.concat(t.name.value,'" must select only one top level field.'):"Anonymous Subscription must select only one top level field.",t.selectionSet.selections.slice(1)))}}}function Pn(e){for(var t=e.getSchema(),n=t?t.getTypeMap():Object.create(null),i=Object.create(null),r=0,o=e.getDocument().definitions;r<o.length;r++){var a=o[r];Tn(a)&&(i[a.name.value]=!0)}var s=Object.keys(n).concat(Object.keys(i));return{NamedType:function(t,r,o,a,c){var u,h=t.name.value;if(!n[h]&&!i[h]){var d,f=null!==(d=c[2])&&void 0!==d?d:o,p=null!=f&&(u=f,!Array.isArray(u)&&(Mn(u)||En(u)));if(p&&function(e){return-1!==Dn.indexOf(e)}(h))return;var m=F(h,p?Dn.concat(s):s);e.reportError(new l.a('Unknown type "'.concat(h,'".')+O(m),t))}}}}var Dn=[].concat(gt,Dt).map((function(e){return e.name}));function In(e){return{InlineFragment:function(t){var n=t.typeCondition;if(n){var i=mn(e.getSchema(),n);if(i&&!Me(i)){var r=U(n);e.reportError(new l.a('Fragment cannot condition on non composite type "'.concat(r,'".'),n))}}},FragmentDefinition:function(t){var n=mn(e.getSchema(),t.typeCondition);if(n&&!Me(n)){var i=U(t.typeCondition);e.reportError(new l.a('Fragment "'.concat(t.name.value,'" cannot condition on non composite type "').concat(i,'".'),t.typeCondition))}}}}function Nn(e){return{VariableDefinition:function(t){var n=mn(e.getSchema(),t.type);if(n&&!ye(n)){var i=t.variable.name.value,r=U(t.type);e.reportError(new l.a('Variable "$'.concat(i,'" cannot be non-input type "').concat(r,'".'),t.type))}}}}function Fn(e){return{Field:function(t){var n=e.getType(),i=t.selectionSet;if(n)if(_e(Re(n))){if(i){var r=t.name.value,o=Object(c.a)(n);e.reportError(new l.a('Field "'.concat(r,'" must not have a selection since type "').concat(o,'" has no subfields.'),i))}}else if(!i){var a=t.name.value,s=Object(c.a)(n);e.reportError(new l.a('Field "'.concat(a,'" of type "').concat(s,'" must have a selection of subfields. Did you mean "').concat(a,' { ... }"?'),t))}}}}function Rn(e){return{Field:function(t){var n=e.getParentType();if(n&&!e.getFieldDef()){var i=e.getSchema(),r=t.name.value,o=O("to use an inline fragment on",function(e,t,n){if(!Ee(t))return[];for(var i=new Set,r=Object.create(null),o=0,a=e.getPossibleTypes(t);o<a.length;o++){var s=a[o];if(s.getFields()[n]){i.add(s),r[s.name]=1;for(var l=0,c=s.getInterfaces();l<c.length;l++){var u,h=c[l];h.getFields()[n]&&(i.add(h),r[h.name]=(null!==(u=r[h.name])&&void 0!==u?u:0)+1)}}}return ot(i).sort((function(t,n){var i=r[n.name]-r[t.name];return 0!==i?i:ae(t)&&e.isSubType(t,n)?-1:ae(n)&&e.isSubType(n,t)?1:D(t.name,n.name)})).map((function(e){return e.name}))}(i,n,r));""===o&&(o=O(function(e,t){if(re(e)||ae(e)){var n=Object.keys(e.getFields());return F(t,n)}return[]}(n,r))),e.reportError(new l.a('Cannot query field "'.concat(r,'" on type "').concat(n.name,'".')+o,t))}}}}function Bn(e){var t=Object.create(null);return{OperationDefinition:function(){return!1},FragmentDefinition:function(n){var i=n.name.value;return t[i]?e.reportError(new l.a('There can be only one fragment named "'.concat(i,'".'),[t[i],n.name])):t[i]=n.name,!1}}}function jn(e){return{FragmentSpread:function(t){var n=t.name.value;e.getFragment(n)||e.reportError(new l.a('Unknown fragment "'.concat(n,'".'),t.name))}}}function zn(e){var t=[],n=[];return{OperationDefinition:function(e){return t.push(e),!1},FragmentDefinition:function(e){return n.push(e),!1},Document:{leave:function(){for(var i=Object.create(null),r=0;r<t.length;r++)for(var o=t[r],a=0,s=e.getRecursivelyReferencedFragments(o);a<s.length;a++){i[s[a].name.value]=!0}for(var c=0;c<n.length;c++){var u=n[c],h=u.name.value;!0!==i[h]&&e.reportError(new l.a('Fragment "'.concat(h,'" is never used.'),u))}}}}}function Un(e){return{InlineFragment:function(t){var n=e.getType(),i=e.getParentType();if(Me(n)&&Me(i)&&!rt(e.getSchema(),n,i)){var r=Object(c.a)(i),o=Object(c.a)(n);e.reportError(new l.a('Fragment cannot be spread here as objects of type "'.concat(r,'" can never be of type "').concat(o,'".'),t))}},FragmentSpread:function(t){var n=t.name.value,i=function(e,t){var n=e.getFragment(t);if(n){var i=mn(e.getSchema(),n.typeCondition);if(Me(i))return i}}(e,n),r=e.getParentType();if(i&&r&&!rt(e.getSchema(),i,r)){var o=Object(c.a)(r),a=Object(c.a)(i);e.reportError(new l.a('Fragment "'.concat(n,'" cannot be spread here as objects of type "').concat(o,'" can never be of type "').concat(a,'".'),t))}}}}function Vn(e){var t=Object.create(null),n=[],i=Object.create(null);return{OperationDefinition:function(){return!1},FragmentDefinition:function(r){return function r(o){if(t[o.name.value])return;var a=o.name.value;t[a]=!0;var s=e.getFragmentSpreads(o.selectionSet);if(0===s.length)return;i[a]=n.length;for(var c=0;c<s.length;c++){var u=s[c],h=u.name.value,d=i[h];if(n.push(u),void 0===d){var f=e.getFragment(h);f&&r(f)}else{var p=n.slice(d),m=p.slice(0,-1).map((function(e){return'"'+e.name.value+'"'})).join(", ");e.reportError(new l.a('Cannot spread fragment "'.concat(h,'" within itself')+(""!==m?" via ".concat(m,"."):"."),p))}n.pop()}i[a]=void 0}(r),!1}}}function Gn(e){var t=Object.create(null);return{OperationDefinition:function(){t=Object.create(null)},VariableDefinition:function(n){var i=n.variable.name.value;t[i]?e.reportError(new l.a('There can be only one variable named "$'.concat(i,'".'),[t[i],n.variable.name])):t[i]=n.variable.name}}}function Hn(e){var t=Object.create(null);return{OperationDefinition:{enter:function(){t=Object.create(null)},leave:function(n){for(var i=e.getRecursiveVariableUsages(n),r=0;r<i.length;r++){var o=i[r].node,a=o.name.value;!0!==t[a]&&e.reportError(new l.a(n.name?'Variable "$'.concat(a,'" is not defined by operation "').concat(n.name.value,'".'):'Variable "$'.concat(a,'" is not defined.'),[o,n]))}}},VariableDefinition:function(e){t[e.variable.name.value]=!0}}}function Wn(e){var t=[];return{OperationDefinition:{enter:function(){t=[]},leave:function(n){for(var i=Object.create(null),r=e.getRecursiveVariableUsages(n),o=0;o<r.length;o++){i[r[o].node.name.value]=!0}for(var a=0,s=t;a<s.length;a++){var c=s[a],u=c.variable.name.value;!0!==i[u]&&e.reportError(new l.a(n.name?'Variable "$'.concat(u,'" is never used in operation "').concat(n.name.value,'".'):'Variable "$'.concat(u,'" is never used.'),c))}}},VariableDefinition:function(e){t.push(e)}}}function qn(e){for(var t=Object.create(null),n=e.getSchema(),i=n?n.getDirectives():Ht,r=0;r<i.length;r++){var o=i[r];t[o.name]=o.locations}for(var a=e.getDocument().definitions,s=0;s<a.length;s++){var u=a[s];u.kind===j.a.DIRECTIVE_DEFINITION&&(t[u.name.value]=u.locations.map((function(e){return e.value})))}return{Directive:function(n,i,r,o,a){var s=n.name.value,u=t[s];if(u){var h=function(e){var t=e[e.length-1];switch(!Array.isArray(t)||Object(Q.a)(0),t.kind){case j.a.OPERATION_DEFINITION:return function(e){switch(e){case"query":return at.a.QUERY;case"mutation":return at.a.MUTATION;case"subscription":return at.a.SUBSCRIPTION}Object(Q.a)(0,"Unexpected operation: "+Object(c.a)(e))}(t.operation);case j.a.FIELD:return at.a.FIELD;case j.a.FRAGMENT_SPREAD:return at.a.FRAGMENT_SPREAD;case j.a.INLINE_FRAGMENT:return at.a.INLINE_FRAGMENT;case j.a.FRAGMENT_DEFINITION:return at.a.FRAGMENT_DEFINITION;case j.a.VARIABLE_DEFINITION:return at.a.VARIABLE_DEFINITION;case j.a.SCHEMA_DEFINITION:case j.a.SCHEMA_EXTENSION:return at.a.SCHEMA;case j.a.SCALAR_TYPE_DEFINITION:case j.a.SCALAR_TYPE_EXTENSION:return at.a.SCALAR;case j.a.OBJECT_TYPE_DEFINITION:case j.a.OBJECT_TYPE_EXTENSION:return at.a.OBJECT;case j.a.FIELD_DEFINITION:return at.a.FIELD_DEFINITION;case j.a.INTERFACE_TYPE_DEFINITION:case j.a.INTERFACE_TYPE_EXTENSION:return at.a.INTERFACE;case j.a.UNION_TYPE_DEFINITION:case j.a.UNION_TYPE_EXTENSION:return at.a.UNION;case j.a.ENUM_TYPE_DEFINITION:case j.a.ENUM_TYPE_EXTENSION:return at.a.ENUM;case j.a.ENUM_VALUE_DEFINITION:return at.a.ENUM_VALUE;case j.a.INPUT_OBJECT_TYPE_DEFINITION:case j.a.INPUT_OBJECT_TYPE_EXTENSION:return at.a.INPUT_OBJECT;case j.a.INPUT_VALUE_DEFINITION:return e[e.length-3].kind===j.a.INPUT_OBJECT_TYPE_DEFINITION?at.a.INPUT_FIELD_DEFINITION:at.a.ARGUMENT_DEFINITION}}(a);h&&-1===u.indexOf(h)&&e.reportError(new l.a('Directive "@'.concat(s,'" may not be used on ').concat(h,"."),n))}else e.reportError(new l.a('Unknown directive "@'.concat(s,'".'),n))}}}function Yn(e){for(var t=Object.create(null),n=e.getSchema(),i=n?n.getDirectives():Ht,r=0;r<i.length;r++){var o=i[r];t[o.name]=!o.isRepeatable}for(var a=e.getDocument().definitions,s=0;s<a.length;s++){var c=a[s];c.kind===j.a.DIRECTIVE_DEFINITION&&(t[c.name.value]=!c.repeatable)}var u=Object.create(null),h=Object.create(null);return{enter:function(n){if(null!=n.directives){var i;if(n.kind===j.a.SCHEMA_DEFINITION||n.kind===j.a.SCHEMA_EXTENSION)i=u;else if(Tn(n)||Cn(n)){var r=n.name.value;void 0===(i=h[r])&&(h[r]=i=Object.create(null))}else i=Object.create(null);for(var o=0,a=n.directives;o<a.length;o++){var s=a[o],c=s.name.value;t[c]&&(i[c]?e.reportError(new l.a('The directive "@'.concat(c,'" can only be used once at this location.'),[i[c],s])):i[c]=s)}}}}}function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){Qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kn(e){return Xn(Xn({},Jn(e)),{},{Argument:function(t){var n=e.getArgument(),i=e.getFieldDef(),r=e.getParentType();if(!n&&i&&r){var o=t.name.value,a=F(o,i.args.map((function(e){return e.name})));e.reportError(new l.a('Unknown argument "'.concat(o,'" on field "').concat(r.name,".").concat(i.name,'".')+O(a),t))}}})}function Jn(e){for(var t=Object.create(null),n=e.getSchema(),i=n?n.getDirectives():Ht,r=0;r<i.length;r++){var o=i[r];t[o.name]=o.args.map((function(e){return e.name}))}for(var a=e.getDocument().definitions,s=0;s<a.length;s++){var c=a[s];if(c.kind===j.a.DIRECTIVE_DEFINITION){var u,h=null!==(u=c.arguments)&&void 0!==u?u:[];t[c.name.value]=h.map((function(e){return e.name.value}))}}return{Directive:function(n){var i=n.name.value,r=t[i];if(n.arguments&&r)for(var o=0,a=n.arguments;o<a.length;o++){var s=a[o],c=s.name.value;if(-1===r.indexOf(c)){var u=F(c,r);e.reportError(new l.a('Unknown argument "'.concat(c,'" on directive "@').concat(i,'".')+O(u),s))}}return!1}}}function Zn(e){var t=Object.create(null);return{Field:function(){t=Object.create(null)},Directive:function(){t=Object.create(null)},Argument:function(n){var i=n.name.value;return t[i]?e.reportError(new l.a('There can be only one argument named "'.concat(i,'".'),[t[i],n.name])):t[i]=n.name,!1}}}function ei(e){return{ListValue:function(t){if(!pe(Ie(e.getParentInputType())))return ti(e,t),!1},ObjectValue:function(t){var n=Re(e.getInputType());if(!de(n))return ti(e,t),!1;for(var i=M(t.fields,(function(e){return e.name.value})),r=0,o=g(n.getFields());r<o.length;r++){var a=o[r];if(!i[a.name]&&tt(a)){var s=Object(c.a)(a.type);e.reportError(new l.a('Field "'.concat(n.name,".").concat(a.name,'" of required type "').concat(s,'" was not provided.'),t))}}},ObjectField:function(t){var n=Re(e.getParentInputType());if(!e.getInputType()&&de(n)){var i=F(t.name.value,Object.keys(n.getFields()));e.reportError(new l.a('Field "'.concat(t.name.value,'" is not defined by type "').concat(n.name,'".')+O(i),t))}},NullValue:function(t){var n=e.getInputType();ve(n)&&e.reportError(new l.a('Expected value of type "'.concat(Object(c.a)(n),'", found ').concat(U(t),"."),t))},EnumValue:function(t){return ti(e,t)},IntValue:function(t){return ti(e,t)},FloatValue:function(t){return ti(e,t)},StringValue:function(t){return ti(e,t)},BooleanValue:function(t){return ti(e,t)}}}function ti(e,t){var n=e.getInputType();if(n){var i=Re(n);if(_e(i))try{if(void 0===i.parseLiteral(t,void 0)){var r=Object(c.a)(n);e.reportError(new l.a('Expected value of type "'.concat(r,'", found ').concat(U(t),"."),t))}}catch(i){var o=Object(c.a)(n);i instanceof l.a?e.reportError(i):e.reportError(new l.a('Expected value of type "'.concat(o,'", found ').concat(U(t),"; ")+i.message,t,void 0,void 0,void 0,i))}else{var a=Object(c.a)(n);e.reportError(new l.a('Expected value of type "'.concat(a,'", found ').concat(U(t),"."),t))}}}function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){ri(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oi(e){return ii(ii({},ai(e)),{},{Field:{leave:function(t){var n,i=e.getFieldDef();if(!i)return!1;for(var r=M(null!==(n=t.arguments)&&void 0!==n?n:[],(function(e){return e.name.value})),o=0,a=i.args;o<a.length;o++){var s=a[o];if(!r[s.name]&&Ye(s)){var u=Object(c.a)(s.type);e.reportError(new l.a('Field "'.concat(i.name,'" argument "').concat(s.name,'" of type "').concat(u,'" is required, but it was not provided.'),t))}}}}})}function ai(e){for(var t=Object.create(null),n=e.getSchema(),i=n?n.getDirectives():Ht,r=0;r<i.length;r++){var o=i[r];t[o.name]=M(o.args.filter(Ye),(function(e){return e.name}))}for(var a=e.getDocument().definitions,s=0;s<a.length;s++){var u=a[s];if(u.kind===j.a.DIRECTIVE_DEFINITION){var h,d=null!==(h=u.arguments)&&void 0!==h?h:[];t[u.name.value]=M(d.filter(si),(function(e){return e.name.value}))}}return{Directive:{leave:function(n){var i=n.name.value,r=t[i];if(r)for(var o,a=M(null!==(o=n.arguments)&&void 0!==o?o:[],(function(e){return e.name.value})),s=0,u=Object.keys(r);s<u.length;s++){var h=u[s];if(!a[h]){var d=r[h].type,f=ee(d)?Object(c.a)(d):U(d);e.reportError(new l.a('Directive "@'.concat(i,'" argument "').concat(h,'" of type "').concat(f,'" is required, but it was not provided.'),n))}}}}}}function si(e){return e.type.kind===j.a.NON_NULL_TYPE&&null==e.defaultValue}function li(e){var t=Object.create(null);return{OperationDefinition:{enter:function(){t=Object.create(null)},leave:function(n){for(var i=e.getRecursiveVariableUsages(n),r=0;r<i.length;r++){var o=i[r],a=o.node,s=o.type,u=o.defaultValue,h=a.name.value,d=t[h];if(d&&s){var f=e.getSchema(),p=mn(f,d.type);if(p&&!ci(f,p,d.defaultValue,s,u)){var m=Object(c.a)(p),v=Object(c.a)(s);e.reportError(new l.a('Variable "$'.concat(h,'" of type "').concat(m,'" used in position expecting type "').concat(v,'".'),[d,a]))}}}}},VariableDefinition:function(e){t[e.variable.name.value]=e}}}function ci(e,t,n,i,r){return ve(i)&&!ve(t)?(null!=n&&n.kind!==j.a.NULL||void 0!==r)&&it(e,t,i.ofType):it(e,t,i)}function ui(e){return Array.isArray(e)?e.map((function(e){var t=e[0],n=e[1];return'subfields "'.concat(t,'" conflict because ')+ui(n)})).join(" and "):e}function hi(e){var t=new bi,n=new Map;return{SelectionSet:function(i){for(var r=function(e,t,n,i,r){var o=[],a=vi(e,t,i,r),s=a[0],l=a[1];if(function(e,t,n,i,r){for(var o=0,a=_(r);o<a.length;o++){var s=a[o],l=s[0],c=s[1];if(c.length>1)for(var u=0;u<c.length;u++)for(var h=u+1;h<c.length;h++){var d=mi(e,n,i,!1,l,c[u],c[h]);d&&t.push(d)}}}(e,o,t,n,s),0!==l.length)for(var c=0;c<l.length;c++){di(e,o,t,n,!1,s,l[c]);for(var u=c+1;u<l.length;u++)fi(e,o,t,n,!1,l[c],l[u])}return o}(e,n,t,e.getParentType(),i),o=0;o<r.length;o++){var a=r[o],s=a[0],c=s[0],u=s[1],h=a[1],d=a[2],f=ui(u);e.reportError(new l.a('Fields "'.concat(c,'" conflict because ').concat(f,". Use different aliases on the fields to fetch both if this was intentional."),h.concat(d)))}}}}function di(e,t,n,i,r,o,a){var s=e.getFragment(a);if(s){var l=gi(e,n,s),c=l[0],u=l[1];if(o!==c){pi(e,t,n,i,r,o,c);for(var h=0;h<u.length;h++)di(e,t,n,i,r,o,u[h])}}}function fi(e,t,n,i,r,o,a){if(o!==a&&!i.has(o,a,r)){i.add(o,a,r);var s=e.getFragment(o),l=e.getFragment(a);if(s&&l){var c=gi(e,n,s),u=c[0],h=c[1],d=gi(e,n,l),f=d[0],p=d[1];pi(e,t,n,i,r,u,f);for(var m=0;m<p.length;m++)fi(e,t,n,i,r,o,p[m]);for(var v=0;v<h.length;v++)fi(e,t,n,i,r,h[v],a)}}}function pi(e,t,n,i,r,o,a){for(var s=0,l=Object.keys(o);s<l.length;s++){var c=l[s],u=a[c];if(u)for(var h=o[c],d=0;d<h.length;d++)for(var f=0;f<u.length;f++){var p=mi(e,n,i,r,c,h[d],u[f]);p&&t.push(p)}}}function mi(e,t,n,i,r,o,a){var s=o[0],l=o[1],u=o[2],h=a[0],d=a[1],f=a[2],p=i||s!==h&&re(s)&&re(h);if(!p){var m,g,y=l.name.value,b=d.name.value;if(y!==b)return[[r,'"'.concat(y,'" and "').concat(b,'" are different fields')],[l],[d]];if(!function(e,t){if(e.length!==t.length)return!1;return e.every((function(e){var n,i,r=v(t,(function(t){return t.name.value===e.name.value}));return!!r&&(n=e.value,i=r.value,U(n)===U(i))}))}(null!==(m=l.arguments)&&void 0!==m?m:[],null!==(g=d.arguments)&&void 0!==g?g:[]))return[[r,"they have differing arguments"],[l],[d]]}var x=null==u?void 0:u.type,w=null==f?void 0:f.type;if(x&&w&&function e(t,n){if(pe(t))return!pe(n)||e(t.ofType,n.ofType);if(pe(n))return!0;if(ve(t))return!ve(n)||e(t.ofType,n.ofType);if(ve(n))return!0;if(_e(t)||_e(n))return t!==n;return!1}(x,w))return[[r,'they return conflicting types "'.concat(Object(c.a)(x),'" and "').concat(Object(c.a)(w),'"')],[l],[d]];var _=l.selectionSet,S=d.selectionSet;return _&&S?function(e,t,n,i){if(e.length>0)return[[t,e.map((function(e){return e[0]}))],e.reduce((function(e,t){var n=t[1];return e.concat(n)}),[n]),e.reduce((function(e,t){var n=t[2];return e.concat(n)}),[i])]}(function(e,t,n,i,r,o,a,s){var l=[],c=vi(e,t,r,o),u=c[0],h=c[1],d=vi(e,t,a,s),f=d[0],p=d[1];if(pi(e,l,t,n,i,u,f),0!==p.length)for(var m=0;m<p.length;m++)di(e,l,t,n,i,u,p[m]);if(0!==h.length)for(var v=0;v<h.length;v++)di(e,l,t,n,i,f,h[v]);for(var g=0;g<h.length;g++)for(var y=0;y<p.length;y++)fi(e,l,t,n,i,h[g],p[y]);return l}(e,t,n,p,Re(x),_,Re(w),S),r,l,d):void 0}function vi(e,t,n,i){var r=t.get(i);if(!r){var o=Object.create(null),a=Object.create(null);!function e(t,n,i,r,o){for(var a=0,s=i.selections;a<s.length;a++){var l=s[a];switch(l.kind){case j.a.FIELD:var c=l.name.value,u=void 0;(re(n)||ae(n))&&(u=n.getFields()[c]);var h=l.alias?l.alias.value:c;r[h]||(r[h]=[]),r[h].push([n,l,u]);break;case j.a.FRAGMENT_SPREAD:o[l.name.value]=!0;break;case j.a.INLINE_FRAGMENT:var d=l.typeCondition,f=d?mn(t.getSchema(),d):n;e(t,f,l.selectionSet,r,o)}}}(e,n,i,o,a),r=[o,Object.keys(a)],t.set(i,r)}return r}function gi(e,t,n){var i=t.get(n.selectionSet);if(i)return i;var r=mn(e.getSchema(),n.typeCondition);return vi(e,t,r,n.selectionSet)}var yi,bi=function(){function e(){this._data=Object.create(null)}var t=e.prototype;return t.has=function(e,t,n){var i=this._data[e],r=i&&i[t];return void 0!==r&&(!1!==n||!1===r)},t.add=function(e,t,n){this._pairSetAdd(e,t,n),this._pairSetAdd(t,e,n)},t._pairSetAdd=function(e,t,n){var i=this._data[e];i||(i=Object.create(null),this._data[e]=i),i[t]=n},e}();function xi(e){var t=[],n=Object.create(null);return{ObjectValue:{enter:function(){t.push(n),n=Object.create(null)},leave:function(){n=t.pop()}},ObjectField:function(t){var i=t.name.value;n[i]?e.reportError(new l.a('There can be only one input field named "'.concat(i,'".'),[n[i],t.name])):n[i]=t.name}}}function wi(e){var t,n,i,r=e.getSchema(),o=null!==(t=null!==(n=null!==(i=null==r?void 0:r.astNode)&&void 0!==i?i:null==r?void 0:r.getQueryType())&&void 0!==n?n:null==r?void 0:r.getMutationType())&&void 0!==t?t:null==r?void 0:r.getSubscriptionType(),a=0;return{SchemaDefinition:function(t){o?e.reportError(new l.a("Cannot define a new schema within a schema extension.",t)):(a>0&&e.reportError(new l.a("Must provide only one schema definition.",t)),++a)}}}function _i(e){var t=e.getSchema(),n=Object.create(null),i=t?{query:t.getQueryType(),mutation:t.getMutationType(),subscription:t.getSubscriptionType()}:{};return{SchemaDefinition:r,SchemaExtension:r};function r(t){for(var r,o=null!==(r=t.operationTypes)&&void 0!==r?r:[],a=0;a<o.length;a++){var s=o[a],c=s.operation,u=n[c];i[c]?e.reportError(new l.a("Type for ".concat(c," already defined in the schema. It cannot be redefined."),s)):u?e.reportError(new l.a("There can be only one ".concat(c," type in schema."),[u,s])):n[c]=s}return!1}}function Si(e){var t=Object.create(null),n=e.getSchema();return{ScalarTypeDefinition:i,ObjectTypeDefinition:i,InterfaceTypeDefinition:i,UnionTypeDefinition:i,EnumTypeDefinition:i,InputObjectTypeDefinition:i};function i(i){var r=i.name.value;if(null==n||!n.getType(r))return t[r]?e.reportError(new l.a('There can be only one type named "'.concat(r,'".'),[t[r],i.name])):t[r]=i.name,!1;e.reportError(new l.a('Type "'.concat(r,'" already exists in the schema. It cannot also be defined in this type definition.'),i.name))}}function Mi(e){var t=e.getSchema(),n=t?t.getTypeMap():Object.create(null),i=Object.create(null);return{EnumTypeDefinition:r,EnumTypeExtension:r};function r(t){var r,o=t.name.value;i[o]||(i[o]=Object.create(null));for(var a=null!==(r=t.values)&&void 0!==r?r:[],s=i[o],c=0;c<a.length;c++){var u=a[c],h=u.name.value,d=n[o];ue(d)&&d.getValue(h)?e.reportError(new l.a('Enum value "'.concat(o,".").concat(h,'" already exists in the schema. It cannot also be defined in this type extension.'),u.name)):s[h]?e.reportError(new l.a('Enum value "'.concat(o,".").concat(h,'" can only be defined once.'),[s[h],u.name])):s[h]=u.name}return!1}}function Ti(e){var t=e.getSchema(),n=t?t.getTypeMap():Object.create(null),i=Object.create(null);return{InputObjectTypeDefinition:r,InputObjectTypeExtension:r,InterfaceTypeDefinition:r,InterfaceTypeExtension:r,ObjectTypeDefinition:r,ObjectTypeExtension:r};function r(t){var r,o=t.name.value;i[o]||(i[o]=Object.create(null));for(var a=null!==(r=t.fields)&&void 0!==r?r:[],s=i[o],c=0;c<a.length;c++){var u=a[c],h=u.name.value;Ei(n[o],h)?e.reportError(new l.a('Field "'.concat(o,".").concat(h,'" already exists in the schema. It cannot also be defined in this type extension.'),u.name)):s[h]?e.reportError(new l.a('Field "'.concat(o,".").concat(h,'" can only be defined once.'),[s[h],u.name])):s[h]=u.name}return!1}}function Ei(e,t){return!!(re(e)||ae(e)||de(e))&&null!=e.getFields()[t]}function Ci(e){var t=Object.create(null),n=e.getSchema();return{DirectiveDefinition:function(i){var r=i.name.value;if(null==n||!n.getDirective(r))return t[r]?e.reportError(new l.a('There can be only one directive named "@'.concat(r,'".'),[t[r],i.name])):t[r]=i.name,!1;e.reportError(new l.a('Directive "@'.concat(r,'" already exists in the schema. It cannot be redefined.'),i.name))}}}function Ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oi(e){for(var t=e.getSchema(),n=Object.create(null),i=0,r=e.getDocument().definitions;i<r.length;i++){var o=r[i];Tn(o)&&(n[o.name.value]=o)}return{ScalarTypeExtension:a,ObjectTypeExtension:a,InterfaceTypeExtension:a,UnionTypeExtension:a,EnumTypeExtension:a,InputObjectTypeExtension:a};function a(i){var r,o=i.name.value,a=n[o],s=null==t?void 0:t.getType(o);if(a?r=Li[a.kind]:s&&(r=function(e){if(ne(e))return j.a.SCALAR_TYPE_EXTENSION;if(re(e))return j.a.OBJECT_TYPE_EXTENSION;if(ae(e))return j.a.INTERFACE_TYPE_EXTENSION;if(le(e))return j.a.UNION_TYPE_EXTENSION;if(ue(e))return j.a.ENUM_TYPE_EXTENSION;if(de(e))return j.a.INPUT_OBJECT_TYPE_EXTENSION;Object(Q.a)(0,"Unexpected type: "+Object(c.a)(e))}(s)),r){if(r!==i.kind){var u=function(e){switch(e){case j.a.SCALAR_TYPE_EXTENSION:return"scalar";case j.a.OBJECT_TYPE_EXTENSION:return"object";case j.a.INTERFACE_TYPE_EXTENSION:return"interface";case j.a.UNION_TYPE_EXTENSION:return"union";case j.a.ENUM_TYPE_EXTENSION:return"enum";case j.a.INPUT_OBJECT_TYPE_EXTENSION:return"input object"}Object(Q.a)(0,"Unexpected kind: "+Object(c.a)(e))}(i.kind);e.reportError(new l.a("Cannot extend non-".concat(u,' type "').concat(o,'".'),a?[a,i]:i))}}else{var h=Object.keys(n);t&&(h=h.concat(Object.keys(t.getTypeMap())));var d=F(o,h);e.reportError(new l.a('Cannot extend type "'.concat(o,'" because it is not defined.')+O(d),i.name))}}}var Li=(Ai(yi={},j.a.SCALAR_TYPE_DEFINITION,j.a.SCALAR_TYPE_EXTENSION),Ai(yi,j.a.OBJECT_TYPE_DEFINITION,j.a.OBJECT_TYPE_EXTENSION),Ai(yi,j.a.INTERFACE_TYPE_DEFINITION,j.a.INTERFACE_TYPE_EXTENSION),Ai(yi,j.a.UNION_TYPE_DEFINITION,j.a.UNION_TYPE_EXTENSION),Ai(yi,j.a.ENUM_TYPE_DEFINITION,j.a.ENUM_TYPE_EXTENSION),Ai(yi,j.a.INPUT_OBJECT_TYPE_DEFINITION,j.a.INPUT_OBJECT_TYPE_EXTENSION),yi);var ki=Object.freeze([An,On,Ln,kn,Pn,In,Nn,Fn,Rn,Bn,jn,zn,Un,Vn,Gn,Hn,Wn,qn,Yn,Kn,Zn,ei,oi,li,hi,xi]),Pi=Object.freeze([wi,_i,Si,Mi,Ti,Ci,Pn,qn,Yn,Oi,Jn,Zn,xi,ai]);function Di(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ii=function(){function e(e,t){this._ast=e,this._fragments=void 0,this._fragmentSpreads=new Map,this._recursivelyReferencedFragments=new Map,this._onError=t}var t=e.prototype;return t.reportError=function(e){this._onError(e)},t.getDocument=function(){return this._ast},t.getFragment=function(e){var t=this._fragments;return t||(this._fragments=t=this.getDocument().definitions.reduce((function(e,t){return t.kind===j.a.FRAGMENT_DEFINITION&&(e[t.name.value]=t),e}),Object.create(null))),t[e]},t.getFragmentSpreads=function(e){var t=this._fragmentSpreads.get(e);if(!t){t=[];for(var n=[e];0!==n.length;)for(var i=0,r=n.pop().selections;i<r.length;i++){var o=r[i];o.kind===j.a.FRAGMENT_SPREAD?t.push(o):o.selectionSet&&n.push(o.selectionSet)}this._fragmentSpreads.set(e,t)}return t},t.getRecursivelyReferencedFragments=function(e){var t=this._recursivelyReferencedFragments.get(e);if(!t){t=[];for(var n=Object.create(null),i=[e.selectionSet];0!==i.length;)for(var r=i.pop(),o=0,a=this.getFragmentSpreads(r);o<a.length;o++){var s=a[o].name.value;if(!0!==n[s]){n[s]=!0;var l=this.getFragment(s);l&&(t.push(l),i.push(l.selectionSet))}}this._recursivelyReferencedFragments.set(e,t)}return t},e}(),Ni=function(e){function t(t,n,i){var r;return(r=e.call(this,t,i)||this)._schema=n,r}return Di(t,e),t.prototype.getSchema=function(){return this._schema},t}(Ii),Fi=function(e){function t(t,n,i,r){var o;return(o=e.call(this,n,r)||this)._schema=t,o._typeInfo=i,o._variableUsages=new Map,o._recursiveVariableUsages=new Map,o}Di(t,e);var n=t.prototype;return n.getSchema=function(){return this._schema},n.getVariableUsages=function(e){var t=this._variableUsages.get(e);if(!t){var n=[],i=new vn(this._schema);f(e,yn(i,{VariableDefinition:function(){return!1},Variable:function(e){n.push({node:e,type:i.getInputType(),defaultValue:i.getDefaultValue()})}})),t=n,this._variableUsages.set(e,t)}return t},n.getRecursiveVariableUsages=function(e){var t=this._recursiveVariableUsages.get(e);if(!t){t=this.getVariableUsages(e);for(var n=0,i=this.getRecursivelyReferencedFragments(e);n<i.length;n++){var r=i[n];t=t.concat(this.getVariableUsages(r))}this._recursiveVariableUsages.set(e,t)}return t},n.getType=function(){return this._typeInfo.getType()},n.getParentType=function(){return this._typeInfo.getParentType()},n.getInputType=function(){return this._typeInfo.getInputType()},n.getParentInputType=function(){return this._typeInfo.getParentInputType()},n.getFieldDef=function(){return this._typeInfo.getFieldDef()},n.getDirective=function(){return this._typeInfo.getDirective()},n.getArgument=function(){return this._typeInfo.getArgument()},n.getEnumValue=function(){return this._typeInfo.getEnumValue()},t}(Ii);function Ri(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ki,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vn(e),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{maxErrors:void 0};t||Object(s.a)(0,"Must provide document."),Jt(e);var o=Object.freeze({}),a=[],c=new Fi(e,t,i,(function(e){if(null!=r.maxErrors&&a.length>=r.maxErrors)throw a.push(new l.a("Too many validation errors, error limit reached. Validation aborted.")),o;a.push(e)})),u=p(n.map((function(e){return e(c)})));try{f(t,yn(i,u))}catch(e){if(e!==o)throw e}return a}function Bi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pi,i=[],r=new Ni(e,t,(function(e){i.push(e)})),o=n.map((function(e){return e(r)}));return f(e,p(o)),i}function ji(e,t,n){return{prev:e,key:t,typename:n}}function zi(e){for(var t=[],n=e;n;)t.push(n.key),n=n.prev;return t.reverse()}function Ui(e,t){if("query"===t.operation){var n=e.getQueryType();if(!n)throw new l.a("Schema does not define the required query root type.",t);return n}if("mutation"===t.operation){var i=e.getMutationType();if(!i)throw new l.a("Schema is not configured for mutations.",t);return i}if("subscription"===t.operation){var r=e.getSubscriptionType();if(!r)throw new l.a("Schema is not configured for subscriptions.",t);return r}throw new l.a("Can only have query, mutation and subscription operations.",t)}function Vi(e){return e.map((function(e){return"number"==typeof e?"["+e.toString()+"]":"."+e})).join("")}function Gi(e,t,n){if(e){if(e.kind===j.a.VARIABLE){var i=e.name.value;if(null==n||void 0===n[i])return;var r=n[i];if(null===r&&ve(t))return;return r}if(ve(t)){if(e.kind===j.a.NULL)return;return Gi(e,t.ofType,n)}if(e.kind===j.a.NULL)return null;if(pe(t)){var o=t.ofType;if(e.kind===j.a.LIST){for(var a=[],s=0,l=e.values;s<l.length;s++){var u=l[s];if(Hi(u,n)){if(ve(o))return;a.push(null)}else{var h=Gi(u,o,n);if(void 0===h)return;a.push(h)}}return a}var d=Gi(e,o,n);if(void 0===d)return;return[d]}if(de(t)){if(e.kind!==j.a.OBJECT)return;for(var f=Object.create(null),p=M(e.fields,(function(e){return e.name.value})),m=0,v=g(t.getFields());m<v.length;m++){var y=v[m],b=p[y.name];if(b&&!Hi(b.value,n)){var x=Gi(b.value,y.type,n);if(void 0===x)return;f[y.name]=x}else if(void 0!==y.defaultValue)f[y.name]=y.defaultValue;else if(ve(y.type))return}return f}if(_e(t)){var w;try{w=t.parseLiteral(e,n)}catch(e){return}if(void 0===w)return;return w}Object(Q.a)(0,"Unexpected input type: "+Object(c.a)(t))}}function Hi(e,t){return e.kind===j.a.VARIABLE&&(null==t||void 0===t[e.name.value])}function Wi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qi;return Yi(e,t,n)}function qi(e,t,n){var i="Invalid value "+Object(c.a)(t);throw e.length>0&&(i+=' at "value'.concat(Vi(e),'"')),n.message=i+": "+n.message,n}function Yi(e,t,n,i){if(ve(t))return null!=e?Yi(e,t.ofType,n,i):void n(zi(i),e,new l.a('Expected non-nullable type "'.concat(Object(c.a)(t),'" not to be null.')));if(null==e)return null;if(pe(t)){var r=t.ofType,o=ct(e,(function(e,t){var o=ji(i,t,void 0);return Yi(e,r,n,o)}));return null!=o?o:[Yi(e,r,n,i)]}if(de(t)){if(!Object(L.a)(e))return void n(zi(i),e,new l.a('Expected type "'.concat(t.name,'" to be an object.')));for(var a={},s=t.getFields(),u=0,h=g(s);u<h.length;u++){var d=h[u],f=e[d.name];if(void 0!==f)a[d.name]=Yi(f,d.type,n,ji(i,d.name,t.name));else if(void 0!==d.defaultValue)a[d.name]=d.defaultValue;else if(ve(d.type)){var p=Object(c.a)(d.type);n(zi(i),e,new l.a('Field "'.concat(d.name,'" of required type "').concat(p,'" was not provided.')))}}for(var m=0,v=Object.keys(e);m<v.length;m++){var y=v[m];if(!s[y]){var b=F(y,Object.keys(t.getFields()));n(zi(i),e,new l.a('Field "'.concat(y,'" is not defined by type "').concat(t.name,'".')+O(b)))}}return a}if(_e(t)){var x;try{x=t.parseValue(e)}catch(r){return void(r instanceof l.a?n(zi(i),e,r):n(zi(i),e,new l.a('Expected type "'.concat(t.name,'". ')+r.message,void 0,void 0,void 0,void 0,r)))}return void 0===x&&n(zi(i),e,new l.a('Expected type "'.concat(t.name,'".'))),x}Object(Q.a)(0,"Unexpected input type: "+Object(c.a)(t))}function $i(e,t,n,i){var r=[],o=null==i?void 0:i.maxErrors;try{var a=function(e,t,n,i){for(var r={},o=function(o){var a=t[o],s=a.variable.name.value,u=mn(e,a.type);if(!ye(u)){var h=U(a.type);return i(new l.a('Variable "$'.concat(s,'" expected value of type "').concat(h,'" which cannot be used as an input type.'),a.type)),"continue"}if(!Ki(n,s)){if(a.defaultValue)r[s]=Gi(a.defaultValue,u);else if(ve(u)){var d=Object(c.a)(u);i(new l.a('Variable "$'.concat(s,'" of required type "').concat(d,'" was not provided.'),a))}return"continue"}var f=n[s];if(null===f&&ve(u)){var p=Object(c.a)(u);return i(new l.a('Variable "$'.concat(s,'" of non-null type "').concat(p,'" must not be null.'),a)),"continue"}r[s]=Wi(f,u,(function(e,t,n){var r='Variable "$'.concat(s,'" got invalid value ')+Object(c.a)(t);e.length>0&&(r+=' at "'.concat(s).concat(Vi(e),'"')),i(new l.a(r+"; "+n.message,a,void 0,void 0,void 0,n.originalError))}))},a=0;a<t.length;a++)o(a);return r}(e,t,n,(function(e){if(null!=o&&r.length>=o)throw new l.a("Too many errors processing variables, error limit reached. Execution aborted.");r.push(e)}));if(0===r.length)return{coerced:a}}catch(e){r.push(e)}return{errors:r}}function Xi(e,t,n){for(var i,r={},o=M(null!==(i=t.arguments)&&void 0!==i?i:[],(function(e){return e.name.value})),a=0,s=e.args;a<s.length;a++){var u=s[a],h=u.name,d=u.type,f=o[h];if(f){var p=f.value,m=p.kind===j.a.NULL;if(p.kind===j.a.VARIABLE){var v=p.name.value;if(null==n||!Ki(n,v)){if(void 0!==u.defaultValue)r[h]=u.defaultValue;else if(ve(d))throw new l.a('Argument "'.concat(h,'" of required type "').concat(Object(c.a)(d),'" ')+'was provided the variable "$'.concat(v,'" which was not provided a runtime value.'),p);continue}m=null==n[v]}if(m&&ve(d))throw new l.a('Argument "'.concat(h,'" of non-null type "').concat(Object(c.a)(d),'" ')+"must not be null.",p);var g=Gi(p,d,n);if(void 0===g)throw new l.a('Argument "'.concat(h,'" has invalid value ').concat(U(p),"."),p);r[h]=g}else if(void 0!==u.defaultValue)r[h]=u.defaultValue;else if(ve(d))throw new l.a('Argument "'.concat(h,'" of required type "').concat(Object(c.a)(d),'" ')+"was not provided.",t)}return r}function Qi(e,t,n){var i=t.directives&&v(t.directives,(function(t){return t.name.value===e.name}));if(i)return Xi(e,i,n)}function Ki(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ji(e,t,n,i,r,o,a,s){return er(1===arguments.length?e:{schema:e,document:t,rootValue:n,contextValue:i,variableValues:r,operationName:o,fieldResolver:a,typeResolver:s})}function Zi(e){var t=er(e);if(o(t))throw new Error("GraphQL execution failed to complete synchronously.");return t}function er(e){var t=e.schema,n=e.document,i=e.rootValue,r=e.contextValue,a=e.variableValues,s=e.operationName,l=e.fieldResolver,c=e.typeResolver;tr(t,n,a);var u=nr(t,n,i,r,a,s,l,c);if(Array.isArray(u))return{errors:u};var h=function(e,t,n){var i=Ui(e.schema,t),r=rr(e,i,t.selectionSet,Object.create(null),Object.create(null));try{var a="mutation"===t.operation?function(e,t,n,i,r){return a=Object.keys(r),s=function(a,s){var l=r[s],c=ji(i,s,t.name),u=sr(e,t,n,l,c);return void 0===u?a:o(u)?u.then((function(e){return a[s]=e,a})):(a[s]=u,a)},l=Object.create(null),a.reduce((function(e,t){return o(e)?e.then((function(e){return s(e,t)})):s(e,t)}),l);var a,s,l}(e,i,n,void 0,r):ir(e,i,n,void 0,r);return o(a)?a.then(void 0,(function(t){return e.errors.push(t),Promise.resolve(null)})):a}catch(t){return e.errors.push(t),null}}(u,u.operation,i);return function e(t,n){if(o(n))return n.then((function(n){return e(t,n)}));return 0===t.errors.length?{data:n}:{errors:t.errors,data:n}}(u,h)}function tr(e,t,n){t||Object(s.a)(0,"Must provide document."),Jt(e),null==n||Object(L.a)(n)||Object(s.a)(0,"Variables must be provided as an Object where each property is a variable value. Perhaps look to see if an unparsed JSON string was provided.")}function nr(e,t,n,i,r,o,a,s){for(var c,u,h,d=Object.create(null),f=0,p=t.definitions;f<p.length;f++){var m=p[f];switch(m.kind){case j.a.OPERATION_DEFINITION:if(null==o){if(void 0!==h)return[new l.a("Must provide operation name if query contains multiple operations.")];h=m}else(null===(c=m.name)||void 0===c?void 0:c.value)===o&&(h=m);break;case j.a.FRAGMENT_DEFINITION:d[m.name.value]=m}}if(!h)return null!=o?[new l.a('Unknown operation named "'.concat(o,'".'))]:[new l.a("Must provide an operation.")];var v=$i(e,null!==(u=h.variableDefinitions)&&void 0!==u?u:[],null!=r?r:{},{maxErrors:50});return v.errors?v.errors:{schema:e,fragments:d,rootValue:n,contextValue:i,operation:h,variableValues:v.coerced,fieldResolver:null!=a?a:br,typeResolver:null!=s?s:yr,errors:[]}}function ir(e,t,n,i,r){for(var a,s,l,c=Object.create(null),u=!1,h=0,d=Object.keys(r);h<d.length;h++){var f=d[h],p=sr(e,t,n,r[f],ji(i,f,t.name));void 0!==p&&(c[f]=p,o(p)&&(u=!0))}return u?(a=c,s=Object.keys(a),l=s.map((function(e){return a[e]})),Promise.all(l).then((function(e){return e.reduce((function(e,t,n){return e[s[n]]=t,e}),Object.create(null))}))):c}function rr(e,t,n,i,r){for(var o=0,a=n.selections;o<a.length;o++){var s=a[o];switch(s.kind){case j.a.FIELD:if(!or(e,s))continue;var l=(h=s).alias?h.alias.value:h.name.value;i[l]||(i[l]=[]),i[l].push(s);break;case j.a.INLINE_FRAGMENT:if(!or(e,s)||!ar(e,s,t))continue;rr(e,t,s.selectionSet,i,r);break;case j.a.FRAGMENT_SPREAD:var c=s.name.value;if(r[c]||!or(e,s))continue;r[c]=!0;var u=e.fragments[c];if(!u||!ar(e,u,t))continue;rr(e,t,u.selectionSet,i,r)}}var h;return i}function or(e,t){var n=Qi(zt,t,e.variableValues);if(!0===(null==n?void 0:n.if))return!1;var i=Qi(jt,t,e.variableValues);return!1!==(null==i?void 0:i.if)}function ar(e,t,n){var i=t.typeCondition;if(!i)return!0;var r=mn(e.schema,i);return r===n||!!Ee(r)&&e.schema.isSubType(r,n)}function sr(e,t,n,i,r){var a,s=i[0].name.value,l=xr(e.schema,t,s);if(l){var c=l.type,u=null!==(a=l.resolve)&&void 0!==a?a:e.fieldResolver,h=lr(e,l,i,t,r);try{var d,f=u(n,Xi(l,i[0],e.variableValues),e.contextValue,h);return d=o(f)?f.then((function(t){return ur(e,c,i,h,r,t)})):ur(e,c,i,h,r,f),o(d)?d.then(void 0,(function(t){return cr(y(t,i,zi(r)),c,e)})):d}catch(t){return cr(y(t,i,zi(r)),c,e)}}}function lr(e,t,n,i,r){return{fieldName:t.name,fieldNodes:n,returnType:t.type,parentType:i,path:r,schema:e.schema,fragments:e.fragments,rootValue:e.rootValue,operation:e.operation,variableValues:e.variableValues}}function cr(e,t,n){if(ve(t))throw e;return n.errors.push(e),null}function ur(e,t,n,i,r,a){if(a instanceof Error)throw a;if(ve(t)){var s=ur(e,t.ofType,n,i,r,a);if(null===s)throw new Error("Cannot return null for non-nullable field ".concat(i.parentType.name,".").concat(i.fieldName,"."));return s}return null==a?null:pe(t)?function(e,t,n,i,r,a){var s=t.ofType,c=!1,u=ct(a,(function(t,a){var l=ji(r,a,void 0);try{var u;return u=o(t)?t.then((function(t){return ur(e,s,n,i,l,t)})):ur(e,s,n,i,l,t),o(u)?(c=!0,u.then(void 0,(function(t){return cr(y(t,n,zi(l)),s,e)}))):u}catch(t){return cr(y(t,n,zi(l)),s,e)}}));if(null==u)throw new l.a('Expected Iterable, but did not find one for field "'.concat(i.parentType.name,".").concat(i.fieldName,'".'));return c?Promise.all(u):u}(e,t,n,i,r,a):_e(t)?function(e,t){var n=e.serialize(t);if(void 0===n)throw new Error('Expected a value of type "'.concat(Object(c.a)(e),'" but ')+"received: ".concat(Object(c.a)(t)));return n}(t,a):Ee(t)?function(e,t,n,i,r,a){var s,l=null!==(s=t.resolveType)&&void 0!==s?s:e.typeResolver,c=e.contextValue,u=l(a,c,i,t);if(o(u))return u.then((function(o){return dr(e,hr(o,e,t,n,i,a),n,i,r,a)}));return dr(e,hr(u,e,t,n,i,a),n,i,r,a)}(e,t,n,i,r,a):re(t)?dr(e,t,n,i,r,a):void Object(Q.a)(0,"Cannot complete value of unexpected output type: "+Object(c.a)(t))}function hr(e,t,n,i,r,o){if(null==e)throw new l.a('Abstract type "'.concat(n.name,'" must resolve to an Object type at runtime for field "').concat(r.parentType.name,".").concat(r.fieldName,'". Either the "').concat(n.name,'" type should provide a "resolveType" function or each possible type should provide an "isTypeOf" function.'),i);var a=Ne(e)?e.name:e;if("string"!=typeof a)throw new l.a('Abstract type "'.concat(n.name,'" must resolve to an Object type at runtime for field "').concat(r.parentType.name,".").concat(r.fieldName,'" with ')+"value ".concat(Object(c.a)(o),', received "').concat(Object(c.a)(e),'".'));var s=t.schema.getType(a);if(null==s)throw new l.a('Abstract type "'.concat(n.name,'" was resolve to a type "').concat(a,'" that does not exist inside schema.'),i);if(!re(s))throw new l.a('Abstract type "'.concat(n.name,'" was resolve to a non-object type "').concat(a,'".'),i);if(!t.schema.isSubType(n,s))throw new l.a('Runtime Object type "'.concat(s.name,'" is not a possible type for "').concat(n.name,'".'),i);return s}function dr(e,t,n,i,r,a){if(t.isTypeOf){var s=t.isTypeOf(a,e.contextValue,i);if(o(s))return s.then((function(i){if(!i)throw fr(t,a,n);return pr(e,t,n,r,a)}));if(!s)throw fr(t,a,n)}return pr(e,t,n,r,a)}function fr(e,t,n){return new l.a('Expected value of type "'.concat(e.name,'" but got: ').concat(Object(c.a)(t),"."),n)}function pr(e,t,n,i,r){return ir(e,t,r,i,gr(e,t,n))}var mr,vr,gr=(mr=function(e,t,n){for(var i=Object.create(null),r=Object.create(null),o=0;o<n.length;o++){var a=n[o];a.selectionSet&&(i=rr(e,t,a.selectionSet,i,r))}return i},function(e,t,n){vr||(vr=new WeakMap);var i,r=vr.get(e);if(r){if(i=r.get(t)){var o=i.get(n);if(void 0!==o)return o}}else r=new WeakMap,vr.set(e,r);i||(i=new WeakMap,r.set(t,i));var a=mr(e,t,n);return i.set(n,a),a});var yr=function(e,t,n,i){if(Object(L.a)(e)&&"string"==typeof e.__typename)return e.__typename;for(var r=n.schema.getPossibleTypes(i),a=[],s=0;s<r.length;s++){var l=r[s];if(l.isTypeOf){var c=l.isTypeOf(e,t,n);if(o(c))a[s]=c;else if(c)return l.name}}return a.length?Promise.all(a).then((function(e){for(var t=0;t<e.length;t++)if(e[t])return r[t].name})):void 0},br=function(e,t,n,i){if(Object(L.a)(e)||"function"==typeof e){var r=e[i.fieldName];return"function"==typeof r?e[i.fieldName](t,n,i):r}};function xr(e,t,n){return n===Lt.name&&e.getQueryType()===t?Lt:n===kt.name&&e.getQueryType()===t?kt:n===Pt.name?Pt:t.getFields()[n]}function wr(e,t,n,i,r,o,a,s){var l=arguments;return new Promise((function(c){return c(1===l.length?Sr(e):Sr({schema:e,source:t,rootValue:n,contextValue:i,variableValues:r,operationName:o,fieldResolver:a,typeResolver:s}))}))}function _r(e,t,n,i,r,a,s,l){var c=Sr(1===arguments.length?e:{schema:e,source:t,rootValue:n,contextValue:i,variableValues:r,operationName:a,fieldResolver:s,typeResolver:l});if(o(c))throw new Error("GraphQL execution failed to complete synchronously.");return c}function Sr(e){var t,n=e.schema,i=e.source,r=e.rootValue,o=e.contextValue,s=e.variableValues,l=e.operationName,c=e.fieldResolver,u=e.typeResolver,h=Kt(n);if(h.length>0)return{errors:h};try{t=Object(a.a)(i)}catch(e){return{errors:[e]}}var d=Ri(n,t);return d.length>0?{errors:d}:Ji({schema:n,document:t,rootValue:r,contextValue:o,variableValues:s,operationName:l,fieldResolver:c,typeResolver:u})}var Mr=n(70),Tr=n(85),Er=n(146),Cr=n(71),Ar=n(5);function Or(e){return"function"==typeof(null==e?void 0:e[S.a])}function Lr(e,t,n){var i,r,o,a,s,l,c=e[S.a].call(e);function u(e){return e.done?e:kr(e.value,t).then(Pr,r)}if("function"==typeof c.return&&(i=c.return,r=function(e){var t=function(){return Promise.reject(e)};return i.call(c).then(t,t)}),n){var h=n;o=function(e){return kr(e,h).then(Pr,r)}}return a={next:function(){return c.next().then(u,o)},return:function(){return i?i.call(c).then(u,o):Promise.resolve({value:void 0,done:!0})},throw:function(e){return"function"==typeof c.throw?c.throw(e).then(u,o):Promise.reject(e).catch(r)}},s=S.a,l=function(){return this},s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}function kr(e,t){return new Promise((function(n){return n(t(e))}))}function Pr(e){return{value:e,done:!1}}function Dr(e,t,n,i,r,o,a,s){return Nr(1===arguments.length?e:{schema:e,document:t,rootValue:n,contextValue:i,variableValues:r,operationName:o,fieldResolver:a,subscribeFieldResolver:s})}function Ir(e){if(e instanceof l.a)return{errors:[e]};throw e}function Nr(e){var t=e.schema,n=e.document,i=e.rootValue,r=e.contextValue,o=e.variableValues,a=e.operationName,s=e.fieldResolver,l=e.subscribeFieldResolver,c=Fr(t,n,i,r,o,a,l),u=function(e){return Ji({schema:t,document:n,rootValue:e,contextValue:r,variableValues:o,operationName:a,fieldResolver:s})};return c.then((function(e){return Or(e)?Lr(e,u,Ir):e}))}function Fr(e,t,n,i,r,o,a){return tr(e,t,r),new Promise((function(s){var u=nr(e,t,n,i,r,o,a);s(Array.isArray(u)?{errors:u}:function(e){var t=e.schema,n=e.operation,i=e.variableValues,r=e.rootValue,o=Ui(t,n),a=rr(e,o,n.selectionSet,Object.create(null),Object.create(null)),s=Object.keys(a)[0],u=a[s],h=u[0].name.value,d=xr(t,o,h);if(!d)throw new l.a('The subscription field "'.concat(h,'" is not defined.'),u);var f=ji(void 0,s,o.name),p=lr(e,d,u,o,f);return new Promise((function(t){var n,o=Xi(d,u[0],i),a=e.contextValue;t((null!==(n=d.subscribe)&&void 0!==n?n:e.fieldResolver)(r,o,a,p))})).then((function(e){if(e instanceof Error)throw y(e,u,zi(f));if(!Or(e))throw new Error("Subscription field must return Async Iterable. "+"Received: ".concat(Object(c.a)(e),"."));return e}),(function(e){throw y(e,u,zi(f))}))}(u))})).catch(Ir)}function Rr(e){return{Field:function(t){var n=e.getFieldDef(),i=null==n?void 0:n.deprecationReason;if(n&&null!=i){var r=e.getParentType();null!=r||Object(Q.a)(0),e.reportError(new l.a("The field ".concat(r.name,".").concat(n.name," is deprecated. ").concat(i),t))}},Argument:function(t){var n=e.getArgument(),i=null==n?void 0:n.deprecationReason;if(n&&null!=i){var r=e.getDirective();if(null!=r)e.reportError(new l.a('Directive "@'.concat(r.name,'" argument "').concat(n.name,'" is deprecated. ').concat(i),t));else{var o=e.getParentType(),a=e.getFieldDef();null!=o&&null!=a||Object(Q.a)(0),e.reportError(new l.a('Field "'.concat(o.name,".").concat(a.name,'" argument "').concat(n.name,'" is deprecated. ').concat(i),t))}}},ObjectField:function(t){var n=Re(e.getParentInputType());if(de(n)){var i=n.getFields()[t.name.value],r=null==i?void 0:i.deprecationReason;null!=r&&e.reportError(new l.a("The input field ".concat(n.name,".").concat(i.name," is deprecated. ").concat(r),t))}},EnumValue:function(t){var n=e.getEnumValue(),i=null==n?void 0:n.deprecationReason;if(n&&null!=i){var r=Re(e.getInputType());null!=r||Object(Q.a)(0),e.reportError(new l.a('The enum value "'.concat(r.name,".").concat(n.name,'" is deprecated. ').concat(i),t))}}}}function Br(e){return{Field:function(t){var n=Re(e.getType());n&&It(n)&&e.reportError(new l.a('GraphQL introspection has been disabled, but the requested query contained the field "'.concat(t.name.value,'".'),t))}}}var jr=n(27);function zr(e){var t;e||Object(s.a)(0,"Received null or undefined error.");var n=null!==(t=e.message)&&void 0!==t?t:"An unknown error occurred.",i=e.locations,r=e.path,o=e.extensions;return o?{message:n,locations:i,path:r,extensions:o}:{message:n,locations:i,path:r}}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gr(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({descriptions:!0,specifiedByUrl:!1,directiveIsRepeatable:!1,schemaDescription:!1,inputValueDeprecation:!1},e),n=t.descriptions?"description":"",i=t.specifiedByUrl?"specifiedByUrl":"",r=t.directiveIsRepeatable?"isRepeatable":"",o=t.schemaDescription?n:"";function a(e){return t.inputValueDeprecation?e:""}return"\n    query IntrospectionQuery {\n      __schema {\n        ".concat(o,"\n        queryType { name }\n        mutationType { name }\n        subscriptionType { name }\n        types {\n          ...FullType\n        }\n        directives {\n          name\n          ").concat(n,"\n          ").concat(r,"\n          locations\n          args").concat(a("(includeDeprecated: true)")," {\n            ...InputValue\n          }\n        }\n      }\n    }\n\n    fragment FullType on __Type {\n      kind\n      name\n      ").concat(n,"\n      ").concat(i,"\n      fields(includeDeprecated: true) {\n        name\n        ").concat(n,"\n        args").concat(a("(includeDeprecated: true)")," {\n          ...InputValue\n        }\n        type {\n          ...TypeRef\n        }\n        isDeprecated\n        deprecationReason\n      }\n      inputFields").concat(a("(includeDeprecated: true)")," {\n        ...InputValue\n      }\n      interfaces {\n        ...TypeRef\n      }\n      enumValues(includeDeprecated: true) {\n        name\n        ").concat(n,"\n        isDeprecated\n        deprecationReason\n      }\n      possibleTypes {\n        ...TypeRef\n      }\n    }\n\n    fragment InputValue on __InputValue {\n      name\n      ").concat(n,"\n      type { ...TypeRef }\n      defaultValue\n      ").concat(a("isDeprecated"),"\n      ").concat(a("deprecationReason"),"\n    }\n\n    fragment TypeRef on __Type {\n      kind\n      name\n      ofType {\n        kind\n        name\n        ofType {\n          kind\n          name\n          ofType {\n            kind\n            name\n            ofType {\n              kind\n              name\n              ofType {\n                kind\n                name\n                ofType {\n                  kind\n                  name\n                  ofType {\n                    kind\n                    name\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  ")}function Hr(e,t){for(var n=null,i=0,r=e.definitions;i<r.length;i++){var o,a=r[i];if(a.kind===j.a.OPERATION_DEFINITION)if(null==t){if(n)return null;n=a}else if((null===(o=a.name)||void 0===o?void 0:o.value)===t)return a}return n}function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({specifiedByUrl:!0,directiveIsRepeatable:!0,schemaDescription:!0,inputValueDeprecation:!0},t),i=Zi({schema:e,document:Object(a.a)(Gr(n))});return!i.errors&&i.data||Object(Q.a)(0),i.data}function $r(e,t){Object(L.a)(e)&&Object(L.a)(e.__schema)||Object(s.a)(0,'Invalid or incomplete introspection result. Ensure that you are passing "data" property of introspection response and no "errors" was returned alongside: '.concat(Object(c.a)(e),"."));for(var n=e.__schema,i=C(n.types,(function(e){return e.name}),(function(e){return function(e){if(null!=e&&null!=e.name&&null!=e.kind)switch(e.kind){case At.SCALAR:return new ze({name:(i=e).name,description:i.description,specifiedByUrl:i.specifiedByUrl});case At.OBJECT:return new Ue({name:(n=e).name,description:n.description,interfaces:function(){return b(n)},fields:function(){return x(n)}});case At.INTERFACE:return new $e({name:(t=e).name,description:t.description,interfaces:function(){return b(t)},fields:function(){return x(t)}});case At.UNION:return function(e){if(!e.possibleTypes){var t=Object(c.a)(e);throw new Error("Introspection result missing possibleTypes: ".concat(t,"."))}return new Xe({name:e.name,description:e.description,types:function(){return e.possibleTypes.map(v)}})}(e);case At.ENUM:return function(e){if(!e.enumValues){var t=Object(c.a)(e);throw new Error("Introspection result missing enumValues: ".concat(t,"."))}return new Ke({name:e.name,description:e.description,values:C(e.enumValues,(function(e){return e.name}),(function(e){return{description:e.description,deprecationReason:e.deprecationReason}}))})}(e);case At.INPUT_OBJECT:return function(e){if(!e.inputFields){var t=Object(c.a)(e);throw new Error("Introspection result missing inputFields: ".concat(t,"."))}return new Ze({name:e.name,description:e.description,fields:function(){return _(e.inputFields)}})}(e)}var t;var n;var i;var r=Object(c.a)(e);throw new Error("Invalid or incomplete introspection result. Ensure that a full introspection query is used in order to build a client schema: ".concat(r,"."))}(e)})),r=0,o=[].concat(gt,Dt);r<o.length;r++){var l=o[r];i[l.name]&&(i[l.name]=l)}var u=n.queryType?v(n.queryType):null,h=n.mutationType?v(n.mutationType):null,d=n.subscriptionType?v(n.subscriptionType):null,f=n.directives?n.directives.map((function(e){if(!e.args){var t=Object(c.a)(e);throw new Error("Introspection result missing directive args: ".concat(t,"."))}if(!e.locations){var n=Object(c.a)(e);throw new Error("Introspection result missing directive locations: ".concat(n,"."))}return new Bt({name:e.name,description:e.description,isRepeatable:e.isRepeatable,locations:e.locations.slice(),args:_(e.args)})})):[];return new Xt({description:n.description,query:u,mutation:h,subscription:d,types:g(i),directives:f,assumeValid:null==t?void 0:t.assumeValid});function p(e){if(e.kind===At.LIST){var t=e.ofType;if(!t)throw new Error("Decorated type deeper than introspection query.");return new Ae(p(t))}if(e.kind===At.NON_NULL){var n=e.ofType;if(!n)throw new Error("Decorated type deeper than introspection query.");return new Oe(De(p(n)))}return m(e)}function m(e){var t=e.name;if(!t)throw new Error("Unknown type reference: ".concat(Object(c.a)(e),"."));var n=i[t];if(!n)throw new Error("Invalid or incomplete schema, unknown type: ".concat(t,". Ensure that a full introspection query is used in order to build a client schema."));return n}function v(e){return oe(m(e))}function y(e){return se(m(e))}function b(e){if(null===e.interfaces&&e.kind===At.INTERFACE)return[];if(!e.interfaces){var t=Object(c.a)(e);throw new Error("Introspection result missing interfaces: ".concat(t,"."))}return e.interfaces.map(y)}function x(e){if(!e.fields)throw new Error("Introspection result missing fields: ".concat(Object(c.a)(e),"."));return C(e.fields,(function(e){return e.name}),w)}function w(e){var t=p(e.type);if(!xe(t)){var n=Object(c.a)(t);throw new Error("Introspection must provide output type for fields, but received: ".concat(n,"."))}if(!e.args){var i=Object(c.a)(e);throw new Error("Introspection result missing field args: ".concat(i,"."))}return{description:e.description,deprecationReason:e.deprecationReason,type:t,args:_(e.args)}}function _(e){return C(e,(function(e){return e.name}),S)}function S(e){var t=p(e.type);if(!ye(t)){var n=Object(c.a)(t);throw new Error("Introspection must provide input type for arguments, but received: ".concat(n,"."))}var i=null!=e.defaultValue?Gi(Object(a.c)(e.defaultValue),t):void 0;return{description:e.description,type:t,defaultValue:i,deprecationReason:e.deprecationReason}}}function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e,t,n){$t(e),null!=t&&t.kind===j.a.DOCUMENT||Object(s.a)(0,"Must provide valid Document AST."),!0!==(null==n?void 0:n.assumeValid)&&!0!==(null==n?void 0:n.assumeValidSDL)&&function(e,t){var n=Bi(e,t);if(0!==n.length)throw new Error(n.map((function(e){return e.message})).join("\n\n"))}(t,e);var i=e.toConfig(),r=Zr(i,t,n);return i===r?e:new Xt(r)}function Zr(e,t,n){for(var i,r,o,a,s,l=[],u=Object.create(null),h=[],d=[],f=0,p=t.definitions;f<p.length;f++){var m=p[f];if(m.kind===j.a.SCHEMA_DEFINITION)s=m;else if(m.kind===j.a.SCHEMA_EXTENSION)d.push(m);else if(Tn(m))l.push(m);else if(Cn(m)){var v=m.name.value,y=u[v];u[v]=y?y.concat([m]):[m]}else m.kind===j.a.DIRECTIVE_DEFINITION&&h.push(m)}if(0===Object.keys(u).length&&0===l.length&&0===h.length&&0===d.length&&null==s)return e;for(var b=Object.create(null),x=0,w=e.types;x<w.length;x++){var _=w[x];b[_.name]=k(_)}for(var S=0;S<l.length;S++){var M,E=l[S],C=E.name.value;b[C]=null!==(M=eo[C])&&void 0!==M?M:H(E)}var A=Qr(Qr({query:e.query&&L(e.query),mutation:e.mutation&&L(e.mutation),subscription:e.subscription&&L(e.subscription)},s&&I([s])),I(d));return Qr(Qr({description:null===(i=s)||void 0===i||null===(r=i.description)||void 0===r?void 0:r.value},A),{},{types:g(b),directives:[].concat(e.directives.map((function(e){var t=e.toConfig();return new Bt(Qr(Qr({},t),{},{args:T(t.args,D)}))})),h.map((function(e){var t=e.locations.map((function(e){return e.value}));return new Bt({name:e.name.value,description:io(e,n),locations:t,isRepeatable:e.repeatable,args:B(e.arguments),astNode:e})}))),extensions:void 0,astNode:null!==(o=s)&&void 0!==o?o:e.astNode,extensionASTNodes:e.extensionASTNodes.concat(d),assumeValid:null!==(a=null==n?void 0:n.assumeValid)&&void 0!==a&&a});function O(e){return pe(e)?new Ae(O(e.ofType)):ve(e)?new Oe(O(e.ofType)):L(e)}function L(e){return b[e.name]}function k(e){return It(e)||yt(e)?e:ne(e)?function(e){for(var t,n=e.toConfig(),i=null!==(t=u[n.name])&&void 0!==t?t:[],r=n.specifiedByUrl,o=0;o<i.length;o++){var a,s=i[o];r=null!==(a=no(s))&&void 0!==a?a:r}return new ze(Qr(Qr({},n),{},{specifiedByUrl:r,extensionASTNodes:n.extensionASTNodes.concat(i)}))}(e):re(e)?function(e){var t,n=e.toConfig(),i=null!==(t=u[n.name])&&void 0!==t?t:[];return new Ue(Qr(Qr({},n),{},{interfaces:function(){return[].concat(e.getInterfaces().map(L),V(i))},fields:function(){return Qr(Qr({},T(n.fields,P)),R(i))},extensionASTNodes:n.extensionASTNodes.concat(i)}))}(e):ae(e)?function(e){var t,n=e.toConfig(),i=null!==(t=u[n.name])&&void 0!==t?t:[];return new $e(Qr(Qr({},n),{},{interfaces:function(){return[].concat(e.getInterfaces().map(L),V(i))},fields:function(){return Qr(Qr({},T(n.fields,P)),R(i))},extensionASTNodes:n.extensionASTNodes.concat(i)}))}(e):le(e)?function(e){var t,n=e.toConfig(),i=null!==(t=u[n.name])&&void 0!==t?t:[];return new Xe(Qr(Qr({},n),{},{types:function(){return[].concat(e.getTypes().map(L),G(i))},extensionASTNodes:n.extensionASTNodes.concat(i)}))}(e):ue(e)?function(e){var t,n=e.toConfig(),i=null!==(t=u[e.name])&&void 0!==t?t:[];return new Ke(Qr(Qr({},n),{},{values:Qr(Qr({},n.values),U(i)),extensionASTNodes:n.extensionASTNodes.concat(i)}))}(e):de(e)?function(e){var t,n=e.toConfig(),i=null!==(t=u[n.name])&&void 0!==t?t:[];return new Ze(Qr(Qr({},n),{},{fields:function(){return Qr(Qr({},T(n.fields,(function(e){return Qr(Qr({},e),{},{type:O(e.type)})}))),z(i))},extensionASTNodes:n.extensionASTNodes.concat(i)}))}(e):void Object(Q.a)(0,"Unexpected type: "+Object(c.a)(e))}function P(e){return Qr(Qr({},e),{},{type:O(e.type),args:T(e.args,D)})}function D(e){return Qr(Qr({},e),{},{type:O(e.type)})}function I(e){for(var t={},n=0;n<e.length;n++)for(var i,r=null!==(i=e[n].operationTypes)&&void 0!==i?i:[],o=0;o<r.length;o++){var a=r[o];t[a.operation]=N(a.type)}return t}function N(e){var t,n=e.name.value,i=null!==(t=eo[n])&&void 0!==t?t:b[n];if(void 0===i)throw new Error('Unknown type: "'.concat(n,'".'));return i}function F(e){return e.kind===j.a.LIST_TYPE?new Ae(F(e.type)):e.kind===j.a.NON_NULL_TYPE?new Oe(F(e.type)):N(e)}function R(e){for(var t=Object.create(null),i=0;i<e.length;i++)for(var r,o=null!==(r=e[i].fields)&&void 0!==r?r:[],a=0;a<o.length;a++){var s=o[a];t[s.name.value]={type:F(s.type),description:io(s,n),args:B(s.arguments),deprecationReason:to(s),astNode:s}}return t}function B(e){for(var t=null!=e?e:[],i=Object.create(null),r=0;r<t.length;r++){var o=t[r],a=F(o.type);i[o.name.value]={type:a,description:io(o,n),defaultValue:Gi(o.defaultValue,a),deprecationReason:to(o),astNode:o}}return i}function z(e){for(var t=Object.create(null),i=0;i<e.length;i++)for(var r,o=null!==(r=e[i].fields)&&void 0!==r?r:[],a=0;a<o.length;a++){var s=o[a],l=F(s.type);t[s.name.value]={type:l,description:io(s,n),defaultValue:Gi(s.defaultValue,l),deprecationReason:to(s),astNode:s}}return t}function U(e){for(var t=Object.create(null),i=0;i<e.length;i++)for(var r,o=null!==(r=e[i].values)&&void 0!==r?r:[],a=0;a<o.length;a++){var s=o[a];t[s.name.value]={description:io(s,n),deprecationReason:to(s),astNode:s}}return t}function V(e){for(var t=[],n=0;n<e.length;n++)for(var i,r=null!==(i=e[n].interfaces)&&void 0!==i?i:[],o=0;o<r.length;o++){var a=r[o];t.push(N(a))}return t}function G(e){for(var t=[],n=0;n<e.length;n++)for(var i,r=null!==(i=e[n].types)&&void 0!==i?i:[],o=0;o<r.length;o++){var a=r[o];t.push(N(a))}return t}function H(e){var t,i=e.name.value,r=io(e,n),o=null!==(t=u[i])&&void 0!==t?t:[];switch(e.kind){case j.a.OBJECT_TYPE_DEFINITION:var a=o,s=[e].concat(a);return new Ue({name:i,description:r,interfaces:function(){return V(s)},fields:function(){return R(s)},astNode:e,extensionASTNodes:a});case j.a.INTERFACE_TYPE_DEFINITION:var l=o,h=[e].concat(l);return new $e({name:i,description:r,interfaces:function(){return V(h)},fields:function(){return R(h)},astNode:e,extensionASTNodes:l});case j.a.ENUM_TYPE_DEFINITION:var d=o,f=[e].concat(d);return new Ke({name:i,description:r,values:U(f),astNode:e,extensionASTNodes:d});case j.a.UNION_TYPE_DEFINITION:var p=o,m=[e].concat(p);return new Xe({name:i,description:r,types:function(){return G(m)},astNode:e,extensionASTNodes:p});case j.a.SCALAR_TYPE_DEFINITION:var v=o;return new ze({name:i,description:r,specifiedByUrl:no(e),astNode:e,extensionASTNodes:v});case j.a.INPUT_OBJECT_TYPE_DEFINITION:var g=o,y=[e].concat(g);return new Ze({name:i,description:r,fields:function(){return z(y)},astNode:e,extensionASTNodes:g})}Object(Q.a)(0,"Unexpected type definition node: "+Object(c.a)(e))}}var eo=M(gt.concat(Dt),(function(e){return e.name}));function to(e){var t=Qi(Vt,e);return null==t?void 0:t.reason}function no(e){var t=Qi(Gt,e);return null==t?void 0:t.url}function io(e,t){if(e.description)return e.description.value;if(!0===(null==t?void 0:t.commentDescriptions)){var n=function(e){var t=e.loc;if(!t)return;var n=[],i=t.startToken.prev;for(;null!=i&&i.kind===Ar.a.COMMENT&&i.next&&i.prev&&i.line+1===i.next.line&&i.line!==i.prev.line;){var r=String(i.value);n.push(r),i=i.prev}return n.length>0?n.reverse().join("\n"):void 0}(e);if(void 0!==n)return Object(z.a)("\n"+n)}}function ro(e,t){null!=e&&e.kind===j.a.DOCUMENT||Object(s.a)(0,"Must provide valid Document AST."),!0!==(null==t?void 0:t.assumeValid)&&!0!==(null==t?void 0:t.assumeValidSDL)&&function(e){var t=Bi(e);if(0!==t.length)throw new Error(t.map((function(e){return e.message})).join("\n\n"))}(e);var n=Zr({description:void 0,types:[],directives:[],extensions:void 0,extensionASTNodes:[],assumeValid:!1},e,t);if(null==n.astNode)for(var i=0,r=n.types;i<r.length;i++){var o=r[i];switch(o.name){case"Query":n.query=o;break;case"Mutation":n.mutation=o;break;case"Subscription":n.subscription=o}}for(var a=n.directives,l=function(e){var t=Ht[e];a.every((function(e){return e.name!==t.name}))&&a.push(t)},c=0;c<Ht.length;c++)l(c);return new Xt(n)}function oo(e,t){return ro(Object(a.a)(e,{noLocation:null==t?void 0:t.noLocation,allowLegacySDLEmptyFields:null==t?void 0:t.allowLegacySDLEmptyFields,allowLegacySDLImplementsInterfaces:null==t?void 0:t.allowLegacySDLImplementsInterfaces,experimentalFragmentVariables:null==t?void 0:t.experimentalFragmentVariables}),{commentDescriptions:null==t?void 0:t.commentDescriptions,assumeValidSDL:null==t?void 0:t.assumeValidSDL,assumeValid:null==t?void 0:t.assumeValid})}function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e){var t=e.toConfig(),n=C(ho(t.types),(function(e){return e.name}),(function(e){if(ne(e)||It(e))return e;if(re(e)){var t=e.toConfig();return new Ue(so(so({},t),{},{interfaces:function(){return l(t.interfaces)},fields:function(){return s(t.fields)}}))}if(ae(e)){var n=e.toConfig();return new $e(so(so({},n),{},{interfaces:function(){return l(n.interfaces)},fields:function(){return s(n.fields)}}))}if(le(e)){var r=e.toConfig();return new Xe(so(so({},r),{},{types:function(){return l(r.types)}}))}if(ue(e)){var o=e.toConfig();return new Ke(so(so({},o),{},{values:uo(o.values)}))}if(de(e)){var a=e.toConfig();return new Ze(so(so({},a),{},{fields:function(){return uo(a.fields,(function(e){return so(so({},e),{},{type:i(e.type)})}))}}))}Object(Q.a)(0,"Unexpected type: "+Object(c.a)(e))}));return new Xt(so(so({},t),{},{types:g(n),directives:ho(t.directives).map((function(e){var t=e.toConfig();return new Bt(so(so({},t),{},{locations:fo(t.locations,(function(e){return e})),args:a(t.args)}))})),query:o(t.query),mutation:o(t.mutation),subscription:o(t.subscription)}));function i(e){return pe(e)?new Ae(i(e.ofType)):ve(e)?new Oe(i(e.ofType)):r(e)}function r(e){return n[e.name]}function o(e){return e&&r(e)}function a(e){return uo(e,(function(e){return so(so({},e),{},{type:i(e.type)})}))}function s(e){return uo(e,(function(e){return so(so({},e),{},{type:i(e.type),args:a(e.args)})}))}function l(e){return ho(e).map(r)}}function uo(e,t){for(var n=Object.create(null),i=fo(Object.keys(e),(function(e){return e})),r=0;r<i.length;r++){var o=i[r],a=e[o];n[o]=t?t(a):a}return n}function ho(e){return fo(e,(function(e){return e.name}))}function fo(e,t){return e.slice().sort((function(e,n){return D(t(e),t(n))}))}function po(e,t){return go(e,(function(e){return!Wt(e)}),vo,t)}function mo(e,t){return go(e,Wt,It,t)}function vo(e){return!yt(e)&&!It(e)}function go(e,t,n,i){var r=e.getDirectives().filter(t),o=g(e.getTypeMap()).filter(n);return[yo(e)].concat(r.map((function(e){return function(e,t){return Eo(t,e)+"directive @"+e.name+So(t,e.args)+(e.isRepeatable?" repeatable":"")+" on "+e.locations.join(" | ")}(e,i)})),o.map((function(e){return bo(e,i)}))).filter(Boolean).join("\n\n")+"\n"}function yo(e){if(null!=e.description||!function(e){var t=e.getQueryType();if(t&&"Query"!==t.name)return!1;var n=e.getMutationType();if(n&&"Mutation"!==n.name)return!1;var i=e.getSubscriptionType();if(i&&"Subscription"!==i.name)return!1;return!0}(e)){var t=[],n=e.getQueryType();n&&t.push("  query: ".concat(n.name));var i=e.getMutationType();i&&t.push("  mutation: ".concat(i.name));var r=e.getSubscriptionType();return r&&t.push("  subscription: ".concat(r.name)),Eo({},e)+"schema {\n".concat(t.join("\n"),"\n}")}}function bo(e,t){return ne(e)?function(e,t){return Eo(t,e)+"scalar ".concat(e.name)+function(e){if(null==e.specifiedByUrl)return"";var t=bt(e.specifiedByUrl,pt);return t||Object(Q.a)(0,"Unexpected null value returned from `astFromValue` for specifiedByUrl")," @specifiedBy(url: "+U(t)+")"}(e)}(e,t):re(e)?function(e,t){return Eo(t,e)+"type ".concat(e.name)+xo(e)+wo(t,e)}(e,t):ae(e)?function(e,t){return Eo(t,e)+"interface ".concat(e.name)+xo(e)+wo(t,e)}(e,t):le(e)?function(e,t){var n=e.getTypes(),i=n.length?" = "+n.join(" | "):"";return Eo(t,e)+"union "+e.name+i}(e,t):ue(e)?function(e,t){var n=e.getValues().map((function(e,n){return Eo(t,e,"  ",!n)+"  "+e.name+To(e.deprecationReason)}));return Eo(t,e)+"enum ".concat(e.name)+_o(n)}(e,t):de(e)?function(e,t){var n=g(e.getFields()).map((function(e,n){return Eo(t,e,"  ",!n)+"  "+Mo(e)}));return Eo(t,e)+"input ".concat(e.name)+_o(n)}(e,t):void Object(Q.a)(0,"Unexpected type: "+Object(c.a)(e))}function xo(e){var t=e.getInterfaces();return t.length?" implements "+t.map((function(e){return e.name})).join(" & "):""}function wo(e,t){return _o(g(t.getFields()).map((function(t,n){return Eo(e,t,"  ",!n)+"  "+t.name+So(e,t.args,"  ")+": "+String(t.type)+To(t.deprecationReason)})))}function _o(e){return 0!==e.length?" {\n"+e.join("\n")+"\n}":""}function So(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0===t.length?"":t.every((function(e){return!e.description}))?"("+t.map(Mo).join(", ")+")":"(\n"+t.map((function(t,i){return Eo(e,t,"  "+n,!i)+"  "+n+Mo(t)})).join("\n")+"\n"+n+")"}function Mo(e){var t=bt(e.defaultValue,e.type),n=e.name+": "+String(e.type);return t&&(n+=" = ".concat(U(t))),n+To(e.deprecationReason)}function To(e){if(null==e)return"";var t=bt(e,pt);return t&&e!==Ut?" @deprecated(reason: "+U(t)+")":" @deprecated"}function Eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=t.description;if(null==r)return"";if(!0===(null==e?void 0:e.commentDescriptions))return Co(r,n,i);var o=r.length>70,a=Object(z.c)(r,"",o),s=n&&!i?"\n"+n:n;return s+a.replace(/\n/g,"\n"+n)+"\n"}function Co(e,t,n){return(t&&!n?"\n":"")+e.split("\n").map((function(e){return t+(""!==e?"# "+e:"#")})).join("\n")+"\n"}function Ao(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t=t.concat(i.definitions)}return{kind:"Document",definitions:t}}function Oo(e){for(var t=[],n=Object.create(null),i=0,r=e.definitions;i<r.length;i++){var o=r[i];switch(o.kind){case j.a.OPERATION_DEFINITION:t.push(o);break;case j.a.FRAGMENT_DEFINITION:n[o.name.value]=ko(o.selectionSet)}}for(var a=Object.create(null),s=function(i){for(var r=t[i],o=new Set,s=0,l=ko(r.selectionSet);s<l.length;s++){var c=l[s];Lo(o,n,c)}var u=r.name?r.name.value:"";a[u]={kind:j.a.DOCUMENT,definitions:e.definitions.filter((function(e){return e===r||e.kind===j.a.FRAGMENT_DEFINITION&&o.has(e.name.value)}))}},l=0;l<t.length;l++)s(l);return a}function Lo(e,t,n){if(!e.has(n)){e.add(n);var i=t[n];if(void 0!==i)for(var r=0;r<i.length;r++){Lo(e,t,i[r])}}}function ko(e){var t=[];return f(e,{FragmentSpread:function(e){t.push(e.name.value)}}),t}function Po(e){for(var t=Object(Mr.b)(e)?e:new Mr.a(e),n=t.body,i=new Cr.a(t),r="",o=!1;i.advance().kind!==Ar.a.EOF;){var a=i.token,s=a.kind,l=!Object(Cr.b)(a.kind);o&&(l||a.kind===Ar.a.SPREAD)&&(r+=" ");var c=n.slice(a.start,a.end);s===Ar.a.BLOCK_STRING?r+=Do(c):r+=c,o=l}return r}function Do(e){var t=e.slice(3,-3),n=Object(z.a)(t);Object(z.b)(n)>0&&(n="\n"+n);var i=n[n.length-1];return('"'===i&&'\\"""'!==n.slice(-4)||"\\"===i)&&(n+="\n"),'"""'+n+'"""'}function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){Fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ro=Object.freeze({TYPE_REMOVED:"TYPE_REMOVED",TYPE_CHANGED_KIND:"TYPE_CHANGED_KIND",TYPE_REMOVED_FROM_UNION:"TYPE_REMOVED_FROM_UNION",VALUE_REMOVED_FROM_ENUM:"VALUE_REMOVED_FROM_ENUM",REQUIRED_INPUT_FIELD_ADDED:"REQUIRED_INPUT_FIELD_ADDED",IMPLEMENTED_INTERFACE_REMOVED:"IMPLEMENTED_INTERFACE_REMOVED",FIELD_REMOVED:"FIELD_REMOVED",FIELD_CHANGED_KIND:"FIELD_CHANGED_KIND",REQUIRED_ARG_ADDED:"REQUIRED_ARG_ADDED",ARG_REMOVED:"ARG_REMOVED",ARG_CHANGED_KIND:"ARG_CHANGED_KIND",DIRECTIVE_REMOVED:"DIRECTIVE_REMOVED",DIRECTIVE_ARG_REMOVED:"DIRECTIVE_ARG_REMOVED",REQUIRED_DIRECTIVE_ARG_ADDED:"REQUIRED_DIRECTIVE_ARG_ADDED",DIRECTIVE_REPEATABLE_REMOVED:"DIRECTIVE_REPEATABLE_REMOVED",DIRECTIVE_LOCATION_REMOVED:"DIRECTIVE_LOCATION_REMOVED"}),Bo=Object.freeze({VALUE_ADDED_TO_ENUM:"VALUE_ADDED_TO_ENUM",TYPE_ADDED_TO_UNION:"TYPE_ADDED_TO_UNION",OPTIONAL_INPUT_FIELD_ADDED:"OPTIONAL_INPUT_FIELD_ADDED",OPTIONAL_ARG_ADDED:"OPTIONAL_ARG_ADDED",IMPLEMENTED_INTERFACE_ADDED:"IMPLEMENTED_INTERFACE_ADDED",ARG_DEFAULT_VALUE_CHANGE:"ARG_DEFAULT_VALUE_CHANGE"});function jo(e,t){return Uo(e,t).filter((function(e){return e.type in Ro}))}function zo(e,t){return Uo(e,t).filter((function(e){return e.type in Bo}))}function Uo(e,t){return[].concat(function(e,t){for(var n=[],i=Jo(g(e.getTypeMap()),g(t.getTypeMap())),r=0,o=i.removed;r<o.length;r++){var a=o[r];n.push({type:Ro.TYPE_REMOVED,description:yt(a)?"Standard scalar ".concat(a.name," was removed because it is not referenced anymore."):"".concat(a.name," was removed.")})}for(var s=0,l=i.persisted;s<l.length;s++){var c=l[s],u=c[0],h=c[1];ue(u)&&ue(h)?n.push.apply(n,Ho(u,h)):le(u)&&le(h)?n.push.apply(n,Go(u,h)):de(u)&&de(h)?n.push.apply(n,Vo(u,h)):re(u)&&re(h)||ae(u)&&ae(h)?n.push.apply(n,qo(u,h).concat(Wo(u,h))):u.constructor!==h.constructor&&n.push({type:Ro.TYPE_CHANGED_KIND,description:"".concat(u.name," changed from ")+"".concat(Qo(u)," to ").concat(Qo(h),".")})}return n}(e,t),function(e,t){for(var n=[],i=Jo(e.getDirectives(),t.getDirectives()),r=0,o=i.removed;r<o.length;r++){var a=o[r];n.push({type:Ro.DIRECTIVE_REMOVED,description:"".concat(a.name," was removed.")})}for(var s=0,l=i.persisted;s<l.length;s++){for(var c=l[s],u=c[0],h=c[1],d=Jo(u.args,h.args),f=0,p=d.added;f<p.length;f++){var m=p[f];Ye(m)&&n.push({type:Ro.REQUIRED_DIRECTIVE_ARG_ADDED,description:"A required arg ".concat(m.name," on directive ").concat(u.name," was added.")})}for(var v=0,g=d.removed;v<g.length;v++){var y=g[v];n.push({type:Ro.DIRECTIVE_ARG_REMOVED,description:"".concat(y.name," was removed from ").concat(u.name,".")})}u.isRepeatable&&!h.isRepeatable&&n.push({type:Ro.DIRECTIVE_REPEATABLE_REMOVED,description:"Repeatable flag was removed from ".concat(u.name,".")});for(var b=0,x=u.locations;b<x.length;b++){var w=x[b];-1===h.locations.indexOf(w)&&n.push({type:Ro.DIRECTIVE_LOCATION_REMOVED,description:"".concat(w," was removed from ").concat(u.name,".")})}}return n}(e,t))}function Vo(e,t){for(var n=[],i=Jo(g(e.getFields()),g(t.getFields())),r=0,o=i.added;r<o.length;r++){var a=o[r];tt(a)?n.push({type:Ro.REQUIRED_INPUT_FIELD_ADDED,description:"A required field ".concat(a.name," on input type ").concat(e.name," was added.")}):n.push({type:Bo.OPTIONAL_INPUT_FIELD_ADDED,description:"An optional field ".concat(a.name," on input type ").concat(e.name," was added.")})}for(var s=0,l=i.removed;s<l.length;s++){var c=l[s];n.push({type:Ro.FIELD_REMOVED,description:"".concat(e.name,".").concat(c.name," was removed.")})}for(var u=0,h=i.persisted;u<h.length;u++){var d=h[u],f=d[0],p=d[1];Xo(f.type,p.type)||n.push({type:Ro.FIELD_CHANGED_KIND,description:"".concat(e.name,".").concat(f.name," changed type from ")+"".concat(String(f.type)," to ").concat(String(p.type),".")})}return n}function Go(e,t){for(var n=[],i=Jo(e.getTypes(),t.getTypes()),r=0,o=i.added;r<o.length;r++){var a=o[r];n.push({type:Bo.TYPE_ADDED_TO_UNION,description:"".concat(a.name," was added to union type ").concat(e.name,".")})}for(var s=0,l=i.removed;s<l.length;s++){var c=l[s];n.push({type:Ro.TYPE_REMOVED_FROM_UNION,description:"".concat(c.name," was removed from union type ").concat(e.name,".")})}return n}function Ho(e,t){for(var n=[],i=Jo(e.getValues(),t.getValues()),r=0,o=i.added;r<o.length;r++){var a=o[r];n.push({type:Bo.VALUE_ADDED_TO_ENUM,description:"".concat(a.name," was added to enum type ").concat(e.name,".")})}for(var s=0,l=i.removed;s<l.length;s++){var c=l[s];n.push({type:Ro.VALUE_REMOVED_FROM_ENUM,description:"".concat(c.name," was removed from enum type ").concat(e.name,".")})}return n}function Wo(e,t){for(var n=[],i=Jo(e.getInterfaces(),t.getInterfaces()),r=0,o=i.added;r<o.length;r++){var a=o[r];n.push({type:Bo.IMPLEMENTED_INTERFACE_ADDED,description:"".concat(a.name," added to interfaces implemented by ").concat(e.name,".")})}for(var s=0,l=i.removed;s<l.length;s++){var c=l[s];n.push({type:Ro.IMPLEMENTED_INTERFACE_REMOVED,description:"".concat(e.name," no longer implements interface ").concat(c.name,".")})}return n}function qo(e,t){for(var n=[],i=Jo(g(e.getFields()),g(t.getFields())),r=0,o=i.removed;r<o.length;r++){var a=o[r];n.push({type:Ro.FIELD_REMOVED,description:"".concat(e.name,".").concat(a.name," was removed.")})}for(var s=0,l=i.persisted;s<l.length;s++){var c=l[s],u=c[0],h=c[1];n.push.apply(n,Yo(e,u,h)),$o(u.type,h.type)||n.push({type:Ro.FIELD_CHANGED_KIND,description:"".concat(e.name,".").concat(u.name," changed type from ")+"".concat(String(u.type)," to ").concat(String(h.type),".")})}return n}function Yo(e,t,n){for(var i=[],r=Jo(t.args,n.args),o=0,a=r.removed;o<a.length;o++){var s=a[o];i.push({type:Ro.ARG_REMOVED,description:"".concat(e.name,".").concat(t.name," arg ").concat(s.name," was removed.")})}for(var l=0,c=r.persisted;l<c.length;l++){var u=c[l],h=u[0],d=u[1];if(Xo(h.type,d.type)){if(void 0!==h.defaultValue)if(void 0===d.defaultValue)i.push({type:Bo.ARG_DEFAULT_VALUE_CHANGE,description:"".concat(e.name,".").concat(t.name," arg ").concat(h.name," defaultValue was removed.")});else{var f=Ko(h.defaultValue,h.type),p=Ko(d.defaultValue,d.type);f!==p&&i.push({type:Bo.ARG_DEFAULT_VALUE_CHANGE,description:"".concat(e.name,".").concat(t.name," arg ").concat(h.name," has changed defaultValue from ").concat(f," to ").concat(p,".")})}}else i.push({type:Ro.ARG_CHANGED_KIND,description:"".concat(e.name,".").concat(t.name," arg ").concat(h.name," has changed type from ")+"".concat(String(h.type)," to ").concat(String(d.type),".")})}for(var m=0,v=r.added;m<v.length;m++){var g=v[m];Ye(g)?i.push({type:Ro.REQUIRED_ARG_ADDED,description:"A required arg ".concat(g.name," on ").concat(e.name,".").concat(t.name," was added.")}):i.push({type:Bo.OPTIONAL_ARG_ADDED,description:"An optional arg ".concat(g.name," on ").concat(e.name,".").concat(t.name," was added.")})}return i}function $o(e,t){return pe(e)?pe(t)&&$o(e.ofType,t.ofType)||ve(t)&&$o(e,t.ofType):ve(e)?ve(t)&&$o(e.ofType,t.ofType):Ne(t)&&e.name===t.name||ve(t)&&$o(e,t.ofType)}function Xo(e,t){return pe(e)?pe(t)&&Xo(e.ofType,t.ofType):ve(e)?ve(t)&&Xo(e.ofType,t.ofType)||!ve(t)&&Xo(e.ofType,t):Ne(t)&&e.name===t.name}function Qo(e){return ne(e)?"a Scalar type":re(e)?"an Object type":ae(e)?"an Interface type":le(e)?"a Union type":ue(e)?"an Enum type":de(e)?"an Input type":void Object(Q.a)(0,"Unexpected type: "+Object(c.a)(e))}function Ko(e,t){var n=bt(e,t);return null!=n||Object(Q.a)(0),U(f(n,{ObjectValue:function(e){var t=[].concat(e.fields);return t.sort((function(e,t){return D(e.name.value,t.name.value)})),No(No({},e),{},{fields:t})}}))}function Jo(e,t){for(var n=[],i=[],r=[],o=M(e,(function(e){return e.name})),a=M(t,(function(e){return e.name})),s=0;s<e.length;s++){var l=e[s],c=a[l.name];void 0===c?i.push(l):r.push([l,c])}for(var u=0;u<t.length;u++){var h=t[u];void 0===o[h.name]&&n.push(h)}return{added:n,persisted:r,removed:i}}function Zo(e,t){return Ri(e,t,[Rr])}},function(e,t,n){"use strict";n.r(t),n.d(t,"gql",(function(){return d})),n.d(t,"resetCaches",(function(){return f})),n.d(t,"disableFragmentWarnings",(function(){return p})),n.d(t,"enableExperimentalFragmentVariables",(function(){return m})),n.d(t,"disableExperimentalFragmentVariables",(function(){return v}));var i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.create;Object.create;var r=n(55),o=new Map,a=new Map,s=!0,l=!1;function c(e){return e.replace(/[\s,]+/g," ").trim()}function u(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var i=e.name.value,r=c((l=e.loc).source.body.substring(l.start,l.end)),o=a.get(i);o&&!o.has(r)?s&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):o||a.set(i,o=new Set),o.add(r),t.has(r)||(t.add(r),n.push(e))}else n.push(e);var l})),i(i({},e),{definitions:n})}function h(e){var t=c(e);if(!o.has(t)){var n=Object(r.a)(e,{experimentalFragmentVariables:l});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");o.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var i=e[n];i&&"object"==typeof i&&t.add(i)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}(u(n)))}return o.get(t)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var i=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?i+=t.loc.source.body:i+=t,i+=e[n+1]})),h(i)}function f(){o.clear(),a.clear()}function p(){s=!1}function m(){l=!0}function v(){l=!1}var g,y={gql:d,resetCaches:f,disableFragmentWarnings:p,enableExperimentalFragmentVariables:m,disableExperimentalFragmentVariables:v};(g=d||(d={})).gql=y.gql,g.resetCaches=y.resetCaches,g.disableFragmentWarnings=y.disableFragmentWarnings,g.enableExperimentalFragmentVariables=y.enableExperimentalFragmentVariables,g.disableExperimentalFragmentVariables=y.disableExperimentalFragmentVariables,d.default=d;t.default=d},function(e,t,n){"use strict";function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return i}))},function(e,t,n){e.exports=n(381).Observable},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,i="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(n=t.cmp,function(e){return function(t,i){var r={key:t,value:e[t]},o={key:i,value:e[i]};return n(r,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(a="",n=0;n<l.length;n++){var c=l[n],u=e(t[c]);u&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u)}return o.splice(s,1),"{"+a+"}"}}(e)}},function(e,t,n){"use strict";n.r(t);var i=n(98),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(148),s=n(30);var l=function(e){n(233),n(234)},c=Object(s.a)(r.a,a.a,a.b,!1,l,null,null);c.options.__file="MapView.vue",t.default=c.exports},function(e,t,n){var i=n(63),r=n(166),o=n(167),a=n(43),s=n(109),l=n(121),c={},u={};(t=e.exports=function(e,t,n,h,d){var f,p,m,v,g=d?function(){return e}:l(e),y=i(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(f=s(e.length);f>b;b++)if((v=t?y(a(p=e[b])[0],p[1]):y(e[b]))===c||v===u)return v}else for(m=g.call(e);!(p=m.next()).done;)if((v=r(m,y,p.value,t))===c||v===u)return v}).BREAK=c,t.RETURN=u},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(57);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color||new i.Color("rgb(242, 202, 126)"),n=e.colorRing0||new i.Color(1,0,0),a=e.colorRing1||new i.Color(0,1,0),s=e.colorRing2||new i.Color(0,0,1),l=e.radius1||10,c=e.radius2||20,u=e.width||4,h=e.speed||1,d=new i.PlaneBufferGeometry(2*(c+u),2*(c+u),1,1),f=new i.RawShaderMaterial({uniforms:{color:{value:t},colorRing0:{value:n},colorRing1:{value:a},colorRing2:{value:s},radius1:{value:l},radius2:{value:c},width:{value:u}},vertexShader:r,fragmentShader:o,side:i.FrontSide,transparent:!0}),p=new i.Mesh(d,f);return p.flag=1,p.update=function(){this.rotation.z+=.01*this.flag*h,this.rotation.z>1?this.flag=-1:this.rotation.z<-1&&(this.flag=1)},p};var i=n(0),r="\n    precision mediump float;\n    precision mediump int;\n\n    uniform mat4 modelViewMatrix; // optional\n    uniform mat4 projectionMatrix; // optional\n\n    attribute vec3 position;\n\n    varying vec3 vPosition;\n\n    void main() {\n\n        vPosition = position;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n",o="\n\n    precision mediump float;\n    precision mediump int;\n\n    uniform vec3 color;\n    uniform vec3 colorRing0;\n    uniform vec3 colorRing1;\n    uniform vec3 colorRing2;\n    varying vec3 vPosition;\n    uniform float radius1;\n    uniform float radius2;\n    uniform float width;\n\n    void main( ) {\n\n        float d = length(vec2(vPosition.xy-vec2(0.0)));\n        if(d<radius1){\n            gl_FragColor = vec4(color, 1.0);\n        }else if(radius2<d && d<radius2+width){\n            if(dot(normalize(vec2(vPosition.xy)),vec2(0.0,1.0))>0.60){\n                gl_FragColor = vec4(colorRing0, 1.0);\n            }else if(normalize(vPosition.xy).x>0.1 && normalize(vPosition.xy).y<0.40){\n                gl_FragColor = vec4(colorRing1, 1.0);\n            }else if(normalize(vPosition.xy).x<-0.1 && normalize(vPosition.xy).y<0.40){\n                gl_FragColor = vec4(colorRing2, 1.0);\n            }\n\n        }else{\n            discard;\n        }\n    }\n  "},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(78);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){"use strict";var i=n(28),r=n(14),o=n(51),a=n(42),s=n(29)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModelText=void 0;var i=c(n(47)),r=c(n(19)),o=c(n(20)),a=c(n(48)),s=c(n(49)),l=n(0);function c(e){return e&&e.__esModule?e:{default:e}}t.ModelText=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.name=e.name,n.color=e.color?new l.Color(e.color):new l.Color("#fff"),n.color2=e.color2?new l.Color(e.color2):new l.Color("#fff"),n.fontsize=e.fontsize||36,n.text=e.text||null,n.text2=e.text2||null,n.idSprite=null,n.imgUrl=e.imgUrl,n.sizeAttenuation=e.sizeAttenuation||!1,n.options=e.options||{},n.scaleXYZ=e.scale||[1,1,1],n.isVertical=e.isVertical||!1,n.isEmissive=e.isEmissive||!1,n.canvasScale=e.canvasScale||3,n.offset=e.offset||[0,0],n.init(),n}return(0,s.default)(t,e),(0,o.default)(t,[{key:"init",value:function(){this.drawIDImg(this.options)}},{key:"drawIDImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.iconWidth||70*this.canvasScale,i=t.iconHeight||22*this.canvasScale;this.isVertical&&(n=t.iconWidth||18*this.canvasScale,i=t.iconHeight||46*this.canvasScale);var r=this.fontsize||12*scalthis.canvasScalee,o=this.getCanvas(n,i),a=o.getContext("2d"),s=o.width/n,l=new Image;l.crossOrigin="Anonymous",this.imgUrl?(l.src=this.imgUrl,l.addEventListener("load",(function(){a.drawImage(l,0,0,o.width,o.height),e.drawCanvas(o,a,n,i,r,s)}))):this.drawCanvas(o,a,n,i,r,s)}},{key:"drawCanvas",value:function(e,t,n,i,r,o){this.drawText(n,t,this.text,this.text2,.285*n*o+this.offset[0],(.5*i+.5*r-2)*o-15+this.offset[1],r*o,new l.Color(this.color),!0,new l.Color(this.color2));var a=new l.Texture(e);a.anisotropy=8,a.minFilter=l.NearestFilter,a.magFilter=l.NearestFilter,a.needsUpdate=!0,this.idSprite?this.idSprite.material.map=a:(this.idSprite=this.getRectangle(n,i,a),this.idSprite.scale.set(this.scaleXYZ[0],this.scaleXYZ[1],this.scaleXYZ[2]),this.idSprite.position.x=0,this.idSprite.position.z=8,this.idSprite.addEventListener((function(e){console.log(e)})),this.add(this.idSprite))}},{key:"drawText",value:function(e,t,n,i,r,o,a,s,c,u){if(t.fillStyle=this.getRGBA(s||new l.Color(1,1,1)),t.textAlign="left",t.font=(c?"Bold ":"")+(Math.floor(a)||36)+"px Arial",this.isVertical)for(var h=e/2-10,d=0,f=0;f<n.length;f++){var p=n.slice(f,f+1).toString();p.match(/[A-Za-z0-9]/)&&d<576?(t.save(),t.translate(h,d),t.rotate(Math.PI/180*90),t.textBaseline="bottom",t.fillText(p,0,0),t.restore(),d+=t.measureText(p).width):p.match(/[\u4E00-\u9FA5]/)&&d<576&&(t.save(),t.textBaseline="top",t.fillText(p,h,d),t.restore(),d+=t.measureText(p).width)}else t.fillText(n,Math.ceil(r),Math.ceil(o)),i&&(t.fillStyle=this.getRGBA(u||new l.Color(1,1,1)),t.font=(Math.floor(a/2)||36)+"px sans-serif",t.fillText(i,Math.ceil(r),Math.ceil(o+40)))}},{key:"getRGBA",value:function(e,t){return"rgba("+255*e.r+","+255*e.g+","+255*e.b+","+(t=t||1)+")"}},{key:"getCanvas",value:function(e,t){var n=document.createElement("canvas"),i=l.MathUtils.ceilPowerOfTwo(e);return n.width=i,n.height=t*i/e,n}},{key:"getRectangle",value:function(e,t,n){var i=new l.MeshPhongMaterial({map:n,transparent:!0,blending:l.CustomBlending,side:2,color:"#fff"});e*=.02,t*=.02;var r=new l.PlaneGeometry(e,t,1,1),o=new l.Mesh(r,i);return this.isEmissive&&(o.material.emissive=new l.Color("#fff"),o.material.emissiveMap=o.material.map,o.layers.enable(1)),o.name="sprite",o.rotateX(.5*Math.PI),o.rotateY(.5*Math.PI),o}}]),t}(l.Object3D)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cloud=void 0;var i=c(n(47)),r=c(n(19)),o=c(n(20)),a=c(n(48)),s=c(n(49)),l=n(0);function c(e){return e&&e.__esModule?e:{default:e}}t.Cloud=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));n.camera=e.camera||null,n.imgURL=e.imgURL||"",n.opacity=e.opacity||.8,n.count=e.count||1e4,n.sum=e.sum||500,n.xyz=e.xyz||new l.Vector3(2e3,200,2e3),n.mesh=null,n.material=null,n.geometry=null,n.texture=null;var o=Math.random();return n._offsetAdd=o>.5,n.offset=.001,n._offset=0,n.init(),n}return(0,s.default)(t,e),(0,o.default)(t,[{key:"init",value:function(){this.texture=(new l.TextureLoader).load(this.imgURL),this.texture.magFilter=l.LinearMipMapLinearFilter,this.texture.minFilter=l.LinearMipMapLinearFilter,this.material=new l.MeshBasicMaterial({map:this.texture,opacity:this.opacity,depthWrite:!1,depthTest:!1,transparent:!0});var e=new l.Mesh(new l.PlaneGeometry(100,100));this.geometry=new l.Geometry;for(var t=0;t<this.sum;t++)e.position.x=(Math.random()-.5)*this.xyz.x,e.position.y=(Math.random()-.5)*this.xyz.y,e.position.z=(Math.random()-.5)*this.xyz.z,e.scale.x=e.scale.z=e.scale.y=Math.random()*Math.random()*1.5+.5,this.geometry.merge(e.geometry);this.mesh=new l.Mesh(this.geometry,this.material),this.add(this.mesh)}},{key:"update",value:function(){this.mesh.rotation.x=this.camera.rotation.x,this.rotation.z=this.camera.rotation.z;this._offsetAdd?(this._offset+=.005,this.mesh.position.z+=.1*Math.random(),this._offset>=this.offset&&(this._offsetAdd=!1)):(this._offset-=.005,this.mesh.position.z+=.1*-Math.random(),this._offset<=-this.offset&&(this._offsetAdd=!0))}},{key:"dispose",value:function(){this.mesh&&(this.mesh.geometry.dispose(),this.mesh.material.dispose(),this.mesh=null),this.position.set(0,0,0)}}]),t}(l.Object3D)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrafficEvent3=void 0;var _toConsumableArray2=__webpack_require__(72),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_keys=__webpack_require__(21),_keys2=_interopRequireDefault(_keys),_slicedToArray2=__webpack_require__(25),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_getPrototypeOf=__webpack_require__(47),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(19),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(20),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(48),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(49),_inherits3=_interopRequireDefault(_inherits2),_three=__webpack_require__(0),_RingCircle=__webpack_require__(107),_RingCircle2=_interopRequireDefault(_RingCircle),_config=__webpack_require__(46),_lodash=__webpack_require__(89);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var TrafficEvent3=exports.TrafficEvent3=function(_Object3D){function TrafficEvent3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck3.default)(this,TrafficEvent3);var t=(0,_possibleConstructorReturn3.default)(this,(TrafficEvent3.__proto__||(0,_getPrototypeOf2.default)(TrafficEvent3)).call(this,e));return t.type="trafficevent3",t.name=e.name,t.fontsize=e.fontsize||12,t.sizeAttenuation=!0,t.iconSprite=null,t.itemScale=e.scale||1,t.flagType=e.flagType||"",t.onlyAnimition=!0,t.labelText=e.label||null,t.miniLabel=e.miniLabel||null,t.defaultScale=e.defaultScale||3,t.textBackColor=e.textBackColor,t.textColor=e.textColor,t.textActiveBackColor=e.textActiveBackColor,t.textActiveColor=e.textActiveColor,t.iconMap={softRoad:"&#xe603;",gate:"&#xe605;",sensor:"&#xe604;",pass:"&#xe607;",noPass:"&#xe606;",trafficLight:"&#xec9d;",lmj:"&#xe601;"},t.spriteOffsetX=0,t.flagLabelMap={softRoad:"柔性路权",gate:"道闸",sensor:"传感器",pass:"可通行",noPass:"不可通行",trafficLight:"信号灯",lmj:"龙门架"},t.init(e),t}return(0,_inherits3.default)(TrafficEvent3,_Object3D),(0,_createClass3.default)(TrafficEvent3,[{key:"init",value:function(e){this.initTop(e),this.initMiddle(e),this.initBottom(e),this.initRight(e),this.boundingSphere=new _three.Sphere(new _three.Vector3(0,0,2.5),2.5),this.boundingBox=new _three.Box3(new _three.Vector3(-1,-1,0),new _three.Vector3(2,2,5))}},{key:"initTop",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.defaultScale,i=37*n,r=32*n,o=getCanvas(r,i),a=o.width/r,s=o.getContext("2d"),l=a*n,c=new Image;c.crossOrigin="Anonymous",c.src=t.url||"https://mapdata.bj.bcebos.com/images/common/flag%403x.png",c.addEventListener("load",(function(){s.drawImage(c,0,0,r*a,i*a),e.drawIcon(s,"#fff",e.iconMap[e.flagType],l);var t=new _three.Texture(o);e.top=getRectangle(r,i,t),e.top.position.x=0,e.top.position.z=2.8,e.top.scale.set(1.3,1.3,1.3),e.add(e.top)}))}},{key:"drawIcon",value:function drawIcon(ctx,color){var Unicode=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&#xe67a;",scale=arguments[3];ctx.fillStyle=color,ctx.beginPath(),ctx.font=20*scale+"px EventIcon2",-1!==Unicode.indexOf("&amp;")&&(Unicode=Unicode.replace("&amp;","&")),-1!==Unicode.indexOf("&amp")&&(Unicode=Unicode.replace("&amp","&"));var icon=eval('("'+(""+Unicode).replace("&#x","\\u").replace(";","")+'")');ctx.textBaseline="top",ctx.textAlign="left";var widthInfo=ctx.measureText(icon);ctx.fillText(icon,(ctx.canvas.width-widthInfo.width)/2,8*scale)}},{key:"drawButtonIcon",value:function drawButtonIcon(ctx){var Unicode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&#xe67a;",options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},color=options.color,scale=options.scale,iconFont=options.iconFont,position=options.position,fontsize=options.fontsize;ctx.fillStyle=color,ctx.beginPath(),ctx.font=fontsize*scale+"px "+(iconFont||this.eventIcon),-1!==Unicode.indexOf("&amp;")&&(Unicode=Unicode.replace("&amp;","&")),-1!==Unicode.indexOf("&amp")&&(Unicode=Unicode.replace("&amp","&"));var icon=eval('("'+(""+Unicode).replace("&#x","\\u").replace(";","")+'")');ctx.textBaseline="top",ctx.textAlign="left",ctx.fillText(icon,position[0],position[1])}},{key:"initRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=5,n=this.labelText||this.flagLabelMap[this.flagType],i=e.iconWidth||t*(n.length+1)*14,r=e.iconHeight||32*t,o=getCanvas(i,r),a=e.textBackColor||"#384b70",s=o.width/i,l=s*t,c=e.fontsize||14*l,u=o.getContext("2d");u.font="Bold "+c+"px Arial",this.spriteOffsetX=2.5*(1+(n.length-3)/2/3);var h=e.offset||new _three.Vector3(this.spriteOffsetX,0,2.65);if(u.fillStyle=a,fillRect(u,0,0,o.width,20*l),this.miniLabel){u.fillStyle="#12326e",fillRect(u,0,21*l,44*l,11*l),u.fillStyle="#a8c5ff",u.font=(e.isBold?"Bold ":"")+10*l+"px HyperspaceRace-Bold";var d=u.measureText(this.miniLabel),f=d.width;u.textAlign="left",u.textBaseline="top",u.fillText(this.miniLabel,.5*(44*l-f),22*l,f)}u.fillStyle=e.textColor||"#fff",u.font=(e.isBold?"Bold ":"")+(Math.floor(c)||12)+"px Arial";var p=u.measureText(n),m=p.width;this.drawText(u,n,.5*(o.width-m),4*l,c,null,e.isBold);var v=new _three.Texture(o);v.anisotropy=16,v.minFilter=_three.NearestFilter,v.magFilter=_three.NearestFilter,v.needsUpdate=!0;var g=getRectangle(i,r,v);this.right=g,g.name=e.name,g.position.x=h.x,g.position.z=h.z,this.add(g)}},{key:"initMiddle",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius||.05,n=e.height||2,i=e.radiusSegments||60,r=e.heightSegments||1,o=e.middleTopColor||[49,133,255],a=e.middleBottomColor||[36,201,255],s=[],l=new _three.ConeBufferGeometry(t,n,i,r,!1),c=0;c<r;c++)for(var u=0;u<i+1;u++){var h=(0,_slicedToArray3.default)(a,3),d=h[0],f=h[1],p=h[2];s.push(d/255,f/255,p/255)}for(var m=0;m<i+1;m++){var v=(0,_slicedToArray3.default)(o,3);d=v[0],f=v[1],p=v[2];s.push(d/255,f/255,p/255)}for(var g=0;g<3;g++)for(var y=0;y<i;y++)if(0===g){d=50,f=209,p=219;s.push(d/255,f/255,p/255)}else{var b=142,x=248,w=255;s.push(b/255,x/255,w/255)}l.setAttribute("color",new _three.Float32BufferAttribute(s,3));var _=new _three.MeshBasicMaterial({vertexColors:!0,opacity:1,transparent:!0,side:_three.DoubleSide,color:null,wireframe:!1}),S=new _three.Mesh(l,_);S.rotateX(90*Math.PI/180),S.position.z=n/2,this.middle=S,this.add(this.middle)}},{key:"initBottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.bottom=(0,_RingCircle2.default)({color:new _three.Color(e.bottomColor||"#4f85ff"),colorRing:new _three.Color(e.bottomColor||"#4f85ff"),radius1:.25,radius2:.375,width:.05}),this.add(this.bottom)}},{key:"drawInfoPane",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{showDetail:!1,showClose:!1},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Detail-icon",a=r.showDetail,s=r.showClose,l=void 0,c=5,u=14,h=10,d=36,f=30,p=t.length/2,m="#5C84F7",v=getCanvas(e*c,(l=u*p+h*(p-1)+d+f)*c),g=v.width/(e*c),y=g*c,b=v.getContext("2d");b.beginPath(),b.moveTo(0,0),b.lineTo((e/2-12-4*Math.tan(60*Math.PI/180))*y,0),b.lineTo((e/2-12)*y,4*y),b.lineTo(e*y,4*y),b.lineTo(e*y,f*y),b.lineTo(0,f*y),b.lineTo(0,0),b.fillStyle=m,b.closePath(),b.fill(),b.beginPath(),b.moveTo(0,f*y),b.lineTo(e*y,f*y),b.lineTo(e*y,l*y),b.lineTo(20*y,l*y),b.lineTo(0,(l-20)*y),b.lineTo(0,f*y),b.fillStyle="rgba(17, 19, 23, 0.8)",b.fill(),b.closePath(),a&&(b.beginPath(),b.moveTo(110*y,8.5*y),b.lineTo(164*y,8.5*y),b.lineTo(164*y,26.5*y),b.lineTo(110*y,26.5*y),b.lineTo(110*y,8.5*y),b.fillStyle="#B89D04",b.fill(),b.closePath(),b.fillStyle="#fff",b.font=12*y+"px FZZYJW--GB1-0",b.textBaseline="top",b.textAlign="left",b.fillText("详情",118*y,11.5*y),this.drawButtonIcon(b,"&#xe926;",{color:"#fff",scale:y,fontsize:16,iconFont:o,position:[145*y,9.5*y]})),s&&this.drawButtonIcon(b,"&#xe952;",{color:"#fff",scale:y,fontsize:12,iconFont:o,position:[228*y,9.5*y]}),b.fillStyle="#fff",b.font=14*y+"px FZZYJW--GB1-0",b.textBaseline="top",b.textAlign="left",b.fillText(n,14*y,8*y),t.forEach((function(e){var t=e.position,n=e.color,i=e.size,r=e.textAlign,o=e.value,a=e.fontFamily,s=e.legend,l=(0,_slicedToArray3.default)(t,2),c=l[0],u=l[1];s&&(b.fillStyle=s,b.fillRect(c*y,(u+2)*y,10*y,10*y)),b.fillStyle=n,b.font=i*y+"px "+a,b.textBaseline="top",b.textAlign=r,b.fillText(o,(s?c+10+8:c)*y,u*y)}));var x=new _three.Texture(v);if(x.anisotropy=16,x.minFilter=_three.NearestFilter,x.magFilter=_three.NearestFilter,x.needsUpdate=!0,this.infoPane&&this.infoHeight===l)this.infoPane.material.map=x,this.infoPane.material.map.needsUpdate=!0,this.infoPane.visible=!this.infoPane.visible;else{this.infoPane&&this.remove(this.infoPane);var w=getRectangle(e,l,x);if(w.position.x=4.8,w.position.z=6+.2*(p-4),w.scale.set(3,3,3),this.add(w),this.infoPane=w,a){var _=this.initEnter();this.enter&&(0,_keys2.default)(this.enter._listeners).forEach((function(e){_.addEventListener(e,i.enter._listeners[e][0])})),this.enter=_,this.infoPane.add(this.enter),this.enter.center.set(.25,-.625*p)}if(s){var S=this.initClose();this.close&&(0,_keys2.default)(this.close._listeners).forEach((function(e){S.addEventListener(e,i.close._listeners[e][0])})),this.close=S,this.infoPane.add(this.close),this.close.center.set(-5,-.625*p)}this.infoHeight=l}}},{key:"initClose",value:function(){var e=new _three.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:!0,opacity:0}),t=new _three.Sprite(e);return t.scale.set(.2,.2,1),t.material.color=new _three.Color("#58d2d4"),t.center.set(-5,-2.5),t}},{key:"initEnter",value:function(){var e=new _three.SpriteMaterial({depthTest:!0,depthWrite:!0,transparent:!0,sizeAttenuation:!0,opacity:0}),t=new _three.Sprite(e);return t.scale.set(.5,.2,1),t.material.color=new _three.Color("#58d2d4"),t.center.set(.25,-2.5),t}},{key:"releaseHover",value:function(){this.hoverObject&&(this.hoverObject.visible=!1),this.hoverState=!1}},{key:"setColor",value:function(e){e&&(e=new _three.Color(e),this.color.copy(e),this.bottom.material.uniforms.color.value=this.color,this.bottom.material.uniforms.colorRing.value=this.color,this.middle.material.color=this.color,this.right.material.uniforms.color.value=this.color)}},{key:"setActive",value:function(e){e?(this.remove(this.right),this.initRight({textBackColor:this.textActiveBackColor||"#175CF2",textColor:this.textActiveColor||"#fff"})):(this.remove(this.right),this.initRight({textBackColor:this.textBackColor,textColor:this.textColor}))}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}}},{key:"drawText",value:function(e,t,n,i,r,o,a){e.fillStyle=getRGBA(o||new _three.Color(1,1,1)),e.font=(a?"Bold ":"")+(Math.floor(r)||12)+"px Arial",e.textBaseline="top";var s=e.measureText(t).width;e.fillText(t,Math.ceil(n),Math.ceil(i),s)}},{key:"raycast",value:function(e,t){var n=[],i=new _three.Sphere;i.copy(this.boundingSphere),i.applyMatrix4(this.matrixWorld);var r=e.ray.intersectsSphere(i);if(r){t.push({object:this,point:r,distance:e.ray.origin.distanceTo(r)});for(var o=0;o<this.children.length;o++){var a=this.children[o];a.visible&&a.raycast(e,n)}for(var s=0;s<n.length;s++){var l=n[s];l.distance=e.ray.origin.distanceTo(l.point)}if(n.sort((function(e,t){return e.distance-t.distance})),n.length)for(var c=0;c<n.length;c++)t.push(n[c]);return t}}},{key:"faceToCamera",value:function(e){var t=e.rotation.z;this.top&&(this.top.rotation.y=t,this.top.position.x=0*Math.cos(t),this.top.position.y=0*Math.sin(t)),this.right&&(this.right.rotation.y=t,this.right.position.x=Math.cos(t)*this.spriteOffsetX,this.right.position.y=Math.sin(t)*this.spriteOffsetX),this.infoPane&&(this.infoPane.rotation.y=t,this.infoPane.position.x=4.8*Math.cos(t),this.infoPane.position.y=4*Math.sin(t))}},{key:"update",value:function(){}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,_toConsumableArray3.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,_toConsumableArray3.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}]),TrafficEvent3}(_three.Object3D);function getRGBA(e,t){return"rgba("+255*e.r+","+255*e.g+","+255*e.b+","+(t=t||1)+")"}function getCanvas(e,t){var n=document.createElement("canvas"),i=_three.MathUtils.ceilPowerOfTwo(e);return n.width=i,n.height=t*i/e,n}function getRectangle(e,t,n){var i=new _three.MeshBasicMaterial({map:n,transparent:!0,fog:!0});i.map.needsUpdate=!0,i.transparent=!0;var r=new _three.PlaneBufferGeometry(.01*e,.01*t,1,1),o=new _three.Mesh(r,i);return o.rotateX(.5*Math.PI),o}function fillRect(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t+i,n),e.lineTo(t+i,n+3*r/4),e.lineTo(t+i-.07*i,n+r),e.lineTo(t,n+r),e.fill()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineMaterial=void 0;var i=a(n(126)),r=a(n(129)),o=n(0);function a(e){return e&&e.__esModule?e:{default:e}}o.UniformsLib.line={linewidth:{value:1},resolution:{value:new o.Vector2(1,1)},dashScale:{value:1},dashOffset:{value:.01},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}};var s={uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,o.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection,\n//and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\t\t\t\t // todo - FIX\n\t\t\t\tfloat dash = mod( vLineDistance+dashOffset, dashSize + gapSize );\n\t\t\t\tfloat tmpOpacity = opacity;\n\t\t\t\tif ( dash > dashSize ){\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\n\t\t\t\t#ifdef USE_OPACITY\n\t\t\t\t\ttmpOpacity = 1.0 - dash/dashSize;\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, tmpOpacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"},l=function(e){o.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:o.UniformsUtils.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,transparent:!0,blending:o.CustomBlending,clipping:!0}),this.dashed=!1,(0,r.default)(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset?this.uniforms.dashOffset.value:0},set:function(e){this.uniforms.dashOffset?this.uniforms.dashOffset.value=e:this.uniforms.dashOffset={value:e}}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};(l.prototype=(0,i.default)(o.ShaderMaterial.prototype)).constructor=l,l.prototype.isLineMaterial=!0,t.LineMaterial=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineMaterial2=void 0;var i=a(n(126)),r=a(n(129)),o=n(0);function a(e){return e&&e.__esModule?e:{default:e}}o.UniformsLib.line={linewidth:{value:1},resolution:{value:new o.Vector2(1,1)},dashScale:{value:1},offset1:{value:.01},offset2:{value:1},length1:{value:2},length2:{value:2},color1:{value:new o.Color(1,0,1)},color2:{value:new o.Color(0,1,.5)},opacity:{value:1}};var s={uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,o.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\t\tvarying vec2 vUv;\n\t\t#ifdef USE_DASH\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\t\t#endif\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\t\t}\n\t\tvoid main() {\n\t\t\t#ifdef USE_COLOR\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\t\t\t#endif\n\t\t\t#ifdef USE_DASH\n\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t#endif\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\t\t\tvUv = uv;\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\t\t\t// special case for perspective projection,\n//and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\t\t\tif ( perspective ) {\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\t\t\t\t\ttrimSegment( start, end );\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\t\t\t\t\ttrimSegment( end, start );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\t\t\t\toffset += - dir;\n\t\t\t} else if ( position.y > 1.0 ) {\n\t\t\t\toffset += dir;\n\t\t\t}\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\t\t\tclip.xy += offset;\n\t\t\tgl_Position = clip;\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\t#ifdef USE_DASH\n\t\t\tuniform float offset1;\n\t\t\tuniform float offset2;\n\t\t\tuniform float length1;\n\t\t\tuniform float length2;\n\t\t\tuniform float color;\n\t\t\tuniform float color1;\n\t\t\tuniform float color2;\n\t\t#endif\n\t\tvarying float vLineDistance;\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\t\t\t}\n            float tmpOpacity = 1.0;\n\t\t\tvec4 diffuseColor = vec4( diffuse, tmpOpacity );\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\n\t\t\tif ( offset1 < vLineDistance &&  vLineDistance< offset1+length1 ){\n\t\t\t\t#ifdef USE_OPACITY\n\t\t\t\t\ttmpOpacity = 1.0 - (vLineDistance-offset1/length1);\n\t\t\t\t#endif\n\t\t\t\tgl_FragColor = vec4(color1,tmpOpacity);\n\t\t\t}else if(offset2 < vLineDistance &&  vLineDistance< offset2+length2 ){\n\t\t\t\t#ifdef USE_OPACITY\n\t\t\t\t\ttmpOpacity = (vLineDistance-offset2/length2)-1.0;\n\t\t\t\t#endif\n\t\t\t\tgl_FragColor = vec4(color1,tmpOpacity);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\t\t\t}\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t}\n\t\t"},l=function(e){o.ShaderMaterial.call(this,{type:"LineMaterial2",uniforms:o.UniformsUtils.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,transparent:!0,blending:o.CustomBlending,clipping:!0}),this.dashed=!1,(0,r.default)(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},offset1:{enumerable:!0,get:function(){return this.uniforms.offset1?this.uniforms.offset1.value:0},set:function(e){this.uniforms.offset1?this.uniforms.offset1.value=e:this.uniforms.offset1={value:e}}},offset2:{enumerable:!0,get:function(){return this.uniforms.offset2?this.uniforms.offset2.value:0},set:function(e){this.uniforms.offset2?this.uniforms.offset2.value=e:this.uniforms.offset2={value:e}}},length1:{enumerable:!0,get:function(){return this.uniforms.length1?this.uniforms.length1.value:0},set:function(e){this.uniforms.length1?this.uniforms.length1.value=e:this.uniforms.length1={value:e}}},length2:{enumerable:!0,get:function(){return this.uniforms.length2?this.uniforms.length2.value:0},set:function(e){this.uniforms.length2?this.uniforms.length2.value=e:this.uniforms.length2={value:e}}},color1:{enumerable:!0,get:function(){return this.uniforms.color1?this.uniforms.color1.value:new o.Color(1,1,0)},set:function(e){this.uniforms.color1?this.uniforms.color1.value=e:this.uniforms.color1={value:e}}},color2:{enumerable:!0,get:function(){return this.uniforms.color2?this.uniforms.color2.value:new o.Color(0,1,1)},set:function(e){this.uniforms.color2?this.uniforms.color2.value=e:this.uniforms.color2={value:e}}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};(l.prototype=(0,i.default)(o.ShaderMaterial.prototype)).constructor=l,l.prototype.isLineMaterial2=!0,t.LineMaterial2=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTripCubicFatline=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color?new i.Color(e.color):new i.Color(1,0,0),n=(e.colorTrip?new i.Color(e.colorTrip):new i.Color(1,1,0),e.dashOffsetDirection||!1),o=(e.startPoint||new i.Vector3(0,0,0),e.endPoint||new i.Vector3(30,30,0)),s=e.name,l=a(e),c=new i.Geometry;c.vertices=l;for(var u=[],h=0;h<l.length;h++){var d=[];d.push(l[h].x,l[h].y,l[h].z),u.push(d)}var f={linewidth:2,vertices:u,color:t,gapSize:10,tripSize:10,speed:.2,useOpacity:!0,dashOffsetDirection:n},p=(0,r.createTripLine)(f);return p.position.x=o.x,p.position.y=o.y,p.position.z=o.z,p.rotateZ(Math.PI),p.idNum=s,p.type="tripCubic",{line:p}},t.updateTripCubicFatline=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a(e),n=new i.Geometry;n.vertices=t;var r=new o.LineGeometry,s=[],l=new i.Vector3(0,0,0);t.length>0&&(l.x=t[0].x,l.y=t[0].y,l.z=t[0].z);for(var c=0;c<t.length;c++)s.push(t[c].x-l.x+.1,t[c].y-l.y+.1,t[c].z-l.z);return r.setPositions(s),r};var i=n(0),r=n(156),o=n(80);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startPoint||new i.Vector3(0,0,0),n=e.endPoint||new i.Vector3(30,30,0),r=1.1*Math.abs(n.x-t.x),o=0;o=n.z-t.z>0?1.5*n.z:1.5*t.z;var a=new i.Vector3(0,0,n.z),s=new i.Vector3((n.x-t.x)/4,(n.y-t.y)/4,o),l=new i.Vector3((n.x-t.x)/2,(n.y-t.y)/2,o),c=new i.Vector3(n.x-t.x,n.y-t.y,t.z),u=new i.CubicBezierCurve3(a,s,l,c),h=u.getPoints(5*r);return h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CarFlag=void 0;var i=p(n(72)),r=p(n(25)),o=p(n(73)),a=p(n(47)),s=p(n(19)),l=p(n(20)),c=p(n(48)),u=p(n(49)),h=n(0),d=p(n(220)),f=n(46);function p(e){return e&&e.__esModule?e:{default:e}}t.CarFlag=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.type="carFlag",n.name=e.name,n.style=(0,o.default)({bottom:{},middle:{},top:{},right:{}},e.style),n.trafficType=e.trafficType||"noPark",n.color=new h.Color(e.color),n.fillColor=e.fillColor,n.strokeColor=e.strokeColor,n.fontsize=e.fontsize||14,n.imgUrlMap=e.imgUrlMap,n.sizeAttenuation=e.sizeAttenuation||!1,n.iconSprite=null,n.itemScale=e.scale||1,n.flagSprite=null,n.flagCanvas=document.createElement("canvas"),n.flag=e.flag,n.flagFactor=e.factor||{},n.texture=null,n.scaleNum=e.scaleNum||1,n.onlyAnimition=!0,n.init(),n}return(0,u.default)(t,e),(0,l.default)(t,[{key:"init",value:function(){this.drawCarInfo(),this.boundingSphere=new h.Sphere(new h.Vector3(0,0,2.5),2.5),this.boundingBox=new h.Box3(new h.Vector3(-1,-1,0),new h.Vector3(2,2,5))}},{key:"initBottom",value:function(){var e=new h.SphereBufferGeometry(.039),t=new h.MeshBasicMaterial({color:this.color}),n=new h.Mesh(e,t);this.bottom=n,this.add(this.bottom)}},{key:"initMiddle",value:function(){var e=new h.CylinderBufferGeometry(.013,.013,3,32,1),t=new h.MeshBasicMaterial({color:this.color});this.middle=new h.Mesh(e,t),this.middle.rotateX(.5*Math.PI),this.middle.position.z=1.5,this.add(this.middle)}},{key:"initTop",value:function(){this.iconSprite?this.iconSprite.visible=!0:this.drawIconImg();var e=(0,d.default)({color:this.color,colorRing0:this.color,colorRing1:this.color,colorRing2:this.color,radius1:.01,radius2:.6,width:.1});this.top=e,this.top.rotateX(.5*Math.PI),this.top.position.z=4,this.add(this.top)}},{key:"initHover",value:function(){this.addEventListener("mouseover",g),this.addEventListener("mouseleave",y)}},{key:"removeHover",value:function(){this.removeEventListener("mouseover",g),this.removeEventListener("mouseleave",y)}},{key:"setSpriteStatus",value:function(e){this.flagSprite.visible=e}},{key:"releaseHover",value:function(){this.hoverObject&&(this.hoverObject.visible=!1),this.top.flag=!1,this.hoverState=!1}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}}},{key:"drawIconImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.iconWidth||36*this.itemScale,i=t.iconHeight||36*this.itemScale,r=m(n,i),o=r.getContext("2d"),a=r.width/n,s=new Image;if(s.crossOrigin="Anonymous",this.imgUrlMap){var l=this.imgUrlMap.icon;s.src=l}else{var c=f.TrackEventType[this.trafficType].icon;s.src=f.ResourcePath+c}s.addEventListener("load",(function(){o.fillStyle=e.fillColor,o.lineWidth=4,o.strokeStyle=e.strokeColor,b(o,r.width,r.height,4),o.drawImage(s,Math.floor(4*e.itemScale*a),Math.floor(4*e.itemScale*a),Math.ceil(28*e.itemScale*a),Math.ceil(28*e.itemScale*a));var t=new h.Texture(r);t.needsUpdate=!0,t.anisotropy=8,e.iconSprite?e.iconSprite.material.map=t:(e.iconSprite=v(n,i,t),e.iconSprite.position.z=4,e.add(e.iconSprite))}))}},{key:"drawCarInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.flagSprite)this.flagSprite.visible=!0;else{var t=this.flag,n=t.width,i=t.height;this.flagCanvas.width=n,this.flagCanvas.height=i,this.texture=new h.Texture(this.flag),this.texture.needsUpdate=!0,this.texture.anisotropy=8;var r=v(this.flagCanvas.width,this.flagCanvas.height,this.texture);r.scale.set(1/this.flagFactor.x*this.scaleNum,1/this.flagFactor.y*this.scaleNum,1);var o=e.offset||new h.Vector3(0,0,3.5);this.flagSprite=r,r.name=e.name,r.position.x=o.x,r.position.z=o.z,r.position.y=o.y,this.add(r)}}},{key:"updateText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,100,100],n=(0,r.default)(t,4),i=n[0],o=n[1],a=n[2],s=n[3],l=this.flagCanvas,c=l.width,u=l.height,h=this.flagCanvas.getContext("2d");h.clearRect(0,0,c,u),h.drawImage(this.flag,i,o,c,u),h.drawImage(e,i,o,a*this.flagFactor.x,s*this.flagFactor.y),this.texture.image=this.flagCanvas,this.texture.needsUpdate=!0,this.flagSprite.material.map=this.texture}},{key:"updateTextList",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,100,100],i=(0,r.default)(n,2),o=i[0],a=i[1],s=this.flagCanvas,l=s.width,c=s.height,u=this.flagCanvas.getContext("2d");u.clearRect(0,0,l,c),this.flag||console.log("无效canvas",this),u.drawImage(this.flag,o,a,l,c),e.forEach((function(e){var n=e.text,i=e.position,r=e.size,o=e.color,a=e.fontFamily,s=e.textAlign;u.font=r*t.flagFactor.y+"px "+a,u.fillStyle=o,u.textBaseline="top",u.textAlign=s||"left";var l=u.measureText(n).width;u.fillText(n,i[0]*t.flagFactor.x,i[1]*t.flagFactor.y,l/t.flagFactor.y*3)})),this.texture.image=this.flagCanvas,this.texture.needsUpdate=!0,this.flagSprite.material.map=this.texture}},{key:"raycast",value:function(e,t){var n=[],i=new h.Sphere;i.copy(this.boundingSphere),i.applyMatrix4(this.matrixWorld);var r=e.ray.intersectsSphere(i);if(r){t.push({object:this,point:r,distance:e.ray.origin.distanceTo(r)});for(var o=0;o<this.children.length;o++){var a=this.children[o];a.visible&&a.raycast(e,n)}for(var s=0;s<n.length;s++){var l=n[s];l.distance=e.ray.origin.distanceTo(l.point)}if(n.sort((function(e,t){return e.distance-t.distance})),n.length)for(var c=0;c<n.length;c++)t.push(n[c]);return t}}},{key:"faceToCamera",value:function(e){if(this.flagSprite){var t=e.rotation.z;this.flagSprite.rotation.y=t,this.flagSprite.position.x=0,this.flagSprite.position.y=0}}},{key:"update",value:function(){this.hoverState&&this.top.update()}},{key:"updateColor",value:function(){}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,i.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,i.default)(t.children)),t.dispose&&t.dispose()}this.bottom=null,this.middle=null,this.top=null}}]),t}(h.Object3D);function m(e,t){var n=document.createElement("canvas"),i=h.MathUtils.ceilPowerOfTwo(e);return n.width=i,n.height=t*i/e,n}function v(e,t,n){var i=new h.MeshBasicMaterial({map:n,transparent:!0}),r=new h.PlaneBufferGeometry(.03*e,.03*t,1,1),o=new h.Mesh(r,i);return o.rotateX(.5*Math.PI),o}function g(){this.flagSprite?this.flagSprite.visible=!0:this.drawCarInfo(),this.hoverState=!0,this.iconSprite.scale.x=1.2,this.iconSprite.scale.y=1.2,this.top.scale.x=1.2,this.top.scale.y=1.2}function y(){this.iconSprite.scale.x=1,this.iconSprite.scale.y=1,this.top.scale.x=1,this.top.scale.y=1,this.hoverState=!1,!this.onlyAnimition&&this.flagSprite&&(this.flagSprite.visible=!1)}function b(e,t,n,i){e.beginPath(),e.moveTo(.5*t,0*n+i),e.lineTo(.067*t,.25*n),e.lineTo(.067*t,.75*n),e.lineTo(.5*t,n-i),e.lineTo(.933*t,.75*n),e.lineTo(.933*t,.25*n),e.moveTo(.5*t,0*n+i),e.closePath(),e.fill(),e.stroke()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EquipmentEvent=void 0;var i=h(n(72)),r=h(n(73)),o=h(n(47)),a=h(n(19)),s=h(n(20)),l=h(n(48)),c=h(n(49)),u=n(0);function h(e){return e&&e.__esModule?e:{default:e}}t.EquipmentEvent=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.type="equipmentevent",n.name=e.name,n.style=(0,r.default)({bottom:{},middle:{},top:{},right:{}},e.style),n.fontsize=e.fontsize||12,n.imgUrlMap=e.imgUrlMap,n.eventImg=e.eventImg,n.sizeAttenuation=e.sizeAttenuation||!1,n.iconSprite=null,n.itemScale=e.scale||1,n.onlyAnimition=!0,n.init(e),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"init",value:function(){this.initSprit(),this.boundingSphere=new u.Sphere(new u.Vector3(0,0,3),3),this.boundingBox=new u.Box3(new u.Vector3(-1,-1,0),new u.Vector3(2,2,5))}},{key:"initSprit",value:function(){this.iconSprite?this.iconSprite.visible=!0:this.drawIconImg()}},{key:"initHover",value:function(){this.addEventListener("mouseover",p),this.addEventListener("mouseleave",m)}},{key:"removeHover",value:function(){this.removeEventListener("mouseover",p),this.removeEventListener("mouseleave",m)}},{key:"initClick",value:function(){this.addEventListener("mouseup",v)}},{key:"removeCilck",value:function(){this.removeEventListener("mouseup",v)}},{key:"getTopHeight",value:function(){var e=this.top.position.z;return this.scale.z*e}},{key:"setSpriteStatus",value:function(e){this.trafficEventSprite.visible=e}},{key:"releaseHover",value:function(){this.hoverObject&&(this.hoverObject.visible=!1),this.top.flag=!1,this.hoverState=!1}},{key:"setColor",value:function(e){e&&(e=new u.Color(e),this.color.copy(e))}},{key:"setPosition",value:function(e){if(e){var t=e.x||e[0],n=e.y||e[1],i=e.z||e[2];this.position.set(t,n,i||this.position.z),this.updateMatrix()}}},{key:"drawIconImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=4,i=t.iconWidth||100*n*this.itemScale,r=t.iconHeight||70*n*this.itemScale,o=d(i,r),a=o.getContext("2d"),s=new Image;s.crossOrigin="Anonymous",s.src=this.eventImg,s.addEventListener("load",(function(){a.drawImage(s,0,0,o.width,o.height);var t=new u.Texture(o);t.minFilter=u.NearestFilter,t.magFilter=u.NearestFilter,t.anisotropy=4,t.needsUpdate=!0,e.iconSprite?e.iconSprite.material.map=t:(e.iconSprite=f(i,r,t),e.iconSprite.position.z=10.5,e.add(e.iconSprite))}))}},{key:"drawText",value:function(e,t,n,i,r,o,a){e.fillStyle=function(e,t){var n=255*e.r,i=255*e.g,r=255*e.b;return"rgba("+n+","+i+","+r+","+(t=t||1)+")"}(o||new u.Color(1,1,1)),e.font=(a?"Bold ":"")+(Math.floor(r)||12)+"px Arial",e.fillText(t,Math.ceil(n),Math.ceil(i))}},{key:"raycast",value:function(e,t){var n=[],i=new u.Sphere;i.copy(this.boundingSphere),i.applyMatrix4(this.matrixWorld);var r=e.ray.intersectsSphere(i);if(r){t.push({object:this,point:r,distance:e.ray.origin.distanceTo(r)});for(var o=0;o<this.children.length;o++){var a=this.children[o];a.visible&&a.raycast(e,n)}for(var s=0;s<n.length;s++){var l=n[s];l.distance=e.ray.origin.distanceTo(l.point)}if(n.sort((function(e,t){return e.distance-t.distance})),n.length)for(var c=0;c<n.length;c++)t.push(n[c]);return t}}},{key:"faceToCamera",value:function(e){this.iconSprite&&(this.iconSprite.rotation.y=e.rotation.z)}},{key:"closeToMe",value:function(e){var t=this.position.distanceTo(e);t<15&&!this.visible&&(this.visible=!0),t>15&&this.visible&&(this.visible=!1)}},{key:"update",value:function(){this.hoverState&&this.top.update()}},{key:"dispose",value:function(){var e=[];for(e.push.apply(e,(0,i.default)(this.children));e.length;){var t=e.pop();t.children&&t.children.length&&e.push.apply(e,(0,i.default)(t.children)),t.dispose&&t.dispose()}this.top=null}}]),t}(u.Object3D);function d(e,t){var n=document.createElement("canvas"),i=u.MathUtils.ceilPowerOfTwo(e);return n.width=i,n.height=t*i/e,n}function f(e,t,n){var i=new u.MeshBasicMaterial({map:n,transparent:!0,side:u.DoubleSide}),r=new u.PlaneBufferGeometry(.015*e,.015*t,1,1),o=new u.Mesh(r,i);return o.rotateX(.5*Math.PI),o}function p(){this.hoverState=!0,this.iconSprite&&(this.iconSprite.scale.x=1.2,this.iconSprite.scale.y=1.2)}function m(){this.iconSprite&&(this.iconSprite.scale.x=1,this.iconSprite.scale.y=1),this.hoverState=!1,this.clickState=!1}function v(){this.clickState=!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(216)),r=l(n(31)),o=l(n(404));n(432);var a=l(n(433));n(435);var s=l(n(436));function l(e){return e&&e.__esModule?e:{default:e}}r.default.use(o.default),new r.default({router:s.default,render:function(e){return e(a.default)}}).$mount("#app"),i.default.install=function(e){e.component("MapView",i.default)},t.default=i.default},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){e.exports={default:n(236),__esModule:!0}},function(e,t,n){n(74),n(88),e.exports=n(118).f("iterator")},function(e,t,n){var i=n(111),r=n(112);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(108),r=n(76),o=n(87),a={};n(57)(a,n(29)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(69),r=n(109),o=n(240);e.exports=function(e){return function(t,n,a){var s,l=i(t),c=r(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var i=n(111),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},function(e,t,n){"use strict";var i=n(242),r=n(221),o=n(68),a=n(69);e.exports=n(151)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(244),__esModule:!0}},function(e,t,n){n(245),n(153),n(248),n(249),e.exports=n(14).Symbol},function(e,t,n){"use strict";var i=n(28),r=n(58),o=n(42),a=n(36),s=n(159),l=n(150).KEY,c=n(65),u=n(116),h=n(87),d=n(91),f=n(29),p=n(118),m=n(119),v=n(246),g=n(222),y=n(43),b=n(50),x=n(66),w=n(69),_=n(114),S=n(76),M=n(108),T=n(247),E=n(165),C=n(120),A=n(51),O=n(77),L=E.f,k=A.f,P=T.f,D=i.Symbol,I=i.JSON,N=I&&I.stringify,F=f("_hidden"),R=f("toPrimitive"),B={}.propertyIsEnumerable,j=u("symbol-registry"),z=u("symbols"),U=u("op-symbols"),V=Object.prototype,G="function"==typeof D&&!!C.f,H=i.QObject,W=!H||!H.prototype||!H.prototype.findChild,q=o&&c((function(){return 7!=M(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=L(V,t);i&&delete V[t],k(e,t,n),i&&e!==V&&k(V,t,i)}:k,Y=function(e){var t=z[e]=M(D.prototype);return t._k=e,t},$=G&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},X=function(e,t,n){return e===V&&X(U,t,n),y(e),t=_(t,!0),y(n),r(z,t)?(n.enumerable?(r(e,F)&&e[F][t]&&(e[F][t]=!1),n=M(n,{enumerable:S(0,!1)})):(r(e,F)||k(e,F,S(1,{})),e[F][t]=!0),q(e,t,n)):k(e,t,n)},Q=function(e,t){y(e);for(var n,i=v(t=w(t)),r=0,o=i.length;o>r;)X(e,n=i[r++],t[n]);return e},K=function(e){var t=B.call(this,e=_(e,!0));return!(this===V&&r(z,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(z,e)||r(this,F)&&this[F][e])||t)},J=function(e,t){if(e=w(e),t=_(t,!0),e!==V||!r(z,t)||r(U,t)){var n=L(e,t);return!n||!r(z,t)||r(e,F)&&e[F][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=P(w(e)),i=[],o=0;n.length>o;)r(z,t=n[o++])||t==F||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===V,i=P(n?U:w(e)),o=[],a=0;i.length>a;)!r(z,t=i[a++])||n&&!r(V,t)||o.push(z[t]);return o};G||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(U,n),r(this,F)&&r(this[F],e)&&(this[F][e]=!1),q(this,e,S(1,n))};return o&&W&&q(V,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),E.f=J,A.f=X,n(164).f=T.f=Z,n(92).f=K,C.f=ee,o&&!n(75)&&s(V,"propertyIsEnumerable",K,!0),p.f=function(e){return Y(f(e))}),a(a.G+a.W+a.F*!G,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var ie=O(f.store),re=0;ie.length>re;)m(ie[re++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return r(j,e+="")?j[e]:j[e]=D(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!G,"Object",{create:function(e,t){return void 0===t?M(e):Q(M(e),t)},defineProperty:X,defineProperties:Q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=c((function(){C.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return C.f(x(e))}}),I&&a(a.S+a.F*(!G||c((function(){var e=D();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(b(t)||void 0!==e)&&!$(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$(t))return t}),i[1]=t,N.apply(I,i)}}),D.prototype[R]||n(57)(D.prototype,R,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(e,t,n){var i=n(77),r=n(120),o=n(92);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var i=n(69),r=n(164).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,t,n){n(119)("asyncIterator")},function(e,t,n){n(119)("observable")},function(e,t,n){n(153),n(74),n(88),n(251),n(255),n(256),e.exports=n(14).Promise},function(e,t,n){"use strict";var i,r,o,a,s=n(75),l=n(28),c=n(63),u=n(110),h=n(36),d=n(50),f=n(86),p=n(218),m=n(217),v=n(168),g=n(169).set,y=n(253)(),b=n(122),x=n(170),w=n(254),_=n(171),S=l.TypeError,M=l.process,T=M&&M.versions,E=T&&T.v8||"",C=l.Promise,A="process"==u(M),O=function(){},L=r=b.f,k=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n(29)("species")]=function(e){e(O,O)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),P=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a,s=r?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(r||(2==e._h&&F(e),e._h=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&(u.exit(),a=!0)),n===t.promise?c(S("Promise-chain cycle")):(o=P(n))?o.call(n,l,c):l(n)):c(i)}catch(e){u&&!a&&u.exit(),c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){g.call(l,(function(){var t,n,i,r=e._v,o=N(e);if(o&&(t=x((function(){A?M.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)})),e._h=A||N(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){g.call(l,(function(){var t;A?M.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},R=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},B=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=P(e))?y((function(){var i={_w:n,_d:!1};try{t.call(e,c(B,i,1),c(R,i,1))}catch(e){R.call(i,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){R.call({_w:n,_d:!1},e)}}};k||(C=function(e){p(this,C,"Promise","_h"),f(e),i.call(this);try{e(c(B,this,1),c(R,this,1))}catch(e){R.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(219)(C.prototype,{then:function(e,t){var n=L(v(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=c(B,e,1),this.reject=c(R,e,1)},b.f=L=function(e){return e===C||e===a?new o(e):r(e)}),h(h.G+h.W+h.F*!k,{Promise:C}),n(87)(C,"Promise"),n(223)("Promise"),a=n(14).Promise,h(h.S+h.F*!k,"Promise",{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!k),"Promise",{resolve:function(e){return _(s&&this===a?C:this,e)}}),h(h.S+h.F*!(k&&n(172)((function(e){C.all(e).catch(O)}))),"Promise",{all:function(e){var t=this,n=L(t),i=n.resolve,r=n.reject,o=x((function(){var n=[],o=0,a=1;m(e,!1,(function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then((function(e){l||(l=!0,n[s]=e,--a||i(n))}),r)})),--a||i(n)}));return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=L(t),i=n.reject,r=x((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(28),r=n(169).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(78)(a);e.exports=function(){var e,t,n,c=function(){var i,r;for(l&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(c)}}else n=function(){r.call(i,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(28).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var i=n(36),r=n(14),o=n(28),a=n(168),s=n(171);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var i=n(36),r=n(122),o=n(170);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){n(258),e.exports=n(14).Object.assign},function(e,t,n){var i=n(36);i(i.S+i.F,"Object",{assign:n(259)})},function(e,t,n){"use strict";var i=n(42),r=n(77),o=n(120),a=n(92),s=n(66),l=n(152),c=Object.assign;e.exports=!c||n(65)((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i}))?function(e,t){for(var n=s(e),c=arguments.length,u=1,h=o.f,d=a.f;c>u;)for(var f,p=l(arguments[u++]),m=h?r(p).concat(h(p)):r(p),v=m.length,g=0;v>g;)f=m[g++],i&&!d.call(p,f)||(n[f]=p[f]);return n}:c},function(e,t,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(261),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag",l="object"==typeof e,c=t.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=t.regeneratorRuntime=l?e.exports:{}).wrap=m;var u={},h={};h[o]=function(){return this};var d=Object.getPrototypeOf,f=d&&d(d(E([])));f&&f!==n&&i.call(f,o)&&(h=f);var p=b.prototype=g.prototype=Object.create(h);y.prototype=p.constructor=b,b.constructor=y,b[s]=y.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(p),e},c.awrap=function(e){return{__await:e}},x(w.prototype),w.prototype[a]=function(){return this},c.AsyncIterator=w,c.async=function(e,t,n,i){var r=new w(m(e,t,n,i));return c.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},x(p),p[s]="Generator",p[o]=function(){return this},p.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},c.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}}}function m(e,t,n,i){var r=t&&t.prototype instanceof g?t:g,o=Object.create(r.prototype),a=new T(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return C()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=v(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function g(){}function y(){}function b(){}function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,r){function o(){return new Promise((function(t,o){!function t(n,r,o,a){var s=v(e[n],e,r);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){l.value=e,o(l)}),a)}a(s.arg)}(n,r,t,o)}))}return t=t?t.then(o,o):o()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=v(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){var i=n(14),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){e.exports={default:n(264),__esModule:!0}},function(e,t,n){n(88),n(74),e.exports=n(265)},function(e,t,n){var i=n(110),r=n(29)("iterator"),o=n(68);e.exports=n(14).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){e.exports={default:n(267),__esModule:!0}},function(e,t,n){n(88),n(74),e.exports=n(268)},function(e,t,n){var i=n(43),r=n(121);e.exports=n(14).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){n(270),e.exports=n(14).Object.keys},function(e,t,n){var i=n(66),r=n(77);n(123)("keys",(function(){return function(e){return r(i(e))}}))},function(e,t,n){"use strict";n.r(t);var i=n(99),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(141),s=n(30);var l=function(e){n(272)},c=Object(s.a)(r.a,a.a,a.b,!1,l,"data-v-5fa14156",null);c.options.__file="src\\components\\3DMap1.vue",t.default=c.exports},function(e,t,n){"use strict";n.r(t)},function(e,t,n){n(274);var i=n(14).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(36);i(i.S+i.F*!n(42),"Object",{defineProperty:n(51).f})},function(e,t,n){"use strict";n.r(t),n.d(t,"Sky",(function(){return r}));var i=n(0),r=function(){var e=r.SkyShader,t=new i.ShaderMaterial({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:i.UniformsUtils.clone(e.uniforms),side:i.BackSide,depthWrite:!1});i.Mesh.call(this,new i.BoxBufferGeometry(1,1,1),t)};r.prototype=Object.create(i.Mesh.prototype),r.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new i.Vector3},up:{value:new i.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")}},function(e,t,n){"use strict";n.r(t),n.d(t,"Earcut",(function(){return i}));const i={triangulate:function(e,t,n){n=n||2;const i=t&&t.length,s=i?t[0]*n:e.length;let l=r(e,0,s,n,!0);const c=[];if(!l||l.next===l.prev)return c;let u,f,p,v,g,y,b;if(i&&(l=function(e,t,n,i){const a=[];let s,l,c,u,f;for(s=0,l=t.length;s<l;s++)c=t[s]*i,u=s<l-1?t[s+1]*i:e.length,f=r(e,c,u,i,!1),f===f.next&&(f.steiner=!0),a.push(m(f));for(a.sort(h),s=0;s<a.length;s++)d(a[s],n),n=o(n,n.next);return n}(e,t,l,n)),e.length>80*n){u=p=e[0],f=v=e[1];for(let t=n;t<s;t+=n)g=e[t],y=e[t+1],g<u&&(u=g),y<f&&(f=y),g>p&&(p=g),y>v&&(v=y);b=Math.max(p-u,v-f),b=0!==b?1/b:0}return a(l,c,n,u,f,b),c}};function r(e,t,n,i,r){let o,a;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=T(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=T(o,e[o],e[o+1],a);return a&&b(a,a.next)&&(E(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!b(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(E(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function a(e,t,n,i,r,h,d){if(!e)return;!d&&h&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=p(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ,i);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,h);let f,m,v=e;for(;e.prev!==e.next;)if(f=e.prev,m=e.next,h?l(e,i,r,h):s(e))t.push(f.i/n),t.push(e.i/n),t.push(m.i/n),E(e),e=m.next,v=m.next;else if((e=m)===v){d?1===d?a(e=c(o(e),t,n),t,n,i,r,h,2):2===d&&u(e,t,n,i,r,h):a(o(e),t,n,i,r,h,1);break}}function s(e){const t=e.prev,n=e,i=e.next;if(y(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(v(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(e,t,n,i){const r=e.prev,o=e,a=e.next;if(y(r,o,a)>=0)return!1;const s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=p(s,l,t,n,i),d=p(c,u,t,n,i);let f=e.prevZ,m=e.nextZ;for(;f&&f.z>=h&&m&&m.z<=d;){if(f!==e.prev&&f!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,m!==e.prev&&m!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=d;){if(m!==e.prev&&m!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!b(r,o)&&x(r,i,i.next,o)&&S(r,o)&&S(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),E(i),E(i.next),i=e=o),i=i.next}while(i!==e);return o(i)}function u(e,t,n,i,r,s){let l=e;do{let e=l.next.next;for(;e!==l.prev;){if(l.i!==e.i&&g(l,e)){let c=M(l,e);return l=o(l,l.next),c=o(c,c.next),a(l,t,n,i,r,s),void a(c,t,n,i,r,s)}e=e.next}l=l.next}while(l!==e)}function h(e,t){return e.x-t.x}function d(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>a){if(a=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(i===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&v(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),S(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&f(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(e,t)){const n=M(t,e);o(t,t.next),o(n,n.next)}}function f(e,t){return y(e.prev,e,t.prev)<0&&y(t.next,e,e.next)<0}function p(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&x(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(S(e,t)&&S(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(y(e.prev,e,t.prev)||y(e,t.prev,t))||b(e,t)&&y(e.prev,e,e.next)>0&&y(t.prev,t,t.next)>0)}function y(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,n,i){const r=_(y(e,t,n)),o=_(y(e,t,i)),a=_(y(n,i,e)),s=_(y(n,i,t));return r!==o&&a!==s||(!(0!==r||!w(e,n,t))||(!(0!==o||!w(e,i,t))||(!(0!==a||!w(n,e,i))||!(0!==s||!w(n,t,i)))))}function w(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function S(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function M(e,t){const n=new C(e.i,e.x,e.y),i=new C(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function T(e,t,n,i){const r=new C(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}},function(e,t,n){
/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */
var i,r=n(278),o=n(279),a=n(280),s=n(282),l=n(283),c=n(284),u=!1,h=o();function d(e,t,n){var r=i.segments(e),o=i.segments(t),a=n(i.combine(r,o));return i.polygon(a)}i={buildLog:function(e){return!0===e?u=r():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return h.epsilon(e)},segments:function(e){var t=a(!0,h,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:a(!1,h,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,h,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(i,e)},polygonToGeoJSON:function(e){return c.fromPolygon(i,h,e)},union:function(e,t){return d(e,t,i.selectUnion)},intersect:function(e,t){return d(e,t,i.selectIntersect)},difference:function(e,t){return d(e,t,i.selectDifference)},differenceRev:function(e,t){return d(e,t,i.selectDifferenceRev)},xor:function(e,t){return d(e,t,i.selectXor)}},"object"==typeof window&&(window.PolyBool=i),e.exports=i},function(e,t){e.exports=function(){var e,t=0,n=!1;function i(t,n){return e.list.push({type:t,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return i("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return i("div_seg",{seg:e,pt:t}),i("chop",{seg:e,pt:t})},statusRemove:function(e){return i("pop_seg",{seg:e})},segmentUpdate:function(e){return i("seg_update",{seg:e})},segmentNew:function(e,t){return i("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return i("rem_seg",{seg:e})},tempStatus:function(e,t,n){return i("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return i("rewind",{seg:e})},status:function(e,t,n){return i("status",{seg:e,above:t,below:n})},vert:function(t){return t===n?e:(n=t,i("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),i("log",{txt:e})},reset:function(){return i("reset")},selected:function(e){return i("selected",{segs:e})},chainStart:function(e){return i("chain_start",{seg:e})},chainRemoveHead:function(e,t){return i("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return i("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return i("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return i("chain_match",{index:e})},chainClose:function(e){return i("chain_close",{index:e})},chainAddHead:function(e,t){return i("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return i("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return i("chain_con",{index1:e,index2:t})},chainReverse:function(e){return i("chain_rev",{index:e})},chainJoin:function(e,t){return i("chain_join",{index1:e,index2:t})},done:function(){return i("done")}}}},function(e,t){e.exports=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,i){var r=n[0],o=n[1],a=i[0],s=i[1],l=t[0];return(a-r)*(t[1]-o)-(s-o)*(l-r)>=-e},pointBetween:function(t,n,i){var r=t[1]-n[1],o=i[0]-n[0],a=t[0]-n[0],s=i[1]-n[1],l=a*o+r*s;return!(l<e)&&!(l-(o*o+s*s)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,i){var r=t[0]-n[0],o=t[1]-n[1],a=n[0]-i[0],s=n[1]-i[1];return Math.abs(r*s-a*o)<e},linesIntersect:function(t,n,i,r){var o=n[0]-t[0],a=n[1]-t[1],s=r[0]-i[0],l=r[1]-i[1],c=o*l-a*s;if(Math.abs(c)<e)return!1;var u=t[0]-i[0],h=t[1]-i[1],d=(s*h-l*u)/c,f=(o*h-a*u)/c,p={alongA:0,alongB:0,pt:[t[0]+d*o,t[1]+d*a]};return p.alongA=d<=-e?-2:d<e?-1:d-1<=-e?0:d-1<e?1:2,p.alongB=f<=-e?-2:f<e?-1:f-1<=-e?0:f-1<e?1:2,p},pointInsideRegion:function(t,n){for(var i=t[0],r=t[1],o=n[n.length-1][0],a=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-r>e!=a-r>e&&(o-c)*(r-u)/(a-u)+c-i>e&&(s=!s),o=c,a=u}return s}};return t}},function(e,t,n){var i=n(281);e.exports=function(e,t,n){function r(e,t,i){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var o=i.create();function a(e,n){o.insertBefore(e,(function(i){return function(e,n,i,r,o,a){var s=t.pointsCompare(n,o);return 0!==s?s:t.pointsSame(i,a)?0:e!==r?e?1:-1:t.pointAboveOrOnLine(i,r?o:a,r?a:o)?1:-1}(e.isStart,e.pt,n,i.isStart,i.pt,i.other.pt)<0}))}function s(e,t){var n=function(e,t){var n=i.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return a(n,e.end),n}(e,t);return function(e,t,n){var r=i.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=r,a(r,e.pt)}(n,e,t),n}function l(e,t){var i=r(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,a(e.other,e.pt)}(e,t),s(i,e.primary)}function c(r,a){var s=i.create();function c(e){return s.findTransition((function(n){var i,r,o,a,s,l;return(i=e,r=n.ev,o=i.seg.start,a=i.seg.end,s=r.seg.start,l=r.seg.end,t.pointsCollinear(o,s,l)?t.pointsCollinear(a,s,l)||t.pointAboveOrOnLine(a,s,l)?1:-1:t.pointAboveOrOnLine(o,s,l)?1:-1)>0}))}function u(e,i){var r=e.seg,o=i.seg,a=r.start,s=r.end,c=o.start,u=o.end;n&&n.checkIntersection(r,o);var h=t.linesIntersect(a,s,c,u);if(!1===h){if(!t.pointsCollinear(a,s,c))return!1;if(t.pointsSame(a,u)||t.pointsSame(s,c))return!1;var d=t.pointsSame(a,c),f=t.pointsSame(s,u);if(d&&f)return i;var p=!d&&t.pointBetween(a,c,u),m=!f&&t.pointBetween(s,c,u);if(d)return m?l(i,s):l(e,u),i;p&&(f||(m?l(i,s):l(e,u)),l(i,a))}else 0===h.alongA&&(-1===h.alongB?l(e,c):0===h.alongB?l(e,h.pt):1===h.alongB&&l(e,u)),0===h.alongB&&(-1===h.alongA?l(i,a):0===h.alongA?l(i,h.pt):1===h.alongA&&l(i,s));return!1}for(var h=[];!o.isEmpty();){var d=o.getHead();if(n&&n.vert(d.pt[0]),d.isStart){n&&n.segmentNew(d.seg,d.primary);var f=c(d),p=f.before?f.before.ev:null,m=f.after?f.after.ev:null;function v(){if(p){var e=u(d,p);if(e)return e}return!!m&&u(d,m)}n&&n.tempStatus(d.seg,!!p&&p.seg,!!m&&m.seg);var g,y=v();if(y){var b;if(e)(b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above);else y.seg.otherFill=d.seg.myFill;n&&n.segmentUpdate(y.seg),d.other.remove(),d.remove()}if(o.getHead()!==d){n&&n.rewind(d.seg);continue}if(e)b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=m?m.seg.myFill.above:r,d.seg.myFill.above=b?!d.seg.myFill.below:d.seg.myFill.below;else if(null===d.seg.otherFill)g=m?d.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:d.primary?a:r,d.seg.otherFill={above:g,below:g};n&&n.status(d.seg,!!p&&p.seg,!!m&&m.seg),d.other.status=f.insert(i.node({ev:d}))}else{var x=d.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!d.primary){var w=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=w}h.push(d.seg)}o.getHead().remove()}return n&&n.done(),h}return e?{addRegion:function(e){for(var i,r,o,a=e[e.length-1],l=0;l<e.length;l++){i=a,a=e[l];var c=t.pointsCompare(i,a);0!==c&&s((r=c<0?i:a,o=c<0?a:i,{id:n?n.segmentId():-1,start:r,end:o,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return c(e,!1)}}:{calculate:function(e,t,n,i){return e.forEach((function(e){s(r(e.start,e.end,e),!0)})),n.forEach((function(e){s(r(e.start,e.end,e),!1)})),c(t,i)}}}},function(e,t){e.exports={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var i=e.root,r=e.root.next;null!==r;){if(n(r))return t.prev=r.prev,t.next=r,r.prev.next=t,void(r.prev=t);i=r,r=r.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var n=e.root,i=e.root.next;null!==i&&!t(i);)n=i,i=i.next;return{before:n===e.root?null:n,after:i,insert:function(e){return e.prev=n,e.next=i,n.next=e,null!==i&&(i.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},function(e,t){e.exports=function(e,t,n){var i=[],r=[];return e.forEach((function(e){var o=e.start,a=e.end;if(t.pointsSame(o,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<i.length;u++){var h=(v=i[u])[0],d=(v[1],v[v.length-1]);v[v.length-2];if(t.pointsSame(h,o)){if(M(u,!0,!0))break}else if(t.pointsSame(h,a)){if(M(u,!0,!1))break}else if(t.pointsSame(d,o)){if(M(u,!1,!0))break}else if(t.pointsSame(d,a)&&M(u,!1,!1))break}if(c===s)return i.push([o,a]),void(n&&n.chainNew(o,a));if(c===l){n&&n.chainMatch(s.index);var f=s.index,p=s.matches_pt1?a:o,m=s.matches_head,v=i[f],g=m?v[0]:v[v.length-1],y=m?v[1]:v[v.length-2],b=m?v[v.length-1]:v[0],x=m?v[v.length-2]:v[1];return t.pointsCollinear(y,g,p)&&(m?(n&&n.chainRemoveHead(s.index,p),v.shift()):(n&&n.chainRemoveTail(s.index,p),v.pop()),g=y),t.pointsSame(b,p)?(i.splice(f,1),t.pointsCollinear(x,b,g)&&(m?(n&&n.chainRemoveTail(s.index,g),v.pop()):(n&&n.chainRemoveHead(s.index,g),v.shift())),n&&n.chainClose(s.index),void r.push(v)):void(m?(n&&n.chainAddHead(s.index,p),v.unshift(p)):(n&&n.chainAddTail(s.index,p),v.push(p)))}var w=s.index,_=l.index;n&&n.chainConnect(w,_);var S=i[w].length<i[_].length;s.matches_head?l.matches_head?S?(T(w),E(w,_)):(T(_),E(_,w)):E(_,w):l.matches_head?E(w,_):S?(T(w),E(_,w)):(T(_),E(w,_))}function M(e,t,n){return c.index=e,c.matches_head=t,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function T(e){n&&n.chainReverse(e),i[e].reverse()}function E(e,r){var o=i[e],a=i[r],s=o[o.length-1],l=o[o.length-2],c=a[0],u=a[1];t.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(e,s),o.pop(),s=l),t.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(r,c),a.shift()),n&&n.chainJoin(e,r),i[e]=o.concat(a),i.splice(r,1)}})),r}},function(e,t){function n(e,t,n){var i=[];return e.forEach((function(e){var r=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[r]&&i.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[r],below:2===t[r]},otherFill:null})})),n&&n.selected(i),i}var i={union:function(e,t){return n(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return n(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return n(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return n(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return n(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};e.exports=i},function(e,t){var n={toPolygon:function(e,t){function n(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var i=n(t[0]),r=1;r<t.length;r++)i=e.selectDifference(e.combine(i,n(t[r])));return i}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var i=e.segments({inverted:!1,regions:[]}),r=0;r<t.coordinates.length;r++)i=e.selectUnion(e.combine(i,n(t.coordinates[r])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function i(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function r(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var o=r(null);function a(e,t){for(var n=0;n<e.children.length;n++){if(i(t,(s=e.children[n]).region))return void a(s,t)}var o=r(t);for(n=0;n<e.children.length;n++){var s;i((s=e.children[n]).region,t)&&(o.children.push(s),e.children.splice(n,1),n--)}e.children.push(o)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||a(o,l)}function c(e,t){for(var n=0,i=e[e.length-1][0],r=e[e.length-1][1],o=[],a=0;a<e.length;a++){var s=e[a][0],l=e[a][1];o.push([s,l]),n+=l*i-s*r,i=s,r=l}return n<0!==t&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var u=[];function h(e){var t=[c(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(d(e.children[n]))}function d(e){for(var t=0;t<e.children.length;t++)h(e.children[t]);return c(e.region,!0)}for(s=0;s<o.children.length;s++)h(o.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=n},function(e,t,n){!function(e){"use strict";var t=i,n=i;function i(e,t,n){n=n||2;var i,s,l,c,u,f,m,v=t&&t.length,g=v?t[0]*n:e.length,y=r(e,0,g,n,!0),b=[];if(!y)return b;if(v&&(y=function(e,t,n,i){var a,s,l,c,u,f=[];for(a=0,s=t.length;a<s;a++)l=t[a]*i,c=a<s-1?t[a+1]*i:e.length,(u=r(e,l,c,i,!1))===u.next&&(u.steiner=!0),f.push(p(u));for(f.sort(h),a=0;a<f.length;a++)d(f[a],n),n=o(n,n.next);return n}(e,t,y,n)),e.length>80*n){i=l=e[0],s=c=e[1];for(var x=n;x<g;x+=n)(u=e[x])<i&&(i=u),(f=e[x+1])<s&&(s=f),u>l&&(l=u),f>c&&(c=f);m=0!==(m=Math.max(l-i,c-s))?1/m:0}return a(y,b,n,i,s,m),b}function r(e,t,n,i,r){var o,a;if(r===T(e,t,n,i)>0)for(o=t;o<n;o+=i)a=_(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=_(o,e[o],e[o+1],a);return a&&y(a,a.next)&&(S(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!y(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(S(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function a(e,t,n,i,r,h,d){if(e){!d&&h&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=f(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,h);for(var p,m,v=e;e.prev!==e.next;)if(p=e.prev,m=e.next,h?l(e,i,r,h):s(e))t.push(p.i/n),t.push(e.i/n),t.push(m.i/n),S(e),e=m.next,v=m.next;else if((e=m)===v){d?1===d?a(e=c(e,t,n),t,n,i,r,h,2):2===d&&u(e,t,n,i,r,h):a(o(e),t,n,i,r,h,1);break}}}function s(e){var t=e.prev,n=e,i=e.next;if(g(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(m(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(e,t,n,i){var r=e.prev,o=e,a=e.next;if(g(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=f(s,l,t,n,i),d=f(c,u,t,n,i),p=e.prevZ,v=e.nextZ;p&&p.z>=h&&v&&v.z<=d;){if(p!==e.prev&&p!==e.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==e.prev&&v!==e.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=d;){if(v!==e.prev&&v!==e.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!y(r,o)&&b(r,i,i.next,o)&&x(r,o)&&x(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),S(i),S(i.next),i=e=o),i=i.next}while(i!==e);return i}function u(e,t,n,i,r,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&v(l,c)){var u=w(l,c);return l=o(l,l.next),u=o(u,u.next),a(l,t,n,i,r,s),void a(u,t,n,i,r,s)}c=c.next}l=l.next}while(l!==e)}function h(e,t){return e.x-t.x}function d(e,t){if(t=function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n.prev;var l,c=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=u&&r!==i.x&&m(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&x(i,e)&&(n=i,d=l),i=i.next;return n}(e,t)){var n=w(t,e);o(n,n.next)}}function f(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function m(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&x(e,t)&&x(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,i){return!!(y(e,t)&&y(n,i)||y(e,i)&&y(n,t))||g(e,t,n)>0!=g(e,t,i)>0&&g(n,i,e)>0!=g(n,i,t)>0}function x(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var n=new M(e.i,e.x,e.y),i=new M(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function _(e,t,n,i){var r=new M(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}function E(e,t,n){var i=t[0],r=t[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((e[0]-i)*o+(e[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return(o=e[0]-i)*o+(a=e[1]-r)*a}function C(e,t){var n=e.length-1,i=[e[0]];return function e(t,n,i,r,o){for(var a,s=r,l=n+1;l<i;l++){var c=E(t[l],t[n],t[i]);c>s&&(a=l,s=c)}s>r&&(a-n>1&&e(t,n,a,r,o),o.push(t[a]),i-a>1&&e(t,a,i,r,o))}(e,0,n,t,i),i.push(e[n]),i}function A(e,t,n){if(e.length<=2)return e;var i=void 0!==t?t*t:1;return e=C(e=n?e:function(e,t){for(var n,i,r,o,a,s=e[0],l=[s],c=1,u=e.length;c<u;c++)n=e[c],r=s,o=void 0,a=void 0,o=(i=n)[0]-r[0],a=i[1]-r[1],o*o+a*a>t&&(l.push(n),s=n);return s!==n&&l.push(n),l}(e,i),i)}function O(e,t){return e[0]*t[0]+e[1]*t[1]}function L(e,t){const n=t[0],i=t[1],r=Math.sqrt(n*n+i*i);return e[0]=n/r,e[1]=i/r,e}function k(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function P(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function D(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function I(e,t){const n=t[0],i=t[1],r=t[2],o=Math.sqrt(n*n+i*i+r*r);return e[0]=n/o,e[1]=i/o,e[2]=r/o,e}function N(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=r*l-o*s,e[1]=o*a-i*l,e[2]=i*s-r*a,e}i.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,a=Math.abs(T(e,0,o,n));if(r)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,u=s<l-1?t[s+1]*n:e.length;a-=Math.abs(T(e,c,u,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,f=i[s+1]*n,p=i[s+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},i.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[r][o][a]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n},t.default=n;const F=[];function R(e,t,n,i){const r=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(t,n),o=Math.acos(r)*i;return k(F,n,t,-r),function(e,t){const n=t[0],i=t[1],r=t[2],o=Math.sqrt(n*n+i*i+r*r);e[0]=n/o,e[1]=i/o,e[2]=r/o}(F,F),function(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}(e,t,Math.cos(o)),k(e,e,F,Math.sin(o)),e}function B(e,t,n){if(n-t<3)return 0;let i=0;for(let r=2*(n-1),o=2*t;o<2*n;){const t=e[r],n=e[r+1],a=e[o],s=e[o+1];r=o,o+=2,i+=t*s-a*n}return i}function j(e,n,i=2){return t(e,n,i)}const z=[],U=[],V=[];function G(e,t,n,i,r,o,a,s){const l=null!=a;let c=r,u=null;l&&(u=new Uint32Array(i-n));for(let r=n;r<i;r++){const h=r===i-1?n:r+1,d=r===n?i-1:r-1,f=e[2*d],p=e[2*d+1],m=e[2*r],v=e[2*r+1],g=e[2*h],y=e[2*h+1];if(z[0]=m-f,z[1]=v-p,U[0]=g-m,U[1]=y-v,L(z,z),L(U,U),l&&(u[r]=c),s||r!==n)if(s||r!==i-1){P(V,U,z);const e=V[1];V[1]=-V[0],V[0]=e,L(V,V);const n=O(V,U),i=Math.sqrt(1-n*n),r=o*Math.min(10,1/i),s=o*n<0;if(l&&1/i>a&&s){const e=m+V[0]*o,n=v+V[1]*o,r=Math.acos(i)/2,a=Math.tan(r)*Math.abs(o);t[2*c]=e+V[1]*a,t[2*c+1]=n-V[0]*a,c++,t[2*c]=e-V[1]*a,t[2*c+1]=n+V[0]*a,c++}else t[2*c]=m+V[0]*r,t[2*c+1]=v+V[1]*r,c++}else V[0]=z[1],V[1]=-z[0],L(V,V),t[2*c]=m+V[0]*o,t[2*c+1]=v+V[1]*o,c++;else V[0]=U[1],V[1]=-U[0],L(V,V),t[2*c]=m+V[0]*o,t[2*c+1]=v+V[1]*o,c++}return u}function H(e,t,n,i,r){const o=null!=i?[]:new Float32Array(e.length);if(G(e,o,0,t&&t.length?t[0]:e.length/2,0,n,i,r),t)for(let a=0;a<t.length;a++){const s=t[a];G(e,o,s,t[a+1]||e.length/2,null!=i?o.length/2:s,n,i,r)}return o}function W(e,t,n,i){for(let r=0;r<Math.floor((i-n)/2);r++)for(let o=0;o<t;o++){const a=(r+n)*t+o,s=(i-r-1)*t+o,l=e[a];e[a]=e[s],e[s]=l}return e}function q(e,t){let n=e.length/2,i=0,r=t&&t.length?t[0]:n;B(e,i,r)>0&&W(e,2,i,r);for(let o=1;o<(t?t.length:0)+1;o++)i=t[o-1],r=t[o]||n,B(e,i,r)<0&&W(e,2,i,r)}function Y(e){e.depth=e.depth||1,e.bevelSize=e.bevelSize||0,e.bevelSegments=null==e.bevelSegments?2:e.bevelSegments,e.smoothSide=e.smoothSide||!1,e.smoothBevel=e.smoothBevel||!1,e.simplify=e.simplify||0,"number"==typeof e.depth&&(e.bevelSize=Math.min(e.bevelSegments>0?e.bevelSize:0,e.depth/2)),e.bevelSize>0||(e.bevelSegments=0),e.bevelSegments=Math.round(e.bevelSegments);const t=e.boundingRect;if(e.translate=e.translate||[0,0],e.scale=e.scale||[1,1],e.fitRect){let n=null==e.fitRect.x?t.x||0:e.fitRect.x,i=null==e.fitRect.y?t.y||0:e.fitRect.y,r=e.fitRect.width,o=e.fitRect.height;null==r?null!=o?r=o/t.height*t.width:(r=t.width,o=t.height):null==o&&(o=r/t.width*t.height),e.scale=[r/t.width,o/t.height],e.translate=[(n-t.x)*e.scale[0],(i-t.y)*e.scale[1]]}}const $=[[0,0],[1,0],[1,1],[0,0],[1,1],[0,1]];function X(e,{vertices:t,topVertices:n,depth:i,rect:r},o,a,s,l){const c=a-o,u=l.smoothSide?1:2,h=c*u,d=l.smoothBevel?1:2,f=Math.min(i/2,l.bevelSize),p=l.bevelSegments,m=s.vertex,v=Math.max(r.width,r.height);if(f>0){const r=[0,0,1],a=[],l=[0,0,-1],g=[];let y=0,b=new Float32Array(c);for(let x=0;x<2;x++){const w=0===x?i-f:f;for(let i=0;i<=p*d;i++){let _,S,M=0;for(let T=0;T<c;T++){for(let m=0;m<u;m++){let u=2*((T+m)%c+o);a[0]=t[u]-n[u],a[1]=t[u+1]-n[u+1],a[2]=0;const y=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=y,a[1]/=y;const E=(Math.floor(i/d)+i%d)/p;0===x?R(g,r,a,E):R(g,a,l,E);const C=0===x?E:1-E,A=f*Math.sin(C*Math.PI/2),O=y*Math.cos(C*Math.PI/2),L=f*y/Math.sqrt(A*A+O*O),k=g[0]*L+n[u],P=g[1]*L+n[u+1],D=g[2]*L+w;if(e.position[3*s.vertex]=k,e.position[3*s.vertex+1]=P,e.position[3*s.vertex+2]=D,(T>0||m>0)&&(M+=Math.sqrt((_-k)*(_-k)+(S-P)*(S-P))),i>0||x>0){let t=3*(s.vertex-h),n=e.position[t],i=e.position[t+1],r=e.position[t+2];b[T]+=Math.sqrt((n-k)*(n-k)+(i-P)*(i-P)+(r-D)*(r-D))}e.uv[2*s.vertex]=M/v,e.uv[2*s.vertex+1]=b[T]/v,_=k,S=P,s.vertex++}if(d>1&&i%d||1===d&&i>=1)for(let t=0;t<6;t++){const n=($[t][0]+T*u)%h,i=$[t][1]+y;e.indices[s.index++]=(i-1)*h+n+m}}y++}}}else for(let n=0;n<2;n++){const r=0===n?i-f:f;let a,l,h=0;for(let n=0;n<c;n++)for(let i=0;i<u;i++){const u=2*((n+i)%c+o),d=t[u],f=t[u+1];e.position[3*s.vertex]=d,e.position[3*s.vertex+1]=f,e.position[3*s.vertex+2]=r,(n>0||i>0)&&(h+=Math.sqrt((a-d)*(a-d)+(l-f)*(l-f))),e.uv[2*s.vertex]=h/v,e.uv[2*s.vertex+1]=r/v,a=d,l=f,s.vertex++}}const g=f>0?p*d+1:1;for(let t=0;t<c;t++)for(let n=0;n<6;n++){const i=($[n][0]+t*u)%h,r=$[n][1]+g;e.indices[s.index++]=(r-1)*h+i+m}}function Q({indices:e,vertices:t,topVertices:n,rect:i,depth:r},o,a,s){if(t.length<=4)return;const l=a.vertex,c=e.length;for(let t=0;t<c;t++)o.indices[a.index++]=l+e[t];const u=Math.max(i.width,i.height);for(let e=0;e<(s.excludeBottom?1:2);e++)for(let t=0;t<n.length;t+=2){const s=n[t],l=n[t+1];o.position[3*a.vertex]=s,o.position[3*a.vertex+1]=l,o.position[3*a.vertex+2]=(1-e)*r,o.uv[2*a.vertex]=(s-i.x)/u,o.uv[2*a.vertex+1]=(l-i.y)/u,a.vertex++}if(!s.excludeBottom){const n=t.length/2;for(let t=0;t<c;t+=3)for(let i=0;i<3;i++)o.indices[a.index++]=l+n+e[t+2-i]}}function K(e,t){let n=0,i=0;for(let r=0;r<e.length;r++){const{indices:o,vertices:a,holes:s,depth:l}=e[r],c=a.length/2,u=Math.min(l/2,t.bevelSize)>0?t.bevelSegments:0;n+=o.length*(t.excludeBottom?1:2),i+=c*(t.excludeBottom?1:2);const h=2+2*u;let d=0,f=0;for(let e=0;e<(s?s.length:0)+1;e++){0===e?f=s&&s.length?s[0]:c:(d=s[e-1],f=s[e]||c),n+=6*(f-d)*(h-1);const r=(f-d)*(t.smoothSide?1:2);i+=r*h+(t.smoothBevel?0:u*r*2)}}const r={position:new Float32Array(3*i),indices:new(i>65535?Uint32Array:Uint16Array)(n),uv:new Float32Array(2*i)},o={vertex:0,index:0};for(let n=0;n<e.length;n++)Q(e[n],r,o,t);for(let n=0;n<e.length;n++){const{holes:i,vertices:a}=e[n],s=a.length/2;let l=0,c=i&&i.length?i[0]:s;if(X(r,e[n],l,c,o,t),i)for(let a=0;a<i.length;a++)l=i[a],c=i[a+1]||s,X(r,e[n],l,c,o,t)}for(let e=0;e<r.uv.length;e++){const t=r.uv[e];t>0&&Math.round(t)===t?r.uv[e]=1:r.uv[e]=t%1}return r.normal=function(e,t){function n(e,t,n,i){e[0]=t,e[1]=n,e[2]=i}const i=[],r=[],o=[],a=[],s=[],l=[],c=e.length,u=new Float32Array(t.length);for(let h=0;h<c;){const c=3*e[h++],d=3*e[h++],f=3*e[h++];n(i,t[c],t[c+1],t[c+2]),n(r,t[d],t[d+1],t[d+2]),n(o,t[f],t[f+1],t[f+2]),D(a,i,r),D(s,r,o),N(l,a,s);for(let e=0;e<3;e++)u[c+e]=u[c+e]+l[e],u[d+e]=u[d+e]+l[e],u[f+e]=u[f+e]+l[e]}for(var h=0;h<u.length;)n(l,u[h],u[h+1],u[h+2]),I(l,l),u[h++]=l[0],u[h++]=l[1],u[h++]=l[2];return u}(r.indices,r.position),r.boundingRect=e[0]&&e[0].rect,r}function J(e,t,n){const i=n.lineWidth,r=e.length,o=new Float32Array(2*r),a=n.translate||[0,0],s=n.scale||[1,1];for(let t=0,n=0;t<r;t++)o[n++]=e[t][0]*s[0]+a[0],o[n++]=e[t][1]*s[1]+a[1];B(o,0,r)<0&&W(o,2,0,r);const l=[],c=[],u=n.miterLimit,h=G(o,c,0,r,0,-i/2,u,!1);W(o,2,0,r);const d=G(o,l,0,r,0,-i/2,u,!1),f=(l.length+c.length)/2,p=new Float32Array(2*f);let m=0;const v=c.length/2;for(let e=0;e<c.length;e++)p[m++]=c[e];for(let e=0;e<l.length;e++)p[m++]=l[e];const g=new(f>65535?Uint32Array:Uint16Array)(3*(2*(r-1)+(f-2*r)));let y=0;for(let e=0;e<r-1;e++){const t=e+1;g[y++]=v-1-h[e],g[y++]=v-1-h[e]-1,g[y++]=d[e]+1+v,g[y++]=v-1-h[e],g[y++]=d[e]+1+v,g[y++]=d[e]+v,d[t]-d[e]==2?(g[y++]=d[e]+2+v,g[y++]=d[e]+1+v,g[y++]=v-h[t]-1):h[t]-h[e]==2&&(g[y++]=d[t]+v,g[y++]=v-1-(h[e]+1),g[y++]=v-1-(h[e]+2))}const b=n.bevelSize>0?H(p,[],n.bevelSize,null,!0):p,x=n.boundingRect;return{vertices:p,indices:g,topVertices:b,rect:{x:x.x*s[0]+a[0],y:x.y*s[1]+a[1],width:x.width*s[0],height:x.height*s[1]},depth:"function"==typeof n.depth?n.depth(t):n.depth,holes:[]}}function Z(e,t){const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=[],a=r.length;let s=r[a-1][0],l=r[a-1][1],c=0;for(let e=0;e<a;e++){let n=r[e][0],i=r[e][1];const a=n-s,u=i-l;c+=Math.sqrt(a*a+u*u),c>t&&(o.push(r[e]),c=0),s=n,l=i}o.length>=3&&n.push(o)}return n.length>0?n:null}function ee(e,t){const n=[];for(let i=0;i<e.length;i++){let r=e[i];r=A(r,t,!0),r.length>=3&&n.push(r)}return n.length>0?n:null}function te(e,n){n=Object.assign({},n);const i=[1/0,1/0],r=[-1/0,-1/0];for(let t=0;t<e.length;t++)ie(e[t][0],i,r);n.boundingRect=n.boundingRect||{x:i[0],y:i[1],width:r[0]-i[0],height:r[1]-i[1]},Y(n);const o=[],a=n.translate||[0,0],s=n.scale||[1,1],l=n.boundingRect,c={x:l.x*s[0]+a[0],y:l.y*s[1]+a[1],width:l.width*s[0],height:l.height*s[1]},u=Math.min(l.width,l.height)/1e5;for(let i=0;i<e.length;i++){let r=Z(e[i],u);if(!r)continue;const l=n.simplify/Math.max(s[0],s[1]);if(l>0&&(r=ee(r,l)),!r)continue;const{vertices:h,holes:d,dimensions:f}=t.flatten(r);for(let e=0;e<h.length;)h[e]=h[e++]*s[0]+a[0],h[e]=h[e++]*s[1]+a[1];if(q(h,d),2!==f)throw new Error("Only 2D polygon points are supported");const p=n.bevelSize>0?H(h,d,n.bevelSize,null,!0):h,m=j(p,d,f);o.push({indices:m,vertices:h,topVertices:p,holes:d,rect:c,depth:"function"==typeof n.depth?n.depth(i):n.depth})}return K(o,n)}function ne(e,t){t=Object.assign({},t);const n=[1/0,1/0],i=[-1/0,-1/0];for(let t=0;t<e.length;t++)ie(e[t],n,i);t.boundingRect=t.boundingRect||{x:n[0],y:n[1],width:i[0]-n[0],height:i[1]-n[1]},Y(t);const r=t.scale||[1,1];null==t.lineWidth&&(t.lineWidth=1),null==t.miterLimit&&(t.miterLimit=2);const o=[];for(let n=0;n<e.length;n++){let i=e[n];const a=t.simplify/Math.max(r[0],r[1]);a>0&&(i=A(i,a,!0)),o.push(J(i,n,t))}return K(o,t)}function ie(e,t,n){for(let i=0;i<e.length;i++)t[0]=Math.min(e[i][0],t[0]),t[1]=Math.min(e[i][1],t[1]),n[0]=Math.max(e[i][0],n[0]),n[1]=Math.max(e[i][1],n[1])}e.triangulate=j,e.flatten=function(e){return t.flatten(e)},e.offsetPolygon=H,e.extrudePolygon=te,e.extrudePolyline=ne,e.extrudeGeoJSON=function(e,t){t=Object.assign({},t);const n=[],i=[],r=[],o=[],a=[1/0,1/0],s=[-1/0,-1/0];for(let t=0;t<e.features.length;t++){const l=e.features[t].geometry;if(l&&l.coordinates)switch(l.type){case"LineString":n.push(l.coordinates),r.push(t),ie(l.coordinates,a,s);break;case"MultiLineString":for(let e=0;e<l.coordinates.length;e++)n.push(l.coordinates[e]),r.push(t),ie(l.coordinates[e],a,s);break;case"Polygon":i.push(l.coordinates),o.push(t),ie(l.coordinates[0],a,s);break;case"MultiPolygon":for(let e=0;e<l.coordinates.length;e++)i.push(l.coordinates[e]),o.push(t),ie(l.coordinates[e][0],a,s)}}t.boundingRect=t.boundingRect||{x:a[0],y:a[1],width:s[0]-a[0],height:s[1]-a[1]};const l=t.depth;return{polyline:ne(n,Object.assign(t,{depth:function(t){return"function"==typeof l?l(e.features[r[t]]):l}})),polygon:te(i,Object.assign(t,{depth:function(t){return"function"==typeof l?l(e.features[o[t]]):l}}))}},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";function i(e,t,n){n=n||2;var i,s,l,c,u,f,p,v=t&&t.length,g=v?t[0]*n:e.length,y=r(e,0,g,n,!0),b=[];if(!y||y.next===y.prev)return b;if(v&&(y=function(e,t,n,i){var a,s,l,c,u,f=[];for(a=0,s=t.length;a<s;a++)l=t[a]*i,c=a<s-1?t[a+1]*i:e.length,(u=r(e,l,c,i,!1))===u.next&&(u.steiner=!0),f.push(m(u));for(f.sort(h),a=0;a<f.length;a++)n=o(n=d(f[a],n),n.next);return n}(e,t,y,n)),e.length>80*n){i=l=e[0],s=c=e[1];for(var x=n;x<g;x+=n)(u=e[x])<i&&(i=u),(f=e[x+1])<s&&(s=f),u>l&&(l=u),f>c&&(c=f);p=0!==(p=Math.max(l-i,c-s))?1/p:0}return a(y,b,n,i,s,p),b}function r(e,t,n,i,r){var o,a;if(r===A(e,t,n,i)>0)for(o=t;o<n;o+=i)a=T(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=T(o,e[o],e[o+1],a);return a&&b(a,a.next)&&(E(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!b(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(E(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function a(e,t,n,i,r,h,d){if(e){!d&&h&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=p(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,h);for(var f,m,v=e;e.prev!==e.next;)if(f=e.prev,m=e.next,h?l(e,i,r,h):s(e))t.push(f.i/n),t.push(e.i/n),t.push(m.i/n),E(e),e=m.next,v=m.next;else if((e=m)===v){d?1===d?a(e=c(o(e),t,n),t,n,i,r,h,2):2===d&&u(e,t,n,i,r,h):a(o(e),t,n,i,r,h,1);break}}}function s(e){var t=e.prev,n=e,i=e.next;if(y(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(v(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(e,t,n,i){var r=e.prev,o=e,a=e.next;if(y(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=p(s,l,t,n,i),d=p(c,u,t,n,i),f=e.prevZ,m=e.nextZ;f&&f.z>=h&&m&&m.z<=d;){if(f!==e.prev&&f!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,m!==e.prev&&m!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=d;){if(m!==e.prev&&m!==e.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!b(r,a)&&x(r,i,i.next,a)&&S(r,a)&&S(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),E(i),E(i.next),i=e=a),i=i.next}while(i!==e);return o(i)}function u(e,t,n,i,r,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=M(l,c);return l=o(l,l.next),u=o(u,u.next),a(l,t,n,i,r,s),void a(u,t,n,i,r,s)}c=c.next}l=l.next}while(l!==e)}function h(e,t){return e.x-t.x}function d(e,t){var n=function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n;var l,c=n,u=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&v(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),S(i,e)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&f(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(e,t);if(!n)return t;var i=M(n,e),r=o(n,n.next);return o(i,i.next),t===n?r:t}function f(e,t){return y(e.prev,e,t.prev)<0&&y(t.next,e,e.next)<0}function p(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&x(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(S(e,t)&&S(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(y(e.prev,e,t.prev)||y(e,t.prev,t))||b(e,t)&&y(e.prev,e,e.next)>0&&y(t.prev,t,t.next)>0)}function y(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,n,i){var r=_(y(e,t,n)),o=_(y(e,t,i)),a=_(y(n,i,e)),s=_(y(n,i,t));return r!==o&&a!==s||(!(0!==r||!w(e,n,t))||(!(0!==o||!w(e,i,t))||(!(0!==a||!w(n,e,i))||!(0!==s||!w(n,t,i)))))}function w(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function S(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function M(e,t){var n=new C(e.i,e.x,e.y),i=new C(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function T(e,t,n,i){var r=new C(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}e.exports=i,e.exports.default=i,i.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,a=Math.abs(A(e,0,o,n));if(r)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,u=s<l-1?t[s+1]*n:e.length;a-=Math.abs(A(e,c,u,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,f=i[s+1]*n,p=i[s+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},i.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[r][o][a]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n}},function(e,t,n){"use strict";n.r(t),n.d(t,"SkeletonUtils",(function(){return v}));var i,r,o,a,s,l,c,u,h,d,f,p,m=n(0),v={retarget:(c=new m.Vector3,u=new m.Quaternion,h=new m.Vector3,d=new m.Matrix4,f=new m.Matrix4,p=new m.Matrix4,function(e,t,n){(n=n||{}).preserveMatrix=void 0===n.preserveMatrix||n.preserveMatrix,n.preservePosition=void 0===n.preservePosition||n.preservePosition,n.preserveHipPosition=void 0!==n.preserveHipPosition&&n.preserveHipPosition,n.useTargetMatrix=void 0!==n.useTargetMatrix&&n.useTargetMatrix,n.hip=void 0!==n.hip?n.hip:"hip",n.names=n.names||{};var i,r,o,a,s,l,m=t.isObject3D?t.skeleton.bones:this.getBones(t),v=e.isObject3D?e.skeleton.bones:this.getBones(e);if(e.isObject3D?e.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition)for(s=[],l=0;l<v.length;l++)s.push(v[l].position.clone());if(n.preserveMatrix)for(e.updateMatrixWorld(),e.matrixWorld.identity(),l=0;l<e.children.length;++l)e.children[l].updateMatrixWorld(!0);if(n.offsets)for(i=[],l=0;l<v.length;++l)r=v[l],o=n.names[r.name]||r.name,n.offsets&&n.offsets[o]&&(r.matrix.multiply(n.offsets[o]),r.matrix.decompose(r.position,r.quaternion,r.scale),r.updateMatrixWorld()),i.push(r.matrixWorld.clone());for(l=0;l<v.length;++l){if(r=v[l],o=n.names[r.name]||r.name,a=this.getBoneByName(o,m),p.copy(r.matrixWorld),a){if(a.updateMatrixWorld(),n.useTargetMatrix?f.copy(a.matrixWorld):(f.getInverse(e.matrixWorld),f.multiply(a.matrixWorld)),h.setFromMatrixScale(f),f.scale(h.set(1/h.x,1/h.y,1/h.z)),p.makeRotationFromQuaternion(u.setFromRotationMatrix(f)),e.isObject3D){var g=v.indexOf(r),y=i?i[g]:d.getInverse(e.skeleton.boneInverses[g]);p.multiply(y)}p.copyPosition(f)}r.parent&&r.parent.isBone?(r.matrix.getInverse(r.parent.matrixWorld),r.matrix.multiply(p)):r.matrix.copy(p),n.preserveHipPosition&&o===n.hip&&r.matrix.setPosition(c.set(0,r.position.y,0)),r.matrix.decompose(r.position,r.quaternion,r.scale),r.updateMatrixWorld()}if(n.preservePosition)for(l=0;l<v.length;++l)r=v[l],(o=n.names[r.name]||r.name)!==n.hip&&r.position.copy(s[l]);n.preserveMatrix&&e.updateMatrixWorld(!0)}),retargetClip:function(e,t,n,i){(i=i||{}).useFirstFramePosition=void 0!==i.useFirstFramePosition&&i.useFirstFramePosition,i.fps=void 0!==i.fps?i.fps:30,i.names=i.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));var r,o,a,s,l,c,u=Math.round(n.duration*(i.fps/1e3)*1e3),h=1/i.fps,d=[],f=new m.AnimationMixer(t),p=this.getBones(e.skeleton),v=[];for(f.clipAction(n).play(),f.update(0),t.updateMatrixWorld(),l=0;l<u;++l){var g=l*h;for(this.retarget(e,t,i),c=0;c<p.length;++c)s=i.names[p[c].name]||p[c].name,this.getBoneByName(s,t.skeleton)&&(o=p[c],a=v[c]=v[c]||{bone:o},i.hip===s&&(a.pos||(a.pos={times:new Float32Array(u),values:new Float32Array(3*u)}),i.useFirstFramePosition&&(0===l&&(r=o.position.clone()),o.position.sub(r)),a.pos.times[l]=g,o.position.toArray(a.pos.values,3*l)),a.quat||(a.quat={times:new Float32Array(u),values:new Float32Array(4*u)}),a.quat.times[l]=g,o.quaternion.toArray(a.quat.values,4*l));f.update(h),t.updateMatrixWorld()}for(l=0;l<v.length;++l)(a=v[l])&&(a.pos&&d.push(new m.VectorKeyframeTrack(".bones["+a.bone.name+"].position",a.pos.times,a.pos.values)),d.push(new m.QuaternionKeyframeTrack(".bones["+a.bone.name+"].quaternion",a.quat.times,a.quat.values)));return f.uncacheAction(n),new m.AnimationClip(n.name,-1,d)},getHelperFromSkeleton:function(e){var t=new m.SkeletonHelper(e.bones[0]);return t.skeleton=e,t},getSkeletonOffsets:(i=new m.Vector3,r=new m.Vector3,o=new m.Vector3,a=new m.Vector3,s=new m.Vector2,l=new m.Vector2,function(e,t,n){(n=n||{}).hip=void 0!==n.hip?n.hip:"hip",n.names=n.names||{},t.isObject3D||(t=this.getHelperFromSkeleton(t));var c,u,h,d,f=Object.keys(n.names),p=Object.values(n.names),v=t.isObject3D?t.skeleton.bones:this.getBones(t),g=e.isObject3D?e.skeleton.bones:this.getBones(e),y=[];for(e.skeleton.pose(),d=0;d<g.length;++d)if(c=g[d],h=n.names[c.name]||c.name,(u=this.getBoneByName(h,v))&&h!==n.hip){var b=this.getNearestBone(c.parent,f),x=this.getNearestBone(u.parent,p);b.updateMatrixWorld(),x.updateMatrixWorld(),i.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(c.matrixWorld),o.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(u.matrixWorld),s.subVectors(new m.Vector2(r.x,r.y),new m.Vector2(i.x,i.y)).normalize(),l.subVectors(new m.Vector2(a.x,a.y),new m.Vector2(o.x,o.y)).normalize();var w=s.angle()-l.angle(),_=(new m.Matrix4).makeRotationFromEuler(new m.Euler(0,0,w));c.matrix.multiply(_),c.matrix.decompose(c.position,c.quaternion,c.scale),c.updateMatrixWorld(),y[h]=_}return y}),renameBones:function(e,t){for(var n=this.getBones(e),i=0;i<n.length;++i){var r=n[i];t[r.name]&&(r.name=t[r.name])}return this},getBones:function(e){return Array.isArray(e)?e:e.bones},getBoneByName:function(e,t){for(var n=0,i=this.getBones(t);n<i.length;n++)if(e===i[n].name)return i[n]},getNearestBone:function(e,t){for(;e.isBone;){if(-1!==t.indexOf(e.name))return e;e=e.parent}},findBoneTrackData:function(e,t){for(var n=/\[(.*)\]\.(.*)/,i={name:e},r=0;r<t.length;++r){var o=n.exec(t[r].name);o&&e===o[1]&&(i[o[2]]=r)}return i},getEqualsBonesNames:function(e,t){var n=this.getBones(e),i=this.getBones(t),r=[];e:for(var o=0;o<n.length;o++)for(var a=n[o].name,s=0;s<i.length;s++)if(a===i[s].name){r.push(a);continue e}return r},clone:function(e){var t=new Map,n=new Map,i=e.clone();return function e(t,n,i){i(t,n);for(var r=0;r<t.children.length;r++)e(t.children[r],n.children[r],i)}(e,i,(function(e,i){t.set(i,e),n.set(e,i)})),i.traverse((function(e){if(e.isSkinnedMesh){var i=e,r=t.get(e),o=r.skeleton.bones;i.skeleton=r.skeleton.clone(),i.bindMatrix.copy(r.bindMatrix),i.skeleton.bones=o.map((function(e){return n.get(e)})),i.bind(i.skeleton,i.bindMatrix)}})),i}}},function(e,t,n){(function(t){e.exports=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return r(n||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var o=!1,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,n,i){(function(e){"use strict";var t,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,a=new r(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,t=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}n.exports=function(e){1!==c.push(e)||i||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){i((function(){var i;try{i=t(n)}catch(t){return o.reject(e,t)}i===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,i)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function i(t){n||(n=!0,o.reject(e,t))}function r(t){n||(n=!0,o.resolve(e,t))}var a=p((function(){t(r,i)}));"error"===a.status&&i(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(r);return this.state!==l?h(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);var i=n.value;if(i)f(e,i);else{e.state=s,e.outcome=t;for(var r=-1,a=e.queue.length;++r<a;)e.queue[r].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,c=new this(r);++l<n;)u(e[l],l);return c;function u(e,r){t.resolve(e).then((function(e){a[r]=e,++s!==n||i||(i=!0,o.resolve(c,a))}),(function(e){i||(i=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(r);++s<n;)a=e[s],t.resolve(a).then((function(e){i||(i=!0,o.resolve(l,e))}),(function(e){i||(i=!0,o.reject(l,e))}));return l}},{1:1}],3:[function(e,n,i){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h=void 0,d={},f=Object.prototype.toString;function p(e){return"boolean"==typeof h?a.resolve(h):function(e){return new a((function(t){var n=e.transaction("local-forage-detect-blob-support","readwrite"),i=o([""]);n.objectStore("local-forage-detect-blob-support").put(i,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return h=e}))}function m(e){var t=d[e.name],n={};n.promise=new a((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function v(e){var t=d[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function g(e,t){var n=d[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function y(e,t){return new a((function(n,i){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);m(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=r.open.apply(r,o);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),i(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},n(t),v(e)}}))}function b(e){return y(e,!1)}function x(e){return y(e,!0)}function w(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,r=e.version>e.db.version;if(i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function _(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return n}(atob(e.data))],{type:e.type})}function S(e){return e&&e.__local_forage_encoded_blob}function M(e){var t=this,n=t._initReady().then((function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function T(e,t,n,i){void 0===i&&(i=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(i>0&&(!e.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),x(e)})).then((function(){return function(e){m(e);for(var t=d[e.name],n=t.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,b(e).then((function(t){return e.db=t,w(e)?x(e):t})).then((function(i){e.db=t.db=i;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=i})).catch((function(t){throw g(e,t),t}))}(e).then((function(){T(e,t,n,i-1)}))})).catch(n);n(r)}}var E={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var i in e)n[i]=e[i];var r=d[n.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=M);var o=[];function s(){return a.resolve()}for(var l=0;l<r.forages.length;l++){var c=r.forages[l];c!==t&&o.push(c._initReady().catch(s))}var u=r.forages.slice(0);return a.all(o).then((function(){return n.db=r.db,b(n)})).then((function(e){return n.db=e,w(n,t._defaultConfig.version)?x(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var i=0;i<u.length;i++){var o=u[i];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!r||!r.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=new a((function(t,i){n.ready().then((function(){T(n._dbInfo,"readonly",(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var i=n.value;S(i)&&(i=_(i));var r=e(i,n.key,s++);void 0!==r?t(r):n.continue()}else t()},a.onerror=function(){i(a.error)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},getItem:function(e,t){var n=this;e=c(e);var i=new a((function(t,i){n.ready().then((function(){T(n._dbInfo,"readonly",(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),S(e)&&(e=_(e)),t(e)},a.onerror=function(){i(a.error)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},setItem:function(e,t,n){var i=this;e=c(e);var r=new a((function(n,r){var o;i.ready().then((function(){return o=i._dbInfo,"[object Blob]"===f.call(t)?p(o.db).then((function(e){return e?t:(n=t,new a((function(e,t){var i=new FileReader;i.onerror=t,i.onloadend=function(t){var i=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)})));var n})):t})).then((function(t){T(i._dbInfo,"readwrite",(function(o,a){if(o)return r(o);try{var s=a.objectStore(i._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,n),r},removeItem:function(e,t){var n=this;e=c(e);var i=new a((function(t,i){n.ready().then((function(){T(n._dbInfo,"readwrite",(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){i(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){T(t._dbInfo,"readwrite",(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){T(t._dbInfo,"readonly",(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,i=new a((function(t,i){e<0?t(null):n.ready().then((function(){T(n._dbInfo,"readonly",(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,l=a.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},l.onerror=function(){i(l.error)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){T(t._dbInfo,"readonly",(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,o=this;if(e.name){var l=e.name===n.name&&o._dbInfo.db,c=l?a.resolve(o._dbInfo.db):b(e).then((function(t){var n=d[e.name],i=n.forages;n.db=t;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=t;return t}));i=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;m(e);var i=d[e.name],o=i.forages;t.close();for(var s=0;s<o.length;s++){var l=o[s];l._dbInfo.db=null,l._dbInfo.version=n}return new a((function(t,i){var o=r.open(e.name,n);o.onerror=function(e){o.result.close(),i(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){i.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,v(n._dbInfo)}})).catch((function(t){throw(g(e,t)||a.resolve()).catch((function(){})),t}))}})):c.then((function(t){m(e);var n=d[e.name],i=n.forages;t.close();for(var o=0;o<i.length;o++)i[o]._dbInfo.db=null;return new a((function(t,n){var i=r.deleteDatabase(e.name);i.onerror=function(){var e=i.result;e&&e.close(),n(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},i.onsuccess=function(){var e=i.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++)v(i[t]._dbInfo)})).catch((function(t){throw(g(e,t)||a.resolve()).catch((function(){})),t}))}))}else i=a.reject("Invalid arguments");return s(i,t),i}},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:".length,L=O+"arbf".length,k=Object.prototype.toString;function P(e){var t,n,i,r,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<s;t+=4)n=C.indexOf(e[t]),i=C.indexOf(e[t+1]),r=C.indexOf(e[t+2]),o=C.indexOf(e[t+3]),u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&o;return c}function D(e){var t,n=new Uint8Array(e),i="";for(t=0;t<n.length;t+=3)i+=C[n[t]>>2],i+=C[(3&n[t])<<4|n[t+1]>>4],i+=C[(15&n[t+1])<<2|n[t+2]>>6],i+=C[63&n[t+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var I={serialize:function(e,t){var n="";if(e&&(n=k.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===k.call(e.buffer))){var i,r="__lfsc__:";e instanceof ArrayBuffer?(i=e,r+="arbf"):(i=e.buffer,"[object Int8Array]"===n?r+="si08":"[object Uint8Array]"===n?r+="ui08":"[object Uint8ClampedArray]"===n?r+="uic8":"[object Int16Array]"===n?r+="si16":"[object Uint16Array]"===n?r+="ur16":"[object Int32Array]"===n?r+="si32":"[object Uint32Array]"===n?r+="ui32":"[object Float32Array]"===n?r+="fl32":"[object Float64Array]"===n?r+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(r+D(i))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+e.type+"~"+D(this.result);t("__lfsc__:blob"+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,O))return JSON.parse(e);var t,n=e.substring(L),i=e.substring(O,L);if("blob"===i&&A.test(n)){var r=n.match(A);t=r[1],n=n.substring(r[0].length)}var a=P(n);switch(i){case"arbf":return a;case"blob":return o([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+i)}},stringToBuffer:P,bufferToString:D};function N(e,t,n,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function F(e,t,n,i,r,o){e.executeSql(n,i,r,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,a):N(e,t,(function(){e.executeSql(n,i,r,o)}),o)}),o):o(e,a)}),o)}function R(e,t,n,i){var r=this;e=c(e);var o=new a((function(o,a){r.ready().then((function(){void 0===t&&(t=null);var s=t,l=r._dbInfo;l.serializer.serialize(t,(function(t,c){c?a(c):l.db.transaction((function(n){F(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(i>0)return void o(R.apply(r,[e,s,n,i-1]));a(t)}}))}))})).catch(a)}));return s(o,n),o}function B(e){return new a((function(t,n){e.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,i){for(var r=[],o=0;o<i.rows.length;o++)r.push(i.rows.item(o).name);t({db:e,storeNames:r})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var j={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var i in e)n[i]="string"!=typeof e[i]?e[i].toString():e[i];var r=new a((function(e,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return i(e)}n.db.transaction((function(r){N(r,n,(function(){t._dbInfo=n,e()}),(function(e,t){i(t)}))}),i)}));return n.serializer=I,r},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,i=new a((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){F(n,r,"SELECT * FROM "+r.storeName,[],(function(n,i){for(var o=i.rows,a=o.length,s=0;s<a;s++){var l=o.item(s),c=l.value;if(c&&(c=r.serializer.deserialize(c)),void 0!==(c=e(c,l.key,s+1)))return void t(c)}t()}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},getItem:function(e,t){var n=this;e=c(e);var i=new a((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){F(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},setItem:function(e,t,n){return R.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=c(e);var i=new a((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){F(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){F(t,i,"DELETE FROM "+i.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){F(t,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(t,n){var i=n.rows.item(0).c;e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,i=new a((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){F(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var i=n.rows.length?n.rows.item(0).key:null;t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){F(t,i,"SELECT key FROM "+i.storeName,[],(function(t,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,r=this;return s(i=e.name?new a((function(t){var i;i=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:i,storeNames:[e.storeName]}):t(B(i))})).then((function(e){return new a((function(t,n){e.db.transaction((function(i){function r(e){return new a((function(t,n){i.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],s=0,l=e.storeNames.length;s<l;s++)o.push(r(e.storeNames[s]));a.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):a.reject("Invalid arguments"),t),i}};function z(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function U(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var V={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=z(e,this._defaultConfig),U()?(this._dbInfo=t,t.serializer=I,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=n.ready().then((function(){for(var t=n._dbInfo,i=t.keyPrefix,r=i.length,o=localStorage.length,a=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(r),a++)))return c}}}));return s(i,t),i},getItem:function(e,t){var n=this;e=c(e);var i=n.ready().then((function(){var t=n._dbInfo,i=localStorage.getItem(t.keyPrefix+e);return i&&(i=t.serializer.deserialize(i)),i}));return s(i,t),i},setItem:function(e,t,n){var i=this;e=c(e);var r=i.ready().then((function(){void 0===t&&(t=null);var n=t;return new a((function(r,o){var a=i._dbInfo;a.serializer.serialize(t,(function(t,i){if(i)o(i);else try{localStorage.setItem(a.keyPrefix+e,t),r(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return s(r,n),r},removeItem:function(e,t){var n=this;e=c(e);var i=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(i,t),i},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(e)&&localStorage.removeItem(i)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,i=n.ready().then((function(){var t,i=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(i.keyPrefix.length)),t}));return s(i,t),i},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&i.push(o.substring(e.keyPrefix.length))}return i}));return s(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i,r=this;return s(i=e.name?new a((function(t){e.storeName?t(z(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),t),i}},G=function(e,t){for(var n,i,r=e.length,o=0;o<r;){if((n=e[o])===(i=t)||"number"==typeof n&&"number"==typeof i&&isNaN(n)&&isNaN(i))return!0;o++}return!1},H=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},q={},Y={INDEXEDDB:E,WEBSQL:j,LOCALSTORAGE:V},$=[Y.INDEXEDDB._driver,Y.WEBSQL._driver,Y.LOCALSTORAGE._driver],X=["dropInstance"],Q=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(X),K={description:"",driver:$.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function J(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function Z(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(H(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ee=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y)if(Y.hasOwnProperty(n)){var i=Y[n],r=i._driver;this[n]=r,W[r]||this.defineDriver(i)}this._defaultConfig=Z({},K),this._config=Z({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":i(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var i=new a((function(t,n){try{var i=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(r);for(var o=Q.concat("_initStorage"),l=0,c=o.length;l<c;l++){var u=o[l];if((!G(X,u)||e[u])&&"function"!=typeof e[u])return void n(r)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,i=X.length;n<i;n++){var r=X[n];e[r]||(e[r]=t(r))}}();var h=function(n){W[i]&&console.info("Redefining LocalForage driver: "+i),W[i]=e,q[i]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(e){n(e)}}));return l(i,t,n),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var i=W[e]?a.resolve(W[e]):a.reject(new Error("Driver not found."));return l(i,t,n),i},e.prototype.getSerializer=function(e){var t=a.resolve(I);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var i=this;H(e)||(e=[e]);var r=this._getSupportedDrivers(e);function o(){i._config.driver=i.driver()}function s(e){return i._extend(e),o(),i._ready=i._initStorage(i._config),i._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=c.then((function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then((function(e){i._driver=e._driver,o(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var r=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(r).then(s).catch(n)}o();var l=new Error("No available storage method found.");return i._driverSet=a.reject(l),i._driverSet}()}}(r)}))})).catch((function(){o();var e=new Error("No available storage method found.");return i._driverSet=a.reject(e),i._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!q[e]},e.prototype._extend=function(e){Z(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Q.length;e<t;e++)J(this,Q[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4)}).call(this,n(54))},function(e,t,n){"use strict";n.r(t),n.d(t,"DRACOLoader",(function(){return r}));var i=n(0),r=function(e){i.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};r.prototype=Object.assign(Object.create(i.Loader.prototype),{constructor:r,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,r){var o=new i.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),"use-credentials"===this.crossOrigin&&o.setWithCredentials(!0),o.load(e,e=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)},decodeDracoFile:function(e,t,n,i){var r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)},decodeGeometry:function(e,t){for(var n in t.attributeTypes){var i=t.attributeTypes[n];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=i.name)}var o,a=JSON.stringify(t);if(r.taskCache.has(e)){var s=r.taskCache.get(e);if(s.key===a)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,c=e.byteLength,u=this._getWorker(l,c).then(n=>(o=n,new Promise((n,i)=>{o._callbacks[l]={resolve:n,reject:i},o.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return u.catch(()=>!0).then(()=>{o&&l&&this._releaseTask(o,l)}),r.taskCache.set(e,{key:a,promise:u}),u},_createGeometry:function(e){var t=new i.BufferGeometry;e.index&&t.setIndex(new i.BufferAttribute(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],o=r.name,a=r.array,s=r.itemSize;t.setAttribute(o,new i.BufferAttribute(a,s))}return t},_loadLibrary:function(e,t){var n=new i.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),new Promise((t,i)=>{n.load(e,t,void 0,i)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var i=r.DRACOWorker.toString(),o=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{var n;this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(n=this.workerPool[this.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),r.DRACOWorker=function(){var e,t;function n(e,t,n,i,r,o){var a,s,l=o.num_components(),c=n.num_points()*l;switch(r){case Float32Array:a=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,a),s=new Float32Array(c);break;case Int8Array:a=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,a),s=new Int8Array(c);break;case Int16Array:a=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,a),s=new Int16Array(c);break;case Int32Array:a=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,a),s=new Int32Array(c);break;case Uint8Array:a=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,a),s=new Uint8Array(c);break;case Uint16Array:a=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,a),s=new Uint16Array(c);break;case Uint32Array:a=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,a),s=new Uint32Array(c);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var u=0;u<c;u++)s[u]=a.GetValue(u);return e.destroy(a),{name:i,array:s,itemSize:l}}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=r.buffer,a=r.taskConfig;t.then(e=>{var t=e.draco,i=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var l=function(e,t,i,r){var o,a,s=r.attributeIDs,l=r.attributeTypes,c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(i,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(i,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var u={index:null,attributes:[]};for(var h in s){var d,f,p=self[l[h]];if(r.useUniqueIDs)f=s[h],d=t.GetAttributeByUniqueId(o,f);else{if(-1===(f=t.GetAttributeId(o,e[s[h]])))continue;d=t.GetAttribute(o,f)}u.attributes.push(n(e,t,o,h,p,d))}if(c===e.TRIANGULAR_MESH){for(var m=o.num_faces(),v=new Uint32Array(3*m),g=new e.DracoInt32Array,y=0;y<m;++y){t.GetFaceFromMesh(o,y,g);for(var b=0;b<3;++b)v[3*y+b]=g.GetValue(b)}u.index={array:v,itemSize:1},e.destroy(g)}return e.destroy(o),u}(t,i,s,a),c=l.attributes.map(e=>e.array.buffer);l.index&&c.push(l.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:l},c)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(s),t.destroy(i)}})}}},r.taskCache=new WeakMap,r.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},r.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},r.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},r.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){var i=n(292),r=[0,0],o=[0,0],a=[0,0],s=[0,0];function l(e,t,n){e.push([[t[0],t[1]],n])}e.exports=function(e,t){var n=null,c=[];t&&(e=e.slice()).push(e[0]);for(var u=e.length,h=1;h<u;h++){var d=e[h-1],f=e[h],p=h<e.length-1?e[h+1]:null;if(i.direction(r,f,d),n||(n=[0,0],i.normal(n,r)),1===h&&l(c,n,1),p){i.direction(o,p,f);var m=i.computeMiter(a,s,r,o,1);l(c,s,m)}else i.normal(n,r),l(c,n,1)}if(e.length>2&&t){var v=e[u-2],g=e[0],y=e[1];i.direction(r,g,v),i.direction(o,y,g),i.normal(n,r);var b=i.computeMiter(a,s,r,o,1);c[0][0]=s.slice(),c[u-1][0]=s.slice(),c[0][1]=b,c[u-1][1]=b,c.pop()}return c}},function(e,t,n){var i=n(293),r=n(294),o=n(295),a=n(296),s=n(297),l=[0,0];e.exports.computeMiter=function(e,t,n,a,c){return i(e,n,a),o(e,e),r(t,-e[1],e[0]),r(l,-n[1],n[0]),c/s(t,l)},e.exports.normal=function(e,t){return r(e,-t[1],t[0]),e},e.exports.direction=function(e,t,n){return a(e,t,n),o(e,e),e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t,e[1]=n,e}},function(e,t){e.exports=function(e,t){var n=t[0],i=t[1],r=n*n+i*i;r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r);return e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]}},function(e,t,n){"use strict";var i=n(33),r=n(177),o=n(299),a=n(183);function s(e){var t=new o(e),n=r(o.prototype.request,t);return i.extend(n,o.prototype,t),i.extend(n,t),n}var l=s(n(180));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(184),l.CancelToken=n(312),l.isCancel=n(179),l.all=function(e){return Promise.all(e)},l.spread=n(313),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var i=n(33),r=n(178),o=n(300),a=n(301),s=n(183);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var i=n(33);function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},function(e,t,n){"use strict";var i=n(33),r=n(302),o=n(179),a=n(180);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=r(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var i=n(33);e.exports=function(e,t,n){return i.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var i=n(33);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},function(e,t,n){"use strict";var i=n(182);e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var i=n(307),r=n(308);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var i=n(33),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(a[t]&&r.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var i=n(33);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var i=n(33);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var i=n(184);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"version",(function(){return i})),n.d(t,"VERSION",(function(){return r})),n.d(t,"atob",(function(){return k})),n.d(t,"atobPolyfill",(function(){return L})),n.d(t,"btoa",(function(){return y})),n.d(t,"btoaPolyfill",(function(){return g})),n.d(t,"fromBase64",(function(){return F})),n.d(t,"toBase64",(function(){return T})),n.d(t,"utob",(function(){return S})),n.d(t,"encode",(function(){return T})),n.d(t,"encodeURI",(function(){return E})),n.d(t,"encodeURL",(function(){return E})),n.d(t,"btou",(function(){return O})),n.d(t,"decode",(function(){return F})),n.d(t,"isValid",(function(){return R})),n.d(t,"fromUint8Array",(function(){return x})),n.d(t,"toUint8Array",(function(){return D})),n.d(t,"extendString",(function(){return j})),n.d(t,"extendUint8Array",(function(){return z})),n.d(t,"extendBuiltins",(function(){return U})),n.d(t,"Base64",(function(){return V}));const i="3.7.2",r=i,o="function"==typeof atob,a="function"==typeof btoa,s="function"==typeof Buffer,l="function"==typeof TextDecoder?new TextDecoder:void 0,c="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),h=(e=>{let t={};return e.forEach((e,n)=>t[e]=n),t})(u),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),m=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),v=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),g=e=>{let t,n,i,r,o="";const a=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|r,o+=u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},y=a?e=>btoa(e):s?e=>Buffer.from(e,"binary").toString("base64"):g,b=s?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,i=e.length;n<i;n+=4096)t.push(f.apply(null,e.subarray(n,n+4096)));return y(t.join(""))},x=(e,t=!1)=>t?m(b(e)):b(e),w=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?f(192|t>>>6)+f(128|63&t):f(224|t>>>12&15)+f(128|t>>>6&63)+f(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return f(240|t>>>18&7)+f(128|t>>>12&63)+f(128|t>>>6&63)+f(128|63&t)},_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,S=e=>e.replace(_,w),M=s?e=>Buffer.from(e,"utf8").toString("base64"):c?e=>b(c.encode(e)):e=>y(S(e)),T=(e,t=!1)=>t?m(M(e)):M(e),E=e=>T(e,!0),C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,A=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return f(55296+(t>>>10))+f(56320+(1023&t));case 3:return f((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return f((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},O=e=>e.replace(C,A),L=e=>{if(e=e.replace(/\s+/g,""),!d.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,i,r="";for(let o=0;o<e.length;)t=h[e.charAt(o++)]<<18|h[e.charAt(o++)]<<12|(n=h[e.charAt(o++)])<<6|(i=h[e.charAt(o++)]),r+=64===n?f(t>>16&255):64===i?f(t>>16&255,t>>8&255):f(t>>16&255,t>>8&255,255&t);return r},k=o?e=>atob(v(e)):s?e=>Buffer.from(e,"base64").toString("binary"):L,P=s?e=>p(Buffer.from(e,"base64")):e=>p(k(e),e=>e.charCodeAt(0)),D=e=>P(N(e)),I=s?e=>Buffer.from(e,"base64").toString("utf8"):l?e=>l.decode(P(e)):e=>O(k(e)),N=e=>v(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),F=e=>I(N(e)),R=e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},B=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),j=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,B(t));e("fromBase64",(function(){return F(this)})),e("toBase64",(function(e){return T(this,e)})),e("toBase64URI",(function(){return T(this,!0)})),e("toBase64URL",(function(){return T(this,!0)})),e("toUint8Array",(function(){return D(this)}))},z=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,B(t));e("toBase64",(function(e){return x(this,e)})),e("toBase64URI",(function(){return x(this,!0)})),e("toBase64URL",(function(){return x(this,!0)}))},U=()=>{j(),z()},V={version:i,VERSION:r,atob:k,atobPolyfill:L,btoa:y,btoaPolyfill:g,fromBase64:F,toBase64:T,encode:T,encodeURI:E,encodeURL:E,utob:S,btou:O,decode:F,isValid:R,fromUint8Array:x,toUint8Array:D,extendString:j,extendUint8Array:z,extendBuiltins:U}},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(e){var t=n(316),i=n(318),r=n(319),o=n(320),a=n(321),s=n(322),l=n(323),c=n(324),u=n(325),h=n(185),d=[i,r,o,s,l,a,c,t,u].reduce((function(e,t){return t(e)}),n(327)),f=n(187)(d);function p(e,t,n,i){var r=d.resolve(e);return arguments.length<2?r:r.then(t,n,i)}function m(e){return function(){for(var t=0,n=arguments.length,i=new Array(n);t<n;++t)i[t]=arguments[t];return f(e,this,i)}}function v(e){for(var t=0,n=arguments.length-1,i=new Array(n);t<n;++t)i[t]=arguments[t+1];return f(e,this,i)}function g(){var e=d._defer();function t(t){e._handler.resolve(t)}function n(t){e._handler.reject(t)}function i(t){e._handler.notify(t)}this.promise=e,this.resolve=t,this.reject=n,this.notify=i,this.resolver={resolve:t,reject:n,notify:i}}return p.promise=function(e){return new d(e)},p.resolve=d.resolve,p.reject=d.reject,p.lift=m,p.try=v,p.attempt=v,p.iterate=d.iterate,p.unfold=d.unfold,p.join=function(){return d.all(arguments)},p.all=function(e){return p(e,d.all)},p.settle=function(e){return p(e,d.settle)},p.any=m(d.any),p.some=m(d.some),p.race=m(d.race),p.map=function(e,t){return p(e,(function(e){return d.map(e,t)}))},p.filter=function(e,t){return p(e,(function(e){return d.filter(e,t)}))},p.reduce=m(d.reduce),p.reduceRight=m(d.reduceRight),p.isPromiseLike=function(e){return e&&"function"==typeof e.then},p.Promise=d,p.defer=function(){return new g},p.TimeoutError=h,p}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(e){var t=n(124),i=n(185);function r(e,n,i,r){return t.setTimer((function(){e(i,r,n)}),n)}return function(e){function n(e,t,n){r(o,e,t,n)}function o(e,t){t.resolve(e)}function a(e,t,n){var r=void 0===e?new i("timed out after "+n+"ms"):e;t.reject(r)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(n,e,void 0,t._handler),t},e.prototype.timeout=function(e,n){var i=this._beget(),o=i._handler,s=r(a,e,n,i._handler);return this._handler.visit(o,(function(e){t.clearTimer(s),this.resolve(e)}),(function(e){t.clearTimer(s),this.reject(e)}),o.notify),i},e}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t){},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(e){var t=n(186),i=n(187);return function(e){var n=i(e),r=e.resolve,o=e.all,a=Array.prototype.reduce,s=Array.prototype.reduceRight,l=Array.prototype.slice;return e.any=function(t){for(var n,i,r=e._defer(),o=r._handler,a=t.length>>>0,s=a,l=[],c=0;c<a;++c)if(void 0!==(i=t[c])||c in t){if((n=e._handler(i)).state()>0){o.become(n),e._visitRemaining(t,c,n);break}n.visit(o,u,h)}else--s;0===s&&o.reject(new RangeError("any(): array must not be empty"));return r;function u(e){l=null,this.resolve(e)}function h(e){this.resolved||(l.push(e),0==--s&&this.reject(l))}},e.some=function(t,n){var i,r,o,a=e._defer(),s=a._handler,l=[],c=[],u=t.length>>>0,h=0;for(o=0;o<u;++o)(void 0!==(r=t[o])||o in t)&&++h;n=Math.max(n,0),i=h-n+1,h=Math.min(n,h),n>h?s.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+h)):0===h&&s.resolve(l);for(o=0;o<u;++o)(void 0!==(r=t[o])||o in t)&&e._handler(r).visit(s,d,f,s.notify);return a;function d(e){this.resolved||(l.push(e),0==--h&&(c=null,this.resolve(l)))}function f(e){this.resolved||(c.push(e),0==--i&&(l=null,this.reject(c)))}},e.settle=function(e){return o(e.map(c))},e.map=function(t,n){return e._traverse(n,t)},e.filter=function(t,n){var i=l.call(t);return e._traverse(n,i).then((function(t){return function(t,n){for(var i=n.length,r=new Array(i),o=0,a=0;o<i;++o)n[o]&&(r[a++]=e._handler(t[o]).value);return r.length=a,r}(i,t)}))},e.reduce=function(e,t){return arguments.length>2?a.call(e,u(t),arguments[2]):a.call(e,u(t))},e.reduceRight=function(e,t){return arguments.length>2?s.call(e,u(t),arguments[2]):s.call(e,u(t))},e.prototype.spread=function(e){return this.then(o).then((function(t){return e.apply(this,t)}))},e;function c(n){var i;return n instanceof e&&(i=n._handler.join()),i&&0===i.state()||!i?r(n).then(t.fulfilled,t.rejected):(i._unreport(),t.inspect(i))}function u(e){return function(t,i,r){return n(e,void 0,[t,i,r])}}}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return function(n){var i=n.resolve,r=n.reject,o=n.prototype.catch;function a(e,t){return function(n){return function(e,t){return function(e){return e===Error||null!=e&&e.prototype instanceof Error}(t)?e instanceof t:t(e)}(n,t)?e.call(this,n):r(n)}}function s(e,t,n,r){var o,a=e.call(t);return"object"!=typeof(o=a)&&"function"!=typeof o||null===o?n(r):function(e,t,n){return i(e).then((function(){return t(n)}))}(a,n,r)}return n.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},n.prototype.catch=n.prototype.otherwise=function(t){return arguments.length<2?o.call(this,t):"function"!=typeof t?this.ensure(e):o.call(this,a(arguments[1],t))},n.prototype.finally=n.prototype.ensure=function(e){return"function"!=typeof e?this:this.then((function(n){return s(e,this,t,n)}),(function(t){return s(e,this,r,t)}))},n.prototype.else=n.prototype.orElse=function(e){return this.then(void 0,(function(){return e}))},n.prototype.yield=function(e){return this.then((function(){return e}))},n.prototype.tap=function(e){return this.then(e).yield(this)},n};function e(){throw new TypeError("catch predicate must be a function")}function t(e){return e}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return function(e){return e.prototype.fold=function(t,n){var i=this._beget();return this._handler.fold((function(n,i,r){e._handler(n).fold((function(e,n,i){i.resolve(t.call(this,n,e))}),i,this,r)}),n,i._handler.receiver,i._handler),i},e}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(e){var t=n(186).inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return function(e){var t=e.resolve;return e.iterate=function(e,t,i,r){return n((function(t){return[t,e(t)]}),t,i,r)},e.unfold=n,e;function n(e,i,r,o){return t(o).then((function(n){return t(i(n)).then((function(i){return i?n:t(e(n)).spread(a)}))}));function a(o,a){return t(r(o)).then((function(){return n(e,i,r,a)}))}}}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return function(e){return e.prototype.with=e.prototype.withThis=function(e){var t=this._beget(),n=t._handler;return n.receiver=e,this._handler.chain(n,e),t},e}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(e){var t=n(124).setTimer,i=n(326);return function(e){var n,a=o,s=o;"undefined"!=typeof console&&(n=console,a=void 0!==n.error?function(e){n.error(e)}:function(e){n.log(e)},s=void 0!==n.info?function(e){n.info(e)}:function(e){n.log(e)}),e.onPotentiallyUnhandledRejection=function(e){f(h,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){f(d,e)},e.onFatalRejection=function(e){f(r,e.value)};var l=[],c=[],u=null;function h(e){e.handled||(c.push(e),a("Potentially unhandled rejection ["+e.id+"] "+i.formatError(e.value)))}function d(e){var t=c.indexOf(e);t>=0&&(c.splice(t,1),s("Handled previous rejection ["+e.id+"] "+i.formatObject(e.value)))}function f(e,n){l.push(e,n),null===u&&(u=t(p,0))}function p(){for(u=null;l.length>0;)l.shift()(l.shift())}return e};function r(e){throw e}function o(){}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){return{formatError:function(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"},formatObject:e,tryStringify:t};function e(e){var n=String(e);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=t(e,n)),n}function t(e,t){try{return JSON.stringify(e)}catch(e){return t}}}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(e){return n(328)({scheduler:new(n(329))(n(124).asap)})}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){(function(i){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(r=function(){return function(e){var t=e.scheduler,n=function(){if(null!=i&&"function"==typeof i.emit)return function(e,t){return"unhandledRejection"===e?i.emit(e,t.value,t):i.emit(e,t)};if("undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(e){}return!1}())return function(e,t){return function(n,i){var r=new t(n,{detail:{reason:i.value,key:i},bubbles:!1,cancelable:!0});return!e.dispatchEvent(r)}}(self,CustomEvent);if("undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(e){}return!1}())return function(e,t){return function(n,i){var r=t.createEvent("CustomEvent");return r.initCustomEvent(n,!1,!0,{reason:i.value,key:i}),!e.dispatchEvent(r)}}(self,document);return j}(),r=Object.create||function(e){function t(){}return t.prototype=e,new t};function o(e,t){this._handler=e===m?t:function(e){var t=new y;try{e((function(e){t.resolve(e)}),n,(function(e){t.notify(e)}))}catch(e){n(e)}return t;function n(e){t.reject(e)}}(e)}function a(e){return P(e)?e:new o(m,new b(f(e)))}function s(e){return new o(m,new b(new S(e)))}function l(){return C}function c(e,t,n){for(var i,r="function"==typeof t?function(i,r,o){o.resolved||u(n,h,i,e(t,r,i),o)}:h,a=new y,s=n.length>>>0,l=new Array(s),c=0;c<n.length&&!a.resolved;++c)void 0!==(i=n[c])||c in n?u(n,r,c,i,a):--s;return 0===s&&a.become(new w(l)),new o(m,a);function h(e,t,n){l[e]=t,0==--s&&n.become(new w(l))}}function u(e,t,n,i,r){if(D(i)){var o=function(e){return P(e)?e._handler.join():p(e)}(i),a=o.state();0===a?o.fold(t,n,void 0,r):a>0?t(n,o.value,r):(r.become(o),h(e,n+1,o))}else t(n,i,r)}function h(e,t,n){for(var i=t;i<e.length;++i)d(f(e[i]),n)}function d(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):n<0&&e._unreport()}}function f(e){return P(e)?e._handler.join():D(e)?p(e):new w(e)}function p(e){try{var t=e.then;return"function"==typeof t?new x(t,e):new w(e)}catch(e){return new S(e)}}function m(){}function v(){}o.resolve=a,o.reject=s,o.never=l,o._defer=function(){return new o(m,new y)},o._handler=f,o.prototype.then=function(e,t,n){var i=this._handler,r=i.join().state();if("function"!=typeof e&&r>0||"function"!=typeof t&&r<0)return new this.constructor(m,i);var o=this._beget(),a=o._handler;return i.chain(a,i.receiver,e,t,n),o},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype._beget=function(){return function(e,t){var n=new y(e.receiver,e.join().context);return new t(m,n)}(this._handler,this.constructor)},o.all=function(e){return c(B,null,e)},o.race=function(e){if("object"!=typeof e||null===e)return s(new TypeError("non-iterable passed to race()"));return 0===e.length?l():1===e.length?a(e[0]):function(e){var t,n,i,r=new y;for(t=0;t<e.length;++t)if(void 0!==(n=e[t])||t in e){if(0!==(i=f(n)).state()){r.become(i),h(e,t+1,i);break}i.visit(r,r.resolve,r.reject)}return new o(m,r)}(e)},o._traverse=function(e,t){return c(F,e,t)},o._visitRemaining=h,m.prototype.when=m.prototype.become=m.prototype.notify=m.prototype.fail=m.prototype._unreport=m.prototype._report=j,m.prototype._state=0,m.prototype.state=function(){return this._state},m.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},m.prototype.chain=function(e,t,n,i,r){this.when({resolver:e,receiver:t,fulfilled:n,rejected:i,progress:r})},m.prototype.visit=function(e,t,n,i){this.chain(g,e,t,n,i)},m.prototype.fold=function(e,t,n,i){this.when(new k(e,t,n,i))},R(m,v),v.prototype.become=function(e){e.fail()};var g=new v;function y(e,t){o.createContext(this,t),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function b(e){this.handler=e}function x(e,n){y.call(this),t.enqueue(new L(e,n,this))}function w(e){o.createContext(this),this.value=e}R(m,y),y.prototype._state=0,y.prototype.resolve=function(e){this.become(f(e))},y.prototype.reject=function(e){this.resolved||this.become(new S(e))},y.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if((e=e.handler)===this)return this.handler=new S(new TypeError("Promise cycle"));return e},y.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},y.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&t.enqueue(this),void 0!==this.context&&e._report(this.context))},y.prototype.when=function(e){this.resolved?t.enqueue(new A(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},y.prototype.notify=function(e){this.resolved||t.enqueue(new O(e,this))},y.prototype.fail=function(e){var t=void 0===e?this.context:e;this.resolved&&this.handler.join().fail(t)},y.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},y.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},R(m,b),b.prototype.when=function(e){t.enqueue(new A(e,this))},b.prototype._report=function(e){this.join()._report(e)},b.prototype._unreport=function(){this.join()._unreport()},R(y,x),R(m,w),w.prototype._state=1,w.prototype.fold=function(e,t,n,i){!function(e,t,n,i,r){if("function"!=typeof e)return r.become(n);o.enterContext(n),function(e,t,n,i,r){try{e.call(i,t,n,r)}catch(e){r.become(new S(e))}}(e,t,n.value,i,r),o.exitContext()}(e,t,this,n,i)},w.prototype.when=function(e){I(e.fulfilled,this,e.receiver,e.resolver)};var _=0;function S(e){o.createContext(this),this.id=++_,this.value=e,this.handled=!1,this.reported=!1,this._report()}function M(e,t){this.rejection=e,this.context=t}function T(e){this.rejection=e}R(m,S),S.prototype._state=-1,S.prototype.fold=function(e,t,n,i){i.become(this)},S.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),I(e.rejected,this,e.receiver,e.resolver)},S.prototype._report=function(e){t.afterQueue(new M(this,e))},S.prototype._unreport=function(){this.handled||(this.handled=!0,t.afterQueue(new T(this)))},S.prototype.fail=function(e){this.reported=!0,n("unhandledRejection",this),o.onFatalRejection(this,void 0===e?this.context:e)},M.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,n("unhandledRejection",this.rejection)||o.onPotentiallyUnhandledRejection(this.rejection,this.context))},T.prototype.run=function(){this.rejection.reported&&(n("rejectionHandled",this.rejection)||o.onPotentiallyUnhandledRejectionHandled(this.rejection))},o.createContext=o.enterContext=o.exitContext=o.onPotentiallyUnhandledRejection=o.onPotentiallyUnhandledRejectionHandled=o.onFatalRejection=j;var E=new m,C=new o(m,E);function A(e,t){this.continuation=e,this.handler=t}function O(e,t){this.handler=t,this.value=e}function L(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function k(e,t,n,i){this.f=e,this.z=t,this.c=n,this.to=i,this.resolver=g,this.receiver=this}function P(e){return e instanceof o}function D(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function I(e,t,n,i){if("function"!=typeof e)return i.become(t);o.enterContext(t),function(e,t,n,i){try{i.become(f(e.call(n,t)))}catch(e){i.become(new S(e))}}(e,t.value,n,i),o.exitContext()}function N(e,t,n,i,r){if("function"!=typeof e)return r.notify(t);o.enterContext(n),function(e,t,n,i){try{i.notify(e.call(n,t))}catch(e){i.notify(e)}}(e,t,i,r),o.exitContext()}function F(e,t,n){try{return e(t,n)}catch(e){return s(e)}}function R(e,t){t.prototype=r(e.prototype),t.prototype.constructor=t}function B(e,t){return t}function j(){}return A.prototype.run=function(){this.handler.join().when(this.continuation)},O.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)N((t=e[n]).progress,this.value,this.handler,t.receiver,t.resolver)},L.prototype.run=function(){var e=this.resolver;!function(e,t,n,i,r){try{e.call(t,n,i,r)}catch(e){i(e)}}(this._then,this.thenable,(function(t){e.resolve(t)}),(function(t){e.reject(t)}),(function(t){e.notify(t)}))},k.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},k.prototype.rejected=function(e){this.to.reject(e)},k.prototype.progress=function(e){this.to.notify(e)},o}}.call(t,n,t,e))||(e.exports=r)}(n(18))}).call(this,n(59))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(r){"use strict";void 0===(i=function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e}.call(t,n,t,e))||(e.exports=i)}(n(18))},function(e,t,n){"use strict";n.r(t),n.d(t,"RenderPass",(function(){return r}));var i=n(16),r=function(e,t,n,r,o){i.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};r.prototype=Object.assign(Object.create(i.Pass.prototype),{constructor:r,render:function(e,t,n){var i,r,o,a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(i=e.getClearColor().getHex(),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(i,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}})},function(e,t,n){"use strict";n.r(t),n.d(t,"SMAAEdgesShader",(function(){return r})),n.d(t,"SMAAWeightsShader",(function(){return o})),n.d(t,"SMAABlendShader",(function(){return a}));var i=n(0),r={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","void SMAAEdgeDetectionVS( vec2 texcoord ) {","\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );","\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );","\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );","}","void main() {","\tvUv = uv;","\tSMAAEdgeDetectionVS( vUv );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {","\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );","\tvec4 delta;","\tvec3 C = texture2D( colorTex, texcoord ).rgb;","\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;","\tvec3 t = abs( C - Cleft );","\tdelta.x = max( max( t.r, t.g ), t.b );","\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;","\tt = abs( C - Ctop );","\tdelta.y = max( max( t.r, t.g ), t.b );","\tvec2 edges = step( threshold, delta.xy );","\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )","\t\tdiscard;","\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;","\tt = abs( C - Cright );","\tdelta.z = max( max( t.r, t.g ), t.b );","\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;","\tt = abs( C - Cbottom );","\tdelta.w = max( max( t.r, t.g ), t.b );","\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );","\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;","\tt = abs( C - Cleftleft );","\tdelta.z = max( max( t.r, t.g ), t.b );","\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;","\tt = abs( C - Ctoptop );","\tdelta.w = max( max( t.r, t.g ), t.b );","\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );","\tedges.xy *= step( 0.5 * maxDelta, delta.xy );","\treturn vec4( edges, 0.0, 0.0 );","}","void main() {","\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );","}"].join("\n")},o={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","varying vec2 vPixcoord;","void SMAABlendingWeightCalculationVS( vec2 texcoord ) {","\tvPixcoord = texcoord / resolution;","\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );","\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );","\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );","}","void main() {","\tvUv = uv;","\tSMAABlendingWeightCalculationVS( vUv );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )","uniform sampler2D tDiffuse;","uniform sampler2D tArea;","uniform sampler2D tSearch;","uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[3];","varying vec2 vPixcoord;","#if __VERSION__ == 100","vec2 round( vec2 x ) {","\treturn sign( x ) * floor( abs( x ) + 0.5 );","}","#endif","float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {","\te.r = bias + e.r * scale;","\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;","}","float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 0.0, 1.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;","\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;","\t}","\ttexcoord.x += 0.25 * resolution.x;","\ttexcoord.x += resolution.x;","\ttexcoord.x += 2.0 * resolution.x;","\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);","\treturn texcoord.x;","}","float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 0.0, 1.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;","\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;","\t}","\ttexcoord.x -= 0.25 * resolution.x;","\ttexcoord.x -= resolution.x;","\ttexcoord.x -= 2.0 * resolution.x;","\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );","\treturn texcoord.x;","}","float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 1.0, 0.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution;","\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;","\t}","\ttexcoord.y -= 0.25 * resolution.y;","\ttexcoord.y -= resolution.y;","\ttexcoord.y -= 2.0 * resolution.y;","\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );","\treturn texcoord.y;","}","float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 1.0, 0.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution;","\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;","\t}","\ttexcoord.y += 0.25 * resolution.y;","\ttexcoord.y += resolution.y;","\ttexcoord.y += 2.0 * resolution.y;","\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );","\treturn texcoord.y;","}","vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {","\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;","\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );","\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;","\treturn texture2D( areaTex, texcoord, 0.0 ).rg;","}","vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {","\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );","\tvec2 e = texture2D( edgesTex, texcoord ).rg;","\tif ( e.g > 0.0 ) {","\t\tvec2 d;","\t\tvec2 coords;","\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );","\t\tcoords.y = offset[ 1 ].y;","\t\td.x = coords.x;","\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;","\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );","\t\td.y = coords.x;","\t\td = d / resolution.x - pixcoord.x;","\t\tvec2 sqrt_d = sqrt( abs( d ) );","\t\tcoords.y -= 1.0 * resolution.y;","\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;","\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );","\t}","\tif ( e.r > 0.0 ) {","\t\tvec2 d;","\t\tvec2 coords;","\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );","\t\tcoords.x = offset[ 0 ].x;","\t\td.x = coords.y;","\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;","\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );","\t\td.y = coords.y;","\t\td = d / resolution.y - pixcoord.y;","\t\tvec2 sqrt_d = sqrt( abs( d ) );","\t\tcoords.y -= 1.0 * resolution.y;","\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;","\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );","\t}","\treturn weights;","}","void main() {","\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );","}"].join("\n")},a={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 2 ];","void SMAANeighborhoodBlendingVS( vec2 texcoord ) {","\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );","\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );","}","void main() {","\tvUv = uv;","\tSMAANeighborhoodBlendingVS( vUv );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tColor;","uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 2 ];","vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {","\tvec4 a;","\ta.xz = texture2D( blendTex, texcoord ).xz;","\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;","\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;","\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {","\t\treturn texture2D( colorTex, texcoord, 0.0 );","\t} else {","\t\tvec2 offset;","\t\toffset.x = a.a > a.b ? a.a : -a.b;","\t\toffset.y = a.g > a.r ? -a.g : a.r;","\t\tif ( abs( offset.x ) > abs( offset.y )) {","\t\t\toffset.y = 0.0;","\t\t} else {","\t\t\toffset.x = 0.0;","\t\t}","\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );","\t\ttexcoord += sign( offset ) * resolution;","\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );","\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );","\t\tC.xyz = pow(C.xyz, vec3(2.2));","\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));","\t\tvec4 mixed = mix(C, Cop, s);","\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));","\t\treturn mixed;","\t}","}","void main() {","\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );","}"].join("\n")}},function(e,t,n){"use strict";n.r(t),n.d(t,"WEBGL",(function(){return i}));var i={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',i=document.createElement("div");return i.id="webglmessage",i.style.fontFamily="monospace",i.style.fontSize="13px",i.style.fontWeight="normal",i.style.textAlign="center",i.style.background="#fff",i.style.color="#000",i.style.padding="1.5em",i.style.width="400px",i.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),i.innerHTML=n,i}}},function(e,t,n){"use strict";var i=function(e,t){return e<t};function r(e){if(!(this instanceof r))return new r(e);this.array=[],this.size=0,this.compare=e||i}r.prototype.clone=function(){var e=new r(this.compare);return e.size=this.size,e.array=this.array.slice(0,this.size),e},r.prototype.add=function(e){var t,n,i=this.size;for(this.array[this.size]=e,this.size+=1;i>0&&(t=i-1>>1,n=this.array[t],this.compare(e,n));)this.array[i]=n,i=t;this.array[i]=e},r.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},r.prototype._percolateUp=function(e,t){for(var n,i,r=this.array[e];e>0&&(n=e-1>>1,i=this.array[n],t||this.compare(r,i));)this.array[e]=i,e=n;this.array[e]=r},r.prototype._percolateDown=function(e){for(var t,n,i,r=this.size,o=this.size>>>1,a=this.array[e];e<o&&(n=(t=1+(e<<1))+1,i=this.array[t],n<r&&this.compare(this.array[n],i)&&(t=n,i=this.array[n]),this.compare(i,a));)this.array[e]=i,e=t;this.array[e]=a},r.prototype._removeAt=function(e){if(!(e>this.size-1||e<0))return this._percolateUp(e,!0),this.poll()},r.prototype.remove=function(e){for(var t=0;t<this.size;t++)if(!this.compare(this.array[t],e)&&!this.compare(e,this.array[t]))return this._removeAt(t),!0;return!1},r.prototype.removeOne=function(e){if("function"==typeof e)for(var t=0;t<this.size;t++)if(e(this.array[t]))return this._removeAt(t)},r.prototype.removeMany=function(e,t){if("function"!=typeof e||this.size<1)return[];t=t?Math.min(t,this.size):this.size;for(var n=0,i=new Array(t),r=0,o=new Array(this.size);n<t&&!this.isEmpty();){var a=this.poll();e(a)?i[n++]=a:o[r++]=a}i.length=n;for(var s=0;s<r;)this.add(o[s++]);return i},r.prototype.peek=function(){if(0!=this.size)return this.array[0]},r.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},r.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},r.prototype.trim=function(){this.array=this.array.slice(0,this.size)},r.prototype.isEmpty=function(){return 0===this.size},r.prototype.forEach=function(e){if(!this.isEmpty()&&"function"==typeof e)for(var t=0,n=this.clone();!n.isEmpty();)e(n.poll(),t++)},r.prototype.kSmallest=function(e){if(0==this.size)return[];e=Math.min(this.size,e);var t=new r(this.compare);const n=Math.min((e>0?Math.pow(2,e-1):0)+1,this.size);t.size=n,t.array=this.array.slice(0,n);for(var i=new Array(e),o=0;o<e;o++)i[o]=t.poll();return i},e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(n(21)),r=p(n(19)),o=p(n(20)),a=n(60),s=n(90),l=n(154),c=p(n(174)),u=p(n(343)),h=n(0),d=n(17),f=p(n(89));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.name=t.name||null,this.map=t.map||null,this.Vue=t.Vue||null,this.realPlay=!1,this.renderType="byTime",this.delayRange=0,this.rate=0,this.betterRenderConfig={delayDisappear:!0,maxDelayCount:5,removeShake:!0,rectify:!1,insertData:!1},this.modelVisible=!0,this.colorOption={map:a.ELEMENT_TYPE,key:"elementType"},this.lodModelConfig=null,this.showLabelType=[3,4,5,6,7,8,9],this.showSpeed=!1,this.showPlateNumber=!1,this.showColor=!0,this.modelTypeMap=a.CAR_TYPE,this._models={},this._timeLine=[],this._BufferMap={},this._insertDataMap={},this._timeSnapshot=null,this._renderStatus="can not",this._renderIds=[],this._playDelay=0,this._autoInterval=0,this._corpseMap={},this._betterHandleTypes=[3,4,5,6,7,8,9],this.ModelPark=null}return(0,o.default)(e,[{key:"handleData",value:function(e,t){var n=this;this.ModelPark||(this.ModelPark=new u.default({modelsMap:{},Map:this.map})),"start"!==this._renderStatus&&t-this._timeLine[0]>=this.delayRange&&(this._renderStatus="can"),this._timeLine.push(t);var r=(0,i.default)(this._BufferMap);e.forEach((function(e){e.correctedTime=t;var i=e.id,o=e.longitude,a=e.latitude,s=d.Utils.transformWGS84ToUTM({x:o,y:a}),l=s.x,c=s.y;e.x=l,e.y=c;var u=n._BufferMap[i];if(u){var h=u.startTime,f=r.findIndex((function(e){return String(e)===String(i)}));if(r.splice(f,1),!u.render){var p=Math.floor(n.delayRange/67);u.render=t-h>=67*p,u.render&&n._renderIds.push(i)}u.disappearCount=0,u.buffers.push(e)}else n._BufferMap[i]={startTime:t,render:!1,buffers:[e],disappearCount:0};var m=n._BufferMap[i].buffers,v=m[0].type;!n.realPlay&&n._betterHandleTypes.includes(v)&&n.betterHandle(m,i)})),r.forEach((function(e){var i=n._BufferMap[e],r=i.buffers,o=i.disappearCount,a=i.startTime,s=t-a;if(n.betterRenderConfig.delayDisappear){var l=n.betterRenderConfig.maxDelayCount||5;if(o>l-1)return!1;if(i.disappearCount+=1,!i.render){var c=i.disappearCount===l,u=Math.floor(n.delayRange/67);i.render=s>=67*u||c,i.render&&n._renderIds.push(e)}var h=f.default.cloneDeep(r[r.length-1]);h.copy=!0,h.correctedTime=t,h.betterRender=!1,i.buffers.push(h)}var d=r[0].type;!n.realPlay&&n._betterHandleTypes.includes(d)&&n.betterHandle(r,e)})),"can"===this._renderStatus&&(this._renderStatus="start",this.render())}},{key:"betterHandle",value:function(t,n){var i=t.length,r=t[i-1];if(!r.betterRender){var o=this.betterRenderConfig,a=o.removeShake,s=o.rectify,l=o.insertData;if(i>1&&a&&e.removeShakeData(t[i-2],r),i>2&&s&&e.rectifyData(t[i-3],t[i-2],r),this.rate&&l&&i>2){var c=e.insertData(t[i-3],t[i-2],this.rate);this._insertDataMap[n]?this._insertDataMap[n].push(c):this._insertDataMap[n]=[c]}r.betterRender=!0}}},{key:"render",value:function(){var e=this,t=Date.now,n=t(),i=n;this.play();this.renderInterval=requestAnimationFrame((function r(){e.renderInterval=requestAnimationFrame(r),i=t(),1===e._timeLine.length&&(e.resetRender(),console.log("停播"));var o=e._timeLine[1]-e._timeLine[0]||150,a=i-n;e._playDelay>0&&(a+=e._playDelay),a>o&&(e._timeLine.splice(0,1),e.play(o),n=t(),i=n)}))}},{key:"play",value:function(e){var t=this,n=[],i=this._timeLine[0];this.Vue.$emit("timeLine",i),this._timeSnapshot&&e&&(this._playDelay+=(new Date).getTime()-this._timeSnapshot-e),this._timeSnapshot=(new Date).getTime();if([].concat(this._renderIds).forEach((function(e){for(var r=t._BufferMap[e].buffers,o=-1,a=-1,l=0;l<r.length;l++){var c=r[l].correctedTime;if(i===c){o=l,a=l;break}if(!(i>c)){t._models[e]&&t.map.removeEntity(t._models[e]),delete t._models[e];break}a=l+1}if(a>0&&r.splice(0,a),0===r.length)return t.removeAddPerception(e),!1;if(o<0)return!1;var u=r[0],h=u.type,d=u.longitude,f=u.latitude,p=!t.lodModelConfig,m=t.lodModelConfig&&t.lodModelConfig.render&&(0,s.pointInArea)(t.lodModelConfig.center,t.lodModelConfig.radius,[d,f]);if(n.push(u),p||m){if(t._models[e])t.moveAddPerception(u);else if(t.modelTypeMap[h]){var v=t.modelTypeMap[h].key;"pedestrian"===v&&(v=10*Math.random()>5?"pedestrian_man_animate":"pedestrian_woman_animate"),t.initAddPerception(u,v)}else if(h<100)return void console.log("无模型障碍物渲染","id-类型",e+"-"+h)}else t._models[e]&&t.map.removeEntity(t._models[e]),delete t._models[e];r.splice(0,1),0!==r.length?p||m||(t.map.removeEntity(t._models[e]),delete t._models[e]):t.removeAddPerception(e)})),this.Vue.$emit("renderData",n,this,[],[]),this.rate&&this._renderIds.length&&!this.realPlay&&this.betterRenderConfig.insertData){var r=this._timeLine[1]-i;this.insertRender(this._renderIds,r/(this.rate+1),i)}}},{key:"insertRender",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2];this.intervalTimer&&e.clearInterval(this.intervalTimer);var o=0,a=function(){o+=1,t.forEach((function(e){var t=n._insertDataMap[e];if(t){for(var i=-1,o=-1,a=0;a<t.length;a++){var s=t[a][0].correctedTime;if(r===s){i=a,o=a;break}if(!(r>s))break;o=a+1}if(o&&t.splice(0,o),t.length||delete n._insertDataMap[e],i<0)return!1;var l=t[0],c=n._models[e];if(c){var u=l[0],h=u.position,d=u.heading;if(h){var f=h.x,p=h.y;c.visible=n.modelVisible,n.map.moveEntity(c,e,f,p,d)}l.splice(0,1)}else delete n._insertDataMap[e];l.length||(t.splice(0,1),t.length||delete n._insertDataMap[e])}})),o===n.rate&&(e.clearInterval(n.intervalTimer),n.intervalTimer=null)};e.setInterval((function(){a()}),i,(function(e){n.intervalTimer=e}))}},{key:"initAddPerception",value:function(t,n){var i=t.id,r=t.x,o=t.y,a=t.heading,s=t.type,l=t.label,c=t.z,u=t.carColor,h=t.source,d=t.speed,f=t.plateNumber,p={text:l};this.modelTypeMap[s]&&(p.labelOffset=this.modelTypeMap[s].labelOffset||[0,2,-2]);var m={modelType:n,label:p,subType:s,source:h,z:c},v=void 0,g=this.ModelPark.getModel(i,r,o,a,m,"utm");if((v=g||this.map.addEntity(i,r,o,a,m)).visible=this.modelVisible,v.intersectsVisible&&(v.visible="true"===v.intersectsVisible),this._models[i]=v,n.indexOf("pedestrian")>-1&&v.scale.set(1.1,1.1,1.1),this.setColor(v,t[this.colorOption.key],u),this.showLabelType.includes(s))if(this.showSpeed&&this.showPlateNumber)console.log("待开发 车速跟车牌的联合标签");else if(this.showSpeed){var y=e.drawSpeedLabel((3.6*d).toFixed(0)||0);v.add(y),y.position.set(0,0,3.5)}else if(this.showPlateNumber&&f){var b=this.drawNumberLabel(f);v.add(b),b.position.set(0,0,3.5)}return v}},{key:"moveAddPerception",value:function(t){var n=t.id,i=t.x,r=t.y,o=t.heading,a=t.label,s=t.carColor,c=t.speed,u=t.copy,h=t.plateNumber,d=this._models[n];if("trafficcone"!==d.modelType){d.visible=this.modelVisible;var f=d.children.find((function(e){return e&&e instanceof l.BasicLabel}));if(this.showPlateNumber&&!f&&h){var p=this.drawNumberLabel(h);d.add(p),p.position.set(0,0,3.5)}else this.showSpeed&&f&&e.drawSpeedLabel((3.6*c).toFixed(0)||0,f);if(d.intersectsVisible&&(d.visible="true"===d.intersectsVisible),d.modelType.indexOf("pedestrian")>-1&&d.modelType.indexOf("animate")>-1){var m=0===Number(c);d.pedestrianStatus&&d.pedestrianStatus===m||(m?d.stop():d.play())}return this.setColor(d,t[this.colorOption.key],s),this.map.moveEntity(d,n,i,r,o,u&&a?a+"_copy":a),d}}},{key:"removeAddPerception",value:function(e){var t=this._models[e];t&&(this.map.removeEntity(t),delete this._models[e]),this._BufferMap[e]&&delete this._BufferMap[e],this._insertDataMap[e]&&delete this._insertDataMap[e];var n=this._renderIds.indexOf(e);this._renderIds.splice(n,1)}},{key:"setColor",value:function(e,t,n){var i=e.name,r=e.modelType;"elementType"===this.colorOption.key&&(e.eventType=t);if(!["trafficcone","newbicycle","newmotorcycle"].includes(r))if(this.showColor){if("elementType"===this.colorOption.key)if(4===Number(t))this._corpseMap[i]=210;else if(this._corpseMap[i]){if(this._corpseMap[i]-=1,0!==this._corpseMap[i])return!1;delete this._corpseMap[i]}var o=this.colorOption.map,a=o[t]?o[t].color:o.default.color;r.indexOf("new")>-1?e.setNameColor("body",new h.Color(n||a)):e.setColor(new h.Color(n||a))}else r.indexOf("new")>-1?e.setNameColor("body",new h.Color(this.colorOption.map.default.color)):e.setColor(new h.Color(this.colorOption.map.default.color))}},{key:"changeModelVisible",value:function(e){var t=this;this.modelVisible=!e,(0,i.default)(this._models).forEach((function(n){t._models[n].visible=!e}))}},{key:"setInfoLabelStatus",value:function(e,t){var n=this;(0,i.default)(this.models).forEach((function(t){var i=n.models[t].children.find((function(e){return e instanceof l.BasicLabel}));i&&(i.visible=e)})),this["show"+t.substring(0,1).toUpperCase()+t.substring(1)]=e}},{key:"drawNumberLabel",value:function(e){var t=e.substring(0,1),n=e.substring(1);return(0,s.drawSimpleInfo)([{text:t,fontSize:12,color:"#E2EBFA",position:[8,3],textAlign:"left",fontFamily:"FZLTZHK--GBK1-0"},{text:n,fontSize:12,color:"#E2EBFA",position:[22,3],textAlign:"left",fontFamily:"HyperspaceRace-Bold"}],{width:76,height:18,borderColor:"#2466f4",backgroundColor:"#0A2D74",borderRadius:2,borderWidth:1})}},{key:"resetRender",value:function(){var t=this;(0,i.default)(this._models).forEach((function(e){t.removeAddPerception(String(e))})),this._models={},this._timeLine=[],this._BufferMap={},this._insertDataMap={},this._timeSnapshot=null,this._renderStatus="can not",this._renderIds=[],this._playDelay=0,e.clearInterval(this.renderInterval),this.autoInterval=0,e.clearInterval(this.intervalTimer),this.intervalTimer=0,console.log("重置")}}],[{key:"removeShakeData",value:function(e,t){var n=e.x,i=e.y,r=e.heading,o=t.x-n,a=t.y-i;Math.abs(o)<.3&&Math.abs(a)<.3&&(t.x=n,t.y=i,t.heading=r)}},{key:"rectifyData",value:function(e,t,n){var i=e.x,r=e.y,o=t.x,a=t.y,s=n.x,l=n.y,u=c.default.getVector3(i,r,0),d=c.default.getVector3(o,a,0),f=c.default.getVector3(s,l,0),p=(new h.Vector3).subVectors(u,d).normalize(),m=(new h.Vector3).subVectors(d,f).normalize(),v=new h.Vector3(0,1,0);p.length()&&m.length&&(p.angleTo(m)/(Math.PI/180)>30&&(n.x=o,n.y=a));var g=(new h.Vector3).subVectors(c.default.getVector3(n.x,n.y,0),d).normalize(),y=c.default.getAngle(v,g)/(Math.PI/180);n.head=y}},{key:"insertData",value:function(e,t,n){e.position={x:e.x,y:e.y},e.position.z=0,t.position={x:t.x,y:t.y},t.position.z=0;var i=void 0;if(t.timestamp===e.timestamp||t.x===e.x&&t.y===e.y){i=[];for(var r=0;r<n;r++)i.push({correctedTime:e.correctedTime});return i}var o=d.Utils.densityPoint(e,t,(t.correctedTime-e.correctedTime)/1e3,n);return i=o.slice(1,o.length-1),i.forEach((function(t){t.correctedTime=e.correctedTime})),i}},{key:"setInterval",value:function(e,t,n){var i=Date.now,r=i(),o=r,a=void 0;return a=requestAnimationFrame((function s(){a=requestAnimationFrame(s),o=i(),n(a),o-r>t&&(r=i(),o=r,e(a))}))}},{key:"clearInterval",value:function(e){cancelAnimationFrame(e)}},{key:"calculatingTargetPoints",value:function(e,t,n,i,r){var o=i*(Math.PI/180),a=c.default.getVector3(e,t,n),s=c.default.transformUTMToWGS84({x:a.x-r*Math.sin(o),y:a.y+r*Math.cos(o)});return[s.x,s.y]}},{key:"drawRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getContext("2d"),i=t.x,r=t.y,o=t.width,a=t.height,s=t.border,l=t.fillColor,c="#333",u=0,h=0;if(s){var d=s.width,f=s.color,p=s.radius;c=f,u=d,h=p}c&&u&&(n.strokeStyle=c,n.lineWidth=u,n.beginPath(),n.moveTo(i+h,r),n.lineTo(i+o-h,r),n.arc(i+o-h,r+h,h,Math.PI/180*270,0,!1),n.lineTo(i+o,r+a-h),n.arc(i+o-h,r+a-h,h,0,Math.PI/180*90,0,!1),n.lineTo(i+h,r+a),n.arc(i+h,r+a-h,h,Math.PI/180*90,Math.PI/180*180,!1),n.lineTo(i,r+h),n.arc(i+h,r+h,h,Math.PI/180*180,Math.PI/180*270,!1),n.stroke(),l&&(n.fillStyle=l,n.fill()))}},{key:"drawSpeedLabel",value:function(e,t){var n=void 0;return t&&t.texture?(t.drawContent([{textList:[{text:e,fontSize:14,color:"#E2EBFA",position:[22,4],textAlign:"center",fontFamily:"HyperspaceRace-Bold"}]}]),n=t):n=new l.BasicLabel({scaleNum:6,sizeAttenuation:!0,style:{width:66,height:26,backgroundImage:"https://mapdata.bj.bcebos.com/images/common/speed-back2.png"},center:{x:.5,y:0},content:[{textList:[{text:e,fontSize:14,color:"#E2EBFA",position:[22,4],textAlign:"center",fontFamily:"HyperspaceRace-Bold"}]}]}),n}}]),e}();t.default=m},function(e,t,n){n(336),e.exports=n(14).Object.getPrototypeOf},function(e,t,n){var i=n(66),r=n(163);n(123)("getPrototypeOf",(function(){return function(e){return r(i(e))}}))},function(e,t,n){e.exports={default:n(338),__esModule:!0}},function(e,t,n){n(339),e.exports=n(14).Object.setPrototypeOf},function(e,t,n){var i=n(36);i(i.S,"Object",{setPrototypeOf:n(340).set})},function(e,t,n){var i=n(50),r=n(43),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(63)(Function.call,n(165).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){n(342);var i=n(14).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(36);i(i.S,"Object",{create:n(108)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(21)),r=l(n(19)),o=l(n(20)),a=n(17),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.Map=t.Map,this.modelBaseUrl="https://mapdata.bj.bcebos.com/maptv/model",this._modelListMap={},this._extraModelListMap={},this.init(t.modelsMap)}return(0,o.default)(e,[{key:"init",value:function(e){var t=this;(0,i.default)(e).forEach((function(n){for(var i=e[n].num,r=0;r<i;r++){var o=new a.Model({name:"park_"+n+"_"+r,modelUrl:t.modelBaseUrl+"/"+n+".glb",modelType:n});t.Map.viewer.scene.addModel(o),t._modelListMap[n]?t._modelListMap[n].list.push(o):t._modelListMap[n]={list:[o],activeNum:i}}}))}},{key:"getModel",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"wgs84",l=r.modelType,c=r.label,u=c.text,h=c.labelOffset,d=c.fontsize,f=r.subType,p=r.z;if(!this._modelListMap[l])return!1;var m=this._modelListMap[l],v=m.list,g=m.activeNum,y=v[g-1];this._modelListMap[l].activeNum-=1,this._modelListMap[l].list.splice(g-1,1);var b=void 0,x=void 0;if("wgs84"===o){var w=a.Utils.transformWGS84ToUTM({x:t,y:n});b=w.x,x=w.y}else b=t,x=n;return y.setRotationFromAxisAngle(new s.Vector3(0,0,1),i*(Math.PI/180)),y.position.set(b,x,p),y.setText(u),y.labelOffset=h,y.label&&y.label.setSize(d||12),y.name=e,y.subType=f,y}},{key:"resetModel",value:function(e){if(!this._modelListMap[e.modelType])return!1;var t=this._modelListMap[e.modelType].activeNum;return e.position.set(0,0,0),e.name="park_"+e.modelType+"_"+t,e.subType=null,e.hideLabel(),this._modelListMap[e.modelType].activeNum+=1,this._modelListMap[e.modelType].list.push(e),!0}},{key:"addExtraModel",value:function(e){if(this._extraModelListMap[e]){var t=this._extraModelListMap[e].activeNum,n=new a.Model({name:"extra_"+e+"_"+t,modelUrl:this.modelBaseUrl+"/"+e+".glb",modelType:e});n.subType=this._modelListMap[e].subType,this._extraModelListMap[e].list.push(n),this._extraModelListMap[e].activeNum+=1}else{var i=new a.Model({name:"extra_"+e+"_0",modelUrl:this.modelBaseUrl+"/"+e+".glb",modelType:e});i.subType=this._modelListMap[e].subType,this._extraModelListMap[e]={activeNum:1,list:[i]}}this.viewer.scene.addModel(void 0)}},{key:"disposeExtraModel",value:function(){}},{key:"dispose",value:function(){}}]),e}();t.default=c},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,n){"use strict";var i=new RegExp("%[a-f0-9]{2}","gi"),r=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],o(n),o(i))}function a(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(i),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(i);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=a(n[0]);i!==n[0]&&(t[n[0]]=i)}n=r.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t){var n=1;function i(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}e.exports=function(e){return new Promise((function(t,r){var o=document.createElement("script"),a=e.url;if(e.params){var s=i(e.params);s&&(a+=(a.indexOf("?")>=0?"&":"?")+s)}function l(){o&&(o.onload=o.onreadystatechange=o.onerror=null,o.parentNode&&o.parentNode.removeChild(o),o=null)}o.async=!0;var c="axiosJsonpCallback"+n++,u=window[c],h=!1;window[c]=function(e){(window[c]=u,h)||t({data:e,status:200})};var d={_:(new Date).getTime()};d[e.callbackParamName||"callback"]=c,a+=(a.indexOf("?")>=0?"&":"?")+i(d),o.onload=o.onreadystatechange=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||l()},o.onerror=function(){l(),r(new Error("Network Error"))},e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(h=!0,r(e))})),o.src=a,document.head.appendChild(o)}))}},function(e,t,n){
/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT © Zeno Rocha
 */
var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function r(){i.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n,e.exports.TinyEmitter=n},function(e,t,n){var i=n(3),r=n(4);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(i.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(i.string(e))return function(e,t,n){return r(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var i=n(5);function r(e,t,n,i,r){var a=o.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,i,o){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,n,i,o)})))}},function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=r()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=r()(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}(),l=n(1),c=n.n(l),u=n(2),h=n.n(u),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),f(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=h()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return m("action",e)}},{key:"defaultTarget",value:function(e){var t=m("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return m("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}]),t}(c.a);function m(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}t.default=p}]).default},e.exports=i()},function(e,t,n){"use strict";n.r(t);var i=n(100),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(142),s=n(30);var l=function(e){n(350)},c=Object(s.a)(r.a,a.a,a.b,!1,l,"data-v-65360c46",null);c.options.__file="src\\components\\InfoPane.vue",t.default=c.exports},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t);var i=n(101),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(143),s=n(30);var l=function(e){n(352)},c=Object(s.a)(r.a,a.a,a.b,!1,l,null,null);c.options.__file="src\\components\\ErrorPage.vue",t.default=c.exports},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t);var i=n(102),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(144),s=n(30);var l=function(e){n(354)},c=Object(s.a)(r.a,a.a,a.b,!1,l,"data-v-22808c7a",null);c.options.__file="src\\components\\LoadProgress.vue",t.default=c.exports},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t);var i=n(103),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(145),s=n(30);var l=function(e){n(356)},c=Object(s.a)(r.a,a.a,a.b,!1,l,"data-v-0688dcc3",null);c.options.__file="src\\components\\IconMap.vue",t.default=c.exports},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(13)),r=f(n(22)),o=f(n(21)),a=f(n(24)),s=f(n(19)),l=f(n(20)),c=n(17),u=n(0),h=n(40),d=n(125);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),this.viewer=null,this.loader=null,this.cityCode=null,this.trackedEntityId=null,this.tripLayer=null,this.lineNodeList=[],this.faceNodeList=[],this.mapLayer=null,this.MODELS=c.MODELS,this.zoneConfig=d.zoneConfig,this.id=t.id,this.modelBaseUrl="https://mapdata.bj.bcebos.com/maptv/model"}return(0,l.default)(e,[{key:"initGL",value:function(e,t,n){var i=t||{backgroundColor:"#122246"};console.log("Viewer",c.Viewer),this.viewer=new c.Viewer(e,i),this.viewer.setRenderMode(c.RENDER_MODE[n]),this.viewer.scene.view.maxPitch=0*-Math.PI/90,this.viewer.scene.view.minPitch=90*-Math.PI/90,this.viewer.scene.view.maxRadius=8e3,this.viewer.scene.view.minRadius=50,this.viewer.scene.basemap.visible=!1,this.viewer.setExposure(t.Exposure||1),window.viewer?window["viewer-"+this.id]=this.viewer:window.viewer=this.viewer,this.loader=new c.GeoJsonLoader({scene:this.viewer.scene})}},{key:"initData",value:function(e,t){var n=this;this.cityCode=e;var i=(new Date).getTime(),r="https://mapdata.bj.bcebos.com/maptv/json/"+e,s=[],l=[];["pdt"].forEach((function(e){s.push((0,h.get)(r+"/"+e+"_line.json").then((function(e){return e})).catch((function(e){console.log(e)}))),l.push((0,h.get)(r+"/"+e+"_face.json").then((function(e){return e})).catch((function(e){console.log(e)})))}));var u=a.default.all(s).then((function(e){var i={};e.forEach((function(e){e&&e.forEach((function(e){var t=e.layer_name,n=e.layer_geojson.features;i[t]?i[t]=i[t].concat(n):i[t]=n}))})),(0,o.default)(i).forEach((function(e){var r=e?t[e].params:{},o=c.Utils.json2line(i[e],r);n.lineNodeList.push(o),n.viewer.scene.scene.add(o)}))})),d=a.default.all(l).then((function(e){var i={};e.forEach((function(e){e&&e.forEach((function(e){var t=e.layer_name,n=e.layer_geojson.features;i[t]?i[t]=i[t].concat(n):i[t]=n}))})),(0,o.default)(i).forEach((function(e){var r=e?t[e].params:{},o=c.Utils.json2polygon(i[e],r);n.faceNodeList.push(o),n.viewer.scene.scene.add(o)}))}));return a.default.all([u,d]).then((function(){console.log("加载完毕","耗时： "+((new Date).getTime()-i)+"ms")}))}},{key:"initLod",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.cityCode=e;var o=new c.MapLayerLoader({debuggerMode:r});return new a.default((function(e){o.load(t,(function(t){n&&(t.style=n),t.minimumTilePixelSize=128,console.log("mapLayer",i.viewer.scene,t),i.viewer.scene.addMapLayer(t),i.mapLayer=t,i.fitToScene(),e(t)}))}))}},{key:"zoomPosition",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=i*(Math.PI/180),s=c.Utils.transformWGS84ToUTM({x:e,y:t}),l=s.x,u=s.y;this.viewer.flyTo(l,u,n,a,r,o)}},{key:"animationTo",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=i*(Math.PI/180),l=c.Utils.transformWGS84ToUTM({x:e,y:t}),h=l.x,d=l.y;console.log(h,d);var f=c.Utils.animateTo(this.viewer.scene,new u.Vector3(h,d,n),s,r,o,a);return f}},{key:"fitToScene",value:function(){this.viewer.fitToScene()}},{key:"setCompass",value:function(e){this.viewer.campass.setVisible(e)}},{key:"mapSwitch",value:function(e,t,n){this.viewer.switchDimension(e,t,n)}},{key:"addModel",value:function(e){this.viewer.scene.addModel(e)}},{key:"addIncident",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=new c.TrafficLabel({name:e,text:t,trafficType:"bridge"}),a=c.Utils.transformWGS84ToUTM({x:n,y:i}),s=a.x,l=a.y;o.position.set(s,l,r),this.addModel(o)}},{key:"removeObj",value:function(e){var t=null;t="object"!==(void 0===e?"undefined":(0,r.default)(e))?this.viewer.scene.getObjectByName(e):e,this.viewer.scene.removeModel(t)}},{key:"addEntity",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.modelType,a=r.label,s=a.text,l=a.labelOffset,h=a.fontsize,d=r.subType,f=r.source,p=r.z,m=c.Utils.transformWGS84ToUTM({x:t,y:n}),v=m.x,g=m.y,y=void 0;return(y=o.indexOf("animate")>-1?new c.DynamicModel({name:e,modelUrl:this.modelBaseUrl+"/"+o+".glb",text:s,labelOffset:l,modelType:o}):new c.Model({name:e,modelUrl:this.modelBaseUrl+"/"+o+".glb",text:s,labelOffset:l,modelType:o})).setRotationFromAxisAngle(new u.Vector3(0,0,1),i*(Math.PI/180)),y.label&&y.label.setSize(h||12),y.position.x=v,y.position.y=g,y.position.z=p,y.subType=d,y.source=f,this.addModel(y),y}},{key:"moveEntity",value:function(e,t,n,i,r,o,a){var s=c.Utils.transformWGS84ToUTM({x:n,y:i}),l=s.x,h=s.y;e.position.x=l,e.position.y=h,e.setRotationFromAxisAngle(new u.Vector3(0,0,1),r*(Math.PI/180)),e.text?(o?e.showLabel():e.hideLabel(),e.setText(o)):o&&e.setText(o),o?e.text?e.showLabel():e.setText(o):e.text&&e.hideLabel(),e.text=o}},{key:"removeEntity",value:function(e){this.removeObj(e)}},{key:"addPolygon",value:function(e){var t=new c.Polygon(e);this.addModel(t)}},{key:"addLine",value:function(e){var t=new c.Polyline(e);this.addModel(t)}},{key:"addPolyline",value:function(e){return new c.Polyline(e)}},{key:"addTrafficLight",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=c.Utils.transformWGS84ToUTM({x:e,y:t}),a=o.x,s=o.y,l=new c.TrafficLights((0,i.default)({text:"00",imgUrl:"./img/left-green.png",width:20,height:40},n));l.position.set(a,s,3),l.sprite.center.x=0===r?0:1.5*r,this.viewer.scene.addTrafficLight(l)}},{key:"updateTrafficLight",value:function(e,t,n){var i=this.viewer.scene.getObjectByName(e);i&&i.setText(t,n)}},{key:"removeTrafficLight",value:function(e){var t=this.viewer.scene.getObjectByName(e);console.log("移除Label",t),this.viewer.scene.removeTrafficLight(t)}},{key:"addBuilds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"#222d50",topColor:"#ababab"},n=c.Utils.json2building(e,t),i=n.building;this.addModel(i)}},{key:"mergeLines",value:function(e,t){return c.Utils.json2line(e,t)}},{key:"addTripLayer",value:function(e){return this.tripLayer=new c.PolylineTripLayer(e),this.tripLayer}},{key:"loadTripLayers",value:function(e){var t=this;this.tripLayer.geoJsonload(e).then((function(e){t.viewer.scene.addBlurObject(e)}))}},{key:"openClick",value:function(e){new ScreenSpaceEventHandler(this.viewer.scene.canvas).setInputAction(e,ScreenSpaceEventType.LEFT_CLICK)}},{key:"getMouseObject",value:function(e,t){var n=this.viewer.area.getBoundingClientRect(),i=e.clientX,r=e.clientY,o=this.viewer.scene.getActiveCamera();return c.Utils.getMouseObjectIntersection({x:i-n.left,y:r-n.top},o,this.viewer,t,{_isRealPosition_:!0})}},{key:"addTextLabel",value:function(e){return new c.TextSprite(e)}},{key:"followObj",value:function(e,t){var n=null;if(n="string"==typeof e?this.viewer.scene.getObjectByName(e):e){var i=c.Utils.degreeToRadian(n.heading),r=t?-.15:-.4,o=t?-2:50,a=c.Utils.getCameraByTargetAndView(window.viewer,n.getWorldPosition(),{yaw:i,pitch:r,radius:o}),s=t?a.position.z+2:a.position.z;window.viewer.scene.view.position.x=a.position.x,window.viewer.scene.view.position.y=a.position.y,window.viewer.scene.view.position.z=s,window.viewer.scene.view.yaw=i,window.viewer.scene.view.radius=o,window.viewer.scene.view.pitch=r}}},{key:"transformUTMToWGS84",value:function(e){var t="+proj=utm +zone= "+this.zoneConfig[this.cityCode]+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs ";return c.Utils.transformPosition(e,t,"EPSG:4326")}},{key:"createAnimate",value:function(e){return new c.AnimationPath(e)}},{key:"zoomToPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments[4],o=arguments[5],a=new u.Object3D;a.boundingSphere=new u.Sphere(new u.Vector3(0,0,0),i),a.position.set(e,t,1),a.updateMatrixWorld(),this.viewer.zoomTo(a,1,n,r,o)}},{key:"addPlane",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new u.MeshBasicMaterial({opacity:t.opacity,depthTest:!0,depthWrite:!1}),r=new u.PlaneGeometry(4e5,4e5),o=new u.Mesh(r,i);if(o.position.set(t.offset[0],t.offset[1],t.offset[2]),o.renderOrder=3,n){var a=new u.TextureLoader;a.load(n,(function(t){t.wrapS=RepeatWrapping,t.wrapT=RepeatWrapping,t.repeat.set(40,40),i.map=t,e.scene.addModel(o)}))}else i.color.set(t.color),this.viewer.scene.addModel(o)}}],[{key:"getVector3",value:function(e,t,n){var i=c.Utils.transformWGS84ToUTM({x:e,y:t}),r=i.x,o=i.y;return new u.Vector3(r,o,n)}},{key:"transformUTMToWGS84",value:function(e){var t="+proj=utm +zone= "+d.zoneConfig[this.cityCode]+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs ";return c.Utils.transformPosition(e,t,"EPSG:4326")}},{key:"intersectModels",value:function(e,t){if(e&&t&&t.length)for(var n=e.name,i=e.getBoundingBoxWorld(),r=0;r<t.length;r++)if(n!==t[r].name){var o=t[r].getBoundingBoxWorld();i.intersectsBox(o)?(console.log(t[r].name),t[r].intersectsVisible="false"):t[r].intersectsVisible="true"}}},{key:"getAngle",value:function(e,t){var n=e.angleTo(t),i=e.clone();return i.cross(t),i.z<0&&(n=-n),n}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=x(n(13)),r=x(n(25)),o=x(n(21)),a=x(n(24)),s=n(67),l=n(46),c=n(17),u=n(0),h=n(360),d=n(155),f=n(224),p=n(225),m=n(226),v=n(156),g=n(367),y=n(369),b=n(40);function x(e){return e&&e.__esModule?e:{default:e}}t.default={methods:{loadModels:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.showProgress=!0;var r=e.path,s=e.names,l=e.hasSceneNames,u=e.commonPath,d=e.animateNames,f=e.commonNames,p=e.bosModelList,m=i.pcdPath,v=[],g=s?s.length:0,y=l?l.length:0,b=f?f.length:0,x=d?d.length:0,w=p?p.length:0,_=n?n.length:0,S=g+y+b+x+w+_,M=100/S,T=[];window.loadModelList=T;var E=function(e){var t=T.findIndex((function(t){return e===t}));T.splice(t,1)},C=function(e,n,i,r,o){e.forEach((function(e){var s=""+n+e+".glb",l=null;"0"===e.substring(0,1)&&(l=e.substring(0,2));var u=new a.default((function(t,n){if(T.push(e),r||e.indexOf("animate")>-1||"03"===l){var i=new c.DynamicModel({modelUrl:s,modelType:e});r&&(i.dynamicType="frame"),i.onLoad=function(){E(e),t(i)},i.loaded&&i.onLoad()}else{var a={modelUrl:s,modelType:e};(o||l&&"00"!==l)&&(a.isLoadScene=!0);var u=new c.Model(a);u.onLoad=function(){E(e),t(u)},u.loaded&&u.onLoad()}}));u.then((function(){t.loadPercent+=i})),v.push(u)}))},A=function(e){e.forEach((function(e){var n=e.fileName,i=e.url,r=n.split(".")[0],o=null;"0"===r.substring(0,1)&&(o=r.substring(0,2));var s=new a.default((function(e,t){if(T.push(r),"03"===o){var n=new c.DynamicModel({modelUrl:i,modelType:r});n.onLoad=function(){e(n)},n.loaded&&n.onLoad()}else{var a={modelUrl:i,modelType:r};o&&"00"!==o&&(a.isLoadScene=!0);var s=new c.Model(a);s.onLoad=function(){E(r),e(s)},s.loaded&&s.onLoad()}}));s.then((function(){t.loadPercent+=M})),v.push(s)}))};return g&&C(s,r,M),x&&C(d,r,M,!0),y&&C(l,r,M,!1,!0),b&&C(f,u,M),w&&A(p),a.default.all(v).then((function(){t.pcdObjList=[];var e=(0,h.loadPcd)(m,(function(){t.loadPercent+=M}),n);return a.default.all(e).then((function(e){e.length&&e.forEach((function(e){e&&(e.position.z-=10020.6,window.viewer.scene.addModel(e),e.visible=!1,t.pcdObjList.push(e))})),setTimeout((function(){t.showProgress=!1;var e=t.Map.MODELS;(0,o.default)(c.MODELS).forEach((function(t){e[t]=c.MODELS[t]}))}),1e3)}))}))},loadFonts:function(e){var t=this,n=e.map((function(e){var t=e.name,n=e.url;return new FontFace(t,"local('"+t+"'),url('"+n+"') format('ttf'),url('"+n+"')").load()}));return a.default.all(n).then((function(e){e.forEach((function(e){document.fonts.add(e)})),t.mapLoading=!1}))},createAnimationLine:function(e,t){var n={vertices:e.geometry.coordinates[0],color:"#75EAF4",gapSize:1500,tripSize:1500};"kexuecheng"===t&&(n.gapSize=8e3,n.tripSize=5e3);var i=(0,v.createTripLine)(n);this.tripLineMap[t]=i,i.position.z=271,this.Map.viewer.scene.addAnimateObject(i)},addRegion:function(e){var t=this,n=[],i=[],o=e.cityRange,u=e.townshipRange,h=e.areaRange;if(o){var f=l.style.region,p=(0,s.getRegion)(o,this.cityId).then((function(e){var i=e.features,r=c.Utils.json2line(i,{color:f.color,width:f.width});r.visible=f.visible,t.Map.viewer.scene.addBlurObject(r),n.push(r)}));i.push(p)}if(u){var m=l.style.township,v=(0,s.getRegion)(u,this.cityId).then((function(e){var i=e.features,r=c.Utils.json2line(i,{color:m.color,width:m.width});r.visible=m.visible,t.Map.viewer.scene.addBlurObject(r),n.push(r)}));i.push(v)}if(h){var g=l.style.range;(0,s.getRegion)(h,this.cityId).then((function(e){var i=e.features,o=[];i.forEach((function(e){var n=e.properties.name,i=c.Utils.json2polygon([e],g);t.Map.viewer.scene.addBlurObject(i),o.push(i),t.createAnimationLine(e,n);var a=new d.Diamond({name:n,sizeAttenuation:!0,height:10,radius:5}),s=(0,r.default)(t.diamondInfoMap[n].position,2),l=s[0],u=s[1];a.position.set(l,u,275),t.diamondMap[n]=a,t.diamondMap[n].top1.stop=!1,t.diamondMap[n].top2.stop=!1,t.Map.viewer.scene.addAnimateObject(a),i.addEventListener("mouseup",(function(e){t.setActiveArea(n,[l,u])}))})),n.push(o)}))}return a.default.all(i).then((function(){return n}))},addCentralRoad:function(){var e=this;(0,s.getRegion)("lu.geojson",this.cityId).then((function(t){for(var n=t.features,i=[],r=[new u.Color(.98,1,.407),new u.Color(.37,1,.95),new u.Color(.34,.66,1)],o=0;o<n.length;o++){var a={vertices:n[o].geometry.coordinates,color:r[o%3],colorTrip:r[o],gapSize:200+300*Math.random(),tripSize:500+700*Math.random(),linewidth:2,useOpacity:!1,speed:5+10*Math.random()},s=(0,v.createTripLine)(a);s&&(s.position.z=10,s.layers.enable(1),i.push(s),e.Map.viewer.scene.addAnimateObject(s))}e.distinctFlow=i}))},setVisibleOfDistinctFlow:function(e){if(e&&!this.distinctFlow&&this.addCentralRoad(),this.distinctFlow)for(var t=0;t<this.distinctFlow.length;t++)this.distinctFlow[t].visible=e},mockCar:function(){if(this.mock&&""!==this.mock){var e=this.mock.split(","),t=(0,r.default)(e,3),n=t[0],i=t[1],o=t[2],a=new c.Model({name:"mockCar",modelUrl:"https://mapdata.bj.bcebos.com/maptv/model/car.glb",modelType:"car",color:"#DAE9FF"});a.setRotationFromAxisAngle(new u.Vector3(0,0,1),Number(o)*(Math.PI/180)),a.position.x=Number(n),a.position.y=Number(i),a.position.z=.7,window.viewer.scene.addModel(a);this.addTrafficEvent({position:[Number(n),Number(i),1],options:{name:"mockEvent",source:"side",roadId:13,eventName:"交通事故",id:"xx",rscuId:"xx",startTime:"xx",laneInfo:"xx",trafficType:"trafficAccident",imgUrlMap:{icon:"https://mapdata.bj.bcebos.com/maptv/img/trafficEvent/trafficAccident.png"}}})}},addEditorLayer:function(e){this.editor=new g.Editor({viewer:this.Map.viewer,list:e}),this.editor.init()},addEditor2Layer:function(e){this.editor2=new y.Editor2(this.Map.viewer,{ResourcePath:e,Vue:this})},addCarWaves:function(){this.carWave=(0,c.createWaveCircle)({color:new u.Color("#4eba60"),radius:4,speed:2}),this.carWave.visible=!1,this.Map.viewer.scene.addAnimateObject(this.carWave)},addTunnelWater:function(e,t){var n=this;(0,b.get)(e).then((function(e){for(var i=e.features[0].geometry.coordinates[0],r=i[0],o=[],a=[],s=[],l=0,h=i.length;l<h;l++)o.push(i[l][0]-r[0],i[l][1]-r[1],0),s.push(0,0,1),l&&l<59?a.push(0,Math.max(0,Math.min(1,l/58))):l?a.push(1,Math.max(0,Math.min(1,(111-l)/48))):a.push(1,0);var d=c.Utils.triangulateShape(o),f=new u.BufferGeometry;f.setAttribute("position",new u.Float32BufferAttribute(o,3)),f.setAttribute("uv",new u.Float32BufferAttribute(a,2)),f.setAttribute("normal",new u.Float32BufferAttribute(s,3)),f.setIndex(d),f.computeBoundingBox(),f.computeBoundingSphere();var p=new u.Mesh(f,(0,c.createWaterFour)({alpha:.8,SEA_HEIGHT:.3,SEA_CHOPPY:2,SEA_SPEED:.2,SEA_BASE:new u.Vector3(.16,.149,.094),SEA_WATER_COLOR:new u.Vector3(.33,.247,.067)}));n.water=p,p.name=t,p.position.x=r[0],p.position.y=r[1],p.position.z=-7,p.update=function(){this.material.uniforms.iTime.value+=.001},n.Map.viewer.scene.addAnimateObject(p)}))},updateWater:function(e){this.water.update=function(){if(this.material.uniforms.iTime.value+=.01,this.position.z>e)this.position.z-=.0025;else{if(Math.abs(this.position.z-e)<.01)return;this.position.z+=.0025}}},addActiveWave:function(){this.WaveCircle4=(0,c.createWaveCircle4)({radius:.6,height:3,width:.02,color:new u.Color("#bbfaff")}),this.WaveCircle2=(0,c.createWaveCircle2)({color:new u.Color("#bbfaff"),radius:1.25,lineWidth:.08}),this.Map.viewer.scene.addAnimateObject(this.WaveCircle4),this.Map.viewer.scene.addAnimateObject(this.WaveCircle2)},updateActiveWave:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.WaveCircle4.position.visible=n,this.WaveCircle4.position.visible=n,n){var i=e.x,r=e.y;this.WaveCircle4.position.set(i,r,1.7),this.WaveCircle2.position.set(i,r,.8),t&&(this.WaveCircle4.material.uniforms.color.value=new u.Color(t),this.WaveCircle2.material.uniforms.color.value=new u.Color(t))}},createFlagLabel:function(e){var t=new m.TrafficEvent3(e);return this.Map.viewer.scene.addAnimateObject(t),t},addCurveLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];e.forEach((function(e){if(n.length){var t=e.longitude,i=e.latitude,r=n[n.length-1],o=1e6*(r.longitude-t),a=1e6*(r.latitude-i);(Math.abs(o)>5||Math.abs(a)>5)&&n.push(e)}else n.push(e)}));var i=n.map((function(e){var t=e.longitude,n=e.latitude,i=c.Utils.transformWGS84ToUTM({x:t,y:n});return[i.x,i.y,.9]}));if(!i.length||i.length<2)this.curveLine&&(this.curveLine.visible=!1);else if(this.curveLine)this.curveLine.visible||(this.curveLine.visible=!0),this.curveLine.vertices=i,this.curveLine.updateMesh();else{var r=new c.curveLineMesh({width:t.width||10,colors:t.colors||[[0,237,255,1],[86,111,238,.4],[255,86,229,0]],vertices:i});this.curveLine=r,this.Map.viewer.scene.addModel(r)}},createCameraScanArea:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,i.default)({alphaMap:"./assets/image/A-02.png",meshColor:"#0025FF",opacity:.5,lineColor:60159,xRadius:3.8,yRadius:2.4},n),o=c.Utils.createCameraScanArea((new u.Vector3).fromArray(e),(new u.Vector3).fromArray(t),r);return o},createCarScanArea:function(e,t,n,i,r){return c.Utils.createCarScanArea(e,t,n,i,r)},addRadarScan:function(e){return c.Utils.addRadarScan(e||"./assets/image/A_02_2.png")},addModelText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new f.ModelText(e);return t},createCloud:function(e,t){return new p.Cloud({camera:e.scene.cameraP,imgURL:t})},followModelByScene:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;this.Map.viewer.scene.view.position.x=e.position.x+n-this.Map.viewer.scene.view.rtcPoint.x,this.Map.viewer.scene.view.position.y=e.position.y+n-this.Map.viewer.scene.view.rtcPoint.y,this.Map.viewer.scene.view.position.z=t.height,console.log("start",this.Map.viewer.scene.view.position),this.Map.viewer.scene.view.yaw=t.yaw,this.Map.viewer.scene.view.pitch=t.pitch,this.Map.viewer.scene.scene.updateMatrix(),this.Map.viewer.scene.scene.updateMatrixWorld()},addRoadConstructionArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[752535.2272,2565011.6189],[752545.2272,2565011.6189],[752545.2272,2565001.6189],[752535.2272,2565001.6189]],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lineColor:["#A56F35","#FF782B","#FF7928"],map:"https://mapdata.bj.bcebos.com/images/common/construction-back.png"},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e;n&&(i=e.map((function(e){return e[2]+=n,e})));var r=(0,c.createRoadConstrutionArea)(i,t);return this.Map.viewer.scene.addObject(r),r}}}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(175),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPcd=void 0;var i,r=n(24),o=(i=r)&&i.__esModule?i:{default:i},a=n(17),s=n(0);t.loadPcd=function(e,t,n){var i=new a.DRACOLoader;i.setDecoderPath("https://mapdata.bj.bcebos.com/maptv/workers/"),i.setDecoderConfig({type:"js"});for(var r=[],l=function(a,l){var c=new o.default((function(r){i.load(e+n[a],(function(e){t();var i=n[a].slice(0,n[a].lastIndexOf(".")),o=64*parseInt(i.split("_")[0],10),l=64*parseInt(i.split("_")[1],10);e.computeVertexNormals();var c=new s.PointsMaterial({size:1,sizeAttenuation:!1,vertexColors:!0}),u=new s.Points(e,c);u.castShadow=!0,u.receiveShadow=!0,u.position.x+=o,u.position.y+=l,r(u)}),(function(){}),(function(){t(),r()}))}));r.push(c)},c=0,u=n.length;c<u;c++)l(c);return r}},function(e,t,n){e.exports={default:n(362),__esModule:!0}},function(e,t,n){n(74),n(363),e.exports=n(14).Array.from},function(e,t,n){"use strict";var i=n(63),r=n(36),o=n(66),a=n(166),s=n(167),l=n(109),c=n(364),u=n(121);r(r.S+r.F*!n(172)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,h,d=o(e),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=u(d);if(v&&(m=i(m,p>2?arguments[2]:void 0,2)),null==y||f==Array&&s(y))for(n=new f(t=l(d.length));t>g;g++)c(n,g,v?m(d[g],g):d[g]);else for(h=y.call(d),n=new f;!(r=h.next()).done;g++)c(n,g,v?a(h,m,[r.value,g],!0):r.value);return n.length=g,n}})},function(e,t,n){"use strict";var i=n(51),r=n(76);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){n(366);var i=n(14).Object;e.exports=function(e,t){return i.defineProperties(e,t)}},function(e,t,n){var i=n(36);i(i.S+i.F*!n(42),"Object",{defineProperties:n(160)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=t.ResourcePath=void 0;var i=m(n(13)),r=m(n(38)),o=m(n(39)),a=m(n(62)),s=m(n(19)),l=m(n(20)),c=n(0),u=n(17),h=n(229),d=n(90),f=m(n(368)),p=n(40);function m(e){return e&&e.__esModule?e:{default:e}}var v=t.ResourcePath="https://mapdata.bj.bcebos.com/model/guangzhou/";t.Editor=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),this.viewer=t.viewer||null,this.models=[],this.list=t.list||f.default,this.lodTextSprite={1:{},2:{},3:{}},this.isChanged=!0,this.fusionCar=[],this.oldFusionCar=[],this.loadFusionCar=!1,this.lodModelConfig=null,this.lodModels=[],this.renderLodModels={},this.addEvent()}var t;return(0,l.default)(e,[{key:"init",value:function(){this.initModel(),this.initTripCubicLine()}},{key:"setDateTripCubic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=[{x:753657.3804512239,y:2565331.665162068,z:0,id:"01",sideId:"ID:0040"},{x:755933.6815519374,y:2563106.4016305376,z:10,id:"02",sideId:"ID:0040"}],this.loadFusionCar&&(this.oldFusionCar=JSON.parse((0,a.default)(this.fusionCar))),this.loadFusionCar=!0,this.fusionCar=e,this.clearTripCubic()}},{key:"addEvent",value:function(){var e=this,t=this;this.viewer.addEventListener("camera_changed",(function(n){e.viewer.getCameraPosition().z>1500?(e.isChanged=!1,e.displayMesh(!1)):(e.isChanged=!0,e.displayMesh(!0)),e.isChanged&&e.fusionCar.forEach((function(n){for(var i=0;i<2;i++){var r=e.isMeshExistence("tripCubic",n.sideId+"-"+i+n.id),o=r.isExistence,a=r.mesh;if(o){var s=e.isMeshExistence("side",n.sideId),l=s.mesh.getTopHeight(),u=new c.Vector3(s.mesh.position.x,s.mesh.position.y,l),d=new c.Vector3(n.x,n.y,n.z),f=(0,h.updateTripCubicFatline)({startPoint:u,endPoint:d});a.geometry=f,a.computeLineDistances()}else{var p=e.isMeshExistence("side",n.sideId);if(p.isExistence){var m=p.mesh.getTopHeight();t.initTripCubicLine({x:p.mesh.position.x,y:p.mesh.position.y,z:m,name:n.sideId},{x:n.x,y:n.y,z:n.z,name:n.id})}}}}))}))}},{key:"displayMesh",value:function(e){var t=this;this.fusionCar.forEach((function(n){for(var i=0;i<2;i++){var r=t.isMeshExistence("tripCubic",n.sideId+"-"+i+n.id),o=(r.isExistence,r.mesh);o&&(o.visible=e)}}))}},{key:"clearTripCubic",value:function(){var e=this;this.oldFusionCar.forEach((function(t){var n=!0;e.fusionCar.forEach((function(e){e.id===t.id&&e.sideId===t.sideId&&(n=!1)})),n&&e.removeObject("tripCubic",t.sideId+"-"+t.id)}))}},{key:"initTripCubicLine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new c.Vector3(e.x,e.y,e.z),i=new c.Vector3(t.x,t.y,t.z),r=(0,h.createTripCubicFatline)({color:"#7ee8ff",startPoint:n,endPoint:i,name:e.name+"-0"+t.name,dashOffsetDirection:!0});this.viewer.scene.addAnimateObject(r.line);var o=(0,h.createTripCubicFatline)({color:"#2385E1",startPoint:n,endPoint:i,name:e.name+"-1"+t.name,dashOffsetDirection:!1});this.viewer.scene.addAnimateObject(o.line)}},{key:"isMeshExistence",value:function(e,t){var n=!1,i=null;return this.viewer.scene.animateObjects.forEach((function(r){if(r.type===e&&r.idNum===t)return{isExistence:n=!0,mesh:i=r}})),{isExistence:n,mesh:i}}},{key:"removeObject",value:function(e,t){var n=this;this.viewer.scene.animateObjects.forEach((function(i){i.type===e&&i.idNum===t&&n.viewer.scene.scene.remove(i)}))}},{key:"initModel",value:function(){var e=this,t=this;this.list.forEach((function(n){if(n&&"text"!=n.type)if(n.type.indexOf("trafficLights")<0){var i=t.addMesh(n);if(e.viewer.scene.addModel(i),-1!=n.type.indexOf("lmj")){var r=n.x,o=n.y,a=(n.z,i.rotation._z);i.focus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new c.Vector3(r,o,10).add(new c.Vector3(0,1,0).applyAxisAngle(new c.Vector3(0,0,1),a+Math.PI*t).multiplyScalar(30));return u.Utils.animateTo(e,n,a+Math.PI*(t-1),1,!0,1e3)}}-1!=n.type.indexOf("lmj4")?(i.lmjLines=4,i.onLoadAnimations=function(){i.setFrameAction(3,6,7,24),i.setFrameAction(2,1,2,24),i.setFrameAction(1,1,2,24),i.setFrameAction(0,21,22,24)}):-1!=n.type.indexOf("lmj5")?(i.lmjLines=5,i.onLoadAnimations=function(){i.setFrameAction(4,1,2,24),i.setFrameAction(3,6,7,24),i.setFrameAction(2,1,2,24),i.setFrameAction(1,1,2,24),i.setFrameAction(0,21,22,24)}):-1!=n.type.indexOf("lmj6")?(i.lmjLines=6,i.onLoadAnimations=function(){i.setFrameAction(5,1,2,24),i.setFrameAction(4,1,2,24),i.setFrameAction(3,6,7,24),i.setFrameAction(2,1,2,24),i.setFrameAction(1,1,2,24),i.setFrameAction(0,21,22,24)}):-1!=n.name.indexOf("tunnel")&&(i.onLoadAnimations=function(){i.setFrameAction(0,0,24,30)}),i.loaded&&i.onLoadAnimations&&i.onLoadAnimations(),e.models.push(i)}else e.lodModels.push(n)}))}},{key:"setLodModels",value:(t=(0,o.default)(r.default.mark((function e(t,n){var i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.id,(o=!this.renderLodModels[i])&&(this.renderLodModels[i]=this.addMesh(t)),this.lodModelConfig&&this.lodModelConfig.render&&(0,d.pointInArea)(this.lodModelConfig.center,this.lodModelConfig.radius,n)?o&&this.viewer.scene.addModel(this.renderLodModels[i]):(this.viewer.scene.removeModel(this.renderLodModels[i]),delete this.renderLodModels[i]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"addLodText",value:function(e){var t=this;this.list.forEach((function(n){if(n&&"text"===n.type){var i=n.lod,r=n.id;if(e.includes(i))if(t.lodTextSprite[i][r])t.lodTextSprite[i][r].visible=!0;else{var o=t.initText(n);t.viewer.scene.addModel(o),t.lodTextSprite[i][r]=o}else t.lodTextSprite[i][r]&&(t.lodTextSprite[i][r].visible=!1)}}))}},{key:"initText",value:function(e){var t=new u.TextSprite(e.name,{drawStrokeStyle:!1,fontsize:e.size,textColor:this.rgbToRgba(e.color,1)});return t.name=e.name,t.position.x=e.x,t.position.y=e.y,t.position.z=e.z,t}},{key:"rgbToRgba",value:function(e,t){return{r:parseInt("0x"+e.substr(1,2)),g:parseInt("0x"+e.substr(3,2)),b:parseInt("0x"+e.substr(5,2)),a:t}}},{key:"isVisibleModels",value:function(e){this.models.forEach((function(t){t.visible=e}))}},{key:"addMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null;return(t="frame"===e.classType?new u.DynamicModel({name:e.id,dynamicType:e.classType,modelUrl:v+e.type,castShadow:!0,color:e.color,modelType:e.type.split(".")[0],rotation:[0,0,c.MathUtils.degToRad(e.rotate)],isBlur:e.isBlur}):"RoadText"===e.classType?new u.RoadText("道车驶驾动自",{color:e.color,rotation:[0,0,c.MathUtils.degToRad(e.rotate)]}):new u.Model({name:e.id,modelUrl:v+e.type,castShadow:!0,color:e.color,modelType:e.type.split(".")[0],rotation:[0,0,c.MathUtils.degToRad(e.rotate)],isBlur:e.isBlur,isLoadScene:e.isLoadScene})).position.x=e.x,t.position.y=e.y,t.position.z=e.z,t.opacity=e.opacity,e.scale&&t.scale.set(e.scale,e.scale,e.scale),t}},{key:"initLights",value:function(e,t){var n=[{roadDirection:0,poleLon:e,poleLat:t,poleAlt:6.8,heading:0,lampIds:[{lampId:"130902000200200111",phaseId:31},{lampId:"130902000200003212",phaseId:32},{lampId:"130902000200003313",phaseId:33}]}],i=u.Utils.addTrafficLights(n);return i.position.z=16,i}},{key:"setAction",value:function(e,t,n,i,r){var o=t;try{var a=window.viewer.scene.getObjectByName(e);a&&a.setFrameAction(o,n,i,r)}catch(e){}}},{key:"loadGeoJsonToMap",value:function(e,t,n){var r=this;return(0,p.get)(e).then((function(e){var o=e.features;o.length>0&&o.forEach((function(e){"polygon"===e.geometry.type.toLowerCase()&&(e.properties[n]?r.addPolygon((0,i.default)({},t,{vertices:e.geometry.coordinates[0],name:e.properties[n]})):r.addPolygon((0,i.default)({},t,{vertices:e.geometry.coordinates[0]})))}))}))}},{key:"addPolygon",value:function(e){var t=new u.Polygon(e);this.viewer.scene.addModel(t)}},{key:"setMeshColor",value:function(e,t){try{var n=window.viewer.scene.getObjectByName(e);n instanceof u.Polygon&&n.setColor(t)}catch(e){}}},{key:"setMeshOpacity",value:function(e,t){try{var n=window.viewer.scene.getObjectByName(e);n instanceof u.Polygon&&n.setOpacity(t)}catch(e){}}}]),e}()},function(e){e.exports=JSON.parse('[{"x":757752.077,"y":2563671.978,"z":0.6,"rotate":46,"color":"","id":"singal_0","name":"singal_0","type":"隧道红绿灯.glb","classType":"frame","isLoadScene":true,"scale":2},{"x":752154.0610322036,"y":2564868.7888604524,"z":0.6,"rotate":110,"classType":"frame","color":"","id":"gate_1","name":"gate_1","type":"lmj6.glb"},{"x":752267.6514153781,"y":2564896.1562360204,"z":0.6,"rotate":290,"classType":"frame","color":"","id":"gate_2","name":"gate_2","type":"lmj4.glb"},{"x":752376.4268967895,"y":2564968.227980099,"z":0.6,"rotate":110,"classType":"frame","color":"","id":"gate_3","name":"gate_3","type":"lmj5.glb"},{"x":752376.0746973869,"y":2564943.672527515,"z":0.6,"rotate":290,"classType":"frame","color":"","id":"gate_4","name":"gate_4","type":"lmj4.glb"},{"x":752535.2272190776,"y":2565011.618902385,"z":0.6,"rotate":290,"classType":"frame","color":"","id":"gate_5","name":"gate_5","type":"lmj5.glb"},{"x":752555.7042277916,"y":2565044.9203107664,"z":0.6,"rotate":110,"classType":"frame","color":"","id":"gate_6","name":"gate_6","type":"lmj4.glb"},{"x":753009.5420807018,"y":2565245.9792482783,"z":0.6,"rotate":110,"classType":"frame","color":"","id":"gate_7","name":"gate_7","type":"lmj5.glb"},{"x":753079.7475637308,"y":2565252.0003175344,"z":0.6,"rotate":290,"classType":"frame","color":"","id":"gate_8","name":"gate_8","type":"lmj4.glb"},{"x":753302.9898495679,"y":2565340.009710531,"z":0.6,"rotate":100,"classType":"frame","color":"","id":"gate_9","name":"gate_9","type":"lmj4.glb"},{"x":753331.5321071886,"y":2565322.6916045533,"z":0.6,"rotate":280,"classType":"frame","color":"","id":"gate_10","name":"gate_10","type":"lmj4.glb"},{"x":753459.8483252862,"y":2565339.442945692,"z":0.6,"rotate":270,"classType":"frame","color":"","id":"gate_12","name":"gate_12","type":"lmj6.glb"},{"x":753416.61967322,"y":2565357.4816780146,"z":0.6,"rotate":90,"classType":"frame","color":"","id":"gate_11","name":"gate_11","type":"lmj5.glb"},{"x":752393.8792,"y":2564945.1524,"z":0.7,"rotate":-66,"classType":"RoadText","text":"道车驶驾动自","color":"#B9D4FF","id":"RoadText1","name":"RoadText1","type":""},{"x":752393.8792,"y":2564980.526,"z":0.7,"rotate":-246,"classType":"RoadText","text":"道车驶驾动自","color":"#B9D4FF","id":"RoadText2","name":"RoadText2","type":""},{"x":757781.7985,"y":2563632.3644,"z":0.6,"rotate":0,"color":"","id":"sdmx01","name":"sdmx01","type":"隧道模型.glb","classType":"frame","isLoadScene":true},{"x":757685.647,"y":2563735.236,"z":0.6,"rotate":45,"color":"","id":"tunnel1","name":"tunnel1","type":"隧道道杆.glb","classType":"frame","isLoadScene":true,"scale":0.9},{"x":757298.12277,"y":2564098.0545,"z":0.6,"rotate":220,"color":"","id":"tunnel2","name":"tunnel2","type":"隧道道杆.glb","classType":"frame","isLoadScene":true,"scale":0.9},{"x":752211.4084,"y":2564020.9614,"z":0.6,"rotate":0,"color":"","id":"sggdk1","name":"sggdk1","type":"施工管道坑.glb","classType":"frame","isLoadScene":true,"scale":1},{"id":"addModelkwu4csvaqdi","name":"zhishichengdasha.glb","type":"zhishichengdasha.glb","x":"759799.98","y":"2582155.32","z":0.09999999999999432,"rotate":180,"color":"#4D6495","scale":0.13,"opacity":0.95},{"id":"addModelhx83rsqp847","name":"shenxiezhongxin.glb","type":"shenxiezhongxin.glb","x":758235.9659338051,"y":2581712.816255236,"z":0.0999999999999659,"rotate":180,"color":"#4D6495","scale":0.08,"opacity":0.95},{"id":"addModeljqd4v1m9hn","name":"rencaidasha.glb","type":"rencaidasha.glb","x":760053.7892474447,"y":2581986.849817153,"z":0.10000000000002274,"rotate":200,"color":"#4D6495","scale":0.1,"opacity":0.95,"isBlur":true},{"id":"addModelwekk6pf8kzm","name":"linglizhongxin.glb","type":"linglizhongxin.glb","x":759528.9079301412,"y":"2582625.15","z":0.09999999999999432,"rotate":180,"color":"#4D6495","scale":0.08,"opacity":0.95},{"id":"addModel8qpxpwa5yrd","name":"haisizhongxin.glb","type":"haisizhongxin.glb","x":"760275.79","y":"2582152.78","z":0.10000000000002274,"rotate":180,"color":"#4D6495","scale":0.13,"opacity":0.95},{"id":"addModel9xrh5kfru8u","name":"guojijiaoliuzhongxin.glb","type":"guojijiaoliuzhongxin.glb","x":"759155.31","y":"2581680.65","z":0.10000000000002274,"rotate":50,"color":"#4D6495","scale":0.13,"opacity":0.95},{"id":"addModel广州塔lmj8t3jsde","name":"广州塔","type":"guangzhouta.glb","x":"737511.13","y":"2557384.61","z":"1.00","rotate":0,"color":"#81A5F2","scale":100},{"id":"addModel琶洲展馆lmjsde","name":"琶洲展馆","type":"pazhouzhanguan.glb","x":"741454.97","y":"2556579.32","z":"1.00","rotate":0,"color":"#9BB3EF","scale":2},{"id":"addModel9a18e7i9i","name":"广州中信大厦","type":"zhongxindasha.glb","x":"737479.13","y":"2561465.37","z":"1.00","rotate":38,"color":"#81A5F2","scale":6},{"id":"addModel9a18","name":"天河体育中心","type":"tianhetiyuzhongxin.glb","x":"737487.01","y":"2560975.29","z":"1.00","rotate":90,"color":"#81A5F2","scale":2},{"id":"car车0elmj8t3jsde","name":"车0","type":"car.glb","x":"755888.84","y":"2563119.69","z":"1.00","rotate":0,"color":"#9BB3EF"},{"id":"car车1ov8vim75kn","name":"车1","type":"car.glb","x":"755889.36","y":"2563134.55","z":"1.00","rotate":0,"color":"#E67397"},{"id":"car车20869a18e7i9i","name":"车2","type":"car.glb","x":"755903.57","y":"2563112.17","z":"1.00","rotate":38,"color":"#9BB3EF"},{"id":"pedestrian行人4oj3znthwj8","name":"行人4","type":"pedestrian.glb","x":"755883.55","y":"2563110.12","z":"1.00","rotate":0,"color":"#9BB3EF"},{"id":"pedestrian行人5ma46fzi6xrm","name":"行人5","type":"pedestrian.glb","x":"755885.25","y":"2563112.39","z":"1.00","rotate":0,"color":"#9BB3EF"},{"id":"pedestrian行人65y2f0xboza7","name":"行人6","type":"pedestrian.glb","x":"755894.76","y":"2563120.62","z":"1.00","rotate":0,"color":"#9BB3EF"},{"id":"pedestrian行人7knojgno3bv9","name":"行人7","type":"pedestrian.glb","x":"755894.91","y":"2563149.76","z":"1.00","rotate":0,"color":"#9BB3EF"},{"id":"car车8syl0pt6de2","name":"车8","type":"car.glb","x":"755848.90","y":"2563170.45","z":"1.00","rotate":0,"color":"#9BB3EF"},{"id":"addModelkiyihadcu1j","name":"diandongche.glb","type":"diandongche.glb","x":"755888.73","y":"2563114.24","z":"1.10","rotate":0,"color":"#9BB3EF"},{"id":"addModeltyoa5eb56x","name":"bus.glb","type":"bus.glb","x":"755920.83","y":"2563076.17","z":"1.10","rotate":306,"color":"#9BB3EF","scale":0.5},{"id":"addModel7jb9nqvmbgc","name":"truck.glb","type":"truck.glb","x":"755931.15","y":"2563074.92","z":"1.10","rotate":300,"color":"#9BB3EF","scale":0.5},{"id":"car车29m8rp0rk7pr","name":"车29","type":"car.glb","x":"755855.53","y":"2563156.42","z":"0.60","rotate":0,"color":"#6BC9BF"},{"id":"car车30xshgy1301j","name":"车30","type":"car.glb","x":"755889.82","y":"2563148.16","z":"0.60","rotate":0,"color":"#48AAEB"},{"id":"addModeln75hkdzday8","name":"robobus.glb","type":"robobus.glb","x":"755811.93","y":"2563214.18","z":"0.70","rotate":-61,"color":""},{"id":"addModell6fho02na7","name":"sanlunche.glb","type":"sanlunche.glb","x":"755863.19","y":"2563163.69","z":"0.60","rotate":-61,"color":"#9BB3EF"},{"id":"addModels7phcqek6i","name":"liededaqiao.glb","type":"liededaqiao.glb","x":"738481.80","y":"2557872.28","z":"1.10","rotate":2,"scale":3,"color":"#9BB3EF"},{"id":"text40","lod":3,"name":"科学城会议中心","type":"text","x":"753030.05","y":"2565912.71","z":"0.10","rotate":0,"color":"#B6D0FF","size":12},{"id":"text41","lod":3,"name":"黄埔区政府","type":"text","x":"753354.25","y":"2566127.42","z":"0.10","rotate":0,"color":"#B6D0FF","size":12},{"id":"text42","lod":3,"name":"宝能观致文化中心","type":"text","x":"753748.07","y":"2565561.80","z":"0.10","rotate":0,"color":"#B6D0FF","size":12},{"id":"text43","lod":3,"name":"科学城科学广场","type":"text","x":"750592.59","y":"2564183.23","z":"0.10","rotate":0,"color":"#B6D0FF","size":12},{"id":"text47","lod":2,"name":"黄埔区","type":"text","x":"757470.61","y":"2571433.32","z":"0.10","rotate":0,"color":"#B6D0FF","size":20},{"id":"text46","lod":1,"name":"广州市","type":"text","x":"736395.59","y":"2578815.60","z":"0.10","rotate":0,"color":"#B6D0FF","size":28},{"id":"text45","lod":2,"name":"知识城","type":"text","x":"760972.97","y":"2583054.30","z":"0.10","rotate":0,"color":"#B6D0FF","size":15},{"id":"text46","lod":2,"name":"科学城","type":"text","x":"752127.60","y":"2560605.54","z":"0.10","rotate":0,"color":"#B6D0FF","size":15},{"id":"11","lod":2,"name":"长洲岛","type":"text","x":"749575.67","y":"2553996.23","z":"0.10","rotate":0,"color":"#B6D0FF","size":15},{"id":"text48","lod":2,"name":"生物岛","type":"text","x":"742209.78","y":"2550963.78","z":"0.10","rotate":0,"color":"#B6D0FF","size":15},{"lod":3,"x":"759917.62","y":"2581728.92","z":"300.00","rotate":0,"color":"#9BB3EF","id":"text67","name":"人才大厦","type":"text","size":12},{"lod":3,"x":"759916.16","y":"2581838.13","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text68","name":"绿地酒店","type":"text","size":12},{"lod":3,"x":"760106.12","y":"2579789.64","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text69","name":" 粤港澳大湾区纳米创新产业集聚区","type":"text","size":12},{"lod":3,"x":"758319.55","y":"2581899.12","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text62","name":"知识城广场","type":"text","size":12},{"lod":3,"x":"759348.83","y":"2581367.52","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text63","name":"凤凰湖","type":"text","size":12},{"lod":3,"x":"757034.42","y":"2585238.52","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text64","name":"九龙大道","type":"text","size":12},{"lod":3,"x":"752716.42","y":"2595108.24","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text65","name":"九龙湖","type":"text","size":12},{"lod":3,"x":"760111.26","y":"2582811.76","z":"0.10","rotate":0,"color":"#9BB3EF","id":"text66","name":"中新智慧产业园","type":"text","size":12},{"id":"addModel5uk4ur6706w","name":"trafficLights.glb","type":"trafficLights.glb","x":752934.2311787485,"y":2566422.889429015,"z":0.09999999999999964,"rotate":310,"color":"#9BB3EF"},{"id":"addModel3f5sklu8ps9","name":"trafficLights.glb","type":"trafficLights.glb","x":752941.4555022671,"y":2566428.3198699364,"z":0.10000000000000142,"rotate":150,"color":"#9BB3EF"},{"id":"addModel4n7bv4j7u2f","name":"trafficLights.glb","type":"trafficLights.glb","x":752892.0649516275,"y":2566445.2753822855,"z":0.10000000000000142,"rotate":125,"color":"#9BB3EF"},{"id":"addModelms8vh3p4ufo","name":"trafficLights.glb","type":"trafficLights.glb","x":752905.3148240565,"y":2566456.102104192,"z":0.10000000000000142,"rotate":40,"color":"#9BB3EF"},{"id":"addModel8a1881quaz","name":"trafficLights.glb","type":"trafficLights.glb","x":753826.5836652741,"y":2565756.9969518464,"z":0.09999999999999787,"rotate":0,"color":"#9BB3EF"},{"id":"addModelo8ilxrnm6gm","name":"trafficLights.glb","type":"trafficLights.glb","x":753805.9801665454,"y":2565714.794476013,"z":0.10000000000000142,"rotate":60,"color":"#9BB3EF"},{"id":"addModelnc6ybve850b","name":"trafficLights.glb","type":"trafficLights.glb","x":753841.6369305498,"y":2565716.6822848236,"z":0.09999999999999787,"rotate":120,"color":"#9BB3EF"},{"id":"addModel0pdmvmzi50wp","name":"trafficLights.glb","type":"trafficLights.glb","x":753812.2868046283,"y":2565757.975583896,"z":0.10000000000000142,"rotate":90,"color":"#9BB3EF"},{"id":"addModelmt7qwolcdw8","name":"trafficLights.glb","type":"trafficLights.glb","x":753828.3549507745,"y":2565721.9940976403,"z":0.10000000000000142,"rotate":265,"color":"#9BB3EF"},{"id":"addModel5y0oiw7f0wb","name":"trafficLights.glb","type":"trafficLights.glb","x":754122.6413084398,"y":2565584.482719047,"z":0.09999999999999787,"rotate":230,"color":"#9BB3EF"},{"id":"addModel3eb2htpdf6s","name":"trafficLights.glb","type":"trafficLights.glb","x":754113.6309365005,"y":2565636.6721932264,"z":0.09999999999999787,"rotate":60,"color":"#9BB3EF"},{"id":"addModel0m12os9i0ncf","name":"trafficLights.glb","type":"trafficLights.glb","x":754438.8310186546,"y":2565490.919540276,"z":0.09999999999999964,"rotate":130,"color":"#9BB3EF"},{"id":"addModeluk0duyrrtu","name":"trafficLights.glb","type":"trafficLights.glb","x":754399.7190696276,"y":2565481.9839287843,"z":0.10000000000000142,"rotate":50,"color":"#9BB3EF"},{"id":"addModelani25kbswz9","name":"trafficLights.glb","type":"trafficLights.glb","x":754389.3073352611,"y":2565525.5102615687,"z":0.09999999999999964,"rotate":320,"color":"#9BB3EF"},{"id":"addModelw6w2b4lytm","name":"trafficLights.glb","type":"trafficLights.glb","x":754433.0171334752,"y":2565530.2665387,"z":0.10000000000000142,"rotate":220,"color":"#9BB3EF"},{"id":"addModelep30dqook04","name":"trafficLights.glb","type":"trafficLights.glb","x":754430.1196172374,"y":2565490.144205546,"z":0.10000000000000142,"rotate":265,"color":"#9BB3EF"},{"id":"addModellrf3q3h6z8","name":"trafficLights.glb","type":"trafficLights.glb","x":754400.4743118699,"y":2565525.3956284933,"z":0.10000000000000142,"rotate":90,"color":"#9BB3EF"},{"id":"addModeldji0md6lc0k","name":"trafficLights.glb","type":"trafficLights.glb","x":754924.9452065356,"y":2565492.3495073323,"z":0.10000000000000142,"rotate":270,"color":"#9BB3EF"},{"id":"addModeluxe8hpn00jf","name":"trafficLights.glb","type":"trafficLights.glb","x":754878.174505914,"y":2565491.7362641925,"z":0.09999999999999787,"rotate":185,"color":"#9BB3EF"},{"id":"addModelprvs99dfl1m","name":"trafficLights.glb","type":"trafficLights.glb","x":754876.3168776756,"y":2565537.061685395,"z":0.09999999999999964,"rotate":90,"color":"#9BB3EF"},{"id":"addModelroyzs7fshok","name":"trafficLights.glb","type":"trafficLights.glb","x":754905.1350202818,"y":2565533.365999353,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF"},{"id":"addModelmqv4eauj4z9","name":"trafficLights.glb","type":"trafficLights.glb","x":754918.4907875302,"y":2565528.5353688635,"z":0.09999999999999787,"rotate":90,"color":"#9BB3EF"},{"id":"addModelvqrky6erezc","name":"trafficLights.glb","type":"trafficLights.glb","x":755382.1251102072,"y":2565522.729258004,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF"},{"id":"addModelbjbrhukgcl9","name":"trafficLights.glb","type":"trafficLights.glb","x":755414.6926103277,"y":2565475.568163355,"z":0.09999999999999432,"rotate":270,"color":"#9BB3EF"},{"id":"addModelniqrdxva4es","name":"trafficLights.glb","type":"trafficLights.glb","x":755337.4721358946,"y":2565515.821551591,"z":0.10000000000000142,"rotate":310,"color":"#9BB3EF"},{"id":"addModelln6o1esy3l","name":"trafficLights.glb","type":"trafficLights.glb","x":755347.5828858833,"y":2565512.755538118,"z":0.09999999999999432,"rotate":90,"color":"#9BB3EF"},{"id":"addModelp6ez2i63qla","name":"trafficLights.glb","type":"trafficLights.glb","x":755665.0340406657,"y":2565092.529179865,"z":0.10000000000000142,"rotate":350,"color":"#9BB3EF"},{"id":"addModel9fo8fxgb1fl","name":"trafficLights.glb","type":"trafficLights.glb","x":755627.2525639986,"y":2565032.5501072416,"z":0.10000000000000142,"rotate":170,"color":"#9BB3EF"},{"id":"addModeluajmymvqio","name":"trafficLights.glb","type":"trafficLights.glb","x":755666.6695602417,"y":2565042.896568294,"z":0.10000000000000853,"rotate":260,"color":"#9BB3EF"},{"id":"addModelbr6h966ti5n","name":"trafficLights.glb","type":"trafficLights.glb","x":755622.91861062,"y":2565085.8191397283,"z":0.09999999999999964,"rotate":80,"color":"#9BB3EF"},{"id":"addModel9bsoogtdlj","name":"trafficLights.glb","type":"trafficLights.glb","x":757507.2474507164,"y":2563931.478067853,"z":0.6000000000000014,"rotate":38,"color":"#9BB3EF"},{"id":"addModeldpltn986p9e","name":"trafficLights.glb","type":"trafficLights.glb","x":757496.912876984,"y":2563907.8220835514,"z":0.10000000000000142,"rotate":315,"color":"#9BB3EF"},{"id":"addModelhkilx7q2dp","name":"trafficLights.glb","type":"trafficLights.glb","x":757457.5085775757,"y":2563913.955782679,"z":0.09999999999999964,"rotate":230,"color":"#9BB3EF"},{"id":"addModelsc4vyyal8y","name":"trafficLights.glb","type":"trafficLights.glb","x":757466.5505543862,"y":2563936.8276432725,"z":0.09999999999999964,"rotate":135,"color":"#9BB3EF"},{"id":"addModelae1qzm2iv7o","name":"trafficLights.glb","type":"trafficLights.glb","x":756236.990210253,"y":2563272.416790338,"z":0.09999999999999787,"rotate":35,"color":"#9BB3EF"},{"id":"addModel71th65flgi2","name":"trafficLights.glb","type":"trafficLights.glb","x":756253.0182112722,"y":2563215.9130462212,"z":0.10000000000000142,"rotate":220,"color":"#9BB3EF"},{"id":"addModel8fcd515m2tv","name":"trafficLights.glb","type":"trafficLights.glb","x":756241.1322396377,"y":2563204.9688278222,"z":0.09999999999999432,"rotate":220,"color":"#9BB3EF"},{"id":"addModelb4j1ojijn5a","name":"trafficLights.glb","type":"trafficLights.glb","x":756229.7798126101,"y":2563255.7076284946,"z":0.09999999999999964,"rotate":35,"color":"#9BB3EF"},{"id":"addModelraqulx6r1g","name":"trafficLights.glb","type":"trafficLights.glb","x":756206.3812121908,"y":2563250.4439955316,"z":0.10000000000000142,"rotate":220,"color":"#9BB3EF"},{"id":"addModeljx7nfniuxrq","name":"trafficLights.glb","type":"trafficLights.glb","x":756205.5273395522,"y":2563235.385611817,"z":0.09999999999999787,"rotate":120,"color":"#9BB3EF"},{"id":"addModel0r7yhbn3gvq","name":"trafficLights.glb","type":"trafficLights.glb","x":756251.9536756274,"y":2563266.971939371,"z":0.10000000000000142,"rotate":125,"color":"#9BB3EF"},{"id":"addModelrqy246n6vdq","name":"trafficLights.glb","type":"trafficLights.glb","x":756271.9302380593,"y":2563224.915408326,"z":0.10000000000000142,"rotate":35,"color":"#9BB3EF"},{"id":"addModelrz1kq5w6pzk","name":"trafficLights.glb","type":"trafficLights.glb","x":756224.5134677673,"y":2563209.5622749333,"z":0.09999999999999787,"rotate":305,"color":"#9BB3EF"},{"id":"addModelhvd4dvgd7l4","name":"trafficLights.glb","type":"trafficLights.glb","x":756263.9279028607,"y":2563234.514225262,"z":0.10000000000000142,"rotate":305,"color":"#9BB3EF"},{"id":"addModel586uhkyod92","name":"trafficLights.glb","type":"trafficLights.glb","x":755480.8375320687,"y":2563062.4678484355,"z":0.09999999999999964,"rotate":305,"color":"#9BB3EF"},{"id":"addModel3lernf41weh","name":"trafficLights.glb","type":"trafficLights.glb","x":755506.1765098932,"y":2563060.910664027,"z":0.10000000000000142,"rotate":300,"color":"#9BB3EF"},{"id":"addModelca3i43ccpd","name":"trafficLights.glb","type":"trafficLights.glb","x":755394.3130360311,"y":2563021.8899138584,"z":0.09999999999999787,"rotate":270,"color":"#9BB3EF"},{"id":"addModel0boa1u6cxkgv","name":"trafficLights.glb","type":"trafficLights.glb","x":755371.7582620028,"y":2562993.9036027747,"z":0.09999999999999432,"rotate":135,"color":"#9BB3EF"},{"id":"addModel9m4rknnjelc","name":"trafficLights.glb","type":"trafficLights.glb","x":755416.0860889623,"y":2562985.82819697,"z":0.10000000000000853,"rotate":45,"color":"#9BB3EF"},{"id":"addModel0sx35x0isx7","name":"trafficLights.glb","type":"trafficLights.glb","x":755423.271153453,"y":2562992.9712739713,"z":0.10000000000000853,"rotate":315,"color":"#9BB3EF"},{"id":"addModelvvnqg62qkhl","name":"trafficLights.glb","type":"trafficLights.glb","x":755031.2284980654,"y":2562558.761752905,"z":0.10000000000000142,"rotate":340,"color":"#9BB3EF"},{"id":"addModel81nhcws97vo","name":"trafficLights.glb","type":"trafficLights.glb","x":755010.9806998052,"y":2562534.403906771,"z":0.10000000000000142,"rotate":35,"color":"#9BB3EF"},{"id":"addModeldgex3fb6ue","name":"trafficLights.glb","type":"trafficLights.glb","x":754995.8444841118,"y":2562526.913946011,"z":0.10000000000000142,"rotate":161,"color":"#9BB3EF"},{"id":"addModelfrivzp1mjsb","name":"trafficLights.glb","type":"trafficLights.glb","x":755224.3772968694,"y":2563229.9170885975,"z":0.09999999999999787,"rotate":123,"color":"#9BB3EF"},{"id":"addModelj4slvfv448","name":"trafficLights.glb","type":"trafficLights.glb","x":755232.7783720603,"y":2563251.0118051465,"z":0.10000000000000142,"rotate":35,"color":"#9BB3EF"},{"id":"addModelj52xeo8cjnn","name":"trafficLights.glb","type":"trafficLights.glb","x":755232.5387970953,"y":2563218.0275659524,"z":0.09999999999999432,"rotate":215,"color":"#9BB3EF"},{"id":"addModel1658vtae9on","name":"trafficLights.glb","type":"trafficLights.glb","x":755612.5082541098,"y":2563523.6979366,"z":0.10000000000000142,"rotate":35,"color":"#9BB3EF"},{"id":"addModel7k91za5ikgu","name":"trafficLights.glb","type":"trafficLights.glb","x":755620.881246097,"y":2563510.526788085,"z":0.10000000000000142,"rotate":305,"color":"#9BB3EF"},{"id":"addModel8zkyq625j6l","name":"trafficLights.glb","type":"trafficLights.glb","x":755604.8257663947,"y":2563482.172811305,"z":0.09999999999999432,"rotate":215,"color":"#9BB3EF"},{"id":"addModelh68qncz3m0n","name":"trafficLights.glb","type":"trafficLights.glb","x":755357.9325775466,"y":2563845.761192896,"z":0.10000000000000142,"rotate":185,"color":"#9BB3EF"},{"id":"addModel7gnoa664qtm","name":"trafficLights.glb","type":"trafficLights.glb","x":755383.0631666092,"y":2563853.057846866,"z":0.10000000000000142,"rotate":90,"color":"#9BB3EF"},{"id":"addModelts1tynesr2","name":"trafficLights.glb","type":"trafficLights.glb","x":755382.7987161473,"y":2563857.8210931695,"z":0.09999999999999432,"rotate":1,"color":"#9BB3EF"},{"id":"addModelffx64436wiu","name":"trafficLights.glb","type":"trafficLights.glb","x":755834.4191405284,"y":2563820.8969795452,"z":0.09999999999999432,"rotate":30,"color":"#9BB3EF"},{"id":"addModelzb5i3t75pa","name":"trafficLights.glb","type":"trafficLights.glb","x":755834.443995909,"y":2563787.221153991,"z":0.10000000000000142,"rotate":30,"color":"#9BB3EF"},{"id":"addModel5zzi29v4z3d","name":"trafficLights.glb","type":"trafficLights.glb","x":755465.8928875183,"y":2564190.542652937,"z":0.10000000000000142,"rotate":255,"color":"#9BB3EF"},{"id":"addModelxkyw5h7m63","name":"trafficLights.glb","type":"trafficLights.glb","x":755488.3486,"y":2564167.797401767,"z":0.1999999999999964,"rotate":330,"color":"#9BB3EF"},{"id":"addModelqzgcysav3b","name":"trafficLights.glb","type":"trafficLights.glb","x":755465.374786231,"y":2564188.9405926187,"z":0.10000000000000142,"rotate":150,"color":"#9BB3EF"},{"id":"addModelainp5ig8bi","name":"trafficLights.glb","type":"trafficLights.glb","x":755488.9684091526,"y":2564168.64158331,"z":0.09999999999999964,"rotate":330,"color":"#9BB3EF"},{"id":"addModel7wofp873vvn","name":"trafficLights.glb","type":"trafficLights.glb","x":755470.2663029381,"y":2564213.920005799,"z":0.10000000000000142,"rotate":150,"color":"#9BB3EF"},{"id":"addModeltrapk54d91q","name":"trafficLights.glb","type":"trafficLights.glb","x":755484.3275797731,"y":2564149.758184385,"z":0.09999999999999432,"rotate":260,"color":"#9BB3EF"},{"id":"addModelfc468an1qno","name":"trafficLights.glb","type":"trafficLights.glb","x":755459.7137086287,"y":2564167.548771183,"z":0.10000000000000853,"rotate":150,"color":"#9BB3EF"},{"id":"addModelzqcr2cedd1","name":"trafficLights.glb","type":"trafficLights.glb","x":754675.5492542061,"y":2564326.738668208,"z":0.10000000000000142,"rotate":105,"color":"#9BB3EF"},{"id":"addModelxnemoxbl3js","name":"trafficLights.glb","type":"trafficLights.glb","x":754728.812439112,"y":2564304.4610978505,"z":0.09999999999999432,"rotate":280,"color":"#9BB3EF"},{"id":"addModelmxr2ce6wb6","name":"trafficLights.glb","type":"trafficLights.glb","x":754484.1081977098,"y":2564195.472178848,"z":0.10000000000000142,"rotate":310,"color":"#9BB3EF"},{"id":"addModell07ts36e9v9","name":"trafficLights.glb","type":"trafficLights.glb","x":754413.2476730458,"y":2564190.451335151,"z":0.10000000000000142,"rotate":125,"color":"#9BB3EF"},{"id":"addModelomwqbcpol1e","name":"trafficLights.glb","type":"trafficLights.glb","x":754183.7343459403,"y":2564013.7172319693,"z":0.09999999999999964,"rotate":0,"color":"#9BB3EF"},{"id":"addModel5tkie51sxaf","name":"trafficLights.glb","type":"trafficLights.glb","x":754150.4329157604,"y":2563980.4157336457,"z":0.09999999999999432,"rotate":180,"color":"#9BB3EF"},{"id":"addModelf23jvdwxjy","name":"trafficLights.glb","type":"trafficLights.glb","x":754179.0830075231,"y":2564048.254497465,"z":0.10000000000000142,"rotate":245,"color":"#9BB3EF"},{"id":"addModeln3e7taqi0w","name":"trafficLights.glb","type":"trafficLights.glb","x":754184.3111804458,"y":2564036.463241206,"z":0.10000000000000853,"rotate":110,"color":"#9BB3EF"},{"id":"addModellmmn96go13","name":"trafficLights.glb","type":"trafficLights.glb","x":754136.9053785591,"y":2563997.855026624,"z":0.10000000000000142,"rotate":110,"color":"#9BB3EF"},{"id":"addModel1jaxa01ail","name":"trafficLights.glb","type":"trafficLights.glb","x":754144.4104444011,"y":2563980.3775325925,"z":0.10000000000000142,"rotate":295,"color":"#9BB3EF"},{"id":"addModelsvntlezjbbh","name":"trafficLights.glb","type":"trafficLights.glb","x":754137.9850877061,"y":2564022.009679765,"z":0.09999999999999787,"rotate":110,"color":"#9BB3EF"},{"id":"addModeln3lpugca3t","name":"trafficLights.glb","type":"trafficLights.glb","x":754202.3699028984,"y":2563999.5699713686,"z":0.09999999999999787,"rotate":290,"color":"#9BB3EF"},{"id":"addModelg8phvgov6kk","name":"trafficLights.glb","type":"trafficLights.glb","x":753316.433983543,"y":2563872.0973432977,"z":0.09999999999999787,"rotate":0,"color":"#9BB3EF"},{"id":"addModeltov4iirdebf","name":"trafficLights.glb","type":"trafficLights.glb","x":753327.6148849805,"y":2563881.897684421,"z":0.10000000000000142,"rotate":260,"color":"#9BB3EF"},{"id":"addModelv0sigjixfdi","name":"trafficLights.glb","type":"trafficLights.glb","x":753320.7392652618,"y":2563896.1753931483,"z":0.09999999999999964,"rotate":262,"color":"#9BB3EF"},{"id":"addModel5ersoihmxty","name":"trafficLights.glb","type":"trafficLights.glb","x":753331.1899392776,"y":2563917.7794456775,"z":0.10000000000000497,"rotate":85,"color":"#9BB3EF"},{"id":"addModeloenw4bodwx","name":"trafficLights.glb","type":"trafficLights.glb","x":753295.7603277146,"y":2563927.1401726124,"z":0.09999999999999787,"rotate":180,"color":"#9BB3EF"},{"id":"addModelt277dfnik3","name":"trafficLights.glb","type":"trafficLights.glb","x":753279.5652946148,"y":2563917.645743937,"z":0.09999999999999432,"rotate":90,"color":"#9BB3EF"},{"id":"addModel80fkmeficb4","name":"trafficLights.glb","type":"trafficLights.glb","x":753291.2640601884,"y":2563901.261367358,"z":0.10000000000000142,"rotate":85,"color":"#9BB3EF"},{"id":"addModeldc7lzcaqpm6","name":"trafficLights.glb","type":"trafficLights.glb","x":753282.257271781,"y":2563881.7853345834,"z":0.10000000000000142,"rotate":265,"color":"#9BB3EF"},{"id":"addModelklldpt9gj0q","name":"trafficLights.glb","type":"trafficLights.glb","x":753288.6586506696,"y":2563871.1296493947,"z":0.10000000000000142,"rotate":180,"color":"#9BB3EF"},{"id":"addModelpdp4uls7uf","name":"trafficLights.glb","type":"trafficLights.glb","x":753323.2300749676,"y":2563928.2615310294,"z":0.09999999999999787,"rotate":0,"color":"#9BB3EF"},{"id":"addModel13m3t9mxuuy","name":"trafficLights.glb","type":"trafficLights.glb","x":752568.6802030943,"y":2564033.646399618,"z":0.10000000000000142,"rotate":352,"color":"#9BB3EF"},{"id":"addModel0wlbj52a7qb","name":"trafficLights.glb","type":"trafficLights.glb","x":752561.2839675857,"y":2563972.4332026397,"z":0.10000000000000142,"rotate":353,"color":"#9BB3EF"},{"id":"addModelwvwa0vgl7vn","name":"trafficLights.glb","type":"trafficLights.glb","x":752544.2305940263,"y":2564026.122490308,"z":0.10000000000000142,"rotate":172,"color":"#9BB3EF"},{"id":"addModelgpff5hyomzu","name":"trafficLights.glb","type":"trafficLights.glb","x":752538.7617501041,"y":2563982.7712480323,"z":0.10000000000000142,"rotate":176,"color":"#9BB3EF"},{"id":"addModelnnu9ltyiwl","name":"trafficLights.glb","type":"trafficLights.glb","x":752533.5993908853,"y":2563972.9767605695,"z":0.09999999999999432,"rotate":45,"color":"#9BB3EF"},{"id":"addModel5uw85pq2z4x","name":"trafficLights.glb","type":"trafficLights.glb","x":752530.9473814877,"y":2563984.639761623,"z":0.09999999999999432,"rotate":255,"color":"#9BB3EF"},{"id":"addModel7m77ewp1bai","name":"trafficLights.glb","type":"trafficLights.glb","x":752575.3583766634,"y":2564013.0315269213,"z":0.10000000000000142,"rotate":88,"color":"#9BB3EF"},{"id":"addModeln62ewt43uu","name":"trafficLights.glb","type":"trafficLights.glb","x":752573.7153422886,"y":2563978.012174506,"z":0.10000000000000853,"rotate":265,"color":"#9BB3EF"},{"id":"addModelgpf3t0gcj8j","name":"trafficLights.glb","type":"trafficLights.glb","x":751321.471922506,"y":2563996.0603443435,"z":0.09999999999999787,"rotate":260,"color":"#9BB3EF"},{"id":"addModela9qfqh96vqk","name":"trafficLights.glb","type":"trafficLights.glb","x":751320.4940634905,"y":2563990.830085149,"z":0.10000000000000142,"rotate":80,"color":"#9BB3EF"},{"id":"addModeljkblc7g57le","name":"trafficLights.glb","type":"trafficLights.glb","x":751306.3603058266,"y":2563966.391914726,"z":0.10000000000000142,"rotate":135,"color":"#9BB3EF"},{"id":"addModelij83nzze66","name":"trafficLights.glb","type":"trafficLights.glb","x":751017.1720304193,"y":2564024.6978496457,"z":0.09999999999999432,"rotate":355,"color":"#9BB3EF"},{"id":"addModelfymoamggjyf","name":"trafficLights.glb","type":"trafficLights.glb","x":751040.0723800224,"y":2564055.878474972,"z":0.09999999999999432,"rotate":55,"color":"#9BB3EF"},{"id":"addModeltscsuxcthhe","name":"trafficLights.glb","type":"trafficLights.glb","x":751015.8335506013,"y":2564061.0732723013,"z":0.09999999999999432,"rotate":175,"color":"#9BB3EF"},{"id":"addModelm70ui0hbye8","name":"trafficLights.glb","type":"trafficLights.glb","x":751005.0727700139,"y":2564045.057822434,"z":0.09999999999999432,"rotate":230,"color":"#9BB3EF"},{"id":"addModelzfl839heoo8","name":"trafficLights.glb","type":"trafficLights.glb","x":751027.5310594048,"y":2564039.23175428,"z":0.10000000000000142,"rotate":58,"color":"#9BB3EF"},{"id":"addModelwvqd75mkt8m","name":"trafficLights.glb","type":"trafficLights.glb","x":750992.4938614463,"y":2564028.103595426,"z":0.10000000000000853,"rotate":232,"color":"#9BB3EF"},{"id":"addModeli35j90h1wn","name":"trafficLights.glb","type":"trafficLights.glb","x":750446.3923678662,"y":2564795.5149150738,"z":0.10000000000000142,"rotate":30,"color":"#9BB3EF"},{"id":"addModel0jd5p3xzg1x","name":"trafficLights.glb","type":"trafficLights.glb","x":750419.3048302373,"y":2564770.55855427,"z":0.10000000000000142,"rotate":120,"color":"#9BB3EF"},{"id":"addModelhc1fix2eho","name":"trafficLights.glb","type":"trafficLights.glb","x":750477.018296691,"y":2564767.9570384147,"z":0.09999999999999432,"rotate":300,"color":"#9BB3EF"},{"id":"addModelx97r37mk53","name":"trafficLights.glb","type":"trafficLights.glb","x":750447.9737246375,"y":2564741.103281944,"z":0.09999999999999432,"rotate":210,"color":"#9BB3EF"},{"id":"addModel2fddz3uxqvb","name":"trafficLights.glb","type":"trafficLights.glb","x":750204.0900932137,"y":2564648.630014512,"z":0.09999999999999432,"rotate":25,"color":"#9BB3EF"},{"id":"addModeluhnniumejxo","name":"trafficLights.glb","type":"trafficLights.glb","x":750215.3802885966,"y":2564629.8875504625,"z":0.09999999999999432,"rotate":295,"color":"#9BB3EF"},{"id":"addModelibu74tu1hen","name":"trafficLights.glb","type":"trafficLights.glb","x":750170.0551484973,"y":2564631.221061942,"z":0.09999999999999432,"rotate":118,"color":"#9BB3EF"},{"id":"addModelayu3dcckhm","name":"trafficLights.glb","type":"trafficLights.glb","x":750181.7764259775,"y":2564609.303652664,"z":0.09999999999999432,"rotate":210,"color":"#9BB3EF"},{"id":"addModelmf5qxqmgcor","name":"trafficLights.glb","type":"trafficLights.glb","x":749732.5589716389,"y":2564136.390268547,"z":0.10000000000000142,"rotate":170,"color":"#9BB3EF"},{"id":"addModelyo47cnmtiv","name":"trafficLights.glb","type":"trafficLights.glb","x":749749.3313486719,"y":2564096.9258544287,"z":0.10000000000000142,"rotate":355,"color":"#9BB3EF"},{"id":"addModelnavuz0khxi","name":"trafficLights.glb","type":"trafficLights.glb","x":749727.0263623622,"y":2564098.7692422336,"z":0.10000000000000142,"rotate":265,"color":"#9BB3EF"},{"id":"addModel84carbxf848","name":"trafficLights.glb","type":"trafficLights.glb","x":749756.3747517662,"y":2564133.6091664187,"z":0.10000000000000142,"rotate":80,"color":"#9BB3EF"},{"id":"addModelfl41y4gag3s","name":"trafficLights.glb","type":"trafficLights.glb","x":749754.4419298273,"y":2564112.835821551,"z":0.09999999999999787,"rotate":85,"color":"#9BB3EF"},{"id":"addModelwivecs6vk","name":"trafficLights.glb","type":"trafficLights.glb","x":749729.8599869843,"y":2564118.9189934093,"z":0.10000000000000142,"rotate":262,"color":"#9BB3EF"},{"id":"addModel63i01ce8d1u","name":"trafficLights.glb","type":"trafficLights.glb","x":750575.3225533598,"y":2563741.660469223,"z":0.10000000000000142,"rotate":260,"color":"#9BB3EF"},{"id":"addModelskjgtogq9ph","name":"trafficLights.glb","type":"trafficLights.glb","x":750570.3740299683,"y":2563772.5600864515,"z":0.10000000000000142,"rotate":180,"color":"#9BB3EF"},{"id":"addModelzjt58jg4gl9","name":"trafficLights.glb","type":"trafficLights.glb","x":750553.1764871636,"y":2563762.0181775955,"z":0.09999999999999432,"rotate":73,"color":"#9BB3EF"},{"id":"addModelfei4n61vtjo","name":"trafficLights.glb","type":"trafficLights.glb","x":750558.5083363396,"y":2563729.90067956,"z":0.09999999999999432,"rotate":1,"color":"#9BB3EF"},{"id":"addModelr6uvsa39cig","name":"trafficLights.glb","type":"trafficLights.glb","x":751140.9573675726,"y":2564855.5566755314,"z":0.10000000000000142,"rotate":55,"color":"#9BB3EF"},{"id":"addModelcxfxzeerr3g","name":"trafficLights.glb","type":"trafficLights.glb","x":751166.3762783093,"y":2564800.736616816,"z":0.09999999999999432,"rotate":220,"color":"#9BB3EF"},{"id":"addModel2qqkvmg5hyi","name":"trafficLights.glb","type":"trafficLights.glb","x":751127.3046964019,"y":2564822.7557866042,"z":0.10000000000000853,"rotate":140,"color":"#9BB3EF"},{"id":"addModelbr6cegb0w8l","name":"trafficLights.glb","type":"trafficLights.glb","x":751181.0944706243,"y":2564836.0349574354,"z":0.09999999999999432,"rotate":320,"color":"#9BB3EF"},{"id":"addModelim7x6g14b2","name":"trafficLights.glb","type":"trafficLights.glb","x":751200.9123638702,"y":2564516.956886496,"z":0.10000000000000142,"rotate":10,"color":"#9BB3EF"},{"id":"addModeljbdpoddsp9","name":"trafficLights.glb","type":"trafficLights.glb","x":751206.9981459294,"y":2564484.841091099,"z":0.09999999999999432,"rotate":280,"color":"#9BB3EF"},{"id":"addModel9m0a1pw344q","name":"trafficLights.glb","type":"trafficLights.glb","x":751189.2572326626,"y":2564461.784184758,"z":0.10000000000000142,"rotate":200,"color":"#9BB3EF"},{"id":"addModel13agm6t09bxf","name":"trafficLights.glb","type":"trafficLights.glb","x":752111.6076231903,"y":2564838.4833010016,"z":0.0999999999999801,"rotate":10,"color":"#9BB3EF"},{"id":"addModelpyayeqnqn1b","name":"trafficLights.glb","type":"trafficLights.glb","x":752102.8017514878,"y":2564859.3463637554,"z":0.09999999999999964,"rotate":85,"color":"#9BB3EF"},{"id":"addModelf17x2zwn4ti","name":"trafficLights.glb","type":"trafficLights.glb","x":752076.1802485154,"y":2564829.2511374434,"z":0.09999999999999787,"rotate":195,"color":"#9BB3EF"},{"id":"addModeln6a1ad8i3e","name":"trafficLights.glb","type":"trafficLights.glb","x":752086.2756284515,"y":2564809.7186861937,"z":0.10000000000000142,"rotate":260,"color":"#9BB3EF"},{"id":"addModel6omk2ei6czn","name":"trafficLights.glb","type":"trafficLights.glb","x":752691.0312012294,"y":2565943.381031032,"z":0.09999999999999432,"rotate":255,"color":"#9BB3EF"},{"id":"addModelmvxhh2obskb","name":"trafficLights.glb","type":"trafficLights.glb","x":752682.5403147215,"y":2565942.581201234,"z":0.09999999999999432,"rotate":175,"color":"#9BB3EF"},{"id":"addModelxhu07u7l6x","name":"trafficLights.glb","type":"trafficLights.glb","x":752690.533241321,"y":2565956.5367266717,"z":0.10000000000000142,"rotate":350,"color":"#9BB3EF"},{"id":"addModell3axwl44m7","name":"trafficLights.glb","type":"trafficLights.glb","x":756759.3299535235,"y":2562370.305206363,"z":0.09999999999999432,"rotate":190,"color":"#9BB3EF"},{"id":"addModelcjcmby8mhu4","name":"trafficLights.glb","type":"trafficLights.glb","x":756795.1174238978,"y":2562387.797364979,"z":0.09999999999999432,"rotate":0,"color":"#9BB3EF"},{"id":"addModel3k9mi8rkjge","name":"trafficLights.glb","type":"trafficLights.glb","x":756792.7245960651,"y":2562397.0089648496,"z":0.10000000000000142,"rotate":285,"color":"#9BB3EF"},{"id":"addModelamu21of51nq","name":"trafficLights.glb","type":"trafficLights.glb","x":756793.271424161,"y":2562431.922145342,"z":0.10000000000000142,"rotate":105,"color":"#9BB3EF"},{"id":"addModel3ch4ap4ndf","name":"trafficLights.glb","type":"trafficLights.glb","x":756762.2914490917,"y":2562432.964818469,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF"},{"id":"addModelf0o7x9d03rp","name":"trafficLights.glb","type":"trafficLights.glb","x":756737.9387848488,"y":2562429.1729544513,"z":0.09999999999999432,"rotate":105,"color":"#9BB3EF"},{"id":"addModelxncvp7471ul","name":"trafficLights.glb","type":"trafficLights.glb","x":756737.7444370062,"y":2562393.396166779,"z":0.09999999999999432,"rotate":283,"color":"#9BB3EF"},{"id":"addModel5oza6vcjjhe","name":"trafficLights.glb","type":"trafficLights.glb","x":756777.2516317683,"y":2562449.616221472,"z":0.10000000000000142,"rotate":15,"color":"#9BB3EF"},{"id":"addModelo08ox67wbgr","name":"trafficLights.glb","type":"trafficLights.glb","x":756370.0006763231,"y":2562444.4856421268,"z":0.09999999999999432,"rotate":90,"color":"#9BB3EF"},{"id":"addModelokwognlj6y","name":"trafficLights.glb","type":"trafficLights.glb","x":756396.0350904096,"y":2562417.894308905,"z":0.09999999999999432,"rotate":215,"color":"#9BB3EF"},{"id":"addModel89nw1al61kl","name":"trafficLights.glb","type":"trafficLights.glb","x":756386.6445214251,"y":2562418.0799731533,"z":0.10000000000000853,"rotate":270,"color":"#9BB3EF"},{"id":"addModel62oecqdt1ww","name":"trafficLights.glb","type":"trafficLights.glb","x":753190.8550919086,"y":2562954.6045544897,"z":0.10000000000000853,"rotate":160,"color":"#9BB3EF"},{"id":"addModelvq676xenjpg","name":"trafficLights.glb","type":"trafficLights.glb","x":753184.1163820347,"y":2562984.5322814477,"z":0.10000000000000142,"rotate":75,"color":"#9BB3EF"},{"id":"addModelysm5mstsp3","name":"trafficLights.glb","type":"trafficLights.glb","x":753220.3732657286,"y":2562944.6974713914,"z":0.10000000000000142,"rotate":250,"color":"#9BB3EF"},{"id":"addModel6cwd9lkqds5","name":"trafficLights.glb","type":"trafficLights.glb","x":753174.6223060293,"y":2562992.8261333774,"z":0.09999999999999787,"rotate":290,"color":"#9BB3EF"},{"id":"addModel9ru7wgkeix4","name":"trafficLights.glb","type":"trafficLights.glb","x":752130.7584808081,"y":2563225.3841776215,"z":0.09999999999999432,"rotate":260,"color":"#9BB3EF"},{"id":"addModelh1x6gksdxvp","name":"trafficLights.glb","type":"trafficLights.glb","x":752082.6140732411,"y":2563258.6904281653,"z":0.10000000000000853,"rotate":86,"color":"#9BB3EF"},{"id":"addModelllgadx5y4c","name":"trafficLights.glb","type":"trafficLights.glb","x":752104.6354972651,"y":2563229.7979778857,"z":0.09999999999999432,"rotate":170,"color":"#9BB3EF"},{"id":"addModeljw3tz75zom","name":"trafficLights.glb","type":"trafficLights.glb","x":751831.3697923255,"y":2563295.9385900917,"z":0.10000000000000853,"rotate":85,"color":"#9BB3EF"},{"id":"addModeli34k7sq2ivg","name":"trafficLights.glb","type":"trafficLights.glb","x":751857.7269869471,"y":2563302.7152284626,"z":0.10000000000000142,"rotate":210,"color":"#9BB3EF"},{"id":"addModeleu2nt3od5ra","name":"trafficLights.glb","type":"trafficLights.glb","x":751847.2080267072,"y":2563316.17221161,"z":0.10000000000000142,"rotate":290,"color":"#9BB3EF"},{"id":"addModelwlj6diyaov8","name":"trafficLights.glb","type":"trafficLights.glb","x":751798.3837344279,"y":2563305.2292147563,"z":0.10000000000000142,"rotate":300,"color":"#9BB3EF"},{"id":"addModelt3vinu8ir4l","name":"trafficLights.glb","type":"trafficLights.glb","x":751809.711159464,"y":2563299.067961868,"z":0.09999999999999432,"rotate":175,"color":"#9BB3EF"},{"id":"addModeltb4m35378k","name":"trafficLights.glb","type":"trafficLights.glb","x":751827.5871267567,"y":2563271.0646786937,"z":0.09999999999999432,"rotate":260,"color":"#9BB3EF"},{"id":"addModelthdqn17uc8e","name":"trafficLights.glb","type":"trafficLights.glb","x":749975.681158675,"y":2563519.9344163216,"z":0.10000000000002274,"rotate":175,"color":"#9BB3EF"},{"id":"addModel21si5nu0sg2","name":"trafficLights.glb","type":"trafficLights.glb","x":749952.4818011515,"y":2563545.2977818847,"z":0.09999999999999432,"rotate":90,"color":"#9BB3EF"},{"id":"addModelg6ltcjcfjo","name":"trafficLights.glb","type":"trafficLights.glb","x":749991.8141646577,"y":2563519.139224631,"z":0.10000000000000853,"rotate":265,"color":"#9BB3EF"},{"id":"addModel0o7l0ketfh2","name":"trafficLights.glb","type":"trafficLights.glb","x":751310.4476755096,"y":2565007.4556789454,"z":0.09999999999999432,"rotate":320,"color":"#9BB3EF"},{"id":"addModelas3dj3b0e5g","name":"trafficLights.glb","type":"trafficLights.glb","x":751302.4309621464,"y":2564964.0392531874,"z":0.10000000000000853,"rotate":235,"color":"#9BB3EF"},{"id":"addModelxbl17ei90q","name":"trafficLights.glb","type":"trafficLights.glb","x":751280.2001269077,"y":2565032.0608650045,"z":0.10000000000000142,"rotate":55,"color":"#9BB3EF"},{"id":"addModelc9q89cprdy6","name":"trafficLights.glb","type":"trafficLights.glb","x":750500.4068214911,"y":2565843.712909544,"z":0.09999999999999432,"rotate":320,"color":"#9BB3EF"},{"id":"addModelmbflnauzsj","name":"trafficLights.glb","type":"trafficLights.glb","x":750480.8981051687,"y":2565864.580688006,"z":0.09999999999999432,"rotate":45,"color":"#9BB3EF"},{"id":"addModeleqxuc0ley8","name":"trafficLights.glb","type":"trafficLights.glb","x":750482.7719861971,"y":2565801.577692802,"z":0.09999999999999432,"rotate":225,"color":"#9BB3EF"},{"id":"addModel9gebgxahcda","name":"trafficLights.glb","type":"trafficLights.glb","x":749898.5681997142,"y":2565155.3391548702,"z":0.09999999999999432,"rotate":290,"color":"#9BB3EF"},{"id":"addModelbqdni9f23b","name":"trafficLights.glb","type":"trafficLights.glb","x":749891.1966170975,"y":2565194.3858022853,"z":0.09999999999999432,"rotate":35,"color":"#9BB3EF"},{"id":"addModelaaya5fs8x1","name":"trafficLights.glb","type":"trafficLights.glb","x":749877.3014094069,"y":2565163.764853554,"z":0.09999999999999787,"rotate":295,"color":"#9BB3EF"},{"id":"addModelg7o1ewfpuu","name":"trafficLights.glb","type":"trafficLights.glb","x":750174.057723232,"y":2563873.808997165,"z":0.10000000000000142,"rotate":210,"color":"#9BB3EF"},{"id":"addModelncv8mxiszz","name":"trafficLights.glb","type":"trafficLights.glb","x":750204.900144,"y":2563874.5721071274,"z":0.10000000000000853,"rotate":335,"color":"#9BB3EF"},{"id":"addModelsaizfiya04o","name":"trafficLights.glb","type":"trafficLights.glb","x":750192.586287107,"y":2563881.3237472866,"z":0.10000000000000142,"rotate":155,"color":"#9BB3EF"},{"id":"addModelqtfk50o590b","name":"trafficLights.glb","type":"trafficLights.glb","x":750190.1309243181,"y":2563882.428884083,"z":4.2e-16,"rotate":25,"color":"#9BB3EF"},{"id":"addModel4hjmuak7mwa","name":"trafficLights.glb","type":"trafficLights.glb","x":750191.883338965,"y":2563878.03327681,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF"},{"id":"addModelfx4x2v9nfzl","name":"trafficLights.glb","type":"trafficLights.glb","x":748970.7128940457,"y":2564117.0518558435,"z":0.10000000000000853,"rotate":200,"color":"#9BB3EF"},{"id":"addModely9b3ba27uy7","name":"trafficLights.glb","type":"trafficLights.glb","x":748920.896257766,"y":2564143.3418741664,"z":0.09999999999999432,"rotate":240,"color":"#9BB3EF"},{"id":"addModelbxhm63hb0hi","name":"trafficLights.glb","type":"trafficLights.glb","x":748931.4277801163,"y":2564164.5824949187,"z":0.09999999999999432,"rotate":65,"color":"#9BB3EF"},{"id":"addModeldnku18r4tei","name":"trafficLights.glb","type":"trafficLights.glb","x":748954.2872116392,"y":2564220.3753047907,"z":0.09999999999999432,"rotate":115,"color":"#9BB3EF"},{"id":"addModelt866qvlzsjs","name":"trafficLights.glb","type":"trafficLights.glb","x":748936.436502073,"y":2564183.6585471355,"z":0.10000000000000142,"rotate":285,"color":"#9BB3EF"},{"id":"addModelobrqxkfspj","name":"trafficLights.glb","type":"trafficLights.glb","x":748996.780522101,"y":2564246.3486206434,"z":0.09999999999999432,"rotate":345,"color":"#9BB3EF"},{"id":"addModelg2kv0dao6qh","name":"trafficLights.glb","type":"trafficLights.glb","x":748975.0535739075,"y":2564248.1137970346,"z":0.10000000000000142,"rotate":165,"color":"#9BB3EF"},{"id":"addModel9ft9itkj4s4","name":"trafficLights.glb","type":"trafficLights.glb","x":749055.9730844261,"y":2564213.8861657684,"z":0.09999999999999432,"rotate":0,"color":"#9BB3EF"},{"id":"addModelupkbz3z9w7","name":"trafficLights.glb","type":"trafficLights.glb","x":749074.3199194451,"y":2564181.9770897087,"z":0.09999999999999432,"rotate":270,"color":"#9BB3EF"},{"id":"addModel1paax0w1d59","name":"trafficLights.glb","type":"trafficLights.glb","x":749074.8663994661,"y":2564167.655961691,"z":0.09999999999999432,"rotate":290,"color":"#9BB3EF"},{"id":"addModelgel0mhe5mrd","name":"trafficLights.glb","type":"trafficLights.glb","x":749068.1117672424,"y":2564167.946488403,"z":0.09999999999999432,"rotate":295,"color":"#9BB3EF"},{"id":"addModelnyeoqadw6np","name":"trafficLights.glb","type":"trafficLights.glb","x":749085.4482007872,"y":2564137.3772395453,"z":0.09999999999999432,"rotate":1,"color":"#9BB3EF"},{"id":"addModel5aedz9qxog8","name":"trafficLights.glb","type":"trafficLights.glb","x":749026.9122985041,"y":2564913.1332847825,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF"},{"id":"addModel2etb5jesmh","name":"trafficLights.glb","type":"trafficLights.glb","x":749002.64535194,"y":2564911.4562181383,"z":0.10000000000000142,"rotate":95,"color":"#9BB3EF"},{"id":"addModelac9ia4lumw","name":"trafficLights.glb","type":"trafficLights.glb","x":749001.6493878289,"y":2564884.826909557,"z":0.10000000000000853,"rotate":180,"color":"#9BB3EF"},{"id":"addModel9n7ugo5fmmi","name":"trafficLights.glb","type":"trafficLights.glb","x":749028.6610251282,"y":2564886.2421251577,"z":0.10000000000000853,"rotate":275,"color":"#9BB3EF"},{"id":"addModeliwdc97zyos","name":"trafficLights.glb","type":"trafficLights.glb","x":753577.495567248,"y":2566848.788984452,"z":0.09999999999999432,"rotate":310,"color":"#9BB3EF"},{"id":"addModelujij75edkbj","name":"trafficLights.glb","type":"trafficLights.glb","x":753568.0702598315,"y":2566836.672517201,"z":0.10000000000000142,"rotate":50,"color":"#9BB3EF"},{"id":"addModelckhtfrd7dca","name":"trafficLights.glb","type":"trafficLights.glb","x":753513.8069015987,"y":2566853.1844495656,"z":0.10000000000000142,"rotate":130,"color":"#9BB3EF"},{"id":"addModelqqhmydd5o6","name":"trafficLights.glb","type":"trafficLights.glb","x":753529.903863846,"y":2566866.8920814153,"z":0.29999999999999966,"rotate":40,"color":"#9BB3EF"},{"id":"addModelr0rwr3rh82h","name":"trafficLights.glb","type":"trafficLights.glb","x":753811.5865026796,"y":2565390.2863283157,"z":0.10000000000000142,"rotate":185,"color":"#9BB3EF"},{"id":"addModel5fkdo9ybxz7","name":"trafficLights.glb","type":"trafficLights.glb","x":753836.36752948,"y":2565411.2739573335,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF"},{"id":"addModelib5d82t1ds","name":"trafficLights.glb","type":"trafficLights.glb","x":753835.4817829364,"y":2565391.5140570956,"z":0.10000000000000142,"rotate":270,"color":"#9BB3EF"},{"id":"addModelu6jm7cqphwf","name":"trafficLights.glb","type":"trafficLights.glb","x":753147.1703072276,"y":2565288.5036710897,"z":0.10000000000000142,"rotate":288,"color":"#9BB3EF"},{"id":"addModelmfn5o3urgs","name":"trafficLights.glb","type":"trafficLights.glb","x":753186.0639046279,"y":2565300.7755361097,"z":0.3999999999999943,"rotate":105,"color":"#9BB3EF"},{"id":"addModellhbn5csk7y","name":"trafficLights.glb","type":"trafficLights.glb","x":753168.2888614382,"y":2565273.7508286997,"z":0.09999999999999432,"rotate":15,"color":"#9BB3EF"},{"id":"addModelrwx62ez9h8q","name":"trafficLights.glb","type":"trafficLights.glb","x":753154.3753818355,"y":2565367.086257222,"z":0.10000000000000853,"rotate":15,"color":"#9BB3EF"},{"id":"addModellbb6tv95o5","name":"trafficLights.glb","type":"trafficLights.glb","x":753133.963802265,"y":2565342.807004807,"z":0.10000000000000853,"rotate":198,"color":"#9BB3EF"},{"id":"addModelq4e342atpzm","name":"trafficLights.glb","type":"trafficLights.glb","x":753129.0866718569,"y":2565358.5825787256,"z":0.10000000000000142,"rotate":110,"color":"#9BB3EF"},{"id":"addModelqd9facwo71s","name":"trafficLights.glb","type":"trafficLights.glb","x":753168.9608023594,"y":2565355.77833859,"z":0.09999999999999432,"rotate":284,"color":"#9BB3EF"},{"id":"addModelada63971j4","name":"trafficLights.glb","type":"trafficLights.glb","x":759541.4619020628,"y":2582755.703276781,"z":0.10000000000000142,"rotate":215,"color":"#9BB3EF"},{"id":"addModelpncz6kbyk0p","name":"trafficLights.glb","type":"trafficLights.glb","x":759525.970142264,"y":2582783.777348876,"z":0.10000000000000053,"rotate":120,"color":"#9BB3EF"},{"id":"addModellwumthnyzp9","name":"trafficLights.glb","type":"trafficLights.glb","x":759553.0658893596,"y":2582805.782339351,"z":0.09999999999999787,"rotate":30,"color":"#9BB3EF"},{"id":"addModel8ptpb2mlc5e","name":"trafficLights.glb","type":"trafficLights.glb","x":759567.5179992603,"y":2582777.2443531984,"z":0.1000000000000014,"rotate":310,"color":"#9BB3EF"},{"id":"addModelskusrsmd8nf","name":"trafficLights.glb","type":"trafficLights.glb","x":760270.8156263926,"y":2582798.595068746,"z":0.10000000000000142,"rotate":40,"color":"#9BB3EF"},{"id":"addModelmirbq90n01","name":"trafficLights.glb","type":"trafficLights.glb","x":760265.3386416273,"y":2582758.4744052384,"z":0.09999999999999432,"rotate":230,"color":"#9BB3EF"},{"id":"addModelzwkwmknw17a","name":"trafficLights.glb","type":"trafficLights.glb","x":760479.2781552246,"y":2582602.05673942,"z":0.10000000000000142,"rotate":330,"color":"#9BB3EF"},{"id":"addModel78gvk9avug","name":"trafficLights.glb","type":"trafficLights.glb","x":760464.9968323053,"y":2582573.8753302386,"z":0.09999999999999432,"rotate":240,"color":"#9BB3EF"},{"id":"addModelcx9bb7i1gog","name":"trafficLights.glb","type":"trafficLights.glb","x":760451.5703305184,"y":2582582.9664232275,"z":0.10000000000000142,"rotate":140,"color":"#9BB3EF"},{"id":"addModeluxduvr4f1xa","name":"trafficLights.glb","type":"trafficLights.glb","x":760459.2022446067,"y":2582616.006844633,"z":0.10000000000000142,"rotate":60,"color":"#9BB3EF"},{"id":"addModelq1cm20q5ttn","name":"trafficLights.glb","type":"trafficLights.glb","x":760890.2733678116,"y":2582070.0257100947,"z":0.10000000000000142,"rotate":310,"color":"#9BB3EF"},{"id":"addModel7fdpka6v4n3","name":"trafficLights.glb","type":"trafficLights.glb","x":760870.527284023,"y":2582050.2275874848,"z":0.09999999999999432,"rotate":220,"color":"#9BB3EF"},{"id":"addModel1vyc4wdzjbr","name":"trafficLights.glb","type":"trafficLights.glb","x":760522.7276280348,"y":2581718.5830715825,"z":0.10000000000000142,"rotate":220,"color":"#9BB3EF"},{"id":"addModelg3y2lt7d6or","name":"trafficLights.glb","type":"trafficLights.glb","x":760526.9642529333,"y":2581767.8618473825,"z":0.09999999999999787,"rotate":40,"color":"#9BB3EF"},{"id":"addModel2ybqj7q4ua9","name":"trafficLights.glb","type":"trafficLights.glb","x":760548.8777871596,"y":2581742.1726717753,"z":0.10000000000000142,"rotate":313,"color":"#9BB3EF"},{"id":"addModelotdg68zmjp","name":"trafficLights.glb","type":"trafficLights.glb","x":760501.9855343384,"y":2581744.934287169,"z":0.10000000000000142,"rotate":130,"color":"#9BB3EF"},{"id":"addModelphel5p2l7h","name":"trafficLights.glb","type":"trafficLights.glb","x":760165.3870029184,"y":2581546.6534705227,"z":0.09999999999999432,"rotate":120,"color":"#9BB3EF"},{"id":"addModelp32z49xo85a","name":"trafficLights.glb","type":"trafficLights.glb","x":760206.673902913,"y":2581537.3938646624,"z":0.09999999999999432,"rotate":310,"color":"#9BB3EF"},{"id":"addModeln49t48aisn","name":"trafficLights.glb","type":"trafficLights.glb","x":759997.4463738725,"y":2581277.6875965637,"z":0.09999999999999432,"rotate":298,"color":"#9BB3EF"},{"id":"addModelpsbwct5383","name":"trafficLights.glb","type":"trafficLights.glb","x":759966.5826976745,"y":2581251.0561154075,"z":0.09999999999999432,"rotate":220,"color":"#9BB3EF"},{"id":"addModelshmznprjpm","name":"trafficLights.glb","type":"trafficLights.glb","x":759936.2307098402,"y":2581275.702450408,"z":0.09999999999999787,"rotate":120,"color":"#9BB3EF"},{"id":"addModelwexxgwfargr","name":"trafficLights.glb","type":"trafficLights.glb","x":759968.2595020088,"y":2581315.9501061547,"z":0.09999999999999432,"rotate":55,"color":"#9BB3EF"},{"id":"addModelws7k9v16jch","name":"trafficLights.glb","type":"trafficLights.glb","x":759645.7787618226,"y":2581015.224320826,"z":0.09999999999999787,"rotate":40,"color":"#9BB3EF"},{"id":"addModelds6v6h76g76","name":"trafficLights.glb","type":"trafficLights.glb","x":759648.3428082189,"y":2580959.329342546,"z":0.10000000000000142,"rotate":215,"color":"#9BB3EF"},{"id":"addModelz56yu4lr6b","name":"trafficLights.glb","type":"trafficLights.glb","x":759657.8446511705,"y":2581000.963329387,"z":0.10000000000000142,"rotate":310,"color":"#9BB3EF"},{"id":"addModeljj7af127ey","name":"trafficLights.glb","type":"trafficLights.glb","x":759655.7832238997,"y":2581018.7858349998,"z":0.09999999999999787,"rotate":125,"color":"#9BB3EF"},{"id":"addModel26hjc7dek6b","name":"trafficLights.glb","type":"trafficLights.glb","x":759209.1269822672,"y":2581449.2208599197,"z":0.10000000000000853,"rotate":60,"color":"#9BB3EF"},{"id":"addModel1uo6s3hosd6","name":"trafficLights.glb","type":"trafficLights.glb","x":759187.0432396573,"y":2581414.90807089,"z":0.09999999999999432,"rotate":140,"color":"#9BB3EF"},{"id":"addModelrx2v5m3rd2","name":"trafficLights.glb","type":"trafficLights.glb","x":759226.1437719585,"y":2581387.482532377,"z":0.10000000000000142,"rotate":230,"color":"#9BB3EF"},{"id":"addModelxw6lrmx0rbg","name":"trafficLights.glb","type":"trafficLights.glb","x":759244.1391355118,"y":2581431.0294135003,"z":0.09999999999999432,"rotate":320,"color":"#9BB3EF"},{"id":"addModelecn3it7nr7t","name":"trafficLights.glb","type":"trafficLights.glb","x":758807.3986964824,"y":2581942.033115861,"z":0.09999999999999432,"rotate":115,"color":"#9BB3EF"},{"id":"addModelv8wgkksi3zq","name":"trafficLights.glb","type":"trafficLights.glb","x":758846.2570258318,"y":2581959.8267016537,"z":0.10000000000000142,"rotate":30,"color":"#9BB3EF"},{"id":"addModel0py5n11qqozn","name":"trafficLights.glb","type":"trafficLights.glb","x":758812.6533905959,"y":2581927.0640326384,"z":0.10000000000000142,"rotate":215,"color":"#9BB3EF"},{"id":"addModelz1gsg7dlpok","name":"trafficLights.glb","type":"trafficLights.glb","x":759046.5139681041,"y":2582128.676250689,"z":0.10000000000000853,"rotate":265,"color":"#9BB3EF"},{"id":"addModelc5mwofs667","name":"trafficLights.glb","type":"trafficLights.glb","x":759087.3866124318,"y":2582137.477515641,"z":0.10000000000000142,"rotate":350,"color":"#9BB3EF"},{"id":"addModel3ga07b13xho","name":"trafficLights.glb","type":"trafficLights.glb","x":759042.2674036508,"y":2582117.0027256217,"z":0.10000000000000142,"rotate":175,"color":"#9BB3EF"},{"id":"addModelu1q4kv9u2o","name":"trafficLights.glb","type":"trafficLights.glb","x":759294.0320876682,"y":2582418.4611449013,"z":0.10000000000000142,"rotate":300,"color":"#9BB3EF"},{"id":"addModelndzzjijshlc","name":"trafficLights.glb","type":"trafficLights.glb","x":759257.5408339492,"y":2582434.658563695,"z":0.10000000000000142,"rotate":120,"color":"#9BB3EF"},{"id":"addModelc61b4a4zlyc","name":"trafficLights.glb","type":"trafficLights.glb","x":759283.8123964466,"y":2582413.1507073976,"z":0.10000000000000142,"rotate":30,"color":"#9BB3EF"},{"id":"addModelb2a5vvyhizh","name":"trafficLights.glb","type":"trafficLights.glb","x":759615.4335199897,"y":2582091.209518492,"z":0.10000000000000142,"rotate":168,"color":"#9BB3EF"},{"id":"addModelfsu602amjam","name":"trafficLights.glb","type":"trafficLights.glb","x":759645.219536043,"y":2582095.1834052047,"z":0.09999999999999432,"rotate":258,"color":"#9BB3EF"},{"id":"addModelwxg9gq3dqlc","name":"trafficLights.glb","type":"trafficLights.glb","x":759650.5358781156,"y":2582118.232545464,"z":0.09999999999999787,"rotate":350,"color":"#9BB3EF"},{"id":"addModelnv74827uhd8","name":"trafficLights.glb","type":"trafficLights.glb","x":759636.8049098783,"y":2581820.6869653054,"z":0.09999999999999432,"rotate":210,"color":"#9BB3EF"},{"id":"addModel1s2xnmei6vh","name":"trafficLights.glb","type":"trafficLights.glb","x":759666.7629197846,"y":2581849.473504288,"z":0.09999999999999787,"rotate":299,"color":"#9BB3EF"},{"id":"addModelxz3guxq54b","name":"trafficLights.glb","type":"trafficLights.glb","x":759615.773302551,"y":2581866.4352925173,"z":0.10000000000000142,"rotate":115,"color":"#9BB3EF"},{"id":"addModelhby98di8c2k","name":"trafficLights.glb","type":"trafficLights.glb","x":759638.8267656262,"y":2581880.7095563617,"z":0.10000000000000142,"rotate":20,"color":"#9BB3EF"},{"id":"addModelwzbv3vro75n","name":"trafficLights.glb","type":"trafficLights.glb","x":760060.399667184,"y":2582174.3429009253,"z":0.09999999999999964,"rotate":335,"color":"#9BB3EF"},{"id":"addModel8fr0l306s9l","name":"trafficLights.glb","type":"trafficLights.glb","x":760016.0072950525,"y":2582197.336279873,"z":0.09999999999999964,"rotate":50,"color":"#9BB3EF"},{"id":"addModela753a9mr9uk","name":"trafficLights.glb","type":"trafficLights.glb","x":760035.5274303083,"y":2582151.81804932,"z":0.10000000000000142,"rotate":225,"color":"#9BB3EF"},{"id":"addModellbfck66kcra","name":"trafficLights.glb","type":"trafficLights.glb","x":759998.9142359836,"y":2582168.216442378,"z":0.09999999999999787,"rotate":150,"color":"#9BB3EF"},{"id":"addModelq31bywtkccg","name":"trafficLights.glb","type":"trafficLights.glb","x":743665.9550332605,"y":2553630.817407111,"z":0.9,"rotate":140,"color":"#9BB3EF"},{"id":"addModelupi5n31akuc","name":"trafficLights.glb","type":"trafficLights.glb","x":742533.0371745282,"y":2553422.1178270825,"z":0.400000000000002,"rotate":310,"color":"#9BB3EF"},{"id":"addModel6ecgy2beyft","name":"trafficLights.glb","type":"trafficLights.glb","x":742505.51521484,"y":2553425.265558018,"z":0.200000000000009,"rotate":130,"color":"#9BB3EF"},{"id":"addModelxpcpv3idcb","name":"trafficLights.glb","type":"trafficLights.glb","x":742491.3205569563,"y":2553410.94070302,"z":0.19999999999999432,"rotate":270,"color":"#9BB3EF"},{"id":"addModeliwyqnq2wfub","name":"trafficLights.glb","type":"trafficLights.glb","x":742540.645664101,"y":2553431.46556,"z":0.2999999999999979,"rotate":210,"color":"#9BB3EF"},{"id":"addModelmzxclpoaxu","name":"trafficLights.glb","type":"trafficLights.glb","x":742751.1202489855,"y":2553578.4192769895,"z":0.09999999999999787,"rotate":180,"color":"#9BB3EF"},{"id":"addModeljraf5hbswp","name":"trafficLights.glb","type":"trafficLights.glb","x":742750.0783783407,"y":2553577.543182252,"z":0.900000000000002,"rotate":300,"color":"#9BB3EF"},{"id":"addModelux7wa2ex6wo","name":"trafficLights.glb","type":"trafficLights.glb","x":742723.7223732956,"y":2553586.198357453,"z":0.10000000000000142,"rotate":120,"color":"#9BB3EF"},{"id":"addModel1ztv3xppnjl","name":"trafficLights.glb","type":"trafficLights.glb","x":742922.630247734,"y":2553657.1876562457,"z":0.30000000000000143,"rotate":290,"color":"#9BB3EF"},{"id":"addModellnffnhxl2q","name":"trafficLights.glb","type":"trafficLights.glb","x":742871.4734525478,"y":2553660.7147865035,"z":0.09999999999999432,"rotate":110,"color":"#9BB3EF"},{"id":"addModeliyigavgk4qo","name":"trafficLights.glb","type":"trafficLights.glb","x":743153.6114546026,"y":2553707.6497432436,"z":0.09999999999999787,"rotate":145,"color":"#9BB3EF"},{"id":"addModellt9rqq1wby","name":"trafficLights.glb","type":"trafficLights.glb","x":743146.4482591931,"y":2553706.72091106,"z":0.10000000000000497,"rotate":275,"color":"#9BB3EF"},{"id":"addModelivw6a2x8j1k","name":"trafficLights.glb","type":"trafficLights.glb","x":743132.6173781473,"y":2553725.876278616,"z":0.10000000000000853,"rotate":100,"color":"#9BB3EF"},{"id":"addModelfb1bbizac2","name":"trafficLights.glb","type":"trafficLights.glb","x":743355.5357101365,"y":2553733.4267417914,"z":0.09999999999999787,"rotate":360,"color":"#9BB3EF"},{"id":"addModeluhql9y6p2k","name":"trafficLights.glb","type":"trafficLights.glb","x":743370.1286005073,"y":2553713.6058618594,"z":0.10000000000000142,"rotate":270,"color":"#9BB3EF"},{"id":"addModeldxkymcbs1nr","name":"trafficLights.glb","type":"trafficLights.glb","x":743333.9907390313,"y":2553733.5558561585,"z":0.09999999999999432,"rotate":92,"color":"#9BB3EF"},{"id":"addModelnvnbvi0572m","name":"trafficLights.glb","type":"trafficLights.glb","x":743636.4383017501,"y":2553684.3823782685,"z":0.09999999999999787,"rotate":80,"color":"#9BB3EF"},{"id":"addModellz5fi4e4i1p","name":"trafficLights.glb","type":"trafficLights.glb","x":743626.540417384,"y":2553693.523811688,"z":0.10000000000000142,"rotate":25,"color":"#9BB3EF"},{"id":"addModelonykn1xva","name":"trafficLights.glb","type":"trafficLights.glb","x":743616.5880679584,"y":2553658.748535015,"z":0.09999999999999432,"rotate":220,"color":"#9BB3EF"},{"id":"addModeli0ue27rt16e","name":"trafficLights.glb","type":"trafficLights.glb","x":743622.7489347878,"y":2553552.560810261,"z":0.10000000000000142,"rotate":330,"color":"#9BB3EF"},{"id":"addModeldj2wpxyazhn","name":"trafficLights.glb","type":"trafficLights.glb","x":743587.4144776483,"y":2553535.201037806,"z":0.10000000000000142,"rotate":145,"color":"#9BB3EF"},{"id":"addModeljjbbq2s02dq","name":"trafficLights.glb","type":"trafficLights.glb","x":743595.1965676765,"y":2553555.2987047434,"z":0.10000000000000142,"rotate":270,"color":"#9BB3EF"},{"id":"addModelsvyc6e13xv","name":"trafficLights.glb","type":"trafficLights.glb","x":743507.8831226693,"y":2553352.314474798,"z":0.09999999999999787,"rotate":330,"color":"#9BB3EF"},{"id":"addModelj00tc44epwe","name":"trafficLights.glb","type":"trafficLights.glb","x":743473.6773291187,"y":2553330.008901829,"z":0.09999999999999432,"rotate":210,"color":"#9BB3EF"},{"id":"addModelz7mjgadayjj","name":"trafficLights.glb","type":"trafficLights.glb","x":743480.7929722292,"y":2553345.073186241,"z":0.09999999999999432,"rotate":35,"color":"#9BB3EF"},{"id":"addModeltn78a3clb2g","name":"trafficLights.glb","type":"trafficLights.glb","x":743481.2066337963,"y":2553355.1892745006,"z":0.10000000000000142,"rotate":270,"color":"#9BB3EF"},{"id":"addModelqs6f9tv69tp","name":"trafficLights.glb","type":"trafficLights.glb","x":743479.2248845126,"y":2553345.892649466,"z":30,"rotate":300,"color":"#9BB3EF"},{"id":"addModelpct3ak1qoah","name":"trafficLights.glb","type":"trafficLights.glb","x":743430.0696332124,"y":2553169.7870296356,"z":1.1000000000000014,"rotate":340,"color":"#9BB3EF"},{"id":"addModel04iftw2zhpv1","name":"trafficLights.glb","type":"trafficLights.glb","x":743423.931144498,"y":2553146.6745230765,"z":0.8999999999999944,"rotate":245,"color":"#9BB3EF"},{"id":"addModelc9izmz9hvjv","name":"trafficLights.glb","type":"trafficLights.glb","x":743398.4341711218,"y":2553145.9591036555,"z":0.5000000000000014,"rotate":160,"color":"#9BB3EF"},{"id":"addModely0z6my2hzqg","name":"trafficLights.glb","type":"trafficLights.glb","x":743390.7488981474,"y":2553137.2176737897,"z":0.5000000000000014,"rotate":50,"color":"#9BB3EF"},{"id":"addModelhvjcvhbb1qi","name":"trafficLights.glb","type":"trafficLights.glb","x":742982.4826776754,"y":2552648.1544760475,"z":0.10000000000000142,"rotate":300,"color":"#9BB3EF"},{"id":"addModelb4mnp1k3yli","name":"trafficLights.glb","type":"trafficLights.glb","x":742955.1202993861,"y":2552656.370374304,"z":0.10000000000000142,"rotate":120,"color":"#9BB3EF"},{"id":"addModeljy3joefa26","name":"trafficLights.glb","type":"trafficLights.glb","x":742974.2063214297,"y":2552676.1965154,"z":0.10000000000000142,"rotate":240,"color":"#9BB3EF"},{"id":"addModel9520wio6tjg","name":"trafficLights.glb","type":"trafficLights.glb","x":742960.2659116227,"y":2552666.9076751433,"z":0.10000000000000142,"rotate":180,"color":"#9BB3EF"},{"id":"addModel8d23j8bkuym","name":"trafficLights.glb","type":"trafficLights.glb","x":742803.5942528301,"y":2552541.1453017113,"z":0.10000000000000142,"rotate":300,"color":"#9BB3EF"},{"id":"addModel1w29j36g6sv","name":"trafficLights.glb","type":"trafficLights.glb","x":742758.793270339,"y":2552540.3948528403,"z":0.500000000000014,"rotate":120,"color":"#9BB3EF"},{"id":"addModeln1wkkkh0pr9","name":"trafficLights.glb","type":"trafficLights.glb","x":742581.7983379926,"y":2552352.7505689403,"z":0.5000000000000014,"rotate":310,"color":"#9BB3EF"},{"id":"addModel338ge1z7u2r","name":"trafficLights.glb","type":"trafficLights.glb","x":742552.1234155052,"y":2552354.7751336806,"z":0.5999999999999979,"rotate":130,"color":"#9BB3EF"},{"id":"addModelrff3h8cyves","name":"trafficLights.glb","type":"trafficLights.glb","x":742556.7169560419,"y":2552382.849165947,"z":0.10000000000000142,"rotate":180,"color":"#9BB3EF"},{"id":"addModelmt1xuqepxmn","name":"trafficLights.glb","type":"trafficLights.glb","x":742588.5179303846,"y":2552408.3972291327,"z":0.09999999999999787,"rotate":250,"color":"#9BB3EF"},{"id":"addModel7tndlewjc6w","name":"trafficLights.glb","type":"trafficLights.glb","x":742410.9560922895,"y":2552191.9699563826,"z":0.10000000000000853,"rotate":315,"color":"#9BB3EF"},{"id":"addModel9acwm30b4y","name":"trafficLights.glb","type":"trafficLights.glb","x":742380.2426223301,"y":2552193.352071978,"z":0.09999999999999787,"rotate":0,"color":"#9BB3EF"},{"id":"addModelzmjhx34tve","name":"trafficLights.glb","type":"trafficLights.glb","x":742380.9447233591,"y":2552209.4660583874,"z":0.10000000000000142,"rotate":255,"color":"#9BB3EF"},{"id":"addModelhwjpkyrz7bp","name":"trafficLights.glb","type":"trafficLights.glb","x":742176.002484604,"y":2552105.193013559,"z":0.09999999999999432,"rotate":255,"color":"#9BB3EF"},{"id":"addModelp604r9d846a","name":"trafficLights.glb","type":"trafficLights.glb","x":742172.5178355838,"y":2552135.399574518,"z":0.09999999999999964,"rotate":195,"color":"#9BB3EF"},{"id":"addModel3vk4djmcv65","name":"trafficLights.glb","type":"trafficLights.glb","x":742144.7647075602,"y":2552141.048899074,"z":0.09999999999999432,"rotate":80,"color":"#9BB3EF"},{"id":"addModelrx7ifu7vhac","name":"trafficLights.glb","type":"trafficLights.glb","x":742163.2566472313,"y":2552132.8400033657,"z":0.09999999999999787,"rotate":310,"color":"#9BB3EF"},{"id":"addModeld5rlkdkil3d","name":"trafficLights.glb","type":"trafficLights.glb","x":742008.0912205448,"y":2552358.279598072,"z":0.09999999999999787,"rotate":10,"color":"#9BB3EF"},{"id":"addModelryafr9u23aj","name":"trafficLights.glb","type":"trafficLights.glb","x":741991.2258209729,"y":2552334.829394447,"z":0.10000000000000853,"rotate":110,"color":"#9BB3EF"},{"id":"addModelvm3drnzjtk8","name":"trafficLights.glb","type":"trafficLights.glb","x":741996.3536396109,"y":2552316.739405925,"z":0.09999999999999432,"rotate":195,"color":"#9BB3EF"},{"id":"addModelp8n6l2tqzl","name":"trafficLights.glb","type":"trafficLights.glb","x":741975.36560483,"y":2552503.438363058,"z":0.10000000000000853,"rotate":175,"color":"#9BB3EF"},{"id":"addModeltpvm8m2drs","name":"trafficLights.glb","type":"trafficLights.glb","x":741997.9315470081,"y":2552552.6393796946,"z":0.10000000000000142,"rotate":358,"color":"#9BB3EF"},{"id":"addModel9vvtqlrr7sc","name":"trafficLights.glb","type":"trafficLights.glb","x":742038.024336318,"y":2552740.684727405,"z":0.10000000000000142,"rotate":340,"color":"#9BB3EF"},{"id":"addModeleclpe2hf4dg","name":"trafficLights.glb","type":"trafficLights.glb","x":742016.0940340282,"y":2552741.3869543783,"z":0.10000000000000142,"rotate":95,"color":"#9BB3EF"},{"id":"addModelowze2f0fgh","name":"trafficLights.glb","type":"trafficLights.glb","x":742010.1475407657,"y":2552723.5709430776,"z":0.10000000000000142,"rotate":160,"color":"#9BB3EF"},{"id":"addModelxqxsn6kj4j","name":"trafficLights.glb","type":"trafficLights.glb","x":742039.2948772248,"y":2552745.399679743,"z":0.09999999999999787,"rotate":220,"color":"#9BB3EF"},{"id":"addModel80lf2npx97p","name":"trafficLights.glb","type":"trafficLights.glb","x":742130.9249479956,"y":2552945.066112394,"z":0.10000000000000142,"rotate":330,"color":"#9BB3EF"},{"id":"addModeltt7vf0b62i","name":"trafficLights.glb","type":"trafficLights.glb","x":742132.2333507854,"y":2552945.187101333,"z":0.09999999999999787,"rotate":220,"color":"#9BB3EF"},{"id":"addModel31gl7swxwg8","name":"trafficLights.glb","type":"trafficLights.glb","x":742103.8181547824,"y":2552935.383557795,"z":0.10000000000000142,"rotate":150,"color":"#9BB3EF"},{"id":"addModelxylcj12605q","name":"trafficLights.glb","type":"trafficLights.glb","x":742246.0457902601,"y":2553150.6690982515,"z":0.10000000000000142,"rotate":60,"color":"#9BB3EF"},{"id":"addModel21dnuoxlcj4","name":"trafficLights.glb","type":"trafficLights.glb","x":742232.265074676,"y":2553131.8422871367,"z":0.10000000000000142,"rotate":140,"color":"#9BB3EF"},{"id":"addModelcxivdobbf6c","name":"trafficLights.glb","type":"trafficLights.glb","x":742271.7284323176,"y":2553148.278424495,"z":0.10000000000000142,"rotate":320,"color":"#9BB3EF"},{"id":"addModelhm5wyhyerno","name":"trafficLights.glb","type":"trafficLights.glb","x":742291.1985163531,"y":2553165.0158426207,"z":0.09999999999999787,"rotate":200,"color":"#9BB3EF"},{"id":"addModely83y6l1k5eo","name":"trafficLights.glb","type":"trafficLights.glb","x":742553.23685295,"y":2552719.1261900202,"z":0.5000000000000014,"rotate":180,"color":"#9BB3EF"},{"id":"addModelrgb1ty25gq","name":"trafficLights.glb","type":"trafficLights.glb","x":742578.6617738069,"y":2552768.8234449,"z":0.5999999999999979,"rotate":0,"color":"#9BB3EF"},{"id":"addModel777esxa5vid","name":"trafficLights.glb","type":"trafficLights.glb","x":742578.5741386127,"y":2552977.18721907,"z":0.5000000000000014,"rotate":1,"color":"#9BB3EF"},{"id":"addModelq78a7dj7zj","name":"trafficLights.glb","type":"trafficLights.glb","x":742549.8878399737,"y":2552912.528416976,"z":0.5200000000000014,"rotate":180,"color":"#9BB3EF"},{"id":"addModel467qf3eq5rk","name":"trafficLights.glb","type":"trafficLights.glb","x":742555.6424165703,"y":2552529.0358290607,"z":0.30000000000000143,"rotate":180,"color":"#9BB3EF"},{"id":"addModelq03ss55kcyb","name":"trafficLights.glb","type":"trafficLights.glb","x":742580.6208649566,"y":2552581.4193155672,"z":0.2999999999999979,"rotate":0,"color":"#9BB3EF"},{"id":"addModeldb9wlcrs0je","name":"trafficLights.glb","type":"trafficLights.glb","x":742567.4625275078,"y":2552504.7311635767,"z":0.13000000000000014,"rotate":180,"color":"#9BB3EF"},{"id":"addModels7ylxodb61s","name":"trafficLights.glb","type":"trafficLights.glb","x":742940.4267121274,"y":2553167.1788058477,"z":0.10000000000000142,"rotate":90,"color":"#9BB3EF"},{"id":"addModelnchh2cbogwe","name":"trafficLights.glb","type":"trafficLights.glb","x":742978.718014419,"y":2553135.351177393,"z":0.10000000000000853,"rotate":270,"color":"#9BB3EF"},{"id":"addModelb4dufd2othm","name":"trafficLights.glb","type":"trafficLights.glb","x":742963.9909562955,"y":2553134.3945985325,"z":0.10000000000000142,"rotate":150,"color":"#9BB3EF"},{"id":"addModelmi9olvs4y4p","name":"trafficLights.glb","type":"trafficLights.glb","x":742956.6785162474,"y":2553129.062010238,"z":0.10000000000000142,"rotate":40,"color":"#9BB3EF"},{"id":"addModel3mer6bm3jfy","name":"trafficLights.glb","type":"trafficLights.glb","x":742956.484786811,"y":2553149.3036519485,"z":0.09999999999999964,"rotate":90,"color":"#9BB3EF"},{"id":"addModelnyap93i3fj9","name":"trafficLights.glb","type":"trafficLights.glb","x":742962.8391229651,"y":2553149.3439051,"z":0.09999999999999964,"rotate":270,"color":"#9BB3EF"},{"id":"addModelvtmepd7nnh","name":"trafficLights.glb","type":"trafficLights.glb","x":743176.3491894862,"y":2553139.5799192144,"z":0.10000000000000497,"rotate":270,"color":"#9BB3EF"},{"id":"addModel4i7zpuv6lfc","name":"trafficLights.glb","type":"trafficLights.glb","x":743139.743929162,"y":2553165.692887093,"z":0.10000000000000142,"rotate":90,"color":"#9BB3EF"},{"id":"addModel3o0vepgbjck","name":"trafficLights.glb","type":"trafficLights.glb","x":743162.4149585179,"y":2553139.0722384695,"z":0.09999999999999964,"rotate":145,"color":"#9BB3EF"},{"id":"addModelxv4bab19a1","name":"trafficLights.glb","type":"trafficLights.glb","x":743156.7521697619,"y":2553165.325176477,"z":0.10000000000000142,"rotate":330,"color":"#9BB3EF"},{"id":"addModellg61f3lo9da","name":"trafficLights.glb","type":"trafficLights.glb","x":742356.3802396167,"y":2552171.930324502,"z":0.09999999999999432,"rotate":130,"color":"#9BB3EF"},{"id":"addModel0v79kthnivmp","name":"trafficLights.glb","type":"trafficLights.glb","x":755914.4430009073,"y":2563139.0140460855,"z":0.08999999999999964,"rotate":260,"color":""},{"id":"addModel18cxcax7v3v1","name":"trafficLights.glb","type":"trafficLights.glb","x":750396,"y":2564306,"z":0.09999999999999432,"rotate":22,"color":"#9BB3EF","scale":1},{"id":"addModel18cxcax7v3v2","name":"trafficLights.glb","type":"trafficLights.glb","x":750414,"y":2564272,"z":0.09999999999999432,"rotate":302,"color":"#9BB3EF","scale":1},{"id":"addModel18cxcax7v3v3","name":"trafficLights.glb","type":"trafficLights.glb","x":750382,"y":2564256,"z":0.09999999999999432,"rotate":213,"color":"#9BB3EF","scale":1},{"id":"addModel18cxcax7v3v4","name":"trafficLights.glb","type":"trafficLights.glb","x":750365,"y":2564288,"z":0.09999999999999432,"rotate":123,"color":"#9BB3EF","scale":1},{"id":"addModel1odv2d5ajiz","name":"trafficLights.glb","type":"trafficLights.glb","x":750643.9829789832,"y":2564447.283135263,"z":0.10000000000000853,"rotate":120,"color":"#9BB3EF","scale":1},{"id":"addModel6qqu3mill3f","name":"trafficLights.glb","type":"trafficLights.glb","x":750625.3090637638,"y":2564419.557564952,"z":0.10000000000000142,"rotate":300,"color":"#9BB3EF","scale":1},{"id":"addModelr8dzblz3p1r","name":"trafficLights.glb","type":"trafficLights.glb","x":750652.3657328566,"y":2564431.8110810053,"z":0.09999999999999787,"rotate":110,"color":"#9BB3EF","scale":1},{"id":"addModelquuaqmaigdb","name":"trafficLights.glb","type":"trafficLights.glb","x":750635.651876927,"y":2564404.3260806384,"z":0.09999999999999964,"rotate":300,"color":"#9BB3EF","scale":1},{"id":"addModel.glbebs1fv4s7k","name":"红绿灯杆1","type":"trafficLights.glb","x":755866.7128651851,"y":2563187.062747781,"z":0.09999999999999787,"rotate":35,"color":"#9BB3EF","scale":1},{"id":"addModel.2jwhslhtqhr","name":"红绿灯杆2","type":"trafficLights.glb","x":755840.7138686856,"y":2563168.4596807025,"z":0.09999999999999432,"rotate":84,"color":"#9BB3EF","scale":1},{"id":"addModel.glbg3g4egwg5","name":"红绿灯杆3","type":"trafficLights.glb","x":755879.8006115317,"y":2563108.171763613,"z":0.10000000000000142,"rotate":220,"color":"#9BB3EF","scale":1},{"id":"addModel.glbo3z8sc88d","name":"红绿灯杆4","type":"trafficLights.glb","x":755904.5947662268,"y":2563124.8630909,"z":0.09999999999999432,"rotate":265,"color":"#9BB3EF","scale":1},{"id":"addModell9gyu4aqrqa","name":"trafficLights.glb","type":"trafficLights.glb","x":753515.2050422614,"y":2565719.929781598,"z":0.09999999999999432,"rotate":180,"color":"#9BB3EF","scale":1},{"id":"addModelk4bf1pmr68r","name":"trafficLights.glb","type":"trafficLights.glb","x":753540.2050422614,"y":2565775,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF","scale":1},{"id":"addModeljesxh316gfr","name":"trafficLights.glb","type":"trafficLights.glb","x":753502.8050422614,"y":2565758.929781598,"z":0.10000000000000853,"rotate":91,"color":"#9BB3EF","scale":1},{"id":"addModelf87l6cu7bea","name":"trafficLights.glb","type":"trafficLights.glb","x":753552.754008371,"y":2565720.139570393,"z":0.10000000000000853,"rotate":270,"color":"#9BB3EF","scale":1},{"id":"addModeldt8fgfivmd","name":"trafficLights.glb","type":"trafficLights.glb","x":753553.8090342744,"y":2565371,"z":0.10000000000000142,"rotate":0,"color":"#9BB3EF","scale":1},{"id":"addModelcbue96n6ne","name":"trafficLights.glb","type":"trafficLights.glb","x":753519.8090342744,"y":2565371.107417141,"z":0.10000000000000142,"rotate":90,"color":"#9BB3EF","scale":1},{"id":"addModelws65op3ic2s","name":"trafficLights.glb","type":"trafficLights.glb","x":753510.936816405,"y":2565332.005437854,"z":0.10000000000000142,"rotate":180,"color":"#9BB3EF","scale":1},{"id":"addModel2tjd4m3r6or","name":"trafficLights.glb","type":"trafficLights.glb","x":753547.936816405,"y":2565333.005437854,"z":0.10000000000000142,"rotate":262,"color":"#9BB3EF","scale":1},{"id":"addModelfioj6t8rejs","name":"trafficLights.glb","type":"trafficLights.glb","x":752413.3557798649,"y":2565352.509594402,"z":0.09999999999999432,"rotate":310,"color":"#9BB3EF","scale":1},{"id":"addModelq5v6cxt2mbl","name":"trafficLights.glb","type":"trafficLights.glb","x":752380.1429622431,"y":2565360.0027895863,"z":0.10000000000000142,"rotate":40,"color":"#9BB3EF","scale":1},{"id":"addModelheh8mfaq1h6","name":"trafficLights.glb","type":"trafficLights.glb","x":752363.1250243189,"y":2565347.335161126,"z":0.10000000000000142,"rotate":130,"color":"#9BB3EF","scale":1},{"id":"addModelea8rx0udhpn","name":"trafficLights.glb","type":"trafficLights.glb","x":753110.7428710669,"y":2565752.457210389,"z":0.10000000000000853,"rotate":90,"color":"#9BB3EF","scale":1},{"id":"addModely0fay00v6f","name":"trafficLights.glb","type":"trafficLights.glb","x":753129.5185023086,"y":2565713.781792835,"z":0.09999999999999432,"rotate":266,"color":"#9BB3EF","scale":1},{"id":"addModel18cxcax7v3v","name":"trafficLights.glb","type":"trafficLights.glb","x":753129.8700626597,"y":2565750.775234013,"z":0.09999999999999432,"rotate":355,"color":"#9BB3EF","scale":1},{"id":"addModelhltn8b1cpv8","name":"trafficLights.glb","type":"trafficLights.glb","x":753138.7741566687,"y":2565715.330105192,"z":0.09999999999999432,"rotate":130,"color":"#9BB3EF","scale":1},{"lod":3,"x":756599.57,"y":2583321.2650993783,"z":0.1000000000003638,"rotate":0,"color":"#9BB3EF","id":"text419","name":"九龙湖公园","type":"text","size":12},{"id":"addModelglqwew8lksb","name":"zhishicheng.glb","type":"zhishicheng.glb","x":757605.0388990486,"y":2584303.2180998516,"z":0.10000000000013642,"rotate":340,"color":"#4D6495","scale":0.3,"isBlur":true},{"id":"addModel8xlzlb2gvso","name":"huacheng.glb","type":"huacheng.glb","x":757387.9379260386,"y":2583922.973760934,"z":0.09999999999990905,"rotate":0,"scale":0.4,"color":""}]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Editor2=t.ResourcePath=void 0;var i=m(n(21)),r=m(n(13)),o=m(n(24)),a=m(n(38)),s=m(n(39)),l=m(n(19)),c=m(n(20)),u=n(0),h=n(17),d=n(40),f=n(370),p=(n(211),n(79));function m(e){return e&&e.__esModule?e:{default:e}}var v=t.ResourcePath="./assets/model/";t.Editor2=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.default)(this,e),this.viewer=t||null,this.models=[],this.list=[],this.lodTextSprite={1:{},2:{},3:{}},this.isChanged=!0,this.fusionCar=[],this.oldFusionCar=[],this.loadFusionCar=!1,this.middleOffset=[],this.spotLightLists=[],this.ResourcePath=n.ResourcePath||v,this.Vue=n.Vue||null,this.lightPlane=null,this.lightPlanes=[]}var t,n;return(0,c.default)(e,[{key:"setDate",value:(n=(0,s.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.list=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"init",value:function(){this.initModel()}},{key:"update",value:function(e){var t=this,n=this,i=[],r=[];return e.forEach((function(e){e&&"0401"!=e.classType&&r.push(n.addMesh(e).then((function(e){t.viewer.scene.addModel(e),t.models.push(e),i.push(e),t.setImgInterval(e.modelId)})))})),o.default.all(r).then((function(){return i}))}},{key:"disposeModel",value:function(e){this.clearImgInterval(e.modelId),this.viewer.scene.removeModel(e);var t=this.models.findIndex((function(t){return t.modelId===e.modelId}));this.models.splice(t,1)}},{key:"clear",value:function(){var e=this;this.models.forEach((function(t){e.viewer.scene.removeModel(t)}))}},{key:"displayMesh",value:function(e){var t=this;this.fusionCar.forEach((function(n){for(var i=0;i<2;i++){var r=t.isMeshExistence("tripCubic",n.sideId+"-"+i+n.id),o=(r.isExistence,r.mesh);o&&(o.visible=e)}}))}},{key:"isMeshExistence",value:function(e,t){var n=!1,i=null;return this.viewer.scene.animateObjects.forEach((function(r){if(r.type===e&&r.idNum===t)return{isExistence:n=!0,mesh:i=r}})),{isExistence:n,mesh:i}}},{key:"removeObject",value:function(e,t){var n=this;this.viewer.scene.animateObjects.forEach((function(i){i.type===e&&i.idNum===t&&n.viewer.scene.scene.remove(i)}))}},{key:"initModel",value:function(){var e=this,t=this;this.list.forEach((function(n){n&&"0401"!=n.classType&&t.addMesh(n).then((function(t){e.viewer.scene.addModel(t),e.models.push(t),e.setImgInterval(t.modelId)}))}))}},{key:"addLodText",value:function(e){var t=this;this.list.forEach((function(n){if(n&&"0401"===n.classType){var i=n.lod,r=n.id;if(e.includes(i))if(t.lodTextSprite[i][r])t.lodTextSprite[i][r].visible=!0;else{var o=t.initText(n);t.viewer.scene.addModel(o),t.lodTextSprite[i][r]=o}else t.lodTextSprite[i][r]&&(t.lodTextSprite[i][r].visible=!1)}}))}},{key:"initText",value:function(e){var t=new h.TextSprite(e.name,{drawStrokeStyle:!1,fontsize:e.scale,textColor:this.rgbToRgba(e.color,1)});return t.name=e.name,t.position.x=e.x,t.position.y=e.y,t.position.z=e.z,t}},{key:"rgbToRgba",value:function(e,t){return{r:parseInt("0x"+e.substr(1,2)),g:parseInt("0x"+e.substr(3,2)),b:parseInt("0x"+e.substr(5,2)),a:t}}},{key:"isVisibleModels",value:function(e){this.models.forEach((function(t){t.visible=e}))}},{key:"addMesh",value:(t=(0,s.default)(a.default.mark((function e(){var t,n,i,r,o,s,l,c,d,m,v,g,y,b,x=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,"03"!==(n=w.classType.substring(0,2))){e.next=6;break}t=new h.DynamicModel({name:w.name,modelUrl:this.ResourcePath+w.classType+".glb",isReceiveShadow:w.isReceiveShadow,iScastShadow:w.iScastShadow,color:w.color,rotation:[u.Math.degToRad(w.rotateX),u.Math.degToRad(w.rotateY),u.Math.degToRad(w.rotateZ)],isBlur:w.isBlur}),e.next=31;break;case 6:if("RoadText"!==n){e.next=10;break}t=new h.RoadText(w.text,{name:w.name,color:w.color,rotation:[u.Math.degToRad(w.rotateX),u.Math.degToRad(w.rotateY),u.Math.degToRad(w.rotateZ)]}),e.next=31;break;case 10:if("00"!==n&&"01"!==n){e.next=30;break}if(i=w.image?JSON.parse(w.image):[],r=[],!i.some((function(e){return 1===e.is_cut}))){e.next=25;break}return o=i.find((function(e){return 1===e.is_cut})),s=o.testUrl,l=i.filter((function(e){return e.point<10})).length,c=i.filter((function(e){return e.point>9})),e.next=20,(0,p.imageSplit)(s,l);case 20:d=e.sent,m=d.map((function(e,t){return[t+1,e]})),r=m.concat(c.map((function(e){var t=e.point;return e.onlineUrl,[t,e.testUrl.split(",")[0]]}))),e.next=26;break;case 25:r=i.map((function(e){var t=e.point;return e.onlineUrl,[t,e.testUrl.split(",")[0]]}));case 26:t=new h.Model({name:w.name,modelType:w.classType,colorChangeable:!1,modelUrl:this.ResourcePath+w.classType+".glb",isReceiveShadow:w.isReceiveShadow,iScastShadow:w.iScastShadow,color:w.color,rotation:[u.Math.degToRad(w.rotateX),u.Math.degToRad(w.rotateY),u.Math.degToRad(w.rotateZ)],isLoadScene:"00"!==n,maps:r.length>0?r:[],isBloom:w.isBloom||!1}),i&&(t.imageInfo=i),e.next=31;break;case 30:"0402"===w.classType&&(null===this.lightPlane?(this.lightPlane=this.addLight("./assets/image/alphAlight.png"),t=this.lightPlane):(t=this.lightPlane.clone()).scale.set(.5,.5,.5));case 31:return w.text&&(v={},"010517"===w.classType?(v.imgUrl="./assets/image/zhuanghao.png",v.scale=[.25,.43,1],v.x=t.position.x-.02,v.y=t.position.y-.03,v.z=-6.85,v.isVertical=!1,v.rotation=[0,0,u.Math.degToRad(180)]):"010103"===w.classType&&(v.scale=[.3,.45,1],v.imgUrl="./assets/image/zhinengdeng.jpg",v.x=t.position.x-.23,v.y=t.position.y-.02,v.z=-5.03,v.isVertical=!0,v.fontsize=24,v.isEmissive=!0,v.color="#ff0000",v.rotation=[u.Math.degToRad(0),u.Math.degToRad(0),u.Math.degToRad(180)]),v.text=w.text,(g=new f.ModelText(v)).position.set(v.x,v.y,v.z),t.add(g),"010103"===w.classType&&(y=null,null!==this.lightPlane&&this.lightPlane.children&&this.lightPlane.children.length?y=this.lightPlane.clone():(this.lightPlane=this.addLight("./assets/image/spotlight.jpg"),y=this.lightPlane),y.position.x=t.position.x,y.position.y=t.position.y+1,y.position.z=14,y.rotation.x=u.Math.degToRad(10),y.visible=!1,t.add(y))),t.modelId=w.uuid,t.position.x=w.x,t.position.y=w.y,t.position.z=w.z,t.opacity=w.opacity,t.visible=w.isVisble||!1,b=t.rotation._z,t.focus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=new u.Vector3(w.x,w.y,10).add(new u.Vector3(0,1,0).applyAxisAngle(new u.Vector3(0,0,1),b+Math.PI*t).multiplyScalar(30));return h.Utils.animateTo(e,n,b+Math.PI*(t-1),1,!0,1e3)},w.scale&&t.scale.set(w.scale,w.scale,w.scale),w.isClick&&t.addEventListener("mouseup",(function(e){var t={};x.Vue.$emit("clickObj",e.target),t.name=e.target.name,t.id=e.target.uuid,x.onMouseMove(t)})),e.abrupt("return",t);case 43:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"addLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./assets/image/ground_light.png",n=new u.Group,i=new u.Mesh(new u.PlaneGeometry(24,24),new u.MeshPhongMaterial({side:u.DoubleSide,transparent:!0,opacity:.5,color:"#aaa",depthTest:!0,map:(new u.TextureLoader).load(t)}));i.position.z=-14,i.position.y=9,i.layers.enable(1),n.add(i);var r=new u.Mesh(new u.PlaneGeometry(10,10),new u.MeshPhongMaterial({side:u.DoubleSide,transparent:!0,opacity:1,color:"#fff",emissive:"#fff",depthTest:!1,alphaMap:(new u.TextureLoader).load(e)}));r.name="plane",r.position.z=-4,r.position.y=2.5,r.rotation.x=u.Math.degToRad(120),n.add(r);var o=new u.Mesh(new u.PlaneGeometry(1.8,.3),new u.MeshPhongMaterial({color:"#fff",side:u.DoubleSide,transparent:!0,depthTest:!1,opacity:1,emissive:"#fff"}));o.name="plane",o.layers.enable(1),o.rotation.z=u.Math.degToRad(90),n.add(o);var a=o.clone();return a.layers.enable(1),a.rotation.y=u.Math.degToRad(90),n.add(a),n.name="lightGroup",n}},{key:"onMouseMove",value:function(e){console.log(e)}},{key:"initLights",value:function(e,t){var n=[{roadDirection:0,poleLon:e,poleLat:t,poleAlt:6.8,heading:0,lampIds:[{lampId:"130902000200200111",phaseId:31},{lampId:"130902000200003212",phaseId:32},{lampId:"130902000200003313",phaseId:33}]}],i=h.Utils.addTrafficLights(n);return i.position.z=16,i}},{key:"setAction",value:function(e,t,n,i,r){try{var o=this.viewer.scene.getObjectByName(e);o&&o.setFrameAction(t,n,i,r)}catch(e){}}},{key:"setMeshColor",value:function(e,t){try{var n=this.viewer.scene.getObjectByName(e);n instanceof h.Polygon&&n.setColor(t)}catch(e){}}},{key:"setMeshOpacity",value:function(e,t){try{var n=this.viewer.scene.getObjectByName(e);n instanceof h.Polygon&&n.setOpacity(t)}catch(e){}}},{key:"loadGeoJsonToMap",value:function(e,t,n){var i=this;(0,d.get)(e).then((function(e){var o=e.data.features;o.length>0&&o.forEach((function(e){"polygon"===e.geometry.type.toLowerCase()&&(e.properties[n]?i.addPolygon((0,r.default)({},t,{vertices:e.geometry.coordinates[0],name:e.properties[n]})):i.addPolygon((0,r.default)({},t,{vertices:e.geometry.coordinates[0]})))}))}))}},{key:"addPolygon",value:function(e){var t=new h.Polygon(e);this.addModel(t)}},{key:"addModel",value:function(e){this.viewer.scene.addModel(e)}},{key:"addTunnelWater",value:function(e,t){var n=this;(0,d.get)(e).then((function(e){for(var i=e.data.features[0].geometry.coordinates[0],r=i[0],o=[],a=[],s=[],l=0,c=i.length;l<c;l++)o.push(i[l][0]-r[0],i[l][1]-r[1],0),s.push(0,0,1),l&&l<59?a.push(0,Math.max(0,Math.min(1,l/58))):l?a.push(1,Math.max(0,Math.min(1,(111-l)/48))):a.push(1,0);var d=h.Utils.triangulateShape(o),f=new u.BufferGeometry;f.setAttribute("position",new u.Float32BufferAttribute(o,3)),f.setAttribute("uv",new u.Float32BufferAttribute(a,2)),f.setAttribute("normal",new u.Float32BufferAttribute(s,3)),f.setIndex(d),f.computeBoundingBox(),f.computeBoundingSphere();var p=new u.Mesh(f,(0,h.createWaterFour)({alpha:.8,SEA_HEIGHT:.3,SEA_CHOPPY:2,SEA_SPEED:.2,SEA_BASE:new u.Vector3(.16,.149,.094),SEA_WATER_COLOR:new u.Vector3(.33,.247,.067)}));p.name=t,p.position.x=r[0],p.position.y=r[1],p.position.z=-4.5,p.update=function(){this.material.uniforms.iTime.value+=.001},n.viewer.scene.addAnimateObject(p)}))}},{key:"initFence",value:function(e,t,n,i){var r=this;return(0,d.get)(e).then((function(e){var a=[];return new o.default((function(o){e.features.forEach((function(e){var o=[];o.push(e);var s=(new u.TextureLoader).load(t);s.wrapS=u.RepeatWrapping,s.wrapT=u.RepeatWrapping,s.repeat.set(o[0].geometry.coordinates.length,1);var l=h.Utils.json2fence(o,n);l.material.transparent=!0,l.material.opacity=1,l.material.map=s,l.material.emissiveMap=s,l.position.z=n.depth+2,l.material.emissive=new u.Color(n.color),l.material.depthTest=!0,l.updateMatrix(),l.update=function(){i?this.material.map.offset.x+=.005:(this.material.map.offset.x>1&&(this.material.map.offset.x=1),this.material.map.offset.x-=.005)},r.viewer.scene.addAnimateObject(l),a.push(l)})),o(a)}))}))}},{key:"setMaterialMap",value:function(e,t){var n=this.viewer.scene.getObjectByName(e);n&&t.forEach((function(e){if(n.children&&n.children.length){var t=n.getObjectByName("img"+e[0]);t.material.map=(new u.TextureLoader).load(e[1]),t.material.map.flipY=!1}}))}},{key:"setMaterialShow",value:function(e,t,n){var i=this.viewer.scene.getObjectByName(e);t.forEach((function(e){if(i.children&&i.children.length){var t=i.getObjectByName("img"+e);n?(t.material.emissive=new u.Color("#fff"),t.material.emissiveMap=t.material.map):(t.material.emissive=new u.Color("#000"),t.material.emissiveMap=null)}}))}},{key:"setOpacity",value:function(e,t){var n=this.viewer.scene.getObjectByName(e);n&&n.children&&n.children.length&&n.traverse((function(e){(e.isMesh||e.isLine||e.isPoints)&&(e.material.transparent=!0,e.material.opacity=t,e.material.needsUpdate=!0,e.material.depthTest=!0,e.material.depthWrite=t>=1,e.updateMatrix())}))}},{key:"addLights",value:function(e,t){var n=this,i=this.addLight(t);e.forEach((function(e){(i=i.clone()).position.set(e.x,e.y,e.z),i.scale.set(.5,.5,.5),i.rotation.z=u.Math.degToRad(e.rotateZ),i.rotation.y=u.Math.degToRad(e.rotateY),n.viewer.scene.addBlurObject(i),n.models.push(e)}))}},{key:"openDay",value:function(e){if(e){this.viewer.scene.directionalLight.visible=!0;var t=this.viewer.scene.getObjectByName("ambientLight");t&&(t.intensity=1)}else{this.viewer.scene.directionalLight.visible=!1;var n=this.viewer.scene.getObjectByName("ambientLight");n&&(n.intensity=.5)}}},{key:"addSpotLight",value:function(e,t){this.removeLight();var n=null,i=e.length,r=new u.SpotLight("#fff",t);r.position.set(e[0][0]+3,e[0][1]-3,15),r.angle=u.Math.degToRad(60),r.penumbra=1,r.decay=2,r.distance=120,r.shadow.mapSize.width=256,r.shadow.mapSize.height=256,r.shadow.camera.near=100,r.shadow.camera.far=10,r.shadow.focus=.5,r.visible=!0,this.viewer.scene.addModel(r),(n=new u.Object3D).position.set(e[0][0]+3,e[0][1]-3,0),this.viewer.scene.addModel(n),r.target=n,this.spotLightLists.push(r);for(var o=0;o<i;o++){var a=r.clone(),s=n.clone();s.position.set(e[o+0][0]+.07,e[o+0][1]+1.58,0),a.position.set(e[o+0][0],e[o+0][1],15),this.viewer.scene.addModel(s),a.target=s,this.viewer.scene.addModel(a),this.spotLightLists.push(a)}}},{key:"closeLight",value:function(){if(this.spotLightLists)for(var e=0;e<this.spotLightLists.length;e++)this.spotLightLists[e].visible=!1}},{key:"removeLight",value:function(){if(this.spotLightLists){for(var e=0;e<this.spotLightLists.length;e++)this.viewer.scene.removeModel(this.spotLightLists[e]);this.spotLightLists=[]}}},{key:"openLight",value:function(e){if(this.lightPlanes)for(var t=0;t<this.lightPlanes.length;t++)this.lightPlanes[t].visible=e}},{key:"createPulseCircle",value:function(){this.shaderInfo3={uniforms:{time:{type:"pv2",value:0},color:{type:"uvs",value:new u.Color("#FF0000")},opacity:{type:"pv2",value:1},num:{type:"pv2",value:4},hiz:{type:"pv2",value:.4}},vs:"\n            varying vec2 vUv;\n            varying vec3 vPosition;\n            void main() {\n                vUv = uv;\n                vPosition=position;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n            }\n            ",fs:"\n                            varying vec2 vUv;\n                            uniform float time;\n            varying vec3 vPosition;\n                            vec3 hsb2rgb(const vec3 c) {\n                                vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0, 4.0, 2.0), 6.0)-3.0)-1.0, 0.0, 1.0);\n                                rgb = rgb*rgb*(3.0-2.0*rgb);\n                                return c.z * mix( vec3(1.0), rgb, c.y);\n                            }\n                            void main() {\n            vec2 resolution=vec2(1,1);\n            vec3 Color = vec3(0.1, 0.53, 0.9);\n                float col = -0.1;\n                vec2 a = (vUv.xy - resolution / 2.) / resolution.y;\n                    float size = 0.4;\n                    float si = sin( 0.001)*0.03;\n                float co = cos(  0.05)*0.1;\n                col += 0.01 / abs(length(a+ vec2(si , co * co )) - size);\n            float angle = dot(vec2(1.0,1.0),normalize(a));\n                if(angle>0.5){\n                \tgl_FragColor = vec4(vec3(Color * col), 1.0);\n                }\n            // if(a.x>0.){\n            //         //gl_FragColor = vec4(vec3(Color * col), 1.0);\n            //         gl_FragColor =mix(vec4(0,0,0,0), vec4(vec3(Color * col), 1.0),0.6);//  vec4(1.0,0.0,0.0,1.0);//\n            //     }\n            }\n            "};var e={material:new u.ShaderMaterial({uniforms:this.shaderInfo3.uniforms,vertexShader:this.shaderInfo3.vs,fragmentShader:this.shaderInfo3.fs,blending:u.AdditiveBlending,transparent:!0,depthTest:!1,side:u.DoubleSide})},t=new u.PlaneGeometry(36,36),n=new u.Mesh(t);return n.rotation.x=u.Math.degToRad(180),n.position.set(0,-2,0),n.name="plane",n.material=e.material,n.rotation.z=u.Math.degToRad(-45),n.scale.set(1,1,1),n}},{key:"addCarLight",value:function(){var e=new u.SpotLight("#999",4);e.position.set(414443.22,4335701.95,3.6),e.angle=u.Math.degToRad(45),e.penumbra=.1,e.decay=2,e.distance=50,e.shadow.mapSize.width=512,e.shadow.mapSize.height=512,e.shadow.camera.near=100,e.shadow.camera.far=10,e.shadow.focus=.1,e.visible=!1,this.viewer.scene.addModel(e);var t=new u.Object3D;return t.position.set(-5,-5,1),e.target=t,e.add(t),e}},{key:"initDrectionalLight",value:function(e,t,n){this.viewer.renderer.shadowMap.enabled=!0,this.viewer.renderer.shadowMap.type=u.PCFShadowMap,this.viewer.scene.directionalLight.intensity=.6,this.viewer.scene.directionalLight.castShadow=!0,this.viewer.scene.directionalLight.position.x=414012.82840196526,this.viewer.scene.directionalLight.position.y=4335012.236594316,this.viewer.scene.directionalLight.position.z=800,this.viewer.scene.directionalLight.shadow.camera.left=-1e3,this.viewer.scene.directionalLight.shadow.camera.right=1e3,this.viewer.scene.directionalLight.shadow.camera.top=1e3,this.viewer.scene.directionalLight.shadow.camera.bottom=-1e3,this.viewer.scene.directionalLight.shadow.mapSize.width=2048,this.viewer.scene.directionalLight.shadow.mapSize.height=2048,this.viewer.scene.directionalLight.shadow.camera.near=100,this.viewer.scene.directionalLight.shadow.camera.far=1e4,this.viewer.scene.directionalLight.shadow.bias=-.001;var i=new u.Object3D;i.position.set(e,t,n),this.viewer.scene.directionalLight.target=i,this.viewer.scene.addModel(i)}},{key:"addPlane",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new u.MeshPhysicalMaterial({opacity:e.opacity,transparent:!0,depthTest:!0,depthWrite:!0}),i=new u.CircleGeometry(3e5,1800),r=new u.Mesh(i,n);if(r.position.set(e.offset[0],e.offset[1],e.offset[2]),r.renderOrder=3,t){var o=new u.TextureLoader;o.load(t,(function(e){e.wrapS=u.RepeatWrapping,e.wrapT=u.RepeatWrapping,e.repeat.set(40,40),n.map=e}))}else n.color.set(e.color),console.log(e.color);return r}},{key:"addBoxSky",value:function(e){var t=new u.MeshBasicMaterial({opacity:e.opacity,transparent:!0,depthTest:!0,depthWrite:!0}),n=new u.PlaneGeometry(e.width,e.width),i=new u.Mesh(n,t);i.renderOrder=3,t.color.set(e.color);var r=new u.Group,o=i.clone();o.position.set(e.width/2,0,0),o.rotation.y=u.Math.degToRad(-90),r.add(o);var a=i.clone();a.position.set(-e.width/2,0,0),a.rotation.y=u.Math.degToRad(90),r.add(a);var s=i.clone();s.position.set(0,0,e.width/2),s.rotation.x=u.Math.degToRad(180),r.add(s);var l=i.clone();l.position.set(0,e.width/2,0),l.rotation.x=u.Math.degToRad(90),r.add(l);var c=i.clone();c.position.set(0,-e.width/2,0),c.rotation.x=u.Math.degToRad(-90),r.add(c);var h=i.clone();return h.position.set(0,0,-50),r.add(h),r}},{key:"createEllipseMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=new u.EllipseCurve(e,t,n,i,0,2*Math.PI,!1,0);r.closed=!0;var o=r.getPoints(50),a=[];a.push(0,0,0);for(var s=[],l=[],c=0;c<o.length;c++)a.push(o[c].x,o[c].y,0),s.push(0,c+1,c+2),l.push(0,0,1);l.push(0,0,1);var h=new u.BufferGeometry;return h.setAttribute("position",new u.Float32BufferAttribute(a,3)),h.setAttribute("normal",new u.Float32BufferAttribute(l,3)),h.setIndex(s),new u.Mesh(h,new u.MeshPhongMaterial({color:"#999",side:u.DoubleSide,opacity:.25,transparent:!0,emissive:"#aaa",depthTest:!0,depthWrite:!1}))}},{key:"setImgInterval",value:function(e){this.clearImgInterval(e);var t=this.models.find((function(t){return t.modelId===e}));if(t&&t.imageInfo&&t.imageInfo.length){var n=t.imageInfo;t.imgIntervalIndexMap={},t.imgIntervalImgMap={},t.imgIntervalTimerMap={},n.forEach((function(e){var n=e.point,i=(e.onlineUrl,e.testUrl),r=e.duration,o=i.split(",");if(t.imgIntervalIndexMap[n]=0,t.imgIntervalImgMap[n]=o,!(o.length<2)){var a=setInterval((function(){t.imgIntervalIndexMap[n]+=1,t.imgIntervalIndexMap[n]>=t.imgIntervalImgMap[n].length&&(t.imgIntervalIndexMap[n]=0);var e=t.imgIntervalImgMap[n][t.imgIntervalIndexMap[n]],i=t.getObjectByName("img"+n);i.material.map=(new u.TextureLoader).load(e),i.material.map.flipY=!1}),1e3*r);t.imgIntervalTimerMap[n]=a}}))}}},{key:"clearImgInterval",value:function(e){var t=this.models.find((function(t){return t.modelId===e}));t&&t.imgIntervalTimerMap&&(0,i.default)(t.imgIntervalTimerMap).forEach((function(e){clearInterval(t.imgIntervalTimerMap[e])}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModelText=void 0;var i=c(n(47)),r=c(n(19)),o=c(n(20)),a=c(n(48)),s=c(n(49)),l=n(0);function c(e){return e&&e.__esModule?e:{default:e}}t.ModelText=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.name=e.name,n.color=e.color?new l.Color(e.color):new l.Color("#fff"),n.fontsize=e.fontsize||36,n.text=e.text||"",n.idSprite=null,n.imgUrl=e.imgUrl,n.sizeAttenuation=e.sizeAttenuation||!1,n.options=e.options||{},n.scaleXYZ=e.scale||[1,1,1],n.isVertical=e.isVertical||!1,n.isEmissive=e.isEmissive||!1,n.canvasScale=e.canvasScale||3,n._rotation=e.rotation||[0,0,0],n.init(),n}return(0,s.default)(t,e),(0,o.default)(t,[{key:"init",value:function(){this.drawIDImg(this.options),this.rotation.set(this._rotation[0],this._rotation[1],this._rotation[2])}},{key:"drawIDImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.canvasScale,i=t.iconWidth||69*n,r=t.iconHeight||22*n;this.isVertical&&(i=t.iconWidth||18*n,r=t.iconHeight||46*n);var o=this.fontsize||12*n,a=this.getCanvas(i,r),s=a.getContext("2d"),l=a.width/i,c=new Image;c.crossOrigin="Anonymous",this.imgUrl?(c.src=this.imgUrl,c.addEventListener("load",(function(){s.drawImage(c,0,0,a.width,a.height),e.drawCanvas(a,s,i,r,o,l)}))):this.drawCanvas(a,s,i,r,o,l)}},{key:"drawCanvas",value:function(e,t,n,i,r,o){this.drawText(n,t,this.text,.285*n*o,(.5*i+.5*r-2)*o-15,r*o,new l.Color(this.color),!0);var a=new l.Texture(e);a.anisotropy=8,a.minFilter=l.NearestFilter,a.magFilter=l.NearestFilter,a.needsUpdate=!0,this.idSprite?this.idSprite.material.map=a:(this.idSprite=this.getRectangle(n,i,a),this.idSprite.scale.set(this.scaleXYZ[0],this.scaleXYZ[1],this.scaleXYZ[2]),this.idSprite.position.x=0,this.idSprite.position.z=8,this.idSprite.addEventListener((function(e){console.log(e)})),this.add(this.idSprite))}},{key:"drawText",value:function(e,t,n,i,r,o,a,s){if(t.fillStyle=this.getRGBA(a||new l.Color(1,1,1)),t.textAlign="left",t.font=(s?"Bold ":"")+(Math.floor(o)||36)+"px Arial",this.isVertical)for(var c=e/2-10,u=10,h=0;h<n.length;h++){var d=n.slice(h,h+1).toString();d.match(/[A-Za-z0-9]/)&&u<576?(t.save(),t.translate(c,u),t.rotate(Math.PI/180*90),t.textBaseline="bottom",t.fillText(d,0,0),t.restore(),u+=t.measureText(d).width):d.match(/[\u4E00-\u9FA5]/)&&u<576&&(t.save(),t.textBaseline="top",t.fillText(d,c,u),t.restore(),u+=t.measureText(d).width)}else t.fillText(n,Math.ceil(i),Math.ceil(r))}},{key:"getRGBA",value:function(e,t){return"rgba("+255*e.r+","+255*e.g+","+255*e.b+","+(t=t||1)+")"}},{key:"getCanvas",value:function(e,t){var n=document.createElement("canvas"),i=l.MathUtils.ceilPowerOfTwo(e);return n.width=i,n.height=t*i/e,n}},{key:"getRectangle",value:function(e,t,n){var i=new l.MeshPhongMaterial({map:n,transparent:!0,blending:l.CustomBlending,side:2,color:"#fff"});e*=.022,t*=.022;var r=new l.PlaneGeometry(e,t,1,1),o=new l.Mesh(r,i);return this.isEmissive&&(o.material.emissive=new l.Color("#fff"),o.material.emissiveMap=o.material.map),o.name="sprite",o.rotateX(.5*Math.PI),o.rotateY(.5*Math.PI),o}}]),t}(l.Object3D)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(25)),r=f(n(21)),o=n(230),a=n(17),s=n(67),l=n(46),c=n(0),u=n(60),h=n(79),d=f(n(188));function f(e){return e&&e.__esModule?e:{default:e}}t.default={mounted:function(){this.vehicleCarMap={0:"robotaxi",3:"robobus",4:"robocop",5:"netCar",6:"netCar",7:"netCar",21:"netCar",22:"wxb",23:"minibus",28:"minibus"},this.carModelMap={XMQ:{type:"minibus",label:"阿波龙"},"蜗小白清扫车":{type:"wxb",label:"蜗小白"},TK100:{type:"cleanCar",label:"环卫车"},6650:{type:"robobus",label:"robobus"},HQEV:{type:"robotaxi",label:"robotaxi"},MKZ:{type:"robotaxi",label:"robotaxi"},"新石器":{type:"salecar",label:"售卖车"},"其他":{type:"dumpTruck",label:"工程车"},"巡逻车":{type:"patrol_car",label:"巡逻车"}},this.netCarLabelMap={5:{label:"环卫车",key:"cleanCar"},6:{label:"工程车"},7:{label:"公务车"},21:{label:"网联车"}},this.modelList=[]},methods:{connectGpsCarInfo:function(){var e=this,t=this;(0,s.connectVehicle)().then((function(n){var i=n.ws,r=n.connect;e.gpsWs=i,r.onmessage=function(e){var n=e.data;if("ok"===n)return!1;var i=JSON.parse(n),r=i.wsType,o=i.data;switch(r){case"v0":t.$refs.homeLeft&&t.$refs.homeLeft.formatCarData(o);break;case"v12":t.setGpsCars(o)}}}))},setGpsCars:function(e){var t=this;this.$emit("setGpsCars",e),this.activeCars=[];var n=[],i=[];e.forEach((function(e,o){var s=e.latitude,c=e.longitude,u=e.vehicleId,h=e.headingAngle,d=e.thirdPlatform,f=e.licenseNumber,p=e.isMoving,m=e.steeringAngle,v=e.signalState,g=(e.level,e.gear),y=e.speed,b=e.model,x=t.vehicleCarMap[d],w=x,_=null;if(t.carModelMap[b]){var S=t.carModelMap[b],M=S.type;_=S.label,w=M}var T={carNumber:f,speed:y,vehicleId:u,carType:x};if((0,r.default)(l.AnimateKey).some((function(e){return l.AnimateKey[e].find((function(e){return e.id===u}))}))&&p?n.push(T):i.length<3&&p&&i.push(T),!x&&0!==x||!s||!c)return!1;var E=x.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join(""),C=t.carBaseInfoMap[u];C&&!C.carType&&(C.carType="netCar"===x?"网联车":E,"netCar"===x&&(C.netCarLabel=_||t.netCarLabelMap[d].label));var A=t.modelList.find((function(e){return e.vehicleId===u})),O=t.labelMap.carLabel.find((function(e){return e.vehicleId===u})),L=a.Utils.transformWGS84ToUTM({x:c,y:s}),k=L.x,P=L.y,D=0;if(D=h>180?360-h:-h,e.head=D,A){if(!p&&"netCar"===x)return t.removeCar(A),void t.removeLabel(O,"carLabel");if(A.position.set(k,P,1.1),A.heading=D||0,A.rotation.z=a.Utils.degreeToRadian(180+D),A.vehicleId===t.followVehicleId){t.singleRenderStatus||(t.followCar(A),t.carInfo.speed=y.toFixed(2));var I=null;switch(v){case 0:I="left";break;case 1:I="right";break;case 2:I="both";break;case 3:I="none"}t.carInfo.type=x.toUpperCase(),t.carInfo.carNumber=f,t.carInfo.carId=u,t.carInfo.level=g?g.toUpperCase():"N",t.carInfo.degree=Math.abs(m)>540?540:m,t.carInfo.direction=I,t.carInfo.endurance=360,t.netCarLabelMap[d]&&(t.carInfo.netCarLabel=t.netCarLabelMap[d].label,t.carInfo.netCarType=(t.netCarLabelMap[d].key||"netCar").toUpperCase())}}else(p||"netCar"!==x)&&(t.addCar(x,[k,P,.5],e,w),t.addCarLabel(x,[k,P,.5],e,3,!p));O&&(t.singleRenderStatus||(O&&O.position.set(k,P,"netCar"===x?2.1:1.1),t.updateCarLabel(O,{speed:Math.floor(y>0?y:0)},3,!p)))})),this.activeCars=n.concat(i),this.activeCars.splice(3)},addCar:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=n.head||90,l=(0,i.default)(t,3),c=l[0],u=l[1],h=(l[2],o.url),d=o.isLoadScene,f=o.noClone,p={modelUrl:"https://mapdata.bj.bcebos.com/model/guangzhou/"+r+".glb",color:"netCar"===r?"rgb(46, 140, 33)":null};f||(p.modelType=r),h&&(p.modelUrl=h),d&&(p.isLoadScene=!0);var m=new a.Model(p);return m.rotation.z=a.Utils.degreeToRadian(180+s),m.heading=s,m.vehicleId=n.vehicleId||0,m.position.x=c,m.position.y=u,m.position.z=.6,m.carType=e,m.scale.set(1,1,1),m.sizeAttenuation=!0,m.size="netCar"===e?5:10,m.key=n.thirdPlatform,this.modelList.push(m),this.setFilterItem(m.key,m),this.Map.viewer.scene.addAnimateObject(m),m.visible=this.layerStatus&&this.getFilterVisible(m.key),m},removeCar:function(e){var t=this.modelList.findIndex((function(t){return t.vehicleId===e.vehicleId}));this.modelList.splice(t,1),this.Map.viewer.scene.removeAnimateObject(e)},createCarFlagCanvas:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=["netCar","robotaxi","robocop","robobus","offline","minibus","streetcar"];n.forEach((function(n){var i=_.cloneDeep(l.CarLabelMap),r=i.content,o=i.size,a=i[n].bg,s=(o.width||162)*t,u=(o.height||158)*t,h=c.MathUtils.ceilPowerOfTwo(s),d=c.MathUtils.ceilPowerOfTwo(u),f={width:h,height:d,factor:{x:h/s,y:d/u}};e.createLabelCanvas(r,a,f,t).then((function(t){var i=t.canvas;e.labelCanvasMap[n]=i}))}))},addCarLabel:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,s=arguments[4],u=_.cloneDeep(l.CarLabelMap),h=u.size,d=s?u.offline:u[e];if(d){var f=d.color,p=d.fillColor,m=d.strokeColor,v=(n.id,n.vehicleId),g=n.info,y=n.thirdPlatform,b=(h.width||162)*a,x=(h.height||158)*a,w=c.MathUtils.ceilPowerOfTwo(b),S=c.MathUtils.ceilPowerOfTwo(x),M={width:w,height:S,factor:{x:w/b,y:S/x}},T=(0,i.default)(t,3),E=T[0],C=T[1],A=(T[2],s?this.labelCanvasMap.offline:this.labelCanvasMap[e]),O=new o.CarFlag({name:v+"-flag"||!1,flag:A,factor:M.factor,color:f,fillColor:p,strokeColor:m,imgUrlMap:{icon:"https://mapdata.bj.bcebos.com/images/guangzhou/"+e+".png"},sizeAttenuation:!0,scaleNum:.5});return O.type=e,O.position.set(E,C,2.8),O.visible=this.infoStatus&&this.getFilterVisible(y+"-label"),O.vehicleId=v,O.offline=s,O.key=y,this.updateCarLabel(O,g||{},3,s),this.Map.viewer.scene.addAnimateObject(O),this.setFilterItem(y+"-label",O),this.addClickEvent(O,(function(e){r.defaultEventDispatcher(e.target)})),this.labelMap.carLabel.push(O),O}console.warn("暂无该车型标签配置")},updateLockLabel:function(e,t){if(this.lockLabelList||(this.lockLabelList=[]),t)this.lockLabelList.push(e.vehicleId);else{var n=this.lockLabelList.findIndex((function(t){return t===e.vehicleId}));if(n<0)return;this.lockLabelList.splice(n,1)}},updateCarLabel:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments[3];if(!this.lockLabelList||!this.lockLabelList.includes(e.vehicleId)){var o=_.cloneDeep(l.CarLabelMap),a=o.content,s=this.carBaseInfoMap[e.vehicleId];if(s&&(t.level=s.grade,t.carNumber=s.licenseNumber,t.header="网联车"===s.carType?s.netCarLabel:s.carType),(0,r.default)(t).forEach((function(e){a[e]&&(a[e].text=t[e])})),(0,r.default)(a).forEach((function(e){a[e].size=a[e].size*n,a[e].position=a[e].position.map((function(e){return e*n}))})),e.offline!==i){var u=i?o.offline:o[e.type],h=(u.icon,u.bg,u.color),d=u.fillColor,f=u.strokeColor;e.color=new c.Color(h),e.fillColor=d,e.strokeColor=f;var p=i?this.labelCanvasMap.offline:this.labelCanvasMap[e.type];e.flag=p,e.offline=i,e.updateColor()}setTimeout((function(){e.updateTextList((0,r.default)(a).map((function(e){return a[e]})))})),e.visible=this.layerStatus&&!i&&this.getFilterVisible(e.key+"-label")}},connectSingleCar:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.singleCarWs&&(this.singleCarWs.dispose(),this.singleCarWs=null,this.singleRenderStatus=!1),this.singleBuffer=[],this.lampsBuffer=[],this.singleGpsBuffer=[],this.singleGpsList=[],this.lampsTimeBuffer=[],this.moveCount=0,this.diffentTrack=!0,this.singleTimeStamp=null,this.singleGpsTimeStamp=null,(0,s.connectSingleVehicle)({vehicleId:e}).then((function(i){var r=i.ws,o=i.connect;if(e===t.followVehicleId){t.singleCarWs=r;var s=t;o.onmessage=function(t){var i=t.data;if("ok"===i)return!1;var r=JSON.parse(i),o=r.wsType,l=r.data;switch(o){case"v5":if(s.vehicleMainCar&&s.v8start||!l)return;if(s.$emit("singleCarInfo",l),!n)return;var c=l.vehicleId,d=l.thirdPlatform,f=l.isMoving,p=l.driving,m=p.longitude,v=p.latitude,g=p.headingAngle,y=a.Utils.transformWGS84ToUTM({x:m,y:v}),b=y.x,x=y.y,w=0;if(w=g>180?360-g:-g,s.vehicleMainCar)s.vehicleMainCar.position.set(b,x,1.1),s.vehicleMainCar.heading=w||0,s.vehicleMainCar.rotation.z=a.Utils.degreeToRadian(180+w);else{var _="";switch(Number(d)){case 0:_="robotaxi";break;case 3:_="robobus";break;case 4:_="robocop";break;case 23:_="minibus"}var S=new a.Model({modelUrl:"https://mapdata.bj.bcebos.com/model/common/"+_+".glb",modelType:_,name:c});S.rotation.z=a.Utils.degreeToRadian(180+w),S.heading=w||0,S.vehicleId=c,S.position.x=b,S.position.y=x,S.position.z=.2,S.scale.set(1,1,1),s.$refs.map.addModel(S),s.vehicleMainCar=S}setTimeout((function(){s.$refs.map.trackedView(c),s.unMoving=!f}),0);break;case"v6":if(!n)return;var M=l.filter((function(e){return 0===e.status})),T=l.filter((function(e){return 0!==e.status})),E=M.map((function(e){var t=e.eventId,n=e.eventType;return{id:t,eventContent:n,longitude:e.longitude,latitude:e.latitude,eventName:u.TRAFFIC_EVENT_LABEL_MAP[n]}}));s.setTrafficEvent(E),T.forEach((function(e){s.$refs.map.removeTrafficLight(e.eventId);var t=s.hasEventIds.findIndex((function(t){return t===e.eventId}));-1!==t&&s.hasEventIds.splice(t,1)}));break;case"v8":if(l&&(this.v8start=!0),!this.v8start)return;s.singleRenderStatus||(s.vehicleMainCar=null,s.singleRenderStatus=!0),s.singleRenderStatus=!0;var C=s.labelMap.carLabel.find((function(t){return t.vehicleId===e}));s.singleRender(l,s.SinglePerception,{singleCarId:e,needTileData:!1,intersectModel:!1,z:.5,singleColorMap:{0:"#2887E7",1:"#7FA3E0",3:"#2887E7"}},[{mode:C,options:{z:1.1}},{mode:s.carWave,options:{z:.8}}]);break;case"v9":if(!l||!n)return;(Array.isArray(l)?l:[l]).forEach((function(e){var t=e.lampRealInfos.crossId,n=e.show;0===Number(n)?t&&!s.hasLamps.includes(t)&&(s.fetchLights(t,{scaleNum:3,sizeAttenuation:!0,z:17}),s.hasLamps.push(t)):s.signalTimeStamp=null}));break;case"v11":if(!l||!n)return!1;var A=[],O=null;if(Array.isArray(l))l.forEach((function(e){var t=e.lampRealInfos;A=A.concat(t)})),O=l[0].signalMachineStamp;else{var L=l.lampRealInfos,k=l.signalMachineStamp;A=L,O=k}if(console.log("灯",O),s.lampsTimeBuffer.push(O),0!==A.length){s.signalTimeStamp||(s.signalTimeStamp=O);var P=[];if(A.forEach((function(e){var t=e.phaseId,n=e.lampStatus,i=e.countDown,r=e.lampId,o=(0,h.getRoadFlowDirection)(Number(t)),a=(0,h.getSignalColorString)(Number(n));if("others"!==a){var s={id:r,num:i<10?"0"+i:i>99?99:i,type:""+a+o};P.push(s)}})),s.lampsBuffer.push(P),this.v8start){var D=void 0;s.lampsTimeBuffer.some((function(e,t){var n=e-s.timeLine;n<1e3&&n>0&&(D=t,s.lampsBuffer[t].forEach((function(e){s.updateTrafficLight(e)})))})),s.lampsBuffer.splice(0,D+1),s.lampsTimeBuffer.splice(0,D+1)}else s.lampsBuffer[0].forEach((function(e){s.updateTrafficLight(e)})),s.lampsBuffer.splice(0,1),s.lampsTimeBuffer.splice(0,1)}break;case"v13":var I=[];if(!l||!l.length)return;l.forEach((function(t){var n=t.speed,i=t.carId;if(i!==e){I.push(t);var r=s.labelMap.carLabel.find((function(e){return e.vehicleId===i}));s.updateCarLabel(r,{speed:Math.floor(n>0?n:0)},3,r.offline)}})),s.singleGpsRender(I,{z:1.1,labelZ:1.1,labels:s.labelMap.carLabel})}}}else r.dispose()}))},setGpsCarShowStatus:function(e){this.gpsCarShowStatus=e,this.modelList.forEach((function(t){t.visible=e})),this.labelMap.carLabel.forEach((function(t){t.visible=!t.offline&&e})),this.Perception&&this.Perception.changeModelVisible(!e),this.SinglePerception&&this.SinglePerception.changeModelVisible(e),this.vehicleMainCar&&(this.vehicleMainCar.visible=!e),this.singleGpsList&&this.singleGpsList.length&&this.singleGpsList.forEach((function(t){t.visible=!e}))},setInsideCar:function(e){this.isShowcarInside=e},followCar:function(e){this.followVehicleId=e.vehicleId;var t=e.position,n=t.x,i=t.y;this.carWave.position.set(n,i,.8),this.carWave.visible=!0,this.Map.followObj(e,this.isShowcarInside)},normalRender:function(e){var t=this;this.normalRenderList||(this.normalRenderList=[]),this.normalRenderList.forEach((function(n,i){e.some((function(e){return e.id===n.name}))||(t.Map.removeObj(n),t.normalRenderList.splice(i,1))})),e.forEach((function(e){var n=a.Utils.transformWGS84ToUTM({x:e.longitude,y:e.latitude}),i=n.x,r=n.y,o=t.normalRenderList.find((function(t){return t.name===e.id}));if(o)o.position.x=i,o.position.y=r,o.position.z=1,o.setText(e.label),o.setRotationFromAxisAngle(new c.Vector3(0,0,1),-e.heading*(Math.PI/180));else{var s=u.CAR_TYPE[e.type].key;"pedestrian"===s&&(s=10*Math.random()>5?"pedestrian_man_animate":"pedestrian_woman_animate");var l=new a.Model({name:e.id,modelUrl:"https://mapdata.bj.bcebos.com/maptv/common/"+s+".glb",modelType:s,label:e.label||""});l.setRotationFromAxisAngle(new c.Vector3(0,0,1),-e.heading*(Math.PI/180)),l.setText(e.label),l.position.x=i,l.position.y=r,l.position.z=1,t.Map.addModel(l),t.normalRenderList.push(l)}}))},createModelPlayer:function(){return new d.default({Map:this.Map})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(13)),r=d(n(25)),o=n(46),a=n(60),s=n(67),l=n(17),c=n(157),u=n(231),h=d(n(37));function d(e){return e&&e.__esModule?e:{default:e}}t.default={methods:{getCopEventList:function(){var e=this;(0,s.getRobocopEventList)().then((function(t){t&&t.length>0&&(e.copOriginData=t,e.addCopEvents(t))})).catch((function(e){console.error(e)}))},addCopEvents:function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.eventId,r=n.eventType,a=n.eventSubType,s=n.evidentImg,c=(n.imgContent,n.latWGS84),u=n.lonWGS84,d=n.collectVehId,f=n.eventTime;if((!a||20001!==a)&&!this.getObjectByNameFromRobocopEventList(i)){var p=o.TrackEventType[r].icon,m=o.TrackEventType[r].name,v=l.Utils.transformWGS84ToUTM({x:u,y:c}),g=v.x,y=v.y,b=this.addTrafficEvent({position:[g,y,1],options:{name:i,source:"robocop",trafficType:r,imgUrlMap:{icon:p},eventImg:s,eventName:m,startTime:(0,h.default)(f).format("YYYY-MM-DD HH:mm:ss"),collectVehId:d}});n.eventName=m;var x=this.getFilterVisible("4-event")||this.getFilterVisible(r+"-event");b.visible=this.layerStatus&&x&&!this.eventMixStatus,this.robocopEventList||(this.robocopEventList=[]),this.setFilterItem("4-event",b),this.robocopEventList.push(b)}}this.copEventNum=this.robocopEventList.length||0},getObjectByNameFromRobocopEventList:function(e){if(!this.robocopEventList)return null;for(var t=0;t<this.robocopEventList.length;t++)if(this.robocopEventList[t].name===e)return this.robocopEventList[t]},addTrafficEvents:function(e){var t=this;this.eventNum+=e.length;var n={1:"1",2:"2",3:"3",4:"4"};e.forEach((function(e,i){var r=e.eventContent,o=e.eventName,s=e.latitude,c=e.longitude,u=e.id,h=e.startTime,d=e.uniqueId,f=e.lane,p=e.trafficId;if("未知事件"!==o){var m=null;if(f&&-1!==f&&""!==f&&"-1"!==f){var v=(""+f).split(",").map((function(e){return n[e]})).filter((function(e){return e})),g=v.length>1?v.join("、"):v[0];m="第"+g+"车道"}else m="未知车道";var y=d.split("_")[0];!function(e){var n=l.Utils.transformWGS84ToUTM({x:c,y:s}),i=n.x,d=n.y,f="https://mapdata.bj.bcebos.com/maptv/img/trafficEvent/"+(a.TRAFFIC_EVENT_LABEL_MAP[r]?r:"others")+".png";t.addTrafficEvent({position:[i,d,1],options:{name:u,source:"side",roadId:e,eventName:o,id:u,trafficId:p,rscuId:y,startTime:h,laneInfo:m,trafficType:r,imgUrlMap:{icon:f}}}).visible=t.layerStatus&&!t.eventMixStatus}(t.roadSnMap[y].roadId)}}))},removeTrafficEvents:function(e){var t=this;e.forEach((function(e){var n=window.viewer.scene.scene.getObjectByName(e);n?(t.eventNum-=1,t.removeLabel(n,"eventLabel")):t.delEvent.push(e)}));var n=[];this.delEvent.forEach((function(e){var i=window.viewer.scene.scene.getObjectByName(e);i?(t.eventNum-=1,t.removeLabel(i,"eventLabel")):n.push(e)})),this.delEvent=n},updateRoadSideEvent:function(e,t){var n=this.labelMap.sideLabel.find((function(t){return t.roadId===e||t.idNum===e}));n.onlyAnimition=!0,n.options={type:"attack"},n.type="attack",n.initTop(),n.drawIDImg(n.options),n.setColor("#a45a60"),n.setColorTrip("#ff7979"),n.attackEvents=t,n.drawAttackEventImgs(),setTimeout((function(){n.setSpriteStatus(!0)}),0)},resetRoadSideEvent:function(e){var t=this.labelMap.sideLabel.find((function(t){return t.roadId===e||t.idNum===e}));t.onlyAnimition=!1,t.options={},t.type="side",t.initTop(),t.drawIDImg(t.options),t.setColor("#83aed3"),t.setColorTrip("#79F7FF"),setTimeout((function(){t.setSpriteStatus(!1)}),0)},addTrafficEvent:function(e){var t=this,n=e.position,o=e.options,a=o.source,s=o.roadId,l=o.eventName,u=o.id,h=o.rscuId,d=o.startTime,f=o.laneInfo,p=o.name,m=o.eventImg,v=o.trafficId,g=o.collectVehId,y=o.trafficType,b=o.level,x=(0,r.default)(n,3),w=x[0],_=x[1],S=x[2],M=new c.TrafficEvent2((0,i.default)({sizeAttenuation:!0,scale:this.mapLayerScale},o));return M.name=p,M.position.x=w,M.position.y=_,M.position.z=S,M.type=b||"side"===a?"trafficEvent":"copEvent",M.roadId=s,M.extraInfo={eventName:l,id:u,rscuId:h,startTime:d,laneInfo:f,iconPath:o.imgUrlMap&&o.imgUrlMap.icon,eventImg:m,collectVehId:g,trafficId:v},M.setSpriteStatus(this.showLabelStatus),M.onlyAnimition=this.showLabelStatus,this.addClickEvent(M,(function(e){t.defaultEventDispatcher(e.target)})),o.level||this.labelMap.eventLabel.push(M),this.setFilterItem(y+"-event",M),this.Map.viewer.scene.addAnimateObject(M),M},addEquipmentEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new u.EquipmentEvent(e);return t}}}},function(e,t,n){var i={"./en-au":189,"./en-au.js":189,"./en-ca":190,"./en-ca.js":190,"./en-gb":191,"./en-gb.js":191,"./en-ie":192,"./en-ie.js":192,"./en-il":193,"./en-il.js":193,"./en-in":194,"./en-in.js":194,"./en-nz":195,"./en-nz.js":195,"./en-sg":196,"./en-sg.js":196,"./zh-cn":197,"./zh-cn.js":197};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=373},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(13)),r=u(n(21)),o=u(n(25)),a=u(n(62)),s=n(67),l=n(17),c=(n(64),n(157));function u(e){return e&&e.__esModule?e:{default:e}}t.default={methods:{sendMixParams:function(e,t){this[t]&&this[t].send((0,a.default)(e));var n=this[t+"Contract"];n&&(n.recentMessage=(0,a.default)(e))},connectMixEvent:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{drawMixEvent:!0,drawEvent:!0},n=t||{drawMixEvent:!0,drawEvent:!0},i=n.drawMixEvent,r=n.drawEvent;return(0,s.connectMixEvents)().then((function(t){var n=t.ws,o=t.connect,a=e;e.mixEventWs=o,e.mixEventWsContract=n;var s={cellLevel:13,isDetail:!0,event:[{type:30001,startTime:0},{type:20001,startTime:new Date((new Date).toLocaleDateString()).getTime()}]};e.cellLevel=12,e.sendMixParams(s,"mixEventWs"),o.onmessage=function(e){var t=e.data;if("ok"===t||""===t.trim())return!1;var n=JSON.parse(t),o=[],s=[];n.forEach((function(e){var t=e.cellid,n=e.centerLat,i=e.centerLng,l=e.eventDetail;e.level;if(l){var c={center:[i,n],cellid:t,30001:0,20001:0};l.forEach((function(e){var t=e.type,n=e.event,i=e.eventCount;if(c[t]=i,30001===t){var s=n.map((function(e){var t=e.EventContent;e.EventID,e.EventTime,e.Lat,e.Lng;return JSON.parse(t)}));o=o.concat(s)}else if(20001===t){var l=n.map((function(e){var t=e.EventContent;return JSON.parse(t)}));r&&a.addCopEvents(l)}else a.$emit("mixEvents",n)})),s.push(c)}})),i&&a.addMixEvents(s),r&&a.setTrafficEvent(o)}}))},addMixEvents:function(e){var t=this;e.forEach((function(e){var n=e.center,i=e.cellid,a=(0,o.default)(n,2),s=a[0],u=a[1],h=l.Utils.transformWGS84ToUTM({x:s,y:u}),d=h.x,f=h.y;(0,r.default)(e).forEach((function(n){if(!isNaN(Number(n))&&e[n]){var r=t.labelMap.mixEventLabel.find((function(e){return e.mixId===i+"-"+n}));if(r)r.mixNum=e[n]>9?e[n]:"0"+e[n],r.initTop();else{var o=new c.TrafficEvent2({source:20001===Number(n)?"robocop":"side",num:e[n]>9?e[n]:"0"+e[n]});o.mixId=i+"-"+n,o.position.set(d,f,1.2),t.Map.viewer.scene.addAnimateObject(o),o.visible=t.layerStatus&&t.eventMixStatus,t.addClickEvent(o,(function(e){t.Map.viewer.zoomTo(o,1,500)})),t.labelMap.mixEventLabel.push(o)}}}))}))},connectMixTraffic:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.connectMix)().then((function(i){var r=i.ws,o=i.connect;e.handleMixData({ws:r,connect:o},t,n)}))},handleMixData:function(e,t,n){var o=e.ws,a=e.connect,s={0:"#7FA3E0",1:"#2887E7",3:"#2887E7"},c={4:{color:"#FFF86A"},3:{color:"#FFB949"},2:{color:"#FC707C"},1:{color:"#E585FF"}},u=this;this.mixWs=a,this.mixWsContract=o,this.mixWsContract.bindObj={obj:this,key:"mixWs"},this.perceptionMap={},a.onmessage=function(e){var o=this,a=e.data;this.bindObj=u.mixWs;var h={};if("ok"===a||""===a.trim()||!u.render)return!1;JSON.parse(a).data.forEach((function(e){var t=e.id,r=e.source,o=e.type,a=e.heading,u=e.extra,d="normal",f=u?u.elementType:null,p=a.toFixed(2),m=l.Utils.degreeToRadian(p-90)/(Math.PI/180),v=o>99?p:m,g=1===r&&o>99;o<99&&(v=-e.heading);var y=s[r];f&&(y=c[f].color),t.indexOf("_")>-1&&(d=t.split("_")[0]);var b=(0,i.default)({z:.5},e,{heading:v,id:t,carColor:y,elementType:f},n);n.zKey&&(b.z=e[n.zKey]),n.extraZ&&(b.z+=n.extraZ),h[t]?h[t].push(b):h[d]?h[d].push(b):g?h[t]=[b]:h[d]=[b]})),(0,r.default)(h).forEach((function(e,n){if(!u.perceptionMap[e]){var i=u.$refs.map.createPerception();i.betterRenderConfig=u.betterRenderConfig,i.name=e,o.perceptionModelTypeMap&&(i.modelTypeMap=o.perceptionModelTypeMap),u.perceptionMap[e]=i}u.$refs.map.drawModels(h[e],{timestamp:h[e][0].timestamp,delay:t,delayType:"byTime",rate:1},u.perceptionMap[e])}))}},connectGpsMix:function(){var e=this;(0,s.connectGpsMix)().then((function(t){t.ws;var n=t.connect;e.SinglePerception=e.map.createPerception(),e.SinglePerception.name="single";var r=e;n.onmessage=function(e){var t=e.data;if("ok"===t||""===t.trim())return!1;var n=JSON.parse(t).data,o=n.map((function(e){var t=e.id,n=e.type,r=e.heading,o=e.extra.elementType,a=n>99?r:l.Utils.degreeToRadian(r-90)/(Math.PI/180);return(0,i.default)({z:.5},e,{heading:a,id:t,elementType:o})}));r.map.drawModels(o,{timestamp:n[0].timestamp,delay:2e3,delayType:"byTime",rate:0},r.SinglePerception)}}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=A(n(198)),r=A(n(38)),o=A(n(39)),a=A(n(24)),s=A(n(21)),l=A(n(13)),c=A(n(25)),u=(0,i.default)(["\n                query roadQuery($UpdateTime: Int!) {\n                    SoftRoad(UpdateTime: $UpdateTime) {\n                        laneId\n                        gateId\n                        signalId\n                        sNumb\n                        currentTurn\n                        onlineState\n                        defaultTurn\n                    }\n                }\n            "],["\n                query roadQuery($UpdateTime: Int!) {\n                    SoftRoad(UpdateTime: $UpdateTime) {\n                        laneId\n                        gateId\n                        signalId\n                        sNumb\n                        currentTurn\n                        onlineState\n                        defaultTurn\n                    }\n                }\n            "]),h=(0,i.default)(["\n                subscription WaterSubscribe {\n                    WaterLevel {\n                        gateID\n                        gateState\n                        signalID\n                        signalState\n                        alarmGrade\n                        handleState\n                    }\n                }\n            "],["\n                subscription WaterSubscribe {\n                    WaterLevel {\n                        gateID\n                        gateState\n                        signalID\n                        signalState\n                        alarmGrade\n                        handleState\n                    }\n                }\n            "]),d=(0,i.default)(["\n                subscription roadSubscribe {\n                    SoftRoad {\n                        laneId\n                        gateId\n                        signalId\n                        sNumb\n                        currentTurn\n                        onlineState\n                        defaultTurn\n                    }\n                }\n            "],["\n                subscription roadSubscribe {\n                    SoftRoad {\n                        laneId\n                        gateId\n                        signalId\n                        sNumb\n                        currentTurn\n                        onlineState\n                        defaultTurn\n                    }\n                }\n            "]),f=n(67),p=n(17),m=n(0),v=n(155),g=A(n(188)),y=n(46),b=n(64),x=n(90),w=A(n(199)),S=n(60),M=n(125),T=A(n(37)),E=A(n(201)),C=A(n(212));function A(e){return e&&e.__esModule?e:{default:e}}var O,L=[60,14,29,35,45,54,74,59,47,40,24,17,10,68];t.default={mounted:function(){this.carBaseInfoMap={}},methods:{setSideLayer:function(e,t){var n=this;return this.sideLabelConfig=e?y.sideBiggerLabelConfig:y.sideLabelConfig,(0,f.getRscuList)({pageSize:1e3}).then((function(e){e.data.list.forEach((function(e){var t=e.sn,i=e.roadId,r=e.longitude,o=e.latitude,a=e.roadDesc;n.roadSnMap[t]={roadId:i,roadDesc:a,position:[r,o]}}))})),(0,f.getSideList)().then((function(i){var r=i.data,o=[];return n.sideMap={},r.forEach((function(i){i.id;var r=i.latitude,a=i.longitude,s=i.roadId,l=i.roadName,c=p.Utils.transformWGS84ToUTM({x:a,y:r}),u=c.x,h=c.y,d=l.substring(0,8),f=l.substring(8),m=n.addDiamondRoadSide({position:[u,h,1],options:{id:s>100?"0"+s:"00"+s,roadId:s,location1:d,location2:f,hover:t,labelSize:e?"big":"small"}});o.push(m),n.addClickEvent(m,(function(e){n.defaultEventDispatcher(e.target)})),n.sideMap[s]=[a,r]})),o}))},goToSide:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{showCrossData:!0},i=(n.type,n.showCrossData);e&&this.activeRoadId!==e&&(this.quotaInterval&&clearInterval(this.quotaInterval),this.activeRoadId=e,(0,f.getSideInfo)({roadId:e}).then((function(n){var r=n.viewParam,o=n.rscuSn;r||(t.$message("请配置路口视角参数后重试"),t.resetNormal()),i&&(t.getCrossQuota(e,!0),t.quotaInterval=setInterval((function(){t.getCrossQuota(e)}),5e3)),13===e?t.pcdObjList.forEach((function(e){e.visible=!0})):t.pcdObjList.forEach((function(e){e.visible=!1})),t.sideRscu=o,t.mode="side";var a=r.split(",").map((function(e){return Number(e)})),s=(0,c.default)(a,6),l=s[0],u=s[1],h=s[2],d=s[3],f=s[4],p=s[5];if(t.viewParamsMap[e]||(t.viewParamsMap[e]=[l,u,h,d,f,p]),t.mix){if(t.mix){var m=(0,c.default)(t.roadSnMap[o].position,2),v=m[0],g=m[1];t.sendMixParams({lng:v,lat:g,dis:500,vehID:""},"mixWs")}}else t.connectTraffic({dataRange:4,rscuSn:o},{z:.7});t.map.animationTo([l,u,h,d,f,p],400,!0)})))},getCrossQuota:function(e,t){var n=this,i=function(e,t,n,i,r){"number"!=typeof i?e[t+"Pass"]="-":"-"===e.straightPass?e[t+"Pass"]=i:e[t+"Pass"]+=i,0===n&&("number"==typeof r||r?e[t+"Line"]+=Math.floor(Number(r)):e[t+"Line"]="-")};(0,f.queryByCrossBatch)({crossId:e,count:12}).then((function(e){t&&(n.quotaLabelState=!0);var r={},o={};e.forEach((function(e,t){var n=e.flowData.branchDataList,a=e.timeSec,s=!0;Math.abs((new Date).getTime()-1e3*a)>36e5&&(s=!1),n.forEach((function(e){var n=e.branchId,a=e.flowData;0===t&&(o[n]=s);var u=y.branchList.find((function(e){return e.properties.id===n})),h=(0,c.default)(u.geometry.coordinates,2),d=h[0],f=h[1];if(r[n]||(r[n]={straightPass:0,leftPass:0,rightPass:0,straightLine:0,leftLine:0,rightLine:0},r[n].position=[d,f],r[n].direction=u.properties.name),s)a.forEach((function(e){var o=e.flowType,a=e.trafficNumber,s=e.queueLength;switch(o){case"TTP_NO_TURN":i(r[n],"straight",t,a,s);break;case"TTP_LEFT_TURN":i(r[n],"left",t,a,s);break;case"TTP_RIGHT_TURN":i(r[n],"right",t,a,s)}}));else{r[n]=(0,l.default)({},r[n],{straightPass:"-",leftPass:"-",rightPass:"-",straightLine:"-",leftLine:"-",rightLine:"-"})}}))})),(0,s.default)(r).forEach((function(e,t){var i=r[e],a=(0,c.default)(i.position,2),s=a[0],l=a[1];n.createQutaLabel(i,[s,l,20],3,t,o[e])}))})).catch((function(e){console.warn("信控指标获取失败",e)}))},createQutaLabel:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=this,r=arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=y.quotaLabelConfig.content,u=y.quotaLabelConfig.size,h=y.quotaLabelConfig.bg,d=y.quotaLabelConfig.activeBg,f=_.cloneDeep(d),v=(0,c.default)(f,3),g=v[0],b=v[1],x=v[2];g.url="/images/guangzhou/cross-"+(o?"active":"offline")+"-bg.png",b.url="/images/guangzhou/cross-"+(o?"active":"offline")+"-bg.png",x.url="/images/guangzhou/cross-"+(o?"active":"offline")+"-bg.png";var w=u.width?u.width*n:162,S=u.height?u.height*n:158;e&&(0,s.default)(e).forEach((function(t){l[t]&&(l[t].text=e[t])}));var M=(0,c.default)(t,3),T=M[0],E=M[1],C=M[2],A=m.MathUtils.ceilPowerOfTwo(w),O={width:A,height:A*(S/w),factor:{x:A/w,y:A/w}},L=f.map((function(e){return i.loadImg(e.url)}));this.quotaLabelMap[r]?(this.quotaLabelMap[r].visible=this.quotaLabelState,this.quotaLabelMap[r].position.set(T,E,C),a.default.all(L).then((function(t){var n=t.map((function(e,t){return{img:e,imgInfo:f[t]}}));i.updateAreaLabel(i.quotaLabelMap[r],e,y.quotaLabelConfig,{scaleNum:3,shadowPadding:0},n)}))):this.createLabelCanvas(l,h,O,n).then((function(t){var n=t.canvas,o=t.textCanvas,s=new p.AreaLabel({name:"quotaLabel"+r,mainView:n,factor:O.factor,scaleNum:.33,needLine:!0,color:"#47B2FF",center:e.direction.indexOf("东南")>0?{x:.5,y:0}:null});s.position.set(T,E,C),s.update(o,[0,0,w,S]),s.visible=i.quotaLabelState,i.quotaLabelMap[r]=s,a.default.all(L).then((function(t){var n=t.map((function(e,t){return{img:e,imgInfo:f[t]}}));i.updateAreaLabel(i.quotaLabelMap[r],e,y.quotaLabelConfig,{scaleNum:3,shadowPadding:0},n),i.Map.viewer.scene.addTrafficLight(s)}))}))},removeQuoTaLabel:function(){var e=this;this.quotaLabelState=!1,(0,s.default)(this.quotaLabelMap).forEach((function(t){e.quotaLabelMap[t].visible=e.quotaLabelState})),this.quotaInterval&&clearInterval(this.quotaInterval)},updateAreaLabel:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{scaleNum:1,shadowPadding:40},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=_.cloneDeep(n),a=o.content,l=i.scaleNum,c=i.shadowPadding;(0,s.default)(t).forEach((function(e){a[e]&&(a[e].text=t[e])})),(0,s.default)(a).forEach((function(e){a[e].size=a[e].size*l,a[e].position=a[e].position.map((function(e){return(e+c)*l}))})),e.updateInfo((0,s.default)(a).map((function(e){return a[e]})),[0,0],r)},addDiamondRoadSide:function(e){var t=e.position,n=e.options,i=(0,c.default)(t,3),r=i[0],o=i[1],a=i[2],u=new v.Diamond((0,l.default)({sizeAttenuation:!0,height:1,radius:.5,radiusSegments:3,heightSegments:2,activeOption:{height:.2,speed:.05},borderColor:"#98fbff",topColor:[152,251,255],bottomColor:[121,247,255],topOffset:{x:0,y:0,z:1},closeEnded:!0,ringRadius:[.2,.5]},n));u.name="roadId"+n.roadId,u.position.x=r,u.position.y=o,u.position.z=a,u.type="side",u.roadId=n.roadId,u.options=n,u.onlyAnimition=!1,u.visible=this.layerStatus,this.Map.viewer.scene.addAnimateObject(u),this.labelMap.sideLabel.push(u),this.setFilterItem("side",u);var h=_.cloneDeep(this.sideLabelConfig||y.sideLabelConfig),d=h.content,f=h.size,p=h.bg,g=3*f.width,b=3*f.height;(0,s.default)(n).forEach((function(e){d[e]&&(d[e].text=n[e])}));var x=m.MathUtils.ceilPowerOfTwo(g),w={width:x,height:x*(b/g),factor:{x:x/g,y:x/g}};return u.factor=w.factor,this.createLabelCanvas(d,p,w,3).then((function(e){var t=e.canvas,n=e.textCanvas;u.drawLabel(t,n)})),u},updateDiamond:function(e,t){var n=this,i=this.labelMap.sideLabel.find((function(t){return t.roadId===e})),r=_.cloneDeep(this.sideLabelConfig||y.sideLabelConfig),o=r.content,a=r.size,l="/images/guangzhou/side"+("big"===i.labelSize?"Bigger":"")+(t||"")+"Label@3x.png";(0,s.default)(i.options).forEach((function(e){o[e]&&(o[e].text=i.options[e])})),o.id.text=e>100?"0"+e:"00"+e,o.id.color="Active"===t?"#3E4862":"#fff";var c=(0,s.default)(o).map((function(e){return o[e]}));this[t+"SideBgInfo"]?i.updateLabel(c,[0,0,100,100],this[t+"SideBgInfo"]):this.loadImg(l).then((function(e){n[t+"SideBgInfo"]=[{img:e,imgInfo:{url:l,position:[0,0],size:[a.width,a.height]}}],i.updateLabel(c,[0,0,100,100],n[t+"SideBgInfo"])}))},getSafeEventList:function(){var e=this;(0,f.getSafeEventList)().then((function(t){if(t){var n={};e.messageList=t.map((function(e){var t=e.desc,i=e.assetType,r=e.deviceId,o=e.deviceType,a=e.eventId,s=e.eventType,l=(e.location,e.locationAddr),c=e.result,u=e.riskLevel,h=e.timestamp,d={name:i+"攻击",time:(0,T.default)(1e3*h).format("HH:mm:ss"),ID:r,type:s,decreption:t,position:l,result:c};return"RSCU"===o&&(n[r]?n[r].push(d):n[r]=[d]),{id:a.substring(a.length-11,a.length-1),version:o+"  "+r,type:s,content:t,time:1e3*h,errorType:u}}));var i=(0,s.default)(e.safeEventMap),r=[];i&&(r=i.filter((function(e){return!(0,s.default)(n).includes(e)}))),e.safeEventMap=n,e.labelMap.sideLabel.length&&(e.updateSafeLabels(),e.resetSafeLabels(r))}}))},updateSafeLabels:function(){var e=this;(0,s.default)(this.safeEventMap).forEach((function(t){var n=e.roadSnMap[t].roadId;e.updateDiamond(n,"Attack",e.safeEventMap[t])}))},resetSafeLabels:function(e){var t=this;e.forEach((function(e){t.updateDiamond(t.roadSnMap[e].roadId)}))},addGpsCarLayer:function(){var e=this;(0,f.getCarBaseInfo)({pageNo:1,pageSize:1e3}).then((function(t){t.list.forEach((function(t){var n=t.vehicleId,i={grade:t.grade,licenseNumber:t.licenseNumber};e.carBaseInfoMap[n]=i})),e.mix?e.connectGpsMix():e.connectGpsCarInfo()}))},connectTraffic:(O=(0,o.default)(r.default.mark((function e(t){var n,i,o,a,l,c,u,h,d=this,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.perceptionMap&&(0,s.default)(this.perceptionMap).forEach((function(e){d.perceptionMap[e].resetRender()})),this.perceptionMap={},this.map.perception.resetRender(),this.eventsWs&&this.eventsWs.dispose(),n=this.ServiceConfig.trafficPath,i=f.z,o=f.lodModelConfig,a=f.delay,l=this.getWsUrl(n),c=new b.Ws,u=this,this.trafficDataBuffer=[],this.trafficEventBuffer=[],c.beforeReconnect=function(){d.$refs.map.resetRender()},e.next=14,c.connect(l,t);case 14:h=e.sent,this.eventsWs=c,h.onmessage=function(e){var t=this,n=e.data;if(b.heartCheck.reset().start(this),"ok"!==n){var r=JSON.parse(n),l=r.trafficEventList,c=r.obstacleDataList,h=r.statsData,d=r.timestamp;if(u.trafficDataBuffer.push(h),u.trafficEventBuffer.push(l),u.trafficTimeStamp?d-u.trafficTimeStamp>u.delay&&(u.statsData=u.trafficDataBuffer[0],u.trafficDataBuffer.splice(0,1),u.setTrafficEvent(u.trafficEventBuffer[0]),u.trafficEventBuffer.splice(0,1)):u.trafficTimeStamp=d,c&&c.length>0&&u.render){u.modelData=c,u.$emit("getTime",c[0].timestamp);var f={};c.forEach((function(e){var t=e.heading,n=e.longitude,r=e.latitude,o=e.sn,a="";u.showLabelKey.forEach((function(t,n){a+=(n?"，":"")+u.formatLabel(e[t],t)})),e.label=""===a?null:a,e.heading=p.Utils.degreeToRadian(t-90)/(Math.PI/180),e.longitude=Number(n.toFixed(7)),e.latitude=Number(r.toFixed(7)),e.z=i||.2,f[o]?f[o].push(e):f[o]=[e]})),(0,s.default)(f).forEach((function(e,n){if(!u.perceptionMap[e]){var i=null;n?(i=u.$refs.map.createPerception(),t.perceptionModelTypeMap&&(i.modelTypeMap=t.perceptionModelTypeMap)):i=u.$refs.map.perception,i.lodModelConfig=o,u.perceptionMap[e]=i}u.render&&u.$refs.map.drawModels(f[e],{timestamp:f[e][0].timestamp,delay:a||u.delay,delayType:"byTime",rate:2},u.perceptionMap[e])}))}}};case 17:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)}),addTrafficLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyPerception:!1,eventConfig:null,delay:2e3},i=n.onlyPerception,r=n.delay,o=n.eventConfig;if(this.mix){var a={},s=this.connectMixTraffic(r,t);if(a.traffic=s,!i){var l=this.connectMixEvent(o);a.event=l}return a}this.connectTraffic(e,t)},addCopEventLayer:function(){var e=this;this.mix||(this.getCopEventList(),this.copInterval=setInterval((function(){e.getCopEventList()}),2e4))},getActiveSceneInfo:function(e,t,n){var i=this;this.addTunnelWater("https://mapdata.bj.bcebos.com/json/guangzhou/tunnel.geojson","tunnelWater");var r=(0,C.default)(u),o=(0,C.default)(h),a=(0,C.default)(d),s=this;setTimeout((function(){L.forEach((function(e){var t="lane_"+e;i.editor.setMeshColor(t,"#74FFF5"),i.editor.setMeshOpacity(t,.2)}))}),1e3);var l=(0,w.default)(e,t,n);l.query({query:r,variables:{UpdateTime:0}}).then((function(e){e.data.SoftRoad.forEach((function(e){s.setSoftRoad(e)}))}));var c=l.subscribe({query:o,variables:{}}),f=l.subscribe({query:a,variables:{}});c.subscribe({next:function(e){var t=e.data;s.setWaterStatus(t.WaterLevel)},error:function(e){console.error(e)}}),f.subscribe({next:function(e){var t=e.data;s.setSoftRoad(t.SoftRoad)},error:function(e){console.error(e)}})},setSoftRoad:function(e){var t={1:[21,22],2:[1,2],3:[16,17],4:[36,37],5:[31,32],6:[41,42],7:[26,27],8:[11,12],9:[6,7]},n=e.gateId,i=e.laneId,r=e.sNumb,o=e.currentTurn,a=e.defaultTurn;if(n&&""!==n){var s=o>0?o:a;if(t[s]){var l=(0,c.default)(t[s],2),u=l[0],h=l[1];this.editor.setAction(n,r-1,u,h,24),8===s&&(this.editor.setMeshColor(i,"#ff0000"),this.editor.setMeshOpacity(i,.2))}}},setWaterStatus:function(e){var t=e.gateID,n=e.gateState,i=e.signalID,r=e.signalState,o=e.alarmGrade,a=e.handleState;if(t&&""!==t){var s=(0,c.default)({0:[0,24],1:[30,60]}[n],2),l=s[0],u=s[1],h=(0,c.default)({0:[0,10],1:[11,20]}[r],2),d=h[0],f=h[1];this.waterEvent||(this.waterEvent=this.addTrafficEvent({position:[757610.077,2563808.678,.6],options:{eventIcon:"EventIcon2",source:"level2",trafficType:"overWater",imgUrlMap:{}}}),this.waterEvent.type="copEvent");var p=void 0;if(1===o){if(-1===a){if(-4.5===p)return;p=-4.5,console.log("toLevel2"),this.water&&this.updateWater(-4.5)}this.waterEvent.visible=!1}else if(2===o){if(-1===a){if(-2.5===p)return;p=-2.5,console.log("水位","toLevel3"),this.water&&this.updateWater(-2.5)}else if(0===a){if(-7===p)return;p=-7,console.log("水位","toLevel1"),this.water&&this.updateWater(-7)}this.waterAlarmGrade!==o&&(this.waterEvent.visible=!0,this.waterEvent.source="level2",this.waterEvent.initTop(),this.waterEvent.drawTrafficEventImg())}else if(this.waterAlarmGrade!==o&&(this.waterEvent.source="level3",this.waterEvent.initTop(),this.waterEvent.drawTrafficEventImg(),this.waterEvent.visible=!0),0===a){if(-4.5===p)return;p=-4.5,console.log("水位","toLevel2"),this.water&&this.updateWater(-4.5)}this.waterAlarmGrade=o,void 0!==this.waterGateStatus&&this.waterGateStatus===n||(this.waterGateStatus=n,this.editor.setAction("tunnel1",0,l,u,30),this.editor.setAction("tunnel2",0,l,u,30)),this.editor.setAction(i,0,d,f,30)}},setCameraView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=e.translation,i=n.x,r=n.y,o=n.z,a=e.rotation,s=a.x,l=a.y,c=a.z,u=a.w,h=(0,x.getEulerRotationFromCameraParams)([s,l,c,u]),d=h._y,f=h._z;this.setViewParams([i,r,o,f,d,0],t)},setViewParams:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;console.log(e);var n=(0,c.default)(e,6),i=n[0],r=n[1],o=(n[2],n[3]),a=n[4],s=(n[5],this.Map.transformUTMToWGS84({x:i,y:r})),l=s.x,u=s.y,h=e;h[0]=l,h[1]=u,h[3]=o/(Math.PI/180)-180,h[4]=a-Math.PI,this.map.animationTo(h,t)},connectDeviceStatus:function(e){var t=this;(0,f.connectDeviceStatus)(e).then((function(e){var n=e.ws,i=e.connect,r=t;t.deviceWs=i,t.deviceWsContract=n,t.deviceWsContract.bindObj={obj:t,key:"deviceWs"},i.onmessage=function(e){var t=e.data;if(this.bindObj=r.deviceWs,"ok"===t||""===t.trim())return!1;var n=JSON.parse(t);r.$emit("pushDeviceStatus",n.map((function(e){return e.content=JSON.parse(e.content),E.default.camelizeKeys(e)})))}}))},setConstruction:function(e,t){var n=this;this.constructionMap||(this.constructionMap={});var i={1:[122/255,1,107/255],2:[1,241/255,81/255],3:[1,59/255,59/255],4:[1,59/255,59/255]};return(0,f.getConstructionInfo)(e).then((function(e){e.forEach((function(e){var r=e.roadStates,o=e.roadid,a=[],s=[];if(r.map((function(e){var t=e.states;e.wkt.forEach((function(e){var n=e.X,r=e.Y;s.push([n,r]),a.push(i[t])}))})),n.constructionMap[o])n.constructionMap[o].updateColors(a);else{var l=new p.trafficLineMesh({width:100,color:[.38,1,.305],mockColor:!0,vertices:s,opacity:.6});l.position.z=5,l.updateColors(a),l.visible=!!t,n.constructionMap[o]=l,n.Map.viewer.scene.addBlurObject(l)}}))}))},getReplayConnect:function(e,t){var n=this,i=new g.default({Map:this.Map});return(0,f.connectReplay)(e,t).then((function(e){var t=e.ws,r=e.connect,o=n;n.replayWs=r,n.replayWsContract=t,n.sendMixParams({eventID:"41914625"},"replayWs"),r.onmessage=function(e){var t=e.data;if("ok"===t||""===t.trim())return!1;var n=JSON.parse(t);o.$emit("pushReplayData",n),i.render(n.replayEvent.map((function(e){var t=90-e.heading;return(0,l.default)({},e,{id:e.obstacleid,heading:t})})))}})),i},getStationInfo:function(e){return(0,f.getStationInfo)(e)},changePerceptionLabelLayerShow:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"speed";console.log(e),this.perceptionMap&&(0,s.default)(this.perceptionMap).length?(0,s.default)(this.perceptionMap).forEach((function(i){t.perceptionMap[i].setInfoLabelStatus(e,n)})):this.map.perception.setInfoLabelStatus(e,n)},setPerceptionModelType:function(e,t){var n=this;this.perceptionModelTypeMap=t?(0,l.default)({},S.CAR_TYPE,e):e,this.perceptionMap&&(0,s.default)(this.perceptionMap).length?(0,s.default)(this.perceptionMap).forEach((function(e){n.perceptionMap[e].modelTypeMap=n.perceptionModelTypeMap})):this.map.perception.modelTypeMap=this.perceptionModelTypeMap},drawConstructionArea:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startstake:"K81+110",endstake:"K81+180",direction:1,lanelist:[1,2,3]},n=arguments[1];return(0,f.getConstruction)(t).then((function(t){var i=t.result.wktpolygon;return e.addRoadConstructionArea(i,n,n.extraZ)}))},getLanesInfoByPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={coordtype:"UTM",zone:e.zone||M.zoneConfig[this.cityId]||49,points:e.points||[{x:750335.8334134069,y:2564335.462141646}]};return(0,f.getLaneInfoByPoint)(t).then((function(e){return e.result}))}}}},function(e,t,n){e.exports={default:n(377),__esModule:!0}},function(e,t,n){n(378),e.exports=n(14).Object.freeze},function(e,t,n){var i=n(50),r=n(150).onFreeze;n(123)("freeze",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ApolloClient",(function(){return O})),n.d(t,"ApolloError",(function(){return g})),n.d(t,"FetchType",(function(){return v})),n.d(t,"NetworkStatus",(function(){return i})),n.d(t,"ObservableQuery",(function(){return y})),n.d(t,"isApolloError",(function(){return m}));var i,r=n(4),o=n(6),a=n(53),s=n(23),l=n(34),c=n(139),u=n(7),h=n(35);function d(e){return e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(i||(i={}));var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype[c.default]=function(){return this},t.prototype["@@observable"]=function(){return this},t}(s.a);function p(e){return Array.isArray(e)&&e.length>0}function m(e){return e.hasOwnProperty("graphQLErrors")}var v,g=function(e){function t(n){var i,r,o=n.graphQLErrors,a=n.networkError,s=n.errorMessage,l=n.extraInfo,c=e.call(this,s)||this;return c.graphQLErrors=o||[],c.networkError=a||null,c.message=s||(r="",p((i=c).graphQLErrors)&&i.graphQLErrors.forEach((function(e){var t=e?e.message:"Error message not found.";r+="GraphQL error: "+t+"\n"})),i.networkError&&(r+="Network error: "+i.networkError.message+"\n"),r=r.replace(/\n$/,"")),c.extraInfo=l,c.__proto__=t.prototype,c}return Object(r.c)(t,e),t}(Error);!function(e){e[e.normal=1]="normal",e[e.refetch=2]="refetch",e[e.poll=3]="poll"}(v||(v={}));var y=function(e){function t(t){var n=t.queryManager,i=t.options,r=t.shouldSubscribe,a=void 0===r||r,s=e.call(this,(function(e){return s.onSubscribe(e)}))||this;s.observers=new Set,s.subscriptions=new Set,s.isTornDown=!1,s.options=i,s.variables=i.variables||{},s.queryId=n.generateQueryId(),s.shouldSubscribe=a;var l=Object(o.getOperationDefinition)(i.query);return s.queryName=l&&l.name&&l.name.value,s.queryManager=n,s}return Object(r.c)(t,e),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var i={next:function(n){t(n),e.observers.delete(i),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){r.unsubscribe()}),0)},error:n},r=e.subscribe(i)}))},t.prototype.currentResult=function(){var e=this.getCurrentResult();return void 0===e.data&&(e.data={}),e},t.prototype.getCurrentResult=function(){if(this.isTornDown){var e=this.lastResult;return{data:!this.lastError&&e&&e.data||void 0,error:this.lastError,loading:!1,networkStatus:i.error}}var t,n,o,a=this.queryManager.getCurrentQueryResult(this),s=a.data,l=a.partial,c=this.queryManager.queryStore.get(this.queryId),u=this.options.fetchPolicy,h="network-only"===u||"no-cache"===u;if(c){var f=c.networkStatus;if(n=c,void 0===(o=this.options.errorPolicy)&&(o="none"),n&&(n.networkError||"none"===o&&p(n.graphQLErrors)))return{data:void 0,loading:!1,networkStatus:f,error:new g({graphQLErrors:c.graphQLErrors,networkError:c.networkError})};c.variables&&(this.options.variables=Object(r.a)(Object(r.a)({},this.options.variables),c.variables),this.variables=this.options.variables),t={data:s,loading:d(f),networkStatus:f},c.graphQLErrors&&"all"===this.options.errorPolicy&&(t.errors=c.graphQLErrors)}else{var m=h||l&&"cache-only"!==u;t={data:s,loading:m,networkStatus:m?i.loading:i.ready}}return l||this.updateLastResult(Object(r.a)(Object(r.a)({},t),{stale:!1})),Object(r.a)(Object(r.a)({},t),{partial:l})},t.prototype.isDifferentFromLastResult=function(e){var t=this.lastResultSnapshot;return!(t&&e&&t.networkStatus===e.networkStatus&&t.stale===e.stale&&Object(a.a)(t.data,e.data))},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){var e=this.queryManager.queryStore.get(this.queryId);e&&(e.networkError=null,e.graphQLErrors=[])},t.prototype.refetch=function(e){var t=this.options.fetchPolicy;return"cache-only"===t?Promise.reject(new u.a(1)):("no-cache"!==t&&"cache-and-network"!==t&&(t="network-only"),Object(a.a)(this.variables,e)||(this.variables=Object(r.a)(Object(r.a)({},this.variables),e)),Object(a.a)(this.options.variables,this.variables)||(this.options.variables=Object(r.a)(Object(r.a)({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,Object(r.a)(Object(r.a)({},this.options),{fetchPolicy:t}),v.refetch))},t.prototype.fetchMore=function(e){var t=this;Object(u.b)(e.updateQuery,2);var n=Object(r.a)(Object(r.a)({},e.query?e:Object(r.a)(Object(r.a)(Object(r.a)({},this.options),e),{variables:Object(r.a)(Object(r.a)({},this.variables),e.variables)})),{fetchPolicy:"network-only"}),i=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(i,n,v.normal,this.queryId).then((function(r){return t.updateQuery((function(t){return e.updateQuery(t,{fetchMoreResult:r.data,variables:n.variables})})),t.queryManager.stopQuery(i),r}),(function(e){throw t.queryManager.stopQuery(i),e}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables}).subscribe({next:function(n){var i=e.updateQuery;i&&t.updateQuery((function(e,t){var r=t.variables;return i(e,{subscriptionData:n,variables:r})}))},error:function(t){e.onError&&e.onError(t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){var t=this.options.fetchPolicy;this.options=Object(r.a)(Object(r.a)({},this.options),e),e.pollInterval?this.startPolling(e.pollInterval):0===e.pollInterval&&this.stopPolling();var n=e.fetchPolicy;return this.setVariables(this.options.variables,t!==n&&("cache-only"===t||"standby"===t||"network-only"===n),e.fetchResults)},t.prototype.setVariables=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!0),this.isTornDown=!1,e=e||this.variables,!t&&Object(a.a)(e,this.variables)?this.observers.size&&n?this.result():Promise.resolve():(this.variables=this.options.variables=e,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,n=t.getQueryWithPreviousResult(this.queryId),i=n.previousResult,r=n.variables,a=n.document,s=Object(o.tryFunctionOrLogError)((function(){return e(i,{variables:r})}));s&&(t.dataStore.markUpdateQueryResult(a,r,s),t.broadcastQueries())},t.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},t.prototype.startPolling=function(e){w(this),this.options.pollInterval=e,this.queryManager.startPollingQuery(this.options,this.queryId)},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:Object(o.cloneDeep)(e),t},t.prototype.onSubscribe=function(e){var t=this;try{var n=e._subscription._observer;n&&!n.error&&(n.error=b)}catch(e){}var i=!this.observers.size;return this.observers.add(e),e.next&&this.lastResult&&e.next(this.lastResult),e.error&&this.lastError&&e.error(this.lastError),i&&this.setUpQuery(),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.setUpQuery=function(){var e=this,t=this.queryManager,n=this.queryId;this.shouldSubscribe&&t.addObservableQuery(n,this),this.options.pollInterval&&(w(this),t.startPollingQuery(this.options,n));var o=function(t){e.updateLastResult(Object(r.a)(Object(r.a)({},e.lastResult),{errors:t.graphQLErrors,networkStatus:i.error,loading:!1})),x(e.observers,"error",e.lastError=t)};t.observeQuery(n,this.options,{next:function(n){if(e.lastError||e.isDifferentFromLastResult(n)){var i=e.updateLastResult(n),r=e.options,o=r.query,s=r.variables,l=r.fetchPolicy;t.transform(o).hasClientExports?t.getLocalState().addExportedVariables(o,s).then((function(r){var s=e.variables;e.variables=e.options.variables=r,!n.loading&&i&&"cache-only"!==l&&t.transform(o).serverQuery&&!Object(a.a)(s,r)?e.refetch():x(e.observers,"next",n)})):x(e.observers,"next",n)}},error:o}).catch(o)},t.prototype.tearDownQuery=function(){var e=this.queryManager;this.isTornDown=!0,e.stopPollingQuery(this.queryId),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),e.removeObservableQuery(this.queryId),e.stopQuery(this.queryId),this.observers.clear()},t}(f);function b(e){}function x(e,t,n){var i=[];e.forEach((function(e){return e[t]&&i.push(e)})),i.forEach((function(e){return e[t](n)}))}function w(e){var t=e.options.fetchPolicy;Object(u.b)("cache-first"!==t&&"cache-only"!==t,3)}var _=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initMutation=function(e,t,n){this.store[e]={mutation:t,variables:n||{},loading:!0,error:null}},e.prototype.markMutationError=function(e,t){var n=this.store[e];n&&(n.loading=!1,n.error=t)},e.prototype.markMutationResult=function(e){var t=this.store[e];t&&(t.loading=!1,t.error=null)},e.prototype.reset=function(){this.store={}},e}(),S=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initQuery=function(e){var t=this.store[e.queryId];Object(u.b)(!t||t.document===e.document||Object(a.a)(t.document,e.document),19);var n,r=!1,o=null;e.storePreviousVariables&&t&&t.networkStatus!==i.loading&&(Object(a.a)(t.variables,e.variables)||(r=!0,o=t.variables)),n=r?i.setVariables:e.isPoll?i.poll:e.isRefetch?i.refetch:i.loading;var s=[];t&&t.graphQLErrors&&(s=t.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:o,networkError:null,graphQLErrors:s,networkStatus:n,metadata:e.metadata},"string"==typeof e.fetchMoreForQueryId&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=i.fetchMore)},e.prototype.markQueryResult=function(e,t,n){this.store&&this.store[e]&&(this.store[e].networkError=null,this.store[e].graphQLErrors=p(t.errors)?t.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=i.ready,"string"==typeof n&&this.store[n]&&(this.store[n].networkStatus=i.ready))},e.prototype.markQueryError=function(e,t,n){this.store&&this.store[e]&&(this.store[e].networkError=t,this.store[e].networkStatus=i.error,"string"==typeof n&&this.markQueryResultClient(n,!0))},e.prototype.markQueryResultClient=function(e,t){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,t&&(n.networkStatus=i.ready))},e.prototype.stopQuery=function(e){delete this.store[e]},e.prototype.reset=function(e){var t=this;Object.keys(this.store).forEach((function(n){e.indexOf(n)<0?t.stopQuery(n):t.store[n].networkStatus=i.loading}))},e}();var M=function(){function e(e){var t=e.cache,n=e.client,i=e.resolvers,r=e.fragmentMatcher;this.cache=t,n&&(this.client=n),i&&this.addResolvers(i),r&&this.setFragmentMatcher(r)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=Object(o.mergeDeep)(t.resolvers,e)})):this.resolvers=Object(o.mergeDeep)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,i=e.context,o=e.variables,a=e.onlyRunForcedResolvers,s=void 0!==a&&a;return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return t?[2,this.resolveDocument(t,n.data,i,o,this.fragmentMatcher,s).then((function(e){return Object(r.a)(Object(r.a)({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return Object(o.hasDirectives)(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return this.resolvers?Object(o.removeClientSetsFromDocument)(e):e},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.cache;return Object(r.a)(Object(r.a)({},e),{cache:t,getCacheKey:function(e){if(t.config)return t.config.dataIdFromObject(e);Object(u.b)(!1,6)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return Object(r.a)(Object(r.a)({},t),e.exportedVariables)}))]:[2,Object(r.a)({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return Object(h.visit)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return h.BREAK}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:Object(o.buildQueryFromSelectionSet)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,i,a,s){return void 0===n&&(n={}),void 0===i&&(i={}),void 0===a&&(a=function(){return!0}),void 0===s&&(s=!1),Object(r.b)(this,void 0,void 0,(function(){var l,c,u,h,d,f,p,m,v;return Object(r.d)(this,(function(g){var y;return l=Object(o.getMainDefinition)(e),c=Object(o.getFragmentDefinitions)(e),u=Object(o.createFragmentMap)(c),h=l.operation,d=h?(y=h).charAt(0).toUpperCase()+y.slice(1):"Query",p=(f=this).cache,m=f.client,v={fragmentMap:u,context:Object(r.a)(Object(r.a)({},n),{cache:p,client:m}),variables:i,fragmentMatcher:a,defaultOperationType:d,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(l.selectionSet,t,v).then((function(e){return{result:e,exportedVariables:v.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var i,a,s,l,c,h=this;return Object(r.d)(this,(function(d){return i=n.fragmentMap,a=n.context,s=n.variables,l=[t],c=function(e){return Object(r.b)(h,void 0,void 0,(function(){var c,h;return Object(r.d)(this,(function(r){return Object(o.shouldInclude)(e,s)?Object(o.isField)(e)?[2,this.resolveField(e,t,n).then((function(t){var n;void 0!==t&&l.push(((n={})[Object(o.resultKeyNameFromField)(e)]=t,n))}))]:(Object(o.isInlineFragment)(e)?c=e:(c=i[e.name.value],Object(u.b)(c,7)),c&&c.typeCondition&&(h=c.typeCondition.name.value,n.fragmentMatcher(t,h,a))?[2,this.resolveSelectionSet(c.selectionSet,t,n).then((function(e){l.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(c)).then((function(){return Object(o.mergeDeepArray)(l)}))]}))}))},e.prototype.resolveField=function(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var i,a,s,l,c,u,h,d,f,p=this;return Object(r.d)(this,(function(r){return i=n.variables,a=e.name.value,s=Object(o.resultKeyNameFromField)(e),l=a!==s,c=t[s]||t[a],u=Promise.resolve(c),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(h=t.__typename||n.defaultOperationType,(d=this.resolvers&&this.resolvers[h])&&(f=d[l?a:s])&&(u=Promise.resolve(f(t,Object(o.argumentsObjectFromField)(e,i),n.context,{field:e,fragmentMap:n.fragmentMap})))),[2,u.then((function(t){return void 0===t&&(t=c),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(n.exportedVariables[e.value.value]=t)}))})),e.selectionSet?null==t?t:Array.isArray(t)?p.resolveSubSelectedArray(e,t,n):e.selectionSet?p.resolveSelectionSet(e.selectionSet,t,n):void 0:t}))]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n){var i=this;return Promise.all(t.map((function(t){return null===t?null:Array.isArray(t)?i.resolveSubSelectedArray(e,t,n):e.selectionSet?i.resolveSelectionSet(e.selectionSet,t,n):void 0})))},e}();function T(e){var t=new Set,n=null;return new f((function(i){return t.add(i),n=n||e.subscribe({next:function(e){t.forEach((function(t){return t.next&&t.next(e)}))},error:function(e){t.forEach((function(t){return t.error&&t.error(e)}))},complete:function(){t.forEach((function(e){return e.complete&&e.complete()}))}}),function(){t.delete(i)&&!t.size&&n&&(n.unsubscribe(),n=null)}}))}var E=Object.prototype.hasOwnProperty,C=function(){function e(e){var t=e.link,n=e.queryDeduplication,i=void 0!==n&&n,r=e.store,a=e.onBroadcast,s=void 0===a?function(){}:a,l=e.ssrMode,c=void 0!==l&&l,u=e.clientAwareness,h=void 0===u?{}:u,d=e.localState,f=e.assumeImmutableResults;this.mutationStore=new _,this.queryStore=new S,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(o.canUseWeakMap?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=t,this.queryDeduplication=i,this.dataStore=r,this.onBroadcast=s,this.clientAwareness=h,this.localState=d||new M({cache:r.getCache()}),this.ssrMode=c,this.assumeImmutableResults=!!f}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.fetchQueryRejectFns.forEach((function(e){e(new u.a(8))}))},e.prototype.mutate=function(e){var t=e.mutation,n=e.variables,i=e.optimisticResponse,a=e.updateQueries,s=e.refetchQueries,l=void 0===s?[]:s,c=e.awaitRefetchQueries,h=void 0!==c&&c,d=e.update,f=e.errorPolicy,m=void 0===f?"none":f,v=e.fetchPolicy,y=e.context,b=void 0===y?{}:y;return Object(r.b)(this,void 0,void 0,(function(){var e,s,c,f=this;return Object(r.d)(this,(function(y){switch(y.label){case 0:return Object(u.b)(t,9),Object(u.b)(!v||"no-cache"===v,10),e=this.generateQueryId(),t=this.transform(t).document,this.setQuery(e,(function(){return{document:t}})),n=this.getVariables(t,n),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,n,b)]:[3,2];case 1:n=y.sent(),y.label=2;case 2:return s=function(){var e={};return a&&f.queries.forEach((function(t,n){var i=t.observableQuery;if(i){var r=i.queryName;r&&E.call(a,r)&&(e[n]={updater:a[r],query:f.queryStore.get(n)})}})),e},this.mutationStore.initMutation(e,t,n),this.dataStore.markMutationInit({mutationId:e,document:t,variables:n,updateQueries:s(),update:d,optimisticResponse:i}),this.broadcastQueries(),c=this,[2,new Promise((function(a,u){var f,y;c.getObservableFromLink(t,Object(r.a)(Object(r.a)({},b),{optimisticResponse:i}),n,!1).subscribe({next:function(i){Object(o.graphQLResultHasError)(i)&&"none"===m?y=new g({graphQLErrors:i.errors}):(c.mutationStore.markMutationResult(e),"no-cache"!==v&&c.dataStore.markMutationResult({mutationId:e,result:i,document:t,variables:n,updateQueries:s(),update:d}),f=i)},error:function(t){c.mutationStore.markMutationError(e,t),c.dataStore.markMutationComplete({mutationId:e,optimisticResponse:i}),c.broadcastQueries(),c.setQuery(e,(function(){return{document:null}})),u(new g({networkError:t}))},complete:function(){if(y&&c.mutationStore.markMutationError(e,y),c.dataStore.markMutationComplete({mutationId:e,optimisticResponse:i}),c.broadcastQueries(),y)u(y);else{"function"==typeof l&&(l=l(f));var t=[];p(l)&&l.forEach((function(e){if("string"==typeof e)c.queries.forEach((function(n){var i=n.observableQuery;i&&i.queryName===e&&t.push(i.refetch())}));else{var n={query:e.query,variables:e.variables,fetchPolicy:"network-only"};e.context&&(n.context=e.context),t.push(c.query(n))}})),Promise.all(h?t:[]).then((function(){c.setQuery(e,(function(){return{document:null}})),"ignore"===m&&f&&Object(o.graphQLResultHasError)(f)&&delete f.errors,a(f)}))}}})}))]}}))}))},e.prototype.fetchQuery=function(e,t,n,i){return Object(r.b)(this,void 0,void 0,(function(){var a,s,l,c,u,h,d,f,p,y,b,x,w,_,S,M,T,E,C=this;return Object(r.d)(this,(function(A){switch(A.label){case 0:return a=t.metadata,s=void 0===a?null:a,l=t.fetchPolicy,c=void 0===l?"cache-first":l,u=t.context,h=void 0===u?{}:u,d=this.transform(t.query).document,f=this.getVariables(d,t.variables),this.transform(d).hasClientExports?[4,this.localState.addExportedVariables(d,f,h)]:[3,2];case 1:f=A.sent(),A.label=2;case 2:if(t=Object(r.a)(Object(r.a)({},t),{variables:f}),b=y="network-only"===c||"no-cache"===c,y||(x=this.dataStore.getCache().diff({query:d,variables:f,returnPartialData:!0,optimistic:!1}),w=x.complete,_=x.result,b=!w||"cache-and-network"===c,p=_),S=b&&"cache-only"!==c&&"standby"!==c,Object(o.hasDirectives)(["live"],d)&&(S=!0),M=this.idCounter++,T="no-cache"!==c?this.updateQueryWatch(e,d,t):void 0,this.setQuery(e,(function(){return{document:d,lastRequestId:M,invalidated:!0,cancel:T}})),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:d,storePreviousVariables:S,variables:f,isPoll:n===v.poll,isRefetch:n===v.refetch,metadata:s,fetchMoreForQueryId:i}),this.broadcastQueries(),S){if(E=this.fetchRequest({requestId:M,queryId:e,document:d,options:t,fetchMoreForQueryId:i}).catch((function(t){throw m(t)?t:(M>=C.getQuery(e).lastRequestId&&(C.queryStore.markQueryError(e,t,i),C.invalidate(e),C.invalidate(i),C.broadcastQueries()),new g({networkError:t}))})),"cache-and-network"!==c)return[2,E];E.catch((function(){}))}return this.queryStore.markQueryResultClient(e,!S),this.invalidate(e),this.invalidate(i),this.transform(d).hasForcedResolvers?[2,this.localState.runResolvers({document:d,remoteResult:{data:p},context:h,variables:f,onlyRunForcedResolvers:!0}).then((function(n){return C.markQueryResult(e,n,t,i),C.broadcastQueries(),n}))]:(this.broadcastQueries(),[2,{data:p}])}}))}))},e.prototype.markQueryResult=function(e,t,n,i){var r=n.fetchPolicy,o=n.variables,a=n.errorPolicy;"no-cache"===r?this.setQuery(e,(function(){return{newData:{result:t.data,complete:!0}}})):this.dataStore.markQueryResult(t,this.getQuery(e).document,o,i,"ignore"===a||"all"===a)},e.prototype.queryListenerForObserver=function(e,t,n){var i=this;function r(e,t){if(n[e])try{n[e](t)}catch(e){}}return function(n,o){if(i.invalidate(e,!1),n){var a=i.getQuery(e),s=a.observableQuery,l=a.document,c=s?s.options.fetchPolicy:t.fetchPolicy;if("standby"!==c){var u=d(n.networkStatus),h=s&&s.getLastResult(),f=!(!h||h.networkStatus===n.networkStatus),m=t.returnPartialData||!o&&n.previousVariables||f&&t.notifyOnNetworkStatusChange||"cache-only"===c||"cache-and-network"===c;if(!u||m){var v=p(n.graphQLErrors),y=s&&s.options.errorPolicy||t.errorPolicy||"none";if("none"===y&&v||n.networkError)return r("error",new g({graphQLErrors:n.graphQLErrors,networkError:n.networkError}));try{var b=void 0,x=void 0;if(o)"no-cache"!==c&&"network-only"!==c&&i.setQuery(e,(function(){return{newData:null}})),b=o.result,x=!o.complete;else{var w=s&&s.getLastError(),_="none"!==y&&(w&&w.graphQLErrors)!==n.graphQLErrors;if(h&&h.data&&!_)b=h.data,x=!1;else{var S=i.dataStore.getCache().diff({query:l,variables:n.previousVariables||n.variables,returnPartialData:!0,optimistic:!0});b=S.result,x=!S.complete}}var M=x&&!(t.returnPartialData||"cache-only"===c),T={data:M?h&&h.data:b,loading:u,networkStatus:n.networkStatus,stale:M};"all"===y&&v&&(T.errors=n.graphQLErrors),r("next",T)}catch(e){r("error",new g({networkError:e}))}}}}}},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),r=Object(o.removeConnectionDirectiveFromDocument)(n.transformForLink(i)),a=this.localState.clientQuery(i),s=this.localState.serverQuery(r),l={document:i,hasClientExports:Object(o.hasClientExports)(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:a,serverQuery:s,defaultVars:Object(o.getDefaultValues)(Object(o.getOperationDefinition)(i))},c=function(e){e&&!t.has(e)&&t.set(e,l)};c(e),c(i),c(a),c(s)}return t.get(e)},e.prototype.getVariables=function(e,t){return Object(r.a)(Object(r.a)({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e,t){void 0===t&&(t=!0),Object(u.b)("standby"!==e.fetchPolicy,11),e.variables=this.getVariables(e.query,e.variables),void 0===e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var n=Object(r.a)({},e);return new y({queryManager:this,options:n,shouldSubscribe:t})},e.prototype.query=function(e){var t=this;return Object(u.b)(e.query,12),Object(u.b)("Document"===e.query.kind,13),Object(u.b)(!e.returnPartialData,14),Object(u.b)(!e.pollInterval,15),new Promise((function(n,i){var r=t.watchQuery(e,!1);t.fetchQueryRejectFns.set("query:"+r.queryId,i),r.result().then(n,i).then((function(){return t.fetchQueryRejectFns.delete("query:"+r.queryId)}))}))},e.prototype.generateQueryId=function(){return String(this.idCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},e.prototype.addQueryListener=function(e,t){this.setQuery(e,(function(e){return e.listeners.add(t),{invalidated:!1}}))},e.prototype.updateQueryWatch=function(e,t,n){var i=this,r=this.getQuery(e).cancel;r&&r();return this.dataStore.getCache().watch({query:t,variables:n.variables,optimistic:!0,previousResult:function(){var t=null,n=i.getQuery(e).observableQuery;if(n){var r=n.getLastResult();r&&(t=r.data)}return t},callback:function(t){i.setQuery(e,(function(){return{invalidated:!0,newData:t}}))}})},e.prototype.addObservableQuery=function(e,t){this.setQuery(e,(function(){return{observableQuery:t}}))},e.prototype.removeObservableQuery=function(e){var t=this.getQuery(e).cancel;this.setQuery(e,(function(){return{observableQuery:null}})),t&&t()},e.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach((function(e){e(new u.a(16))}));var e=[];return this.queries.forEach((function(t,n){t.observableQuery&&e.push(n)})),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},e.prototype.resetStore=function(){var e=this;return this.clearStore().then((function(){return e.reFetchObservableQueries()}))},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.queries.forEach((function(i,r){var o=i.observableQuery;if(o){var a=o.options.fetchPolicy;o.resetLastResults(),"cache-only"===a||!e&&"standby"===a||n.push(o.refetch()),t.setQuery(r,(function(){return{newData:null}})),t.invalidate(r)}})),this.broadcastQueries(),Promise.all(n)},e.prototype.observeQuery=function(e,t,n){return this.addQueryListener(e,this.queryListenerForObserver(e,t,n)),this.fetchQuery(e,t)},e.prototype.startQuery=function(e,t,n){return this.addQueryListener(e,n),this.fetchQuery(e,t).catch((function(){})),e},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,i=e.fetchPolicy,r=e.variables;n=this.transform(n).document,r=this.getVariables(n,r);var a=function(e){return t.getObservableFromLink(n,{},e,!1).map((function(r){if(i&&"no-cache"===i||(t.dataStore.markSubscriptionResult(r,n,e),t.broadcastQueries()),Object(o.graphQLResultHasError)(r))throw new g({graphQLErrors:r.errors});return r}))};if(this.transform(n).hasClientExports){var s=this.localState.addExportedVariables(n,r).then(a);return new f((function(e){var t=null;return s.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return a(r)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach((function(e){return e.unsubscribe()})),this.queries.delete(e)},e.prototype.getCurrentQueryResult=function(e,t){void 0===t&&(t=!0);var n=e.options,i=n.variables,r=n.query,o=n.fetchPolicy,a=n.returnPartialData,s=e.getLastResult(),l=this.getQuery(e.queryId).newData;if(l&&l.complete)return{data:l.result,partial:!1};if("no-cache"===o||"network-only"===o)return{data:void 0,partial:!1};var c=this.dataStore.getCache().diff({query:r,variables:i,previousResult:s?s.data:void 0,returnPartialData:!0,optimistic:t}),u=c.result,h=c.complete;return{data:h||a?u:void 0,partial:!h}},e.prototype.getQueryWithPreviousResult=function(e){var t;if("string"==typeof e){var n=this.getQuery(e).observableQuery;Object(u.b)(n,17),t=n}else t=e;var i=t.options,r=i.variables,o=i.query;return{previousResult:this.getCurrentQueryResult(t,!1).data,variables:r,document:o}},e.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach((function(t,n){t.invalidated&&t.listeners.forEach((function(i){i&&i(e.queryStore.get(n),t.newData)}))}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,i){var a,s=this;void 0===i&&(i=this.queryDeduplication);var c=this.transform(e).serverQuery;if(c){var u=this.inFlightLinkObservables,h=this.link,d={query:c,variables:n,operationName:Object(o.getOperationName)(c)||void 0,context:this.prepareContext(Object(r.a)(Object(r.a)({},t),{forceFetch:!i}))};if(t=d.context,i){var p=u.get(c)||new Map;u.set(c,p);var m=JSON.stringify(n);if(!(a=p.get(m))){p.set(m,a=T(Object(l.execute)(h,d)));var v=function(){p.delete(m),p.size||u.delete(c),g.unsubscribe()},g=a.subscribe({next:v,error:v,complete:v})}}else a=T(Object(l.execute)(h,d))}else a=f.of({data:{}}),t=this.prepareContext(t);var y=this.transform(e).clientQuery;return y&&(a=function(e,t){return new f((function(n){var i=n.next,r=n.error,o=n.complete,a=0,s=!1,l={next:function(e){++a,new Promise((function(n){n(t(e))})).then((function(e){--a,i&&i.call(n,e),s&&l.complete()}),(function(e){--a,r&&r.call(n,e)}))},error:function(e){r&&r.call(n,e)},complete:function(){s=!0,a||o&&o.call(n)}},c=e.subscribe(l);return function(){return c.unsubscribe()}}))}(a,(function(e){return s.localState.runResolvers({document:y,remoteResult:e,context:t,variables:n})}))),a},e.prototype.fetchRequest=function(e){var t,n,r=this,o=e.requestId,a=e.queryId,s=e.document,l=e.options,c=e.fetchMoreForQueryId,u=l.variables,h=l.errorPolicy,d=void 0===h?"none":h,f=l.fetchPolicy;return new Promise((function(e,h){var m=r.getObservableFromLink(s,l.context,u),v="fetchRequest:"+a;r.fetchQueryRejectFns.set(v,h);var y=function(){r.fetchQueryRejectFns.delete(v),r.setQuery(a,(function(e){e.subscriptions.delete(b)}))},b=m.map((function(e){if(o>=r.getQuery(a).lastRequestId&&(r.markQueryResult(a,e,l,c),r.queryStore.markQueryResult(a,e,c),r.invalidate(a),r.invalidate(c),r.broadcastQueries()),"none"===d&&p(e.errors))return h(new g({graphQLErrors:e.errors}));if("all"===d&&(n=e.errors),c||"no-cache"===f)t=e.data;else{var i=r.dataStore.getCache().diff({variables:u,query:s,optimistic:!1,returnPartialData:!0}),m=i.result;(i.complete||l.returnPartialData)&&(t=m)}})).subscribe({error:function(e){y(),h(e)},complete:function(){y(),e({data:t,errors:n,loading:!1,networkStatus:i.ready,stale:!1})}});r.setQuery(a,(function(e){e.subscriptions.add(b)}))}))},e.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},e.prototype.setQuery=function(e,t){var n=this.getQuery(e),i=Object(r.a)(Object(r.a)({},n),t(n));this.queries.set(e,i)},e.prototype.invalidate=function(e,t){void 0===t&&(t=!0),e&&this.setQuery(e,(function(){return{invalidated:t}}))},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return Object(r.a)(Object(r.a)({},t),{clientAwareness:this.clientAwareness})},e.prototype.checkInFlight=function(e){var t=this.queryStore.get(e);return t&&t.networkStatus!==i.ready&&t.networkStatus!==i.error},e.prototype.startPollingQuery=function(e,t,n){var i=this,o=e.pollInterval;if(Object(u.b)(o,18),!this.ssrMode){var a=this.pollingInfoByQueryId.get(t);a||this.pollingInfoByQueryId.set(t,a={}),a.interval=o,a.options=Object(r.a)(Object(r.a)({},e),{fetchPolicy:"network-only"});var s=function(){var e=i.pollingInfoByQueryId.get(t);e&&(i.checkInFlight(t)?l():i.fetchQuery(t,e.options,v.poll).then(l,l))},l=function(){var e=i.pollingInfoByQueryId.get(t);e&&(clearTimeout(e.timeout),e.timeout=setTimeout(s,e.interval))};n&&this.addQueryListener(t,n),l()}return t},e.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},e}(),A=function(){function e(e){this.cache=e}return e.prototype.getCache=function(){return this.cache},e.prototype.markQueryResult=function(e,t,n,i,r){void 0===r&&(r=!1);var a=!Object(o.graphQLResultHasError)(e);r&&Object(o.graphQLResultHasError)(e)&&e.data&&(a=!0),!i&&a&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:t,variables:n})},e.prototype.markSubscriptionResult=function(e,t,n){Object(o.graphQLResultHasError)(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:t,variables:n})},e.prototype.markMutationInit=function(e){var t,n=this;e.optimisticResponse&&(t="function"==typeof e.optimisticResponse?e.optimisticResponse(e.variables):e.optimisticResponse,this.cache.recordOptimisticTransaction((function(i){var r=n.cache;n.cache=i;try{n.markMutationResult({mutationId:e.mutationId,result:{data:t},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{n.cache=r}}),e.mutationId))},e.prototype.markMutationResult=function(e){var t=this;if(!Object(o.graphQLResultHasError)(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach((function(r){var a=i[r],s=a.query,l=a.updater,c=t.cache.diff({query:s.document,variables:s.variables,returnPartialData:!0,optimistic:!1}),u=c.result;if(c.complete){var h=Object(o.tryFunctionOrLogError)((function(){return l(u,{mutationResult:e.result,queryName:Object(o.getOperationName)(s.document)||void 0,queryVariables:s.variables})}));h&&n.push({result:h,dataId:"ROOT_QUERY",query:s.document,variables:s.variables})}})),this.cache.performTransaction((function(t){n.forEach((function(e){return t.write(e)}));var i=e.update;i&&Object(o.tryFunctionOrLogError)((function(){return i(t,e.result)}))}))}},e.prototype.markMutationComplete=function(e){var t=e.mutationId;e.optimisticResponse&&this.cache.removeOptimistic(t)},e.prototype.markUpdateQueryResult=function(e,t,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:t,query:e})},e.prototype.reset=function(){return this.cache.reset()},e}(),O=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,r=void 0!==i&&i,o=e.ssrForceFetchDelay,a=void 0===o?0:o,s=e.connectToDevTools,c=e.queryDeduplication,h=void 0===c||c,d=e.defaultOptions,f=e.assumeImmutableResults,p=void 0!==f&&f,m=e.resolvers,v=e.typeDefs,g=e.fragmentMatcher,y=e.name,b=e.version,x=e.link;if(!x&&m&&(x=l.ApolloLink.empty()),!x||!n)throw new u.a(4);this.link=x,this.cache=n,this.store=new A(n),this.disableNetworkFetches=r||a>0,this.queryDeduplication=h,this.defaultOptions=d||{},this.typeDefs=v,a&&setTimeout((function(){return t.disableNetworkFetches=!1}),a),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);void 0!==s&&(s&&"undefined"!=typeof window)&&(window.__APOLLO_CLIENT__=this),this.version="2.6.10",this.localState=new M({cache:n,client:this,resolvers:m,fragmentMatcher:g}),this.queryManager=new C({link:this.link,store:this.store,queryDeduplication:h,ssrMode:r,clientAwareness:{name:y,version:b},localState:this.localState,assumeImmutableResults:p,onBroadcast:function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.queryStore.getStore(),mutations:t.queryManager.mutationStore.getStore()},dataWithOptimisticResults:t.cache.extract(!0)})}})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Object(r.a)(Object(r.a)({},this.defaultOptions.watchQuery),e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=Object(r.a)(Object(r.a)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=Object(r.a)(Object(r.a)({},this.defaultOptions.query),e)),Object(u.b)("cache-and-network"!==e.fetchPolicy,5),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=Object(r.a)(Object(r.a)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Object(r.a)(Object(r.a)({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeData=function(e){var t=this.cache.writeData(e);return this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Object(l.execute)(this.link,e)},e.prototype.initQueryManager=function(){return this.queryManager},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e}();t.default=O},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var a=function(){return"function"==typeof Symbol},s=function(e){return a()&&Boolean(Symbol[e])},l=function(e){return s(e)?Symbol[e]:"@@"+e};a()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var c=l("iterator"),u=l("observable"),h=l("species");function d(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function f(e){var t=e.constructor;return void 0!==t&&null===(t=t[h])&&(t=void 0),void 0!==t?t:S}function p(e){return e instanceof S}function m(e){m.log?m.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(e){m(e)}}))}function g(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=d(t,"unsubscribe");n&&n.call(t)}}catch(e){m(e)}}function y(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function b(e,t,n){e._state="running";var i=e._observer;try{var r=d(i,t);switch(t){case"next":r&&r.call(i,n);break;case"error":if(y(e),!r)throw n;r.call(i,n);break;case"complete":y(e),r&&r.call(i)}}catch(e){m(e)}"closed"===e._state?g(e):"running"===e._state&&(e._state="ready")}function x(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(b(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void b(e,t,n);e._queue.push({type:t,value:n})}}var w=function(){function e(t,n){i(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var r=new _(this);try{this._cleanup=n.call(void 0,r)}catch(e){r.error(e)}"initializing"===this._state&&(this._state="ready")}return o(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(y(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),_=function(){function e(t){i(this,e),this._subscription=t}return o(e,[{key:"next",value:function(e){x(this._subscription,"next",e)}},{key:"error",value:function(e){x(this._subscription,"error",e)}},{key:"complete",value:function(){x(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),S=function(){function e(t){if(i(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return o(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,i){if("function"==typeof e)var r=t.subscribe({next:function(t){try{e(t,o)}catch(e){i(e),r.unsubscribe()}},error:i,complete:n});else i(new TypeError(e+" is not a function"));function o(){r.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(f(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(f(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=f(this),i=arguments.length>1,r=!1,o=arguments[1],a=o;return new n((function(n){return t.subscribe({next:function(t){var o=!r;if(r=!0,!o||i)try{a=e(a,t)}catch(e){return n.error(e)}else a=t},error:function(e){n.error(e)},complete:function(){if(!r&&!i)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(a),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=f(this);return new r((function(t){var i,o=0;return function e(a){i=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(i=void 0,t.complete()):e(r.from(n[o++]))}})}(e),function(){i&&(i.unsubscribe(),i=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=f(this);return new n((function(i){var r=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return i.error(e)}var o=n.from(t).subscribe({next:function(e){i.next(e)},error:function(e){i.error(e)},complete:function(){var e=r.indexOf(o);e>=0&&r.splice(e,1),a()}});r.push(o)},error:function(e){i.error(e)},complete:function(){a()}});function a(){o.closed&&0===r.length&&i.complete()}return function(){r.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:u,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var i=d(t,u);if(i){var r=i.call(t);if(Object(r)!==r)throw new TypeError(r+" is not an object");return p(r)&&r.constructor===n?r:new n((function(e){return r.subscribe(e)}))}if(s("iterator")&&(i=d(t,c)))return new n((function(e){v((function(){if(!e.closed){var n=!0,r=!1,o=void 0;try{for(var a,s=i.call(t)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(e.next(l),e.closed)return}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r="function"==typeof this?this:e;return new r((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:h,get:function(){return this}}]),e}();t.Observable=S,a()&&Object.defineProperty(S,Symbol("extensions"),{value:{symbol:u,hostReportError:m},configurable:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a(e,[])};var i,r=(i=n(200))&&i.__esModule?i:{default:i};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){switch(o(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),i=function(e){var t=e[String(r.default)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==i){var o=i.call(e);if(o!==e)return"string"==typeof o?o:a(o,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),i=e.length-n,r=[],o=0;o<n;++o)r.push(a(e[o],t));1===i?r.push("... 1 more item"):i>1&&r.push("... ".concat(i," more items"));return"["+r.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+a(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=function(e){return null!=e&&"string"==typeof e.kind},t.Token=t.Location=void 0;var i,r=(i=n(384))&&i.__esModule?i:{default:i};var o=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();t.Location=o,(0,r.default)(o);var a=function(){function e(e,t,n,i,r,o,a){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=a,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();t.Token=a,(0,r.default)(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prototype.toJSON;"function"==typeof t||(0,i.default)(0),e.prototype.inspect=t,r.default&&(e.prototype[r.default]=t)};var i=o(n(385)),r=o(n(200));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}},function(e,t,n){"use strict";function i(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function r(e){for(var t,n=!0,i=!0,r=0,o=null,a=0;a<e.length;++a)switch(e.charCodeAt(a)){case 13:10===e.charCodeAt(a+1)&&++a;case 10:n=!1,i=!0,r=0;break;case 9:case 32:++r;break;default:i&&!n&&(null===o||r<o)&&(o=r),i=!1}return null!==(t=o)&&void 0!==t?t:0}Object.defineProperty(t,"__esModule",{value:!0}),t.dedentBlockStringValue=function(e){var t=e.split(/\r\n|[\n\r]/g),n=r(e);if(0!==n)for(var o=1;o<t.length;o++)t[o]=t[o].slice(n);var a=0;for(;a<t.length&&i(t[a]);)++a;var s=t.length;for(;s>a&&i(t[s-1]);)--s;return t.slice(a,s).join("\n")},t.getBlockStringIndentation=r,t.printBlockString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===e.indexOf("\n"),r=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],a="\\"===e[e.length-1],s=!i||o||a||n,l="";!s||i&&r||(l+="\n"+t);l+=t?e.replace(/\n/g,"\n"+t):e,s&&(l+="\n");return'"""'+l.replace(/"""/g,'\\"""')+'"""'}},function(e,t,n){"use strict";n.r(t),n.d(t,"WebSocketLink",(function(){return a}));var i=n(4),r=n(34),o=n(147),a=function(e){function t(t){var n=e.call(this)||this;return t instanceof o.SubscriptionClient?n.subscriptionClient=t:n.subscriptionClient=new o.SubscriptionClient(t.uri,t.options,t.webSocketImpl),n}return Object(i.c)(t,e),t.prototype.request=function(e){return this.subscriptionClient.request(e)},t}(r.ApolloLink)},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},c.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||l(this,o);else{for(var s=0,c=[],u=a.length;s<u;s++)(a[s].fn!==t||i&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:l(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperationAST=function(e,t){for(var n=null,r=0,o=e.definitions;r<o.length;r++){var a,s=o[r];if(s.kind===i.Kind.OPERATION_DEFINITION)if(null==t){if(n)return null;n=s}else if((null===(a=s.name)||void 0===a?void 0:a.value)===t)return s}return n};var i=n(393)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Kind=void 0;var i=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});t.Kind=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRAPHQL_SUBSCRIPTIONS=t.GRAPHQL_WS=void 0;t.GRAPHQL_WS="graphql-ws";t.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WS_TIMEOUT=t.MIN_WS_TIMEOUT=void 0;t.MIN_WS_TIMEOUT=1e3;t.WS_TIMEOUT=3e4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){throw new Error("Static Class")}return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_CONNECTION_TERMINATE="connection_terminate",e.GQL_START="start",e.GQL_DATA="data",e.GQL_ERROR="error",e.GQL_COMPLETE="complete",e.GQL_STOP="stop",e.SUBSCRIPTION_START="subscription_start",e.SUBSCRIPTION_DATA="subscription_data",e.SUBSCRIPTION_SUCCESS="subscription_success",e.SUBSCRIPTION_FAIL="subscription_fail",e.SUBSCRIPTION_END="subscription_end",e.INIT="init",e.INIT_SUCCESS="init_success",e.INIT_FAIL="init_fail",e.KEEP_ALIVE="keepalive",e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(25)),r=c(n(24)),o=c(n(21)),a=n(46),s=n(0),l=n(127);function c(e){return e&&e.__esModule?e:{default:e}}t.default={mounted:function(){this.quickKeyConfig=a.AnimateKey},methods:{setQuickKeyConfig:function(e){var t={taxi:[],bus:[],cop:[],netcar:[],roadSide:[]};e.forEach((function(e){var n=e.type,i=e.carType,r=e.id,a=e.value[0].controlKey,s=a.ctrlKey,l=a.key,c={id:r,key:{ctrlKey:s,shiftKey:a.shiftKey,code:l}};if("side"===n)t.roadSide.push(c);else{var u=(0,o.default)(t).filter((function(e){return i.indexOf(e)>=0}));t[u].push(c)}})),this.quickKeyConfig=t,console.log("quickConfig",t)},addDefaultQuickCode:function(){var e=this;window.addEventListener("keydown",(function(t){if(27===t.keyCode&&e.resetNormal(),32===t.keyCode&&t.ctrlKey&&e.pcdObjList.forEach((function(e){e.visible=!e.visible})),32===t.keyCode&&(e.quotaLabelState=!e.quotaLabelState,(0,o.default)(e.quotaLabelMap).forEach((function(t){e.quotaLabelMap[t].visible=!e.quotaLabelMap[t].visible}))),80===t.keyCode&&t.ctrlKey)t.preventDefault(),e.runAnimation();else if(83===t.keyCode&&t.ctrlKey)t.preventDefault(),e.stopAnimation();else if(65===t.keyCode&&t.shiftKey){t.preventDefault(),e.animate&&e.animate.tween.stop();var n=a.AnimateVertices.Kexuecheng,i=new s.Vector3(753446.25,2566728.98,20),r=e.map.createAnimation(n,i,600);e.animate=r}else if(!t.shiftKey||97!==t.keyCode&&49!==t.keyCode){var l=e.getTypeAndId(t.keyCode,t.ctrlKey,t.shiftKey),c=l.carType,u=l.id;if(c&&u){if("home"===e.mode)return e.messageTimeout&&clearTimeout(e.messageTimeout),e.messageTimeout=setTimeout((function(){e.$message.info("请先进入区域，再使用功能快捷键")}),200),!1;if(t.preventDefault(),"roadside"===c){if("car"===e.mode)return e.$message.info("请先退出单车视角"),!1;e.goToSide(u)}else{switch(c){case"taxi":e.carType=1;break;case"bus":e.carType=2;break;case"cop":e.carType=3;break;case"netcar":e.carType=4}e.focusCar({vehicleId:u})}}}else{t.preventDefault(),e.animate&&e.animate.tween.stop();e.map.animationTo([113.350888,23.0971397,1707.34,68.6682,-.349,0],5e3,!0)}}))},runAnimation:function(){var e=this,t=this;t.intervalTime||(t.intervalTime=4e5),t.animate&&t.animate.tween.stop();var n=function(e){return new r.default((function(n,i){console.log("Animate zhishicheng");var r=new s.Vector3(760034.46,2582094.1,20),o=t.map.createAnimation(a.AnimateVertices.Zhishicheng,r,300);o.callback=function(e){t.Map.viewer.scene.view.position.copy(o.getPoint(e)),t.Map.viewer.scene.view.lookAt(r)},t.animate=o,e+=1e3*o.length/o.speed,o.completeCallback=function(){n(e)},o.tween.onStop((function(){i()}))}))},i=function(){new r.default((function(e,n){console.log("Animate gangzhou"),t.setRegionStatus(!0),t.editor.isVisibleModels(!1);var i=a.AnimateVertices.Guangzhoushi,r=new s.Vector3(750653.2,2564447,52),o=t.map.createAnimation(i,r,5e3);t.animate=o;var l=1e3*o.length/o.speed;o.completeCallback=function(){e(l)},o.tween.onStop((function(){n()}))})).then((function(e){return new r.default((function(n,i){console.log("Fly to kexuecheng"),t.setRegionStatus(!1),t.model="normal",t.setVisibleOfDistinctFlow(!0),t.initMode();var r=t.flyTo("kexuecheng",1e4);e+=21e3,t.animate=r,r.completeCallback=function(){setTimeout((function(){n(e)}),5e3)},r.tween.onStop((function(){i()}))}))})).then((function(e){return new r.default((function(n,i){console.log("Fly to shengwudao");var r=t.flyTo("shengwudao",1e4);e+=21e3,t.animate=r,r.completeCallback=function(){setTimeout((function(){n(e)}),5e3)},r.tween.onStop((function(){i()}))}))})).then((function(e){return function(e){return new r.default((function(n,i){console.log("Fly to zhishicheng");var r=t.flyTo("zhishicheng",1e4);e+=21e3,t.animate=r,r.completeCallback=function(){setTimeout((function(){n(e)}),1e4)},r.tween.onStop((function(){i()}))}))}(e)})).then((function(e){return n(e)})).then((function(t){return new r.default((function(n,i){console.log("Go to side"),e.goToSide(86),setTimeout((function(){n(t)}),5e4)}))})).then((function(e){return new r.default((function(n,i){console.log("back to zsc"),t.resetNormal(),setTimeout((function(){n(e)}),6e3)}))})).then((function(t){return new r.default((function(n,i){console.log("Focus on car"),e.getObj({type:"robotaxi",vehicleId:"HQEV576"}),setTimeout((function(){n(t)}),4e4)}))})).then((function(e){return new r.default((function(n,i){console.log("back to zsc"),t.resetNormal(),setTimeout((function(){n(e)}),6e3)}))})).then((function(t){return console.log("Focus on car"),new r.default((function(n,i){e.getObj({type:"robobus",vehicleId:"LC9LC20E7LBLA6093"}),setTimeout((function(){n(t)}),4e4)}))})).then((function(e){return new r.default((function(n,i){console.log("back to zsc"),t.resetNormal(),setTimeout((function(){n(e)}),6e3)}))})).then((function(t){return console.log("Focus on car"),new r.default((function(n,i){e.getObj({type:"robocop",vehicleId:"HQEV583"}),setTimeout((function(){n(t)}),4e4)}))})).then((function(e){return new r.default((function(n,i){console.log("back to zsc"),t.resetNormal(),setTimeout((function(){n(e)}),6e3)}))})).then((function(e){return n(e)})).catch((function(e){console.error(e)}))};t.interval=setInterval((function(){i()}),t.intervalTime),i()},getIdByKey:function(e,t,n,i){var r=String.fromCharCode(t).toLowerCase(),o=e.key,a=o.code,s=o.ctrlKey,l=o.shiftKey;return!!(r===String(a).toLowerCase()&&n===s&&i===l)&&e.id},getTypeAndId:function(e,t,n){for(var i in this.quickKeyConfig)for(var r=this.quickKeyConfig[i],o=0;o<r.length;o++){var a=r[o],s=this.getIdByKey(a,e,t,n);if(s)return{carType:i.toLowerCase(),id:s}}return{carType:null,id:null}},connectControl:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];(0,l.connectControl)(e,t,o).then((function(e){var t=e.ws,o=e.connect;n.controlWs=t;var s=n;o.onmessage=function(e){var t=e.data;if("ok"===t)return!1;var n=JSON.parse(t);if(!n.action)return!1;s.$emit("control",n);var o=n.action,l=n.type,c=n.id,u=n.value;if("focus"===o&&r)switch(l){case"car":s.focusCar({vehicleId:c});break;case"side":s.goToSide(c);break;case"event":s.focusEvent(c),s.mode="copEvent";break;case"area":var h=(0,i.default)(s.diamondInfoMap[c].position,2),d=h[0],f=h[1];s.setActiveArea(c,[d,f]);break;case"camera":var p=a.cameraParamsMap[c];s.setCameraView(p)}else if("view_change"===o)switch(l){case"rotate":s.Map.viewer.scene.view.rotate(Math.PI/180*u,0);break;case"zoomIn":s.map.zoomIn();break;case"zoomOut":s.map.zoomOut();break;case"crosswise":s.Map.viewer.scene.view.pan(2*u,0);break;case"lengthways":s.Map.viewer.scene.view.pan(0,2*u);break;case"pitch":s.Map.viewer.scene.view.rotate(0,Math.PI/180*u)}else if("page"===o)switch(l){case"reload":window.location.reload()}}}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,o,a=g(n(24)),s=g(n(13)),l=g(n(21)),c=g(n(62)),u=g(n(38)),h=g(n(39)),d=n(40),f=n(64),p=n(79),m=n(17),v=n(0);function g(e){return e&&e.__esModule?e:{default:e}}t.default={methods:{connectSignalWs:(o=(0,h.default)(u.default.mark((function e(t){var n,i,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.ServiceConfig.signalPath,i=this.getWsUrl(n),this.signalWs=new f.Ws,this.lampsBuffer=[],this.lampsMapBuffer={},r=this,e.next=8,this.signalWs.connect(i,{crossid:t});case 8:e.sent.onmessage=function(e){var t=e.data;r.formatLampsData(t)};case 10:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),connectSignal:(r=(0,h.default)(u.default.mark((function e(){var t,n,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ServiceConfig.signalPath,n=this.getWsUrl(t),this.signalConnectContract=new f.Ws,i=this,this.lampsBuffer=[],this.lampsMapBuffer={},e.next=8,this.signalConnectContract.connect(n);case 8:this.signalConnect=e.sent,this.signalConnectContract.bindObj={obj:this,key:"signalConnect"},this.signalConnect.onmessage=function(e){var t=e.data;if(this.bindObj=i.signalConnect,"ok"!==t&&""!==t.trim()){var n=JSON.parse(t);n.offlineCrossIds,n.onlineInfos.forEach((function(e){i.formatLampsData((0,c.default)(e))}))}};case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),formatLampsData:function(e){var t=this,n=JSON.parse(e);if(!n)return console.warn("无效红绿灯数据",e),!1;var i=n.lampRealInfos,r=n.signalMachineStamp,o=n.crossId,a={};if(i.forEach((function(e){var t=e.phaseId,n=e.lampStatus,i=e.countDown,r=e.lampId,o=(0,p.getRoadFlowDirection)(Number(t)),s=(0,p.getSignalColorString)(Number(n));if("others"!==s){var l=void 0;l=i<10?"0"+i:i>99?99:i,a[r]={num:l,type:""+s+o}}})),this.lampsMapBuffer[o]){var c=!0,u=this.lampsMapBuffer[o].buffer,h=u[u.length-1];"44011200053"!==o&&(c=(0,l.default)(a).some((function(e){return!h[e]||a[e].num!==h[e].num||a[e].type!==h[e].type}))),a.render=c,this.lampsMapBuffer[o].buffer.push(a)}else a.render=!0,this.lampsMapBuffer[o]={startTime:r,buffer:[a]};var d=this.lampsMapBuffer[o],f=d.startTime,m=d.buffer;if(r-f>this.delay){var v=m[0];v.render&&(0,l.default)(v).forEach((function(e){"render"!==e&&t.updateTrafficLight((0,s.default)({id:e},v[e]))})),this.lampsMapBuffer[o].buffer.splice(0,1)}},fetchLights:(i=(0,h.default)(u.default.mark((function e(t){var n,i,r,o,a,s,l=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.ServiceConfig,i=n.ip,r=n.lampsPath,o=n.ssl,a=this.getUrl(i,r,o),!(s=window.localStorage.getItem("lights-"+t))){e.next=7;break}this.setDefaultLights(JSON.parse(s),h),e.next=9;break;case 7:return e.next=9,(0,d.get)(a+"?crossid="+t).then((function(e){var n=e.code,i=e.data.lamps;0===Number(n)&&i&&(window.localStorage.setItem("lights-"+t,(0,c.default)(i)),l.setDefaultLights(i,h))}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)}),setTrafficLightZ:function(e){this.trafficLightZ=e},setDefaultLights:function(e,t){var n=this;this.lampsMap||(this.lampsMap={}),e.forEach((function(e){var i=e.lampIds,r=e.poleLat,o=e.poleLon;i.sort((function(e,t){return(0,p.sortRoadFlowDirection)(e,t)})),i.forEach((function(e,i){var a=e.lampId,l=e.phaseId,c="/maptv/img/signal/gray"+(0,p.getRoadFlowDirection)(Number(l))+".png";if(!n.lampsMap[a]){n.lampsMap[a]=!0;var u=m.Utils.transformWGS84ToUTM({x:o,y:r}),h=u.x,d=u.y;n.drawTrafficLight("00","gray",c).then((function(e){var r=e.canvas,o=e.config,l=e.textCanvas,c=new m.Label((0,s.default)({name:a,mainView:r,factor:o.factor,scaleNum:.05,center:{x:.147,y:0}},t));c.position.set(h,d,t.z||n.trafficLightZ),n.Map.viewer.scene.addTrafficLight(c),c.sprite.center.x=.5+1.2*i,c.material.sizeAttenuation=t.sizeAttenuation||!1,c.update(l,[0,0,20,40])}))}}))}))},removeLights:function(e){var t=this;this.roadLampsMap[e]&&(console.log("移除灯"),this.roadLampsMap[e].forEach((function(e){t.Map.viewer.scene.removeTrafficLight(e)})))},drawTrafficLight:function(e,t,n){var i=document.createElement("canvas"),r=v.MathUtils.ceilPowerOfTwo(20),o=v.MathUtils.ceilPowerOfTwo(40),a={width:r,height:o,factor:{x:r/20,y:o/40}};return this.trafficLightConfig=a,i.width=r,i.height=o,this.$refs.map.drawRect(i,{x:0,y:0,width:r,height:o,fillColor:"rgba(0, 10, 32, 0.7)",border:{radius:2*a.factor.x,width:1,color:"rgba(0, 10, 32, 0.7)"}}),this.setTrafficLightNum("00",t,n,a).then((function(e){return{canvas:i,config:a,textCanvas:e}}))},setTrafficLightNum:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.width,s=r.height,l=document.createElement("canvas");l.width=o,l.height=s;var c=l.getContext("2d");c.clearRect(0,0,o,s),c.font="12px PingFangSC-Medium";var u=c.measureText(e);if(c.textAlign="center",c.textBaseline="top",c.font=12*r.factor.y+"px DINAlternate-Bold",c.fillStyle=t,c.fillText(e,10*r.factor.x,21.5*r.factor.y,u.width*r.factor.x),this.trafficLightIconMap[n]){var h=this.trafficLightIconMap[n];return new a.default((function(e){c.drawImage(h,5*r.factor.x,6.5*r.factor.y,10*r.factor.x,10*r.factor.y),e(l)}))}var d=this.loadImg(n);return d.then((function(e){return i.trafficLightIconMap[n]=e,c.drawImage(e,5*r.factor.x,6.5*r.factor.y,10*r.factor.x,10*r.factor.y),l}))},updateTrafficLight:function(e){var t=e.id,n=e.num,i=e.type,r=window.viewer.scene.getObjectByName(t),o="/maptv/img/signal/"+i+".png",a=null;o.indexOf("gray")>1?a="gray":o.indexOf("green")>1?a="#0EC775":o.indexOf("red")>1?a="#FF6060":o.indexOf("yellow")>1&&(a="#FDCB44"),this.trafficLightConfig&&this.setTrafficLightNum(n+"",a,o,this.trafficLightConfig).then((function(e){r&&r.update(e,[0,0,20,40])}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(25),o=(i=r)&&i.__esModule?i:{default:i},a=n(17),s=n(0);t.default={methods:{showRain:function(e){var t=this.Map.viewer.scene.getObjectByName("ambientLight");e?(a.Utils.turnOnWeather(this.Map.viewer,"rain",""),this.addSkyBox("./assets/image/SkyBox/rainSnow/")):(a.Utils.turnOffWeather(this.Map.viewer,"rain",""),this.addSkyBox("./assets/image/SkyBox/blue/")),this.Map.viewer.scene.directionalLight.visible=!e,t&&(t.intensity=e?.5:1)},showSnow:function(e,t){var n=(0,o.default)(e,3);n[0],n[1],n[2];t?(this.addSkyBox("./assets/image/SkyBox/rainSnow/"),a.Utils.turnOnWeather(this.Map.viewer,"snow","")):(this.addSkyBox("./assets/image/SkyBox/blue/"),a.Utils.turnOffWeather(this.Map.viewer,"snow","")),this.Map.viewer.scene.directionalLight.visible=!t},changeLights:function(e,t){!e&&this.editor2.closeLight(!1),this.editor2.openLight(e)},showFog:function(e,t){var n=this.Map.viewer.scene.getObjectByName("ambientLight");e?(this.sky=this.editor2.addBoxSky(t),this.sky.position.set(t.offset[0],t.offset[1],t.offset[2]),this.Map.viewer.scene.scene.add(this.sky),this.Map.viewer.scene.scene.fog=new s.Fog("#1B1B1B",50,500)):(this.sky&&this.Map.viewer.scene.scene.remove(this.sky),a.Utils.turnOffWeather(this.Map.viewer,"fog",""),this.Map.viewer.scene.scene.fog=null),this.Map.viewer.scene.directionalLight.visible=!e,n&&(n.intensity=e?.5:1)},addSkyBox:function(e){var t=e;this.Map.viewer.background="skybox",this.Map.viewer.scene.loadSkyBox(t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(n(13)),r=v(n(198)),o=(0,r.default)(["\n                query deviceQuery($x: [Float!]!, $y: [Float!]!, $coordtype: String!, $zone: Float!) {\n                    GetDeviceInfoByXY(x: $x, y: $y, coordtype: $coordtype, zone: $zone) {\n                        stackNum\n                        x\n                        y\n                        z\n                    }\n                }\n            "],["\n                query deviceQuery($x: [Float!]!, $y: [Float!]!, $coordtype: String!, $zone: Float!) {\n                    GetDeviceInfoByXY(x: $x, y: $y, coordtype: $coordtype, zone: $zone) {\n                        stackNum\n                        x\n                        y\n                        z\n                    }\n                }\n            "]),a=(0,r.default)(["\n                query deviceQuery($stakeNumber: String!, $direction: Float!, $coordtype: String!) {\n                    TgisStakeLocationMap(stakeNumber: $stakeNumber, direction: $direction, coordtype: $coordtype) {\n                        longitude\n                        latitude\n                        coordtype\n                    }\n                }\n            "],["\n                query deviceQuery($stakeNumber: String!, $direction: Float!, $coordtype: String!) {\n                    TgisStakeLocationMap(stakeNumber: $stakeNumber, direction: $direction, coordtype: $coordtype) {\n                        longitude\n                        latitude\n                        coordtype\n                    }\n                }\n            "]),s=(0,r.default)(["\n                query deviceQuery($uuid: Float!) {\n                    Tgis3dbuildAssetsInfo(uuid: $uuid) {\n                        id\n                        uuid\n                        project_id\n                        device_type\n                        x\n                        y\n                        z\n                        stake_number\n                        name\n                        rotate_x\n                        rotate_y\n                        rotate_z\n                        scale\n                        is_tips\n                        is_visble\n                        is_click\n                        class_type\n                        lod_max\n                        lod_min\n                        path\n                        image\n                        opacity\n                        text\n                    }\n                }\n            "],["\n                query deviceQuery($uuid: Float!) {\n                    Tgis3dbuildAssetsInfo(uuid: $uuid) {\n                        id\n                        uuid\n                        project_id\n                        device_type\n                        x\n                        y\n                        z\n                        stake_number\n                        name\n                        rotate_x\n                        rotate_y\n                        rotate_z\n                        scale\n                        is_tips\n                        is_visble\n                        is_click\n                        class_type\n                        lod_max\n                        lod_min\n                        path\n                        image\n                        opacity\n                        text\n                    }\n                }\n            "]),l=(0,r.default)(["\n                query deviceQuery($startStakeNumber: String!, $endStartNumer: String!, $deviceType: Float!) {\n                    Tgis3dbuildAssetsInfo(\n                        startStakeNumber: $startStakeNumber\n                        endStartNumer: $endStartNumer\n                        deviceType: $deviceType\n                    ) {\n                        id\n                        uuid\n                        project_id\n                        device_type\n                        x\n                        y\n                        z\n                        stake_number\n                        name\n                        rotate_x\n                        rotate_y\n                        rotate_z\n                        scale\n                        is_tips\n                        is_visble\n                        is_click\n                        class_type\n                        lod_max\n                        lod_min\n                        path\n                        image\n                        opacity\n                        text\n                    }\n                }\n            "],["\n                query deviceQuery($startStakeNumber: String!, $endStartNumer: String!, $deviceType: Float!) {\n                    Tgis3dbuildAssetsInfo(\n                        startStakeNumber: $startStakeNumber\n                        endStartNumer: $endStartNumer\n                        deviceType: $deviceType\n                    ) {\n                        id\n                        uuid\n                        project_id\n                        device_type\n                        x\n                        y\n                        z\n                        stake_number\n                        name\n                        rotate_x\n                        rotate_y\n                        rotate_z\n                        scale\n                        is_tips\n                        is_visble\n                        is_click\n                        class_type\n                        lod_max\n                        lod_min\n                        path\n                        image\n                        opacity\n                        text\n                    }\n                }\n            "]),c=(0,r.default)(["\n                query devicesQuery($x: Float!, $y: Float!, $radius: Float!, $coordtype: String!, $zone: Float!) {\n                    GetDeviceInfoByCoordinates(x: $x, y: $y, radius: $radius, coordtype: $coordtype, zone: $zone) {\n                        id\n                        uuid\n                        project_id\n                        device_type\n                        device_location\n                        x\n                        y\n                        z\n                        stake_number\n                        name\n                        rotate_x\n                        rotate_y\n                        rotate_z\n                        scale\n                        is_tips\n                        is_visble\n                        is_click\n                        is_bloom\n                        class_type\n                        lod_max\n                        lod_min\n                        path\n                        image\n                        opacity\n                        text\n                        status\n                        model_info\n                        children {\n                            device_name\n                            uuid\n                            status,\n                            value\n                        }\n                    }\n                }\n            "],["\n                query devicesQuery($x: Float!, $y: Float!, $radius: Float!, $coordtype: String!, $zone: Float!) {\n                    GetDeviceInfoByCoordinates(x: $x, y: $y, radius: $radius, coordtype: $coordtype, zone: $zone) {\n                        id\n                        uuid\n                        project_id\n                        device_type\n                        device_location\n                        x\n                        y\n                        z\n                        stake_number\n                        name\n                        rotate_x\n                        rotate_y\n                        rotate_z\n                        scale\n                        is_tips\n                        is_visble\n                        is_click\n                        is_bloom\n                        class_type\n                        lod_max\n                        lod_min\n                        path\n                        image\n                        opacity\n                        text\n                        status\n                        model_info\n                        children {\n                            device_name\n                            uuid\n                            status,\n                            value\n                        }\n                    }\n                }\n            "]),u=(0,r.default)(["\n                query modelFilesQuery($ProjectID: Int!) {\n                    TgisFilesInfo(ProjectID: $ProjectID) {\n                        file_name\n                        model_name\n                        test_url\n                        online_url\n                    }\n                }\n            "],["\n                query modelFilesQuery($ProjectID: Int!) {\n                    TgisFilesInfo(ProjectID: $ProjectID) {\n                        file_name\n                        model_name\n                        test_url\n                        online_url\n                    }\n                }\n            "]),h=(0,r.default)(["\n                subscription TunnelInfo {\n                    TunnelInfo {\n                        tunnelId\n                        tunnelExternalId\n                        tunnelName\n                        timestamp\n                        eventsInfo {\n                            alarmTypeCode\n                            alarmId\n                            alarmTypeName\n                        }\n                        message {\n                            deviceId\n                            directionName\n                            direction\n                            deviceName\n                            level\n                            type\n                            currentValue\n                            currentState\n                            switchState\n                            image\n                        }\n                    }\n                }\n            "],["\n                subscription TunnelInfo {\n                    TunnelInfo {\n                        tunnelId\n                        tunnelExternalId\n                        tunnelName\n                        timestamp\n                        eventsInfo {\n                            alarmTypeCode\n                            alarmId\n                            alarmTypeName\n                        }\n                        message {\n                            deviceId\n                            directionName\n                            direction\n                            deviceName\n                            level\n                            type\n                            currentValue\n                            currentState\n                            switchState\n                            image\n                        }\n                    }\n                }\n            "]),d=(0,r.default)(["\n                query Get3dbuildAssetsOnce($searchType: Int!, $deviceType: [Int!]) {\n                    Get3dbuildAssetsOnce(searchType: $searchType, deviceType: $deviceType) {\n                        uuid,\n                        x,\n                        y,\n                        model_info,\n                        device_type,\n                        children {\n                            device_name,\n                            uuid,\n                            status,\n                            value\n                        }\n                    }\n                }\n            "],["\n                query Get3dbuildAssetsOnce($searchType: Int!, $deviceType: [Int!]) {\n                    Get3dbuildAssetsOnce(searchType: $searchType, deviceType: $deviceType) {\n                        uuid,\n                        x,\n                        y,\n                        model_info,\n                        device_type,\n                        children {\n                            device_name,\n                            uuid,\n                            status,\n                            value\n                        }\n                    }\n                }\n            "]),f=v(n(199)),p=v(n(212)),m=v(n(201));function v(e){return e&&e.__esModule?e:{default:e}}t.default={mounted:function(){},methods:{addActiveServeLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"180.76.60.136:9003",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];this.gisServer=(0,f.default)(e,t,n)},getDeviceInfoByXY:function(e,t){var n=(0,p.default)(o);return this.gisServer.query({query:n,variables:{x:[e],y:[t],coordtype:"WGS84",zone:50}}).then((function(e){var t=e.data.GetDeviceInfoByXY;return console.log("stackList",t),t}))},getPositionByDevice:function(){var e=(0,p.default)(a);this.gisServer.query({query:e,variables:{stakeNumber:"K96+0",direction:0,coordtype:"wgs84"}}).then((function(e){var t=e.data.TgisStakeLocationMap;console.log("stackList",t)}))},getDeviceInfoById:function(){var e=(0,p.default)(s);this.gisServer.query({query:e,variables:{uuid:200006}}).then((function(e){var t=e.data.Tgis3dbuildAssetsInfo;console.log("stackList",t)}))},getDeviceInfoByRange:function(){var e=(0,p.default)(l);this.gisServer.query({query:e,variables:{startStakeNumber:"K78+200",endStartNumer:"k78+900",deviceType:1}}).then((function(e){var t=e.data.Tgis3dbuildAssetsInfo;console.log("stackList",t)}))},getDeviceInfoByArea:function(e){var t=e.x,n=e.y,i=e.radius,r=e.zone,o=(0,p.default)(c);return this.gisServer.query({query:o,variables:{x:t,y:n,radius:i||1e3,coordtype:"WGS84",zone:r||50}}).then((function(e){return e.data.GetDeviceInfoByCoordinates.map((function(e){return m.default.camelizeKeys(e)}))}))},getModelList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10036,t=(0,p.default)(u);return this.gisServer.query({query:t,variables:{ProjectID:e}}).then((function(e){var t=e.data.TgisFilesInfo;return m.default.camelizeKeys(t)}))},subscribeTunnelInfo:function(){var e=(0,p.default)(h);this.gisServer.subscribe({query:e,variables:{}}).subscribe({next:function(e){var t=e.data;this.$emit("tunnelSubscribe",t.TunnelInfo)},error:function(e){console.error(e)}})},getDeviceInfoByType:function(e){var t=(0,p.default)(d);return this.gisServer.query({query:t,variables:(0,i.default)({},e)}).then((function(e){var t=e.data;console.log(t)}))}}}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/aca72b64.png"},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(403),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(54))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,a,s,l=1,c={},u=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){o.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[l]=r,i(l),l++},d.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(54),n(59))},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=45)}([function(e,t){e.exports=n(405)},function(e,t){e.exports=n(52)},function(e,t){e.exports=n(44)},function(e,t){e.exports=n(61)},function(e,t){e.exports=n(130)},function(e,t){e.exports=n(94)},function(e,t){e.exports=n(31)},function(e,t){e.exports=n(95)},function(e,t){e.exports=n(132)},function(e,t){e.exports=n(205)},function(e,t){e.exports=n(206)},function(e,t){e.exports=n(93)},function(e,t){e.exports=n(411)},function(e,t){e.exports=n(133)},function(e,t){e.exports=n(204)},function(e,t){e.exports=n(97)},function(e,t){e.exports=n(207)},function(e,t){e.exports=n(135)},function(e,t){e.exports=n(203)},function(e,t){e.exports=n(96)},function(e,t){e.exports=n(202)},function(e,t){e.exports=n(413)},function(e,t){e.exports=n(136)},function(e,t){e.exports=n(414)},function(e,t){e.exports=n(208)},function(e,t){e.exports=n(134)},function(e,t){e.exports=n(415)},function(e,t){e.exports=n(137)},function(e,t){e.exports=n(138)},function(e,t){e.exports=n(416)},function(e,t){e.exports=n(209)},function(e,t){e.exports=n(131)},function(e,t){e.exports=n(417)},function(e,t){e.exports=n(418)},function(e,t){e.exports=n(419)},function(e,t){e.exports=n(420)},function(e,t){e.exports=n(421)},function(e,t){e.exports=n(422)},function(e,t){e.exports=n(423)},function(e,t){e.exports=n(428)},function(e,t){e.exports=n(439)},function(e,t){e.exports=n(429)},function(e,t){e.exports=n(430)},function(e,t){e.exports=n(210)},function(e,t){e.exports=n(431)},function(e,t,n){e.exports=n(46)},function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"el-pager",on:{click:e.onPagerClick}},[e.pageCount>0?n("li",{staticClass:"number",class:{active:1===e.currentPage,disabled:e.disabled}},[e._v("1")]):e._e(),e.showPrevMore?n("li",{staticClass:"el-icon more btn-quickprev",class:[e.quickprevIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("left")},mouseleave:function(t){e.quickprevIconClass="el-icon-more"}}}):e._e(),e._l(e.pagers,(function(t){return n("li",{key:t,staticClass:"number",class:{active:e.currentPage===t,disabled:e.disabled}},[e._v(e._s(t))])})),e.showNextMore?n("li",{staticClass:"el-icon more btn-quicknext",class:[e.quicknextIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("right")},mouseleave:function(t){e.quicknextIconClass="el-icon-more"}}}):e._e(),e.pageCount>1?n("li",{staticClass:"number",class:{active:e.currentPage===e.pageCount,disabled:e.disabled}},[e._v(e._s(e.pageCount))]):e._e()],2)};function r(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}i._withStripped=!0;var o=r({name:"ElPager",props:{currentPage:Number,pageCount:Number,pagerCount:Number,disabled:Boolean},watch:{showPrevMore:function(e){e||(this.quickprevIconClass="el-icon-more")},showNextMore:function(e){e||(this.quicknextIconClass="el-icon-more")}},methods:{onPagerClick:function(e){var t=e.target;if("UL"!==t.tagName&&!this.disabled){var n=Number(e.target.textContent),i=this.pageCount,r=this.currentPage,o=this.pagerCount-2;-1!==t.className.indexOf("more")&&(-1!==t.className.indexOf("quickprev")?n=r-o:-1!==t.className.indexOf("quicknext")&&(n=r+o)),isNaN(n)||(n<1&&(n=1),n>i&&(n=i)),n!==r&&this.$emit("change",n)}},onMouseenter:function(e){this.disabled||("left"===e?this.quickprevIconClass="el-icon-d-arrow-left":this.quicknextIconClass="el-icon-d-arrow-right")}},computed:{pagers:function(){var e=this.pagerCount,t=(e-1)/2,n=Number(this.currentPage),i=Number(this.pageCount),r=!1,o=!1;i>e&&(n>e-t&&(r=!0),n<i-t&&(o=!0));var a=[];if(r&&!o)for(var s=i-(e-2);s<i;s++)a.push(s);else if(!r&&o)for(var l=2;l<e;l++)a.push(l);else if(r&&o)for(var c=Math.floor(e/2)-1,u=n-c;u<=n+c;u++)a.push(u);else for(var h=2;h<i;h++)a.push(h);return this.showPrevMore=r,this.showNextMore=o,a}},data:function(){return{current:null,showPrevMore:!1,showNextMore:!1,quicknextIconClass:"el-icon-more",quickprevIconClass:"el-icon-more"}}},i,[],!1,null,null,null);o.options.__file="packages/pagination/src/pager.vue";var a=o.exports,s=n(36),l=n.n(s),c=n(37),u=n.n(c),h=n(8),d=n.n(h),f=n(4),p=n.n(f),m=n(2),v={name:"ElPagination",props:{pageSize:{type:Number,default:10},small:Boolean,total:Number,pageCount:Number,pagerCount:{type:Number,validator:function(e){return(0|e)===e&&e>4&&e<22&&e%2==1},default:7},currentPage:{type:Number,default:1},layout:{default:"prev, pager, next, jumper, ->, total"},pageSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},popperClass:String,prevText:String,nextText:String,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean},data:function(){return{internalCurrentPage:1,internalPageSize:0,lastEmittedPage:-1,userChangePageSize:!1}},render:function(e){var t=this.layout;if(!t)return null;if(this.hideOnSinglePage&&(!this.internalPageCount||1===this.internalPageCount))return null;var n=e("div",{class:["el-pagination",{"is-background":this.background,"el-pagination--small":this.small}]}),i={prev:e("prev"),jumper:e("jumper"),pager:e("pager",{attrs:{currentPage:this.internalCurrentPage,pageCount:this.internalPageCount,pagerCount:this.pagerCount,disabled:this.disabled},on:{change:this.handleCurrentChange}}),next:e("next"),sizes:e("sizes",{attrs:{pageSizes:this.pageSizes}}),slot:e("slot",[this.$slots.default?this.$slots.default:""]),total:e("total")},r=t.split(",").map((function(e){return e.trim()})),o=e("div",{class:"el-pagination__rightwrapper"}),a=!1;return n.children=n.children||[],o.children=o.children||[],r.forEach((function(e){"->"!==e?a?o.children.push(i[e]):n.children.push(i[e]):a=!0})),a&&n.children.unshift(o),n},components:{Prev:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage<=1},class:"btn-prev",on:{click:this.$parent.prev}},[this.$parent.prevText?e("span",[this.$parent.prevText]):e("i",{class:"el-icon el-icon-arrow-left"})])}},Next:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage===this.$parent.internalPageCount||0===this.$parent.internalPageCount},class:"btn-next",on:{click:this.$parent.next}},[this.$parent.nextText?e("span",[this.$parent.nextText]):e("i",{class:"el-icon el-icon-arrow-right"})])}},Sizes:{mixins:[p.a],props:{pageSizes:Array},watch:{pageSizes:{immediate:!0,handler:function(e,t){Object(m.valueEquals)(e,t)||Array.isArray(e)&&(this.$parent.internalPageSize=e.indexOf(this.$parent.pageSize)>-1?this.$parent.pageSize:this.pageSizes[0])}}},render:function(e){var t=this;return e("span",{class:"el-pagination__sizes"},[e("el-select",{attrs:{value:this.$parent.internalPageSize,popperClass:this.$parent.popperClass||"",size:"mini",disabled:this.$parent.disabled},on:{input:this.handleChange}},[this.pageSizes.map((function(n){return e("el-option",{attrs:{value:n,label:n+t.t("el.pagination.pagesize")}})}))])])},components:{ElSelect:l.a,ElOption:u.a},methods:{handleChange:function(e){e!==this.$parent.internalPageSize&&(this.$parent.internalPageSize=e=parseInt(e,10),this.$parent.userChangePageSize=!0,this.$parent.$emit("update:pageSize",e),this.$parent.$emit("size-change",e))}}},Jumper:{mixins:[p.a],components:{ElInput:d.a},data:function(){return{userInput:null}},watch:{"$parent.internalCurrentPage":function(){this.userInput=null}},methods:{handleKeyup:function(e){var t=e.keyCode,n=e.target;13===t&&this.handleChange(n.value)},handleInput:function(e){this.userInput=e},handleChange:function(e){this.$parent.internalCurrentPage=this.$parent.getValidCurrentPage(e),this.$parent.emitChange(),this.userInput=null}},render:function(e){return e("span",{class:"el-pagination__jump"},[this.t("el.pagination.goto"),e("el-input",{class:"el-pagination__editor is-in-pagination",attrs:{min:1,max:this.$parent.internalPageCount,value:null!==this.userInput?this.userInput:this.$parent.internalCurrentPage,type:"number",disabled:this.$parent.disabled},nativeOn:{keyup:this.handleKeyup},on:{input:this.handleInput,change:this.handleChange}}),this.t("el.pagination.pageClassifier")])}},Total:{mixins:[p.a],render:function(e){return"number"==typeof this.$parent.total?e("span",{class:"el-pagination__total"},[this.t("el.pagination.total",{total:this.$parent.total})]):""}},Pager:a},methods:{handleCurrentChange:function(e){this.internalCurrentPage=this.getValidCurrentPage(e),this.userChangePageSize=!0,this.emitChange()},prev:function(){if(!this.disabled){var e=this.internalCurrentPage-1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("prev-click",this.internalCurrentPage),this.emitChange()}},next:function(){if(!this.disabled){var e=this.internalCurrentPage+1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("next-click",this.internalCurrentPage),this.emitChange()}},getValidCurrentPage:function(e){e=parseInt(e,10);var t=void 0;return"number"==typeof this.internalPageCount?e<1?t=1:e>this.internalPageCount&&(t=this.internalPageCount):(isNaN(e)||e<1)&&(t=1),(void 0===t&&isNaN(e)||0===t)&&(t=1),void 0===t?e:t},emitChange:function(){var e=this;this.$nextTick((function(){(e.internalCurrentPage!==e.lastEmittedPage||e.userChangePageSize)&&(e.$emit("current-change",e.internalCurrentPage),e.lastEmittedPage=e.internalCurrentPage,e.userChangePageSize=!1)}))}},computed:{internalPageCount:function(){return"number"==typeof this.total?Math.max(1,Math.ceil(this.total/this.internalPageSize)):"number"==typeof this.pageCount?Math.max(1,this.pageCount):null}},watch:{currentPage:{immediate:!0,handler:function(e){this.internalCurrentPage=this.getValidCurrentPage(e)}},pageSize:{immediate:!0,handler:function(e){this.internalPageSize=isNaN(e)?10:e}},internalCurrentPage:{immediate:!0,handler:function(e){this.$emit("update:currentPage",e),this.lastEmittedPage=-1}},internalPageCount:function(e){var t=this.internalCurrentPage;e>0&&0===t?this.internalCurrentPage=1:t>e&&(this.internalCurrentPage=0===e?1:e,this.userChangePageSize&&this.emitChange()),this.userChangePageSize=!1}},install:function(e){e.component(v.name,v)}},g=v,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{key:e.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[e._t("title",[n("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?n("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])};y._withStripped=!0;var b=n(14),x=n.n(b),w=n(9),_=n.n(w),S=n(3),M=n.n(S),T=r({name:"ElDialog",mixins:[x.a,M.a,_.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},y,[],!1,null,null,null);T.options.__file="packages/dialog/src/component.vue";var E=T.exports;E.install=function(e){e.component(E.name,E)};var C=E,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[n("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex-1)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex+1)},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyEnter(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.close(t)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?n("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?n("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?n("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),n("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(t,i){return n("li",{key:i,class:{highlighted:e.highlightedIndex===i},attrs:{id:e.id+"-item-"+i,role:"option","aria-selected":e.highlightedIndex===i},on:{click:function(n){e.select(t)}}},[e._t("default",[e._v("\n        "+e._s(t[e.valueKey])+"\n      ")],{item:t})],2)})),0)],1)};A._withStripped=!0;var O=n(15),L=n.n(O),k=n(10),P=n.n(k),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[n("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?n("li",[n("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])};D._withStripped=!0;var I=n(5),N=n.n(I),F=n(17),R=n.n(F),B=r({components:{ElScrollbar:R.a},mixins:[N.a,M.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(t){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(t,n){e.dropdownWidth=n+"px",e.showPopper=t}))}},D,[],!1,null,null,null);B.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var j=B.exports,z=n(22),U=n.n(z),V=r({name:"ElAutocomplete",mixins:[M.a,U()("input"),_.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:d.a,ElAutocompleteSuggestions:j},directives:{Clickoutside:P.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions;return(Array.isArray(e)&&e.length>0||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(m.generateId)()}},watch:{suggestionVisible:function(e){var t=this.getInput();t&&this.broadcast("ElAutocompleteSuggestions","visible",[e,t.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var t=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(e,(function(e){t.loading=!1,t.suggestionDisabled||(Array.isArray(e)?(t.suggestions=e,t.highlightedIndex=t.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))})))},handleInput:function(e){if(this.$emit("input",e),this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(e)},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var t=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1})))},select:function(e){var t=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var t=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),n=t.querySelectorAll(".el-autocomplete-suggestion__list li")[e],i=t.scrollTop,r=n.offsetTop;r+n.scrollHeight>i+t.clientHeight&&(t.scrollTop+=n.scrollHeight),r<i&&(t.scrollTop-=n.scrollHeight),this.highlightedIndex=e,this.getInput().setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=L()(this.debounce,this.getData),this.$on("item-click",(function(t){e.select(t)}));var t=this.getInput();t.setAttribute("role","textbox"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-controls","id"),t.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},A,[],!1,null,null,null);V.options.__file="packages/autocomplete/src/autocomplete.vue";var G=V.exports;G.install=function(e){e.component(G.name,G)};var H=G,W=n(12),q=n.n(W),Y=n(29),$=n.n(Y),X=r({name:"ElDropdown",componentName:"ElDropdown",mixins:[M.a,_.a],directives:{Clickoutside:P.a},components:{ElButton:q.a,ElButtonGroup:$.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(m.generateId)()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e),this.$emit("visible-change",e)},focusing:function(e){var t=this.$el.querySelector(".el-dropdown-selfdefine");t&&(e?t.className+=" focusing":t.className=t.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var e=this;this.triggerElm.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var e=this;this.triggerElm.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.triggerElm.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(e){var t=e.keyCode;[38,40].indexOf(t)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),e.preventDefault(),e.stopPropagation()):13===t?this.handleClick():[9,27].indexOf(t)>-1&&this.hide()},handleItemKeyDown:function(e){var t=e.keyCode,n=e.target,i=this.menuItemsArray.indexOf(n),r=this.menuItemsArray.length-1,o=void 0;[38,40].indexOf(t)>-1?(o=38===t?0!==i?i-1:0:i<r?i+1:r,this.removeTabindex(),this.resetTabindex(this.menuItems[o]),this.menuItems[o].focus(),e.preventDefault(),e.stopPropagation()):13===t?(this.triggerElmFocus(),n.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(t)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(e){this.removeTabindex(),e.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(e){e.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var e=this,t=this.trigger,n=this.show,i=this.hide,r=this.handleClick,o=this.splitButton,a=this.handleTriggerKeyDown,s=this.handleItemKeyDown;this.triggerElm=o?this.$refs.trigger.$el:this.$slots.default[0].elm;var l=this.dropdownElm;this.triggerElm.addEventListener("keydown",a),l.addEventListener("keydown",s,!0),o||(this.triggerElm.addEventListener("focus",(function(){e.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){e.focusing=!1})),this.triggerElm.addEventListener("click",(function(){e.focusing=!1}))),"hover"===t?(this.triggerElm.addEventListener("mouseenter",n),this.triggerElm.addEventListener("mouseleave",i),l.addEventListener("mouseenter",n),l.addEventListener("mouseleave",i)):"click"===t&&this.triggerElm.addEventListener("click",r)},handleMenuItemClick:function(e,t){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,t)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(e){var t=this,n=this.hide,i=this.splitButton,r=this.type,o=this.dropdownSize,a=i?e("el-button-group",[e("el-button",{attrs:{type:r,size:o},nativeOn:{click:function(e){t.$emit("click",e),n()}}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:r,size:o},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]):this.$slots.default;return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}]},[a,this.$slots.dropdown])}},void 0,void 0,!1,null,null,null);X.options.__file="packages/dropdown/src/dropdown.vue";var Q=X.exports;Q.install=function(e){e.component(Q.name,Q)};var K=Q,J=function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":this.doDestroy}},[t("ul",{directives:[{name:"show",rawName:"v-show",value:this.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[this.size&&"el-dropdown-menu--"+this.size]},[this._t("default")],2)])};J._withStripped=!0;var Z=r({name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[N.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var e=this;this.$on("updatePopper",(function(){e.showPopper&&e.updatePopper()})),this.$on("visible",(function(t){e.showPopper=t}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(e){this.currentPlacement=e}}}},J,[],!1,null,null,null);Z.options.__file="packages/dropdown/src/dropdown-menu.vue";var ee=Z.exports;ee.install=function(e){e.component(ee.name,ee)};var te=ee,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},attrs:{"aria-disabled":e.disabled,tabindex:e.disabled?null:-1},on:{click:e.handleClick}},[e.icon?n("i",{class:e.icon}):e._e(),e._t("default")],2)};ne._withStripped=!0;var ie=r({name:"ElDropdownItem",mixins:[M.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},ne,[],!1,null,null,null);ie.options.__file="packages/dropdown/src/dropdown-item.vue";var re=ie.exports;re.install=function(e){e.component(re.name,re)};var oe=re,ae=ae||{};ae.Utils=ae.Utils||{},ae.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(ae.Utils.attemptFocus(n)||ae.Utils.focusFirstDescendant(n))return!0}return!1},ae.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(ae.Utils.attemptFocus(n)||ae.Utils.focusLastDescendant(n))return!0}return!1},ae.Utils.attemptFocus=function(e){if(!ae.Utils.isFocusable(e))return!1;ae.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return ae.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},ae.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},ae.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(n),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return i.initEvent.apply(i,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i),e},ae.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var se=ae.Utils,le=function(e,t){this.domNode=t,this.parent=e,this.subMenuItems=[],this.subIndex=0,this.init()};le.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},le.prototype.gotoSubIndex=function(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e},le.prototype.addListeners=function(){var e=this,t=se.keys,n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(function(i){i.addEventListener("keydown",(function(i){var r=!1;switch(i.keyCode){case t.down:e.gotoSubIndex(e.subIndex+1),r=!0;break;case t.up:e.gotoSubIndex(e.subIndex-1),r=!0;break;case t.tab:se.triggerEvent(n,"mouseleave");break;case t.enter:case t.space:r=!0,i.currentTarget.click()}return r&&(i.preventDefault(),i.stopPropagation()),!1}))}))};var ce=le,ue=function(e){this.domNode=e,this.submenu=null,this.init()};ue.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var e=this.domNode.querySelector(".el-menu");e&&(this.submenu=new ce(this,e)),this.addListeners()},ue.prototype.addListeners=function(){var e=this,t=se.keys;this.domNode.addEventListener("keydown",(function(n){var i=!1;switch(n.keyCode){case t.down:se.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(0),i=!0;break;case t.up:se.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(e.submenu.subMenuItems.length-1),i=!0;break;case t.tab:se.triggerEvent(n.currentTarget,"mouseleave");break;case t.enter:case t.space:i=!0,n.currentTarget.click()}i&&n.preventDefault()}))};var he=ue,de=function(e){this.domNode=e,this.init()};de.prototype.init=function(){var e=this.domNode.childNodes;[].filter.call(e,(function(e){return 1===e.nodeType})).forEach((function(e){new he(e)}))};var fe=de,pe=n(1),me=r({name:"ElMenu",render:function(e){var t=e("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?e("el-menu-collapse-transition",[t]):t},componentName:"ElMenu",mixins:[M.a,_.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(e,t){return e("transition",{props:{mode:"out-in"},on:{beforeEnter:function(e){e.style.opacity=.2},enter:function(e){Object(pe.addClass)(e,"el-opacity-transition"),e.style.opacity=1},afterEnter:function(e){Object(pe.removeClass)(e,"el-opacity-transition"),e.style.opacity=""},beforeLeave:function(e){e.dataset||(e.dataset={}),Object(pe.hasClass)(e,"el-menu--collapse")?(Object(pe.removeClass)(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(pe.addClass)(e,"el-menu--collapse")):(Object(pe.addClass)(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(pe.removeClass)(e,"el-menu--collapse")),e.style.width=e.scrollWidth+"px",e.style.overflow="hidden"},leave:function(e){Object(pe.addClass)(e,"horizontal-collapse-transition"),e.style.width=e.dataset.scrollWidth+"px"}}},t.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(e){this.items[e]||(this.activeIndex=null),this.updateActiveIndex(e)},defaultOpeneds:function(e){this.collapse||(this.openedMenus=e)},collapse:function(e){e&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",e)}},methods:{updateActiveIndex:function(e){var t=this.items[e]||this.items[this.activeIndex]||this.items[this.defaultActive];t?(this.activeIndex=t.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(e){if(e=e.replace("#",""),/^[0-9a-fA-F]{3}$/.test(e)){e=e.split("");for(var t=2;t>=0;t--)e.splice(t,0,e[t]);e=e.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(e,t){var n=this.getColorChannels(e),i=n.red,r=n.green,o=n.blue;return t>0?(i*=1-t,r*=1-t,o*=1-t):(i+=(255-i)*t,r+=(255-r)*t,o+=(255-o)*t),"rgb("+Math.round(i)+", "+Math.round(r)+", "+Math.round(o)+")"},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},openMenu:function(e,t){var n=this.openedMenus;-1===n.indexOf(e)&&(this.uniqueOpened&&(this.openedMenus=n.filter((function(e){return-1!==t.indexOf(e)}))),this.openedMenus.push(e))},closeMenu:function(e){var t=this.openedMenus.indexOf(e);-1!==t&&this.openedMenus.splice(t,1)},handleSubmenuClick:function(e){var t=e.index,n=e.indexPath;-1!==this.openedMenus.indexOf(t)?(this.closeMenu(t),this.$emit("close",t,n)):(this.openMenu(t,n),this.$emit("open",t,n))},handleItemClick:function(e){var t=this,n=e.index,i=e.indexPath,r=this.activeIndex,o=null!==e.index;o&&(this.activeIndex=e.index),this.$emit("select",n,i,e),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&o&&this.routeToItem(e,(function(e){if(t.activeIndex=r,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))},initOpenedMenu:function(){var e=this,t=this.activeIndex,n=this.items[t];n&&"horizontal"!==this.mode&&!this.collapse&&n.indexPath.forEach((function(t){var n=e.submenus[t];n&&e.openMenu(t,n.indexPath)}))},routeToItem:function(e,t){var n=e.route||e.index;try{this.$router.push(n,(function(){}),t)}catch(e){console.error(e)}},open:function(e){var t=this,n=this.submenus[e.toString()].indexPath;n.forEach((function(e){return t.openMenu(e,n)}))},close:function(e){this.closeMenu(e)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new fe(this.$el),this.$watch("items",this.updateActiveIndex)}},void 0,void 0,!1,null,null,null);me.options.__file="packages/menu/src/menu.vue";var ve=me.exports;ve.install=function(e){e.component(ve.name,ve)};var ge=ve,ye=n(21),be=n.n(ye),xe={inject:["rootMenu"],computed:{indexPath:function(){for(var e=[this.index],t=this.$parent;"ElMenu"!==t.$options.componentName;)t.index&&e.unshift(t.index),t=t.$parent;return e},parentMenu:function(){for(var e=this.$parent;e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName);)e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,t=this.$parent;if(this.rootMenu.collapse)e=20;else for(;t&&"ElMenu"!==t.$options.componentName;)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return{paddingLeft:e+"px"}}}},we={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:N.a.props.offset,boundariesPadding:N.a.props.boundariesPadding,popperOptions:N.a.props.popperOptions},data:N.a.data,methods:N.a.methods,beforeDestroy:N.a.beforeDestroy,deactivated:N.a.deactivated},_e=r({name:"ElSubmenu",componentName:"ElSubmenu",mixins:[xe,M.a,we],components:{ElCollapseTransition:be.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(e){var t=this;this.isMenuPopup&&this.$nextTick((function(e){t.updatePopper()}))}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var e=!1,t=this.submenus,n=this.items;return Object.keys(n).forEach((function(t){n[t].active&&(e=!0)})),Object.keys(t).forEach((function(n){t[n].active&&(e=!0)})),e},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){for(var e=!0,t=this.$parent;t&&t!==this.rootMenu;){if(["ElSubmenu","ElMenuItemGroup"].indexOf(t.$options.componentName)>-1){e=!1;break}t=t.$parent}return e}},methods:{handleCollapseToggle:function(e){e?this.initPopper():this.doDestroy()},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},handleClick:function(){var e=this.rootMenu,t=this.disabled;"hover"===e.menuTrigger&&"horizontal"===e.mode||e.collapse&&"vertical"===e.mode||t||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==e.type||e.relatedTarget){var i=this.rootMenu,r=this.disabled;"click"===i.menuTrigger&&"horizontal"===i.mode||!i.collapse&&"vertical"===i.mode||r||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.rootMenu.openMenu(t.index,t.indexPath)}),n),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.rootMenu;"click"===n.menuTrigger&&"horizontal"===n.mode||!n.collapse&&"vertical"===n.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){!e.mouseInChild&&e.rootMenu.closeMenu(e.index)}),this.hideTimeout),this.appendToBody&&t&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var e=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",(function(){e.mouseInChild=!0,clearTimeout(e.timeout)})),this.$on("mouse-leave-child",(function(){e.mouseInChild=!1,clearTimeout(e.timeout)}))},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(e){var t=this,n=this.active,i=this.opened,r=this.paddingStyle,o=this.titleStyle,a=this.backgroundColor,s=this.rootMenu,l=this.currentPlacement,c=this.menuTransitionName,u=this.mode,h=this.disabled,d=this.popperClass,f=this.$slots,p=this.isFirstLevel,m=e("transition",{attrs:{name:c}},[e("div",{ref:"menu",directives:[{name:"show",value:i}],class:["el-menu--"+u,d],on:{mouseenter:function(e){return t.handleMouseenter(e,100)},mouseleave:function(){return t.handleMouseleave(!0)},focus:function(e){return t.handleMouseenter(e,100)}}},[e("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+l],style:{backgroundColor:s.backgroundColor||""}},[f.default])])]),v=e("el-collapse-transition",[e("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:i}],style:{backgroundColor:s.backgroundColor||""}},[f.default])]),g="horizontal"===s.mode&&p||"vertical"===s.mode&&!s.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return e("li",{class:{"el-submenu":!0,"is-active":n,"is-opened":i,"is-disabled":h},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":i},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return t.handleMouseleave(!1)},focus:this.handleMouseenter}},[e("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[r,o,{backgroundColor:a}]},[f.title,e("i",{class:["el-submenu__icon-arrow",g]})]),this.isMenuPopup?m:v])}},void 0,void 0,!1,null,null,null);_e.options.__file="packages/menu/src/submenu.vue";var Se=_e.exports;Se.install=function(e){e.component(Se.name,Se)};var Me=Se,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-menu-item",class:{"is-active":e.active,"is-disabled":e.disabled},style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.handleClick,mouseenter:e.onMouseEnter,focus:e.onMouseEnter,blur:e.onMouseLeave,mouseleave:e.onMouseLeave}},["ElMenu"===e.parentMenu.$options.componentName&&e.rootMenu.collapse&&e.$slots.title?n("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._t("title")],2),n("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[e._t("default")],2)]):[e._t("default"),e._t("title")]],2)};Te._withStripped=!0;var Ee=n(26),Ce=n.n(Ee),Ae=r({name:"ElMenuItem",componentName:"ElMenuItem",mixins:[xe,M.a],components:{ElTooltip:Ce.a},props:{index:{default:null,validator:function(e){return"string"==typeof e||null===e}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var e={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(e.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),e},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},Te,[],!1,null,null,null);Ae.options.__file="packages/menu/src/menu-item.vue";var Oe=Ae.exports;Oe.install=function(e){e.component(Oe.name,Oe)};var Le=Oe,ke=function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"el-menu-item-group"},[t("div",{staticClass:"el-menu-item-group__title",style:{paddingLeft:this.levelPadding+"px"}},[this.$slots.title?this._t("title"):[this._v(this._s(this.title))]],2),t("ul",[this._t("default")],2)])};ke._withStripped=!0;var Pe=r({name:"ElMenuItemGroup",componentName:"ElMenuItemGroup",inject:["rootMenu"],props:{title:{type:String}},data:function(){return{paddingLeft:20}},computed:{levelPadding:function(){var e=20,t=this.$parent;if(this.rootMenu.collapse)return 20;for(;t&&"ElMenu"!==t.$options.componentName;)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return e}}},ke,[],!1,null,null,null);Pe.options.__file="packages/menu/src/menu-item-group.vue";var De=Pe.exports;De.install=function(e){e.component(De.name,De)};var Ie=De,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)};Ne._withStripped=!0;var Fe=void 0,Re="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Be=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function je(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),i=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:Be.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";"),paddingSize:i,borderSize:r,boxSizing:n}}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Fe||(Fe=document.createElement("textarea"),document.body.appendChild(Fe));var i=je(e),r=i.paddingSize,o=i.borderSize,a=i.boxSizing,s=i.contextStyle;Fe.setAttribute("style",s+";"+Re),Fe.value=e.value||e.placeholder||"";var l=Fe.scrollHeight,c={};"border-box"===a?l+=o:"content-box"===a&&(l-=r),Fe.value="";var u=Fe.scrollHeight-r;if(null!==t){var h=u*t;"border-box"===a&&(h=h+r+o),l=Math.max(h,l),c.minHeight=h+"px"}if(null!==n){var d=u*n;"border-box"===a&&(d=d+r+o),l=Math.min(d,l)}return c.height=l+"px",Fe.parentNode&&Fe.parentNode.removeChild(Fe),Fe=null,c}var Ue=n(7),Ve=n.n(Ue),Ge=n(19),He=r({name:"ElInput",componentName:"ElInput",mixins:[M.a,_.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Ve()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize;if("textarea"===this.type)if(e){var t=e.minRows,n=e.maxRows;this.textareaCalcStyle=ze(this.$refs.textarea,t,n)}else this.textareaCalcStyle={minHeight:ze(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(Ge.isKorean)(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,i=0;i<t.length;i++)if(t[i].parentNode===this.$el){n=t[i];break}if(n){var r={suffix:"append",prefix:"prepend"}[e];this.$slots[r]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+r).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},Ne,[],!1,null,null,null);He.options.__file="packages/input/src/input.vue";var We=He.exports;We.install=function(e){e.component(We.name,We)};var qe=We,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),n("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)};Ye._withStripped=!0;var $e={bind:function(e,t,n){var i=null,r=void 0,o=function(){return n.context[t.expression].apply()},a=function(){Date.now()-r<100&&o(),clearInterval(i),i=null};Object(pe.on)(e,"mousedown",(function(e){0===e.button&&(r=Date.now(),Object(pe.once)(document,"mouseup",a),clearInterval(i),i=setInterval(o,100))}))}},Xe=r({name:"ElInputNumber",mixins:[U()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:$e},components:{ElInput:d.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);t=Math.round(t/this.step)*i*this.step/i}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,n=this.getPrecision,i=this.precision,r=n(t);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"==typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),n=Math.pow(10,t);e=Math.round(e/this.step)*n*this.step/n}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),n=t.indexOf("."),i=0;return-1!==n&&(i=t.length-n-1),i},_increase:function(e,t){if("number"!=typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e+n*t)/n)},_decrease:function(e,t){if("number"!=typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e-n*t)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"==typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){this.$refs&&this.$refs.input&&this.$refs.input.$refs.input.setAttribute("aria-valuenow",this.currentValue)}},Ye,[],!1,null,null,null);Xe.options.__file="packages/input-number/src/input-number.vue";var Qe=Xe.exports;Qe.install=function(e){e.component(Qe.name,Qe)};var Ke=Qe,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])};Je._withStripped=!0;var Ze=r({name:"ElRadio",mixins:[M.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){for(var e=this.$parent;e;){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},Je,[],!1,null,null,null);Ze.options.__file="packages/radio/src/radio.vue";var et=Ze.exports;et.install=function(e){e.component(et.name,et)};var tt=et,nt=function(){var e=this.$createElement;return(this._self._c||e)(this._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:this.handleKeydown}},[this._t("default")],2)};nt._withStripped=!0;var it=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),rt=r({name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[M.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){return(this.$vnode.data||{}).tag||"div"},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",(function(t){e.$emit("change",t)}))},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),t=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,(function(e){return e.checked}))&&t&&(t.tabIndex=0)},methods:{handleKeydown:function(e){var t=e.target,n="INPUT"===t.nodeName?"[type=radio]":"[role=radio]",i=this.$el.querySelectorAll(n),r=i.length,o=[].indexOf.call(i,t),a=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case it.LEFT:case it.UP:e.stopPropagation(),e.preventDefault(),0===o?(a[r-1].click(),a[r-1].focus()):(a[o-1].click(),a[o-1].focus());break;case it.RIGHT:case it.DOWN:o===r-1?(e.stopPropagation(),e.preventDefault(),a[0].click(),a[0].focus()):(a[o+1].click(),a[o+1].focus())}}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[this.value])}}},nt,[],!1,null,null,null);rt.options.__file="packages/radio/src/radio-group.vue";var ot=rt.exports;ot.install=function(e){e.component(ot.name,ot)};var at=ot,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio-button",class:[e.size?"el-radio-button--"+e.size:"",{"is-active":e.value===e.label},{"is-disabled":e.isDisabled},{"is-focus":e.focus}],attrs:{role:"radio","aria-checked":e.value===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.value=e.isDisabled?e.value:e.label}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"el-radio-button__orig-radio",attrs:{type:"radio",name:e.name,disabled:e.isDisabled,tabindex:"-1"},domProps:{value:e.label,checked:e._q(e.value,e.label)},on:{change:[function(t){e.value=e.label},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),n("span",{staticClass:"el-radio-button__inner",style:e.value===e.label?e.activeStyle:null,on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])};st._withStripped=!0;var lt=r({name:"ElRadioButton",mixins:[M.a],inject:{elForm:{default:""},elFormItem:{default:""}},props:{label:{},disabled:Boolean,name:String},data:function(){return{focus:!1}},computed:{value:{get:function(){return this._radioGroup.value},set:function(e){this._radioGroup.$emit("input",e)}},_radioGroup:function(){for(var e=this.$parent;e;){if("ElRadioGroup"===e.$options.componentName)return e;e=e.$parent}return!1},activeStyle:function(){return{backgroundColor:this._radioGroup.fill||"",borderColor:this._radioGroup.fill||"",boxShadow:this._radioGroup.fill?"-1px 0 0 0 "+this._radioGroup.fill:"",color:this._radioGroup.textColor||""}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._radioGroup.radioGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isDisabled:function(){return this.disabled||this._radioGroup.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this._radioGroup&&this.value!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.dispatch("ElRadioGroup","handleChange",e.value)}))}}},st,[],!1,null,null,null);lt.options.__file="packages/radio/src/radio-button.vue";var ct=lt.exports;ct.install=function(e){e.component(ct.name,ct)};var ut=ct,ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=e._i(n,null);i.checked?o<0&&(e.model=n.concat([null])):o>-1&&(e.model=n.slice(0,o).concat(n.slice(o+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e.label,a=e._i(n,o);i.checked?a<0&&(e.model=n.concat([o])):a>-1&&(e.model=n.slice(0,a).concat(n.slice(a+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])};ht._withStripped=!0;var dt=r({name:"ElCheckbox",mixins:[M.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},ht,[],!1,null,null,null);dt.options.__file="packages/checkbox/src/checkbox.vue";var ft=dt.exports;ft.install=function(e){e.component(ft.name,ft)};var pt=ft,mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox-button",class:[e.size?"el-checkbox-button--"+e.size:"",{"is-disabled":e.isDisabled},{"is-checked":e.isChecked},{"is-focus":e.focus}],attrs:{role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled}},[e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=e._i(n,null);i.checked?o<0&&(e.model=n.concat([null])):o>-1&&(e.model=n.slice(0,o).concat(n.slice(o+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e.label,a=e._i(n,o);i.checked?a<0&&(e.model=n.concat([o])):a>-1&&(e.model=n.slice(0,a).concat(n.slice(a+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox-button__inner",style:e.isChecked?e.activeStyle:null},[e._t("default",[e._v(e._s(e.label))])],2):e._e()])};mt._withStripped=!0;var vt=r({name:"ElCheckboxButton",mixins:[M.a],inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},props:{value:{},label:{},disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},computed:{model:{get:function(){return this._checkboxGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this._checkboxGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):void 0!==this.value?this.$emit("input",e):this.selfModel=e}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},_checkboxGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return e;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},activeStyle:function(){return{backgroundColor:this._checkboxGroup.fill||"",borderColor:this._checkboxGroup.fill||"",color:this._checkboxGroup.textColor||"","box-shadow":"-1px 0 0 0 "+this._checkboxGroup.fill}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._checkboxGroup.checkboxGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this._checkboxGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled}},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t._checkboxGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()}},mt,[],!1,null,null,null);vt.options.__file="packages/checkbox/src/checkbox-button.vue";var gt=vt.exports;gt.install=function(e){e.component(gt.name,gt)};var yt=gt,bt=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[this._t("default")],2)};bt._withStripped=!0;var xt=r({name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[M.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},bt,[],!1,null,null,null);xt.options.__file="packages/checkbox/src/checkbox-group.vue";var wt=xt.exports;wt.install=function(e){e.component(wt.name,wt)};var _t=wt,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:function(t){return t.preventDefault(),e.switchValue(t)}}},[n("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.switchValue(t)}}}),e.inactiveIconClass||e.inactiveText?n("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?n("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?n("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),n("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?n("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?n("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?n("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])};St._withStripped=!0;var Mt=r({name:"ElSwitch",mixins:[U()("input"),_.a,M.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(e){var t=this,n=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",n),this.$emit("change",n),this.$nextTick((function(){t.$refs.input.checked=t.checked}))},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},St,[],!1,null,null,null);Mt.options.__file="packages/switch/src/component.vue";var Tt=Mt.exports;Tt.install=function(e){e.component(Tt.name,Tt)};var Et=Tt,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(t){return e.debouncedOnInputChange(t)},keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],paste:function(t){return e.debouncedOnInputChange(t)},mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)};Ct._withStripped=!0;var At=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":this.$parent.multiple},this.popperClass],style:{minWidth:this.minWidth}},[this._t("default")],2)};At._withStripped=!0;var Ot=r({name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[N.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},At,[],!1,null,null,null);Ot.options.__file="packages/select/src/select-dropdown.vue";var Lt=Ot.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)};kt._withStripped=!0;var Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt=r({mixins:[M.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===(void 0===e?"undefined":Pt(e))&&"object"===(void 0===t?"undefined":Pt(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(m.getValueByPath)(e,n)===Object(m.getValueByPath)(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(m.getValueByPath)(e,n)===Object(m.getValueByPath)(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(m.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple?t:[t],i=this.select.cachedOptions.indexOf(this),r=n.indexOf(this);i>-1&&r<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},kt,[],!1,null,null,null);Dt.options.__file="packages/select/src/option.vue";var It=Dt.exports,Nt=n(30),Ft=n.n(Nt),Rt=n(13),Bt=n(11),jt=n.n(Bt),zt=n(27),Ut=n.n(zt),Vt=r({mixins:[M.a,p.a,U()("reference"),{data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"==typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}}],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(m.isIE)()&&!Object(m.isEdge)()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value;return this.clearable&&!this.selectDisabled&&this.inputHovering&&e},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"}},components:{ElInput:d.a,ElSelectMenu:Lt,ElOption:It,ElTag:Ft.a,ElScrollbar:R.a},directives:{Clickoutside:P.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,default:function(){return Object(Bt.t)("el.select.placeholder")}},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},placeholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(m.valueEquals)(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var i=n[n.length-1]||"";this.isOnComposition=!Object(Ge.isKorean)(i)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!=typeof this.filterMethod&&"function"!=typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"==typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"==typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");Ut()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(m.valueEquals)(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),i="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o];if(n?Object(m.getValueByPath)(a.value,this.valueKey)===Object(m.getValueByPath)(e,this.valueKey):a.value===e){t=a;break}}if(t)return t;var s={value:e,currentLabel:n||i||r?"":e};return this.multiple&&(s.hitState=!1),s},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,r=e.initialInputHeight||40;n.style.height=0===e.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,e.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(e.value),this.$emit("input",i),this.emitChange(i),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var i=this.valueKey,r=-1;return e.some((function(e,n){return Object(m.getValueByPath)(e,i)===Object(m.getValueByPath)(t,i)&&(r=n,!0)})),r}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(n,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var i=this.options[n];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=n;break}}else if(i.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(m.getValueByPath)(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.placeholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=L()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=L()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(Rt.addResizeListener)(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n=t.$el.querySelector("input");this.initialInputHeight=n.getBoundingClientRect().height||{medium:36,small:32,mini:28}[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(Rt.removeResizeListener)(this.$el,this.handleResize)}},Ct,[],!1,null,null,null);Vt.options.__file="packages/select/src/select.vue";var Gt=Vt.exports;Gt.install=function(e){e.component(Gt.name,Gt)};var Ht=Gt;It.install=function(e){e.component(It.name,It)};var Wt=It,qt=function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[t("li",{staticClass:"el-select-group__title"},[this._v(this._s(this.label))]),t("li",[t("ul",{staticClass:"el-select-group"},[this._t("default")],2)])])};qt._withStripped=!0;var Yt=r({mixins:[M.a],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}},qt,[],!1,null,null,null);Yt.options.__file="packages/select/src/option-group.vue";var $t=Yt.exports;$t.install=function(e){e.component($t.name,$t)};var Xt=$t,Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])};Qt._withStripped=!0;var Kt=r({name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},Qt,[],!1,null,null,null);Kt.options.__file="packages/button/src/button.vue";var Jt=Kt.exports;Jt.install=function(e){e.component(Jt.name,Jt)};var Zt=Jt,en=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-button-group"},[this._t("default")],2)};en._withStripped=!0;var tn=r({name:"ElButtonGroup"},en,[],!1,null,null,null);tn.options.__file="packages/button/src/button-group.vue";var nn=tn.exports;nn.install=function(e){e.component(nn.name,nn)};var rn=nn,on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-table",class:[{"el-table--fit":e.fit,"el-table--striped":e.stripe,"el-table--border":e.border||e.isGroup,"el-table--hidden":e.isHidden,"el-table--group":e.isGroup,"el-table--fluid-height":e.maxHeight,"el-table--scrollable-x":e.layout.scrollX,"el-table--scrollable-y":e.layout.scrollY,"el-table--enable-row-hover":!e.store.states.isComplex,"el-table--enable-row-transition":0!==(e.store.states.data||[]).length&&(e.store.states.data||[]).length<100},e.tableSize?"el-table--"+e.tableSize:""],on:{mouseleave:function(t){e.handleMouseLeave(t)}}},[n("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[e._t("default")],2),e.showHeader?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[n("table-header",{ref:"tableHeader",style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"default-sort":e.defaultSort}})],1):e._e(),n("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[e.layout.scrollX?"is-scrolling-"+e.scrollPosition:"is-scrolling-none"],style:[e.bodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{context:e.context,store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.data&&0!==e.data.length?e._e():n("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:e.emptyBlockStyle},[n("span",{staticClass:"el-table__empty-text"},[e._t("empty",[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],2)]),e.$slots.append?n("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[e._t("append")],2):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[n("table-footer",{style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,"default-sort":e.defaultSort}})],1):e._e(),e.fixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:e.layout.fixedWidth?e.layout.fixedWidth+"px":""},e.fixedHeight]},[e.showHeader?n("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"fixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,store:e.store}})],1):e._e(),n("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"left",store:e.store,stripe:e.stripe,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"row-style":e.rowStyle}}),e.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:e.layout.rightFixedWidth?e.layout.rightFixedWidth+"px":"",right:e.layout.scrollY?(e.border?e.layout.gutterWidth:e.layout.gutterWidth||0)+"px":""},e.fixedHeight]},[e.showHeader?n("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"rightFixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,store:e.store}})],1):e._e(),n("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"right",store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?n("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:e.layout.scrollY?e.layout.gutterWidth+"px":"0",height:e.layout.headerHeight+"px"}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])};on._withStripped=!0;var an=n(16),sn=n.n(an),ln=n(35),cn=n(38),un=n.n(cn),hn="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,dn={bind:function(e,t){var n,i;n=e,i=t.value,n&&n.addEventListener&&n.addEventListener(hn?"DOMMouseScroll":"mousewheel",(function(e){var t=un()(e);i&&i.apply(this,[e,t])}))}},fn=n(6),pn=n.n(fn),mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn=function(e){for(var t=e.target;t&&"HTML"!==t.tagName.toUpperCase();){if("TD"===t.tagName.toUpperCase())return t;t=t.parentNode}return null},gn=function(e){return null!==e&&"object"===(void 0===e?"undefined":mn(e))},yn=function(e,t,n,i,r){if(!t&&!i&&(!r||Array.isArray(r)&&!r.length))return e;n="string"==typeof n?"descending"===n?-1:1:n&&n<0?-1:1;var o=i?null:function(n,i){return r?(Array.isArray(r)||(r=[r]),r.map((function(t){return"string"==typeof t?Object(m.getValueByPath)(n,t):t(n,i,e)}))):("$key"!==t&&gn(n)&&"$value"in n&&(n=n.$value),[gn(n)?Object(m.getValueByPath)(n,t):n])};return e.map((function(e,t){return{value:e,index:t,key:o?o(e,t):null}})).sort((function(e,t){var r=function(e,t){if(i)return i(e.value,t.value);for(var n=0,r=e.key.length;n<r;n++){if(e.key[n]<t.key[n])return-1;if(e.key[n]>t.key[n])return 1}return 0}(e,t);return r||(r=e.index-t.index),r*n})).map((function(e){return e.value}))},bn=function(e,t){var n=null;return e.columns.forEach((function(e){e.id===t&&(n=e)})),n},xn=function(e,t){var n=(t.className||"").match(/el-table_[^\s]+/gm);return n?bn(e,n[0]):null},wn=function(e,t){if(!e)throw new Error("row is required when get row identity");if("string"==typeof t){if(t.indexOf(".")<0)return e[t];for(var n=t.split("."),i=e,r=0;r<n.length;r++)i=i[n[r]];return i}if("function"==typeof t)return t.call(null,e)},_n=function(e,t){var n={};return(e||[]).forEach((function(e,i){n[wn(e,t)]={row:e,index:i}})),n};function Sn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mn(e){return void 0!==e&&(e=parseInt(e,10),isNaN(e)&&(e=null)),e}function Tn(e){return"number"==typeof e?e:"string"==typeof e?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function En(e,t,n){var i=!1,r=e.indexOf(t),o=-1!==r,a=function(){e.push(t),i=!0},s=function(){e.splice(r,1),i=!0};return"boolean"==typeof n?n&&!o?a():!n&&o&&s():o?s():a(),i}var Cn={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var e=this.states,t=e.data,n=void 0===t?[]:t,i=e.rowKey,r=e.defaultExpandAll,o=e.expandRows;if(r)this.states.expandRows=n.slice();else if(i){var a=_n(o,i);this.states.expandRows=n.reduce((function(e,t){var n=wn(t,i);return a[n]&&e.push(t),e}),[])}else this.states.expandRows=[]},toggleRowExpansion:function(e,t){En(this.states.expandRows,e,t)&&(this.table.$emit("expand-change",e,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(e){this.assertRowKey();var t=this.states,n=t.data,i=t.rowKey,r=_n(n,i);this.states.expandRows=e.reduce((function(e,t){var n=r[t];return n&&e.push(n.row),e}),[])},isRowExpanded:function(e){var t=this.states,n=t.expandRows,i=void 0===n?[]:n,r=t.rowKey;return r?!!_n(i,r)[wn(e,r)]:-1!==i.indexOf(e)}}},An={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(e){this.assertRowKey(),this.states._currentRowKey=e,this.setCurrentRowByKey(e)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(e){var t=this.states,n=t.data,i=void 0===n?[]:n,r=t.rowKey,o=null;r&&(o=Object(m.arrayFind)(i,(function(t){return wn(t,r)===e}))),t.currentRow=o},updateCurrentRow:function(e){var t=this.states,n=this.table,i=t.currentRow;if(e&&e!==i)return t.currentRow=e,void n.$emit("current-change",e,i);!e&&i&&(t.currentRow=null,n.$emit("current-change",null,i))},updateCurrentRowData:function(){var e=this.states,t=this.table,n=e.rowKey,i=e._currentRowKey,r=e.data||[],o=e.currentRow;if(-1===r.indexOf(o)&&o){if(n){var a=wn(o,n);this.setCurrentRowByKey(a)}else e.currentRow=null;null===e.currentRow&&t.$emit("current-change",null,o)}else i&&(this.setCurrentRowByKey(i),this.restoreCurrentRowKey())}}},On=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ln={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var e=this.states.data||[];return this.normalize(e)},normalizedLazyNode:function(){var e=this.states,t=e.rowKey,n=e.lazyTreeNodeMap,i=e.lazyColumnIdentifier,r=Object.keys(n),o={};return r.length?(r.forEach((function(e){if(n[e].length){var r={children:[]};n[e].forEach((function(e){var n=wn(e,t);r.children.push(n),e[i]&&!o[n]&&(o[n]={children:[]})})),o[e]=r}})),o):o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(e){var t=this.states,n=t.childrenColumnName,i=t.lazyColumnIdentifier,r=t.rowKey,o=t.lazy,a={};return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hasChildren",r=function(e){return!(Array.isArray(e)&&e.length)};function o(e,a,s){t(e,a,s),a.forEach((function(e){if(e[i])t(e,null,s+1);else{var a=e[n];r(a)||o(e,a,s+1)}}))}e.forEach((function(e){if(e[i])t(e,null,0);else{var a=e[n];r(a)||o(e,a,0)}}))}(e,(function(e,t,n){var i=wn(e,r);Array.isArray(t)?a[i]={children:t.map((function(e){return wn(e,r)})),level:n}:o&&(a[i]={children:[],lazy:!0,level:n})}),n,i),a},updateTreeData:function(){var e=this.normalizedData,t=this.normalizedLazyNode,n=Object.keys(e),i={};if(n.length){var r=this.states,o=r.treeData,a=r.defaultExpandAll,s=r.expandRowKeys,l=r.lazy,c=[],u=function(e,t){var n=a||s&&-1!==s.indexOf(t);return!!(e&&e.expanded||n)};n.forEach((function(t){var n=o[t],r=On({},e[t]);if(r.expanded=u(n,t),r.lazy){var a=n||{},s=a.loaded,l=void 0!==s&&s,h=a.loading,d=void 0!==h&&h;r.loaded=!!l,r.loading=!!d,c.push(t)}i[t]=r}));var h=Object.keys(t);l&&h.length&&c.length&&h.forEach((function(e){var n=o[e],r=t[e].children;if(-1!==c.indexOf(e)){if(0!==i[e].children.length)throw new Error("[ElTable]children must be an empty array.");i[e].children=r}else{var a=n||{},s=a.loaded,l=void 0!==s&&s,h=a.loading,d=void 0!==h&&h;i[e]={lazy:!0,loaded:!!l,loading:!!d,expanded:u(n,e),children:r,level:""}}}))}this.states.treeData=i,this.updateTableScrollY()},updateTreeExpandKeys:function(e){this.states.expandRowKeys=e,this.updateTreeData()},toggleTreeExpansion:function(e,t){this.assertRowKey();var n=this.states,i=n.rowKey,r=n.treeData,o=wn(e,i),a=o&&r[o];if(o&&a&&"expanded"in a){var s=a.expanded;t=void 0===t?!a.expanded:t,r[o].expanded=t,s!==t&&this.table.$emit("expand-change",e,t),this.updateTableScrollY()}},loadOrToggle:function(e){this.assertRowKey();var t=this.states,n=t.lazy,i=t.treeData,r=t.rowKey,o=wn(e,r),a=i[o];n&&a&&"loaded"in a&&!a.loaded?this.loadData(e,o,a):this.toggleTreeExpansion(e)},loadData:function(e,t,n){var i=this,r=this.table.load,o=this.states,a=o.lazyTreeNodeMap,s=o.treeData;r&&!s[t].loaded&&(s[t].loading=!0,r(e,n,(function(n){if(!Array.isArray(n))throw new Error("[ElTable] data must be an array");s[t].loading=!1,s[t].loaded=!0,s[t].expanded=!0,n.length&&i.$set(a,t,n),i.table.$emit("expand-change",e,!0)})))}}},kn=function e(t){var n=[];return t.forEach((function(t){t.children?n.push.apply(n,e(t.children)):n.push(t)})),n},Pn=pn.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[Cn,An,Ln],methods:{assertRowKey:function(){if(!this.states.rowKey)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var e=this.states,t=e._columns||[];e.fixedColumns=t.filter((function(e){return!0===e.fixed||"left"===e.fixed})),e.rightFixedColumns=t.filter((function(e){return"right"===e.fixed})),e.fixedColumns.length>0&&t[0]&&"selection"===t[0].type&&!t[0].fixed&&(t[0].fixed=!0,e.fixedColumns.unshift(t[0]));var n=t.filter((function(e){return!e.fixed}));e.originColumns=[].concat(e.fixedColumns).concat(n).concat(e.rightFixedColumns);var i=kn(n),r=kn(e.fixedColumns),o=kn(e.rightFixedColumns);e.leafColumnsLength=i.length,e.fixedLeafColumnsLength=r.length,e.rightFixedLeafColumnsLength=o.length,e.columns=[].concat(r).concat(i).concat(o),e.isComplex=e.fixedColumns.length>0||e.rightFixedColumns.length>0},scheduleLayout:function(e){e&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(e){var t=this.states.selection;return(void 0===t?[]:t).indexOf(e)>-1},clearSelection:function(){var e=this.states;e.isAllSelected=!1,e.selection.length&&(e.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var e=this.states,t=e.data,n=e.rowKey,i=e.selection,r=void 0;if(n){r=[];var o=_n(i,n),a=_n(t,n);for(var s in o)o.hasOwnProperty(s)&&!a[s]&&r.push(o[s].row)}else r=i.filter((function(e){return-1===t.indexOf(e)}));if(r.length){var l=i.filter((function(e){return-1===r.indexOf(e)}));e.selection=l,this.table.$emit("selection-change",l.slice())}},toggleRowSelection:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=En(this.states.selection,e,t);if(i){var r=(this.states.selection||[]).slice();n&&this.table.$emit("select",r,e),this.table.$emit("selection-change",r)}},_toggleAllSelection:function(){var e=this.states,t=e.data,n=void 0===t?[]:t,i=e.selection,r=e.selectOnIndeterminate?!e.isAllSelected:!(e.isAllSelected||i.length);e.isAllSelected=r;var o=!1;n.forEach((function(t,n){e.selectable?e.selectable.call(null,t,n)&&En(i,t,r)&&(o=!0):En(i,t,r)&&(o=!0)})),o&&this.table.$emit("selection-change",i?i.slice():[]),this.table.$emit("select-all",i)},updateSelectionByRowKey:function(){var e=this.states,t=e.selection,n=e.rowKey,i=e.data,r=_n(t,n);i.forEach((function(e){var i=wn(e,n),o=r[i];o&&(t[o.index]=e)}))},updateAllSelected:function(){var e=this.states,t=e.selection,n=e.rowKey,i=e.selectable,r=e.data||[];if(0!==r.length){var o=void 0;n&&(o=_n(t,n));for(var a,s=!0,l=0,c=0,u=r.length;c<u;c++){var h=r[c],d=i&&i.call(null,h,c);if(a=h,o?o[wn(a,n)]:-1!==t.indexOf(a))l++;else if(!i||d){s=!1;break}}0===l&&(s=!1),e.isAllSelected=s}else e.isAllSelected=!1},updateFilters:function(e,t){Array.isArray(e)||(e=[e]);var n=this.states,i={};return e.forEach((function(e){n.filters[e.id]=t,i[e.columnKey||e.id]=t})),i},updateSort:function(e,t,n){this.states.sortingColumn&&this.states.sortingColumn!==e&&(this.states.sortingColumn.order=null),this.states.sortingColumn=e,this.states.sortProp=t,this.states.sortOrder=n},execFilter:function(){var e=this,t=this.states,n=t._data,i=t.filters,r=n;Object.keys(i).forEach((function(n){var i=t.filters[n];if(i&&0!==i.length){var o=bn(e.states,n);o&&o.filterMethod&&(r=r.filter((function(e){return i.some((function(t){return o.filterMethod.call(null,t,e,o)}))})))}})),t.filteredData=r},execSort:function(){var e=this.states;e.data=function(e,t){var n=t.sortingColumn;return n&&"string"!=typeof n.sortable?yn(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy):e}(e.filteredData,e)},execQuery:function(e){e&&e.filter||this.execFilter(),this.execSort()},clearFilter:function(e){var t=this.states,n=this.table.$refs,i=n.tableHeader,r=n.fixedTableHeader,o=n.rightFixedTableHeader,a={};i&&(a=Ve()(a,i.filterPanels)),r&&(a=Ve()(a,r.filterPanels)),o&&(a=Ve()(a,o.filterPanels));var s=Object.keys(a);if(s.length)if("string"==typeof e&&(e=[e]),Array.isArray(e)){var l=e.map((function(e){return function(e,t){for(var n=null,i=0;i<e.columns.length;i++){var r=e.columns[i];if(r.columnKey===t){n=r;break}}return n}(t,e)}));s.forEach((function(e){l.find((function(t){return t.id===e}))&&(a[e].filteredValue=[])})),this.commit("filterChange",{column:l,values:[],silent:!0,multi:!0})}else s.forEach((function(e){a[e].filteredValue=[]})),t.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){this.states.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(e){this.setExpandRowKeys(e),this.updateTreeExpandKeys(e)},toggleRowExpansionAdapter:function(e,t){this.states.columns.some((function(e){return"expand"===e.type}))?this.toggleRowExpansion(e,t):this.toggleTreeExpansion(e,t)}}});Pn.prototype.mutations={setData:function(e,t){var n=e._data!==t;e._data=t,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),e.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):n?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(e,t,n,i){var r=e._columns;i&&((r=i.children)||(r=i.children=[])),void 0!==n?r.splice(n,0,t):r.push(t),"selection"===t.type&&(e.selectable=t.selectable,e.reserveSelection=t.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(e,t,n){var i=e._columns;n&&((i=n.children)||(i=n.children=[])),i&&i.splice(i.indexOf(t),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(e,t){var n=t.prop,i=t.order,r=t.init;if(n){var o=Object(m.arrayFind)(e.columns,(function(e){return e.property===n}));o&&(o.order=i,this.updateSort(o,n,i),this.commit("changeSortCondition",{init:r}))}},changeSortCondition:function(e,t){var n=e.sortingColumn,i=e.sortProp,r=e.sortOrder;null===r&&(e.sortingColumn=null,e.sortProp=null);this.execQuery({filter:!0}),t&&(t.silent||t.init)||this.table.$emit("sort-change",{column:n,prop:i,order:r}),this.updateTableScrollY()},filterChange:function(e,t){var n=t.column,i=t.values,r=t.silent,o=this.updateFilters(n,i);this.execQuery(),r||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(e,t){this.toggleRowSelection(t),this.updateAllSelected()},setHoverRow:function(e,t){e.hoverRow=t},setCurrentRow:function(e,t){this.updateCurrentRow(t)}},Pn.prototype.commit=function(e){var t=this.mutations;if(!t[e])throw new Error("Action not found: "+e);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t[e].apply(this,[this.states].concat(i))},Pn.prototype.updateTableScrollY=function(){pn.a.nextTick(this.table.updateScrollY)};var Dn=Pn;function In(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n],r=void 0;"string"==typeof i?r=function(){return this.store.states[i]}:"function"==typeof i?r=function(){return i.call(this,this.store.states)}:console.error("invalid value type"),r&&(t[n]=r)})),t}var Nn=n(31),Fn=n.n(Nn);var Rn=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=Fn()(),t)t.hasOwnProperty(n)&&(this[n]=t[n]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return e.prototype.updateScrollY=function(){if(null===this.height)return!1;var e=this.table.bodyWrapper;if(this.table.$el&&e){var t=e.querySelector(".el-table__body"),n=this.scrollY,i=t.offsetHeight>this.bodyHeight;return this.scrollY=i,n!==i}return!1},e.prototype.setHeight=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";if(!pn.a.prototype.$isServer){var i=this.table.$el;if(e=Tn(e),this.height=e,!i&&(e||0===e))return pn.a.nextTick((function(){return t.setHeight(e,n)}));"number"==typeof e?(i.style[n]=e+"px",this.updateElsHeight()):"string"==typeof e&&(i.style[n]=e,this.updateElsHeight())}},e.prototype.setMaxHeight=function(e){this.setHeight(e,"max-height")},e.prototype.getFlattenColumns=function(){var e=[];return this.table.columns.forEach((function(t){t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)})),e},e.prototype.updateElsHeight=function(){var e=this;if(!this.table.$ready)return pn.a.nextTick((function(){return e.updateElsHeight()}));var t=this.table.$refs,n=t.headerWrapper,i=t.appendWrapper,r=t.footerWrapper;if(this.appendHeight=i?i.offsetHeight:0,!this.showHeader||n){var o=n?n.querySelector(".el-table__header tr"):null,a=this.headerDisplayNone(o),s=this.headerHeight=this.showHeader?n.offsetHeight:0;if(this.showHeader&&!a&&n.offsetWidth>0&&(this.table.columns||[]).length>0&&s<2)return pn.a.nextTick((function(){return e.updateElsHeight()}));var l=this.tableHeight=this.table.$el.clientHeight,c=this.footerHeight=r?r.offsetHeight:0;null!==this.height&&(this.bodyHeight=l-s-c+(r?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var u=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?l-(u?0:this.gutterWidth):l,this.updateScrollY(),this.notifyObservers("scrollable")}},e.prototype.headerDisplayNone=function(e){if(!e)return!0;for(var t=e;"DIV"!==t.tagName;){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1},e.prototype.updateColumnsWidth=function(){if(!pn.a.prototype.$isServer){var e=this.fit,t=this.table.$el.clientWidth,n=0,i=this.getFlattenColumns(),r=i.filter((function(e){return"number"!=typeof e.width}));if(i.forEach((function(e){"number"==typeof e.width&&e.realWidth&&(e.realWidth=null)})),r.length>0&&e){i.forEach((function(e){n+=e.width||e.minWidth||80}));var o=this.scrollY?this.gutterWidth:0;if(n<=t-o){this.scrollX=!1;var a=t-o-n;if(1===r.length)r[0].realWidth=(r[0].minWidth||80)+a;else{var s=a/r.reduce((function(e,t){return e+(t.minWidth||80)}),0),l=0;r.forEach((function(e,t){if(0!==t){var n=Math.floor((e.minWidth||80)*s);l+=n,e.realWidth=(e.minWidth||80)+n}})),r[0].realWidth=(r[0].minWidth||80)+a-l}}else this.scrollX=!0,r.forEach((function(e){e.realWidth=e.minWidth}));this.bodyWidth=Math.max(n,t),this.table.resizeState.width=this.bodyWidth}else i.forEach((function(e){e.width||e.minWidth?e.realWidth=e.width||e.minWidth:e.realWidth=80,n+=e.realWidth})),this.scrollX=n>t,this.bodyWidth=n;var c=this.store.states.fixedColumns;if(c.length>0){var u=0;c.forEach((function(e){u+=e.realWidth||e.width})),this.fixedWidth=u}var h=this.store.states.rightFixedColumns;if(h.length>0){var d=0;h.forEach((function(e){d+=e.realWidth||e.width})),this.rightFixedWidth=d}this.notifyObservers("columns")}},e.prototype.addObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)},e.prototype.notifyObservers=function(e){var t=this;this.observers.forEach((function(n){switch(e){case"columns":n.onColumnsChange(t);break;case"scrollable":n.onScrollableChange(t);break;default:throw new Error("Table Layout don't have event "+e+".")}}))},e}(),Bn={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var e=this.layout;if(!e&&this.table&&(e=this.table.layout),!e)throw new Error("Can not find table layout.");return e}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(e){var t=this.$el.querySelectorAll("colgroup > col");if(t.length){var n=e.getFlattenColumns(),i={};n.forEach((function(e){i[e.id]=e}));for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.getAttribute("name"),l=i[s];l&&a.setAttribute("width",l.realWidth||l.width)}}},onScrollableChange:function(e){for(var t=this.$el.querySelectorAll("colgroup > col[name=gutter]"),n=0,i=t.length;n<i;n++){t[n].setAttribute("width",e.scrollY?e.gutterWidth:"0")}for(var r=this.$el.querySelectorAll("th.gutter"),o=0,a=r.length;o<a;o++){var s=r[o];s.style.width=e.scrollY?e.gutterWidth+"px":"0",s.style.display=e.scrollY?"":"none"}}}},jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Un={name:"ElTableBody",mixins:[Bn],components:{ElCheckbox:sn.a,ElTooltip:Ce.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(e){var t=this,n=this.data||[];return e("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})}))]),e("tbody",[n.reduce((function(e,n){return e.concat(t.wrappedRowRender(n,e.length))}),[]),e("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:zn({table:function(){return this.$parent}},In({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length},hasExpandColumn:function(e){return e.columns.some((function(e){return"expand"===e.type}))}}),{firstDefaultColumnIndex:function(){return Object(m.arrayFindIndex)(this.columns,(function(e){return"default"===e.type}))}}),watch:{"store.states.hoverRow":function(e,t){var n=this;if(this.store.states.isComplex&&!this.$isServer){var i=window.requestAnimationFrame;i||(i=function(e){return setTimeout(e,16)}),i((function(){var i=n.$el.querySelectorAll(".el-table__row"),r=i[t],o=i[e];r&&Object(pe.removeClass)(r,"hover-row"),o&&Object(pe.addClass)(o,"hover-row")}))}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=L()(50,(function(e){return e.handleShowPopper()}))},methods:{getKeyOfRow:function(e,t){var n=this.table.rowKey;return n?wn(e,n):t},isColumnHidden:function(e){return!0===this.fixed||"left"===this.fixed?e>=this.leftFixedLeafCount:"right"===this.fixed?e<this.columnsCount-this.rightFixedLeafCount:e<this.leftFixedLeafCount||e>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(e,t,n,i){var r=1,o=1,a=this.table.spanMethod;if("function"==typeof a){var s=a({row:e,column:t,rowIndex:n,columnIndex:i});Array.isArray(s)?(r=s[0],o=s[1]):"object"===(void 0===s?"undefined":jn(s))&&(r=s.rowspan,o=s.colspan)}return{rowspan:r,colspan:o}},getRowStyle:function(e,t){var n=this.table.rowStyle;return"function"==typeof n?n.call(null,{row:e,rowIndex:t}):n||null},getRowClass:function(e,t){var n=["el-table__row"];this.table.highlightCurrentRow&&e===this.store.states.currentRow&&n.push("current-row"),this.stripe&&t%2==1&&n.push("el-table__row--striped");var i=this.table.rowClassName;return"string"==typeof i?n.push(i):"function"==typeof i&&n.push(i.call(null,{row:e,rowIndex:t})),this.store.states.expandRows.indexOf(e)>-1&&n.push("expanded"),n},getCellStyle:function(e,t,n,i){var r=this.table.cellStyle;return"function"==typeof r?r.call(null,{rowIndex:e,columnIndex:t,row:n,column:i}):r},getCellClass:function(e,t,n,i){var r=[i.id,i.align,i.className];this.isColumnHidden(t)&&r.push("is-hidden");var o=this.table.cellClassName;return"string"==typeof o?r.push(o):"function"==typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:t,row:n,column:i})),r.join(" ")},getColspanRealWidth:function(e,t,n){return t<1?e[n].realWidth:e.map((function(e){return e.realWidth})).slice(n,n+t).reduce((function(e,t){return e+t}),-1)},handleCellMouseEnter:function(e,t){var n=this.table,i=vn(e);if(i){var r=xn(n,i),o=n.hoverState={cell:i,column:r,row:t};n.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var a=e.target.querySelector(".cell");if(Object(pe.hasClass)(a,"el-tooltip")&&a.childNodes.length){var s=document.createRange();if(s.setStart(a,0),s.setEnd(a,a.childNodes.length),(s.getBoundingClientRect().width+((parseInt(Object(pe.getStyle)(a,"paddingLeft"),10)||0)+(parseInt(Object(pe.getStyle)(a,"paddingRight"),10)||0))>a.offsetWidth||a.scrollWidth>a.offsetWidth)&&this.$refs.tooltip){var l=this.$refs.tooltip;this.tooltipContent=i.innerText||i.textContent,l.referenceElm=i,l.$refs.popper&&(l.$refs.popper.style.display="none"),l.doDestroy(),l.setExpectedState(!0),this.activateTooltip(l)}}},handleCellMouseLeave:function(e){var t=this.$refs.tooltip;if(t&&(t.setExpectedState(!1),t.handleClosePopper()),vn(e)){var n=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",n.row,n.column,n.cell,e)}},handleMouseEnter:L()(30,(function(e){this.store.commit("setHoverRow",e)})),handleMouseLeave:L()(30,(function(){this.store.commit("setHoverRow",null)})),handleContextMenu:function(e,t){this.handleEvent(e,t,"contextmenu")},handleDoubleClick:function(e,t){this.handleEvent(e,t,"dblclick")},handleClick:function(e,t){this.store.commit("setCurrentRow",t),this.handleEvent(e,t,"click")},handleEvent:function(e,t,n){var i=this.table,r=vn(e),o=void 0;r&&(o=xn(i,r))&&i.$emit("cell-"+n,t,o,r,e),i.$emit("row-"+n,t,o,e)},rowRender:function(e,t,n){var i=this,r=this.$createElement,o=this.treeIndent,a=this.columns,s=this.firstDefaultColumnIndex,l=a.map((function(e,t){return i.isColumnHidden(t)})),c=this.getRowClass(e,t),u=!0;return n&&(c.push("el-table__row--level-"+n.level),u=n.display),r("tr",{style:[u?null:{display:"none"},this.getRowStyle(e,t)],class:c,key:this.getKeyOfRow(e,t),on:{dblclick:function(t){return i.handleDoubleClick(t,e)},click:function(t){return i.handleClick(t,e)},contextmenu:function(t){return i.handleContextMenu(t,e)},mouseenter:function(e){return i.handleMouseEnter(t)},mouseleave:this.handleMouseLeave}},[a.map((function(c,u){var h=i.getSpan(e,c,t,u),d=h.rowspan,f=h.colspan;if(!d||!f)return null;var p=zn({},c);p.realWidth=i.getColspanRealWidth(a,f,u);var m={store:i.store,_self:i.context||i.table.$vnode.context,column:p,row:e,$index:t};return u===s&&n&&(m.treeNode={indent:n.level*o,level:n.level},"boolean"==typeof n.expanded&&(m.treeNode.expanded=n.expanded,"loading"in n&&(m.treeNode.loading=n.loading),"noLazyChildren"in n&&(m.treeNode.noLazyChildren=n.noLazyChildren))),r("td",{style:i.getCellStyle(t,u,e,c),class:i.getCellClass(t,u,e,c),attrs:{rowspan:d,colspan:f},on:{mouseenter:function(t){return i.handleCellMouseEnter(t,e)},mouseleave:i.handleCellMouseLeave}},[c.renderCell.call(i._renderProxy,i.$createElement,m,l[u])])}))])},wrappedRowRender:function(e,t){var n=this,i=this.$createElement,r=this.store,o=r.isRowExpanded,a=r.assertRowKey,s=r.states,l=s.treeData,c=s.lazyTreeNodeMap,u=s.childrenColumnName,h=s.rowKey;if(this.hasExpandColumn&&o(e)){var d=this.table.renderExpanded,f=this.rowRender(e,t);return d?[[f,i("tr",{key:"expanded-row__"+f.key},[i("td",{attrs:{colspan:this.columnsCount},class:"el-table__expanded-cell"},[d(this.$createElement,{row:e,$index:t,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),f)}if(Object.keys(l).length){a();var p=wn(e,h),m=l[p],v=null;m&&(v={expanded:m.expanded,level:m.level,display:!0},"boolean"==typeof m.lazy&&("boolean"==typeof m.loaded&&m.loaded&&(v.noLazyChildren=!(m.children&&m.children.length)),v.loading=m.loading));var g=[this.rowRender(e,t,v)];if(m){var y=0;m.display=!0,function e(i,r){i&&i.length&&r&&i.forEach((function(i){var o={display:r.display&&r.expanded,level:r.level+1},a=wn(i,h);if(null==a)throw new Error("for nested data item, row-key is required.");if((m=zn({},l[a]))&&(o.expanded=m.expanded,m.level=m.level||o.level,m.display=!(!m.expanded||!o.display),"boolean"==typeof m.lazy&&("boolean"==typeof m.loaded&&m.loaded&&(o.noLazyChildren=!(m.children&&m.children.length)),o.loading=m.loading)),y++,g.push(n.rowRender(i,t+y,o)),m){var s=c[a]||i[u];e(s,m)}}))}(c[p]||e[u],m)}return g}return this.rowRender(e,t)}}},Vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"}},[e.multiple?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("div",{staticClass:"el-table-filter__content"},[n("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[n("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:e.filteredValue,callback:function(t){e.filteredValue=t},expression:"filteredValue"}},e._l(e.filters,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),n("div",{staticClass:"el-table-filter__bottom"},[n("button",{class:{"is-disabled":0===e.filteredValue.length},attrs:{disabled:0===e.filteredValue.length},on:{click:e.handleConfirm}},[e._v(e._s(e.t("el.table.confirmFilter")))]),n("button",{on:{click:e.handleReset}},[e._v(e._s(e.t("el.table.resetFilter")))])])]):n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("ul",{staticClass:"el-table-filter__list"},[n("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===e.filterValue||null===e.filterValue},on:{click:function(t){e.handleSelect(null)}}},[e._v(e._s(e.t("el.table.clearFilter")))]),e._l(e.filters,(function(t){return n("li",{key:t.value,staticClass:"el-table-filter__list-item",class:{"is-active":e.isActive(t)},attrs:{label:t.value},on:{click:function(n){e.handleSelect(t.value)}}},[e._v(e._s(t.text))])}))],2)])])};Vn._withStripped=!0;var Gn=[];!pn.a.prototype.$isServer&&document.addEventListener("click",(function(e){Gn.forEach((function(t){var n=e.target;t&&t.$el&&(n===t.$el||t.$el.contains(n)||t.handleOutsideClick&&t.handleOutsideClick(e))}))}));var Hn=function(e){e&&Gn.push(e)},Wn=function(e){-1!==Gn.indexOf(e)&&Gn.splice(e,1)},qn=n(32),Yn=n.n(qn),$n=r({name:"ElTableFilterPanel",mixins:[N.a,p.a],directives:{Clickoutside:P.a},components:{ElCheckbox:sn.a,ElCheckboxGroup:Yn.a,ElScrollbar:R.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(e){return e.value===this.filterValue},handleOutsideClick:function(){var e=this;setTimeout((function(){e.showPopper=!1}),16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(e){this.filterValue=e,null!=e?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(e){this.table.store.commit("filterChange",{column:this.column,values:e}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(e){this.filteredValue&&(null!=e?this.filteredValue.splice(0,1,e):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(e){this.column&&(this.column.filteredValue=e)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",(function(){e.updatePopper()})),this.$watch("showPopper",(function(t){e.column&&(e.column.filterOpened=t),t?Hn(e):Wn(e)}))},watch:{showPopper:function(e){!0===e&&parseInt(this.popperJS._popper.style.zIndex,10)<b.PopupManager.zIndex&&(this.popperJS._popper.style.zIndex=b.PopupManager.nextZIndex())}}},Vn,[],!1,null,null,null);$n.options.__file="packages/table/src/filter-panel.vue";var Xn=$n.exports,Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Kn=function(e){var t=1;e.forEach((function(e){e.level=1,function e(n,i){if(i&&(n.level=i.level+1,t<n.level&&(t=n.level)),n.children){var r=0;n.children.forEach((function(t){e(t,n),r+=t.colSpan})),n.colSpan=r}else n.colSpan=1}(e)}));for(var n=[],i=0;i<t;i++)n.push([]);return function e(t){var n=[];return t.forEach((function(t){t.children?(n.push(t),n.push.apply(n,e(t.children))):n.push(t)})),n}(e).forEach((function(e){e.children?e.rowSpan=1:e.rowSpan=t-e.level+1,n[e.level-1].push(e)})),n},Jn={name:"ElTableHeader",mixins:[Bn],render:function(e){var t=this,n=this.store.states.originColumns,i=Kn(n,this.columns),r=i.length>1;return r&&(this.$parent.isGroup=!0),e("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("thead",{class:[{"is-group":r,"has-gutter":this.hasGutter}]},[this._l(i,(function(n,i){return e("tr",{style:t.getHeaderRowStyle(i),class:t.getHeaderRowClass(i)},[n.map((function(r,o){return e("th",{attrs:{colspan:r.colSpan,rowspan:r.rowSpan},on:{mousemove:function(e){return t.handleMouseMove(e,r)},mouseout:t.handleMouseOut,mousedown:function(e){return t.handleMouseDown(e,r)},click:function(e){return t.handleHeaderClick(e,r)},contextmenu:function(e){return t.handleHeaderContextMenu(e,r)}},style:t.getHeaderCellStyle(i,o,n,r),class:t.getHeaderCellClass(i,o,n,r),key:r.id},[e("div",{class:["cell",r.filteredValue&&r.filteredValue.length>0?"highlight":"",r.labelClassName]},[r.renderHeader?r.renderHeader.call(t._renderProxy,e,{column:r,$index:o,store:t.store,_self:t.$parent.$vnode.context}):r.label,r.sortable?e("span",{class:"caret-wrapper",on:{click:function(e){return t.handleSortClick(e,r)}}},[e("i",{class:"sort-caret ascending",on:{click:function(e){return t.handleSortClick(e,r,"ascending")}}}),e("i",{class:"sort-caret descending",on:{click:function(e){return t.handleSortClick(e,r,"descending")}}})]):"",r.filterable?e("span",{class:"el-table__column-filter-trigger",on:{click:function(e){return t.handleFilterClick(e,r)}}},[e("i",{class:["el-icon-arrow-down",r.filterOpened?"el-icon-arrow-up":""]})]):""])])})),t.hasGutter?e("th",{class:"gutter"}):""])}))])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:sn.a},computed:Qn({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},In({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.defaultSort,n=t.prop,i=t.order;e.store.commit("sort",{prop:n,order:i,init:!0})}))},beforeDestroy:function(){var e=this.filterPanels;for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].$destroy(!0)},methods:{isCellHidden:function(e,t){for(var n=0,i=0;i<e;i++)n+=t[i].colSpan;var r=n+t[e].colSpan-1;return!0===this.fixed||"left"===this.fixed?r>=this.leftFixedLeafCount:"right"===this.fixed?n<this.columnsCount-this.rightFixedLeafCount:r<this.leftFixedLeafCount||n>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(e){var t=this.table.headerRowStyle;return"function"==typeof t?t.call(null,{rowIndex:e}):t},getHeaderRowClass:function(e){var t=[],n=this.table.headerRowClassName;return"string"==typeof n?t.push(n):"function"==typeof n&&t.push(n.call(null,{rowIndex:e})),t.join(" ")},getHeaderCellStyle:function(e,t,n,i){var r=this.table.headerCellStyle;return"function"==typeof r?r.call(null,{rowIndex:e,columnIndex:t,row:n,column:i}):r},getHeaderCellClass:function(e,t,n,i){var r=[i.id,i.order,i.headerAlign,i.className,i.labelClassName];0===e&&this.isCellHidden(t,n)&&r.push("is-hidden"),i.children||r.push("is-leaf"),i.sortable&&r.push("is-sortable");var o=this.table.headerCellClassName;return"string"==typeof o?r.push(o):"function"==typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:t,row:n,column:i})),r.join(" ")},toggleAllSelection:function(e){e.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(e,t){e.stopPropagation();var n=e.target,i="TH"===n.tagName?n:n.parentNode;if(!Object(pe.hasClass)(i,"noclick")){i=i.querySelector(".el-table__column-filter-trigger")||i;var r=this.$parent,o=this.filterPanels[t.id];o&&t.filterOpened?o.showPopper=!1:(o||(o=new pn.a(Xn),this.filterPanels[t.id]=o,t.filterPlacement&&(o.placement=t.filterPlacement),o.table=r,o.cell=i,o.column=t,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout((function(){o.showPopper=!0}),16))}},handleHeaderClick:function(e,t){!t.filters&&t.sortable?this.handleSortClick(e,t):t.filterable&&!t.sortable&&this.handleFilterClick(e,t),this.$parent.$emit("header-click",t,e)},handleHeaderContextMenu:function(e,t){this.$parent.$emit("header-contextmenu",t,e)},handleMouseDown:function(e,t){var n=this;if(!this.$isServer&&!(t.children&&t.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var i=this.$parent,r=i.$el.getBoundingClientRect().left,o=this.$el.querySelector("th."+t.id),a=o.getBoundingClientRect(),s=a.left-r+30;Object(pe.addClass)(o,"noclick"),this.dragState={startMouseLeft:e.clientX,startLeft:a.right-r,startColumnLeft:a.left-r,tableLeft:r};var l=i.$refs.resizeProxy;l.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var c=function(e){var t=e.clientX-n.dragState.startMouseLeft,i=n.dragState.startLeft+t;l.style.left=Math.max(s,i)+"px"};document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function r(){if(n.dragging){var a=n.dragState,s=a.startColumnLeft,u=a.startLeft,h=parseInt(l.style.left,10)-s;t.width=t.realWidth=h,i.$emit("header-dragend",t.width,u-s,t,e),n.store.scheduleLayout(),document.body.style.cursor="",n.dragging=!1,n.draggingColumn=null,n.dragState={},i.resizeProxyVisible=!1}document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",r),document.onselectstart=null,document.ondragstart=null,setTimeout((function(){Object(pe.removeClass)(o,"noclick")}),0)}))}},handleMouseMove:function(e,t){if(!(t.children&&t.children.length>0)){for(var n=e.target;n&&"TH"!==n.tagName;)n=n.parentNode;if(t&&t.resizable&&!this.dragging&&this.border){var i=n.getBoundingClientRect(),r=document.body.style;i.width>12&&i.right-e.pageX<8?(r.cursor="col-resize",Object(pe.hasClass)(n,"is-sortable")&&(n.style.cursor="col-resize"),this.draggingColumn=t):this.dragging||(r.cursor="",Object(pe.hasClass)(n,"is-sortable")&&(n.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(e){var t=e.order,n=e.sortOrders;if(""===t)return n[0];var i=n.indexOf(t||null);return n[i>n.length-2?0:i+1]},handleSortClick:function(e,t,n){e.stopPropagation();for(var i=t.order===n?null:n||this.toggleOrder(t),r=e.target;r&&"TH"!==r.tagName;)r=r.parentNode;if(r&&"TH"===r.tagName&&Object(pe.hasClass)(r,"noclick"))Object(pe.removeClass)(r,"noclick");else if(t.sortable){var o=this.store.states,a=o.sortProp,s=void 0,l=o.sortingColumn;(l!==t||l===t&&null===l.order)&&(l&&(l.order=null),o.sortingColumn=t,a=t.property),s=t.order=i||null,o.sortProp=a,o.sortOrder=s,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ei={name:"ElTableFooter",mixins:[Bn],render:function(e){var t=this,n=[];return this.summaryMethod?n=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach((function(e,i){if(0!==i){var r=t.store.states.data.map((function(t){return Number(t[e.property])})),o=[],a=!0;r.forEach((function(e){if(!isNaN(e)){a=!1;var t=(""+e).split(".")[1];o.push(t?t.length:0)}}));var s=Math.max.apply(null,o);n[i]=a?"":r.reduce((function(e,t){var n=Number(t);return isNaN(n)?e:parseFloat((e+t).toFixed(Math.min(s,20)))}),0)}else n[i]=t.sumText})),e("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("tbody",{class:[{"has-gutter":this.hasGutter}]},[e("tr",[this.columns.map((function(i,r){return e("td",{key:r,attrs:{colspan:i.colSpan,rowspan:i.rowSpan},class:t.getRowClasses(i,r)},[e("div",{class:["cell",i.labelClassName]},[n[r]])])})),this.hasGutter?e("th",{class:"gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:Zn({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},In({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),methods:{isCellHidden:function(e,t,n){if(!0===this.fixed||"left"===this.fixed)return e>=this.leftFixedLeafCount;if("right"===this.fixed){for(var i=0,r=0;r<e;r++)i+=t[r].colSpan;return i<this.columnsCount-this.rightFixedLeafCount}return!(this.fixed||!n.fixed)||(e<this.leftFixedCount||e>=this.columnsCount-this.rightFixedCount)},getRowClasses:function(e,t){var n=[e.id,e.align,e.labelClassName];return e.className&&n.push(e.className),this.isCellHidden(t,this.columns,e)&&n.push("is-hidden"),e.children||n.push("is-leaf"),n}}},ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ni=1,ii=r({name:"ElTable",mixins:[p.a,_.a],directives:{Mousewheel:dn},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:Jn,TableFooter:ei,TableBody:Un,ElCheckbox:sn.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(e){this.store.commit("setCurrentRow",e)},toggleRowSelection:function(e,t){this.store.toggleRowSelection(e,t,!1),this.store.updateAllSelected()},toggleRowExpansion:function(e,t){this.store.toggleRowExpansionAdapter(e,t)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(e){this.store.clearFilter(e)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){this.layout.updateScrollY()&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(e,t){var n=this.bodyWrapper;if(Math.abs(t.spinY)>0){var i=n.scrollTop;t.pixelY<0&&0!==i&&e.preventDefault(),t.pixelY>0&&n.scrollHeight-n.clientHeight>i&&e.preventDefault(),n.scrollTop+=Math.ceil(t.pixelY/5)}else n.scrollLeft+=Math.ceil(t.pixelX/5)},handleHeaderFooterMousewheel:function(e,t){var n=t.pixelX,i=t.pixelY;Math.abs(n)>=Math.abs(i)&&(this.bodyWrapper.scrollLeft+=t.pixelX/5)},syncPostion:Object(ln.throttle)(20,(function(){var e=this.bodyWrapper,t=e.scrollLeft,n=e.scrollTop,i=e.offsetWidth,r=e.scrollWidth,o=this.$refs,a=o.headerWrapper,s=o.footerWrapper,l=o.fixedBodyWrapper,c=o.rightFixedBodyWrapper;a&&(a.scrollLeft=t),s&&(s.scrollLeft=t),l&&(l.scrollTop=n),c&&(c.scrollTop=n);var u=r-i-1;this.scrollPosition=t>=u?"right":0===t?"left":"middle"})),bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(Rt.addResizeListener)(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(Rt.removeResizeListener)(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var e=!1,t=this.$el,n=this.resizeState,i=n.width,r=n.height,o=t.offsetWidth;i!==o&&(e=!0);var a=t.offsetHeight;(this.height||this.shouldUpdateHeight)&&r!==a&&(e=!0),e&&(this.resizeState.width=o,this.resizeState.height=a,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(e,t){this.store.commit("sort",{prop:e,order:t})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:ti({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var e=this.layout,t=e.bodyWidth,n=e.scrollY,i=e.gutterWidth;return t?t-(n?i:0)+"px":""},bodyHeight:function(){var e=this.layout,t=e.headerHeight,n=void 0===t?0:t,i=e.bodyHeight,r=e.footerHeight,o=void 0===r?0:r;if(this.height)return{height:i?i+"px":""};if(this.maxHeight){var a=Tn(this.maxHeight);if("number"==typeof a)return{"max-height":a-o-(this.showHeader?n:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var e=Tn(this.maxHeight);if("number"==typeof e)return e=this.layout.scrollX?e-this.layout.gutterWidth:e,this.showHeader&&(e-=this.layout.headerHeight),{"max-height":(e-=this.layout.footerHeight)+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var e="100%";return this.layout.appendHeight&&(e="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:e}}},In({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(e){this.layout.setHeight(e)}},maxHeight:{immediate:!0,handler:function(e){this.layout.setMaxHeight(e)}},currentRowKey:{immediate:!0,handler:function(e){this.rowKey&&this.store.setCurrentRowKey(e)}},data:{immediate:!0,handler:function(e){this.store.commit("setData",e)}},expandRowKeys:{immediate:!0,handler:function(e){e&&this.store.setExpandRowKeysAdapter(e)}}},created:function(){var e=this;this.tableId="el-table_"+ni++,this.debouncedUpdateLayout=Object(ln.debounce)(50,(function(){return e.doLayout()}))},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach((function(t){t.filteredValue&&t.filteredValue.length&&e.store.commit("filterChange",{column:t,values:t.filteredValue,silent:!0})})),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var e=this.treeProps,t=e.hasChildren,n=void 0===t?"hasChildren":t,i=e.children,r=void 0===i?"children":i;return this.store=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Table is required.");var n=new Dn;return n.table=e,n.toggleAllSelection=L()(10,n._toggleAllSelection),Object.keys(t).forEach((function(e){n.states[e]=t[e]})),n}(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:n,childrenColumnName:r}),{layout:new Rn({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader}),isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},on,[],!1,null,null,null);ii.options.__file="packages/table/src/table.vue";var ri=ii.exports;ri.install=function(e){e.component(ri.name,ri)};var oi=ri,ai={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},si={selection:{renderHeader:function(e,t){var n=t.store;return e("el-checkbox",{attrs:{disabled:n.states.data&&0===n.states.data.length,indeterminate:n.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(e,t){var n=t.row,i=t.column,r=t.store,o=t.$index;return e("el-checkbox",{nativeOn:{click:function(e){return e.stopPropagation()}},attrs:{value:r.isSelected(n),disabled:!!i.selectable&&!i.selectable.call(null,n,o)},on:{input:function(){r.commit("rowSelectedChanged",n)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(e,t){return t.column.label||"#"},renderCell:function(e,t){var n=t.$index,i=n+1,r=t.column.index;return"number"==typeof r?i=n+r:"function"==typeof r&&(i=r(n)),e("div",[i])},sortable:!1},expand:{renderHeader:function(e,t){return t.column.label||""},renderCell:function(e,t){var n=t.row,i=t.store,r=["el-table__expand-icon"];i.states.expandRows.indexOf(n)>-1&&r.push("el-table__expand-icon--expanded");return e("div",{class:r,on:{click:function(e){e.stopPropagation(),i.toggleRowExpansion(n)}}},[e("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function li(e,t){var n=t.row,i=t.column,r=t.$index,o=i.property,a=o&&Object(m.getPropByPath)(n,o).v;return i&&i.formatter?i.formatter(n,i,a,r):a}var ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ui=1,hi={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(e){return e.every((function(e){return["ascending","descending",null].indexOf(e)>-1}))}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){for(var e=this.$parent;e&&!e.tableId;)e=e.$parent;return e},columnOrTableParent:function(){for(var e=this.$parent;e&&!e.tableId&&!e.columnId;)e=e.$parent;return e},realWidth:function(){return Mn(this.width)},realMinWidth:function(){return void 0!==(e=this.minWidth)&&(e=Mn(e),isNaN(e)&&(e=80)),e;var e},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return Array.isArray(n)&&n.forEach((function(n){t[n]=e[n]})),t}),{})},getColumnElIndex:function(e,t){return[].indexOf.call(e,t)},setColumnWidth:function(e){return this.realWidth&&(e.width=this.realWidth),this.realMinWidth&&(e.minWidth=this.realMinWidth),e.minWidth||(e.minWidth=80),e.realWidth=void 0===e.width?e.minWidth:e.width,e},setColumnForcedProps:function(e){var t=e.type,n=si[t]||{};return Object.keys(n).forEach((function(t){var i=n[t];void 0!==i&&(e[t]="className"===t?e[t]+" "+i:i)})),e},setColumnRenders:function(e){var t=this;this.$createElement;this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==e.type&&(e.renderHeader=function(n,i){var r=t.$scopedSlots.header;return r?r(i):e.label});var n=e.renderCell;return"expand"===e.type?(e.renderCell=function(e,t){return e("div",{class:"cell"},[n(e,t)])},this.owner.renderExpanded=function(e,n){return t.$scopedSlots.default?t.$scopedSlots.default(n):t.$slots.default}):(n=n||li,e.renderCell=function(i,r){var o=null;o=t.$scopedSlots.default?t.$scopedSlots.default(r):n(i,r);var a=function(e,t){var n=t.row,i=t.treeNode,r=t.store;if(!i)return null;var o=[];if(i.indent&&o.push(e("span",{class:"el-table__indent",style:{"padding-left":i.indent+"px"}})),"boolean"!=typeof i.expanded||i.noLazyChildren)o.push(e("span",{class:"el-table__placeholder"}));else{var a=["el-table__expand-icon",i.expanded?"el-table__expand-icon--expanded":""],s=["el-icon-arrow-right"];i.loading&&(s=["el-icon-loading"]),o.push(e("div",{class:a,on:{click:function(e){e.stopPropagation(),r.loadOrToggle(n)}}},[e("i",{class:s})]))}return o}(i,r),s={class:"cell",style:{}};return e.showOverflowTooltip&&(s.class+=" el-tooltip",s.style={width:(r.column.realWidth||r.column.width)-1+"px"}),i("div",s,[a,o])}),e},registerNormalWatchers:function(){var e=this,t={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},n=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"].reduce((function(e,t){return e[t]=t,e}),t);Object.keys(n).forEach((function(n){var i=t[n];e.$watch(n,(function(t){e.columnConfig[i]=t}))}))},registerComplexWatchers:function(){var e=this,t={realWidth:"width",realMinWidth:"minWidth"},n=["fixed"].reduce((function(e,t){return e[t]=t,e}),t);Object.keys(n).forEach((function(n){var i=t[n];e.$watch(n,(function(t){e.columnConfig[i]=t;var n="fixed"===i;e.owner.store.scheduleLayout(n)}))}))}},components:{ElCheckbox:sn.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var e=this.columnOrTableParent;this.isSubColumn=this.owner!==e,this.columnId=(e.tableId||e.columnId)+"_column_"+ui++;var t=this.type||"default",n=""===this.sortable||this.sortable,i=ci({},ai[t],{id:this.columnId,type:t,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:n,index:this.index}),r=this.getPropsData(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);r=function(e,t){var n={},i=void 0;for(i in e)n[i]=e[i];for(i in t)if(Sn(t,i)){var r=t[i];void 0!==r&&(n[i]=r)}return n}(i,r),r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps)(r),this.columnConfig=r,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var e=this.owner,t=this.columnOrTableParent,n=this.isSubColumn?t.$el.children:t.$refs.hiddenColumns.children,i=this.getColumnElIndex(n,this.$el);e.store.commit("insertColumn",this.columnConfig,i,this.isSubColumn?t.columnConfig:null)},destroyed:function(){if(this.$parent){var e=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?e.columnConfig:null)}},render:function(e){return e("div",this.$slots.default)},install:function(e){e.component(hi.name,hi)}},di=hi,fi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ranged?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor el-range-editor el-input__inner",class:["el-date-editor--"+e.type,e.pickerSize?"el-range-editor--"+e.pickerSize:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":""],on:{click:e.handleRangeClick,mouseenter:e.handleMouseEnter,mouseleave:function(t){e.showClose=!1},keydown:e.handleKeydown}},[n("i",{class:["el-input__icon","el-range__icon",e.triggerClass]}),n("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.startPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[0]},domProps:{value:e.displayValue&&e.displayValue[0]},on:{input:e.handleStartInput,change:e.handleStartChange,focus:e.handleFocus}},"input",e.firstInputId,!1)),e._t("range-separator",[n("span",{staticClass:"el-range-separator"},[e._v(e._s(e.rangeSeparator))])]),n("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.endPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[1]},domProps:{value:e.displayValue&&e.displayValue[1]},on:{input:e.handleEndInput,change:e.handleEndChange,focus:e.handleFocus}},"input",e.secondInputId,!1)),e.haveTrigger?n("i",{staticClass:"el-input__icon el-range__close-icon",class:[e.showClose?""+e.clearIcon:""],on:{click:e.handleClickIcon}}):e._e()],2):n("el-input",e._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor",class:"el-date-editor--"+e.type,attrs:{readonly:!e.editable||e.readonly||"dates"===e.type||"week"===e.type,disabled:e.pickerDisabled,size:e.pickerSize,name:e.name,placeholder:e.placeholder,value:e.displayValue,validateEvent:!1},on:{focus:e.handleFocus,input:function(t){return e.userInput=t},change:e.handleChange},nativeOn:{keydown:function(t){return e.handleKeydown(t)},mouseenter:function(t){return e.handleMouseEnter(t)},mouseleave:function(t){e.showClose=!1}}},"el-input",e.firstInputId,!1),[n("i",{staticClass:"el-input__icon",class:e.triggerClass,attrs:{slot:"prefix"},on:{click:e.handleFocus},slot:"prefix"}),e.haveTrigger?n("i",{staticClass:"el-input__icon",class:[e.showClose?""+e.clearIcon:""],attrs:{slot:"suffix"},on:{click:e.handleClickIcon},slot:"suffix"}):e._e()])};fi._withStripped=!0;var pi=n(0),mi={props:{appendToBody:N.a.props.appendToBody,offset:N.a.props.offset,boundariesPadding:N.a.props.boundariesPadding,arrowOffset:N.a.props.arrowOffset},methods:N.a.methods,data:function(){return Ve()({visibleArrow:!0},N.a.data)},beforeDestroy:N.a.beforeDestroy},vi={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},gi=["date","datetime","time","time-select","week","month","year","daterange","monthrange","timerange","datetimerange","dates"],yi=function(e,t){return"timestamp"===t?e.getTime():Object(pi.formatDate)(e,t)},bi=function(e,t){return"timestamp"===t?new Date(Number(e)):Object(pi.parseDate)(e,t)},xi=function(e,t){if(Array.isArray(e)&&2===e.length){var n=e[0],i=e[1];if(n&&i)return[yi(n,t),yi(i,t)]}return""},wi=function(e,t,n){if(Array.isArray(e)||(e=e.split(n)),2===e.length){var i=e[0],r=e[1];return[bi(i,t),bi(r,t)]}return[]},_i={default:{formatter:function(e){return e?""+e:""},parser:function(e){return void 0===e||""===e?null:e}},week:{formatter:function(e,t){var n=Object(pi.getWeekNumber)(e),i=e.getMonth(),r=new Date(e);1===n&&11===i&&(r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7));var o=Object(pi.formatDate)(r,t);return o=/WW/.test(o)?o.replace(/WW/,n<10?"0"+n:n):o.replace(/W/,n)},parser:function(e,t){return _i.date.parser(e,t)}},date:{formatter:yi,parser:bi},datetime:{formatter:yi,parser:bi},daterange:{formatter:xi,parser:wi},monthrange:{formatter:xi,parser:wi},datetimerange:{formatter:xi,parser:wi},timerange:{formatter:xi,parser:wi},time:{formatter:yi,parser:bi},month:{formatter:yi,parser:bi},year:{formatter:yi,parser:bi},number:{formatter:function(e){return e?""+e:""},parser:function(e){var t=Number(e);return isNaN(e)?null:t}},dates:{formatter:function(e,t){return e.map((function(e){return yi(e,t)}))},parser:function(e,t){return("string"==typeof e?e.split(", "):e).map((function(e){return e instanceof Date?e:bi(e,t)}))}}},Si={left:"bottom-start",center:"bottom",right:"bottom-end"},Mi=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(!e)return null;var r=(_i[n]||_i.default).parser,o=t||vi[n];return r(e,o,i)},Ti=function(e,t,n){return e?(0,(_i[n]||_i.default).formatter)(e,t||vi[n]):null},Ei=function(e,t){var n=function(e,t){var n=e instanceof Date,i=t instanceof Date;return n&&i?e.getTime()===t.getTime():!n&&!i&&e===t},i=e instanceof Array,r=t instanceof Array;return i&&r?e.length===t.length&&e.every((function(e,i){return n(e,t[i])})):!i&&!r&&n(e,t)},Ci=function(e){return"string"==typeof e||e instanceof String},Ai=function(e){return null==e||Ci(e)||Array.isArray(e)&&2===e.length&&e.every(Ci)},Oi=r({mixins:[M.a,mi],inject:{elForm:{default:""},elFormItem:{default:""}},props:{size:String,format:String,valueFormat:String,readonly:Boolean,placeholder:String,startPlaceholder:String,endPlaceholder:String,prefixIcon:String,clearIcon:{type:String,default:"el-icon-circle-close"},name:{default:"",validator:Ai},disabled:Boolean,clearable:{type:Boolean,default:!0},id:{default:"",validator:Ai},popperClass:String,editable:{type:Boolean,default:!0},align:{type:String,default:"left"},value:{},defaultValue:{},defaultTime:{},rangeSeparator:{default:"-"},pickerOptions:{},unlinkPanels:Boolean,validateEvent:{type:Boolean,default:!0}},components:{ElInput:d.a},directives:{Clickoutside:P.a},data:function(){return{pickerVisible:!1,showClose:!1,userInput:null,valueOnOpen:null,unwatchPickerOptions:null}},watch:{pickerVisible:function(e){this.readonly||this.pickerDisabled||(e?(this.showPicker(),this.valueOnOpen=Array.isArray(this.value)?[].concat(this.value):this.value):(this.hidePicker(),this.emitChange(this.value),this.userInput=null,this.validateEvent&&this.dispatch("ElFormItem","el.form.blur"),this.$emit("blur",this),this.blur()))},parsedValue:{immediate:!0,handler:function(e){this.picker&&(this.picker.value=e)}},defaultValue:function(e){this.picker&&(this.picker.defaultValue=e)},value:function(e,t){Ei(e,t)||this.pickerVisible||!this.validateEvent||this.dispatch("ElFormItem","el.form.change",e)}},computed:{ranged:function(){return this.type.indexOf("range")>-1},reference:function(){var e=this.$refs.reference;return e.$el||e},refInput:function(){return this.reference?[].slice.call(this.reference.querySelectorAll("input")):[]},valueIsEmpty:function(){var e=this.value;if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(e[t])return!1}else if(e)return!1;return!0},triggerClass:function(){return this.prefixIcon||(-1!==this.type.indexOf("time")?"el-icon-time":"el-icon-date")},selectionMode:function(){return"week"===this.type?"week":"month"===this.type?"month":"year"===this.type?"year":"dates"===this.type?"dates":"day"},haveTrigger:function(){return void 0!==this.showTrigger?this.showTrigger:-1!==gi.indexOf(this.type)},displayValue:function(){var e=Ti(this.parsedValue,this.format,this.type,this.rangeSeparator);return Array.isArray(this.userInput)?[this.userInput[0]||e&&e[0]||"",this.userInput[1]||e&&e[1]||""]:null!==this.userInput?this.userInput:e?"dates"===this.type?e.join(", "):e:""},parsedValue:function(){return this.value?"time-select"===this.type||Object(pi.isDateObject)(this.value)||Array.isArray(this.value)&&this.value.every(pi.isDateObject)?this.value:this.valueFormat?Mi(this.value,this.valueFormat,this.type,this.rangeSeparator)||this.value:Array.isArray(this.value)?this.value.map((function(e){return new Date(e)})):new Date(this.value):this.value},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},pickerSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},pickerDisabled:function(){return this.disabled||(this.elForm||{}).disabled},firstInputId:function(){var e={},t=void 0;return(t=this.ranged?this.id&&this.id[0]:this.id)&&(e.id=t),e},secondInputId:function(){var e={},t=void 0;return this.ranged&&(t=this.id&&this.id[1]),t&&(e.id=t),e}},created:function(){this.popperOptions={boundariesPadding:0,gpuAcceleration:!1},this.placement=Si[this.align]||Si.left,this.$on("fieldReset",this.handleFieldReset)},methods:{focus:function(){this.ranged?this.handleFocus():this.$refs.reference.focus()},blur:function(){this.refInput.forEach((function(e){return e.blur()}))},parseValue:function(e){var t=Object(pi.isDateObject)(e)||Array.isArray(e)&&e.every(pi.isDateObject);return this.valueFormat&&!t&&Mi(e,this.valueFormat,this.type,this.rangeSeparator)||e},formatToValue:function(e){var t=Object(pi.isDateObject)(e)||Array.isArray(e)&&e.every(pi.isDateObject);return this.valueFormat&&t?Ti(e,this.valueFormat,this.type,this.rangeSeparator):e},parseString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return Mi(e,this.format,t)},formatToString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return Ti(e,this.format,t)},handleMouseEnter:function(){this.readonly||this.pickerDisabled||!this.valueIsEmpty&&this.clearable&&(this.showClose=!0)},handleChange:function(){if(this.userInput){var e=this.parseString(this.displayValue);e&&(this.picker.value=e,this.isValidValue(e)&&(this.emitInput(e),this.userInput=null))}""===this.userInput&&(this.emitInput(null),this.emitChange(null),this.userInput=null)},handleStartInput:function(e){this.userInput?this.userInput=[e.target.value,this.userInput[1]]:this.userInput=[e.target.value,null]},handleEndInput:function(e){this.userInput?this.userInput=[this.userInput[0],e.target.value]:this.userInput=[null,e.target.value]},handleStartChange:function(e){var t=this.parseString(this.userInput&&this.userInput[0]);if(t){this.userInput=[this.formatToString(t),this.displayValue[1]];var n=[t,this.picker.value&&this.picker.value[1]];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleEndChange:function(e){var t=this.parseString(this.userInput&&this.userInput[1]);if(t){this.userInput=[this.displayValue[0],this.formatToString(t)];var n=[this.picker.value&&this.picker.value[0],t];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleClickIcon:function(e){this.readonly||this.pickerDisabled||(this.showClose?(this.valueOnOpen=this.value,e.stopPropagation(),this.emitInput(null),this.emitChange(null),this.showClose=!1,this.picker&&"function"==typeof this.picker.handleClear&&this.picker.handleClear()):this.pickerVisible=!this.pickerVisible)},handleClose:function(){if(this.pickerVisible&&(this.pickerVisible=!1,"dates"===this.type)){var e=Mi(this.valueOnOpen,this.valueFormat,this.type,this.rangeSeparator)||this.valueOnOpen;this.emitInput(e)}},handleFieldReset:function(e){this.userInput=""===e?null:e},handleFocus:function(){var e=this.type;-1===gi.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},handleKeydown:function(e){var t=this,n=e.keyCode;return 27===n?(this.pickerVisible=!1,void e.stopPropagation()):9!==n?13===n?((""===this.userInput||this.isValidValue(this.parseString(this.displayValue)))&&(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur()),void e.stopPropagation()):void(this.userInput?e.stopPropagation():this.picker&&this.picker.handleKeydown&&this.picker.handleKeydown(e)):void(this.ranged?setTimeout((function(){-1===t.refInput.indexOf(document.activeElement)&&(t.pickerVisible=!1,t.blur(),e.stopPropagation())}),0):(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur(),e.stopPropagation()))},handleRangeClick:function(){var e=this.type;-1===gi.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},hidePicker:function(){this.picker&&(this.picker.resetView&&this.picker.resetView(),this.pickerVisible=this.picker.visible=!1,this.destroyPopper())},showPicker:function(){var e=this;this.$isServer||(this.picker||this.mountPicker(),this.pickerVisible=this.picker.visible=!0,this.updatePopper(),this.picker.value=this.parsedValue,this.picker.resetView&&this.picker.resetView(),this.$nextTick((function(){e.picker.adjustSpinners&&e.picker.adjustSpinners()})))},mountPicker:function(){var e=this;this.picker=new pn.a(this.panel).$mount(),this.picker.defaultValue=this.defaultValue,this.picker.defaultTime=this.defaultTime,this.picker.popperClass=this.popperClass,this.popperElm=this.picker.$el,this.picker.width=this.reference.getBoundingClientRect().width,this.picker.showTime="datetime"===this.type||"datetimerange"===this.type,this.picker.selectionMode=this.selectionMode,this.picker.unlinkPanels=this.unlinkPanels,this.picker.arrowControl=this.arrowControl||this.timeArrowControl||!1,this.$watch("format",(function(t){e.picker.format=t}));var t=function(){var t=e.pickerOptions;if(t&&t.selectableRange){var n=t.selectableRange,i=_i.datetimerange.parser,r=vi.timerange;n=Array.isArray(n)?n:[n],e.picker.selectableRange=n.map((function(t){return i(t,r,e.rangeSeparator)}))}for(var o in t)t.hasOwnProperty(o)&&"selectableRange"!==o&&(e.picker[o]=t[o]);e.format&&(e.picker.format=e.format)};t(),this.unwatchPickerOptions=this.$watch("pickerOptions",(function(){return t()}),{deep:!0}),this.$el.appendChild(this.picker.$el),this.picker.resetView&&this.picker.resetView(),this.picker.$on("dodestroy",this.doDestroy),this.picker.$on("pick",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.userInput=null,e.pickerVisible=e.picker.visible=n,e.emitInput(t),e.picker.resetView&&e.picker.resetView()})),this.picker.$on("select-range",(function(t,n,i){0!==e.refInput.length&&(i&&"min"!==i?"max"===i&&(e.refInput[1].setSelectionRange(t,n),e.refInput[1].focus()):(e.refInput[0].setSelectionRange(t,n),e.refInput[0].focus()))}))},unmountPicker:function(){this.picker&&(this.picker.$destroy(),this.picker.$off(),"function"==typeof this.unwatchPickerOptions&&this.unwatchPickerOptions(),this.picker.$el.parentNode.removeChild(this.picker.$el))},emitChange:function(e){Ei(e,this.valueOnOpen)||(this.$emit("change",e),this.valueOnOpen=e,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",e))},emitInput:function(e){var t=this.formatToValue(e);Ei(this.value,t)||this.$emit("input",t)},isValidValue:function(e){return this.picker||this.mountPicker(),!this.picker.isValidValue||e&&this.picker.isValidValue(e)}}},fi,[],!1,null,null,null);Oi.options.__file="packages/date-picker/src/picker.vue";var Li=Oi.exports,ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-enter":e.handleEnter,"after-leave":e.handleLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[e.showTime?n("div",{staticClass:"el-date-picker__time-header"},[n("span",{staticClass:"el-date-picker__editor-wrap"},[n("el-input",{attrs:{placeholder:e.t("el.datepicker.selectDate"),value:e.visibleDate,size:"small"},on:{input:function(t){return e.userInputDate=t},change:e.handleVisibleDateChange}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleTimePickClose,expression:"handleTimePickClose"}],staticClass:"el-date-picker__editor-wrap"},[n("el-input",{ref:"input",attrs:{placeholder:e.t("el.datepicker.selectTime"),value:e.visibleTime,size:"small"},on:{focus:function(t){e.timePickerVisible=!0},input:function(t){return e.userInputTime=t},change:e.handleVisibleTimeChange}}),n("time-picker",{ref:"timepicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.timePickerVisible},on:{pick:e.handleTimePick,mounted:e.proxyTimePickerDataProperties}})],1)]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"time"!==e.currentView,expression:"currentView !== 'time'"}],staticClass:"el-date-picker__header",class:{"el-date-picker__header--bordered":"year"===e.currentView||"month"===e.currentView}},[n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-d-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevYear")},on:{click:e.prevYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevMonth")},on:{click:e.prevMonth}}),n("span",{staticClass:"el-date-picker__header-label",attrs:{role:"button"},on:{click:e.showYearPicker}},[e._v(e._s(e.yearLabel))]),n("span",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-date-picker__header-label",class:{active:"month"===e.currentView},attrs:{role:"button"},on:{click:e.showMonthPicker}},[e._v(e._s(e.t("el.datepicker.month"+(e.month+1))))]),n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-d-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextYear")},on:{click:e.nextYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextMonth")},on:{click:e.nextMonth}})]),n("div",{staticClass:"el-picker-panel__content"},[n("date-table",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],attrs:{"selection-mode":e.selectionMode,"first-day-of-week":e.firstDayOfWeek,value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"cell-class-name":e.cellClassName,"disabled-date":e.disabledDate},on:{pick:e.handleDatePick}}),n("year-table",{directives:[{name:"show",rawName:"v-show",value:"year"===e.currentView,expression:"currentView === 'year'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleYearPick}}),n("month-table",{directives:[{name:"show",rawName:"v-show",value:"month"===e.currentView,expression:"currentView === 'month'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleMonthPick}})],1)])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.footerVisible&&"date"===e.currentView,expression:"footerVisible && currentView === 'date'"}],staticClass:"el-picker-panel__footer"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"dates"!==e.selectionMode,expression:"selectionMode !== 'dates'"}],staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.changeToNow}},[e._v("\n        "+e._s(e.t("el.datepicker.now"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1)])])};ki._withStripped=!0;var Pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-panel el-popper",class:e.popperClass},[n("div",{staticClass:"el-time-panel__content",class:{"has-seconds":e.showSeconds}},[n("time-spinner",{ref:"spinner",attrs:{"arrow-control":e.useArrow,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,date:e.date},on:{change:e.handleChange,"select-range":e.setSelectionRange}})],1),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(e.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn",class:{confirm:!e.disabled},attrs:{type:"button"},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])};Pi._withStripped=!0;var Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-time-spinner",class:{"has-seconds":e.showSeconds}},[e.arrowControl?e._e():[n("el-scrollbar",{ref:"hours",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("hours")},mousemove:function(t){e.adjustCurrentSpinner("hours")}}},e._l(e.hoursList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.hours,disabled:t},on:{click:function(n){e.handleClick("hours",{value:i,disabled:t})}}},[e._v(e._s(("0"+(e.amPmMode?i%12||12:i)).slice(-2))+e._s(e.amPm(i)))])})),0),n("el-scrollbar",{ref:"minutes",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("minutes")},mousemove:function(t){e.adjustCurrentSpinner("minutes")}}},e._l(e.minutesList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.minutes,disabled:!t},on:{click:function(t){e.handleClick("minutes",{value:i,disabled:!1})}}},[e._v(e._s(("0"+i).slice(-2)))])})),0),n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.showSeconds,expression:"showSeconds"}],ref:"seconds",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("seconds")},mousemove:function(t){e.adjustCurrentSpinner("seconds")}}},e._l(60,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.seconds},on:{click:function(t){e.handleClick("seconds",{value:i,disabled:!1})}}},[e._v(e._s(("0"+i).slice(-2)))])})),0)],e.arrowControl?[n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("hours")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"hours",staticClass:"el-time-spinner__list"},e._l(e.arrowHourList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:t===e.hours,disabled:e.hoursList[t]}},[e._v(e._s(void 0===t?"":("0"+(e.amPmMode?t%12||12:t)).slice(-2)+e.amPm(t)))])})),0)]),n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("minutes")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"minutes",staticClass:"el-time-spinner__list"},e._l(e.arrowMinuteList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:t===e.minutes}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]),e.showSeconds?n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("seconds")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"seconds",staticClass:"el-time-spinner__list"},e._l(e.arrowSecondList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:t===e.seconds}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]):e._e()]:e._e()],2)};Di._withStripped=!0;var Ii=r({components:{ElScrollbar:R.a},directives:{repeatClick:$e},props:{date:{},defaultValue:{},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""}},computed:{hours:function(){return this.date.getHours()},minutes:function(){return this.date.getMinutes()},seconds:function(){return this.date.getSeconds()},hoursList:function(){return Object(pi.getRangeHours)(this.selectableRange)},minutesList:function(){return Object(pi.getRangeMinutes)(this.selectableRange,this.hours)},arrowHourList:function(){var e=this.hours;return[e>0?e-1:void 0,e,e<23?e+1:void 0]},arrowMinuteList:function(){var e=this.minutes;return[e>0?e-1:void 0,e,e<59?e+1:void 0]},arrowSecondList:function(){var e=this.seconds;return[e>0?e-1:void 0,e,e<59?e+1:void 0]}},data:function(){return{selectableRange:[],currentScrollbar:null}},mounted:function(){var e=this;this.$nextTick((function(){!e.arrowControl&&e.bindScrollEvent()}))},methods:{increase:function(){this.scrollDown(1)},decrease:function(){this.scrollDown(-1)},modifyDateField:function(e,t){switch(e){case"hours":this.$emit("change",Object(pi.modifyTime)(this.date,t,this.minutes,this.seconds));break;case"minutes":this.$emit("change",Object(pi.modifyTime)(this.date,this.hours,t,this.seconds));break;case"seconds":this.$emit("change",Object(pi.modifyTime)(this.date,this.hours,this.minutes,t))}},handleClick:function(e,t){var n=t.value;t.disabled||(this.modifyDateField(e,n),this.emitSelectRange(e),this.adjustSpinner(e,n))},emitSelectRange:function(e){"hours"===e?this.$emit("select-range",0,2):"minutes"===e?this.$emit("select-range",3,5):"seconds"===e&&this.$emit("select-range",6,8),this.currentScrollbar=e},bindScrollEvent:function(){var e=this,t=function(t){e.$refs[t].wrap.onscroll=function(n){e.handleScroll(t,n)}};t("hours"),t("minutes"),t("seconds")},handleScroll:function(e){var t=Math.min(Math.round((this.$refs[e].wrap.scrollTop-(.5*this.scrollBarHeight(e)-10)/this.typeItemHeight(e)+3)/this.typeItemHeight(e)),"hours"===e?23:59);this.modifyDateField(e,t)},adjustSpinners:function(){this.adjustSpinner("hours",this.hours),this.adjustSpinner("minutes",this.minutes),this.adjustSpinner("seconds",this.seconds)},adjustCurrentSpinner:function(e){this.adjustSpinner(e,this[e])},adjustSpinner:function(e,t){if(!this.arrowControl){var n=this.$refs[e].wrap;n&&(n.scrollTop=Math.max(0,t*this.typeItemHeight(e)))}},scrollDown:function(e){var t=this;this.currentScrollbar||this.emitSelectRange("hours");var n=this.currentScrollbar,i=this.hoursList,r=this[n];if("hours"===this.currentScrollbar){var o=Math.abs(e);e=e>0?1:-1;for(var a=i.length;a--&&o;)i[r=(r+e+i.length)%i.length]||o--;if(i[r])return}else r=(r+e+60)%60;this.modifyDateField(n,r),this.adjustSpinner(n,r),this.$nextTick((function(){return t.emitSelectRange(t.currentScrollbar)}))},amPm:function(e){if(!("a"===this.amPmMode.toLowerCase()))return"";var t=e<12?" am":" pm";return"A"===this.amPmMode&&(t=t.toUpperCase()),t},typeItemHeight:function(e){return this.$refs[e].$el.querySelector("li").offsetHeight},scrollBarHeight:function(e){return this.$refs[e].$el.offsetHeight}}},Di,[],!1,null,null,null);Ii.options.__file="packages/date-picker/src/basic/time-spinner.vue";var Ni=Ii.exports,Fi=r({mixins:[p.a],components:{TimeSpinner:Ni},props:{visible:Boolean,timeArrowControl:Boolean},watch:{visible:function(e){var t=this;e?(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.spinner.emitSelectRange("hours")}))):this.needInitAdjust=!0},value:function(e){var t=this,n=void 0;e instanceof Date?n=Object(pi.limitTimeRange)(e,this.selectableRange,this.format):e||(n=this.defaultValue?new Date(this.defaultValue):new Date),this.date=n,this.visible&&this.needInitAdjust&&(this.$nextTick((function(e){return t.adjustSpinners()})),this.needInitAdjust=!1)},selectableRange:function(e){this.$refs.spinner.selectableRange=e},defaultValue:function(e){Object(pi.isDate)(this.value)||(this.date=e?new Date(e):new Date)}},data:function(){return{popperClass:"",format:"HH:mm:ss",value:"",defaultValue:null,date:new Date,oldValue:new Date,selectableRange:[],selectionRange:[0,2],disabled:!1,arrowControl:!1,needInitAdjust:!0}},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},useArrow:function(){return this.arrowControl||this.timeArrowControl||!1},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},methods:{handleCancel:function(){this.$emit("pick",this.oldValue,!1)},handleChange:function(e){this.visible&&(this.date=Object(pi.clearMilliseconds)(e),this.isValidValue(this.date)&&this.$emit("pick",this.date,!0))},setSelectionRange:function(e,t){this.$emit("select-range",e,t),this.selectionRange=[e,t]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(!t){var n=Object(pi.clearMilliseconds)(Object(pi.limitTimeRange)(this.date,this.selectableRange,this.format));this.$emit("pick",n,e,t)}},handleKeydown:function(e){var t=e.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var i=n[t];return this.changeSelectionRange(i),void e.preventDefault()}if(38===t||40===t){var r=n[t];return this.$refs.spinner.scrollDown(r),void e.preventDefault()}},isValidValue:function(e){return Object(pi.timeWithinRange)(e,this.selectableRange,this.format)},adjustSpinners:function(){return this.$refs.spinner.adjustSpinners()},changeSelectionRange:function(e){var t=[0,3].concat(this.showSeconds?[6]:[]),n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=(t.indexOf(this.selectionRange[0])+e+t.length)%t.length;this.$refs.spinner.emitSelectRange(n[i])}},mounted:function(){var e=this;this.$nextTick((function(){return e.handleConfirm(!0,!0)})),this.$emit("mounted")}},Pi,[],!1,null,null,null);Fi.options.__file="packages/date-picker/src/panel/time.vue";var Ri=Fi.exports,Bi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-year-table",on:{click:e.handleYearTableClick}},[n("tbody",[n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+0)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+1)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+1))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+2)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+2))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+3)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+3))])])]),n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+4)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+4))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+5)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+5))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+6)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+6))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+7)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+7))])])]),n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+8)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+8))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+9)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+9))])]),n("td"),n("td")])])])};Bi._withStripped=!0;var ji=r({props:{disabledDate:{},value:{},defaultValue:{validator:function(e){return null===e||e instanceof Date&&Object(pi.isDate)(e)}},date:{}},computed:{startYear:function(){return 10*Math.floor(this.date.getFullYear()/10)}},methods:{getCellStyle:function(e){var t={},n=new Date;return t.disabled="function"==typeof this.disabledDate&&function(e){var t=Object(pi.getDayCountOfYear)(e),n=new Date(e,0,1);return Object(pi.range)(t).map((function(e){return Object(pi.nextDate)(n,e)}))}(e).every(this.disabledDate),t.current=Object(m.arrayFindIndex)(Object(m.coerceTruthyValueToArray)(this.value),(function(t){return t.getFullYear()===e}))>=0,t.today=n.getFullYear()===e,t.default=this.defaultValue&&this.defaultValue.getFullYear()===e,t},handleYearTableClick:function(e){var t=e.target;if("A"===t.tagName){if(Object(pe.hasClass)(t.parentNode,"disabled"))return;var n=t.textContent||t.innerText;this.$emit("pick",Number(n))}}}},Bi,[],!1,null,null,null);ji.options.__file="packages/date-picker/src/basic/year-table.vue";var zi=ji.exports,Ui=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-month-table",on:{click:e.handleMonthTableClick,mousemove:e.handleMouseMove}},[n("tbody",e._l(e.rows,(function(t,i){return n("tr",{key:i},e._l(t,(function(t,i){return n("td",{key:i,class:e.getCellStyle(t)},[n("div",[n("a",{staticClass:"cell"},[e._v(e._s(e.t("el.datepicker.months."+e.months[t.text])))])])])})),0)})),0)])};Ui._withStripped=!0;var Vi=function(e){return new Date(e.getFullYear(),e.getMonth())},Gi=function(e){return"number"==typeof e||"string"==typeof e?Vi(new Date(e)).getTime():e instanceof Date?Vi(e).getTime():NaN},Hi=r({props:{disabledDate:{},value:{},selectionMode:{default:"month"},minDate:{},maxDate:{},defaultValue:{validator:function(e){return null===e||Object(pi.isDate)(e)||Array.isArray(e)&&e.every(pi.isDate)}},date:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},mixins:[p.a],watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){Gi(e)!==Gi(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){Gi(e)!==Gi(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],tableRows:[[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var n=new Date(t);return this.date.getFullYear()===n.getFullYear()&&Number(e.text)===n.getMonth()},getCellStyle:function(e){var t=this,n={},i=this.date.getFullYear(),r=new Date,o=e.text,a=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[];return n.disabled="function"==typeof this.disabledDate&&function(e,t){var n=Object(pi.getDayCountOfMonth)(e,t),i=new Date(e,t,1);return Object(pi.range)(n).map((function(e){return Object(pi.nextDate)(i,e)}))}(i,o).every(this.disabledDate),n.current=Object(m.arrayFindIndex)(Object(m.coerceTruthyValueToArray)(this.value),(function(e){return e.getFullYear()===i&&e.getMonth()===o}))>=0,n.today=r.getFullYear()===i&&r.getMonth()===o,n.default=a.some((function(n){return t.cellMatchesDate(e,n)})),e.inRange&&(n["in-range"]=!0,e.start&&(n["start-date"]=!0),e.end&&(n["end-date"]=!0)),n},getMonthOfCell:function(e){var t=this.date.getFullYear();return new Date(t,e,1)},markRange:function(e,t){e=Gi(e),t=Gi(t)||e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var i=this.rows,r=0,o=i.length;r<o;r++)for(var a=i[r],s=0,l=a.length;s<l;s++){var c=a[s],u=4*r+s,h=new Date(this.date.getFullYear(),u).getTime();c.inRange=e&&h>=e&&h<=t,c.start=e&&h===e,c.end=t&&h===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex,i=t.cellIndex;this.rows[n][i].disabled||n===this.lastRow&&i===this.lastColumn||(this.lastRow=n,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getMonthOfCell(4*n+i)}}))}}},handleMonthTableClick:function(e){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName&&!Object(pe.hasClass)(t,"disabled")){var n=t.cellIndex,i=4*t.parentNode.rowIndex+n,r=this.getMonthOfCell(i);"range"===this.selectionMode?this.rangeState.selecting?(r>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:r}):this.$emit("pick",{minDate:r,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:r,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",i)}}},computed:{rows:function(){for(var e=this,t=this.tableRows,n=this.disabledDate,i=[],r=Gi(new Date),o=0;o<3;o++)for(var a=t[o],s=function(t){var s=a[t];s||(s={row:o,column:t,type:"normal",inRange:!1,start:!1,end:!1}),s.type="normal";var l=4*o+t,c=new Date(e.date.getFullYear(),l).getTime();s.inRange=c>=Gi(e.minDate)&&c<=Gi(e.maxDate),s.start=e.minDate&&c===Gi(e.minDate),s.end=e.maxDate&&c===Gi(e.maxDate),c===r&&(s.type="today"),s.text=l;var u=new Date(c);s.disabled="function"==typeof n&&n(u),s.selected=Object(m.arrayFind)(i,(function(e){return e.getTime()===u.getTime()})),e.$set(a,t,s)},l=0;l<4;l++)s(l);return t}}},Ui,[],!1,null,null,null);Hi.options.__file="packages/date-picker/src/basic/month-table.vue";var Wi=Hi.exports,qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-date-table",class:{"is-week-mode":"week"===e.selectionMode},attrs:{cellspacing:"0",cellpadding:"0"},on:{click:e.handleClick,mousemove:e.handleMouseMove}},[n("tbody",[n("tr",[e.showWeekNumber?n("th",[e._v(e._s(e.t("el.datepicker.week")))]):e._e(),e._l(e.WEEKS,(function(t,i){return n("th",{key:i},[e._v(e._s(e.t("el.datepicker.weeks."+t)))])}))],2),e._l(e.rows,(function(t,i){return n("tr",{key:i,staticClass:"el-date-table__row",class:{current:e.isWeekActive(t[1])}},e._l(t,(function(t,i){return n("td",{key:i,class:e.getCellClasses(t)},[n("div",[n("span",[e._v("\n          "+e._s(t.text)+"\n        ")])])])})),0)}))],2)])};qi._withStripped=!0;var Yi=["sun","mon","tue","wed","thu","fri","sat"],$i=function(e){return"number"==typeof e||"string"==typeof e?Object(pi.clearTime)(new Date(e)).getTime():e instanceof Date?Object(pi.clearTime)(e).getTime():NaN},Xi=r({mixins:[p.a],props:{firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},value:{},defaultValue:{validator:function(e){return null===e||Object(pi.isDate)(e)||Array.isArray(e)&&e.every(pi.isDate)}},date:{},selectionMode:{default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{},cellClassName:{},minDate:{},maxDate:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},computed:{offsetDay:function(){var e=this.firstDayOfWeek;return e>3?7-e:-e},WEEKS:function(){var e=this.firstDayOfWeek;return Yi.concat(Yi).slice(e,e+7)},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},startDate:function(){return Object(pi.getStartDateOfMonth)(this.year,this.month)},rows:function(){var e=this,t=new Date(this.year,this.month,1),n=Object(pi.getFirstDayOfMonth)(t),i=Object(pi.getDayCountOfMonth)(t.getFullYear(),t.getMonth()),r=Object(pi.getDayCountOfMonth)(t.getFullYear(),0===t.getMonth()?11:t.getMonth()-1);n=0===n?7:n;for(var o=this.offsetDay,a=this.tableRows,s=1,l=this.startDate,c=this.disabledDate,u=this.cellClassName,h="dates"===this.selectionMode?Object(m.coerceTruthyValueToArray)(this.value):[],d=$i(new Date),f=0;f<6;f++){var p=a[f];this.showWeekNumber&&(p[0]||(p[0]={type:"week",text:Object(pi.getWeekNumber)(Object(pi.nextDate)(l,7*f+1))}));for(var v=function(t){var a=p[e.showWeekNumber?t+1:t];a||(a={row:f,column:t,type:"normal",inRange:!1,start:!1,end:!1}),a.type="normal";var v=7*f+t,g=Object(pi.nextDate)(l,v-o).getTime();if(a.inRange=g>=$i(e.minDate)&&g<=$i(e.maxDate),a.start=e.minDate&&g===$i(e.minDate),a.end=e.maxDate&&g===$i(e.maxDate),g===d&&(a.type="today"),f>=0&&f<=1){var y=n+o<0?7+n+o:n+o;t+7*f>=y?a.text=s++:(a.text=r-(y-t%7)+1+7*f,a.type="prev-month")}else s<=i?a.text=s++:(a.text=s++-i,a.type="next-month");var b=new Date(g);a.disabled="function"==typeof c&&c(b),a.selected=Object(m.arrayFind)(h,(function(e){return e.getTime()===b.getTime()})),a.customClass="function"==typeof u&&u(b),e.$set(p,e.showWeekNumber?t+1:t,a)},g=0;g<7;g++)v(g);if("week"===this.selectionMode){var y=this.showWeekNumber?1:0,b=this.showWeekNumber?7:6,x=this.isWeekActive(p[y+1]);p[y].inRange=x,p[y].start=x,p[b].inRange=x,p[b].end=x}}return a}},watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){$i(e)!==$i(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){$i(e)!==$i(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{tableRows:[[],[],[],[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var n=new Date(t);return this.year===n.getFullYear()&&this.month===n.getMonth()&&Number(e.text)===n.getDate()},getCellClasses:function(e){var t=this,n=this.selectionMode,i=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[],r=[];return"normal"!==e.type&&"today"!==e.type||e.disabled?r.push(e.type):(r.push("available"),"today"===e.type&&r.push("today")),"normal"===e.type&&i.some((function(n){return t.cellMatchesDate(e,n)}))&&r.push("default"),"day"!==n||"normal"!==e.type&&"today"!==e.type||!this.cellMatchesDate(e,this.value)||r.push("current"),!e.inRange||"normal"!==e.type&&"today"!==e.type&&"week"!==this.selectionMode||(r.push("in-range"),e.start&&r.push("start-date"),e.end&&r.push("end-date")),e.disabled&&r.push("disabled"),e.selected&&r.push("selected"),e.customClass&&r.push(e.customClass),r.join(" ")},getDateOfCell:function(e,t){var n=7*e+(t-(this.showWeekNumber?1:0))-this.offsetDay;return Object(pi.nextDate)(this.startDate,n)},isWeekActive:function(e){if("week"!==this.selectionMode)return!1;var t=new Date(this.year,this.month,1),n=t.getFullYear(),i=t.getMonth();if("prev-month"===e.type&&(t.setMonth(0===i?11:i-1),t.setFullYear(0===i?n-1:n)),"next-month"===e.type&&(t.setMonth(11===i?0:i+1),t.setFullYear(11===i?n+1:n)),t.setDate(parseInt(e.text,10)),Object(pi.isDate)(this.value)){var r=(this.value.getDay()-this.firstDayOfWeek+7)%7-1;return Object(pi.prevDate)(this.value,r).getTime()===t.getTime()}return!1},markRange:function(e,t){e=$i(e),t=$i(t)||e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var i=this.startDate,r=this.rows,o=0,a=r.length;o<a;o++)for(var s=r[o],l=0,c=s.length;l<c;l++)if(!this.showWeekNumber||0!==l){var u=s[l],h=7*o+l+(this.showWeekNumber?-1:0),d=Object(pi.nextDate)(i,h-this.offsetDay).getTime();u.inRange=e&&d>=e&&d<=t,u.start=e&&d===e,u.end=t&&d===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex-1,i=t.cellIndex;this.rows[n][i].disabled||n===this.lastRow&&i===this.lastColumn||(this.lastRow=n,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getDateOfCell(n,i)}}))}}},handleClick:function(e){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex-1,i="week"===this.selectionMode?1:t.cellIndex,r=this.rows[n][i];if(!r.disabled&&"week"!==r.type){var o,a,s,l=this.getDateOfCell(n,i);if("range"===this.selectionMode)this.rangeState.selecting?(l>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:l}):this.$emit("pick",{minDate:l,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:l,maxDate:null}),this.rangeState.selecting=!0);else if("day"===this.selectionMode)this.$emit("pick",l);else if("week"===this.selectionMode){var c=Object(pi.getWeekNumber)(l),u=l.getFullYear()+"w"+c;this.$emit("pick",{year:l.getFullYear(),week:c,value:u,date:l})}else if("dates"===this.selectionMode){var h=this.value||[],d=r.selected?(o=h,(s="function"==typeof(a=function(e){return e.getTime()===l.getTime()})?Object(m.arrayFindIndex)(o,a):o.indexOf(a))>=0?[].concat(o.slice(0,s),o.slice(s+1)):o):[].concat(h,[l]);this.$emit("pick",d)}}}}}},qi,[],!1,null,null,null);Xi.options.__file="packages/date-picker/src/basic/date-table.vue";var Qi=Xi.exports,Ki=r({mixins:[p.a],directives:{Clickoutside:P.a},watch:{showTime:function(e){var t=this;e&&this.$nextTick((function(e){var n=t.$refs.input.$el;n&&(t.pickerWidth=n.getBoundingClientRect().width+10)}))},value:function(e){"dates"===this.selectionMode&&this.value||(Object(pi.isDate)(e)?this.date=new Date(e):this.date=this.getDefaultValue())},defaultValue:function(e){Object(pi.isDate)(this.value)||(this.date=e?new Date(e):new Date)},timePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.timepicker.adjustSpinners()}))},selectionMode:function(e){"month"===e?"year"===this.currentView&&"month"===this.currentView||(this.currentView="month"):"dates"===e&&(this.currentView="date")}},methods:{proxyTimePickerDataProperties:function(){var e,t=this,n=function(e){t.$refs.timepicker.value=e},i=function(e){t.$refs.timepicker.date=e},r=function(e){t.$refs.timepicker.selectableRange=e};this.$watch("value",n),this.$watch("date",i),this.$watch("selectableRange",r),e=this.timeFormat,t.$refs.timepicker.format=e,n(this.value),i(this.date),r(this.selectableRange)},handleClear:function(){this.date=this.getDefaultValue(),this.$emit("pick",null)},emit:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e)if(Array.isArray(e)){var o=e.map((function(e){return t.showTime?Object(pi.clearMilliseconds)(e):Object(pi.clearTime)(e)}));this.$emit.apply(this,["pick",o].concat(i))}else this.$emit.apply(this,["pick",this.showTime?Object(pi.clearMilliseconds)(e):Object(pi.clearTime)(e)].concat(i));else this.$emit.apply(this,["pick",e].concat(i));this.userInputDate=null,this.userInputTime=null},showMonthPicker:function(){this.currentView="month"},showYearPicker:function(){this.currentView="year"},prevMonth:function(){this.date=Object(pi.prevMonth)(this.date)},nextMonth:function(){this.date=Object(pi.nextMonth)(this.date)},prevYear:function(){"year"===this.currentView?this.date=Object(pi.prevYear)(this.date,10):this.date=Object(pi.prevYear)(this.date)},nextYear:function(){"year"===this.currentView?this.date=Object(pi.nextYear)(this.date,10):this.date=Object(pi.nextYear)(this.date)},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleTimePick:function(e,t,n){if(Object(pi.isDate)(e)){var i=this.value?Object(pi.modifyTime)(this.value,e.getHours(),e.getMinutes(),e.getSeconds()):Object(pi.modifyWithTimeString)(this.getDefaultValue(),this.defaultTime);this.date=i,this.emit(this.date,!0)}else this.emit(e,!0);n||(this.timePickerVisible=t)},handleTimePickClose:function(){this.timePickerVisible=!1},handleMonthPick:function(e){"month"===this.selectionMode?(this.date=Object(pi.modifyDate)(this.date,this.year,e,1),this.emit(this.date)):(this.date=Object(pi.changeYearMonthAndClampDate)(this.date,this.year,e),this.currentView="date")},handleDatePick:function(e){if("day"===this.selectionMode){var t=this.value?Object(pi.modifyDate)(this.value,e.getFullYear(),e.getMonth(),e.getDate()):Object(pi.modifyWithTimeString)(e,this.defaultTime);this.checkDateWithinRange(t)||(t=Object(pi.modifyDate)(this.selectableRange[0][0],e.getFullYear(),e.getMonth(),e.getDate())),this.date=t,this.emit(this.date,this.showTime)}else"week"===this.selectionMode?this.emit(e.date):"dates"===this.selectionMode&&this.emit(e,!0)},handleYearPick:function(e){"year"===this.selectionMode?(this.date=Object(pi.modifyDate)(this.date,e,0,1),this.emit(this.date)):(this.date=Object(pi.changeYearMonthAndClampDate)(this.date,e,this.month),this.currentView="month")},changeToNow:function(){this.disabledDate&&this.disabledDate(new Date)||!this.checkDateWithinRange(new Date)||(this.date=new Date,this.emit(this.date))},confirm:function(){if("dates"===this.selectionMode)this.emit(this.value);else{var e=this.value?this.value:Object(pi.modifyWithTimeString)(this.getDefaultValue(),this.defaultTime);this.date=new Date(e),this.emit(e)}},resetView:function(){"month"===this.selectionMode?this.currentView="month":"year"===this.selectionMode?this.currentView="year":this.currentView="date"},handleEnter:function(){document.body.addEventListener("keydown",this.handleKeydown)},handleLeave:function(){this.$emit("dodestroy"),document.body.removeEventListener("keydown",this.handleKeydown)},handleKeydown:function(e){var t=e.keyCode;this.visible&&!this.timePickerVisible&&(-1!==[38,40,37,39].indexOf(t)&&(this.handleKeyControl(t),e.stopPropagation(),e.preventDefault()),13===t&&null===this.userInputDate&&null===this.userInputTime&&this.emit(this.date,!1))},handleKeyControl:function(e){for(var t={year:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setFullYear(e.getFullYear()+t)}},month:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setMonth(e.getMonth()+t)}},week:{38:-1,40:1,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+7*t)}},day:{38:-7,40:7,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+t)}}},n=this.selectionMode,i=this.date.getTime(),r=new Date(this.date.getTime());Math.abs(i-r.getTime())<=31536e6;){var o=t[n];if(o.offset(r,o[e]),"function"!=typeof this.disabledDate||!this.disabledDate(r)){this.date=r,this.$emit("pick",r,!0);break}}},handleVisibleTimeChange:function(e){var t=Object(pi.parseDate)(e,this.timeFormat);t&&this.checkDateWithinRange(t)&&(this.date=Object(pi.modifyDate)(t,this.year,this.month,this.monthDate),this.userInputTime=null,this.$refs.timepicker.value=this.date,this.timePickerVisible=!1,this.emit(this.date,!0))},handleVisibleDateChange:function(e){var t=Object(pi.parseDate)(e,this.dateFormat);if(t){if("function"==typeof this.disabledDate&&this.disabledDate(t))return;this.date=Object(pi.modifyTime)(t,this.date.getHours(),this.date.getMinutes(),this.date.getSeconds()),this.userInputDate=null,this.resetView(),this.emit(this.date,!0)}},isValidValue:function(e){return e&&!isNaN(e)&&("function"!=typeof this.disabledDate||!this.disabledDate(e))&&this.checkDateWithinRange(e)},getDefaultValue:function(){return this.defaultValue?new Date(this.defaultValue):new Date},checkDateWithinRange:function(e){return!(this.selectableRange.length>0)||Object(pi.timeWithinRange)(e,this.selectableRange,this.format||"HH:mm:ss")}},components:{TimePicker:Ri,YearTable:zi,MonthTable:Wi,DateTable:Qi,ElInput:d.a,ElButton:q.a},data:function(){return{popperClass:"",date:new Date,value:"",defaultValue:null,defaultTime:null,showTime:!1,selectionMode:"day",shortcuts:"",visible:!1,currentView:"date",disabledDate:"",cellClassName:"",selectableRange:[],firstDayOfWeek:7,showWeekNumber:!1,timePickerVisible:!1,format:"",arrowControl:!1,userInputDate:null,userInputTime:null}},computed:{year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},week:function(){return Object(pi.getWeekNumber)(this.date)},monthDate:function(){return this.date.getDate()},footerVisible:function(){return this.showTime||"dates"===this.selectionMode},visibleTime:function(){return null!==this.userInputTime?this.userInputTime:Object(pi.formatDate)(this.value||this.defaultValue,this.timeFormat)},visibleDate:function(){return null!==this.userInputDate?this.userInputDate:Object(pi.formatDate)(this.value||this.defaultValue,this.dateFormat)},yearLabel:function(){var e=this.t("el.datepicker.year");if("year"===this.currentView){var t=10*Math.floor(this.year/10);return e?t+" "+e+" - "+(t+9)+" "+e:t+" - "+(t+9)}return this.year+" "+e},timeFormat:function(){return this.format?Object(pi.extractTimeFormat)(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(pi.extractDateFormat)(this.format):"yyyy-MM-dd"}}},ki,[],!1,null,null,null);Ki.options.__file="packages/date-picker/src/panel/date.vue";var Ji=Ki.exports,Zi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[e.showTime?n("div",{staticClass:"el-date-range-picker__time-header"},[n("span",{staticClass:"el-date-range-picker__editors-wrap"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{ref:"minInput",staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),value:e.minVisibleDate},on:{input:function(t){return e.handleDateInput(t,"min")},change:function(t){return e.handleDateChange(t,"min")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMinTimeClose,expression:"handleMinTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),value:e.minVisibleTime},on:{focus:function(t){e.minTimePickerVisible=!0},input:function(t){return e.handleTimeInput(t,"min")},change:function(t){return e.handleTimeChange(t,"min")}}}),n("time-picker",{ref:"minTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.minTimePickerVisible},on:{pick:e.handleMinTimePick,mounted:function(t){e.$refs.minTimePicker.format=e.timeFormat}}})],1)]),n("span",{staticClass:"el-icon-arrow-right"}),n("span",{staticClass:"el-date-range-picker__editors-wrap is-right"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),value:e.maxVisibleDate,readonly:!e.minDate},on:{input:function(t){return e.handleDateInput(t,"max")},change:function(t){return e.handleDateChange(t,"max")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMaxTimeClose,expression:"handleMaxTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),value:e.maxVisibleTime,readonly:!e.minDate},on:{focus:function(t){e.minDate&&(e.maxTimePickerVisible=!0)},input:function(t){return e.handleTimeInput(t,"max")},change:function(t){return e.handleTimeChange(t,"max")}}}),n("time-picker",{ref:"maxTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.maxTimePickerVisible},on:{pick:e.handleMaxTimePick,mounted:function(t){e.$refs.maxTimePicker.format=e.timeFormat}}})],1)])]):e._e(),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevMonth}}),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.leftNextMonth}}):e._e(),n("div",[e._v(e._s(e.leftLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.rightPrevMonth}}):e._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",attrs:{type:"button"},on:{click:e.rightNextMonth}}),n("div",[e._v(e._s(e.rightLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2),e.showTime?n("div",{staticClass:"el-picker-panel__footer"},[n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.handleClear}},[e._v("\n        "+e._s(e.t("el.datepicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm(!1)}}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1):e._e()])])};Zi._withStripped=!0;var er=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(pi.nextDate)(new Date(e),1)]:[new Date,Object(pi.nextDate)(new Date,1)]},tr=r({mixins:[p.a],directives:{Clickoutside:P.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.leftDate.getMonth()+1))},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.rightDate.getMonth()+1))},leftYear:function(){return this.leftDate.getFullYear()},leftMonth:function(){return this.leftDate.getMonth()},leftMonthDate:function(){return this.leftDate.getDate()},rightYear:function(){return this.rightDate.getFullYear()},rightMonth:function(){return this.rightDate.getMonth()},rightMonthDate:function(){return this.rightDate.getDate()},minVisibleDate:function(){return null!==this.dateUserInput.min?this.dateUserInput.min:this.minDate?Object(pi.formatDate)(this.minDate,this.dateFormat):""},maxVisibleDate:function(){return null!==this.dateUserInput.max?this.dateUserInput.max:this.maxDate||this.minDate?Object(pi.formatDate)(this.maxDate||this.minDate,this.dateFormat):""},minVisibleTime:function(){return null!==this.timeUserInput.min?this.timeUserInput.min:this.minDate?Object(pi.formatDate)(this.minDate,this.timeFormat):""},maxVisibleTime:function(){return null!==this.timeUserInput.max?this.timeUserInput.max:this.maxDate||this.minDate?Object(pi.formatDate)(this.maxDate||this.minDate,this.timeFormat):""},timeFormat:function(){return this.format?Object(pi.extractTimeFormat)(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(pi.extractDateFormat)(this.format):"yyyy-MM-dd"},enableMonthArrow:function(){var e=(this.leftMonth+1)%12,t=this.leftMonth+1>=12?1:0;return this.unlinkPanels&&new Date(this.leftYear+t,e)<new Date(this.rightYear,this.rightMonth)},enableYearArrow:function(){return this.unlinkPanels&&12*this.rightYear+this.rightMonth-(12*this.leftYear+this.leftMonth+1)>=12}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(pi.nextMonth)(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},showTime:!1,shortcuts:"",visible:"",disabledDate:"",cellClassName:"",firstDayOfWeek:7,minTimePickerVisible:!1,maxTimePickerVisible:!1,format:"",arrowControl:!1,unlinkPanels:!1,dateUserInput:{min:null,max:null},timeUserInput:{min:null,max:null}}},watch:{minDate:function(e){var t=this;this.dateUserInput.min=null,this.timeUserInput.min=null,this.$nextTick((function(){if(t.$refs.maxTimePicker&&t.maxDate&&t.maxDate<t.minDate){t.$refs.maxTimePicker.selectableRange=[[Object(pi.parseDate)(Object(pi.formatDate)(t.minDate,"HH:mm:ss"),"HH:mm:ss"),Object(pi.parseDate)("23:59:59","HH:mm:ss")]]}})),e&&this.$refs.minTimePicker&&(this.$refs.minTimePicker.date=e,this.$refs.minTimePicker.value=e)},maxDate:function(e){this.dateUserInput.max=null,this.timeUserInput.max=null,e&&this.$refs.maxTimePicker&&(this.$refs.maxTimePicker.date=e,this.$refs.maxTimePicker.value=e)},minTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.minTimePicker.date=t.minDate,t.$refs.minTimePicker.value=t.minDate,t.$refs.minTimePicker.adjustSpinners()}))},maxTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.maxTimePicker.date=t.maxDate,t.$refs.maxTimePicker.value=t.maxDate,t.$refs.maxTimePicker.adjustSpinners()}))},value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(pi.isDate)(e[0])?new Date(e[0]):null,this.maxDate=Object(pi.isDate)(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),n=this.minDate.getMonth(),i=this.maxDate.getFullYear(),r=this.maxDate.getMonth();this.rightDate=t===i&&n===r?Object(pi.nextMonth)(this.maxDate):this.maxDate}else this.rightDate=Object(pi.nextMonth)(this.leftDate);else this.leftDate=er(this.defaultValue)[0],this.rightDate=Object(pi.nextMonth)(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=er(e),n=t[0],i=t[1];this.leftDate=n,this.rightDate=e&&e[1]&&this.unlinkPanels?i:Object(pi.nextMonth)(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=er(this.defaultValue)[0],this.rightDate=Object(pi.nextMonth)(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleDateInput:function(e,t){if(this.dateUserInput[t]=e,e.length===this.dateFormat.length){var n=Object(pi.parseDate)(e,this.dateFormat);if(n){if("function"==typeof this.disabledDate&&this.disabledDate(new Date(n)))return;"min"===t?(this.minDate=Object(pi.modifyDate)(this.minDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.leftDate=new Date(n),this.unlinkPanels||(this.rightDate=Object(pi.nextMonth)(this.leftDate))):(this.maxDate=Object(pi.modifyDate)(this.maxDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.rightDate=new Date(n),this.unlinkPanels||(this.leftDate=Object(pi.prevMonth)(n)))}}},handleDateChange:function(e,t){var n=Object(pi.parseDate)(e,this.dateFormat);n&&("min"===t?(this.minDate=Object(pi.modifyDate)(this.minDate,n.getFullYear(),n.getMonth(),n.getDate()),this.minDate>this.maxDate&&(this.maxDate=this.minDate)):(this.maxDate=Object(pi.modifyDate)(this.maxDate,n.getFullYear(),n.getMonth(),n.getDate()),this.maxDate<this.minDate&&(this.minDate=this.maxDate)))},handleTimeInput:function(e,t){var n=this;if(this.timeUserInput[t]=e,e.length===this.timeFormat.length){var i=Object(pi.parseDate)(e,this.timeFormat);i&&("min"===t?(this.minDate=Object(pi.modifyTime)(this.minDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick((function(e){return n.$refs.minTimePicker.adjustSpinners()}))):(this.maxDate=Object(pi.modifyTime)(this.maxDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick((function(e){return n.$refs.maxTimePicker.adjustSpinners()}))))}},handleTimeChange:function(e,t){var n=Object(pi.parseDate)(e,this.timeFormat);n&&("min"===t?(this.minDate=Object(pi.modifyTime)(this.minDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.minDate>this.maxDate&&(this.maxDate=this.minDate),this.$refs.minTimePicker.value=this.minDate,this.minTimePickerVisible=!1):(this.maxDate=Object(pi.modifyTime)(this.maxDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.maxDate<this.minDate&&(this.minDate=this.maxDate),this.$refs.maxTimePicker.value=this.minDate,this.maxTimePickerVisible=!1))},handleRangePick:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(pi.modifyWithTimeString)(e.minDate,i[0]),o=Object(pi.modifyWithTimeString)(e.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){t.maxDate=o,t.minDate=r}),10),n&&!this.showTime&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleMinTimePick:function(e,t,n){this.minDate=this.minDate||new Date,e&&(this.minDate=Object(pi.modifyTime)(this.minDate,e.getHours(),e.getMinutes(),e.getSeconds())),n||(this.minTimePickerVisible=t),(!this.maxDate||this.maxDate&&this.maxDate.getTime()<this.minDate.getTime())&&(this.maxDate=new Date(this.minDate))},handleMinTimeClose:function(){this.minTimePickerVisible=!1},handleMaxTimePick:function(e,t,n){this.maxDate&&e&&(this.maxDate=Object(pi.modifyTime)(this.maxDate,e.getHours(),e.getMinutes(),e.getSeconds())),n||(this.maxTimePickerVisible=t),this.maxDate&&this.minDate&&this.minDate.getTime()>this.maxDate.getTime()&&(this.minDate=new Date(this.maxDate))},handleMaxTimeClose:function(){this.maxTimePickerVisible=!1},leftPrevYear:function(){this.leftDate=Object(pi.prevYear)(this.leftDate),this.unlinkPanels||(this.rightDate=Object(pi.nextMonth)(this.leftDate))},leftPrevMonth:function(){this.leftDate=Object(pi.prevMonth)(this.leftDate),this.unlinkPanels||(this.rightDate=Object(pi.nextMonth)(this.leftDate))},rightNextYear:function(){this.unlinkPanels?this.rightDate=Object(pi.nextYear)(this.rightDate):(this.leftDate=Object(pi.nextYear)(this.leftDate),this.rightDate=Object(pi.nextMonth)(this.leftDate))},rightNextMonth:function(){this.unlinkPanels?this.rightDate=Object(pi.nextMonth)(this.rightDate):(this.leftDate=Object(pi.nextMonth)(this.leftDate),this.rightDate=Object(pi.nextMonth)(this.leftDate))},leftNextYear:function(){this.leftDate=Object(pi.nextYear)(this.leftDate)},leftNextMonth:function(){this.leftDate=Object(pi.nextMonth)(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(pi.prevYear)(this.rightDate)},rightPrevMonth:function(){this.rightDate=Object(pi.prevMonth)(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(pi.isDate)(e[0])&&Object(pi.isDate)(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!=typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate&&null==this.maxDate&&(this.rangeState.selecting=!1),this.minDate=this.value&&Object(pi.isDate)(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(pi.isDate)(this.value[0])?new Date(this.value[1]):null}},components:{TimePicker:Ri,DateTable:Qi,ElInput:d.a,ElButton:q.a}},Zi,[],!1,null,null,null);tr.options.__file="packages/date-picker/src/panel/date-range.vue";var nr=tr.exports,ir=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),n("div",[e._v(e._s(e.leftLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),n("div",[e._v(e._s(e.rightLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2)])])};ir._withStripped=!0;var rr=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(pi.nextMonth)(new Date(e))]:[new Date,Object(pi.nextMonth)(new Date)]},or=r({mixins:[p.a],directives:{Clickoutside:P.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")},leftYear:function(){return this.leftDate.getFullYear()},rightYear:function(){return this.rightDate.getFullYear()===this.leftDate.getFullYear()?this.leftDate.getFullYear()+1:this.rightDate.getFullYear()},enableYearArrow:function(){return this.unlinkPanels&&this.rightYear>this.leftYear+1}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(pi.nextYear)(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},shortcuts:"",visible:"",disabledDate:"",format:"",arrowControl:!1,unlinkPanels:!1}},watch:{value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(pi.isDate)(e[0])?new Date(e[0]):null,this.maxDate=Object(pi.isDate)(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),n=this.maxDate.getFullYear();this.rightDate=t===n?Object(pi.nextYear)(this.maxDate):this.maxDate}else this.rightDate=Object(pi.nextYear)(this.leftDate);else this.leftDate=rr(this.defaultValue)[0],this.rightDate=Object(pi.nextYear)(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=rr(e),n=t[0],i=t[1];this.leftDate=n,this.rightDate=e&&e[1]&&n.getFullYear()!==i.getFullYear()&&this.unlinkPanels?i:Object(pi.nextYear)(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=rr(this.defaultValue)[0],this.rightDate=Object(pi.nextYear)(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleRangePick:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(pi.modifyWithTimeString)(e.minDate,i[0]),o=Object(pi.modifyWithTimeString)(e.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){t.maxDate=o,t.minDate=r}),10),n&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},leftPrevYear:function(){this.leftDate=Object(pi.prevYear)(this.leftDate),this.unlinkPanels||(this.rightDate=Object(pi.prevYear)(this.rightDate))},rightNextYear:function(){this.unlinkPanels||(this.leftDate=Object(pi.nextYear)(this.leftDate)),this.rightDate=Object(pi.nextYear)(this.rightDate)},leftNextYear:function(){this.leftDate=Object(pi.nextYear)(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(pi.prevYear)(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(pi.isDate)(e[0])&&Object(pi.isDate)(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!=typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate=this.value&&Object(pi.isDate)(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(pi.isDate)(this.value[0])?new Date(this.value[1]):null}},components:{MonthTable:Wi,ElInput:d.a,ElButton:q.a}},ir,[],!1,null,null,null);or.options.__file="packages/date-picker/src/panel/month-range.vue";var ar=or.exports,sr=function(e){return"daterange"===e||"datetimerange"===e?nr:"monthrange"===e?ar:Ji},lr={mixins:[Li],name:"ElDatePicker",props:{type:{type:String,default:"date"},timeArrowControl:Boolean},watch:{type:function(e){this.picker?(this.unmountPicker(),this.panel=sr(e),this.mountPicker()):this.panel=sr(e)}},created:function(){this.panel=sr(this.type)},install:function(e){e.component(lr.name,lr)}},cr=lr,ur=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",staticClass:"el-picker-panel time-select el-popper",class:e.popperClass,style:{width:e.width+"px"}},[n("el-scrollbar",{attrs:{noresize:"","wrap-class":"el-picker-panel__content"}},e._l(e.items,(function(t){return n("div",{key:t.value,staticClass:"time-select-item",class:{selected:e.value===t.value,disabled:t.disabled,default:t.value===e.defaultValue},attrs:{disabled:t.disabled},on:{click:function(n){e.handleClick(t)}}},[e._v(e._s(t.value))])})),0)],1)])};ur._withStripped=!0;var hr=function(e){var t=(e||"").split(":");return t.length>=2?{hours:parseInt(t[0],10),minutes:parseInt(t[1],10)}:null},dr=function(e,t){var n=hr(e),i=hr(t),r=n.minutes+60*n.hours,o=i.minutes+60*i.hours;return r===o?0:r>o?1:-1},fr=function(e,t){var n=hr(e),i=hr(t),r={hours:n.hours,minutes:n.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,function(e){return(e.hours<10?"0"+e.hours:e.hours)+":"+(e.minutes<10?"0"+e.minutes:e.minutes)}(r)},pr=r({components:{ElScrollbar:R.a},watch:{value:function(e){var t=this;e&&this.$nextTick((function(){return t.scrollToOption()}))}},methods:{handleClick:function(e){e.disabled||this.$emit("pick",e.value)},handleClear:function(){this.$emit("pick",null)},scrollToOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".selected",t=this.$refs.popper.querySelector(".el-picker-panel__content");Ut()(t,t.querySelector(e))},handleMenuEnter:function(){var e=this,t=-1!==this.items.map((function(e){return e.value})).indexOf(this.value),n=-1!==this.items.map((function(e){return e.value})).indexOf(this.defaultValue),i=(t?".selected":n&&".default")||".time-select-item:not(.disabled)";this.$nextTick((function(){return e.scrollToOption(i)}))},scrollDown:function(e){for(var t=this.items,n=t.length,i=t.length,r=t.map((function(e){return e.value})).indexOf(this.value);i--;)if(!t[r=(r+e+n)%n].disabled)return void this.$emit("pick",t[r].value,!0)},isValidValue:function(e){return-1!==this.items.filter((function(e){return!e.disabled})).map((function(e){return e.value})).indexOf(e)},handleKeydown:function(e){var t=e.keyCode;if(38===t||40===t){var n={40:1,38:-1}[t.toString()];return this.scrollDown(n),void e.stopPropagation()}}},data:function(){return{popperClass:"",start:"09:00",end:"18:00",step:"00:30",value:"",defaultValue:"",visible:!1,minTime:"",maxTime:"",width:0}},computed:{items:function(){var e=this.start,t=this.end,n=this.step,i=[];if(e&&t&&n)for(var r=e;dr(r,t)<=0;)i.push({value:r,disabled:dr(r,this.minTime||"-1:-1")<=0||dr(r,this.maxTime||"100:100")>=0}),r=fr(r,n);return i}}},ur,[],!1,null,null,null);pr.options.__file="packages/date-picker/src/panel/time-select.vue";var mr=pr.exports,vr={mixins:[Li],name:"ElTimeSelect",componentName:"ElTimeSelect",props:{type:{type:String,default:"time-select"}},beforeCreate:function(){this.panel=mr},install:function(e){e.component(vr.name,vr)}},gr=vr,yr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-range-picker el-picker-panel el-popper",class:e.popperClass},[n("div",{staticClass:"el-time-range-picker__content"},[n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.startTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[n("time-spinner",{ref:"minSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.minDate},on:{change:e.handleMinChange,"select-range":e.setMinSelectionRange}})],1)]),n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.endTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[n("time-spinner",{ref:"maxSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.maxDate},on:{change:e.handleMaxChange,"select-range":e.setMaxSelectionRange}})],1)])]),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:function(t){e.handleCancel()}}},[e._v(e._s(e.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn confirm",attrs:{type:"button",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])};yr._withStripped=!0;var br=Object(pi.parseDate)("00:00:00","HH:mm:ss"),xr=Object(pi.parseDate)("23:59:59","HH:mm:ss"),wr=function(e){return Object(pi.modifyDate)(xr,e.getFullYear(),e.getMonth(),e.getDate())},_r=function(e,t){return new Date(Math.min(e.getTime()+t,wr(e).getTime()))},Sr=r({mixins:[p.a],components:{TimeSpinner:Ni},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},offset:function(){return this.showSeconds?11:8},spinner:function(){return this.selectionRange[0]<this.offset?this.$refs.minSpinner:this.$refs.maxSpinner},btnDisabled:function(){return this.minDate.getTime()>this.maxDate.getTime()},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},data:function(){return{popperClass:"",minDate:new Date,maxDate:new Date,value:[],oldValue:[new Date,new Date],defaultValue:null,format:"HH:mm:ss",visible:!1,selectionRange:[0,2],arrowControl:!1}},watch:{value:function(e){Array.isArray(e)?(this.minDate=new Date(e[0]),this.maxDate=new Date(e[1])):Array.isArray(this.defaultValue)?(this.minDate=new Date(this.defaultValue[0]),this.maxDate=new Date(this.defaultValue[1])):this.defaultValue?(this.minDate=new Date(this.defaultValue),this.maxDate=_r(new Date(this.defaultValue),36e5)):(this.minDate=new Date,this.maxDate=_r(new Date,36e5))},visible:function(e){var t=this;e&&(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.minSpinner.emitSelectRange("hours")})))}},methods:{handleClear:function(){this.$emit("pick",null)},handleCancel:function(){this.$emit("pick",this.oldValue)},handleMinChange:function(e){this.minDate=Object(pi.clearMilliseconds)(e),this.handleChange()},handleMaxChange:function(e){this.maxDate=Object(pi.clearMilliseconds)(e),this.handleChange()},handleChange:function(){var e;this.isValidValue([this.minDate,this.maxDate])&&(this.$refs.minSpinner.selectableRange=[[(e=this.minDate,Object(pi.modifyDate)(br,e.getFullYear(),e.getMonth(),e.getDate())),this.maxDate]],this.$refs.maxSpinner.selectableRange=[[this.minDate,wr(this.maxDate)]],this.$emit("pick",[this.minDate,this.maxDate],!0))},setMinSelectionRange:function(e,t){this.$emit("select-range",e,t,"min"),this.selectionRange=[e,t]},setMaxSelectionRange:function(e,t){this.$emit("select-range",e,t,"max"),this.selectionRange=[e+this.offset,t+this.offset]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$refs.minSpinner.selectableRange,n=this.$refs.maxSpinner.selectableRange;this.minDate=Object(pi.limitTimeRange)(this.minDate,t,this.format),this.maxDate=Object(pi.limitTimeRange)(this.maxDate,n,this.format),this.$emit("pick",[this.minDate,this.maxDate],e)},adjustSpinners:function(){this.$refs.minSpinner.adjustSpinners(),this.$refs.maxSpinner.adjustSpinners()},changeSelectionRange:function(e){var t=this.showSeconds?[0,3,6,11,14,17]:[0,3,8,11],n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=(t.indexOf(this.selectionRange[0])+e+t.length)%t.length,r=t.length/2;i<r?this.$refs.minSpinner.emitSelectRange(n[i]):this.$refs.maxSpinner.emitSelectRange(n[i-r])},isValidValue:function(e){return Array.isArray(e)&&Object(pi.timeWithinRange)(this.minDate,this.$refs.minSpinner.selectableRange)&&Object(pi.timeWithinRange)(this.maxDate,this.$refs.maxSpinner.selectableRange)},handleKeydown:function(e){var t=e.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var i=n[t];return this.changeSelectionRange(i),void e.preventDefault()}if(38===t||40===t){var r=n[t];return this.spinner.scrollDown(r),void e.preventDefault()}}}},yr,[],!1,null,null,null);Sr.options.__file="packages/date-picker/src/panel/time-range.vue";var Mr=Sr.exports,Tr={mixins:[Li],name:"ElTimePicker",props:{isRange:Boolean,arrowControl:Boolean},data:function(){return{type:""}},watch:{isRange:function(e){this.picker?(this.unmountPicker(),this.type=e?"timerange":"time",this.panel=e?Mr:Ri,this.mountPicker()):(this.type=e?"timerange":"time",this.panel=e?Mr:Ri)}},created:function(){this.type=this.isRange?"timerange":"time",this.panel=this.isRange?Mr:Ri},install:function(e){e.component(Tr.name,Tr)}},Er=Tr,Cr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),e._t("reference")],2)};Cr._withStripped=!0;var Ar=r({name:"ElPopover",mixins:[N.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(m.generateId)()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$slots.reference&&this.$slots.reference[0]&&(t=this.referenceElm=this.$slots.reference[0].elm),t&&(Object(pe.addClass)(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(pe.on)(t,"focusin",(function(){e.handleFocus();var n=t.__vue__;n&&"function"==typeof n.focus&&n.focus()})),Object(pe.on)(n,"focusin",this.handleFocus),Object(pe.on)(t,"focusout",this.handleBlur),Object(pe.on)(n,"focusout",this.handleBlur)),Object(pe.on)(t,"keydown",this.handleKeydown),Object(pe.on)(t,"click",this.handleClick)),"click"===this.trigger?(Object(pe.on)(t,"click",this.doToggle),Object(pe.on)(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(pe.on)(t,"mouseenter",this.handleMouseEnter),Object(pe.on)(n,"mouseenter",this.handleMouseEnter),Object(pe.on)(t,"mouseleave",this.handleMouseLeave),Object(pe.on)(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(pe.on)(t,"focusin",this.doShow),Object(pe.on)(t,"focusout",this.doClose)):(Object(pe.on)(t,"mousedown",this.doShow),Object(pe.on)(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(pe.addClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(pe.removeClass)(this.referenceElm,"focusing")},handleBlur:function(){Object(pe.removeClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$slots.reference&&this.$slots.reference[0]&&(t=this.referenceElm=this.$slots.reference[0].elm),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&n&&!n.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(pe.off)(e,"click",this.doToggle),Object(pe.off)(e,"mouseup",this.doClose),Object(pe.off)(e,"mousedown",this.doShow),Object(pe.off)(e,"focusin",this.doShow),Object(pe.off)(e,"focusout",this.doClose),Object(pe.off)(e,"mousedown",this.doShow),Object(pe.off)(e,"mouseup",this.doClose),Object(pe.off)(e,"mouseleave",this.handleMouseLeave),Object(pe.off)(e,"mouseenter",this.handleMouseEnter),Object(pe.off)(document,"click",this.handleDocumentClick)}},Cr,[],!1,null,null,null);Ar.options.__file="packages/popover/src/main.vue";var Or=Ar.exports,Lr=function(e,t,n){var i=t.expression?t.value:t.arg,r=n.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},kr={bind:function(e,t,n){Lr(e,t,n)},inserted:function(e,t,n){Lr(e,t,n)}};pn.a.directive("popover",kr),Or.install=function(e){e.directive("popover",kr),e.component(Or.name,Or)},Or.directive=kr;var Pr=Or,Dr={name:"ElTooltip",mixins:[N.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(m.generateId)(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new pn.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=L()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var i=n.data=n.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(pe.on)(this.referenceElm,"mouseenter",this.show),Object(pe.on)(this.referenceElm,"mouseleave",this.hide),Object(pe.on)(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(pe.on)(this.referenceElm,"blur",this.handleBlur),Object(pe.on)(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(pe.addClass)(this.referenceElm,"focusing"):Object(pe.removeClass)(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)e[n]&&e[n].tag&&(t=e[n]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(pe.off)(e,"mouseenter",this.show),Object(pe.off)(e,"mouseleave",this.hide),Object(pe.off)(e,"focus",this.handleFocus),Object(pe.off)(e,"blur",this.handleBlur),Object(pe.off)(e,"click",this.removeFocusing))},install:function(e){e.component(Dr.name,Dr)}},Ir=Dr,Nr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?n("div",{class:["el-message-box__status",e.icon]}):e._e(),n("span",[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?n("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?n("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputEnter(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?n("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(t){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(t){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])};Nr._withStripped=!0;var Fr=n(39),Rr=n.n(Fr),Br=void 0,jr={success:"success",info:"info",warning:"warning",error:"error"},zr=r({mixins:[x.a,p.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:d.a,ElButton:q.a},computed:{icon:function(){var e=this.type;return this.iconClass||(e&&jr[e]?"el-icon-"+jr[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,t=this.uid;return function(){e.$nextTick((function(){t===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),Br.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"==typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(Bt.t)("el.messagebox.error"),Object(pe.addClass)(this.getInputElement(),"invalid"),!1;var t=this.inputValidator;if("function"==typeof t){var n=t(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(Bt.t)("el.messagebox.error"),Object(pe.addClass)(this.getInputElement(),"invalid"),!1;if("string"==typeof n)return this.editorErrorMessage=n,Object(pe.addClass)(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(pe.removeClass)(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),t=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||t},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(n){"prompt"===t.$type&&null!==e&&t.validate()}))}},visible:function(e){var t=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){t.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,Br=new Rr.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){t.$refs.input&&t.$refs.input.$el&&t.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(pe.removeClass)(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){Br.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},Nr,[],!1,null,null,null);zr.options.__file="packages/message-box/src/main.vue";var Ur=zr.exports,Vr=n(23),Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hr={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},Wr=pn.a.extend(Ur),qr=void 0,Yr=void 0,$r=[],Xr=function(e){if(qr){var t=qr.callback;"function"==typeof t&&(Yr.showInput?t(Yr.inputValue,e):t(e)),qr.resolve&&("confirm"===e?Yr.showInput?qr.resolve({value:Yr.inputValue,action:e}):qr.resolve(e):!qr.reject||"cancel"!==e&&"close"!==e||qr.reject(e))}},Qr=function e(){if(Yr||((Yr=new Wr({el:document.createElement("div")})).callback=Xr),Yr.action="",(!Yr.visible||Yr.closeTimer)&&$r.length>0){var t=(qr=$r.shift()).options;for(var n in t)t.hasOwnProperty(n)&&(Yr[n]=t[n]);void 0===t.callback&&(Yr.callback=Xr);var i=Yr.callback;Yr.callback=function(t,n){i(t,n),e()},Object(Vr.isVNode)(Yr.message)?(Yr.$slots.default=[Yr.message],Yr.message=null):delete Yr.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===Yr[e]&&(Yr[e]=!0)})),document.body.appendChild(Yr.$el),pn.a.nextTick((function(){Yr.visible=!0}))}},Kr=function e(t,n){if(!pn.a.prototype.$isServer){if("string"==typeof t||Object(Vr.isVNode)(t)?(t={message:t},"string"==typeof arguments[1]&&(t.title=arguments[1])):t.callback&&!n&&(n=t.callback),"undefined"!=typeof Promise)return new Promise((function(i,r){$r.push({options:Ve()({},Hr,e.defaults,t),callback:n,resolve:i,reject:r}),Qr()}));$r.push({options:Ve()({},Hr,e.defaults,t),callback:n}),Qr()}};Kr.setDefaults=function(e){Kr.defaults=e},Kr.alert=function(e,t,n){return"object"===(void 0===t?"undefined":Gr(t))?(n=t,t=""):void 0===t&&(t=""),Kr(Ve()({title:t,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},Kr.confirm=function(e,t,n){return"object"===(void 0===t?"undefined":Gr(t))?(n=t,t=""):void 0===t&&(t=""),Kr(Ve()({title:t,message:e,$type:"confirm",showCancelButton:!0},n))},Kr.prompt=function(e,t,n){return"object"===(void 0===t?"undefined":Gr(t))?(n=t,t=""):void 0===t&&(t=""),Kr(Ve()({title:t,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},Kr.close=function(){Yr.doClose(),Yr.visible=!1,$r=[],qr=null};var Jr=Kr,Zr=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-breadcrumb",attrs:{"aria-label":"Breadcrumb",role:"navigation"}},[this._t("default")],2)};Zr._withStripped=!0;var eo=r({name:"ElBreadcrumb",props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},provide:function(){return{elBreadcrumb:this}},mounted:function(){var e=this.$el.querySelectorAll(".el-breadcrumb__item");e.length&&e[e.length-1].setAttribute("aria-current","page")}},Zr,[],!1,null,null,null);eo.options.__file="packages/breadcrumb/src/breadcrumb.vue";var to=eo.exports;to.install=function(e){e.component(to.name,to)};var no=to,io=function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"el-breadcrumb__item"},[t("span",{ref:"link",class:["el-breadcrumb__inner",this.to?"is-link":""],attrs:{role:"link"}},[this._t("default")],2),this.separatorClass?t("i",{staticClass:"el-breadcrumb__separator",class:this.separatorClass}):t("span",{staticClass:"el-breadcrumb__separator",attrs:{role:"presentation"}},[this._v(this._s(this.separator))])])};io._withStripped=!0;var ro=r({name:"ElBreadcrumbItem",props:{to:{},replace:Boolean},data:function(){return{separator:"",separatorClass:""}},inject:["elBreadcrumb"],mounted:function(){var e=this;this.separator=this.elBreadcrumb.separator,this.separatorClass=this.elBreadcrumb.separatorClass;var t=this.$refs.link;t.setAttribute("role","link"),t.addEventListener("click",(function(t){var n=e.to,i=e.$router;n&&i&&(e.replace?i.replace(n):i.push(n))}))}},io,[],!1,null,null,null);ro.options.__file="packages/breadcrumb/src/breadcrumb-item.vue";var oo=ro.exports;oo.install=function(e){e.component(oo.name,oo)};var ao=oo,so=function(){var e=this.$createElement;return(this._self._c||e)("form",{staticClass:"el-form",class:[this.labelPosition?"el-form--label-"+this.labelPosition:"",{"el-form--inline":this.inline}]},[this._t("default")],2)};so._withStripped=!0;var lo=r({name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(e){e.removeValidateEvents(),e.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var e=Math.max.apply(Math,this.potentialLabelWidthArr);return e?e+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var e=this;this.$on("el.form.addField",(function(t){t&&e.fields.push(t)})),this.$on("el.form.removeField",(function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(e){e.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length?"string"==typeof e?this.fields.filter((function(t){return e===t.prop})):this.fields.filter((function(t){return e.indexOf(t.prop)>-1})):this.fields;t.forEach((function(e){e.clearValidate()}))},validate:function(e){var t=this;if(this.model){var n=void 0;"function"!=typeof e&&window.Promise&&(n=new window.Promise((function(t,n){e=function(e){e?t(e):n(e)}})));var i=!0,r=0;0===this.fields.length&&e&&e(!0);var o={};return this.fields.forEach((function(n){n.validate("",(function(n,a){n&&(i=!1),o=Ve()({},o,a),"function"==typeof e&&++r===t.fields.length&&e(i,o)}))})),n||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){e=[].concat(e);var n=this.fields.filter((function(t){return-1!==e.indexOf(t.prop)}));n.length?n.forEach((function(e){e.validate("",t)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(e){var t=this.potentialLabelWidthArr.indexOf(e);if(-1===t)throw new Error("[ElementForm]unpected width ",e);return t},registerLabelWidth:function(e,t){if(e&&t){var n=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(n,1,e)}else e&&this.potentialLabelWidthArr.push(e)},deregisterLabelWidth:function(e){var t=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(t,1)}}},so,[],!1,null,null,null);lo.options.__file="packages/form/src/form.vue";var co=lo.exports;co.install=function(e){e.component(co.name,co)};var uo=co,ho=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required,"is-no-asterisk":e.elForm&&e.elForm.hideRequiredAsterisk},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[n("label-wrap",{attrs:{"is-auto-width":e.labelStyle&&"auto"===e.labelStyle.width,"update-all":"auto"===e.form.labelWidth}},[e.label||e.$slots.label?n("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e()]),n("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?e._t("error",[n("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n          "+e._s(e.validateMessage)+"\n        ")])],{error:e.validateMessage}):e._e()],2)],2)],1)};ho._withStripped=!0;var fo=n(40),po=n.n(fo),mo=r({props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var e=arguments[0],t=this.$slots.default;if(!t)return null;if(this.isAutoWidth){var n=this.elForm.autoLabelWidth,i={};if(n&&"auto"!==n){var r=parseInt(n,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return e("div",{class:"el-form-item__label-wrap",style:i},[t])}return t[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var e=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(e))}return 0},updateLabelWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===e?this.computedWidth=this.getLabelWidth():"remove"===e&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(e,t){this.updateAll&&(this.elForm.registerLabelWidth(e,t),this.elFormItem.updateComputedLabelWidth(e))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},void 0,void 0,!1,null,null,null);mo.options.__file="packages/form/src/label-wrap.vue";var vo=mo.exports,go=r({name:"ElFormItem",componentName:"ElFormItem",mixins:[M.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:vo},watch:{error:{immediate:!0,handler:function(e){this.validateMessage=e,this.validateState=e?"error":""}},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var n=this.labelWidth||this.form.labelWidth;return"auto"===n?"auto"===this.labelWidth?e.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(e.marginLeft=this.elForm.autoLabelWidth):e.marginLeft=n,e},form:function(){for(var e=this.$parent,t=e.$options.componentName;"ElForm"!==t;)"ElFormItem"===t&&(this.isNested=!0),t=(e=e.$parent).$options.componentName;return e},fieldValue:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),Object(m.getPropByPath)(e,t,!0).v}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.noop;this.validateDisabled=!1;var i=this.getFilteredRule(e);if((!i||0===i.length)&&void 0===this.required)return n(),!0;this.validateState="validating";var r={};i&&i.length>0&&i.forEach((function(e){delete e.trigger})),r[this.prop]=i;var o=new po.a(r),a={};a[this.prop]=this.fieldValue,o.validate(a,{firstFields:!0},(function(e,i){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",n(t.validateMessage,i),t.elForm&&t.elForm.$emit("validate",t.prop,!e,t.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var e=this;this.validateState="",this.validateMessage="";var t=this.form.model,n=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var r=Object(m.getPropByPath)(t,i,!0);this.validateDisabled=!0,Array.isArray(n)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick((function(){e.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,n=void 0!==this.required?{required:!!this.required}:[],i=Object(m.getPropByPath)(e,this.prop||"");return e=e?i.o[this.prop||""]||i.v:[],[].concat(t||e||[]).concat(n)},getFilteredRule:function(e){return this.getRules().filter((function(t){return!t.trigger||""===e||(Array.isArray(t.trigger)?t.trigger.indexOf(e)>-1:t.trigger===e)})).map((function(e){return Ve()({},e)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(e){this.computedLabelWidth=e?e+"px":""},addValidateEvents:function(){(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},ho,[],!1,null,null,null);go.options.__file="packages/form/src/form-item.vue";var yo=go.exports;yo.install=function(e){e.component(yo.name,yo)};var bo=yo,xo=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-tabs__active-bar",class:"is-"+this.rootTabs.tabPosition,style:this.barStyle})};xo._withStripped=!0;var wo=r({name:"TabBar",props:{tabs:Array},inject:["rootTabs"],computed:{barStyle:{get:function(){var e=this,t={},n=0,i=0,r=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height",o="width"===r?"x":"y",a=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))};this.tabs.every((function(t,o){var s=Object(m.arrayFind)(e.$parent.$refs.tabs||[],(function(e){return e.id.replace("tab-","")===t.paneName}));if(!s)return!1;if(t.active){i=s["client"+a(r)];var l=window.getComputedStyle(s);return"width"===r&&e.tabs.length>1&&(i-=parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),"width"===r&&(n+=parseFloat(l.paddingLeft)),!1}return n+=s["client"+a(r)],!0}));var s="translate"+a(o)+"("+n+"px)";return t[r]=i+"px",t.transform=s,t.msTransform=s,t.webkitTransform=s,t}}}},xo,[],!1,null,null,null);wo.options.__file="packages/tabs/src/tab-bar.vue";var _o=wo.exports;function So(){}var Mo=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))},To=r({name:"TabNav",components:{TabBar:_o},inject:["rootTabs"],props:{panes:Array,currentName:String,editable:Boolean,onTabClick:{type:Function,default:So},onTabRemove:{type:Function,default:So},type:String,stretch:Boolean},data:function(){return{scrollable:!1,navOffset:0,isFocus:!1,focusable:!0}},computed:{navStyle:function(){return{transform:"translate"+(-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"X":"Y")+"(-"+this.navOffset+"px)"}},sizeName:function(){return-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height"}},methods:{scrollPrev:function(){var e=this.$refs.navScroll["offset"+Mo(this.sizeName)],t=this.navOffset;if(t){var n=t>e?t-e:0;this.navOffset=n}},scrollNext:function(){var e=this.$refs.nav["offset"+Mo(this.sizeName)],t=this.$refs.navScroll["offset"+Mo(this.sizeName)],n=this.navOffset;if(!(e-n<=t)){var i=e-n>2*t?n+t:e-t;this.navOffset=i}},scrollToActiveTab:function(){if(this.scrollable){var e=this.$refs.nav,t=this.$el.querySelector(".is-active");if(t){var n=this.$refs.navScroll,i=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition),r=t.getBoundingClientRect(),o=n.getBoundingClientRect(),a=i?e.offsetWidth-o.width:e.offsetHeight-o.height,s=this.navOffset,l=s;i?(r.left<o.left&&(l=s-(o.left-r.left)),r.right>o.right&&(l=s+r.right-o.right)):(r.top<o.top&&(l=s-(o.top-r.top)),r.bottom>o.bottom&&(l=s+(r.bottom-o.bottom))),l=Math.max(l,0),this.navOffset=Math.min(l,a)}}},update:function(){if(this.$refs.nav){var e=this.sizeName,t=this.$refs.nav["offset"+Mo(e)],n=this.$refs.navScroll["offset"+Mo(e)],i=this.navOffset;if(n<t){var r=this.navOffset;this.scrollable=this.scrollable||{},this.scrollable.prev=r,this.scrollable.next=r+n<t,t-r<n&&(this.navOffset=t-n)}else this.scrollable=!1,i>0&&(this.navOffset=0)}},changeTab:function(e){var t=e.keyCode,n=void 0,i=void 0,r=void 0;-1!==[37,38,39,40].indexOf(t)&&(r=e.currentTarget.querySelectorAll("[role=tab]"),i=Array.prototype.indexOf.call(r,e.target),r[n=37===t||38===t?0===i?r.length-1:i-1:i<r.length-1?i+1:0].focus(),r[n].click(),this.setFocus())},setFocus:function(){this.focusable&&(this.isFocus=!0)},removeFocus:function(){this.isFocus=!1},visibilityChangeHandler:function(){var e=this,t=document.visibilityState;"hidden"===t?this.focusable=!1:"visible"===t&&setTimeout((function(){e.focusable=!0}),50)},windowBlurHandler:function(){this.focusable=!1},windowFocusHandler:function(){var e=this;setTimeout((function(){e.focusable=!0}),50)}},updated:function(){this.update()},render:function(e){var t=this,n=this.type,i=this.panes,r=this.editable,o=this.stretch,a=this.onTabClick,s=this.onTabRemove,l=this.navStyle,c=this.scrollable,u=this.scrollNext,h=this.scrollPrev,d=this.changeTab,f=this.setFocus,p=this.removeFocus,m=c?[e("span",{class:["el-tabs__nav-prev",c.prev?"":"is-disabled"],on:{click:h}},[e("i",{class:"el-icon-arrow-left"})]),e("span",{class:["el-tabs__nav-next",c.next?"":"is-disabled"],on:{click:u}},[e("i",{class:"el-icon-arrow-right"})])]:null,v=this._l(i,(function(n,i){var o,l=n.name||n.index||i,c=n.isClosable||r;n.index=""+i;var u=c?e("span",{class:"el-icon-close",on:{click:function(e){s(n,e)}}}):null,h=n.$slots.label||n.label,d=n.active?0:-1;return e("div",{class:(o={"el-tabs__item":!0},o["is-"+t.rootTabs.tabPosition]=!0,o["is-active"]=n.active,o["is-disabled"]=n.disabled,o["is-closable"]=c,o["is-focus"]=t.isFocus,o),attrs:{id:"tab-"+l,"aria-controls":"pane-"+l,role:"tab","aria-selected":n.active,tabindex:d},key:"tab-"+l,ref:"tabs",refInFor:!0,on:{focus:function(){f()},blur:function(){p()},click:function(e){p(),a(n,l,e)},keydown:function(e){!c||46!==e.keyCode&&8!==e.keyCode||s(n,e)}}},[h,u])}));return e("div",{class:["el-tabs__nav-wrap",c?"is-scrollable":"","is-"+this.rootTabs.tabPosition]},[m,e("div",{class:["el-tabs__nav-scroll"],ref:"navScroll"},[e("div",{class:["el-tabs__nav","is-"+this.rootTabs.tabPosition,o&&-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"is-stretch":""],ref:"nav",style:l,attrs:{role:"tablist"},on:{keydown:d}},[n?null:e("tab-bar",{attrs:{tabs:i}}),v])])])},mounted:function(){var e=this;Object(Rt.addResizeListener)(this.$el,this.update),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("blur",this.windowBlurHandler),window.addEventListener("focus",this.windowFocusHandler),setTimeout((function(){e.scrollToActiveTab()}),0)},beforeDestroy:function(){this.$el&&this.update&&Object(Rt.removeResizeListener)(this.$el,this.update),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("blur",this.windowBlurHandler),window.removeEventListener("focus",this.windowFocusHandler)}},void 0,void 0,!1,null,null,null);To.options.__file="packages/tabs/src/tab-nav.vue";var Eo=r({name:"ElTabs",components:{TabNav:To.exports},props:{type:String,activeName:String,closable:Boolean,addable:Boolean,value:{},editable:Boolean,tabPosition:{type:String,default:"top"},beforeLeave:Function,stretch:Boolean},provide:function(){return{rootTabs:this}},data:function(){return{currentName:this.value||this.activeName,panes:[]}},watch:{activeName:function(e){this.setCurrentName(e)},value:function(e){this.setCurrentName(e)},currentName:function(e){var t=this;this.$refs.nav&&this.$nextTick((function(){t.$refs.nav.$nextTick((function(e){t.$refs.nav.scrollToActiveTab()}))}))}},methods:{calcPaneInstances:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$slots.default){var n=this.$slots.default.filter((function(e){return e.tag&&e.componentOptions&&"ElTabPane"===e.componentOptions.Ctor.options.name})),i=n.map((function(e){return e.componentInstance})),r=!(i.length===this.panes.length&&i.every((function(t,n){return t===e.panes[n]})));(t||r)&&(this.panes=i)}else 0!==this.panes.length&&(this.panes=[])},handleTabClick:function(e,t,n){e.disabled||(this.setCurrentName(t),this.$emit("tab-click",e,n))},handleTabRemove:function(e,t){e.disabled||(t.stopPropagation(),this.$emit("edit",e.name,"remove"),this.$emit("tab-remove",e.name))},handleTabAdd:function(){this.$emit("edit",null,"add"),this.$emit("tab-add")},setCurrentName:function(e){var t=this,n=function(){t.currentName=e,t.$emit("input",e)};if(this.currentName!==e&&this.beforeLeave){var i=this.beforeLeave(e,this.currentName);i&&i.then?i.then((function(){n(),t.$refs.nav&&t.$refs.nav.removeFocus()}),(function(){})):!1!==i&&n()}else n()}},render:function(e){var t,n=this.type,i=this.handleTabClick,r=this.handleTabRemove,o=this.handleTabAdd,a=this.currentName,s=this.panes,l=this.editable,c=this.addable,u=this.tabPosition,h=this.stretch,d=l||c?e("span",{class:"el-tabs__new-tab",on:{click:o,keydown:function(e){13===e.keyCode&&o()}},attrs:{tabindex:"0"}},[e("i",{class:"el-icon-plus"})]):null,f=e("div",{class:["el-tabs__header","is-"+u]},[d,e("tab-nav",{props:{currentName:a,onTabClick:i,onTabRemove:r,editable:l,type:n,panes:s,stretch:h},ref:"nav"})]),p=e("div",{class:"el-tabs__content"},[this.$slots.default]);return e("div",{class:(t={"el-tabs":!0,"el-tabs--card":"card"===n},t["el-tabs--"+u]=!0,t["el-tabs--border-card"]="border-card"===n,t)},["bottom"!==u?[f,p]:[p,f]])},created:function(){this.currentName||this.setCurrentName("0"),this.$on("tab-nav-update",this.calcPaneInstances.bind(null,!0))},mounted:function(){this.calcPaneInstances()},updated:function(){this.calcPaneInstances()}},void 0,void 0,!1,null,null,null);Eo.options.__file="packages/tabs/src/tabs.vue";var Co=Eo.exports;Co.install=function(e){e.component(Co.name,Co)};var Ao=Co,Oo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.lazy||e.loaded||e.active?n("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!e.active,id:"pane-"+e.paneName,"aria-labelledby":"tab-"+e.paneName}},[e._t("default")],2):e._e()};Oo._withStripped=!0;var Lo=r({name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var e=this.$parent.currentName===(this.name||this.index);return e&&(this.loaded=!0),e},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},Oo,[],!1,null,null,null);Lo.options.__file="packages/tabs/src/tab-pane.vue";var ko=Lo.exports;ko.install=function(e){e.component(ko.name,ko)};var Po=ko,Do=r({name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,i=this.hit,r=this.effect,o=e("span",{class:["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",r?"el-tag--"+r:"",i&&"is-hit"],style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?o:e("transition",{attrs:{name:"el-zoom-in-center"}},[o])}},void 0,void 0,!1,null,null,null);Do.options.__file="packages/tag/src/tag.vue";var Io=Do.exports;Io.install=function(e){e.component(Io.name,Io)};var No=Io,Fo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,(function(t){return n("el-tree-node",{key:e.getNodeKey(t),attrs:{node:t,props:e.props,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})})),e.isEmpty?n("div",{staticClass:"el-tree__empty-block"},[n("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)};Fo._withStripped=!0;var Ro="$treeNodeId",Bo=function(e,t){t&&!t[Ro]&&Object.defineProperty(t,Ro,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},jo=function(e,t){return e?t[e]:t[Ro]},zo=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var Uo=function(e){for(var t=!0,n=!0,i=!0,r=0,o=e.length;r<o;r++){var a=e[r];(!0!==a.checked||a.indeterminate)&&(t=!1,a.disabled||(i=!1)),(!1!==a.checked||a.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:i,half:!t&&!n}},Vo=function e(t){if(0!==t.childNodes.length){var n=Uo(t.childNodes),i=n.all,r=n.none,o=n.half;i?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):r&&(t.checked=!1,t.indeterminate=!1);var a=t.parent;a&&0!==a.level&&(t.store.checkStrictly||e(a))}},Go=function(e,t){var n=e.store.props,i=e.data||{},r=n[t];if("function"==typeof r)return r(i,e);if("string"==typeof r)return i[r];if(void 0===r){var o=i[t];return void 0===o?"":o}},Ho=0,Wo=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Ho++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var i=this.store;if(!i)throw new Error("[Node]store is required!");i.registerNode(this);var r=i.props;if(r&&void 0!==r.isLeaf){var o=Go(this,"isLeaf");"boolean"==typeof o&&(this.isLeafByUser=o)}if(!0!==i.lazy&&this.data?(this.setData(this.data),i.defaultExpandAll&&(this.expanded=!0)):this.level>0&&i.lazy&&i.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Bo(this,this.data),this.data){var a=i.defaultExpandedKeys,s=i.key;s&&a&&-1!==a.indexOf(this.key)&&this.expand(null,i.autoExpandParent),s&&void 0!==i.currentNodeKey&&this.key===i.currentNodeKey&&(i.currentNode=this,i.currentNode.isCurrent=!0),i.lazy&&i._initDefaultCheckedNode(this),this.updateLeafState()}}return e.prototype.setData=function(e){Array.isArray(e)||Bo(this,e),this.data=e,this.childNodes=[];for(var t=void 0,n=0,i=(t=0===this.level&&this.data instanceof Array?this.data:Go(this,"children")||[]).length;n<i;n++)this.insertChild({data:t[n]})},e.prototype.contains=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function n(i){for(var r=i.childNodes||[],o=!1,a=0,s=r.length;a<s;a++){var l=r[a];if(l===e||t&&n(l)){o=!0;break}}return o};return n(this)},e.prototype.remove=function(){var e=this.parent;e&&e.removeChild(this)},e.prototype.insertChild=function(t,n,i){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!i){var r=this.getChildren(!0);-1===r.indexOf(t.data)&&(void 0===n||n<0?r.push(t.data):r.splice(n,0,t.data))}Ve()(t,{parent:this,store:this.store}),t=new e(t)}t.level=this.level+1,void 0===n||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()},e.prototype.insertBefore=function(e,t){var n=void 0;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)},e.prototype.insertAfter=function(e,t){var n=void 0;t&&-1!==(n=this.childNodes.indexOf(t))&&(n+=1),this.insertChild(e,n)},e.prototype.removeChild=function(e){var t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);var i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()},e.prototype.removeChildByData=function(e){for(var t=null,n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===e){t=this.childNodes[n];break}t&&this.removeChild(t)},e.prototype.expand=function(e,t){var n=this,i=function(){if(t)for(var i=n.parent;i.level>0;)i.expanded=!0,i=i.parent;n.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData((function(e){e instanceof Array&&(n.checked?n.setChecked(!0,!0):n.store.checkStrictly||Vo(n),i())})):i()},e.prototype.doCreateChildren=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e){t.insertChild(Ve()({data:e},n),void 0,!0)}))},e.prototype.collapse=function(){this.expanded=!1},e.prototype.shouldLoadData=function(){return!0===this.store.lazy&&this.store.load&&!this.loaded},e.prototype.updateLeafState=function(){if(!0!==this.store.lazy||!0===this.loaded||void 0===this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser},e.prototype.setChecked=function(e,t,n,i){var r=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=Uo(this.childNodes),a=o.all,s=o.allWithoutDisable;this.isLeaf||a||!s||(this.checked=!1,e=!1);var l=function(){if(t){for(var n=r.childNodes,o=0,a=n.length;o<a;o++){var s=n[o];i=i||!1!==e;var l=s.disabled?s.checked:i;s.setChecked(l,t,!0,i)}var c=Uo(n),u=c.half,h=c.all;h||(r.checked=h,r.indeterminate=u)}};if(this.shouldLoadData())return void this.loadData((function(){l(),Vo(r)}),{checked:!1!==e});l()}var c=this.parent;c&&0!==c.level&&(n||Vo(c))}},e.prototype.getChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var n=this.store.props,i="children";return n&&(i=n.children||"children"),void 0===t[i]&&(t[i]=null),e&&!t[i]&&(t[i]=[]),t[i]},e.prototype.updateChildren=function(){var e=this,t=this.getChildren()||[],n=this.childNodes.map((function(e){return e.data})),i={},r=[];t.forEach((function(e,t){var o=e[Ro];!!o&&Object(m.arrayFindIndex)(n,(function(e){return e[Ro]===o}))>=0?i[o]={index:t,data:e}:r.push({index:t,data:e})})),this.store.lazy||n.forEach((function(t){i[t[Ro]]||e.removeChildByData(t)})),r.forEach((function(t){var n=t.index,i=t.data;e.insertChild({data:i},n)})),this.updateLeafState()},e.prototype.loadData=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(n).length)e&&e.call(this);else{this.loading=!0;var i=function(i){t.loaded=!0,t.loading=!1,t.childNodes=[],t.doCreateChildren(i,n),t.updateLeafState(),e&&e.call(t,i)};this.store.load(this,i)}},zo(e,[{key:"label",get:function(){return Go(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return Go(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}}]),e}(),qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Yo=function(){function e(t){var n=this;for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(i)&&(this[i]=t[i]);(this.nodesMap={},this.root=new Wo({data:this.data,store:this}),this.lazy&&this.load)?(0,this.load)(this.root,(function(e){n.root.doCreateChildren(e),n._initDefaultCheckedNodes()})):this._initDefaultCheckedNodes()}return e.prototype.filter=function(e){var t=this.filterNodeMethod,n=this.lazy;!function i(r){var o=r.root?r.root.childNodes:r.childNodes;if(o.forEach((function(n){n.visible=t.call(n,e,n.data,n),i(n)})),!r.visible&&o.length){var a;a=!o.some((function(e){return e.visible})),r.root?r.root.visible=!1===a:r.visible=!1===a}e&&(!r.visible||r.isLeaf||n||r.expand())}(this)},e.prototype.setData=function(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()},e.prototype.getNode=function(e){if(e instanceof Wo)return e;var t="object"!==(void 0===e?"undefined":qo(e))?e:jo(this.key,e);return this.nodesMap[t]||null},e.prototype.insertBefore=function(e,t){var n=this.getNode(t);n.parent.insertBefore({data:e},n)},e.prototype.insertAfter=function(e,t){var n=this.getNode(t);n.parent.insertAfter({data:e},n)},e.prototype.remove=function(e){var t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))},e.prototype.append=function(e,t){var n=t?this.getNode(t):this.root;n&&n.insertChild({data:e})},e.prototype._initDefaultCheckedNodes=function(){var e=this,t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach((function(t){var i=n[t];i&&i.setChecked(!0,!e.checkStrictly)}))},e.prototype._initDefaultCheckedNode=function(e){-1!==(this.defaultCheckedKeys||[]).indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)},e.prototype.setDefaultCheckedKey=function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())},e.prototype.registerNode=function(e){this.key&&e&&e.data&&(void 0!==e.key&&(this.nodesMap[e.key]=e))},e.prototype.deregisterNode=function(e){var t=this;this.key&&e&&e.data&&(e.childNodes.forEach((function(e){t.deregisterNode(e)})),delete this.nodesMap[e.key])},e.prototype.getCheckedNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=function i(r){(r.root?r.root.childNodes:r.childNodes).forEach((function(r){(r.checked||t&&r.indeterminate)&&(!e||e&&r.isLeaf)&&n.push(r.data),i(r)}))};return i(this),n},e.prototype.getCheckedKeys=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(t).map((function(t){return(t||{})[e.key]}))},e.prototype.getHalfCheckedNodes=function(){var e=[];return function t(n){(n.root?n.root.childNodes:n.childNodes).forEach((function(n){n.indeterminate&&e.push(n.data),t(n)}))}(this),e},e.prototype.getHalfCheckedKeys=function(){var e=this;return this.getHalfCheckedNodes().map((function(t){return(t||{})[e.key]}))},e.prototype._getAllNodes=function(){var e=[],t=this.nodesMap;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},e.prototype.updateChildren=function(e,t){var n=this.nodesMap[e];if(n){for(var i=n.childNodes,r=i.length-1;r>=0;r--){var o=i[r];this.remove(o.data)}for(var a=0,s=t.length;a<s;a++){var l=t[a];this.append(l,n.data)}}},e.prototype._setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],i=this._getAllNodes().sort((function(e,t){return t.level-e.level})),r=Object.create(null),o=Object.keys(n);i.forEach((function(e){return e.setChecked(!1,!1)}));for(var a=0,s=i.length;a<s;a++){var l=i[a],c=l.data[e].toString(),u=o.indexOf(c)>-1;if(u){for(var h=l.parent;h&&h.level>0;)r[h.data[e]]=!0,h=h.parent;l.isLeaf||this.checkStrictly?l.setChecked(!0,!1):(l.setChecked(!0,!0),t&&function(){l.setChecked(!1,!1);!function e(t){t.childNodes.forEach((function(t){t.isLeaf||t.setChecked(!1,!1),e(t)}))}(l)}())}else l.checked&&!r[c]&&l.setChecked(!1,!1)}},e.prototype.setCheckedNodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.key,i={};e.forEach((function(e){i[(e||{})[n]]=!0})),this._setCheckedKeys(n,t,i)},e.prototype.setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var n=this.key,i={};e.forEach((function(e){i[e]=!0})),this._setCheckedKeys(n,t,i)},e.prototype.setDefaultExpandedKeys=function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var n=t.getNode(e);n&&n.expand(null,t.autoExpandParent)}))},e.prototype.setChecked=function(e,t,n){var i=this.getNode(e);i&&i.setChecked(!!t,n)},e.prototype.getCurrentNode=function(){return this.currentNode},e.prototype.setCurrentNode=function(e){var t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0},e.prototype.setUserCurrentNode=function(e){var t=e[this.key],n=this.nodesMap[t];this.setCurrentNode(n)},e.prototype.setCurrentNodeKey=function(e){if(null==e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var t=this.getNode(e);t&&this.setCurrentNode(t)},e}(),$o=function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":t.expanded,"is-current":t.node.isCurrent,"is-hidden":!t.node.visible,"is-focusable":!t.node.disabled,"is-checked":!t.node.disabled&&t.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.draggable},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)},contextmenu:function(t){return e.handleContextMenu(t)},dragstart:function(e){return e.stopPropagation(),t.handleDragStart(e)},dragover:function(e){return e.stopPropagation(),t.handleDragOver(e)},dragend:function(e){return e.stopPropagation(),t.handleDragEnd(e)},drop:function(e){return e.stopPropagation(),t.handleDrop(e)}}},[i("div",{staticClass:"el-tree-node__content",style:{"padding-left":(t.node.level-1)*t.tree.indent+"px"}},[i("span",{class:[{"is-leaf":t.node.isLeaf,expanded:!t.node.isLeaf&&t.expanded},"el-tree-node__expand-icon",t.tree.iconClass?t.tree.iconClass:"el-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),t.handleExpandIconClick(e)}}}),t.showCheckbox?i("el-checkbox",{attrs:{indeterminate:t.node.indeterminate,disabled:!!t.node.disabled},on:{change:t.handleCheckChange},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.node.checked,callback:function(e){t.$set(t.node,"checked",e)},expression:"node.checked"}}):t._e(),t.node.loading?i("span",{staticClass:"el-tree-node__loading-icon el-icon-loading"}):t._e(),i("node-content",{attrs:{node:t.node}})],1),i("el-collapse-transition",[!t.renderAfterExpand||t.childNodeRendered?i("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",attrs:{role:"group","aria-expanded":t.expanded}},t._l(t.node.childNodes,(function(e){return i("el-tree-node",{key:t.getNodeKey(e),attrs:{"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:e},on:{"node-expand":t.handleChildNodeExpand}})})),1):t._e()])],1)};$o._withStripped=!0;var Xo=r({name:"ElTreeNode",componentName:"ElTreeNode",mixins:[M.a],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{ElCollapseTransition:be.a,ElCheckbox:sn.a,NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent,n=t.tree,i=this.node,r=i.data,o=i.store;return t.renderContent?t.renderContent.call(t._renderProxy,e,{_self:n.$vnode.context,node:i,data:r,store:o}):n.$scopedSlots.default?n.$scopedSlots.default({node:i,data:r}):e("span",{class:"el-tree-node__label"},[i.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var t=this;this.$nextTick((function(){return t.expanded=e})),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return jo(this.tree.nodeKey,e.data)},handleSelectChange:function(e,t){this.oldChecked!==e&&this.oldIndeterminate!==t&&this.tree.$emit("check-change",this.node.data,e,t),this.oldChecked=e,this.indeterminate=t},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,t){var n=this;this.node.setChecked(t.target.checked,!this.tree.checkStrictly),this.$nextTick((function(){var e=n.tree.store;n.tree.$emit("check",n.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})}))},handleChildNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.tree.$emit("node-expand",e,t,n)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,t=this.$parent;t.isTree?this.tree=t:this.tree=t.tree;var n=this.tree;n||console.warn("Can not find node's tree.");var i=(n.props||{}).children||"children";this.$watch("node.data."+i,(function(){e.node.updateChildren()})),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",(function(t){e.node!==t&&e.node.collapse()}))}},$o,[],!1,null,null,null);Xo.options.__file="packages/tree/src/tree-node.vue";var Qo=Xo.exports,Ko=r({name:"ElTree",mixins:[M.a],components:{ElTreeNode:Qo},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return Object(Bt.t)("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every((function(e){return!e.visible}))}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,(function(e){e.setAttribute("tabindex",-1)}))},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return jo(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var t=this.store.getNode(e);if(!t)return[];for(var n=[t.data],i=t.parent;i&&i!==this.root;)n.push(i.data),i=i.parent;return n.reverse()},getCheckedNodes:function(e,t){return this.store.getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,t)},setCheckedKeys:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,t)},setChecked:function(e,t,n){this.store.setChecked(e,t,n)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},handleNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.$emit("node-expand",e,t,n)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var t=e.target;if(-1!==t.className.indexOf("el-tree-node")){var n=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var i=this.treeItemArray.indexOf(t),r=void 0;[38,40].indexOf(n)>-1&&(e.preventDefault(),r=38===n?0!==i?i-1:0:i<this.treeItemArray.length-1?i+1:0,this.treeItemArray[r].focus()),[37,39].indexOf(n)>-1&&(e.preventDefault(),t.click());var o=t.querySelector('[type="checkbox"]');[13,32].indexOf(n)>-1&&o&&(e.preventDefault(),o.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new Yo({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var t=this.dragState;this.$on("tree-node-drag-start",(function(n,i){if("function"==typeof e.allowDrag&&!e.allowDrag(i.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(e){}t.draggingNode=i,e.$emit("node-drag-start",i.node,n)})),this.$on("tree-node-drag-over",(function(n,i){var r=function(e,t){for(var n=e;n&&"BODY"!==n.tagName;){if(n.__vue__&&n.__vue__.$options.name===t)return n.__vue__;n=n.parentNode}return null}(n.target,"ElTreeNode"),o=t.dropNode;o&&o!==r&&Object(pe.removeClass)(o.$el,"is-drop-inner");var a=t.draggingNode;if(a&&r){var s=!0,l=!0,c=!0,u=!0;"function"==typeof e.allowDrop&&(s=e.allowDrop(a.node,r.node,"prev"),u=l=e.allowDrop(a.node,r.node,"inner"),c=e.allowDrop(a.node,r.node,"next")),n.dataTransfer.dropEffect=l?"move":"none",(s||l||c)&&o!==r&&(o&&e.$emit("node-drag-leave",a.node,o.node,n),e.$emit("node-drag-enter",a.node,r.node,n)),(s||l||c)&&(t.dropNode=r),r.node.nextSibling===a.node&&(c=!1),r.node.previousSibling===a.node&&(s=!1),r.node.contains(a.node,!1)&&(l=!1),(a.node===r.node||a.node.contains(r.node))&&(s=!1,l=!1,c=!1);var h=r.$el.getBoundingClientRect(),d=e.$el.getBoundingClientRect(),f=void 0,p=s?l?.25:c?.45:1:-1,m=c?l?.75:s?.55:0:1,v=-9999,g=n.clientY-h.top;f=g<h.height*p?"before":g>h.height*m?"after":l?"inner":"none";var y=r.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),b=e.$refs.dropIndicator;"before"===f?v=y.top-d.top:"after"===f&&(v=y.bottom-d.top),b.style.top=v+"px",b.style.left=y.right-d.left+"px","inner"===f?Object(pe.addClass)(r.$el,"is-drop-inner"):Object(pe.removeClass)(r.$el,"is-drop-inner"),t.showDropIndicator="before"===f||"after"===f,t.allowDrop=t.showDropIndicator||u,t.dropType=f,e.$emit("node-drag-over",a.node,r.node,n)}})),this.$on("tree-node-drag-end",(function(n){var i=t.draggingNode,r=t.dropType,o=t.dropNode;if(n.preventDefault(),n.dataTransfer.dropEffect="move",i&&o){var a={data:i.node.data};"none"!==r&&i.node.remove(),"before"===r?o.node.parent.insertBefore(a,o.node):"after"===r?o.node.parent.insertAfter(a,o.node):"inner"===r&&o.node.insertChild(a),"none"!==r&&e.store.registerNode(a),Object(pe.removeClass)(o.$el,"is-drop-inner"),e.$emit("node-drag-end",i.node,o.node,r,n),"none"!==r&&e.$emit("node-drop",i.node,o.node,r,n)}i&&!o&&e.$emit("node-drag-end",i.node,null,r,n),t.showDropIndicator=!1,t.draggingNode=null,t.dropNode=null,t.allowDrop=!0}))},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},Fo,[],!1,null,null,null);Ko.options.__file="packages/tree/src/tree.vue";var Jo=Ko.exports;Jo.install=function(e){e.component(Jo.name,Jo)};var Zo=Jo,ea=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-alert-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-alert",class:[e.typeClass,e.center?"is-center":"","is-"+e.effect],attrs:{role:"alert"}},[e.showIcon?n("i",{staticClass:"el-alert__icon",class:[e.iconClass,e.isBigIcon]}):e._e(),n("div",{staticClass:"el-alert__content"},[e.title||e.$slots.title?n("span",{staticClass:"el-alert__title",class:[e.isBoldTitle]},[e._t("title",[e._v(e._s(e.title))])],2):e._e(),e.$slots.default&&!e.description?n("p",{staticClass:"el-alert__description"},[e._t("default")],2):e._e(),e.description&&!e.$slots.default?n("p",{staticClass:"el-alert__description"},[e._v(e._s(e.description))]):e._e(),n("i",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==e.closeText,"el-icon-close":""===e.closeText},on:{click:function(t){e.close()}}},[e._v(e._s(e.closeText))])])])])};ea._withStripped=!0;var ta={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},na=r({name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(e){return-1!==["light","dark"].indexOf(e)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return ta[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},ea,[],!1,null,null,null);na.options.__file="packages/alert/src/main.vue";var ia=na.exports;ia.install=function(e){e.component(ia.name,ia)};var ra=ia,oa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-notification-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-notification",e.customClass,e.horizontalClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(t){e.clearTimer()},mouseleave:function(t){e.startTimer()},click:e.click}},[e.type||e.iconClass?n("i",{staticClass:"el-notification__icon",class:[e.typeClass,e.iconClass]}):e._e(),n("div",{staticClass:"el-notification__group",class:{"is-with-icon":e.typeClass||e.iconClass}},[n("h2",{staticClass:"el-notification__title",domProps:{textContent:e._s(e.title)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"el-notification__content"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2),e.showClose?n("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}):e._e()])])])};oa._withStripped=!0;var aa={success:"success",info:"info",warning:"warning",error:"error"},sa=r({data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&aa[this.type]?"el-icon-"+aa[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var e;return(e={})[this.verticalProperty]=this.verticalOffset+"px",e}},watch:{closed:function(e){e&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"==typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){46===e.keyCode||8===e.keyCode?this.clearTimer():27===e.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},oa,[],!1,null,null,null);sa.options.__file="packages/notification/src/main.vue";var la=sa.exports,ca=pn.a.extend(la),ua=void 0,ha=[],da=1,fa=function e(t){if(!pn.a.prototype.$isServer){var n=(t=Ve()({},t)).onClose,i="notification_"+da++,r=t.position||"top-right";t.onClose=function(){e.close(i,n)},ua=new ca({data:t}),Object(Vr.isVNode)(t.message)&&(ua.$slots.default=[t.message],t.message="REPLACED_BY_VNODE"),ua.id=i,ua.$mount(),document.body.appendChild(ua.$el),ua.visible=!0,ua.dom=ua.$el,ua.dom.style.zIndex=b.PopupManager.nextZIndex();var o=t.offset||0;return ha.filter((function(e){return e.position===r})).forEach((function(e){o+=e.$el.offsetHeight+16})),o+=16,ua.verticalOffset=o,ha.push(ua),ua}};["success","warning","info","error"].forEach((function(e){fa[e]=function(t){return("string"==typeof t||Object(Vr.isVNode)(t))&&(t={message:t}),t.type=e,fa(t)}})),fa.close=function(e,t){var n=-1,i=ha.length,r=ha.filter((function(t,i){return t.id===e&&(n=i,!0)}))[0];if(r&&("function"==typeof t&&t(r),ha.splice(n,1),!(i<=1)))for(var o=r.position,a=r.dom.offsetHeight,s=n;s<i-1;s++)ha[s].position===o&&(ha[s].dom.style[r.verticalProperty]=parseInt(ha[s].dom.style[r.verticalProperty],10)-a-16+"px")},fa.closeAll=function(){for(var e=ha.length-1;e>=0;e--)ha[e].close()};var pa=fa,ma=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-slider",class:{"is-vertical":e.vertical,"el-slider--with-input":e.showInput},attrs:{role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled}},[e.showInput&&!e.range?n("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.inputSize},on:{change:e.emitChange},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}):e._e(),n("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":e.showInput,disabled:e.sliderDisabled},style:e.runwayStyle,on:{click:e.onSliderClick}},[n("div",{staticClass:"el-slider__bar",style:e.barStyle}),n("slider-button",{ref:"button1",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}),e.range?n("slider-button",{ref:"button2",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.secondValue,callback:function(t){e.secondValue=t},expression:"secondValue"}}):e._e(),e._l(e.stops,(function(t,i){return e.showStops?n("div",{key:i,staticClass:"el-slider__stop",style:e.getStopStyle(t)}):e._e()})),e.markList.length>0?[n("div",e._l(e.markList,(function(t,i){return n("div",{key:i,staticClass:"el-slider__stop el-slider__marks-stop",style:e.getStopStyle(t.position)})})),0),n("div",{staticClass:"el-slider__marks"},e._l(e.markList,(function(t,i){return n("slider-marker",{key:i,style:e.getStopStyle(t.position),attrs:{mark:t.mark}})})),1)]:e._e()],2)],1)};ma._withStripped=!0;var va=n(41),ga=n.n(va),ya=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:e.hovering,dragging:e.dragging},style:e.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave,mousedown:e.onButtonDown,touchstart:e.onButtonDown,focus:e.handleMouseEnter,blur:e.handleMouseLeave,keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.onLeftKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.onRightKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onLeftKeyDown(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onRightKeyDown(t))}]}},[n("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":e.tooltipClass,disabled:!e.showTooltip}},[n("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.formatValue))]),n("div",{staticClass:"el-slider__button",class:{hover:e.hovering,dragging:e.dragging}})])],1)};ya._withStripped=!0;var ba=r({name:"ElSliderButton",components:{ElTooltip:Ce.a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(e){this.$parent.dragging=e}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(e){this.disabled||(e.preventDefault(),this.onDragStart(e),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onDragStart:function(e){this.dragging=!0,this.isClick=!0,"touchstart"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?this.startY=e.clientY:this.startX=e.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(e){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var t=0;"touchmove"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?(this.currentY=e.clientY,t=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=e.clientX,t=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+t,this.setPosition(this.newPosition)}},onDragEnd:function(){var e=this;this.dragging&&(setTimeout((function(){e.dragging=!1,e.hideTooltip(),e.isClick||(e.setPosition(e.newPosition),e.$parent.emitChange())}),0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(e){var t=this;if(null!==e&&!isNaN(e)){e<0?e=0:e>100&&(e=100);var n=100/((this.max-this.min)/this.step),i=Math.round(e/n)*n*(this.max-this.min)*.01+this.min;i=parseFloat(i.toFixed(this.precision)),this.$emit("input",i),this.$nextTick((function(){t.displayTooltip(),t.$refs.tooltip&&t.$refs.tooltip.updatePopper()})),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},ya,[],!1,null,null,null);ba.options.__file="packages/slider/src/button.vue";var xa=ba.exports,wa={name:"ElMarker",props:{mark:{type:[String,Object]}},render:function(){var e=arguments[0],t="string"==typeof this.mark?this.mark:this.mark.label;return e("div",{class:"el-slider__marks-text",style:this.mark.style||{}},[t])}},_a=r({name:"ElSlider",mixins:[M.a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String,marks:Object},components:{ElInputNumber:ga.a,SliderButton:xa,SliderMarker:wa},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(e,t){this.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every((function(e,n){return e===t[n]}))||this.setValues()},dragging:function(e){e||this.setValues()},firstValue:function(e){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",e)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var e=this;return this.range?![this.minValue,this.maxValue].every((function(t,n){return t===e.oldValue[n]})):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var e=this.value;this.range&&Array.isArray(e)?e[1]<this.min?this.$emit("input",[this.min,this.min]):e[0]>this.max?this.$emit("input",[this.max,this.max]):e[0]<this.min?this.$emit("input",[this.min,e[1]]):e[1]>this.max?this.$emit("input",[e[0],this.max]):(this.firstValue=e[0],this.secondValue=e[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=e.slice())):this.range||"number"!=typeof e||isNaN(e)||(e<this.min?this.$emit("input",this.min):e>this.max?this.$emit("input",this.max):(this.firstValue=e,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",e),this.oldValue=e)))}},setPosition:function(e){var t=this.min+e*(this.max-this.min)/100;if(this.range){var n=void 0;n=Math.abs(this.minValue-t)<Math.abs(this.maxValue-t)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[n].setPosition(e)}else this.$refs.button1.setPosition(e)},onSliderClick:function(e){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var t=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((t-e.clientY)/this.sliderSize*100)}else{var n=this.$refs.slider.getBoundingClientRect().left;this.setPosition((e.clientX-n)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.range?[e.minValue,e.maxValue]:e.value)}))},getStopStyle:function(e){return this.vertical?{bottom:e+"%"}:{left:e+"%"}}},computed:{stops:function(){var e=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var t=(this.max-this.min)/this.step,n=100*this.step/(this.max-this.min),i=[],r=1;r<t;r++)i.push(r*n);return this.range?i.filter((function(t){return t<100*(e.minValue-e.min)/(e.max-e.min)||t>100*(e.maxValue-e.min)/(e.max-e.min)})):i.filter((function(t){return t>100*(e.firstValue-e.min)/(e.max-e.min)}))},markList:function(){var e=this;return this.marks?Object.keys(this.marks).map(parseFloat).sort((function(e,t){return e-t})).filter((function(t){return t<=e.max&&t>=e.min})).map((function(t){return{point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}})):[]},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var e=[this.min,this.max,this.step].map((function(e){var t=(""+e).split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var e=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],e=this.firstValue+"-"+this.secondValue):("number"!=typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,e=this.firstValue),this.$el.setAttribute("aria-valuetext",e),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},ma,[],!1,null,null,null);_a.options.__file="packages/slider/src/main.vue";var Sa=_a.exports;Sa.install=function(e){e.component(Sa.name,Sa)};var Ma=Sa,Ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[e.customClass,{"is-fullscreen":e.fullscreen}],style:{backgroundColor:e.background||""}},[n("div",{staticClass:"el-loading-spinner"},[e.spinner?n("i",{class:e.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),e.text?n("p",{staticClass:"el-loading-text"},[e._v(e._s(e.text))]):e._e()])])])};Ta._withStripped=!0;var Ea=r({data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(e){this.text=e}}},Ta,[],!1,null,null,null);Ea.options.__file="packages/loading/src/loading.vue";var Ca=Ea.exports,Aa=n(33),Oa=n.n(Aa),La=pn.a.extend(Ca),ka={install:function(e){if(!e.prototype.$isServer){var t=function(t,i){i.value?e.nextTick((function(){i.modifiers.fullscreen?(t.originalPosition=Object(pe.getStyle)(document.body,"position"),t.originalOverflow=Object(pe.getStyle)(document.body,"overflow"),t.maskStyle.zIndex=b.PopupManager.nextZIndex(),Object(pe.addClass)(t.mask,"is-fullscreen"),n(document.body,t,i)):(Object(pe.removeClass)(t.mask,"is-fullscreen"),i.modifiers.body?(t.originalPosition=Object(pe.getStyle)(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";t.maskStyle[e]=t.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]-parseInt(Object(pe.getStyle)(document.body,"margin-"+e),10)+"px"})),["height","width"].forEach((function(e){t.maskStyle[e]=t.getBoundingClientRect()[e]+"px"})),n(document.body,t,i)):(t.originalPosition=Object(pe.getStyle)(t,"position"),n(t,t,i)))})):(Oa()(t.instance,(function(e){if(t.instance.hiding){t.domVisible=!1;var n=i.modifiers.fullscreen||i.modifiers.body?document.body:t;Object(pe.removeClass)(n,"el-loading-parent--relative"),Object(pe.removeClass)(n,"el-loading-parent--hidden"),t.instance.hiding=!1}}),300,!0),t.instance.visible=!1,t.instance.hiding=!0)},n=function(t,n,i){n.domVisible||"none"===Object(pe.getStyle)(n,"display")||"hidden"===Object(pe.getStyle)(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(e){n.mask.style[e]=n.maskStyle[e]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(pe.addClass)(t,"el-loading-parent--relative"),i.modifiers.fullscreen&&i.modifiers.lock&&Object(pe.addClass)(t,"el-loading-parent--hidden"),n.domVisible=!0,t.appendChild(n.mask),e.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};e.directive("loading",{bind:function(e,n,i){var r=e.getAttribute("element-loading-text"),o=e.getAttribute("element-loading-spinner"),a=e.getAttribute("element-loading-background"),s=e.getAttribute("element-loading-custom-class"),l=i.context,c=new La({el:document.createElement("div"),data:{text:l&&l[r]||r,spinner:l&&l[o]||o,background:l&&l[a]||a,customClass:l&&l[s]||s,fullscreen:!!n.modifiers.fullscreen}});e.instance=c,e.mask=c.$el,e.maskStyle={},n.value&&t(e,n)},update:function(e,n){e.instance.setText(e.getAttribute("element-loading-text")),n.oldValue!==n.value&&t(e,n)},unbind:function(e,n){e.domInserted&&(e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),t(e,{value:!1,modifiers:n.modifiers})),e.instance&&e.instance.$destroy()}})}}},Pa=ka,Da=pn.a.extend(Ca),Ia={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},Na=void 0;Da.prototype.originalPosition="",Da.prototype.originalOverflow="",Da.prototype.close=function(){var e=this;this.fullscreen&&(Na=void 0),Oa()(this,(function(t){var n=e.fullscreen||e.body?document.body:e.target;Object(pe.removeClass)(n,"el-loading-parent--relative"),Object(pe.removeClass)(n,"el-loading-parent--hidden"),e.$el&&e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()}),300),this.visible=!1};var Fa=function(e,t,n){var i={};e.fullscreen?(n.originalPosition=Object(pe.getStyle)(document.body,"position"),n.originalOverflow=Object(pe.getStyle)(document.body,"overflow"),i.zIndex=b.PopupManager.nextZIndex()):e.body?(n.originalPosition=Object(pe.getStyle)(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";i[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(t){i[t]=e.target.getBoundingClientRect()[t]+"px"}))):n.originalPosition=Object(pe.getStyle)(t,"position"),Object.keys(i).forEach((function(e){n.$el.style[e]=i[e]}))},Ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!pn.a.prototype.$isServer){if("string"==typeof(e=Ve()({},Ia,e)).target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&Na)return Na;var t=e.body?document.body:e.target,n=new Da({el:document.createElement("div"),data:e});return Fa(e,t,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(pe.addClass)(t,"el-loading-parent--relative"),e.fullscreen&&e.lock&&Object(pe.addClass)(t,"el-loading-parent--hidden"),t.appendChild(n.$el),pn.a.nextTick((function(){n.visible=!0})),e.fullscreen&&(Na=n),n}},Ba={install:function(e){e.use(Pa),e.prototype.$loading=Ra},directive:Pa,service:Ra},ja=function(){var e=this.$createElement;return(this._self._c||e)("i",{class:"el-icon-"+this.name})};ja._withStripped=!0;var za=r({name:"ElIcon",props:{name:String}},ja,[],!1,null,null,null);za.options.__file="packages/icon/src/icon.vue";var Ua=za.exports;Ua.install=function(e){e.component(Ua.name,Ua)};var Va=Ua,Ga={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(e){e.component(Ga.name,Ga)}},Ha=Ga,Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){for(var e=this.$parent;e&&"ElRow"!==e.$options.componentName;)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,n=[],i={};return this.gutter&&(i.paddingLeft=this.gutter/2+"px",i.paddingRight=i.paddingLeft),["span","offset","pull","push"].forEach((function(e){(t[e]||0===t[e])&&n.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])})),["xs","sm","md","lg","xl"].forEach((function(e){if("number"==typeof t[e])n.push("el-col-"+e+"-"+t[e]);else if("object"===Wa(t[e])){var i=t[e];Object.keys(i).forEach((function(t){n.push("span"!==t?"el-col-"+e+"-"+t+"-"+i[t]:"el-col-"+e+"-"+i[t])}))}})),e(this.tag,{class:["el-col",n],style:i},this.$slots.default)},install:function(e){e.component(qa.name,qa)}},Ya=qa,$a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(t){return n("li",{key:t.uid,class:["el-upload-list__item","is-"+t.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",t)},focus:function(t){e.focusing=!0},blur:function(t){e.focusing=!1},click:function(t){e.focusing=!1}}},[e._t("default",["uploading"!==t.status&&["picture-card","picture"].indexOf(e.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}):e._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){e.handleClick(t)}}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){e.$emit("remove",t)}}}),e.disabled?e._e():n("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===t.status?n("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(t.percentage)}}):e._e(),"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){e.handlePreview(t)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){e.$emit("remove",t)}}},[n("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:t})],2)})),0)};$a._withStripped=!0;var Xa=n(34),Qa=n.n(Xa),Ka=r({name:"ElUploadList",mixins:[p.a],data:function(){return{focusing:!1}},components:{ElProgress:Qa.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},$a,[],!1,null,null,null);Ka.options.__file="packages/upload/src/upload-list.vue";var Ja=Ka.exports,Za=n(24),es=n.n(Za);var ts=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragleave:function(t){t.preventDefault(),e.dragover=!1}}},[e._t("default")],2)};ts._withStripped=!0;var ns=r({name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var t=this.uploader.accept;this.dragover=!1,t?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var n=e.type,i=e.name,r=i.indexOf(".")>-1?"."+i.split(".").pop():"",o=n.replace(/\/.*$/,"");return t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?r===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&n===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},ts,[],!1,null,null,null);ns.options.__file="packages/upload/src/upload-dragger.vue";var is=r({inject:["uploader"],components:{UploadDragger:ns.exports},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:function(e){if("undefined"!=typeof XMLHttpRequest){var t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var i=new FormData;e.data&&Object.keys(e.data).forEach((function(t){i.append(t,e.data[t])})),i.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(function(e,t,n){var i=void 0;i=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+e+" "+n.status;var r=new Error(i);return r.status=n.status,r.method="post",r.url=e,r}(n,0,t));e.onSuccess(function(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&t.setRequestHeader(o,r[o]);return t.send(i),t}}},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var n=Array.prototype.slice.call(e);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach((function(e){t.onStart(e),t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var n=this.beforeUpload(e);n&&n.then?n.then((function(n){var i=Object.prototype.toString.call(n);if("[object File]"===i||"[object Blob]"===i){for(var r in"[object Blob]"===i&&(n=new File([n],e.name,{type:e.type})),e)e.hasOwnProperty(r)&&(n[r]=e[r]);t.post(n)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==n?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var n=e;e.uid&&(n=e.uid),t[n]&&t[n].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},post:function(e){var t=this,n=e.uid,i={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(n){t.onProgress(n,e)},onSuccess:function(i){t.onSuccess(i,e),delete t.reqs[n]},onError:function(i){t.onError(i,e),delete t.reqs[n]}},r=this.httpRequest(i);this.reqs[n]=r,r&&r.then&&r.then(i.onSuccess,i.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var t=this.handleClick,n=this.drag,i=this.name,r=this.handleChange,o=this.multiple,a=this.accept,s=this.listType,l=this.uploadFiles,c=this.disabled,u={class:{"el-upload":!0},on:{click:t,keydown:this.handleKeydown}};return u.class["el-upload--"+s]=!0,e("div",es()([u,{attrs:{tabindex:"0"}}]),[n?e("upload-dragger",{attrs:{disabled:c},on:{file:l}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:i,multiple:o,accept:a},ref:"input",on:{change:r}})])}},void 0,void 0,!1,null,null,null);is.options.__file="packages/upload/src/upload.vue";var rs=is.exports;function os(){}var as=r({name:"ElUpload",mixins:[_.a],components:{ElProgress:Qa.a,UploadList:Ja,Upload:rs},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:os},onChange:{type:Function,default:os},onPreview:{type:Function},onSuccess:{type:Function,default:os},onProgress:{type:Function,default:os},onError:{type:Function,default:os},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:os}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(e){console.error("[Element Error][Upload]",e)}return e})))},fileList:{immediate:!0,handler:function(e){var t=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+t.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{t.url=URL.createObjectURL(e)}catch(e){return void console.error("[Element Error][Upload]",e)}this.uploadFiles.push(t),this.onChange(t,this.uploadFiles)},handleProgress:function(e,t){var n=this.getFile(t);this.onProgress(e,n,this.uploadFiles),n.status="uploading",n.percentage=e.percent||0},handleSuccess:function(e,t){var n=this.getFile(t);n&&(n.status="success",n.response=e,this.onSuccess(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(e,t){var n=this.getFile(t),i=this.uploadFiles;n.status="fail",i.splice(i.indexOf(n),1),this.onError(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(e,t){var n=this;t&&(e=this.getFile(t));var i=function(){n.abort(e);var t=n.uploadFiles;t.splice(t.indexOf(e),1),n.onRemove(e,t)};if(this.beforeRemove){if("function"==typeof this.beforeRemove){var r=this.beforeRemove(e,this.uploadFiles);r&&r.then?r.then((function(){i()}),os):!1!==r&&i()}}else i()},getFile:function(e){var t=this.uploadFiles,n=void 0;return t.every((function(t){return!(n=e.uid===t.uid?t:null)})),n},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(t){e.$refs["upload-inner"].upload(t.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var t=this,n=void 0;this.showFileList&&(n=e(Ja,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(t.$scopedSlots.file)return t.$scopedSlots.file({file:e.file})}]));var i=e("upload",{props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},[this.$slots.trigger||this.$slots.default]);return e("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[i,this.$slots.default]:i,this.$slots.tip,"picture-card"!==this.listType?n:""])}},void 0,void 0,!1,null,null,null);as.options.__file="packages/upload/src/index.vue";var ss=as.exports;ss.install=function(e){e.component(ss.name,ss)};var ls=ss,cs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?n("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])};cs._withStripped=!0;var us=r({name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){return-1*this.perimeter*(1-this.rate)/2+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"==typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"==typeof this.color?this.color(e):"string"==typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),n=0;n<t.length;n++)if(t[n].percentage>e)return t[n].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,n){return"string"==typeof e?{color:e,progress:(n+1)*t}:e}))}}},cs,[],!1,null,null,null);us.options.__file="packages/progress/src/progress.vue";var hs=us.exports;hs.install=function(e){e.component(hs.name,hs)};var ds=hs,fs=function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"el-spinner"},[t("svg",{staticClass:"el-spinner-inner",style:{width:this.radius/2+"px",height:this.radius/2+"px"},attrs:{viewBox:"0 0 50 50"}},[t("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none",stroke:this.strokeColor,"stroke-width":this.strokeWidth}})])])};fs._withStripped=!0;var ps=r({name:"ElSpinner",props:{type:String,radius:{type:Number,default:100},strokeWidth:{type:Number,default:5},strokeColor:{type:String,default:"#efefef"}}},fs,[],!1,null,null,null);ps.options.__file="packages/spinner/src/spinner.vue";var ms=ps.exports;ms.install=function(e){e.component(ms.name,ms)};var vs=ms,gs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?n("i",{class:e.iconClass}):n("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):n("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])};gs._withStripped=!0;var ys={success:"success",info:"info",warning:"warning",error:"error"},bs=r({data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+ys[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},gs,[],!1,null,null,null);bs.options.__file="packages/message/src/main.vue";var xs=bs.exports,ws=pn.a.extend(xs),_s=void 0,Ss=[],Ms=1,Ts=function e(t){if(!pn.a.prototype.$isServer){"string"==typeof(t=t||{})&&(t={message:t});var n=t.onClose,i="message_"+Ms++;t.onClose=function(){e.close(i,n)},(_s=new ws({data:t})).id=i,Object(Vr.isVNode)(_s.message)&&(_s.$slots.default=[_s.message],_s.message=null),_s.$mount(),document.body.appendChild(_s.$el);var r=t.offset||20;return Ss.forEach((function(e){r+=e.$el.offsetHeight+16})),_s.verticalOffset=r,_s.visible=!0,_s.$el.style.zIndex=b.PopupManager.nextZIndex(),Ss.push(_s),_s}};["success","warning","info","error"].forEach((function(e){Ts[e]=function(t){return"string"==typeof t&&(t={message:t}),t.type=e,Ts(t)}})),Ts.close=function(e,t){for(var n=Ss.length,i=-1,r=void 0,o=0;o<n;o++)if(e===Ss[o].id){r=Ss[o].$el.offsetHeight,i=o,"function"==typeof t&&t(Ss[o]),Ss.splice(o,1);break}if(!(n<=1||-1===i||i>Ss.length-1))for(var a=i;a<n-1;a++){var s=Ss[a].$el;s.style.top=parseInt(s.style.top,10)-r-16+"px"}},Ts.closeAll=function(){for(var e=Ss.length-1;e>=0;e--)Ss[e].close()};var Es=Ts,Cs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-badge"},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-center"}},[n("sup",{directives:[{name:"show",rawName:"v-show",value:!e.hidden&&(e.content||0===e.content||e.isDot),expression:"!hidden && (content || content === 0 || isDot)"}],staticClass:"el-badge__content",class:["el-badge__content--"+e.type,{"is-fixed":e.$slots.default,"is-dot":e.isDot}],domProps:{textContent:e._s(e.content)}})])],2)};Cs._withStripped=!0;var As=r({name:"ElBadge",props:{value:[String,Number],max:Number,isDot:Boolean,hidden:Boolean,type:{type:String,validator:function(e){return["primary","success","warning","info","danger"].indexOf(e)>-1}}},computed:{content:function(){if(!this.isDot){var e=this.value,t=this.max;return"number"==typeof e&&"number"==typeof t&&t<e?t+"+":e}}}},Cs,[],!1,null,null,null);As.options.__file="packages/badge/src/main.vue";var Os=As.exports;Os.install=function(e){e.component(Os.name,Os)};var Ls=Os,ks=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-card",class:e.shadow?"is-"+e.shadow+"-shadow":"is-always-shadow"},[e.$slots.header||e.header?n("div",{staticClass:"el-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),n("div",{staticClass:"el-card__body",style:e.bodyStyle},[e._t("default")],2)])};ks._withStripped=!0;var Ps=r({name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},ks,[],!1,null,null,null);Ps.options.__file="packages/card/src/main.vue";var Ds=Ps.exports;Ds.install=function(e){e.component(Ds.name,Ds)};var Is=Ds,Ns=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0"},on:{keydown:e.handleKey}},[e._l(e.max,(function(t,i){return n("span",{key:i,staticClass:"el-rate__item",style:{cursor:e.rateDisabled?"auto":"pointer"},on:{mousemove:function(n){e.setCurrentValue(t,n)},mouseleave:e.resetCurrentValue,click:function(n){e.selectValue(t)}}},[n("i",{staticClass:"el-rate__icon",class:[e.classes[t-1],{hover:e.hoverIndex===t}],style:e.getIconStyle(t)},[e.showDecimalIcon(t)?n("i",{staticClass:"el-rate__decimal",class:e.decimalIconClass,style:e.decimalStyle}):e._e()])])})),e.showText||e.showScore?n("span",{staticClass:"el-rate__text",style:{color:e.textColor}},[e._v(e._s(e.text))]):e._e()],2)};Ns._withStripped=!0;var Fs=n(18),Rs=r({name:"ElRate",mixins:[_.a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["极差","失望","一般","满意","惊喜"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var e="";return this.showScore?e=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(e=this.texts[Math.ceil(this.currentValue)-1]),e},decimalStyle:function(){var e="";return this.rateDisabled?e=this.valueDecimal+"%":this.allowHalf&&(e="50%"),{color:this.activeColor,width:e}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var e;return Array.isArray(this.iconClasses)?((e={})[this.lowThreshold]=this.iconClasses[0],e[this.highThreshold]={value:this.iconClasses[1],excluded:!0},e[this.max]=this.iconClasses[2],e):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var e;return Array.isArray(this.colors)?((e={})[this.lowThreshold]=this.colors[0],e[this.highThreshold]={value:this.colors[1],excluded:!0},e[this.max]=this.colors[2],e):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var e=[],t=0,n=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&n--;t<n;t++)e.push(this.activeClass);for(;t<this.max;t++)e.push(this.voidClass);return e},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){this.currentValue=e,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(e,t){var n=Object.keys(t).filter((function(n){var i=t[n];return!!Object(Fs.isObject)(i)&&i.excluded?e<n:e<=n})).sort((function(e,t){return e-t})),i=t[n[0]];return Object(Fs.isObject)(i)?i.value:i||""},showDecimalIcon:function(e){var t=this.rateDisabled&&this.valueDecimal>0&&e-1<this.value&&e>this.value,n=this.allowHalf&&this.pointerAtLeftHalf&&e-.5<=this.currentValue&&e>this.currentValue;return t||n},getIconStyle:function(e){var t=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:e<=this.currentValue?this.activeColor:t}},selectValue:function(e){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",e),this.$emit("change",e)))},handleKey:function(e){if(!this.rateDisabled){var t=this.currentValue,n=e.keyCode;38===n||39===n?(this.allowHalf?t+=.5:t+=1,e.stopPropagation(),e.preventDefault()):37!==n&&40!==n||(this.allowHalf?t-=.5:t-=1,e.stopPropagation(),e.preventDefault()),t=(t=t<0?0:t)>this.max?this.max:t,this.$emit("input",t),this.$emit("change",t)}},setCurrentValue:function(e,t){if(!this.rateDisabled){if(this.allowHalf){var n=t.target;Object(pe.hasClass)(n,"el-rate__item")&&(n=n.querySelector(".el-rate__icon")),Object(pe.hasClass)(n,"el-rate__decimal")&&(n=n.parentNode),this.pointerAtLeftHalf=2*t.offsetX<=n.clientWidth,this.currentValue=this.pointerAtLeftHalf?e-.5:e}else this.currentValue=e;this.hoverIndex=e}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},Ns,[],!1,null,null,null);Rs.options.__file="packages/rate/src/main.vue";var Bs=Rs.exports;Bs.install=function(e){e.component(Bs.name,Bs)};var js=Bs,zs=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-steps",class:[!this.simple&&"el-steps--"+this.direction,this.simple&&"el-steps--simple"]},[this._t("default")],2)};zs._withStripped=!0;var Us=r({name:"ElSteps",mixins:[_.a],props:{space:[Number,String],active:Number,direction:{type:String,default:"horizontal"},alignCenter:Boolean,simple:Boolean,finishStatus:{type:String,default:"finish"},processStatus:{type:String,default:"process"}},data:function(){return{steps:[],stepOffset:0}},methods:{getMigratingConfig:function(){return{props:{center:"center is removed."}}}},watch:{active:function(e,t){this.$emit("change",e,t)},steps:function(e){e.forEach((function(e,t){e.index=t}))}}},zs,[],!1,null,null,null);Us.options.__file="packages/steps/src/steps.vue";var Vs=Us.exports;Vs.install=function(e){e.component(Vs.name,Vs)};var Gs=Vs,Hs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-step",class:[!e.isSimple&&"is-"+e.$parent.direction,e.isSimple&&"is-simple",e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"],style:e.style},[n("div",{staticClass:"el-step__head",class:"is-"+e.currentStatus},[n("div",{staticClass:"el-step__line",style:e.isLast?"":{marginRight:e.$parent.stepOffset+"px"}},[n("i",{staticClass:"el-step__line-inner",style:e.lineStyle})]),n("div",{staticClass:"el-step__icon",class:"is-"+(e.icon?"icon":"text")},["success"!==e.currentStatus&&"error"!==e.currentStatus?e._t("icon",[e.icon?n("i",{staticClass:"el-step__icon-inner",class:[e.icon]}):e._e(),e.icon||e.isSimple?e._e():n("div",{staticClass:"el-step__icon-inner"},[e._v(e._s(e.index+1))])]):n("i",{staticClass:"el-step__icon-inner is-status",class:["el-icon-"+("success"===e.currentStatus?"check":"close")]})],2)]),n("div",{staticClass:"el-step__main"},[n("div",{ref:"title",staticClass:"el-step__title",class:["is-"+e.currentStatus]},[e._t("title",[e._v(e._s(e.title))])],2),e.isSimple?n("div",{staticClass:"el-step__arrow"}):n("div",{staticClass:"el-step__description",class:["is-"+e.currentStatus]},[e._t("description",[e._v(e._s(e.description))])],2)])])};Hs._withStripped=!0;var Ws=r({name:"ElStep",props:{title:String,icon:String,description:String,status:String},data:function(){return{index:-1,lineStyle:{},internalStatus:""}},beforeCreate:function(){this.$parent.steps.push(this)},beforeDestroy:function(){var e=this.$parent.steps,t=e.indexOf(this);t>=0&&e.splice(t,1)},computed:{currentStatus:function(){return this.status||this.internalStatus},prevStatus:function(){var e=this.$parent.steps[this.index-1];return e?e.currentStatus:"wait"},isCenter:function(){return this.$parent.alignCenter},isVertical:function(){return"vertical"===this.$parent.direction},isSimple:function(){return this.$parent.simple},isLast:function(){var e=this.$parent;return e.steps[e.steps.length-1]===this},stepsCount:function(){return this.$parent.steps.length},space:function(){var e=this.isSimple,t=this.$parent.space;return e?"":t},style:function(){var e={},t=this.$parent.steps.length,n="number"==typeof this.space?this.space+"px":this.space?this.space:100/(t-(this.isCenter?0:1))+"%";return e.flexBasis=n,this.isVertical||(this.isLast?e.maxWidth=100/this.stepsCount+"%":e.marginRight=-this.$parent.stepOffset+"px"),e}},methods:{updateStatus:function(e){var t=this.$parent.$children[this.index-1];e>this.index?this.internalStatus=this.$parent.finishStatus:e===this.index&&"error"!==this.prevStatus?this.internalStatus=this.$parent.processStatus:this.internalStatus="wait",t&&t.calcProgress(this.internalStatus)},calcProgress:function(e){var t=100,n={};n.transitionDelay=150*this.index+"ms",e===this.$parent.processStatus?(this.currentStatus,t=0):"wait"===e&&(t=0,n.transitionDelay=-150*this.index+"ms"),n.borderWidth=t&&!this.isSimple?"1px":0,"vertical"===this.$parent.direction?n.height=t+"%":n.width=t+"%",this.lineStyle=n}},mounted:function(){var e=this,t=this.$watch("index",(function(n){e.$watch("$parent.active",e.updateStatus,{immediate:!0}),e.$watch("$parent.processStatus",(function(){var t=e.$parent.active;e.updateStatus(t)}),{immediate:!0}),t()}))}},Hs,[],!1,null,null,null);Ws.options.__file="packages/steps/src/step.vue";var qs=Ws.exports;qs.install=function(e){e.component(qs.name,qs)};var Ys=qs,$s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.carouselClasses,on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.handleMouseLeave(t)}}},[n("div",{staticClass:"el-carousel__container",style:{height:e.height}},[e.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-left"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("left")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex-1)}}},[n("i",{staticClass:"el-icon-arrow-left"})])]):e._e(),e.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-right"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex<e.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("right")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex+1)}}},[n("i",{staticClass:"el-icon-arrow-right"})])]):e._e(),e._t("default")],2),"none"!==e.indicatorPosition?n("ul",{class:e.indicatorsClasses},e._l(e.items,(function(t,i){return n("li",{key:i,class:["el-carousel__indicator","el-carousel__indicator--"+e.direction,{"is-active":i===e.activeIndex}],on:{mouseenter:function(t){e.throttledIndicatorHover(i)},click:function(t){t.stopPropagation(),e.handleIndicatorClick(i)}}},[n("button",{staticClass:"el-carousel__button"},[e.hasLabel?n("span",[e._v(e._s(t.label))]):e._e()])])})),0):e._e()])};$s._withStripped=!0;var Xs=n(25),Qs=n.n(Xs),Ks=r({name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some((function(e){return e.label.toString().length>0}))},carouselClasses:function(){var e=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&e.push("el-carousel--card"),e},indicatorsClasses:function(){var e=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&e.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||e.push("el-carousel__indicators--outside"),e}},watch:{items:function(e){e.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(e,t){this.resetItemPosition(t),t>-1&&this.$emit("change",e,t)},autoplay:function(e){e?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(e,t){var n=this.items.length;return t===n-1&&e.inStage&&this.items[0].active||e.inStage&&this.items[t+1]&&this.items[t+1].active?"left":!!(0===t&&e.inStage&&this.items[n-1].active||e.inStage&&this.items[t-1]&&this.items[t-1].active)&&"right"},handleButtonEnter:function(e){var t=this;"vertical"!==this.direction&&this.items.forEach((function(n,i){e===t.itemInStage(n,i)&&(n.hover=!0)}))},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach((function(e){e.hover=!1}))},updateItems:function(){this.items=this.$children.filter((function(e){return"ElCarouselItem"===e.$options.name}))},resetItemPosition:function(e){var t=this;this.items.forEach((function(n,i){n.translateItem(i,t.activeIndex,e)}))},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},setActiveItem:function(e){if("string"==typeof e){var t=this.items.filter((function(t){return t.name===e}));t.length>0&&(e=this.items.indexOf(t[0]))}if(e=Number(e),isNaN(e)||e!==Math.floor(e))console.warn("[Element Warn][Carousel]index must be an integer.");else{var n=this.items.length,i=this.activeIndex;this.activeIndex=e<0?this.loop?n-1:0:e>=n?this.loop?0:n-1:e,i===this.activeIndex&&this.resetItemPosition(i)}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(e){this.activeIndex=e},handleIndicatorHover:function(e){"hover"===this.trigger&&e!==this.activeIndex&&(this.activeIndex=e)}},created:function(){var e=this;this.throttledArrowClick=Qs()(300,!0,(function(t){e.setActiveItem(t)})),this.throttledIndicatorHover=Qs()(300,(function(t){e.handleIndicatorHover(t)}))},mounted:function(){var e=this;this.updateItems(),this.$nextTick((function(){Object(Rt.addResizeListener)(e.$el,e.resetItemPosition),e.initialIndex<e.items.length&&e.initialIndex>=0&&(e.activeIndex=e.initialIndex),e.startTimer()}))},beforeDestroy:function(){this.$el&&Object(Rt.removeResizeListener)(this.$el,this.resetItemPosition),this.pauseTimer()}},$s,[],!1,null,null,null);Ks.options.__file="packages/carousel/src/main.vue";var Js=Ks.exports;Js.install=function(e){e.component(Js.name,Js)};var Zs=Js,el={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function tl(e){var t=e.move,n=e.size,i=e.bar,r={},o="translate"+i.axis+"("+t+"%)";return r[i.size]=n,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var nl={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return el[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,i=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:tl({size:t,move:n,bar:i})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=100*(Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-this.$refs.thumb[this.bar.offset]/2)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=t*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(pe.on)(document,"mousemove",this.mouseMoveDocumentHandler),Object(pe.on)(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=100*(-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-(this.$refs.thumb[this.bar.offset]-t))/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=n*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(pe.off)(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(pe.off)(document,"mouseup",this.mouseUpDocumentHandler)}},il={name:"ElScrollbar",components:{Bar:nl},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=Fn()(),n=this.wrapStyle;if(t){var i="-"+t+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(n=Object(m.toObject)(this.wrapStyle)).marginRight=n.marginBottom=i:"string"==typeof this.wrapStyle?n+=r:n=r}var o=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),a=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[o]]),s=void 0;return s=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[o]])]:[a,e(nl,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(nl,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},s)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e,t,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(Rt.addResizeListener)(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(Rt.removeResizeListener)(this.$refs.resize,this.update)},install:function(e){e.component(il.name,il)}},rl=il,ol=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":e.active,"el-carousel__item--card":"card"===e.$parent.type,"is-in-stage":e.inStage,"is-hover":e.hover,"is-animating":e.animating},style:e.itemStyle,on:{click:e.handleItemClick}},["card"===e.$parent.type?n("div",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!active"}],staticClass:"el-carousel__mask"}):e._e(),e._t("default")],2)};ol._withStripped=!0;var al=r({name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(e,t,n){return 0===t&&e===n-1?-1:t===n-1&&0===e?n:e<t-1&&t-e>=n/2?n+1:e>t+1&&e-t>=n/2?-2:e},calcCardTranslate:function(e,t){var n=this.$parent.$el.offsetWidth;return this.inStage?n*(1.17*(e-t)+1)/4:e<t?-1.83*n/4:3.83*n/4},calcTranslate:function(e,t,n){return this.$parent.$el[n?"offsetHeight":"offsetWidth"]*(e-t)},translateItem:function(e,t,n){var i=this.$parent.type,r=this.parentDirection,o=this.$parent.items.length;if("card"!==i&&void 0!==n&&(this.animating=e===t||e===n),e!==t&&o>2&&this.$parent.loop&&(e=this.processIndex(e,t,o)),"card"===i)"vertical"===r&&console.warn("[Element Warn][Carousel]vertical direction is not supported in card mode"),this.inStage=Math.round(Math.abs(e-t))<=1,this.active=e===t,this.translate=this.calcCardTranslate(e,t),this.scale=this.active?1:.83;else{this.active=e===t;var a="vertical"===r;this.translate=this.calcTranslate(e,t,a)}this.ready=!0},handleItemClick:function(){var e=this.$parent;if(e&&"card"===e.type){var t=e.items.indexOf(this);e.setActiveItem(t)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var e={transform:("vertical"===this.parentDirection?"translateY":"translateX")+"("+this.translate+"px) scale("+this.scale+")"};return Object(m.autoprefixer)(e)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},ol,[],!1,null,null,null);al.options.__file="packages/carousel/src/item.vue";var sl=al.exports;sl.install=function(e){e.component(sl.name,sl)};var ll=sl,cl=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[this._t("default")],2)};cl._withStripped=!0;var ul=r({name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(e){this.activeNames=[].concat(e)}},methods:{setActiveNames:function(e){e=[].concat(e);var t=this.accordion?e[0]:e;this.activeNames=e,this.$emit("input",t),this.$emit("change",t)},handleItemClick:function(e){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==e.name?e.name:"");else{var t=this.activeNames.slice(0),n=t.indexOf(e.name);n>-1?t.splice(n,1):t.push(e.name),this.setActiveNames(t)}}},created:function(){this.$on("item-click",this.handleItemClick)}},cl,[],!1,null,null,null);ul.options.__file="packages/collapse/src/collapse.vue";var hl=ul.exports;hl.install=function(e){e.component(hl.name,hl)};var dl=hl,fl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive,"is-disabled":e.disabled}},[n("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:e.disabled?void 0:0},on:{click:e.handleHeaderClick,keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleEnterClick(t))},focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),n("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)};fl._withStripped=!0;var pl=r({name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[M.a],components:{ElCollapseTransition:be.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(m.generateId)()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var e=this;setTimeout((function(){e.isClick?e.isClick=!1:e.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},fl,[],!1,null,null,null);pl.options.__file="packages/collapse/src/collapse-item.vue";var ml=pl.exports;ml.install=function(e){e.component(ml.name,ml)};var vl=ml,gl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return e.toggleDropDownVisible(!1)},expression:"() => toggleDropDownVisible(false)"}],ref:"reference",class:["el-cascader",e.realSize&&"el-cascader--"+e.realSize,{"is-disabled":e.isDisabled}],on:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1},click:function(){return e.toggleDropDownVisible(!e.readonly||void 0)},keydown:e.handleKeyDown}},[n("el-input",{ref:"input",class:{"is-focus":e.dropDownVisible},attrs:{size:e.realSize,placeholder:e.placeholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.handleInput},model:{value:e.multiple?e.presentText:e.inputValue,callback:function(t){e.multiple?e.presentText:e.inputValue=t},expression:"multiple ? presentText : inputValue"}},[n("template",{slot:"suffix"},[e.clearBtnVisible?n("i",{key:"clear",staticClass:"el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.handleClear(t)}}}):n("i",{key:"arrow-down",class:["el-input__icon","el-icon-arrow-down",e.dropDownVisible&&"is-reverse"],on:{click:function(t){t.stopPropagation(),e.toggleDropDownVisible()}}})])],2),e.multiple?n("div",{staticClass:"el-cascader__tags"},[e._l(e.presentTags,(function(t,i){return n("el-tag",{key:t.key,attrs:{type:"info",size:e.tagSize,hit:t.hitState,closable:t.closable,"disable-transitions":""},on:{close:function(t){e.deleteTag(i)}}},[n("span",[e._v(e._s(t.text))])])})),e.filterable&&!e.isDisabled?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputValue,expression:"inputValue",modifiers:{trim:!0}}],staticClass:"el-cascader__search-input",attrs:{type:"text",placeholder:e.presentTags.length?"":e.placeholder},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value.trim())},function(t){return e.handleInput(e.inputValue,t)}],click:function(t){t.stopPropagation(),e.toggleDropDownVisible(!0)},keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.handleDelete(t)},blur:function(t){e.$forceUpdate()}}}):e._e()],2):e._e(),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.handleDropdownLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropDownVisible,expression:"dropDownVisible"}],ref:"popper",class:["el-popper","el-cascader__dropdown",e.popperClass]},[n("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!e.filtering,expression:"!filtering"}],ref:"panel",attrs:{options:e.options,props:e.config,border:!1,"render-label":e.$scopedSlots.default},on:{"expand-change":e.handleExpandChange,close:function(t){e.toggleDropDownVisible(!1)}},model:{value:e.checkedValue,callback:function(t){e.checkedValue=t},expression:"checkedValue"}}),e.filterable?n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],ref:"suggestionPanel",staticClass:"el-cascader__suggestion-panel",attrs:{tag:"ul","view-class":"el-cascader__suggestion-list"},nativeOn:{keydown:function(t){return e.handleSuggestionKeyDown(t)}}},[e.suggestions.length?e._l(e.suggestions,(function(t,i){return n("li",{key:t.uid,class:["el-cascader__suggestion-item",t.checked&&"is-checked"],attrs:{tabindex:-1},on:{click:function(t){e.handleSuggestionClick(i)}}},[n("span",[e._v(e._s(t.text))]),t.checked?n("i",{staticClass:"el-icon-check"}):e._e()])})):e._t("empty",[n("li",{staticClass:"el-cascader__empty-text"},[e._v(e._s(e.t("el.cascader.noMatch")))])])],2):e._e()],1)])],1)};gl._withStripped=!0;var yl=n(42),bl=n.n(yl),xl=n(28),wl=n.n(xl),_l=wl.a.keys,Sl={expandTrigger:{newProp:"expandTrigger",type:String},changeOnSelect:{newProp:"checkStrictly",type:Boolean},hoverThreshold:{newProp:"hoverThreshold",type:Number}},Ml={props:{placement:{type:String,default:"bottom-start"},appendToBody:N.a.props.appendToBody,visibleArrow:{type:Boolean,default:!0},arrowOffset:N.a.props.arrowOffset,offset:N.a.props.offset,boundariesPadding:N.a.props.boundariesPadding,popperOptions:N.a.props.popperOptions},methods:N.a.methods,data:N.a.data,beforeDestroy:N.a.beforeDestroy},Tl={medium:36,small:32,mini:28},El=r({name:"ElCascader",directives:{Clickoutside:P.a},mixins:[Ml,M.a,p.a,_.a],inject:{elForm:{default:""},elFormItem:{default:""}},components:{ElInput:d.a,ElTag:Ft.a,ElScrollbar:R.a,ElCascaderPanel:bl.a},props:{value:{},options:Array,props:Object,size:String,placeholder:{type:String,default:function(){return Object(Bt.t)("el.cascader.placeholder")}},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:Function,separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:function(){return function(){}}},popperClass:String},data:function(){return{dropDownVisible:!1,checkedValue:this.value||null,inputHover:!1,inputValue:null,presentText:null,presentTags:[],checkedNodes:[],filtering:!1,suggestions:[],inputInitialHeight:0,pressDeleteCount:0}},computed:{realSize:function(){var e=(this.elFormItem||{}).elFormItemSize;return this.size||e||(this.$ELEMENT||{}).size},tagSize:function(){return["small","mini"].indexOf(this.realSize)>-1?"mini":"small"},isDisabled:function(){return this.disabled||(this.elForm||{}).disabled},config:function(){var e=this.props||{},t=this.$attrs;return Object.keys(Sl).forEach((function(n){var i=Sl[n],r=i.newProp,o=i.type,a=t[n]||t[Object(m.kebabCase)(n)];Object(Ge.isDef)(n)&&!Object(Ge.isDef)(e[r])&&(o===Boolean&&""===a&&(a=!0),e[r]=a)})),e},multiple:function(){return this.config.multiple},leafOnly:function(){return!this.config.checkStrictly},readonly:function(){return!this.filterable||this.multiple},clearBtnVisible:function(){return!(!this.clearable||this.isDisabled||this.filtering||!this.inputHover)&&(this.multiple?!!this.checkedNodes.filter((function(e){return!e.isDisabled})).length:!!this.presentText)},panel:function(){return this.$refs.panel}},watch:{disabled:function(){this.computePresentContent()},value:function(e){Object(m.isEqual)(e,this.checkedValue)||(this.checkedValue=e,this.computePresentContent())},checkedValue:function(e){var t=this.value,n=this.dropDownVisible,i=this.config,r=i.checkStrictly,o=i.multiple;Object(m.isEqual)(e,t)&&!Object(Fs.isUndefined)(t)||(this.computePresentContent(),o||r||!n||this.toggleDropDownVisible(!1),this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",[e]))},options:{handler:function(){this.$nextTick(this.computePresentContent)},deep:!0},presentText:function(e){this.inputValue=e},presentTags:function(e,t){this.multiple&&(e.length||t.length)&&this.$nextTick(this.updateStyle)},filtering:function(e){this.$nextTick(this.updatePopper)}},mounted:function(){var e=this,t=this.$refs.input;t&&t.$el&&(this.inputInitialHeight=t.$el.offsetHeight||Tl[this.realSize]||40),Object(m.isEmpty)(this.value)||this.computePresentContent(),this.filterHandler=L()(this.debounce,(function(){var t=e.inputValue;if(t){var n=e.beforeFilter(t);n&&n.then?n.then(e.getSuggestions):!1!==n?e.getSuggestions():e.filtering=!1}else e.filtering=!1})),Object(Rt.addResizeListener)(this.$el,this.updateStyle)},beforeDestroy:function(){Object(Rt.removeResizeListener)(this.$el,this.updateStyle)},methods:{getMigratingConfig:function(){return{props:{"expand-trigger":"expand-trigger is removed, use `props.expandTrigger` instead.","change-on-select":"change-on-select is removed, use `props.checkStrictly` instead.","hover-threshold":"hover-threshold is removed, use `props.hoverThreshold` instead"},events:{"active-item-change":"active-item-change is renamed to expand-change"}}},toggleDropDownVisible:function(e){var t=this;if(!this.isDisabled){var n=this.dropDownVisible,i=this.$refs.input;(e=Object(Ge.isDef)(e)?e:!n)!==n&&(this.dropDownVisible=e,e&&this.$nextTick((function(){t.updatePopper(),t.panel.scrollIntoView()})),i.$refs.input.setAttribute("aria-expanded",e),this.$emit("visible-change",e))}},handleDropdownLeave:function(){this.filtering=!1,this.inputValue=this.presentText},handleKeyDown:function(e){switch(e.keyCode){case _l.enter:this.toggleDropDownVisible();break;case _l.down:this.toggleDropDownVisible(!0),this.focusFirstNode(),e.preventDefault();break;case _l.esc:case _l.tab:this.toggleDropDownVisible(!1)}},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e,t){!this.dropDownVisible&&this.toggleDropDownVisible(!0),t&&t.isComposing||(e?this.filterHandler():this.filtering=!1)},handleClear:function(){this.presentText="",this.panel.clearCheckedNodes()},handleExpandChange:function(e){this.$nextTick(this.updatePopper.bind(this)),this.$emit("expand-change",e),this.$emit("active-item-change",e)},focusFirstNode:function(){var e=this;this.$nextTick((function(){var t=e.filtering,n=e.$refs,i=n.popper,r=n.suggestionPanel,o=null;t&&r?o=r.$el.querySelector(".el-cascader__suggestion-item"):o=i.querySelector(".el-cascader-menu").querySelector('.el-cascader-node[tabindex="-1"]');o&&(o.focus(),!t&&o.click())}))},computePresentContent:function(){var e=this;this.$nextTick((function(){e.config.multiple?(e.computePresentTags(),e.presentText=e.presentTags.length?" ":null):e.computePresentText()}))},computePresentText:function(){var e=this.checkedValue,t=this.config;if(!Object(m.isEmpty)(e)){var n=this.panel.getNodeByValue(e);if(n&&(t.checkStrictly||n.isLeaf))return void(this.presentText=n.getText(this.showAllLevels,this.separator))}this.presentText=null},computePresentTags:function(){var e=this.isDisabled,t=this.leafOnly,n=this.showAllLevels,i=this.separator,r=this.collapseTags,o=this.getCheckedNodes(t),a=[],s=function(t){return{node:t,key:t.uid,text:t.getText(n,i),hitState:!1,closable:!e&&!t.isDisabled}};if(o.length){var l=o[0],c=o.slice(1),u=c.length;a.push(s(l)),u&&(r?a.push({key:-1,text:"+ "+u,closable:!1}):c.forEach((function(e){return a.push(s(e))})))}this.checkedNodes=o,this.presentTags=a},getSuggestions:function(){var e=this,t=this.filterMethod;Object(Fs.isFunction)(t)||(t=function(e,t){return e.text.includes(t)});var n=this.panel.getFlattedNodes(this.leafOnly).filter((function(n){return!n.isDisabled&&(n.text=n.getText(e.showAllLevels,e.separator)||"",t(n,e.inputValue))}));this.multiple?this.presentTags.forEach((function(e){e.hitState=!1})):n.forEach((function(t){t.checked=Object(m.isEqual)(e.checkedValue,t.getValueByOption())})),this.filtering=!0,this.suggestions=n,this.$nextTick(this.updatePopper)},handleSuggestionKeyDown:function(e){var t=e.keyCode,n=e.target;switch(t){case _l.enter:n.click();break;case _l.up:var i=n.previousElementSibling;i&&i.focus();break;case _l.down:var r=n.nextElementSibling;r&&r.focus();break;case _l.esc:case _l.tab:this.toggleDropDownVisible(!1)}},handleDelete:function(){var e=this.inputValue,t=this.pressDeleteCount,n=this.presentTags,i=n.length-1,r=n[i];this.pressDeleteCount=e?0:t+1,r&&this.pressDeleteCount&&(r.hitState?this.deleteTag(i):r.hitState=!0)},handleSuggestionClick:function(e){var t=this.multiple,n=this.suggestions[e];if(t){var i=n.checked;n.doCheck(!i),this.panel.calculateMultiCheckedValue()}else this.checkedValue=n.getValueByOption(),this.toggleDropDownVisible(!1)},deleteTag:function(e){var t=this.checkedValue,n=t[e];this.checkedValue=t.filter((function(t,n){return n!==e})),this.$emit("remove-tag",n)},updateStyle:function(){var e=this.$el,t=this.inputInitialHeight;if(!this.$isServer&&e){var n=this.$refs.suggestionPanel,i=e.querySelector(".el-input__inner");if(i){var r=e.querySelector(".el-cascader__tags"),o=null;if(n&&(o=n.$el))o.querySelector(".el-cascader__suggestion-list").style.minWidth=i.offsetWidth+"px";if(r){var a=r.offsetHeight,s=Math.max(a+6,t)+"px";i.style.height=s,this.updatePopper()}}}},getCheckedNodes:function(e){return this.panel.getCheckedNodes(e)}}},gl,[],!1,null,null,null);El.options.__file="packages/cascader/src/cascader.vue";var Cl=El.exports;Cl.install=function(e){e.component(Cl.name,Cl)};var Al=Cl,Ol=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hide,expression:"hide"}],class:["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?"el-color-picker--"+e.colorSize:""]},[e.colorDisabled?n("div",{staticClass:"el-color-picker__mask"}):e._e(),n("div",{staticClass:"el-color-picker__trigger",on:{click:e.handleTrigger}},[n("span",{staticClass:"el-color-picker__color",class:{"is-alpha":e.showAlpha}},[n("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:e.displayedColor}}),e.value||e.showPanelColor?e._e():n("span",{staticClass:"el-color-picker__empty el-icon-close"})]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.value||e.showPanelColor,expression:"value || showPanelColor"}],staticClass:"el-color-picker__icon el-icon-arrow-down"})]),n("picker-dropdown",{ref:"dropdown",class:["el-color-picker__panel",e.popperClass||""],attrs:{color:e.color,"show-alpha":e.showAlpha,predefine:e.predefine},on:{pick:e.confirmValue,clear:e.clearValue},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}})],1)};Ol._withStripped=!0;var Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var kl=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Pl=function(e,t){var n;"string"==typeof(n=e)&&-1!==n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},Dl={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Il={A:10,B:11,C:12,D:13,E:14,F:15},Nl=function(e){return 2===e.length?16*(Il[e[0].toUpperCase()]||+e[0])+(Il[e[1].toUpperCase()]||+e[1]):Il[e[1].toUpperCase()]||+e[1]},Fl=function(e,t,n){e=Pl(e,255),t=Pl(t,255),n=Pl(n,255);var i,r=Math.max(e,t,n),o=Math.min(e,t,n),a=void 0,s=r,l=r-o;if(i=0===r?0:l/r,r===o)a=0;else{switch(r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return{h:360*a,s:100*i,v:100*s}},Rl=function(e,t,n){e=6*Pl(e,360),t=Pl(t,100),n=Pl(n,100);var i=Math.floor(e),r=e-i,o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),l=i%6,c=[n,a,o,o,s,n][l],u=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*h)}},Bl=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{})t.hasOwnProperty(n)&&(this[n]=t[n]);this.doOnChange()}return e.prototype.set=function(e,t){if(1!==arguments.length||"object"!==(void 0===e?"undefined":Ll(e)))this["_"+e]=t,this.doOnChange();else for(var n in e)e.hasOwnProperty(n)&&this.set(n,e[n])},e.prototype.get=function(e){return this["_"+e]},e.prototype.toRgb=function(){return Rl(this._hue,this._saturation,this._value)},e.prototype.fromString=function(e){var t=this;if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var n=function(e,n,i){t._hue=Math.max(0,Math.min(360,e)),t._saturation=Math.max(0,Math.min(100,n)),t._value=Math.max(0,Math.min(100,i)),t.doOnChange()};if(-1!==e.indexOf("hsl")){var i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===i.length?this._alpha=Math.floor(100*parseFloat(i[3])):3===i.length&&(this._alpha=100),i.length>=3){var r=function(e,t,n){n/=100;var i=t/=100,r=Math.max(n,.01);return t*=(n*=2)<=1?n:2-n,i*=r<=1?r:2-r,{h:e,s:100*(0===n?2*i/(r+i):2*t/(n+t)),v:100*((n+t)/2)}}(i[0],i[1],i[2]);n(r.h,r.s,r.v)}}else if(-1!==e.indexOf("hsv")){var o=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));4===o.length?this._alpha=Math.floor(100*parseFloat(o[3])):3===o.length&&(this._alpha=100),o.length>=3&&n(o[0],o[1],o[2])}else if(-1!==e.indexOf("rgb")){var a=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===a.length?this._alpha=Math.floor(100*parseFloat(a[3])):3===a.length&&(this._alpha=100),a.length>=3){var s=Fl(a[0],a[1],a[2]);n(s.h,s.s,s.v)}}else if(-1!==e.indexOf("#")){var l=e.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}$/.test(l))return;var c=void 0,u=void 0,h=void 0;3===l.length?(c=Nl(l[0]+l[0]),u=Nl(l[1]+l[1]),h=Nl(l[2]+l[2])):6!==l.length&&8!==l.length||(c=Nl(l.substring(0,2)),u=Nl(l.substring(2,4)),h=Nl(l.substring(4,6))),8===l.length?this._alpha=Math.floor(Nl(l.substring(6))/255*100):3!==l.length&&6!==l.length||(this._alpha=100);var d=Fl(c,u,h);n(d.h,d.s,d.v)}},e.prototype.compare=function(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1},e.prototype.doOnChange=function(){var e=this._hue,t=this._saturation,n=this._value,i=this._alpha,r=this.format;if(this.enableAlpha)switch(r){case"hsl":var o=kl(e,t/100,n/100);this.value="hsla("+e+", "+Math.round(100*o[1])+"%, "+Math.round(100*o[2])+"%, "+i/100+")";break;case"hsv":this.value="hsva("+e+", "+Math.round(t)+"%, "+Math.round(n)+"%, "+i/100+")";break;default:var a=Rl(e,t,n),s=a.r,l=a.g,c=a.b;this.value="rgba("+s+", "+l+", "+c+", "+i/100+")"}else switch(r){case"hsl":var u=kl(e,t/100,n/100);this.value="hsl("+e+", "+Math.round(100*u[1])+"%, "+Math.round(100*u[2])+"%)";break;case"hsv":this.value="hsv("+e+", "+Math.round(t)+"%, "+Math.round(n)+"%)";break;case"rgb":var h=Rl(e,t,n),d=h.r,f=h.g,p=h.b;this.value="rgb("+d+", "+f+", "+p+")";break;default:this.value=function(e){var t=e.r,n=e.g,i=e.b,r=function(e){e=Math.min(Math.round(e),255);var t=Math.floor(e/16),n=e%16;return""+(Dl[t]||t)+(Dl[n]||n)};return isNaN(t)||isNaN(n)||isNaN(i)?"":"#"+r(t)+r(n)+r(i)}(Rl(e,t,n))}},e}(),jl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-color-dropdown"},[n("div",{staticClass:"el-color-dropdown__main-wrapper"},[n("hue-slider",{ref:"hue",staticStyle:{float:"right"},attrs:{color:e.color,vertical:""}}),n("sv-panel",{ref:"sl",attrs:{color:e.color}})],1),e.showAlpha?n("alpha-slider",{ref:"alpha",attrs:{color:e.color}}):e._e(),e.predefine?n("predefine",{attrs:{color:e.color,colors:e.predefine}}):e._e(),n("div",{staticClass:"el-color-dropdown__btns"},[n("span",{staticClass:"el-color-dropdown__value"},[n("el-input",{attrs:{"validate-event":!1,size:"mini"},on:{blur:e.handleConfirm},nativeOn:{keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirm(t)}},model:{value:e.customInput,callback:function(t){e.customInput=t},expression:"customInput"}})],1),n("el-button",{staticClass:"el-color-dropdown__link-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){e.$emit("clear")}}},[e._v("\n        "+e._s(e.t("el.colorpicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-color-dropdown__btn",attrs:{plain:"",size:"mini"},on:{click:e.confirmValue}},[e._v("\n        "+e._s(e.t("el.colorpicker.confirm"))+"\n      ")])],1)],1)])};jl._withStripped=!0;var zl=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-color-svpanel",style:{backgroundColor:this.background}},[t("div",{staticClass:"el-color-svpanel__white"}),t("div",{staticClass:"el-color-svpanel__black"}),t("div",{staticClass:"el-color-svpanel__cursor",style:{top:this.cursorTop+"px",left:this.cursorLeft+"px"}},[t("div")])])};zl._withStripped=!0;var Ul=!1,Vl=function(e,t){if(!pn.a.prototype.$isServer){var n=function(e){t.drag&&t.drag(e)},i=function e(i){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e),document.onselectstart=null,document.ondragstart=null,Ul=!1,t.end&&t.end(i)};e.addEventListener("mousedown",(function(e){Ul||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),Ul=!0,t.start&&t.start(e))}))}},Gl=r({name:"el-sl-panel",props:{color:{required:!0}},computed:{colorValue:function(){return{hue:this.color.get("hue"),value:this.color.get("value")}}},watch:{colorValue:function(){this.update()}},methods:{update:function(){var e=this.color.get("saturation"),t=this.color.get("value"),n=this.$el,i=n.clientWidth,r=n.clientHeight;this.cursorLeft=e*i/100,this.cursorTop=(100-t)*r/100,this.background="hsl("+this.color.get("hue")+", 100%, 50%)"},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;n=Math.max(0,n),n=Math.min(n,t.width),i=Math.max(0,i),i=Math.min(i,t.height),this.cursorLeft=n,this.cursorTop=i,this.color.set({saturation:n/t.width*100,value:100-i/t.height*100})}},mounted:function(){var e=this;Vl(this.$el,{drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}}),this.update()},data:function(){return{cursorTop:0,cursorLeft:0,background:"hsl(0, 100%, 50%)"}}},zl,[],!1,null,null,null);Gl.options.__file="packages/color-picker/src/components/sv-panel.vue";var Hl=Gl.exports,Wl=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-color-hue-slider",class:{"is-vertical":this.vertical}},[t("div",{ref:"bar",staticClass:"el-color-hue-slider__bar",on:{click:this.handleClick}}),t("div",{ref:"thumb",staticClass:"el-color-hue-slider__thumb",style:{left:this.thumbLeft+"px",top:this.thumbTop+"px"}})])};Wl._withStripped=!0;var ql=r({name:"el-color-hue-slider",props:{color:{required:!0},vertical:Boolean},data:function(){return{thumbLeft:0,thumbTop:0}},computed:{hueValue:function(){return this.color.get("hue")}},watch:{hueValue:function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb;e.target!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=this.$refs.thumb,i=void 0;if(this.vertical){var r=e.clientY-t.top;r=Math.min(r,t.height-n.offsetHeight/2),r=Math.max(n.offsetHeight/2,r),i=Math.round((r-n.offsetHeight/2)/(t.height-n.offsetHeight)*360)}else{var o=e.clientX-t.left;o=Math.min(o,t.width-n.offsetWidth/2),o=Math.max(n.offsetWidth/2,o),i=Math.round((o-n.offsetWidth/2)/(t.width-n.offsetWidth)*360)}this.color.set("hue",i)},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetWidth-n.offsetWidth/2)/360)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetHeight-n.offsetHeight/2)/360)},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop()}},mounted:function(){var e=this,t=this.$refs,n=t.bar,i=t.thumb,r={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Vl(n,r),Vl(i,r),this.update()}},Wl,[],!1,null,null,null);ql.options.__file="packages/color-picker/src/components/hue-slider.vue";var Yl=ql.exports,$l=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-color-alpha-slider",class:{"is-vertical":this.vertical}},[t("div",{ref:"bar",staticClass:"el-color-alpha-slider__bar",style:{background:this.background},on:{click:this.handleClick}}),t("div",{ref:"thumb",staticClass:"el-color-alpha-slider__thumb",style:{left:this.thumbLeft+"px",top:this.thumbTop+"px"}})])};$l._withStripped=!0;var Xl=r({name:"el-color-alpha-slider",props:{color:{required:!0},vertical:Boolean},watch:{"color._alpha":function(){this.update()},"color.value":function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb;e.target!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=this.$refs.thumb;if(this.vertical){var i=e.clientY-t.top;i=Math.max(n.offsetHeight/2,i),i=Math.min(i,t.height-n.offsetHeight/2),this.color.set("alpha",Math.round((i-n.offsetHeight/2)/(t.height-n.offsetHeight)*100))}else{var r=e.clientX-t.left;r=Math.max(n.offsetWidth/2,r),r=Math.min(r,t.width-n.offsetWidth/2),this.color.set("alpha",Math.round((r-n.offsetWidth/2)/(t.width-n.offsetWidth)*100))}},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetWidth-n.offsetWidth/2)/100)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetHeight-n.offsetHeight/2)/100)},getBackground:function(){if(this.color&&this.color.value){var e=this.color.toRgb(),t=e.r,n=e.g,i=e.b;return"linear-gradient(to right, rgba("+t+", "+n+", "+i+", 0) 0%, rgba("+t+", "+n+", "+i+", 1) 100%)"}return null},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop(),this.background=this.getBackground()}},data:function(){return{thumbLeft:0,thumbTop:0,background:null}},mounted:function(){var e=this,t=this.$refs,n=t.bar,i=t.thumb,r={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Vl(n,r),Vl(i,r),this.update()}},$l,[],!1,null,null,null);Xl.options.__file="packages/color-picker/src/components/alpha-slider.vue";var Ql=Xl.exports,Kl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-predefine"},[n("div",{staticClass:"el-color-predefine__colors"},e._l(e.rgbaColors,(function(t,i){return n("div",{key:e.colors[i],staticClass:"el-color-predefine__color-selector",class:{selected:t.selected,"is-alpha":t._alpha<100},on:{click:function(t){e.handleSelect(i)}}},[n("div",{style:{"background-color":t.value}})])})),0)])};Kl._withStripped=!0;var Jl=r({props:{colors:{type:Array,required:!0},color:{required:!0}},data:function(){return{rgbaColors:this.parseColors(this.colors,this.color)}},methods:{handleSelect:function(e){this.color.fromString(this.colors[e])},parseColors:function(e,t){return e.map((function(e){var n=new Bl;return n.enableAlpha=!0,n.format="rgba",n.fromString(e),n.selected=n.value===t.value,n}))}},watch:{"$parent.currentColor":function(e){var t=new Bl;t.fromString(e),this.rgbaColors.forEach((function(e){e.selected=t.compare(e)}))},colors:function(e){this.rgbaColors=this.parseColors(e,this.color)},color:function(e){this.rgbaColors=this.parseColors(this.colors,e)}}},Kl,[],!1,null,null,null);Jl.options.__file="packages/color-picker/src/components/predefine.vue";var Zl=Jl.exports,ec=r({name:"el-color-picker-dropdown",mixins:[N.a,p.a],components:{SvPanel:Hl,HueSlider:Yl,AlphaSlider:Ql,ElInput:d.a,ElButton:q.a,Predefine:Zl},props:{color:{required:!0},showAlpha:Boolean,predefine:Array},data:function(){return{customInput:""}},computed:{currentColor:function(){var e=this.$parent;return e.value||e.showPanelColor?e.color.value:""}},methods:{confirmValue:function(){this.$emit("pick")},handleConfirm:function(){this.color.fromString(this.customInput)}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{showPopper:function(e){var t=this;!0===e&&this.$nextTick((function(){var e=t.$refs,n=e.sl,i=e.hue,r=e.alpha;n&&n.update(),i&&i.update(),r&&r.update()}))},currentColor:{immediate:!0,handler:function(e){this.customInput=e}}}},jl,[],!1,null,null,null);ec.options.__file="packages/color-picker/src/components/picker-dropdown.vue";var tc=ec.exports,nc=r({name:"ElColorPicker",mixins:[M.a],props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String,predefine:Array},inject:{elForm:{default:""},elFormItem:{default:""}},directives:{Clickoutside:P.a},computed:{displayedColor:function(){return this.value||this.showPanelColor?this.displayedRgb(this.color,this.showAlpha):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},colorDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){e?e&&e!==this.color.value&&this.color.fromString(e):this.showPanelColor=!1},color:{deep:!0,handler:function(){this.showPanelColor=!0}},displayedColor:function(e){if(this.showPicker){var t=new Bl({enableAlpha:this.showAlpha,format:this.colorFormat});t.fromString(this.value),e!==this.displayedRgb(t,this.showAlpha)&&this.$emit("active-change",e)}}},methods:{handleTrigger:function(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue:function(){var e=this.color.value;this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",e),this.showPicker=!1},clearValue:function(){this.$emit("input",null),this.$emit("change",null),null!==this.value&&this.dispatch("ElFormItem","el.form.change",null),this.showPanelColor=!1,this.showPicker=!1,this.resetColor()},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var e=this;this.$nextTick((function(t){e.value?e.color.fromString(e.value):e.showPanelColor=!1}))},displayedRgb:function(e,t){if(!(e instanceof Bl))throw Error("color should be instance of Color Class");var n=e.toRgb(),i=n.r,r=n.g,o=n.b;return t?"rgba("+i+", "+r+", "+o+", "+e.get("alpha")/100+")":"rgb("+i+", "+r+", "+o+")"}},mounted:function(){var e=this.value;e&&this.color.fromString(e),this.popperElm=this.$refs.dropdown.$el},data:function(){return{color:new Bl({enableAlpha:this.showAlpha,format:this.colorFormat}),showPicker:!1,showPanelColor:!1}},components:{PickerDropdown:tc}},Ol,[],!1,null,null,null);nc.options.__file="packages/color-picker/src/main.vue";var ic=nc.exports;ic.install=function(e){e.component(ic.name,ic)};var rc=ic,oc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer"},[n("transfer-panel",e._b({ref:"leftPanel",attrs:{data:e.sourceData,title:e.titles[0]||e.t("el.transfer.titles.0"),"default-checked":e.leftDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onSourceCheckedChange}},"transfer-panel",e.$props,!1),[e._t("left-footer")],2),n("div",{staticClass:"el-transfer__buttons"},[n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.rightChecked.length},nativeOn:{click:function(t){return e.addToLeft(t)}}},[n("i",{staticClass:"el-icon-arrow-left"}),void 0!==e.buttonTexts[0]?n("span",[e._v(e._s(e.buttonTexts[0]))]):e._e()]),n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.leftChecked.length},nativeOn:{click:function(t){return e.addToRight(t)}}},[void 0!==e.buttonTexts[1]?n("span",[e._v(e._s(e.buttonTexts[1]))]):e._e(),n("i",{staticClass:"el-icon-arrow-right"})])],1),n("transfer-panel",e._b({ref:"rightPanel",attrs:{data:e.targetData,title:e.titles[1]||e.t("el.transfer.titles.1"),"default-checked":e.rightDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onTargetCheckedChange}},"transfer-panel",e.$props,!1),[e._t("right-footer")],2)],1)};oc._withStripped=!0;var ac=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer-panel"},[n("p",{staticClass:"el-transfer-panel__header"},[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllCheckedChange},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("\n      "+e._s(e.title)+"\n      "),n("span",[e._v(e._s(e.checkedSummary))])])],1),n("div",{class:["el-transfer-panel__body",e.hasFooter?"is-with-footer":""]},[e.filterable?n("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:e.placeholder},nativeOn:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[n("i",{class:["el-input__icon","el-icon-"+e.inputIcon],attrs:{slot:"prefix"},on:{click:e.clearQuery},slot:"prefix"})]):e._e(),n("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.hasNoMatch&&e.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":e.filterable},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.filteredData,(function(t){return n("el-checkbox",{key:t[e.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:t[e.keyProp],disabled:t[e.disabledProp]}},[n("option-content",{attrs:{option:t}})],1)})),1),n("p",{directives:[{name:"show",rawName:"v-show",value:e.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noMatch")))]),n("p",{directives:[{name:"show",rawName:"v-show",value:0===e.data.length&&!e.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noData")))])],1),e.hasFooter?n("p",{staticClass:"el-transfer-panel__footer"},[e._t("default")],2):e._e()])};ac._withStripped=!0;var sc=r({mixins:[p.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:Yn.a,ElCheckbox:sn.a,ElInput:d.a,OptionContent:{props:{option:Object},render:function(e){var t=function e(t){return"ElTransferPanel"===t.$options.componentName?t:t.$parent?e(t.$parent):t}(this),n=t.$parent||t;return t.renderContent?t.renderContent(e,this.option):n.$scopedSlots.default?n.$scopedSlots.default({option:this.option}):e("span",[this.option[t.labelProp]||this.option[t.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(e,t){if(this.updateAllChecked(),this.checkChangeByUser){var n=e.concat(t).filter((function(n){return-1===e.indexOf(n)||-1===t.indexOf(n)}));this.$emit("checked-change",e,n)}else this.$emit("checked-change",e),this.checkChangeByUser=!0},data:function(){var e=this,t=[],n=this.filteredData.map((function(t){return t[e.keyProp]}));this.checked.forEach((function(e){n.indexOf(e)>-1&&t.push(e)})),this.checkChangeByUser=!1,this.checked=t},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(e,t){var n=this;if(!t||e.length!==t.length||!e.every((function(e){return t.indexOf(e)>-1}))){var i=[],r=this.checkableData.map((function(e){return e[n.keyProp]}));e.forEach((function(e){r.indexOf(e)>-1&&i.push(e)})),this.checkChangeByUser=!1,this.checked=i}}}},computed:{filteredData:function(){var e=this;return this.data.filter((function(t){return"function"==typeof e.filterMethod?e.filterMethod(e.query,t):(t[e.labelProp]||t[e.keyProp].toString()).toLowerCase().indexOf(e.query.toLowerCase())>-1}))},checkableData:function(){var e=this;return this.filteredData.filter((function(t){return!t[e.disabledProp]}))},checkedSummary:function(){var e=this.checked.length,t=this.data.length,n=this.format,i=n.noChecked,r=n.hasChecked;return i&&r?e>0?r.replace(/\${checked}/g,e).replace(/\${total}/g,t):i.replace(/\${total}/g,t):e+"/"+t},isIndeterminate:function(){var e=this.checked.length;return e>0&&e<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var e=this,t=this.checkableData.map((function(t){return t[e.keyProp]}));this.allChecked=t.length>0&&t.every((function(t){return e.checked.indexOf(t)>-1}))},handleAllCheckedChange:function(e){var t=this;this.checked=e?this.checkableData.map((function(e){return e[t.keyProp]})):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},ac,[],!1,null,null,null);sc.options.__file="packages/transfer/src/transfer-panel.vue";var lc=sc.exports,cc=r({name:"ElTransfer",mixins:[M.a,p.a,_.a],components:{TransferPanel:lc,ElButton:q.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var e=this.props.key;return this.data.reduce((function(t,n){return(t[n[e]]=n)&&t}),{})},sourceData:function(){var e=this;return this.data.filter((function(t){return-1===e.value.indexOf(t[e.props.key])}))},targetData:function(){var e=this;return"original"===this.targetOrder?this.data.filter((function(t){return e.value.indexOf(t[e.props.key])>-1})):this.value.reduce((function(t,n){var i=e.dataObj[n];return i&&t.push(i),t}),[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(e,t){this.leftChecked=e,void 0!==t&&this.$emit("left-check-change",e,t)},onTargetCheckedChange:function(e,t){this.rightChecked=e,void 0!==t&&this.$emit("right-check-change",e,t)},addToLeft:function(){var e=this.value.slice();this.rightChecked.forEach((function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)})),this.$emit("input",e),this.$emit("change",e,"left",this.rightChecked)},addToRight:function(){var e=this,t=this.value.slice(),n=[],i=this.props.key;this.data.forEach((function(t){var r=t[i];e.leftChecked.indexOf(r)>-1&&-1===e.value.indexOf(r)&&n.push(r)})),t="unshift"===this.targetOrder?n.concat(t):t.concat(n),this.$emit("input",t),this.$emit("change",t,"right",this.leftChecked)},clearQuery:function(e){"left"===e?this.$refs.leftPanel.query="":"right"===e&&(this.$refs.rightPanel.query="")}}},oc,[],!1,null,null,null);cc.options.__file="packages/transfer/src/main.vue";var uc=cc.exports;uc.install=function(e){e.component(uc.name,uc)};var hc=uc,dc=function(){var e=this.$createElement;return(this._self._c||e)("section",{staticClass:"el-container",class:{"is-vertical":this.isVertical}},[this._t("default")],2)};dc._withStripped=!0;var fc=r({name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some((function(e){var t=e.componentOptions&&e.componentOptions.tag;return"el-header"===t||"el-footer"===t})))}}},dc,[],!1,null,null,null);fc.options.__file="packages/container/src/main.vue";var pc=fc.exports;pc.install=function(e){e.component(pc.name,pc)};var mc=pc,vc=function(){var e=this.$createElement;return(this._self._c||e)("header",{staticClass:"el-header",style:{height:this.height}},[this._t("default")],2)};vc._withStripped=!0;var gc=r({name:"ElHeader",componentName:"ElHeader",props:{height:{type:String,default:"60px"}}},vc,[],!1,null,null,null);gc.options.__file="packages/header/src/main.vue";var yc=gc.exports;yc.install=function(e){e.component(yc.name,yc)};var bc=yc,xc=function(){var e=this.$createElement;return(this._self._c||e)("aside",{staticClass:"el-aside",style:{width:this.width}},[this._t("default")],2)};xc._withStripped=!0;var wc=r({name:"ElAside",componentName:"ElAside",props:{width:{type:String,default:"300px"}}},xc,[],!1,null,null,null);wc.options.__file="packages/aside/src/main.vue";var _c=wc.exports;_c.install=function(e){e.component(_c.name,_c)};var Sc=_c,Mc=function(){var e=this.$createElement;return(this._self._c||e)("main",{staticClass:"el-main"},[this._t("default")],2)};Mc._withStripped=!0;var Tc=r({name:"ElMain",componentName:"ElMain"},Mc,[],!1,null,null,null);Tc.options.__file="packages/main/src/main.vue";var Ec=Tc.exports;Ec.install=function(e){e.component(Ec.name,Ec)};var Cc=Ec,Ac=function(){var e=this.$createElement;return(this._self._c||e)("footer",{staticClass:"el-footer",style:{height:this.height}},[this._t("default")],2)};Ac._withStripped=!0;var Oc=r({name:"ElFooter",componentName:"ElFooter",props:{height:{type:String,default:"60px"}}},Ac,[],!1,null,null,null);Oc.options.__file="packages/footer/src/main.vue";var Lc=Oc.exports;Lc.install=function(e){e.component(Lc.name,Lc)};var kc=Lc,Pc=r({name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var e=arguments[0],t=this.reverse,n={"el-timeline":!0,"is-reverse":t},i=this.$slots.default||[];return t&&(i=i.reverse()),e("ul",{class:n},[i])}},void 0,void 0,!1,null,null,null);Pc.options.__file="packages/timeline/src/main.vue";var Dc=Pc.exports;Dc.install=function(e){e.component(Dc.name,Dc)};var Ic=Dc,Nc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-timeline-item"},[n("div",{staticClass:"el-timeline-item__tail"}),e.$slots.dot?e._e():n("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(e.size||""),"el-timeline-item__node--"+(e.type||"")],style:{backgroundColor:e.color}},[e.icon?n("i",{staticClass:"el-timeline-item__icon",class:e.icon}):e._e()]),e.$slots.dot?n("div",{staticClass:"el-timeline-item__dot"},[e._t("dot")],2):e._e(),n("div",{staticClass:"el-timeline-item__wrapper"},[e.hideTimestamp||"top"!==e.placement?e._e():n("div",{staticClass:"el-timeline-item__timestamp is-top"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")]),n("div",{staticClass:"el-timeline-item__content"},[e._t("default")],2),e.hideTimestamp||"bottom"!==e.placement?e._e():n("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")])])])};Nc._withStripped=!0;var Fc=r({name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}},Nc,[],!1,null,null,null);Fc.options.__file="packages/timeline/src/item.vue";var Rc=Fc.exports;Rc.install=function(e){e.component(Rc.name,Rc)};var Bc=Rc,jc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",e._b({class:["el-link",e.type?"el-link--"+e.type:"",e.disabled&&"is-disabled",e.underline&&!e.disabled&&"is-underline"],attrs:{href:e.disabled?null:e.href},on:{click:e.handleClick}},"a",e.$attrs,!1),[e.icon?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",{staticClass:"el-link--inner"},[e._t("default")],2):e._e(),e.$slots.icon?[e.$slots.icon?e._t("icon"):e._e()]:e._e()],2)};jc._withStripped=!0;var zc=r({name:"ElLink",props:{type:{type:String,default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:String,icon:String},methods:{handleClick:function(e){this.disabled||this.href||this.$emit("click",e)}}},jc,[],!1,null,null,null);zc.options.__file="packages/link/src/main.vue";var Uc=zc.exports;Uc.install=function(e){e.component(Uc.name,Uc)};var Vc=Uc,Gc=function(e,t){var n=t._c;return n("div",t._g(t._b({class:[t.data.staticClass,"el-divider","el-divider--"+t.props.direction]},"div",t.data.attrs,!1),t.listeners),[t.slots().default&&"vertical"!==t.props.direction?n("div",{class:["el-divider__text","is-"+t.props.contentPosition]},[t._t("default")],2):t._e()])};Gc._withStripped=!0;var Hc=r({name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}}},Gc,[],!0,null,null,null);Hc.options.__file="packages/divider/src/main.vue";var Wc=Hc.exports;Wc.install=function(e){e.component(Wc.name,Wc)};var qc=Wc,Yc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"el-image__placeholder"})]):e.error?e._t("error",[n("div",{staticClass:"el-image__error"},[e._v(e._s(e.t("el.image.error")))])]):n("img",e._g(e._b({staticClass:"el-image__inner",class:{"el-image__inner--center":e.alignCenter,"el-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.src},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.previewSrcList}}):e._e()]:e._e()],2)};Yc._withStripped=!0;var $c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-image-viewer__mask"}),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[n("i",{staticClass:"el-icon-circle-close"})]),e.isSingle?e._e():[n("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("i",{staticClass:"el-icon-arrow-left"})]),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("i",{staticClass:"el-icon-arrow-right"})])],n("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[n("div",{staticClass:"el-image-viewer__actions__inner"},[n("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){e.handleActions("zoomOut")}}}),n("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){e.handleActions("zoomIn")}}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{class:e.mode.icon,on:{click:e.toggleMode}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){e.handleActions("anticlocelise")}}}),n("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){e.handleActions("clocelise")}}})])]),n("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(t,i){return i===e.index?n("img",{key:t,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])};$c._withStripped=!0;var Xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qc={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},Kc=Object(m.isFirefox)()?"DOMMouseScroll":"mousewheel",Jc=r({name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:Qc.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,i=e.offsetX,r=e.offsetY,o={transform:"scale("+t+") rotate("+n+"deg)",transition:e.enableTransition?"transform .3s":"","margin-left":i+"px","margin-top":r+"px"};return this.mode===Qc.CONTAIN&&(o.maxWidth=o.maxHeight="100%"),o}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick((function(e){t.$refs.img[0].complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=Object(m.rafThrottle)((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=Object(m.rafThrottle)((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(pe.on)(document,"keydown",this._keyDownHandler),Object(pe.on)(document,Kc,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(pe.off)(document,"keydown",this._keyDownHandler),Object(pe.off)(document,Kc,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,i=n.offsetX,r=n.offsetY,o=e.pageX,a=e.pageY;this._dragHandler=Object(m.rafThrottle)((function(e){t.transform.offsetX=i+e.pageX-o,t.transform.offsetY=r+e.pageY-a})),Object(pe.on)(document,"mousemove",this._dragHandler),Object(pe.on)(document,"mouseup",(function(e){Object(pe.off)(document,"mousemove",t._dragHandler)})),e.preventDefault()}},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(Qc),t=(Object.values(Qc).indexOf(this.mode)+1)%e.length;this.mode=Qc[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=Xc({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),i=n.zoomRate,r=n.rotateDeg,o=n.enableTransition,a=this.transform;switch(e){case"zoomOut":a.scale>.2&&(a.scale=parseFloat((a.scale-i).toFixed(3)));break;case"zoomIn":a.scale=parseFloat((a.scale+i).toFixed(3));break;case"clocelise":a.deg+=r;break;case"anticlocelise":a.deg-=r}a.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.$refs["el-image-viewer__wrapper"].focus()}},$c,[],!1,null,null,null);Jc.options.__file="packages/image/src/image-viewer.vue";var Zc=Jc.exports,eu=function(){return void 0!==document.documentElement.style.objectFit},tu="none",nu="contain",iu="cover",ru="fill",ou="scale-down",au="",su=r({name:"ElImage",mixins:[p.a],inheritAttrs:!1,components:{ImageViewer:Zc},props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3}},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1}},computed:{imageStyle:function(){var e=this.fit;return!this.$isServer&&e?eu()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return!this.$isServer&&!eu()&&this.fit!==ru},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(e){this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{loadImage:function(){var e=this;if(!this.$isServer){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var i=e.$attrs[n];t.setAttribute(n,i)})),t.src=this.src}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},handleLazyLoad:function(){Object(pe.isInContainer)(this.$el,this._scrollContainer)&&(this.show=!0,this.removeLazyLoadListener())},addLazyLoadListener:function(){if(!this.$isServer){var e=this.scrollContainer,t=null;(t=Object(Fs.isHtmlElement)(e)?e:Object(Fs.isString)(e)?document.querySelector(e):Object(pe.getScrollContainer)(this.$el))&&(this._scrollContainer=t,this._lazyLoadHandler=Qs()(200,this.handleLazyLoad),Object(pe.on)(t,"scroll",this._lazyLoadHandler),this.handleLazyLoad())}},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(Object(pe.off)(e,"scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,i=this.$el,r=i.clientWidth,o=i.clientHeight;if(!(t&&n&&r&&o))return{};var a=t/n<1;e===ou&&(e=t<r&&n<o?tu:nu);switch(e){case tu:return{width:"auto",height:"auto"};case nu:return a?{width:"auto"}:{height:"auto"};case iu:return a?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(){this.preview&&(au=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0)},closeViewer:function(){document.body.style.overflow=au,this.showViewer=!1}}},Yc,[],!1,null,null,null);su.options.__file="packages/image/src/main.vue";var lu=su.exports;lu.install=function(e){e.component(lu.name,lu)};var cu=lu,uu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-calendar"},[n("div",{staticClass:"el-calendar__header"},[n("div",{staticClass:"el-calendar__title"},[e._v("\n      "+e._s(e.i18nDate)+"\n    ")]),0===e.validatedRange.length?n("div",{staticClass:"el-calendar__button-group"},[n("el-button-group",[n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("prev-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.prevMonth"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("today")}}},[e._v("\n          "+e._s(e.t("el.datepicker.today"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("next-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.nextMonth"))+"\n        ")])],1)],1):e._e()]),0===e.validatedRange.length?n("div",{key:"no-range",staticClass:"el-calendar__body"},[n("date-table",{attrs:{date:e.date,"selected-day":e.realSelectedDay,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})],1):n("div",{key:"has-range",staticClass:"el-calendar__body"},e._l(e.validatedRange,(function(t,i){return n("date-table",{key:i,attrs:{date:t[0],"selected-day":e.realSelectedDay,range:t,"hide-header":0!==i,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})})),1)])};uu._withStripped=!0;var hu=n(20),du=n.n(hu),fu=r({props:{selectedDay:String,range:{type:Array,validator:function(e){if(!e||!e.length)return!0;var t=e[0],n=e[1];return Object(pi.validateRangeInOneMonth)(t,n)}},date:Date,hideHeader:Boolean,firstDayOfWeek:Number},inject:["elCalendar"],data:function(){return{WEEK_DAYS:Object(pi.getI18nSettings)().dayNames}},methods:{toNestedArr:function(e){return Object(pi.range)(e.length/7).map((function(t,n){var i=7*n;return e.slice(i,i+7)}))},getFormateDate:function(e,t){if(!e||-1===["prev","current","next"].indexOf(t))throw new Error("invalid day or type");var n=this.curMonthDatePrefix;return"prev"===t?n=this.prevMonthDatePrefix:"next"===t&&(n=this.nextMonthDatePrefix),n+"-"+(e=("00"+e).slice(-2))},getCellClass:function(e){var t=e.text,n=e.type,i=[n];if("current"===n){var r=this.getFormateDate(t,n);r===this.selectedDay&&i.push("is-selected"),r===this.formatedToday&&i.push("is-today")}return i},pickDay:function(e){var t=e.text,n=e.type,i=this.getFormateDate(t,n);this.$emit("pick",i)},cellRenderProxy:function(e){var t=e.text,n=e.type,i=this.$createElement,r=this.elCalendar.$scopedSlots.dateCell;if(!r)return i("span",[t]);var o=this.getFormateDate(t,n);return r({date:new Date(o),data:{isSelected:this.selectedDay===o,type:n+"-month",day:o}})}},computed:{prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),du.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return du.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return du.a.format(e,"yyyy-MM")},formatedToday:function(){return this.elCalendar.formatedToday},isInRange:function(){return this.range&&this.range.length},rows:function(){var e=[];if(this.isInRange){var t=this.range,n=t[0],i=t[1],r=Object(pi.range)(i.getDate()-n.getDate()+1).map((function(e,t){return{text:n.getDate()+t,type:"current"}})),o=r.length%7;o=0===o?0:7-o;var a=Object(pi.range)(o).map((function(e,t){return{text:t+1,type:"next"}}));e=r.concat(a)}else{var s=this.date,l=Object(pi.getFirstDayOfMonth)(s);l=0===l?7:l;var c="number"==typeof this.firstDayOfWeek?this.firstDayOfWeek:1,u=Object(pi.getPrevMonthLastDays)(s,l-c).map((function(e){return{text:e,type:"prev"}})),h=Object(pi.getMonthDays)(s).map((function(e){return{text:e,type:"current"}}));e=[].concat(u,h);var d=Object(pi.range)(42-e.length).map((function(e,t){return{text:t+1,type:"next"}}));e=e.concat(d)}return this.toNestedArr(e)},weekDays:function(){var e=this.firstDayOfWeek,t=this.WEEK_DAYS;return"number"!=typeof e||0===e?t.slice():t.slice(e).concat(t.slice(0,e))}},render:function(){var e=this,t=arguments[0],n=this.hideHeader?null:t("thead",[this.weekDays.map((function(e){return t("th",{key:e},[e])}))]);return t("table",{class:{"el-calendar-table":!0,"is-range":this.isInRange},attrs:{cellspacing:"0",cellpadding:"0"}},[n,t("tbody",[this.rows.map((function(n,i){return t("tr",{class:{"el-calendar-table__row":!0,"el-calendar-table__row--hide-border":0===i&&e.hideHeader},key:i},[n.map((function(n,i){return t("td",{key:i,class:e.getCellClass(n),on:{click:e.pickDay.bind(e,n)}},[t("div",{class:"el-calendar-day"},[e.cellRenderProxy(n)])])}))])}))])])}},void 0,void 0,!1,null,null,null);fu.options.__file="packages/calendar/src/date-table.vue";var pu=fu.exports,mu=["prev-month","today","next-month"],vu=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],gu=r({name:"ElCalendar",mixins:[p.a],components:{DateTable:pu,ElButton:q.a,ElButtonGroup:$.a},props:{value:[Date,String,Number],range:{type:Array,validator:function(e){return!Array.isArray(e)||2===e.length&&e.every((function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date}))}},firstDayOfWeek:{type:Number,default:1}},provide:function(){return{elCalendar:this}},methods:{pickDay:function(e){this.realSelectedDay=e},selectDate:function(e){if(-1===mu.indexOf(e))throw new Error("invalid type "+e);var t="";(t="prev-month"===e?this.prevMonthDatePrefix+"-01":"next-month"===e?this.nextMonthDatePrefix+"-01":this.formatedToday)!==this.formatedDate&&this.pickDay(t)},toDate:function(e){if(!e)throw new Error("invalid val");return e instanceof Date?e:new Date(e)},rangeValidator:function(e,t){var n=this.realFirstDayOfWeek,i=t?n:0===n?6:n-1,r=(t?"start":"end")+" of range should be "+vu[i]+".";return e.getDay()===i||(console.warn("[ElementCalendar]",r,"Invalid range will be ignored."),!1)}},computed:{prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),du.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return du.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return du.a.format(e,"yyyy-MM")},formatedDate:function(){return du.a.format(this.date,"yyyy-MM-dd")},i18nDate:function(){var e=this.date.getFullYear(),t=this.date.getMonth()+1;return e+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+t)},formatedToday:function(){return du.a.format(this.now,"yyyy-MM-dd")},realSelectedDay:{get:function(){return this.value?this.formatedDate:this.selectedDay},set:function(e){this.selectedDay=e;var t=new Date(e);this.$emit("input",t)}},date:function(){if(this.value)return this.toDate(this.value);if(this.realSelectedDay){var e=this.selectedDay.split("-");return new Date(e[0],e[1]-1,e[2])}return this.validatedRange.length?this.validatedRange[0][0]:this.now},validatedRange:function(){var e=this,t=this.range;if(!t)return[];if(2===(t=t.reduce((function(t,n,i){var r=e.toDate(n);return e.rangeValidator(r,0===i)&&(t=t.concat(r)),t}),[])).length){var n=t,i=n[0],r=n[1];if(i>r)return console.warn("[ElementCalendar]end time should be greater than start time"),[];if(Object(pi.validateRangeInOneMonth)(i,r))return[[i,r]];var o=[],a=new Date(i.getFullYear(),i.getMonth()+1,1),s=this.toDate(a.getTime()-864e5);if(!Object(pi.validateRangeInOneMonth)(a,r))return console.warn("[ElementCalendar]start time and end time interval must not exceed two months"),[];o.push([i,s]);var l=this.realFirstDayOfWeek,c=a.getDay(),u=0;return c!==l&&(u=0===l?7-c:(u=l-c)>0?u:7+u),(a=this.toDate(a.getTime()+864e5*u)).getDate()<r.getDate()&&o.push([a,r]),o}return[]},realFirstDayOfWeek:function(){return this.firstDayOfWeek<1||this.firstDayOfWeek>6?0:Math.floor(this.firstDayOfWeek)}},data:function(){return{selectedDay:"",now:new Date}}},uu,[],!1,null,null,null);gu.options.__file="packages/calendar/src/main.vue";var yu=gu.exports;yu.install=function(e){e.component(yu.name,yu)};var bu=yu,xu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-fade-in"}},[e.visible?n("div",{staticClass:"el-backtop",style:{right:e.styleRight,bottom:e.styleBottom},on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[e._t("default",[n("el-icon",{attrs:{name:"caret-top"}})])],2):e._e()])};xu._withStripped=!0;var wu=function(e){return Math.pow(e,3)},_u=r({name:"ElBacktop",props:{visibilityHeight:{type:Number,default:200},target:[String],right:{type:Number,default:40},bottom:{type:Number,default:40}},data:function(){return{el:null,container:null,visible:!1}},computed:{styleBottom:function(){return this.bottom+"px"},styleRight:function(){return this.right+"px"}},mounted:function(){this.init(),this.throttledScrollHandler=Qs()(300,this.onScroll),this.container.addEventListener("scroll",this.throttledScrollHandler)},methods:{init:function(){if(this.container=document,this.el=document.documentElement,this.target){if(this.el=document.querySelector(this.target),!this.el)throw new Error("target is not existed: "+this.target);this.container=this.el}},onScroll:function(){var e=this.el.scrollTop;this.visible=e>=this.visibilityHeight},handleClick:function(e){this.scrollToTop(),this.$emit("click",e)},scrollToTop:function(){var e=this.el,t=Date.now(),n=e.scrollTop,i=window.requestAnimationFrame||function(e){return setTimeout(e,16)};i((function r(){var o,a=(Date.now()-t)/500;a<1?(e.scrollTop=n*(1-((o=a)<.5?wu(2*o)/2:1-wu(2*(1-o))/2)),i(r)):e.scrollTop=0}))}},beforeDestroy:function(){this.container.removeEventListener("scroll",this.throttledScrollHandler)}},xu,[],!1,null,null,null);_u.options.__file="packages/backtop/src/main.vue";var Su=_u.exports;Su.install=function(e){e.component(Su.name,Su)};var Mu=Su,Tu=function(e,t){return e===window||e===document?document.documentElement[t]:e[t]},Eu=function(e){return Tu(e,"offsetHeight")},Cu="ElInfiniteScroll",Au={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Ou=function(e,t){return Object(Fs.isHtmlElement)(e)?(n=Au,Object.keys(n||{}).map((function(e){return[e,n[e]]}))).reduce((function(n,i){var r=i[0],o=i[1],a=o.type,s=o.default,l=e.getAttribute("infinite-scroll-"+r);switch(l=Object(Fs.isUndefined)(t[l])?l:t[l],a){case Number:l=Number(l),l=Number.isNaN(l)?s:l;break;case Boolean:l=Object(Fs.isDefined)(l)?"false"!==l&&Boolean(l):s;break;default:l=a(l)}return n[r]=l,n}),{}):{};var n},Lu=function(e){return e.getBoundingClientRect().top},ku=function(e){var t=this[Cu],n=t.el,i=t.vm,r=t.container,o=t.observer,a=Ou(n,i),s=a.distance;if(!a.disabled){var l=r.getBoundingClientRect();if(l.width||l.height){var c=!1;if(r===n){var u=r.scrollTop+function(e){return Tu(e,"clientHeight")}(r);c=r.scrollHeight-u<=s}else{c=Eu(n)+Lu(n)-Lu(r)-Eu(r)+Number.parseFloat(function(e,t){if(e===window&&(e=document.documentElement),1!==e.nodeType)return[];var n=window.getComputedStyle(e,null);return t?n[t]:n}(r,"borderBottomWidth"))<=s}c&&Object(Fs.isFunction)(e)?e.call(i):o&&(o.disconnect(),this[Cu].observer=null)}}},Pu={name:"InfiniteScroll",inserted:function(e,t,n){var i=t.value,r=n.context,o=Object(pe.getScrollContainer)(e,!0),a=Ou(e,r),s=a.delay,l=a.immediate,c=L()(s,ku.bind(e,i));(e[Cu]={el:e,vm:r,container:o,onScroll:c},o)&&(o.addEventListener("scroll",c),l&&((e[Cu].observer=new MutationObserver(c)).observe(o,{childList:!0,subtree:!0}),c()))},unbind:function(e){var t=e[Cu],n=t.container,i=t.onScroll;n&&n.removeEventListener("scroll",i)},install:function(e){e.directive(Pu.name,Pu)}},Du=Pu,Iu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-page-header"},[n("div",{staticClass:"el-page-header__left",on:{click:function(t){e.$emit("back")}}},[n("i",{staticClass:"el-icon-back"}),n("div",{staticClass:"el-page-header__title"},[e._t("title",[e._v(e._s(e.title))])],2)]),n("div",{staticClass:"el-page-header__content"},[e._t("content",[e._v(e._s(e.content))])],2)])};Iu._withStripped=!0;var Nu=r({name:"ElPageHeader",props:{title:{type:String,default:function(){return Object(Bt.t)("el.pageHeader.title")}},content:String}},Iu,[],!1,null,null,null);Nu.options.__file="packages/page-header/src/main.vue";var Fu=Nu.exports;Fu.install=function(e){e.component(Fu.name,Fu)};var Ru=Fu,Bu=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:["el-cascader-panel",this.border&&"is-bordered"],on:{keydown:this.handleKeyDown}},this._l(this.menus,(function(e,n){return t("cascader-menu",{key:n,ref:"menu",refInFor:!0,attrs:{index:n,nodes:e}})})),1)};Bu._withStripped=!0;var ju=n(43),zu=n.n(ju),Uu=function(e){return e.stopPropagation()},Vu=r({inject:["panel"],components:{ElCheckbox:sn.a,ElRadio:zu.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,n=this.node,i=this.isDisabled,r=this.config,o=r.multiple;!r.checkStrictly&&i||n.loading||(r.lazy&&!n.loaded?t.lazyLoad(n,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var i=!!t&&n.checked;e.handleMultiCheckChange(i)}})):t.handleExpand(n))},handleCheckChange:function(){var e=this.panel,t=this.value,n=this.node;e.handleCheckChange(t),e.handleExpand(n)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node;return(e[t.level-1]||{}).uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,n=this.isChecked,i=this.config,r=i.checkStrictly;return i.multiple?this.renderCheckbox(e):r?this.renderRadio(e):t&&n?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,n=this.isLeaf;return t.loading?this.renderLoadingIcon(e):n?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,n=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(r.nativeOn.click=Uu),e("el-checkbox",es()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:i}},r]))},renderRadio:function(e){var t=this.checkedValue,n=this.value,i=this.isDisabled;return Object(m.isEqual)(n,t)&&(n=t),e("el-radio",{attrs:{value:t,label:n,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:Uu}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,n=this.node,i=t.renderLabelFn;return e("span",{class:"el-cascader-node__label"},[(i?i({node:n,data:n.data}):null)||n.label])}},render:function(e){var t=this,n=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,a=this.isDisabled,s=this.config,l=this.nodeId,c=s.expandTrigger,u=s.checkStrictly,h=s.multiple,d=!u&&a,f={on:{}};return"click"===c?f.on.click=this.handleExpand:(f.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},f.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||a||u||h||(f.on.click=this.handleCheckChange),e("li",es()([{attrs:{role:"menuitem",id:l,"aria-expanded":n,tabindex:d?null:-1},class:{"el-cascader-node":!0,"is-selectable":u,"in-active-path":n,"in-checked-path":i,"is-active":r,"is-disabled":d}},f]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},void 0,void 0,!1,null,null,null);Vu.options.__file="packages/cascader-panel/src/cascader-node.vue";var Gu=Vu.exports,Hu=r({name:"ElCascaderMenu",mixins:[p.a],inject:["panel"],components:{ElScrollbar:R.a,CascaderNode:Gu},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(m.generateId)()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,n=this.hoverTimer,i=this.$refs.hoverZone;if(t&&i)if(t.contains(e.target)){clearTimeout(n);var r=this.$el.getBoundingClientRect().left,o=e.clientX-r,a=this.$el,s=a.offsetWidth,l=a.offsetHeight,c=t.offsetTop,u=c+t.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+c+" L"+s+" 0 V"+c+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+u+" L"+s+" "+l+" V"+u+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,n=this.panel.isHoverMenu,i={on:{}};n&&(i.on.expand=this.handleExpand);var r=this.nodes.map((function(n,r){var o=n.hasChildren;return e("cascader-node",es()([{key:n.uid,attrs:{node:n,"node-id":t+"-"+r,"aria-haspopup":o,"aria-owns":o?t:null}},i]))}));return[].concat(r,[n?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,n=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",es()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},i]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},void 0,void 0,!1,null,null,null);Hu.options.__file="packages/cascader-panel/src/cascader-menu.vue";var Wu=Hu.exports,qu=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var Yu=0,$u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.config=n,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=Yu++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,n=e.label;this.value=this.data[t],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,n=this.config,i=n.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(i){return new e(i,n,t)}))},e.prototype.calculatePathNodes=function(){for(var e=[this],t=this.parent;t;)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(m.isEqual)(e,t)})):Object(m.isEqual)(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="onParent"+Object(m.capitalize)(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(n)),t[r]&&t[r].apply(t,n))}))},e.prototype.emit=function(e){var t=this.parent,n="onChild"+Object(m.capitalize)(e);if(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t[n]&&t[n].apply(t,r),t.emit.apply(t,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children.filter((function(e){return!e.isDisabled})),t=!!e.length&&e.every((function(e){return e.checked}));this.setCheckState(t)},e.prototype.setCheckState=function(e){var t=this.children.length,n=this.children.reduce((function(e,t){return e+(t.checked?1:t.indeterminate?.5:0)}),0);this.checked=e,this.indeterminate=n!==t&&n>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),n=this.isSameNode(e,t);this.doCheck(n)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},qu(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,n=this.config,i=n.disabled,r=n.checkStrictly;return e[i]||!r&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,n=this.hasChildren,i=this.children,r=this.config,o=r.lazy,a=r.leaf;if(o){var s=Object(Ge.isDef)(e[a])?e[a]:!!t&&!i.length;return this.hasChildren=!s,s}return!n}}]),e}();var Xu=function e(t,n){return t.reduce((function(t,i){return i.isLeaf?t.push(i):(!n&&t.push(i),t=t.concat(e(i.children,n))),t}),[])},Qu=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=n,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(m.coerceTruthyValueToArray)(e),this.nodes=e.map((function(e){return new $u(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var n=new $u(e,this.config,t);(t?t.children:this.nodes).push(n)},e.prototype.appendNodes=function(e,t){var n=this;(e=Object(m.coerceTruthyValueToArray)(e)).forEach((function(e){return n.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.leafNodes:this.flattedNodes;return t?n:Xu(this.nodes,e)},e.prototype.getNodeByValue=function(e){if(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(m.valueEquals)(t.path,e)||t.value===e}));return t&&t.length?t[0]:null}return null},e}(),Ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ju=wl.a.keys,Zu={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:m.noop,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},eh=function(e){return!e.getAttribute("aria-owns")},th=function(e,t){var n=e.parentNode;if(n){var i=n.querySelectorAll('.el-cascader-node[tabindex="-1"]');return i[Array.prototype.indexOf.call(i,e)+t]||null}return null},nh=function(e,t){if(e){var n=e.id.split("-");return Number(n[n.length-2])}},ih=function(e){e&&(e.focus(),!eh(e)&&e.click())},rh=r({name:"ElCascaderPanel",components:{CascaderMenu:Wu},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return Ve()(Ku({},Zu),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(m.isEqual)(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){Object(m.isEmpty)(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(m.isEmpty)(t)?this.lazyLoad():(this.store=new Qu(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(m.isEqual)(e,t)||(this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this;this.getFlattedNodes(this.leafOnly).forEach((function(t){t.syncCheckState(e.checkedValue)}))},syncActivePath:function(){var e=this,t=this.store,n=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(m.isEmpty)(i))if(Object(m.isEmpty)(r))this.activePath=[],this.menus=[t.getNodes()];else{var o=n?r[0]:r,a=((this.getNodeByValue(o)||{}).pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var s=i.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(s)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,n=this.multiple?Object(m.coerceTruthyValueToArray)(t):[t];this.checkedNodePaths=n.map((function(t){var n=e.getNodeByValue(t);return n?n.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target;switch(e.keyCode){case Ju.up:var n=th(t,-1);ih(n);break;case Ju.down:var i=th(t,1);ih(i);break;case Ju.left:var r=this.$refs.menu[nh(t)-1];if(r){var o=r.$el.querySelector('.el-cascader-node[aria-expanded="true"]');ih(o)}break;case Ju.right:var a=this.$refs.menu[nh(t)+1];if(a){var s=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');ih(s)}break;case Ju.enter:!function(e){if(e){var t=e.querySelector("input");t?t.click():eh(e)&&e.click()}}(t);break;case Ju.esc:case Ju.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var n=this.activePath,i=e.level,r=n.slice(0,i-1),o=this.menus.slice(0,i);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!t){var a=r.map((function(e){return e.getValue()})),s=n.map((function(e){return e.getValue()}));Object(m.valueEquals)(a,s)||(this.$emit("active-item-change",a),this.$emit("expand-change",a))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var n=this,i=this.config;e||(e=e||{root:!0,level:0},this.store=new Qu([],i),this.menus=[this.store.getNodes()]),e.loading=!0;i.lazyLoad(e,(function(i){var r=e.root?null:e;if(i&&i.length&&n.store.appendNodes(i,r),e.loading=!1,e.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],a=n.config.value,s=n.config.leaf;if(Array.isArray(i)&&i.filter((function(e){return e[a]===o})).length>0){var l=n.store.getNodeByValue(o);l.data[s]||n.lazyLoad(l,(function(){n.handleExpand(l)})),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}t&&t(i)}))},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){this.$isServer||(this.$refs.menu||[]).forEach((function(e){var t=e.$el;if(t){var n=t.querySelector(".el-scrollbar__wrap"),i=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");Ut()(n,i)}}))},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue;return this.multiple?this.getFlattedNodes(e).filter((function(e){return e.checked})):Object(m.isEmpty)(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,n=e.multiple,i=e.emitPath;n?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},Bu,[],!1,null,null,null);rh.options.__file="packages/cascader-panel/src/cascader-panel.vue";var oh=rh.exports;oh.install=function(e){e.component(oh.name,oh)};var ah=oh,sh=r({name:"ElAvatar",props:{size:{type:[Number,String],validator:function(e){return"string"==typeof e?["large","medium","small"].includes(e):"number"==typeof e}},shape:{type:String,default:"circle",validator:function(e){return["circle","square"].includes(e)}},icon:String,src:String,alt:String,srcSet:String,error:Function,fit:{type:String,default:"cover"}},data:function(){return{isImageExist:!0}},computed:{avatarClass:function(){var e=this.size,t=this.icon,n=this.shape,i=["el-avatar"];return e&&"string"==typeof e&&i.push("el-avatar--"+e),t&&i.push("el-avatar--icon"),n&&i.push("el-avatar--"+n),i.join(" ")}},methods:{handleError:function(){var e=this.error;!1!==(e?e():void 0)&&(this.isImageExist=!1)},renderAvatar:function(){var e=this.$createElement,t=this.icon,n=this.src,i=this.alt,r=this.isImageExist,o=this.srcSet,a=this.fit;return r&&n?e("img",{attrs:{src:n,alt:i,srcSet:o},on:{error:this.handleError},style:{"object-fit":a}}):t?e("i",{class:t}):this.$slots.default}},render:function(){var e=arguments[0],t=this.avatarClass,n=this.size,i="number"==typeof n?{height:n+"px",width:n+"px",lineHeight:n+"px"}:{};return e("span",{class:t,style:i},[this.renderAvatar()])}},void 0,void 0,!1,null,null,null);sh.options.__file="packages/avatar/src/main.vue";var lh=sh.exports;lh.install=function(e){e.component(lh.name,lh)};var ch=lh,uh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.size:"height: "+e.size,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?n("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[n("span",{attrs:{role:"heading",tabindex:"0",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?n("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])};uh._withStripped=!0;var hh=r({name:"ElDrawer",mixins:[x.a,M.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:String,default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement,this.$nextTick((function(){wl.a.focusFirstDescendant(t.$refs.drawer)}))):(this.closed||this.$emit("close"),this.$nextTick((function(){t.prevActiveElement&&t.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open())},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},uh,[],!1,null,null,null);hh.options.__file="packages/drawer/src/main.vue";var dh=hh.exports;dh.install=function(e){e.component(dh.name,dh)};var fh=dh,ph=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",e._b({attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},"el-popover",e.$attrs,!1),[n("div",{staticClass:"el-popconfirm"},[n("p",{staticClass:"el-popconfirm__main"},[e.hideIcon?e._e():n("i",{staticClass:"el-popconfirm__icon",class:e.icon,style:{color:e.iconColor}}),e._v("\n      "+e._s(e.title)+"\n    ")]),n("div",{staticClass:"el-popconfirm__action"},[n("el-button",{attrs:{size:"mini",type:e.cancelButtonType},on:{click:e.cancel}},[e._v("\n        "+e._s(e.cancelButtonText)+"\n      ")]),n("el-button",{attrs:{size:"mini",type:e.confirmButtonType},on:{click:e.confirm}},[e._v("\n        "+e._s(e.confirmButtonText)+"\n      ")])],1)]),e._t("reference",null,{slot:"reference"})],2)};ph._withStripped=!0;var mh=n(44),vh=n.n(mh),gh=r({name:"ElPopconfirm",props:{title:{type:String},confirmButtonText:{type:String,default:Object(Bt.t)("el.popconfirm.confirmButtonText")},cancelButtonText:{type:String,default:Object(Bt.t)("el.popconfirm.cancelButtonText")},confirmButtonType:{type:String,default:"primary"},cancelButtonType:{type:String,default:"text"},icon:{type:String,default:"el-icon-question"},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1}},components:{ElPopover:vh.a,ElButton:q.a},data:function(){return{visible:!1}},methods:{confirm:function(){this.visible=!1,this.$emit("onConfirm")},cancel:function(){this.visible=!1,this.$emit("onCancel")}}},ph,[],!1,null,null,null);gh.options.__file="packages/popconfirm/src/main.vue";var yh=gh.exports;yh.install=function(e){e.component(yh.name,yh)};var bh=yh,xh=[g,C,H,K,te,oe,ge,Me,Le,Ie,qe,Ke,tt,at,ut,pt,yt,_t,Et,Ht,Wt,Xt,Zt,rn,oi,di,cr,gr,Er,Pr,Ir,no,ao,uo,bo,Ao,Po,No,Zo,ra,Ma,Va,Ha,Ya,ls,ds,vs,Ls,Is,js,Gs,Ys,Zs,rl,ll,dl,vl,Al,rc,hc,mc,bc,Sc,Cc,kc,Ic,Bc,Vc,qc,cu,bu,Mu,Ru,ah,ch,fh,bh,be.a],wh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.a.use(t.locale),jt.a.i18n(t.i18n),xh.forEach((function(t){e.component(t.name,t)})),e.use(Du),e.use(Ba.directive),e.prototype.$ELEMENT={size:t.size||"",zIndex:t.zIndex||2e3},e.prototype.$loading=Ba.service,e.prototype.$msgbox=Jr,e.prototype.$alert=Jr.alert,e.prototype.$confirm=Jr.confirm,e.prototype.$prompt=Jr.prompt,e.prototype.$notify=pa,e.prototype.$message=Es};"undefined"!=typeof window&&window.Vue&&wh(window.Vue);t.default={version:"2.13.2",locale:jt.a.use,i18n:jt.a.i18n,install:wh,CollapseTransition:be.a,Loading:Ba,Pagination:g,Dialog:C,Autocomplete:H,Dropdown:K,DropdownMenu:te,DropdownItem:oe,Menu:ge,Submenu:Me,MenuItem:Le,MenuItemGroup:Ie,Input:qe,InputNumber:Ke,Radio:tt,RadioGroup:at,RadioButton:ut,Checkbox:pt,CheckboxButton:yt,CheckboxGroup:_t,Switch:Et,Select:Ht,Option:Wt,OptionGroup:Xt,Button:Zt,ButtonGroup:rn,Table:oi,TableColumn:di,DatePicker:cr,TimeSelect:gr,TimePicker:Er,Popover:Pr,Tooltip:Ir,MessageBox:Jr,Breadcrumb:no,BreadcrumbItem:ao,Form:uo,FormItem:bo,Tabs:Ao,TabPane:Po,Tag:No,Tree:Zo,Alert:ra,Notification:pa,Slider:Ma,Icon:Va,Row:Ha,Col:Ya,Upload:ls,Progress:ds,Spinner:vs,Message:Es,Badge:Ls,Card:Is,Rate:js,Steps:Gs,Step:Ys,Carousel:Zs,Scrollbar:rl,CarouselItem:ll,Collapse:dl,CollapseItem:vl,Cascader:Al,ColorPicker:rc,Transfer:hc,Container:mc,Header:bc,Aside:Sc,Main:Cc,Footer:kc,Timeline:Ic,TimelineItem:Bc,Link:Vc,Divider:qc,Image:cu,Calendar:bu,Backtop:Mu,InfiniteScroll:Du,PageHeader:Ru,CascaderPanel:ah,Avatar:ch,Drawer:fh,Popconfirm:bh}}]).default},function(e,t,n){"use strict";t.__esModule=!0,t.validateRangeInOneMonth=t.extractTimeFormat=t.extractDateFormat=t.nextYear=t.prevYear=t.nextMonth=t.prevMonth=t.changeYearMonthAndClampDate=t.timeWithinRange=t.limitTimeRange=t.clearMilliseconds=t.clearTime=t.modifyWithTimeString=t.modifyTime=t.modifyDate=t.range=t.getRangeMinutes=t.getMonthDays=t.getPrevMonthLastDays=t.getRangeHours=t.getWeekNumber=t.getStartDateOfMonth=t.nextDate=t.prevDate=t.getFirstDayOfMonth=t.getDayCountOfYear=t.getDayCountOfMonth=t.parseDate=t.formatDate=t.isDateObject=t.isDate=t.toDate=t.getI18nSettings=void 0;var i,r=n(202),o=(i=r)&&i.__esModule?i:{default:i},a=n(93);var s=["sun","mon","tue","wed","thu","fri","sat"],l=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],c=t.getI18nSettings=function(){return{dayNamesShort:s.map((function(e){return(0,a.t)("el.datepicker.weeks."+e)})),dayNames:s.map((function(e){return(0,a.t)("el.datepicker.weeks."+e)})),monthNamesShort:l.map((function(e){return(0,a.t)("el.datepicker.months."+e)})),monthNames:l.map((function(e,t){return(0,a.t)("el.datepicker.month"+(t+1))})),amPm:["am","pm"]}},u=t.toDate=function(e){return h(e)?new Date(e):null},h=t.isDate=function(e){return null!=e&&(!isNaN(new Date(e).getTime())&&!Array.isArray(e))},d=(t.isDateObject=function(e){return e instanceof Date},t.formatDate=function(e,t){return(e=u(e))?o.default.format(e,t||"yyyy-MM-dd",c()):""},t.parseDate=function(e,t){return o.default.parse(e,t||"yyyy-MM-dd",c())}),f=t.getDayCountOfMonth=function(e,t){return 3===t||5===t||8===t||10===t?30:1===t?e%4==0&&e%100!=0||e%400==0?29:28:31},p=(t.getDayCountOfYear=function(e){return e%400==0||e%100!=0&&e%4==0?366:365},t.getFirstDayOfMonth=function(e){var t=new Date(e.getTime());return t.setDate(1),t.getDay()},t.prevDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)});t.nextDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.getStartDateOfMonth=function(e,t){var n=new Date(e,t,1),i=n.getDay();return p(n,0===i?7:i)},t.getWeekNumber=function(e){if(!h(e))return null;var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},t.getRangeHours=function(e){var t=[],n=[];if((e||[]).forEach((function(e){var t=e.map((function(e){return e.getHours()}));n=n.concat(function(e,t){for(var n=[],i=e;i<=t;i++)n.push(i);return n}(t[0],t[1]))})),n.length)for(var i=0;i<24;i++)t[i]=-1===n.indexOf(i);else for(var r=0;r<24;r++)t[r]=!1;return t},t.getPrevMonthLastDays=function(e,t){if(t<=0)return[];var n=new Date(e.getTime());n.setDate(0);var i=n.getDate();return v(t).map((function(e,n){return i-(t-n-1)}))},t.getMonthDays=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return v(t).map((function(e,t){return t+1}))};function m(e,t,n,i){for(var r=t;r<n;r++)e[r]=i}t.getRangeMinutes=function(e,t){var n=new Array(60);return e.length>0?e.forEach((function(e){var i=e[0],r=e[1],o=i.getHours(),a=i.getMinutes(),s=r.getHours(),l=r.getMinutes();o===t&&s!==t?m(n,a,60,!0):o===t&&s===t?m(n,a,l+1,!0):o!==t&&s===t?m(n,0,l+1,!0):o<t&&s>t&&m(n,0,60,!0)})):m(n,0,60,!0),n};var v=t.range=function(e){return Array.apply(null,{length:e}).map((function(e,t){return t}))},g=t.modifyDate=function(e,t,n,i){return new Date(t,n,i,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},y=t.modifyTime=function(e,t,n,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,n,i,e.getMilliseconds())},b=(t.modifyWithTimeString=function(e,t){return null!=e&&t?(t=d(t,"HH:mm:ss"),y(e,t.getHours(),t.getMinutes(),t.getSeconds())):e},t.clearTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.clearMilliseconds=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)},t.limitTimeRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HH:mm:ss";if(0===t.length)return e;var i=function(e){return o.default.parse(o.default.format(e,n),n)},r=i(e),a=t.map((function(e){return e.map(i)}));if(a.some((function(e){return r>=e[0]&&r<=e[1]})))return e;var s=a[0][0],l=a[0][0];a.forEach((function(e){s=new Date(Math.min(e[0],s)),l=new Date(Math.max(e[1],s))}));var c=r<s?s:l;return g(c,e.getFullYear(),e.getMonth(),e.getDate())}),x=(t.timeWithinRange=function(e,t,n){return b(e,t,n).getTime()===e.getTime()},t.changeYearMonthAndClampDate=function(e,t,n){var i=Math.min(e.getDate(),f(t,n));return g(e,t,n,i)});t.prevMonth=function(e){var t=e.getFullYear(),n=e.getMonth();return 0===n?x(e,t-1,11):x(e,t,n-1)},t.nextMonth=function(e){var t=e.getFullYear(),n=e.getMonth();return 11===n?x(e,t+1,0):x(e,t,n+1)},t.prevYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getFullYear(),i=e.getMonth();return x(e,n-t,i)},t.nextYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getFullYear(),i=e.getMonth();return x(e,n+t,i)},t.extractDateFormat=function(e){return e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},t.extractTimeFormat=function(e){return e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},t.validateRangeInOneMonth=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},function(e,t,n){"use strict";t.__esModule=!0,t.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}},function(e,t,n){"use strict";var i=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)};var r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){var n;return t&&!0===t.clone&&i(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e}function a(e,t,n){var r=e.slice();return t.forEach((function(t,a){void 0===r[a]?r[a]=o(t,n):i(t)?r[a]=s(e[a],t,n):-1===e.indexOf(t)&&r.push(o(t,n))})),r}function s(e,t,n){var r=Array.isArray(t);return r===Array.isArray(e)?r?((n||{arrayMerge:a}).arrayMerge||a)(e,t,n):function(e,t,n){var r={};return i(e)&&Object.keys(e).forEach((function(t){r[t]=o(e[t],n)})),Object.keys(t).forEach((function(a){i(t[a])&&e[a]?r[a]=s(e[a],t[a],n):r[a]=o(t[a],n)})),r}(e,t,n):o(t,n)}s.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return s(e,n,t)}))};var l=s;e.exports=l},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return 1===n.length&&"object"===i(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(o,(function(t,i,o,a){var s=void 0;return"{"===e[a-1]&&"}"===e[a+t.length]?o:null==(s=(0,r.hasOwn)(n,o)?n[o]:null)?"":s}))}};var r=n(44),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(31),o=(i=r)&&i.__esModule?i:{default:i},a=n(52);var s=!1,l=!1,c=void 0,u=function(){if(!o.default.prototype.$isServer){var e=d.modalDom;return e?s=!0:(s=!1,e=document.createElement("div"),d.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){d.doOnModalClick&&d.doOnModalClick()}))),e}},h={},d={modalFade:!0,getInstance:function(e){return h[e]},register:function(e,t){e&&t&&(h[e]=t)},deregister:function(e){e&&(h[e]=null,delete h[e])},nextZIndex:function(){return d.zIndex++},modalStack:[],doOnModalClick:function(){var e=d.modalStack[d.modalStack.length-1];if(e){var t=d.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,n,i,r){if(!o.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=r;for(var l=this.modalStack,c=0,h=l.length;c<h;c++){if(l[c].id===e)return}var d=u();if((0,a.addClass)(d,"v-modal"),this.modalFade&&!s&&(0,a.addClass)(d,"v-modal-enter"),i)i.trim().split(/\s+/).forEach((function(e){return(0,a.addClass)(d,e)}));setTimeout((function(){(0,a.removeClass)(d,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(d):document.body.appendChild(d),t&&(d.style.zIndex=t),d.tabIndex=0,d.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:i})}},closeModal:function(e){var t=this.modalStack,n=u();if(t.length>0){var i=t[t.length-1];if(i.id===e){if(i.modalClass)i.modalClass.trim().split(/\s+/).forEach((function(e){return(0,a.removeClass)(n,e)}));t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex)}else for(var r=t.length-1;r>=0;r--)if(t[r].id===e){t.splice(r,1);break}}0===t.length&&(this.modalFade&&(0,a.addClass)(n,"v-modal-leave"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",d.modalDom=void 0),(0,a.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(d,"zIndex",{configurable:!0,get:function(){return l||(c=c||(o.default.prototype.$ELEMENT||{}).zIndex||2e3,l=!0),c},set:function(e){c=e}});o.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=function(){if(!o.default.prototype.$isServer&&d.modalStack.length>0){var e=d.modalStack[d.modalStack.length-1];if(!e)return;return d.getInstance(e.id)}}();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t.default=d},function(e,t,n){"use strict";var i,r;"function"==typeof Symbol&&Symbol.iterator;void 0===(r="function"==typeof(i=function(){var e=window,t={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(e,n,i){this._reference=e.jquery?e[0]:e,this.state={};var r=null==n,o=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=r||o?this.parse(o?n:{}):n.jquery?n[0]:n,this._options=Object.assign({},t,i),this._options.modifiers=this._options.modifiers.map(function(e){if(-1===this._options.modifiersIgnored.indexOf(e))return"applyStyle"===e&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[e]||e}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),u(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function i(t){var n=t.style.display,i=t.style.visibility;t.style.display="block",t.style.visibility="hidden",t.offsetWidth;var r=e.getComputedStyle(t),o=parseFloat(r.marginTop)+parseFloat(r.marginBottom),a=parseFloat(r.marginLeft)+parseFloat(r.marginRight),s={width:t.offsetWidth+a,height:t.offsetHeight+o};return t.style.display=n,t.style.visibility=i,s}function r(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function o(e){var t=Object.assign({},e);return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function a(e,t){var n,i=0;for(n in e){if(e[n]===t)return i;i++}return null}function s(t,n){return e.getComputedStyle(t,null)[n]}function l(t){var n=t.offsetParent;return n!==e.document.body&&n?n:e.document.documentElement}function c(t){var n=t.parentNode;return n?n===e.document?e.document.body.scrollTop||e.document.body.scrollLeft?e.document.body:e.document.documentElement:-1!==["scroll","auto"].indexOf(s(n,"overflow"))||-1!==["scroll","auto"].indexOf(s(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(s(n,"overflow-y"))?n:c(t.parentNode):t}function u(e,t){Object.keys(t).forEach((function(n){var i,r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&""!==(i=t[n])&&!isNaN(parseFloat(i))&&isFinite(i)&&(r="px"),e.style[n]=t[n]+r}))}function h(e){var t={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop};return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function d(e){var t=e.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE")&&"HTML"===e.tagName?-e.scrollTop:t.top;return{left:t.left,top:n,right:t.right,bottom:t.bottom,width:t.right-t.left,height:t.bottom-n}}function f(t){for(var n=["","ms","webkit","moz","o"],i=0;i<n.length;i++){var r=n[i]?n[i]+t.charAt(0).toUpperCase()+t.slice(1):t;if(void 0!==e.document.body.style[r])return r}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[f("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var e={instance:this,styles:{}};e.placement=this._options.placement,e._originalPlacement=this._options.placement,e.offsets=this._getOffsets(this._popper,this._reference,e.placement),e.boundaries=this._getBoundaries(e,this._options.boundariesPadding,this._options.boundariesElement),e=this.runModifiers(e,this._options.modifiers),"function"==typeof this.state.updateCallback&&this.state.updateCallback(e)},n.prototype.onCreate=function(e){return e(this),this},n.prototype.onUpdate=function(e){return this.state.updateCallback=e,this},n.prototype.parse=function(t){var n={tagName:"div",classNames:["popper"],attributes:[],parent:e.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},n,t);var i=e.document,r=i.createElement(t.tagName);if(s(r,t.classNames),l(r,t.attributes),"node"===t.contentType?r.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?r.innerHTML=t.content:r.textContent=t.content,t.arrowTagName){var o=i.createElement(t.arrowTagName);s(o,t.arrowClassNames),l(o,t.arrowAttributes),r.appendChild(o)}var a=t.parent.jquery?t.parent[0]:t.parent;if("string"==typeof a){if((a=i.querySelectorAll(t.parent)).length>1&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===a.length)throw"ERROR: the given `parent` doesn't exists!";a=a[0]}return a.length>1&&a instanceof Element==0&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),a=a[0]),a.appendChild(r),r;function s(e,t){t.forEach((function(t){e.classList.add(t)}))}function l(e,t){t.forEach((function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")}))}},n.prototype._getPosition=function(t,n){return l(n),this._options.forceAbsolute?"absolute":function t(n){return n!==e.document.body&&("fixed"===s(n,"position")||(n.parentNode?t(n.parentNode):n))}(n)?"fixed":"absolute"},n.prototype._getOffsets=function(e,t,n){n=n.split("-")[0];var r={};r.position=this.state.position;var o="fixed"===r.position,a=function(e,t,n){var i=d(e),r=d(t);if(n){var o=c(t);r.top+=o.scrollTop,r.bottom+=o.scrollTop,r.left+=o.scrollLeft,r.right+=o.scrollLeft}return{top:i.top-r.top,left:i.left-r.left,bottom:i.top-r.top+i.height,right:i.left-r.left+i.width,width:i.width,height:i.height}}(t,l(e),o),s=i(e);return-1!==["right","left"].indexOf(n)?(r.top=a.top+a.height/2-s.height/2,r.left="left"===n?a.left-s.width:a.right):(r.left=a.left+a.width/2-s.width/2,r.top="top"===n?a.top-s.height:a.bottom),r.width=s.width,r.height=s.height,{popper:r,reference:a}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),e.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=c(this._reference);t!==e.document.body&&t!==e.document.documentElement||(t=e),t.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=t}},n.prototype._removeEventListeners=function(){e.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},n.prototype._getBoundaries=function(t,n,i){var r,o,a={};if("window"===i){var s=e.document.body,u=e.document.documentElement;r=Math.max(s.scrollHeight,s.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),a={top:0,right:Math.max(s.scrollWidth,s.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),bottom:r,left:0}}else if("viewport"===i){var d=l(this._popper),f=c(this._popper),p=h(d),m="fixed"===t.offsets.popper.position?0:(o=f)==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):o.scrollTop,v="fixed"===t.offsets.popper.position?0:function(e){return e==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):e.scrollLeft}(f);a={top:0-(p.top-m),right:e.document.documentElement.clientWidth-(p.left-v),bottom:e.document.documentElement.clientHeight-(p.top-m),left:0-(p.left-v)}}else a=l(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:h(i);return a.left+=n,a.right-=n,a.top=a.top+n,a.bottom=a.bottom-n,a},n.prototype.runModifiers=function(e,t,n){var i=t.slice();return void 0!==n&&(i=this._options.modifiers.slice(0,a(this._options.modifiers,n))),i.forEach(function(t){var n;(n=t)&&"[object Function]"==={}.toString.call(n)&&(e=t.call(this,e))}.bind(this)),e},n.prototype.isModifierRequired=function(e,t){var n=a(this._options.modifiers,e);return!!this._options.modifiers.slice(0,n).filter((function(e){return e===t})).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(e){var t,n={position:e.offsets.popper.position},i=Math.round(e.offsets.popper.left),r=Math.round(e.offsets.popper.top);return this._options.gpuAcceleration&&(t=f("transform"))?(n[t]="translate3d("+i+"px, "+r+"px, 0)",n.top=0,n.left=0):(n.left=i,n.top=r),Object.assign(n,e.styles),u(this._popper,n),this._popper.setAttribute("x-placement",e.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&e.offsets.arrow&&u(e.arrowElement,e.offsets.arrow),e},n.prototype.modifiers.shift=function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets.reference,a=o(e.offsets.popper),s={y:{start:{top:r.top},end:{top:r.top+r.height-a.height}},x:{start:{left:r.left},end:{left:r.left+r.width-a.width}}},l=-1!==["bottom","top"].indexOf(n)?"x":"y";e.offsets.popper=Object.assign(a,s[l][i])}return e},n.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,n=o(e.offsets.popper),i={left:function(){var t=n.left;return n.left<e.boundaries.left&&(t=Math.max(n.left,e.boundaries.left)),{left:t}},right:function(){var t=n.left;return n.right>e.boundaries.right&&(t=Math.min(n.left,e.boundaries.right-n.width)),{left:t}},top:function(){var t=n.top;return n.top<e.boundaries.top&&(t=Math.max(n.top,e.boundaries.top)),{top:t}},bottom:function(){var t=n.top;return n.bottom>e.boundaries.bottom&&(t=Math.min(n.top,e.boundaries.bottom-n.height)),{top:t}}};return t.forEach((function(t){e.offsets.popper=Object.assign(n,i[t]())})),e},n.prototype.modifiers.keepTogether=function(e){var t=o(e.offsets.popper),n=e.offsets.reference,i=Math.floor;return t.right<i(n.left)&&(e.offsets.popper.left=i(n.left)-t.width),t.left>i(n.right)&&(e.offsets.popper.left=i(n.right)),t.bottom<i(n.top)&&(e.offsets.popper.top=i(n.top)-t.height),t.top>i(n.bottom)&&(e.offsets.popper.top=i(n.bottom)),e},n.prototype.modifiers.flip=function(e){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),e;if(e.flipped&&e.placement===e._originalPlacement)return e;var t=e.placement.split("-")[0],n=r(t),i=e.placement.split("-")[1]||"",a=[];return(a="flip"===this._options.flipBehavior?[t,n]:this._options.flipBehavior).forEach(function(s,l){if(t===s&&a.length!==l+1){t=e.placement.split("-")[0],n=r(t);var c=o(e.offsets.popper),u=-1!==["right","bottom"].indexOf(t);(u&&Math.floor(e.offsets.reference[t])>Math.floor(c[n])||!u&&Math.floor(e.offsets.reference[t])<Math.floor(c[n]))&&(e.flipped=!0,e.placement=a[l+1],i&&(e.placement+="-"+i),e.offsets.popper=this._getOffsets(this._popper,this._reference,e.placement).popper,e=this.runModifiers(e,this._options.modifiers,this._flip))}}.bind(this)),e},n.prototype.modifiers.offset=function(e){var t=this._options.offset,n=e.offsets.popper;return-1!==e.placement.indexOf("left")?n.top-=t:-1!==e.placement.indexOf("right")?n.top+=t:-1!==e.placement.indexOf("top")?n.left-=t:-1!==e.placement.indexOf("bottom")&&(n.left+=t),e},n.prototype.modifiers.arrow=function(e){var t=this._options.arrowElement,n=this._options.arrowOffset;if("string"==typeof t&&(t=this._popper.querySelector(t)),!t)return e;if(!this._popper.contains(t))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),e;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),e;var r={},a=e.placement.split("-")[0],s=o(e.offsets.popper),l=e.offsets.reference,c=-1!==["left","right"].indexOf(a),u=c?"height":"width",h=c?"top":"left",d=c?"left":"top",f=c?"bottom":"right",p=i(t)[u];l[f]-p<s[h]&&(e.offsets.popper[h]-=s[h]-(l[f]-p)),l[h]+p>s[f]&&(e.offsets.popper[h]+=l[h]+p-s[f]);var m=l[h]+(n||l[u]/2-p/2)-s[h];return m=Math.max(Math.min(s[u]-p-8,m),8),r[h]=m,r[d]="",e.offsets.arrow=r,e.arrowElement=t,e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i){i=Object(i);for(var r=Object.keys(i),o=0,a=r.length;o<a;o++){var s=r[o],l=Object.getOwnPropertyDescriptor(i,s);void 0!==l&&l.enumerable&&(t[s]=i[s])}}}return t}}),n})?i.call(t,n,t,e):i)||(e.exports=r)},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=97)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},97:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])};i._withStripped=!0;var r={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},o=n(0),a=Object(o.a)(r,i,[],!1,null,null,null);a.options.__file="packages/button/src/button.vue";var s=a.exports;s.install=function(e){e.component(s.name,s)};t.default=s}})},function(e,t,n){"use strict";n.r(t),function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function a(){n&&(n=!1,e()),i&&l()}function s(){o(a)}function l(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(s,t);r=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},h=g(0,0,0,0);function d(e){return parseFloat(e)||0}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function p(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var i=u(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=d(o)}return t}(i),o=r.left+r.right,a=r.top+r.bottom,s=d(i.width),l=d(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==t&&(s-=f(i,"left","right")+o),Math.round(l+a)!==n&&(l-=f(i,"top","bottom")+a)),!function(e){return e===u(e).document.documentElement}(e)){var c=Math.round(s+o)-t,p=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(p)&&(l-=p)}return g(r.left,r.top,s,l)}var m="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return i?m(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):p(e):h}function g(e,t,n,i){return{x:e,y:t,width:n,height:i}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,i,r,o,a,s,l,u=(i=(n=t).x,r=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),c(l,{x:i,y:r,width:o,height:a,top:r,right:i+o,bottom:a+r,left:i}),l);c(this,{target:e,contentRect:u})},x=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new n,_=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),i=new x(t,n,this);w.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){_.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var S=void 0!==r.ResizeObserver?r.ResizeObserver:_;t.default=S}.call(this,n(54))},function(e,t,n){"use strict";t.__esModule=!0;var i=n(52);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.beforeEnter=function(e){(0,i.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,i.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,i.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,i.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();t.default={name:"ElCollapseTransition",functional:!0,render:function(e,t){var n=t.children;return e("transition",{on:new r},n)}}},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isVNode=function(e){return null!==e&&"object"===(void 0===e?"undefined":i(e))&&(0,r.hasOwn)(e,"componentOptions")};var r=n(44)},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=131)}({131:function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(17),a=n.n(o),s=n(2),l=n(3),c=n(7),u=n.n(c),h={name:"ElTooltip",mixins:[r.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(l.generateId)(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=a()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var i=n.data=n.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(s.on)(this.referenceElm,"mouseenter",this.show),Object(s.on)(this.referenceElm,"mouseleave",this.hide),Object(s.on)(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(s.on)(this.referenceElm,"blur",this.handleBlur),Object(s.on)(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(s.addClass)(this.referenceElm,"focusing"):Object(s.removeClass)(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)e[n]&&e[n].tag&&(t=e[n]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(s.off)(e,"mouseenter",this.show),Object(s.off)(e,"mouseleave",this.hide),Object(s.off)(e,"focus",this.handleFocus),Object(s.off)(e,"blur",this.handleBlur),Object(s.off)(e,"click",this.removeFocusing))},install:function(e){e.component(h.name,h)}};t.default=h},17:function(e,t){e.exports=n(97)},2:function(e,t){e.exports=n(52)},3:function(e,t){e.exports=n(44)},5:function(e,t){e.exports=n(94)},7:function(e,t){e.exports=n(31)}})},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=99)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},99:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-button-group"},[this._t("default")],2)};i._withStripped=!0;var r={name:"ElButtonGroup"},o=n(0),a=Object(o.a)(r,i,[],!1,null,null,null);a.options.__file="packages/button/src/button-group.vue";var s=a.exports;s.install=function(e){e.component(s.name,s)};t.default=s}})},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=86)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},4:function(e,t){e.exports=n(61)},86:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[this._t("default")],2)};i._withStripped=!0;var r=n(4),o={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[n.n(r).a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},a=n(0),s=Object(a.a)(o,i,[],!1,null,null,null);s.options.__file="packages/checkbox/src/checkbox-group.vue";var l=s.exports;l.install=function(e){e.component(l.name,l)};t.default=l}})},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("instance & callback is required");var r=!1,o=function(){r||(r=!0,t&&t.apply(null,arguments))};i?e.$once("after-leave",o):e.$on("after-leave",o),setTimeout((function(){o()}),n+100)}},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=119)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},119:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?n("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])};i._withStripped=!0;var r={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){return-1*this.perimeter*(1-this.rate)/2+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"==typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"==typeof this.color?this.color(e):"string"==typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),n=0;n<t.length;n++)if(t[n].percentage>e)return t[n].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,n){return"string"==typeof e?{color:e,progress:(n+1)*t}:e}))}}},o=n(0),a=Object(o.a)(r,i,[],!1,null,null,null);a.options.__file="packages/progress/src/progress.vue";var s=a.exports;s.install=function(e){e.component(s.name,s)};t.default=s}})},function(e,t,n){var i=n(134),r=n(97);e.exports={throttle:i,debounce:r}},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=61)}([function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},,,function(e,t){e.exports=n(44)},function(e,t){e.exports=n(61)},function(e,t){e.exports=n(94)},function(e,t){e.exports=n(130)},,,,function(e,t){e.exports=n(132)},,function(e,t){e.exports=n(206)},,function(e,t){e.exports=n(135)},,function(e,t){e.exports=n(133)},function(e,t){e.exports=n(97)},,function(e,t){e.exports=n(93)},,function(e,t){e.exports=n(96)},function(e,t){e.exports=n(136)},,,,,,,,,function(e,t){e.exports=n(137)},,,function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)};i._withStripped=!0;var r=n(4),o=n.n(r),a=n(3),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[o.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===(void 0===e?"undefined":s(e))&&"object"===(void 0===t?"undefined":s(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(a.getValueByPath)(e,n)===Object(a.getValueByPath)(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(a.getValueByPath)(e,n)===Object(a.getValueByPath)(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple?t:[t],i=this.select.cachedOptions.indexOf(this),r=n.indexOf(this);i>-1&&r<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},c=n(0),u=Object(c.a)(l,i,[],!1,null,null,null);u.options.__file="packages/select/src/option.vue";t.a=u.exports},,,,function(e,t){e.exports=n(209)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(t){return e.debouncedOnInputChange(t)},keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],paste:function(t){return e.debouncedOnInputChange(t)},mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)};i._withStripped=!0;var r=n(4),o=n.n(r),a=n(22),s=n.n(a),l=n(6),c=n.n(l),u=n(10),h=n.n(u),d=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":this.$parent.multiple},this.popperClass],style:{minWidth:this.minWidth}},[this._t("default")],2)};d._withStripped=!0;var f=n(5),p={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[n.n(f).a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},m=n(0),v=Object(m.a)(p,d,[],!1,null,null,null);v.options.__file="packages/select/src/select-dropdown.vue";var g=v.exports,y=n(34),b=n(38),x=n.n(b),w=n(14),_=n.n(w),S=n(17),M=n.n(S),T=n(12),E=n.n(T),C=n(16),A=n(19),O=n(31),L=n.n(O),k=n(3),P=n(21),D={mixins:[o.a,c.a,s()("reference"),{data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"==typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}}],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(k.isIE)()&&!Object(k.isEdge)()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value;return this.clearable&&!this.selectDisabled&&this.inputHovering&&e},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"}},components:{ElInput:h.a,ElSelectMenu:g,ElOption:y.a,ElTag:x.a,ElScrollbar:_.a},directives:{Clickoutside:E.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,default:function(){return Object(A.t)("el.select.placeholder")}},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},placeholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(k.valueEquals)(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var i=n[n.length-1]||"";this.isOnComposition=!Object(P.isKorean)(i)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!=typeof this.filterMethod&&"function"!=typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"==typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"==typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");L()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(k.valueEquals)(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),i="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o];if(n?Object(k.getValueByPath)(a.value,this.valueKey)===Object(k.getValueByPath)(e,this.valueKey):a.value===e){t=a;break}}if(t)return t;var s={value:e,currentLabel:n||i||r?"":e};return this.multiple&&(s.hitState=!1),s},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,r=e.initialInputHeight||40;n.style.height=0===e.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,e.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(e.value),this.$emit("input",i),this.emitChange(i),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var i=this.valueKey,r=-1;return e.some((function(e,n){return Object(k.getValueByPath)(e,i)===Object(k.getValueByPath)(t,i)&&(r=n,!0)})),r}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(n,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var i=this.options[n];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=n;break}}else if(i.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(k.getValueByPath)(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.placeholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=M()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=M()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(C.addResizeListener)(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n=t.$el.querySelector("input");this.initialInputHeight=n.getBoundingClientRect().height||{medium:36,small:32,mini:28}[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(C.removeResizeListener)(this.$el,this.handleResize)}},I=Object(m.a)(D,i,[],!1,null,null,null);I.options.__file="packages/select/src/select.vue";var N=I.exports;N.install=function(e){e.component(N.name,N)};t.default=N}])},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=53)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},3:function(e,t){e.exports=n(44)},34:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)};i._withStripped=!0;var r=n(4),o=n.n(r),a=n(3),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[o.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===(void 0===e?"undefined":s(e))&&"object"===(void 0===t?"undefined":s(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(a.getValueByPath)(e,n)===Object(a.getValueByPath)(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(a.getValueByPath)(e,n)===Object(a.getValueByPath)(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple?t:[t],i=this.select.cachedOptions.indexOf(this),r=n.indexOf(this);i>-1&&r<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},c=n(0),u=Object(c.a)(l,i,[],!1,null,null,null);u.options.__file="packages/select/src/option.vue";t.a=u.exports},4:function(e,t){e.exports=n(61)},53:function(e,t,n){"use strict";n.r(t);var i=n(34);i.a.install=function(e){e.component(i.a.name,i.a)},t.default=i.a}})},function(e,t,n){e.exports=n(424)},function(e,t,n){"use strict";var i=n(425),r=n(426);function o(e){var t=0,n=0,i=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=10*t,r=10*n,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||r)&&e.deltaMode&&(1==e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:i,pixelY:r}}o.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},e.exports=o},function(e,t){var n,i,r,o,a,s,l,c,u,h,d,f,p,m,v,g=!1;function y(){if(!g){g=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),y=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(f=/\b(iPhone|iP[ao]d)/.exec(e),p=/\b(iP[ao]d)/.exec(e),h=/Android/i.exec(e),m=/FBAN\/\w+;/i.exec(e),v=/Mobile/i.exec(e),d=!!/Win64/.exec(e),t){(n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);s=b?parseFloat(b[1])+4:n,i=t[2]?parseFloat(t[2]):NaN,r=t[3]?parseFloat(t[3]):NaN,(o=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),a=t&&t[1]?parseFloat(t[1]):NaN):a=NaN}else n=i=r=a=o=NaN;if(y){if(y[1]){var x=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=!x||parseFloat(x[1].replace("_","."))}else l=!1;c=!!y[2],u=!!y[3]}else l=c=u=!1}}var b={ie:function(){return y()||n},ieCompatibilityMode:function(){return y()||s>n},ie64:function(){return b.ie()&&d},firefox:function(){return y()||i},opera:function(){return y()||r},webkit:function(){return y()||o},safari:function(){return b.webkit()},chrome:function(){return y()||a},windows:function(){return y()||c},osx:function(){return y()||l},linux:function(){return y()||u},iphone:function(){return y()||f},mobile:function(){return y()||f||p||h||v},nativeApp:function(){return y()||m},android:function(){return y()||h},ipad:function(){return y()||p}};e.exports=b},function(e,t,n){"use strict";var i,r=n(427);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,e.exports=function(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&i&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},function(e,t,n){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},function(e,t,n){"use strict";t.__esModule=!0;var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(138),a=(i=o)&&i.__esModule?i:{default:i};var s,l=l||{};l.Dialog=function(e,t,n){var i=this;if(this.dialogNode=e,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"==typeof t?this.focusAfterClosed=document.getElementById(t):"object"===(void 0===t?"undefined":r(t))?this.focusAfterClosed=t:this.focusAfterClosed=null,"string"==typeof n?this.focusFirst=document.getElementById(n):"object"===(void 0===n?"undefined":r(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():a.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,s=function(e){i.trapFocus(e)},this.addListeners()},l.Dialog.prototype.addListeners=function(){document.addEventListener("focus",s,!0)},l.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",s,!0)},l.Dialog.prototype.closeDialog=function(){var e=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){e.focusAfterClosed.focus()}))},l.Dialog.prototype.trapFocus=function(e){a.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(e.target)?this.lastFocus=e.target:(a.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&a.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},t.default=l.Dialog},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=114)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},10:function(e,t){e.exports=n(132)},114:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),n("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)};i._withStripped=!0;var r=n(10),o=n.n(r),a=n(22),s=n.n(a),l=n(30),c={name:"ElInputNumber",mixins:[s()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:l.a},components:{ElInput:o.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);t=Math.round(t/this.step)*i*this.step/i}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,n=this.getPrecision,i=this.precision,r=n(t);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"==typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),n=Math.pow(10,t);e=Math.round(e/this.step)*n*this.step/n}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),n=t.indexOf("."),i=0;return-1!==n&&(i=t.length-n-1),i},_increase:function(e,t){if("number"!=typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e+n*t)/n)},_decrease:function(e,t){if("number"!=typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e-n*t)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"==typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){this.$refs&&this.$refs.input&&this.$refs.input.$refs.input.setAttribute("aria-valuenow",this.currentValue)}},u=n(0),h=Object(u.a)(c,i,[],!1,null,null,null);h.options.__file="packages/input-number/src/input-number.vue";var d=h.exports;d.install=function(e){e.component(d.name,d)};t.default=d},2:function(e,t){e.exports=n(52)},22:function(e,t){e.exports=n(136)},30:function(e,t,n){"use strict";var i=n(2);t.a={bind:function(e,t,n){var r=null,o=void 0,a=function(){return n.context[t.expression].apply()},s=function(){Date.now()-o<100&&a(),clearInterval(r),r=null};Object(i.on)(e,"mousedown",(function(e){0===e.button&&(o=Date.now(),Object(i.once)(document,"mouseup",s),clearInterval(r),r=setInterval(a,100))}))}}}})},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=59)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},14:function(e,t){e.exports=n(135)},18:function(e,t){e.exports=n(207)},21:function(e,t){e.exports=n(96)},26:function(e,t){e.exports=n(208)},3:function(e,t){e.exports=n(44)},31:function(e,t){e.exports=n(137)},32:function(e,t){e.exports=n(138)},51:function(e,t){e.exports=n(210)},59:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:["el-cascader-panel",this.border&&"is-bordered"],on:{keydown:this.handleKeyDown}},this._l(this.menus,(function(e,n){return t("cascader-menu",{key:n,ref:"menu",refInFor:!0,attrs:{index:n,nodes:e}})})),1)};i._withStripped=!0;var r=n(26),o=n.n(r),a=n(14),s=n.n(a),l=n(18),c=n.n(l),u=n(51),h=n.n(u),d=n(3),f=function(e){return e.stopPropagation()},p={inject:["panel"],components:{ElCheckbox:c.a,ElRadio:h.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,n=this.node,i=this.isDisabled,r=this.config,o=r.multiple;!r.checkStrictly&&i||n.loading||(r.lazy&&!n.loaded?t.lazyLoad(n,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var i=!!t&&n.checked;e.handleMultiCheckChange(i)}})):t.handleExpand(n))},handleCheckChange:function(){var e=this.panel,t=this.value,n=this.node;e.handleCheckChange(t),e.handleExpand(n)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node;return(e[t.level-1]||{}).uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,n=this.isChecked,i=this.config,r=i.checkStrictly;return i.multiple?this.renderCheckbox(e):r?this.renderRadio(e):t&&n?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,n=this.isLeaf;return t.loading?this.renderLoadingIcon(e):n?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,n=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(r.nativeOn.click=f),e("el-checkbox",o()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:i}},r]))},renderRadio:function(e){var t=this.checkedValue,n=this.value,i=this.isDisabled;return Object(d.isEqual)(n,t)&&(n=t),e("el-radio",{attrs:{value:t,label:n,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:f}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,n=this.node,i=t.renderLabelFn;return e("span",{class:"el-cascader-node__label"},[(i?i({node:n,data:n.data}):null)||n.label])}},render:function(e){var t=this,n=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,a=this.isLeaf,s=this.isDisabled,l=this.config,c=this.nodeId,u=l.expandTrigger,h=l.checkStrictly,d=l.multiple,f=!h&&s,p={on:{}};return"click"===u?p.on.click=this.handleExpand:(p.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},p.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!a||s||h||d||(p.on.click=this.handleCheckChange),e("li",o()([{attrs:{role:"menuitem",id:c,"aria-expanded":n,tabindex:f?null:-1},class:{"el-cascader-node":!0,"is-selectable":h,"in-active-path":n,"in-checked-path":i,"is-active":r,"is-disabled":f}},p]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},m=n(0),v=Object(m.a)(p,void 0,void 0,!1,null,null,null);v.options.__file="packages/cascader-panel/src/cascader-node.vue";var g=v.exports,y=n(6),b={name:"ElCascaderMenu",mixins:[n.n(y).a],inject:["panel"],components:{ElScrollbar:s.a,CascaderNode:g},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(d.generateId)()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,n=this.hoverTimer,i=this.$refs.hoverZone;if(t&&i)if(t.contains(e.target)){clearTimeout(n);var r=this.$el.getBoundingClientRect().left,o=e.clientX-r,a=this.$el,s=a.offsetWidth,l=a.offsetHeight,c=t.offsetTop,u=c+t.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+c+" L"+s+" 0 V"+c+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+u+" L"+s+" "+l+" V"+u+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,n=this.panel.isHoverMenu,i={on:{}};n&&(i.on.expand=this.handleExpand);var r=this.nodes.map((function(n,r){var a=n.hasChildren;return e("cascader-node",o()([{key:n.uid,attrs:{node:n,"node-id":t+"-"+r,"aria-haspopup":a,"aria-owns":a?t:null}},i]))}));return[].concat(r,[n?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,n=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",o()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},i]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},x=Object(m.a)(b,void 0,void 0,!1,null,null,null);x.options.__file="packages/cascader-panel/src/cascader-menu.vue";var w=x.exports,_=n(21),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var M=0,T=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.config=n,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=M++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,n=e.label;this.value=this.data[t],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,n=this.config,i=n.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(i){return new e(i,n,t)}))},e.prototype.calculatePathNodes=function(){for(var e=[this],t=this.parent;t;)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(d.isEqual)(e,t)})):Object(d.isEqual)(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="onParent"+Object(d.capitalize)(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(n)),t[r]&&t[r].apply(t,n))}))},e.prototype.emit=function(e){var t=this.parent,n="onChild"+Object(d.capitalize)(e);if(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t[n]&&t[n].apply(t,r),t.emit.apply(t,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children.filter((function(e){return!e.isDisabled})),t=!!e.length&&e.every((function(e){return e.checked}));this.setCheckState(t)},e.prototype.setCheckState=function(e){var t=this.children.length,n=this.children.reduce((function(e,t){return e+(t.checked?1:t.indeterminate?.5:0)}),0);this.checked=e,this.indeterminate=n!==t&&n>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),n=this.isSameNode(e,t);this.doCheck(n)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},S(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,n=this.config,i=n.disabled,r=n.checkStrictly;return e[i]||!r&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,n=this.hasChildren,i=this.children,r=this.config,o=r.lazy,a=r.leaf;if(o){var s=Object(_.isDef)(e[a])?e[a]:!!t&&!i.length;return this.hasChildren=!s,s}return!n}}]),e}();var E=function e(t,n){return t.reduce((function(t,i){return i.isLeaf?t.push(i):(!n&&t.push(i),t=t.concat(e(i.children,n))),t}),[])},C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=n,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(d.coerceTruthyValueToArray)(e),this.nodes=e.map((function(e){return new T(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var n=new T(e,this.config,t);(t?t.children:this.nodes).push(n)},e.prototype.appendNodes=function(e,t){var n=this;(e=Object(d.coerceTruthyValueToArray)(e)).forEach((function(e){return n.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.leafNodes:this.flattedNodes;return t?n:E(this.nodes,e)},e.prototype.getNodeByValue=function(e){if(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(d.valueEquals)(t.path,e)||t.value===e}));return t&&t.length?t[0]:null}return null},e}(),A=n(9),O=n.n(A),L=n(32),k=n.n(L),P=n(31),D=n.n(P),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N=k.a.keys,F={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:d.noop,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},R=function(e){return!e.getAttribute("aria-owns")},B=function(e,t){var n=e.parentNode;if(n){var i=n.querySelectorAll('.el-cascader-node[tabindex="-1"]');return i[Array.prototype.indexOf.call(i,e)+t]||null}return null},j=function(e,t){if(e){var n=e.id.split("-");return Number(n[n.length-2])}},z=function(e){e&&(e.focus(),!R(e)&&e.click())},U={name:"ElCascaderPanel",components:{CascaderMenu:w},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return O()(I({},F),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(d.isEqual)(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){Object(d.isEmpty)(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(d.isEmpty)(t)?this.lazyLoad():(this.store=new C(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(d.isEqual)(e,t)||(this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this;this.getFlattedNodes(this.leafOnly).forEach((function(t){t.syncCheckState(e.checkedValue)}))},syncActivePath:function(){var e=this,t=this.store,n=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(d.isEmpty)(i))if(Object(d.isEmpty)(r))this.activePath=[],this.menus=[t.getNodes()];else{var o=n?r[0]:r,a=((this.getNodeByValue(o)||{}).pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var s=i.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(s)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,n=this.multiple?Object(d.coerceTruthyValueToArray)(t):[t];this.checkedNodePaths=n.map((function(t){var n=e.getNodeByValue(t);return n?n.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target;switch(e.keyCode){case N.up:var n=B(t,-1);z(n);break;case N.down:var i=B(t,1);z(i);break;case N.left:var r=this.$refs.menu[j(t)-1];if(r){var o=r.$el.querySelector('.el-cascader-node[aria-expanded="true"]');z(o)}break;case N.right:var a=this.$refs.menu[j(t)+1];if(a){var s=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');z(s)}break;case N.enter:!function(e){if(e){var t=e.querySelector("input");t?t.click():R(e)&&e.click()}}(t);break;case N.esc:case N.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var n=this.activePath,i=e.level,r=n.slice(0,i-1),o=this.menus.slice(0,i);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!t){var a=r.map((function(e){return e.getValue()})),s=n.map((function(e){return e.getValue()}));Object(d.valueEquals)(a,s)||(this.$emit("active-item-change",a),this.$emit("expand-change",a))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var n=this,i=this.config;e||(e=e||{root:!0,level:0},this.store=new C([],i),this.menus=[this.store.getNodes()]),e.loading=!0;i.lazyLoad(e,(function(i){var r=e.root?null:e;if(i&&i.length&&n.store.appendNodes(i,r),e.loading=!1,e.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],a=n.config.value,s=n.config.leaf;if(Array.isArray(i)&&i.filter((function(e){return e[a]===o})).length>0){var l=n.store.getNodeByValue(o);l.data[s]||n.lazyLoad(l,(function(){n.handleExpand(l)})),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}t&&t(i)}))},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){this.$isServer||(this.$refs.menu||[]).forEach((function(e){var t=e.$el;if(t){var n=t.querySelector(".el-scrollbar__wrap"),i=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");D()(n,i)}}))},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue;return this.multiple?this.getFlattedNodes(e).filter((function(e){return e.checked})):Object(d.isEmpty)(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,n=e.multiple,i=e.emitPath;n?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},V=Object(m.a)(U,i,[],!1,null,null,null);V.options.__file="packages/cascader-panel/src/cascader-panel.vue";var G=V.exports;G.install=function(e){e.component(G.name,G)};t.default=G},6:function(e,t){e.exports=n(130)},9:function(e,t){e.exports=n(95)}})},function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=74)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},2:function(e,t){e.exports=n(52)},3:function(e,t){e.exports=n(44)},5:function(e,t){e.exports=n(94)},7:function(e,t){e.exports=n(31)},74:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),e._t("reference")],2)};i._withStripped=!0;var r=n(5),o=n.n(r),a=n(2),s=n(3),l={name:"ElPopover",mixins:[o.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(s.generateId)()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$slots.reference&&this.$slots.reference[0]&&(t=this.referenceElm=this.$slots.reference[0].elm),t&&(Object(a.addClass)(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a.on)(t,"focusin",(function(){e.handleFocus();var n=t.__vue__;n&&"function"==typeof n.focus&&n.focus()})),Object(a.on)(n,"focusin",this.handleFocus),Object(a.on)(t,"focusout",this.handleBlur),Object(a.on)(n,"focusout",this.handleBlur)),Object(a.on)(t,"keydown",this.handleKeydown),Object(a.on)(t,"click",this.handleClick)),"click"===this.trigger?(Object(a.on)(t,"click",this.doToggle),Object(a.on)(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a.on)(t,"mouseenter",this.handleMouseEnter),Object(a.on)(n,"mouseenter",this.handleMouseEnter),Object(a.on)(t,"mouseleave",this.handleMouseLeave),Object(a.on)(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(a.on)(t,"focusin",this.doShow),Object(a.on)(t,"focusout",this.doClose)):(Object(a.on)(t,"mousedown",this.doShow),Object(a.on)(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a.addClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a.removeClass)(this.referenceElm,"focusing")},handleBlur:function(){Object(a.removeClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$slots.reference&&this.$slots.reference[0]&&(t=this.referenceElm=this.$slots.reference[0].elm),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&n&&!n.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(a.off)(e,"click",this.doToggle),Object(a.off)(e,"mouseup",this.doClose),Object(a.off)(e,"mousedown",this.doShow),Object(a.off)(e,"focusin",this.doShow),Object(a.off)(e,"focusout",this.doClose),Object(a.off)(e,"mousedown",this.doShow),Object(a.off)(e,"mouseup",this.doClose),Object(a.off)(e,"mouseleave",this.handleMouseLeave),Object(a.off)(e,"mouseenter",this.handleMouseEnter),Object(a.off)(document,"click",this.handleDocumentClick)}},c=n(0),u=Object(c.a)(l,i,[],!1,null,null,null);u.options.__file="packages/popover/src/main.vue";var h=u.exports,d=function(e,t,n){var i=t.expression?t.value:t.arg,r=n.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},f={bind:function(e,t,n){d(e,t,n)},inserted:function(e,t,n){d(e,t,n)}},p=n(7);n.n(p).a.directive("popover",f),h.install=function(e){e.directive("popover",f),e.component(h.name,h)},h.directive=f;t.default=h}})},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t);var i=n(104),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var a=n(149),s=n(30);var l=function(e){n(434)},c=Object(s.a)(r.a,a.a,a.b,!1,l,"data-v-bdfb25b2",null);c.options.__file="demo\\index.vue",t.default=c.exports},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";var i=o(n(24)),r=o(n(40));function o(e){return e&&e.__esModule?e:{default:e}}var a=["dec.json","jsonWorker"];r.default.interceptors.request.use((function(e){if(e.url.indexOf("v2x")>0){var t=window.localStorage.getItem("v2x3DToken");t&&(e.headers.Authorization="Bearer "+JSON.parse(t).token)}return e})),r.default.interceptors.response.use((function(e){return e.data&&e.data.error&&-999!==e.data.code?(Vue.prototype.$message.error(e.data.error),i.default.reject(new Error(e.data.error.message))):!e.data||a.some((function(t){return e.config.url.indexOf(t)>-1}))?e:e.data}),(function(e){if(e.response)return i.default.reject(e);if('"ECONNABORTED"'===e.code){console.warn("接口超时",e.config.url);var t=e.config;return t&&t.retry?(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry?i.default.reject(e):(t.__retryCount+=1,new i.default((function(e){setTimeout((function(){e()}),t.retryDelay||1)})).then((function(){return(0,r.default)(t)})))):i.default.reject(e)}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(31)),r=o(n(437));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.prototype.push;r.default.prototype.push=function(e){return a.call(this,e).catch((function(e){return e}))},i.default.use(r.default);var s=new r.default({routes:[{path:"/highSpeed",component:function(){return n.e(2).then(n.bind(null,446))},props:function(e){return{}}},{path:"/perception",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,447))},props:function(e){return{}}},{path:"/replay",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,448))},props:function(e){return{}}},{path:"/onlyPerception",component:function(){return n.e(6).then(n.bind(null,449))},props:function(e){return{}}},{path:"/cloud",component:function(){return n.e(3).then(n.bind(null,450))},props:function(e){return{}}},{path:"/webrtc",component:function(){return n.e(4).then(n.bind(null,451))},props:function(e){return{}}},{path:"/",component:function(){return n.e(5).then(n.bind(null,452))},props:function(e){return{}}}]});t.default=s},function(e,t,n){"use strict";function i(e,t){for(var n in t)e[n]=t[n];return e}n.r(t);var r=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},a=/%2C/g,s=function(e){return encodeURIComponent(e).replace(r,o).replace(a,",")};function l(e){try{return decodeURIComponent(e)}catch(e){0}return e}var c=function(e){return null==e||"object"==typeof e?e:String(e)};function u(e){var t={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),i=l(n.shift()),r=n.length>0?l(n.join("=")):null;void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t}function h(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return s(t);if(Array.isArray(n)){var i=[];return n.forEach((function(e){void 0!==e&&(null===e?i.push(s(t)):i.push(s(t)+"="+s(e)))})),i.join("&")}return s(t)+"="+s(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var d=/\/?$/;function f(e,t,n,i){var r=i&&i.options.stringifyQuery,o=t.query||{};try{o=p(o)}catch(e){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:g(t,r),matched:e?v(e):[]};return n&&(a.redirectedFrom=g(n,r)),Object.freeze(a)}function p(e){if(Array.isArray(e))return e.map(p);if(e&&"object"==typeof e){var t={};for(var n in e)t[n]=p(e[n]);return t}return e}var m=f(null,{path:"/"});function v(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}function g(e,t){var n=e.path,i=e.query;void 0===i&&(i={});var r=e.hash;return void 0===r&&(r=""),(n||"/")+(t||h)(i)+r}function y(e,t,n){return t===m?e===t:!!t&&(e.path&&t.path?e.path.replace(d,"")===t.path.replace(d,"")&&(n||e.hash===t.hash&&b(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(n||e.hash===t.hash&&b(e.query,t.query)&&b(e.params,t.params))))}function b(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e).sort(),i=Object.keys(t).sort();return n.length===i.length&&n.every((function(n,r){var o=e[n];if(i[r]!==n)return!1;var a=t[n];return null==o||null==a?o===a:"object"==typeof o&&"object"==typeof a?b(o,a):String(o)===String(a)}))}function x(e){for(var t=0;t<e.matched.length;t++){var n=e.matched[t];for(var i in n.instances){var r=n.instances[i],o=n.enteredCbs[i];if(r&&o){delete n.enteredCbs[i];for(var a=0;a<o.length;a++)r._isBeingDestroyed||o[a](r)}}}}var w={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,o=t.parent,a=t.data;a.routerView=!0;for(var s=o.$createElement,l=n.name,c=o.$route,u=o._routerViewCache||(o._routerViewCache={}),h=0,d=!1;o&&o._routerRoot!==o;){var f=o.$vnode?o.$vnode.data:{};f.routerView&&h++,f.keepAlive&&o._directInactive&&o._inactive&&(d=!0),o=o.$parent}if(a.routerViewDepth=h,d){var p=u[l],m=p&&p.component;return m?(p.configProps&&_(m,a,p.route,p.configProps),s(m,a,r)):s()}var v=c.matched[h],g=v&&v.components[l];if(!v||!g)return u[l]=null,s();u[l]={component:g},a.registerRouteInstance=function(e,t){var n=v.instances[l];(t&&n!==e||!t&&n===e)&&(v.instances[l]=t)},(a.hook||(a.hook={})).prepatch=function(e,t){v.instances[l]=t.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==v.instances[l]&&(v.instances[l]=e.componentInstance),x(c)};var y=v.props&&v.props[l];return y&&(i(u[l],{route:c,configProps:y}),_(g,a,c,y)),s(g,a,r)}};function _(e,t,n,r){var o=t.props=function(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}(n,r);if(o){o=t.props=i({},o);var a=t.attrs=t.attrs||{};for(var s in o)e.props&&s in e.props||(a[s]=o[s],delete o[s])}}function S(e,t,n){var i=e.charAt(0);if("/"===i)return e;if("?"===i||"#"===i)return t+e;var r=t.split("/");n&&r[r.length-1]||r.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?r.pop():"."!==s&&r.push(s)}return""!==r[0]&&r.unshift(""),r.join("/")}function M(e){return e.replace(/\/\//g,"/")}var T=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},E=z,C=P,A=function(e,t){return I(P(e,t),t)},O=I,L=j,k=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function P(e,t){for(var n,i=[],r=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=k.exec(e));){var l=n[0],c=n[1],u=n.index;if(a+=e.slice(o,u),o=u+l.length,c)a+=c[1];else{var h=e[o],d=n[2],f=n[3],p=n[4],m=n[5],v=n[6],g=n[7];a&&(i.push(a),a="");var y=null!=d&&null!=h&&h!==d,b="+"===v||"*"===v,x="?"===v||"*"===v,w=n[2]||s,_=p||m;i.push({name:f||r++,prefix:d||"",delimiter:w,optional:x,repeat:b,partial:y,asterisk:!!g,pattern:_?F(_):g?".*":"[^"+N(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&i.push(a),i}function D(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function I(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",B(t)));return function(t,i){for(var r="",o=t||{},a=(i||{}).pretty?D:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,u=o[l.name];if(null==u){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(T(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(c=a(u[h]),!n[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===h?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(u),!n[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function N(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function F(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function R(e,t){return e.keys=t,e}function B(e){return e&&e.sensitive?"":"i"}function j(e,t,n){T(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,r=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=N(s);else{var l=N(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+l+c+")*"),o+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=N(n.delimiter||"/"),h=o.slice(-u.length)===u;return i||(o=(h?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=r?"$":i&&h?"":"(?="+u+"|$)",R(new RegExp("^"+o,B(n)),t)}function z(e,t,n){return T(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return R(e,t)}(e,t):T(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(z(e[r],t,n).source);return R(new RegExp("(?:"+i.join("|")+")",B(n)),t)}(e,t,n):function(e,t,n){return j(P(e,n),t,n)}(e,t,n)}E.parse=C,E.compile=A,E.tokensToFunction=O,E.tokensToRegExp=L;var U=Object.create(null);function V(e,t,n){t=t||{};try{var i=U[e]||(U[e]=E.compile(e));return"string"==typeof t.pathMatch&&(t[0]=t.pathMatch),i(t,{pretty:!0})}catch(e){return""}finally{delete t[0]}}function G(e,t,n,r){var o="string"==typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){var a=(o=i({},e)).params;return a&&"object"==typeof a&&(o.params=i({},a)),o}if(!o.path&&o.params&&t){(o=i({},o))._normalized=!0;var s=i(i({},t.params),o.params);if(t.name)o.name=t.name,o.params=s;else if(t.matched.length){var l=t.matched[t.matched.length-1].path;o.path=V(l,s,t.path)}else 0;return o}var h=function(e){var t="",n="",i=e.indexOf("#");i>=0&&(t=e.slice(i),e=e.slice(0,i));var r=e.indexOf("?");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{path:e,query:n,hash:t}}(o.path||""),d=t&&t.path||"/",f=h.path?S(h.path,d,n||o.append):d,p=function(e,t,n){void 0===t&&(t={});var i,r=n||u;try{i=r(e||"")}catch(e){i={}}for(var o in t){var a=t[o];i[o]=Array.isArray(a)?a.map(c):c(a)}return i}(h.query,o.query,r&&r.options.parseQuery),m=o.hash||h.hash;return m&&"#"!==m.charAt(0)&&(m="#"+m),{_normalized:!0,path:f,query:p,hash:m}}var H,W=function(){},q={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,o=n.resolve(this.to,r,this.append),a=o.location,s=o.route,l=o.href,c={},u=n.options.linkActiveClass,h=n.options.linkExactActiveClass,p=null==u?"router-link-active":u,m=null==h?"router-link-exact-active":h,v=null==this.activeClass?p:this.activeClass,g=null==this.exactActiveClass?m:this.exactActiveClass,b=s.redirectedFrom?f(null,G(s.redirectedFrom),null,n):s;c[g]=y(r,b,this.exactPath),c[v]=this.exact||this.exactPath?c[g]:function(e,t){return 0===e.path.replace(d,"/").indexOf(t.path.replace(d,"/"))&&(!t.hash||e.hash===t.hash)&&function(e,t){for(var n in t)if(!(n in e))return!1;return!0}(e.query,t.query)}(r,b);var x=c[g]?this.ariaCurrentValue:null,w=function(e){Y(e)&&(t.replace?n.replace(a,W):n.push(a,W))},_={click:Y};Array.isArray(this.event)?this.event.forEach((function(e){_[e]=w})):_[this.event]=w;var S={class:c},M=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:l,route:s,navigate:w,isActive:c[v],isExactActive:c[g]});if(M){if(1===M.length)return M[0];if(M.length>1||!M.length)return 0===M.length?e():e("span",{},M)}if("a"===this.tag)S.on=_,S.attrs={href:l,"aria-current":x};else{var T=function e(t){var n;if(t)for(var i=0;i<t.length;i++){if("a"===(n=t[i]).tag)return n;if(n.children&&(n=e(n.children)))return n}}(this.$slots.default);if(T){T.isStatic=!1;var E=T.data=i({},T.data);for(var C in E.on=E.on||{},E.on){var A=E.on[C];C in _&&(E.on[C]=Array.isArray(A)?A:[A])}for(var O in _)O in E.on?E.on[O].push(_[O]):E.on[O]=w;var L=T.data.attrs=i({},T.data.attrs);L.href=l,L["aria-current"]=x}else S.on=_}return e(this.tag,S,this.$slots.default)}};function Y(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}var $="undefined"!=typeof window;function X(e,t,n,i,r){var o=t||[],a=n||Object.create(null),s=i||Object.create(null);e.forEach((function(e){!function e(t,n,i,r,o,a){var s=r.path,l=r.name;0;var c=r.pathToRegexpOptions||{},u=function(e,t,n){n||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==t)return e;return M(t.path+"/"+e)}(s,o,c.strict);"boolean"==typeof r.caseSensitive&&(c.sensitive=r.caseSensitive);var h={path:u,regex:Q(u,c),components:r.components||{default:r.component},alias:r.alias?"string"==typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:l,parent:o,matchAs:a,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};r.children&&r.children.forEach((function(r){var o=a?M(a+"/"+r.path):void 0;e(t,n,i,r,h,o)}));n[h.path]||(t.push(h.path),n[h.path]=h);if(void 0!==r.alias)for(var d=Array.isArray(r.alias)?r.alias:[r.alias],f=0;f<d.length;++f){0;var p={path:d[f],children:r.children};e(t,n,i,p,o,h.path||"/")}l&&(i[l]||(i[l]=h))}(o,a,s,e,r)}));for(var l=0,c=o.length;l<c;l++)"*"===o[l]&&(o.push(o.splice(l,1)[0]),c--,l--);return{pathList:o,pathMap:a,nameMap:s}}function Q(e,t){return E(e,[],t)}function K(e,t){var n=X(e),i=n.pathList,r=n.pathMap,o=n.nameMap;function a(e,n,a){var s=G(e,n,!1,t),c=s.name;if(c){var u=o[c];if(!u)return l(null,s);var h=u.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof s.params&&(s.params={}),n&&"object"==typeof n.params)for(var d in n.params)!(d in s.params)&&h.indexOf(d)>-1&&(s.params[d]=n.params[d]);return s.path=V(u.path,s.params),l(u,s,a)}if(s.path){s.params={};for(var f=0;f<i.length;f++){var p=i[f],m=r[p];if(J(m.regex,s.path,s.params))return l(m,s,a)}}return l(null,s)}function s(e,n){var i=e.redirect,r="function"==typeof i?i(f(e,n,null,t)):i;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return l(null,n);var s=r,c=s.name,u=s.path,h=n.query,d=n.hash,p=n.params;if(h=s.hasOwnProperty("query")?s.query:h,d=s.hasOwnProperty("hash")?s.hash:d,p=s.hasOwnProperty("params")?s.params:p,c){o[c];return a({_normalized:!0,name:c,query:h,hash:d,params:p},void 0,n)}if(u){var m=function(e,t){return S(e,t.parent?t.parent.path:"/",!0)}(u,e);return a({_normalized:!0,path:V(m,p),query:h,hash:d},void 0,n)}return l(null,n)}function l(e,n,i){return e&&e.redirect?s(e,i||n):e&&e.matchAs?function(e,t,n){var i=a({_normalized:!0,path:V(n,t.params)});if(i){var r=i.matched,o=r[r.length-1];return t.params=i.params,l(o,t)}return l(null,t)}(0,n,e.matchAs):f(e,n,i,t)}return{match:a,addRoute:function(e,t){var n="object"!=typeof e?o[e]:void 0;X([t||e],i,r,o,n),n&&n.alias.length&&X(n.alias.map((function(e){return{path:e,children:[t]}})),i,r,o,n)},getRoutes:function(){return i.map((function(e){return r[e]}))},addRoutes:function(e){X(e,i,r,o)}}}function J(e,t,n){var i=t.match(e);if(!i)return!1;if(!n)return!0;for(var r=1,o=i.length;r<o;++r){var a=e.keys[r-1];a&&(n[a.name||"pathMatch"]="string"==typeof i[r]?l(i[r]):i[r])}return!0}var Z=$&&window.performance&&window.performance.now?window.performance:Date;function ee(){return Z.now().toFixed(3)}var te=ee();function ne(){return te}function ie(e){return te=e}var re=Object.create(null);function oe(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=i({},window.history.state);return n.key=ne(),window.history.replaceState(n,"",t),window.addEventListener("popstate",le),function(){window.removeEventListener("popstate",le)}}function ae(e,t,n,i){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var o=function(){var e=ne();if(e)return re[e]}(),a=r.call(e,t,n,i?o:null);a&&("function"==typeof a.then?a.then((function(e){fe(e,o)})).catch((function(e){0})):fe(a,o))}))}}function se(){var e=ne();e&&(re[e]={x:window.pageXOffset,y:window.pageYOffset})}function le(e){se(),e.state&&e.state.key&&ie(e.state.key)}function ce(e){return he(e.x)||he(e.y)}function ue(e){return{x:he(e.x)?e.x:window.pageXOffset,y:he(e.y)?e.y:window.pageYOffset}}function he(e){return"number"==typeof e}var de=/^#\d/;function fe(e,t){var n,i="object"==typeof e;if(i&&"string"==typeof e.selector){var r=de.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(r){var o=e.offset&&"object"==typeof e.offset?e.offset:{};t=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-n.left-t.x,y:i.top-n.top-t.y}}(r,o={x:he((n=o).x)?n.x:0,y:he(n.y)?n.y:0})}else ce(e)&&(t=ue(e))}else i&&ce(e)&&(t=ue(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var pe,me=$&&((-1===(pe=window.navigator.userAgent).indexOf("Android 2.")&&-1===pe.indexOf("Android 4.0")||-1===pe.indexOf("Mobile Safari")||-1!==pe.indexOf("Chrome")||-1!==pe.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function ve(e,t){se();var n=window.history;try{if(t){var r=i({},n.state);r.key=ne(),n.replaceState(r,"",e)}else n.pushState({key:ie(ee())},"",e)}catch(n){window.location[t?"replace":"assign"](e)}}function ge(e){ve(e,!0)}function ye(e,t,n){var i=function(r){r>=e.length?n():e[r]?t(e[r],(function(){i(r+1)})):i(r+1)};i(0)}var be={redirected:2,aborted:4,cancelled:8,duplicated:16};function xe(e,t){return _e(e,t,be.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var t={};return Se.forEach((function(n){n in e&&(t[n]=e[n])})),JSON.stringify(t,null,2)}(t)+'" via a navigation guard.')}function we(e,t){return _e(e,t,be.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function _e(e,t,n,i){var r=new Error(i);return r._isRouter=!0,r.from=e,r.to=t,r.type=n,r}var Se=["params","query","hash"];function Me(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Te(e,t){return Me(e)&&e._isRouter&&(null==t||e.type===t)}function Ee(e){return function(t,n,i){var r=!1,o=0,a=null;Ce(e,(function(e,t,n,s){if("function"==typeof e&&void 0===e.cid){r=!0,o++;var l,c=Le((function(t){var r;((r=t).__esModule||Oe&&"Module"===r[Symbol.toStringTag])&&(t=t.default),e.resolved="function"==typeof t?t:H.extend(t),n.components[s]=t,--o<=0&&i()})),u=Le((function(e){var t="Failed to resolve async component "+s+": "+e;a||(a=Me(e)?e:new Error(t),i(a))}));try{l=e(c,u)}catch(e){u(e)}if(l)if("function"==typeof l.then)l.then(c,u);else{var h=l.component;h&&"function"==typeof h.then&&h.then(c,u)}}})),r||i()}}function Ce(e,t){return Ae(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Ae(e){return Array.prototype.concat.apply([],e)}var Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Le(e){var t=!1;return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(!t)return t=!0,e.apply(this,n)}}var ke=function(e,t){this.router=e,this.base=function(e){if(!e)if($){var t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(t),this.current=m,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Pe(e,t,n,i){var r=Ce(e,(function(e,i,r,o){var a=function(e,t){"function"!=typeof e&&(e=H.extend(e));return e.options[t]}(e,t);if(a)return Array.isArray(a)?a.map((function(e){return n(e,i,r,o)})):n(a,i,r,o)}));return Ae(i?r.reverse():r)}function De(e,t){if(t)return function(){return e.apply(t,arguments)}}ke.prototype.listen=function(e){this.cb=e},ke.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},ke.prototype.onError=function(e){this.errorCbs.push(e)},ke.prototype.transitionTo=function(e,t,n){var i,r=this;try{i=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(t){t(e)})),e}var o=this.current;this.confirmTransition(i,(function(){r.updateRoute(i),t&&t(i),r.ensureURL(),r.router.afterHooks.forEach((function(e){e&&e(i,o)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!r.ready&&(Te(e,be.redirected)&&o===m||(r.ready=!0,r.readyErrorCbs.forEach((function(t){t(e)}))))}))},ke.prototype.confirmTransition=function(e,t,n){var i=this,r=this.current;this.pending=e;var o,a,s=function(e){!Te(e)&&Me(e)&&(i.errorCbs.length?i.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},l=e.matched.length-1,c=r.matched.length-1;if(y(e,r)&&l===c&&e.matched[l]===r.matched[c])return this.ensureURL(),s(((a=_e(o=r,e,be.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",a));var u=function(e,t){var n,i=Math.max(e.length,t.length);for(n=0;n<i&&e[n]===t[n];n++);return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}(this.current.matched,e.matched),h=u.updated,d=u.deactivated,f=u.activated,p=[].concat(function(e){return Pe(e,"beforeRouteLeave",De,!0)}(d),this.router.beforeHooks,function(e){return Pe(e,"beforeRouteUpdate",De)}(h),f.map((function(e){return e.beforeEnter})),Ee(f)),m=function(t,n){if(i.pending!==e)return s(we(r,e));try{t(e,r,(function(t){!1===t?(i.ensureURL(!0),s(function(e,t){return _e(e,t,be.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}(r,e))):Me(t)?(i.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(xe(r,e)),"object"==typeof t&&t.replace?i.replace(t):i.push(t)):n(t)}))}catch(e){s(e)}};ye(p,m,(function(){ye(function(e){return Pe(e,"beforeRouteEnter",(function(e,t,n,i){return function(e,t,n){return function(i,r,o){return e(i,r,(function(e){"function"==typeof e&&(t.enteredCbs[n]||(t.enteredCbs[n]=[]),t.enteredCbs[n].push(e)),o(e)}))}}(e,n,i)}))}(f).concat(i.router.resolveHooks),m,(function(){if(i.pending!==e)return s(we(r,e));i.pending=null,t(e),i.router.app&&i.router.app.$nextTick((function(){x(e)}))}))}))},ke.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},ke.prototype.setupListeners=function(){},ke.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=m,this.pending=null};var Ie=function(e){function t(t,n){e.call(this,t,n),this._startLocation=Ne(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,i=me&&n;i&&this.listeners.push(oe());var r=function(){var n=e.current,r=Ne(e.base);e.current===m&&r===e._startLocation||e.transitionTo(r,(function(e){i&&ae(t,e,n,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){ve(M(i.base+e.fullPath)),ae(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){ge(M(i.base+e.fullPath)),ae(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(Ne(this.base)!==this.current.fullPath){var t=M(this.base+this.current.fullPath);e?ve(t):ge(t)}},t.prototype.getCurrentLocation=function(){return Ne(this.base)},t}(ke);function Ne(e){var t=window.location.pathname,n=t.toLowerCase(),i=e.toLowerCase();return!e||n!==i&&0!==n.indexOf(M(i+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var Fe=function(e){function t(t,n,i){e.call(this,t,n),i&&function(e){var t=Ne(e);if(!/^\/#/.test(t))return window.location.replace(M(e+"/#"+t)),!0}(this.base)||Re()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router.options.scrollBehavior,n=me&&t;n&&this.listeners.push(oe());var i=function(){var t=e.current;Re()&&e.transitionTo(Be(),(function(i){n&&ae(e.router,i,t,!0),me||Ue(i.fullPath)}))},r=me?"popstate":"hashchange";window.addEventListener(r,i),this.listeners.push((function(){window.removeEventListener(r,i)}))}},t.prototype.push=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){ze(e.fullPath),ae(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){Ue(e.fullPath),ae(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;Be()!==t&&(e?ze(t):Ue(t))},t.prototype.getCurrentLocation=function(){return Be()},t}(ke);function Re(){var e=Be();return"/"===e.charAt(0)||(Ue("/"+e),!1)}function Be(){var e=window.location.href,t=e.indexOf("#");return t<0?"":e=e.slice(t+1)}function je(e){var t=window.location.href,n=t.indexOf("#");return(n>=0?t.slice(0,n):t)+"#"+e}function ze(e){me?ve(je(e)):window.location.hash=e}function Ue(e){me?ge(je(e)):window.location.replace(je(e))}var Ve=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index+1).concat(e),i.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,(function(){var e=t.current;t.index=n,t.updateRoute(i),t.router.afterHooks.forEach((function(t){t&&t(i,e)}))}),(function(e){Te(e,be.duplicated)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(ke),Ge=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=K(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!me&&!1!==e.fallback,this.fallback&&(t="hash"),$||(t="abstract"),this.mode=t,t){case"history":this.history=new Ie(this,e.base);break;case"hash":this.history=new Fe(this,e.base,this.fallback);break;case"abstract":this.history=new Ve(this,e.base);break;default:0}},He={currentRoute:{configurable:!0}};function We(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}Ge.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},He.currentRoute.get=function(){return this.history&&this.history.current},Ge.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var n=this.history;if(n instanceof Ie||n instanceof Fe){var i=function(e){n.setupListeners(),function(e){var i=n.current,r=t.options.scrollBehavior;me&&r&&"fullPath"in e&&ae(t,e,i,!1)}(e)};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Ge.prototype.beforeEach=function(e){return We(this.beforeHooks,e)},Ge.prototype.beforeResolve=function(e){return We(this.resolveHooks,e)},Ge.prototype.afterEach=function(e){return We(this.afterHooks,e)},Ge.prototype.onReady=function(e,t){this.history.onReady(e,t)},Ge.prototype.onError=function(e){this.history.onError(e)},Ge.prototype.push=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!=typeof Promise)return new Promise((function(t,n){i.history.push(e,t,n)}));this.history.push(e,t,n)},Ge.prototype.replace=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!=typeof Promise)return new Promise((function(t,n){i.history.replace(e,t,n)}));this.history.replace(e,t,n)},Ge.prototype.go=function(e){this.history.go(e)},Ge.prototype.back=function(){this.go(-1)},Ge.prototype.forward=function(){this.go(1)},Ge.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Ge.prototype.resolve=function(e,t,n){var i=G(e,t=t||this.history.current,n,this),r=this.match(i,t),o=r.redirectedFrom||r.fullPath;return{location:i,route:r,href:function(e,t,n){var i="hash"===n?"#"+t:t;return e?M(e+"/"+i):i}(this.history.base,o,this.mode),normalizedTo:i,resolved:r}},Ge.prototype.getRoutes=function(){return this.matcher.getRoutes()},Ge.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Ge.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Ge.prototype,He),Ge.install=function e(t){if(!e.installed||H!==t){e.installed=!0,H=t;var n=function(e){return void 0!==e},i=function(e,t){var i=e.$options._parentVnode;n(i)&&n(i=i.data)&&n(i=i.registerRouteInstance)&&i(e,t)};t.mixin({beforeCreate:function(){n(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,i(this,this)},destroyed:function(){i(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",w),t.component("RouterLink",q);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},Ge.version="3.5.2",Ge.isNavigationFailure=Te,Ge.NavigationFailureType=be,Ge.START_LOCATION=m,$&&window.Vue&&window.Vue.use(Ge),t.default=Ge},function(e,t,n){"use strict";n.r(t);var i=484813681109536e-20,r=Math.PI/2,o=.017453292519943295,a=57.29577951308232,s=Math.PI/4,l=2*Math.PI,c=3.14159265359,u={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},h={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},d=/[\s_\-\/\(\)]/g;function f(e,t){if(e[t])return e[t];for(var n,i=Object.keys(e),r=t.toLowerCase().replace(d,""),o=-1;++o<i.length;)if((n=i[o]).toLowerCase().replace(d,"")===r)return e[n]}var p=function(e){var t,n,i,r={},a=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e}),{}),s={proj:"projName",datum:"datumCode",rf:function(e){r.rf=parseFloat(e)},lat_0:function(e){r.lat0=e*o},lat_1:function(e){r.lat1=e*o},lat_2:function(e){r.lat2=e*o},lat_ts:function(e){r.lat_ts=e*o},lon_0:function(e){r.long0=e*o},lon_1:function(e){r.long1=e*o},lon_2:function(e){r.long2=e*o},alpha:function(e){r.alpha=parseFloat(e)*o},gamma:function(e){r.rectified_grid_angle=parseFloat(e)},lonc:function(e){r.longc=e*o},x_0:function(e){r.x0=parseFloat(e)},y_0:function(e){r.y0=parseFloat(e)},k_0:function(e){r.k0=parseFloat(e)},k:function(e){r.k0=parseFloat(e)},a:function(e){r.a=parseFloat(e)},b:function(e){r.b=parseFloat(e)},r_a:function(){r.R_A=!0},zone:function(e){r.zone=parseInt(e,10)},south:function(){r.utmSouth=!0},towgs84:function(e){r.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){r.to_meter=parseFloat(e)},units:function(e){r.units=e;var t=f(h,e);t&&(r.to_meter=t.to_meter)},from_greenwich:function(e){r.from_greenwich=e*o},pm:function(e){var t=f(u,e);r.from_greenwich=(t||parseFloat(e))*o},nadgrids:function(e){"@null"===e?r.datumCode="none":r.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(r.axis=e)},approx:function(){r.approx=!0}};for(t in a)n=a[t],t in s?"function"==typeof(i=s[t])?i(n):r[i]=n:r[t]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},m=function(e){return new w(e).output()},v=/\s/,g=/[A-Za-z]/,y=/[A-Za-z84]/,b=/[,\]]/,x=/[\d\.E\-\+]/;function w(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function _(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,r=n.reduce((function(e,t){return S(t,e),e}),i);t&&(e[t]=r)}function S(e,t){if(Array.isArray(e)){var n=e.shift();if("PARAMETER"===n&&(n=e.shift()),1===e.length)return Array.isArray(e[0])?(t[n]={},void S(e[0],t[n])):void(t[n]=e[0]);if(e.length)if("TOWGS84"!==n){if("AXIS"===n)return n in t||(t[n]=[]),void t[n].push(e);var i;switch(Array.isArray(n)||(t[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[n]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&S(e[2],t[n]));case"SPHEROID":case"ELLIPSOID":return t[n]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&S(e[3],t[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void _(t,n,e);default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return S(e,t[n]);return _(t,n,e)}}else t[n]=e;else t[n]=!0}else t[e]=!0}w.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;v.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},w.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(b.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},w.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},w.prototype.number=function(e){if(!x.test(e)){if(b.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},w.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},w.prototype.keyword=function(e){if(y.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!b.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},w.prototype.neutral=function(e){if(g.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(x.test(e))return this.word=e,void(this.state=3);if(!b.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},w.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function M(e){return.017453292519943295*e}var T=function(e){var t=m(e),n=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",n]);var r={};return S(t,r),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",n=0,i=e.AXIS.length;n<i;++n){var r=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?t+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?t+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?t+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var o=e.GEOGCS;function a(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(o=e),o&&(o.DATUM?e.datumCode=o.DATUM.name.toLowerCase():e.datumCode=o.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(e.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=o.DATUM.SPHEROID.a,e.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(e.datum_params=o.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",M],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",M],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",M],["lat0","latitude_of_origin",M],["lat0","standard_parallel_1",M],["lat1","standard_parallel_1",M],["lat2","standard_parallel_2",M],["azimuth","Azimuth"],["alpha","azimuth",M],["srsCode","name"]].forEach((function(t){return n=e,r=(i=t)[0],o=i[1],void(!(r in n)&&o in n&&(n[r]=n[o],3===i.length&&(n[r]=i[2](n[r]))));var n,i,r,o})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=M(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(r),r};function E(e){var t=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?E[e]=p(arguments[1]):E[e]=T(arguments[1]):E[e]=n}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?E.apply(t,e):E(e)}));if("string"==typeof e){if(e in E)return E[e]}else"EPSG"in e?E["EPSG:"+e.EPSG]=e:"ESRI"in e?E["ESRI:"+e.ESRI]=e:"IAU2000"in e?E["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(E);var C=E;var A=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var O=["3857","900913","3785","102113"];var L=function(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in C}(e))return C[e];if(function(e){return A.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=T(e);if(function(e){var t=f(e,"authority");if(t){var n=f(t,"epsg");return n&&O.indexOf(n)>-1}}(t))return C["EPSG:3857"];var n=function(e){var t=f(e,"extension");if(t)return f(t,"proj4")}(t);return n?p(n):t}return function(e){return"+"===e[0]}(e)?p(e):void 0},k=function(e,t){var n,i;if(e=e||{},!t)return e;for(i in t)void 0!==(n=t[i])&&(e[i]=n);return e},P=function(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)},D=function(e){return e<0?-1:1},I=function(e){return Math.abs(e)<=c?e:e-D(e)*l},N=function(e,t,n){var i=e*n,o=.5*e;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(r-t))/i},F=function(e,t){for(var n,i,o=.5*e,a=r-2*Math.atan(t),s=0;s<=15;s++)if(n=e*Math.sin(a),a+=i=r-2*Math.atan(t*Math.pow((1-n)/(1+n),o))-a,Math.abs(i)<=1e-10)return a;return-9999};function R(e){return e}var B=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,n,i=e.x,o=e.y;if(o*a>90&&o*a<-90&&i*a>180&&i*a<-180)return null;if(Math.abs(Math.abs(o)-r)<=1e-10)return null;if(this.sphere)t=this.x0+this.a*this.k0*I(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(s+.5*o));else{var l=Math.sin(o),c=N(this.e,o,l);t=this.x0+this.a*this.k0*I(i-this.long0),n=this.y0-this.a*this.k0*Math.log(c)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,i=e.x-this.x0,o=e.y-this.y0;if(this.sphere)n=r-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var a=Math.exp(-o/(this.a*this.k0));if(-9999===(n=F(this.e,a)))return null}return t=I(this.long0+i/(this.a*this.k0)),e.x=t,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:R,inverse:R,names:["longlat","identity"]}],j={},z=[];function U(e,t){var n=z.length;return e.names?(z[n]=e,e.names.forEach((function(e){j[e.toLowerCase()]=n})),this):(console.log(t),!0)}var V={start:function(){B.forEach(U)},add:U,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==j[t]&&z[j[t]]?z[j[t]]:void 0}},G={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},H=G.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};G.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var W={};W.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},W.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},W.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},W.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},W.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},W.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},W.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},W.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},W.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},W.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},W.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},W.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},W.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},W.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},W.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},W.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},W.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var q=function(e,t,n,r,o,a,s){var l={};return l.datum_type=void 0===e||"none"===e?5:4,t&&(l.datum_params=t.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=1),l.datum_params.length>3&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=2,l.datum_params[3]*=i,l.datum_params[4]*=i,l.datum_params[5]*=i,l.datum_params[6]=l.datum_params[6]/1e6+1))),s&&(l.datum_type=3,l.grids=s),l.a=n,l.b=r,l.es=o,l.ep2=a,l},Y={};function $(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:Y[e]||null,isNull:!1}}function X(e){return e/3600*Math.PI/180}function Q(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function K(e){return e.map((function(e){return[X(e.longitudeShift),X(e.latitudeShift)]}))}function J(e,t,n){return{name:Q(e,t+8,t+16).trim(),parent:Q(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function Z(e,t,n,i){for(var r=t+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:e.getFloat32(r+16*a,i),longitudeShift:e.getFloat32(r+16*a+4,i),latitudeAccuracy:e.getFloat32(r+16*a+8,i),longitudeAccuracy:e.getFloat32(r+16*a+12,i)};o.push(s)}return o}function ee(e,t){if(!(this instanceof ee))return new ee(e);t=t||function(e){if(e)throw e};var n=L(e);if("object"==typeof n){var i=ee.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=f(W,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o,a,s,l,c,u,h,d=function(e,t,n,i,r){if(!e){var o=f(G,i);o||(o=H),e=o.a,t=o.b,n=o.rf}return n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<1e-10)&&(r=!0,t=e),{a:e,b:t,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(o=d.a,a=d.b,d.rf,s=n.R_A,u=((l=o*o)-(c=a*a))/l,h=0,s?(l=(o*=1-u*(.16666666666666666+u*(.04722222222222222+.022156084656084655*u)))*o,u=0):h=Math.sqrt(u),{es:u,e:h,ep2:(l-c)/c}),m=function(e){return void 0===e?null:e.split(",").map($)}(n.nadgrids),v=n.datum||q(n.datumCode,n.datum_params,d.a,d.b,p.es,p.ep2,m);k(this,n),k(this,i),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=v,this.init(),t(null,this)}else t(e)}else t(e)}ee.projections=V,ee.projections.start();var te=ee;function ne(e,t,n){var i,o,a,s,l=e.x,c=e.y,u=e.z?e.z:0;if(c<-r&&c>-1.001*r)c=-r;else if(c>r&&c<1.001*r)c=r;else{if(c<-r)return{x:-1/0,y:-1/0,z:e.z};if(c>r)return{x:1/0,y:1/0,z:e.z}}return l>Math.PI&&(l-=2*Math.PI),o=Math.sin(c),s=Math.cos(c),a=o*o,{x:((i=n/Math.sqrt(1-t*a))+u)*s*Math.cos(l),y:(i+u)*s*Math.sin(l),z:(i*(1-t)+u)*o}}function ie(e,t,n,i){var o,a,s,l,c,u,h,d,f,p,m,v,g,y,b,x=e.x,w=e.y,_=e.z?e.z:0;if(o=Math.sqrt(x*x+w*w),a=Math.sqrt(x*x+w*w+_*_),o/n<1e-12){if(y=0,a/n<1e-12)return r,b=-i,{x:e.x,y:e.y,z:e.z}}else y=Math.atan2(w,x);s=_/a,d=(l=o/a)*(1-t)*(c=1/Math.sqrt(1-t*(2-t)*l*l)),f=s*c,g=0;do{g++,u=t*(h=n/Math.sqrt(1-t*f*f))/(h+(b=o*d+_*f-h*(1-t*f*f))),v=(m=s*(c=1/Math.sqrt(1-u*(2-u)*l*l)))*d-(p=l*(1-u)*c)*f,d=p,f=m}while(v*v>1e-24&&g<30);return{x:y,y:Math.atan(m/Math.abs(p)),z:b}}function re(e){return 1===e||2===e}var oe=function(e,t,n){if(function(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))}(e,t))return n;if(5===e.datum_type||5===t.datum_type)return n;var i=e.a,r=e.es;if(3===e.datum_type){if(0!==ae(e,!1,n))return;i=6378137,r=.0066943799901413165}var o=t.a,a=t.b,s=t.es;if(3===t.datum_type&&(o=6378137,a=6356752.314,s=.0066943799901413165),r===s&&i===o&&!re(e.datum_type)&&!re(t.datum_type))return n;if((n=ne(n,r,i),re(e.datum_type)&&(n=function(e,t,n){if(1===t)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(2===t){var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6];return{x:c*(e.x-l*e.y+s*e.z)+i,y:c*(l*e.x+e.y-a*e.z)+r,z:c*(-s*e.x+a*e.y+e.z)+o}}}(n,e.datum_type,e.datum_params)),re(t.datum_type)&&(n=function(e,t,n){if(1===t)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(2===t){var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=(e.x-i)/c,h=(e.y-r)/c,d=(e.z-o)/c;return{x:u+l*h-s*d,y:-l*u+h+a*d,z:s*u-a*h+d}}}(n,t.datum_type,t.datum_params)),n=ie(n,s,o,a),3===t.datum_type)&&0!==ae(t,!0,n))return;return n};function ae(e,t,n){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},o=[],s=0;s<e.grids.length;s++){var l=e.grids[s];if(o.push(l.name),l.isNull){r=i;break}if(l.mandatory,null!==l.grid){var c=l.grid.subgrids[0],u=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,h=c.ll[0]-u,d=c.ll[1]-u,f=c.ll[0]+(c.lim[0]-1)*c.del[0]+u,p=c.ll[1]+(c.lim[1]-1)*c.del[1]+u;if(!(d>i.y||h>i.x||p<i.y||f<i.x||(r=se(i,t,c),isNaN(r.x))))break}else if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*a+" "+i.y*a+" tried: '"+o+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function se(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var r={x:e.x,y:e.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=I(r.x-Math.PI)+Math.PI;var o=le(r,n);if(t){if(isNaN(o.x))return i;o.x=r.x-o.x,o.y=r.y-o.y;var a,s,l=9;do{if(s=le(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:r.x-(s.x+o.x),y:r.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=I(o.x+n.ll[0]),i.y=o.y+n.ll[1]}else isNaN(o.x)||(i.x=e.x+o.x,i.y=e.y+o.y);return i}function le(e,t){var n,i={x:e.x/t.del[0],y:e.y/t.del[1]},r=Math.floor(i.x),o=Math.floor(i.y),a=i.x-1*r,s=i.y-1*o,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=t.lim[0])return l;if(o<0||o>=t.lim[1])return l;n=o*t.lim[0]+r;var c=t.cvs[n][0],u=t.cvs[n][1];n++;var h=t.cvs[n][0],d=t.cvs[n][1];n+=t.lim[0];var f=t.cvs[n][0],p=t.cvs[n][1];n--;var m=t.cvs[n][0],v=t.cvs[n][1],g=a*s,y=a*(1-s),b=(1-a)*(1-s),x=(1-a)*s;return l.x=b*c+y*h+x*m+g*f,l.y=b*u+y*d+x*v+g*p,l}var ce=function(e,t,n){var i,r,o,a=n.x,s=n.y,l=n.z||0,c={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==n.z)switch(0===o?(i=a,r=-1!=="ew".indexOf(e.axis[o])?"x":"y"):1===o?(i=s,r=-1!=="ns".indexOf(e.axis[o])?"y":"x"):(i=l,r="z"),e.axis[o]){case"e":c[r]=i;break;case"w":c[r]=-i;break;case"n":c[r]=i;break;case"s":c[r]=-i;break;case"u":void 0!==n[r]&&(c.z=i);break;case"d":void 0!==n[r]&&(c.z=-i);break;default:return null}return c},ue=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t};function he(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function de(e,t,n,i){var r;if(Array.isArray(n)&&(n=ue(n)),function(e){he(e.x),he(e.y)}(n),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(n=de(e,r=new te("WGS84"),n,i),e=r),i&&"enu"!==e.axis&&(n=ce(e,!1,n)),"longlat"===e.projName)n={x:n.x*o,y:n.y*o,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),!(n=e.inverse(n)))return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=oe(e.datum,t.datum,n))return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),"longlat"===t.projName?n={x:n.x*a,y:n.y*a,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&"enu"!==t.axis?ce(t,!0,n):n}var fe=te("WGS84");function pe(e,t,n,i){var r,o,a;return Array.isArray(n)?(r=de(e,t,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(o=de(e,t,n,i),2===(a=Object.keys(n)).length||a.forEach((function(i){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;o[i]=n[i]})),o)}function me(e){return e instanceof te?e:e.oProj?e.oProj:te(e)}var ve=function(e,t,n){e=me(e);var i,r=!1;return void 0===t?(t=e,e=fe,r=!0):(void 0!==t.x||Array.isArray(t))&&(n=t,t=e,e=fe,r=!0),t=me(t),n?pe(e,t,n):(i={forward:function(n,i){return pe(e,t,n,i)},inverse:function(n,i){return pe(t,e,n,i)}},r&&(i.oProj=t),i)},ge=73,ye=79,be={forward:xe,inverse:function(e){var t=Me(Ce(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:we};function xe(e,t){return t=t||5,function(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(f=e.easting,p=e.northing,m=e.zoneNumber,v=Ee(m),g=Math.floor(f/1e5),y=Math.floor(p/1e5)%20,r=g,o=y,a=v,s=a-1,l="AJSAJS".charCodeAt(s),c="AFAFAF".charCodeAt(s),u=l+r-1,h=c+o,d=!1,u>90&&(u=u-90+65-1,d=!0),(u===ge||l<ge&&u>ge||(u>ge||l<ge)&&d)&&u++,(u===ye||l<ye&&u>ye||(u>ye||l<ye)&&d)&&++u===ge&&u++,u>90&&(u=u-90+65-1),h>86?(h=h-86+65-1,d=!0):d=!1,(h===ge||c<ge&&h>ge||(h>ge||c<ge)&&d)&&h++,(h===ye||c<ye&&h>ye||(h>ye||c<ye)&&d)&&++h===ge&&h++,h>86&&(h=h-86+65-1),String.fromCharCode(u)+String.fromCharCode(h))+n.substr(n.length-5,t)+i.substr(i.length-5,t);var r,o,a,s,l,c,u,h,d;var f,p,m,v,g,y}(function(e){var t,n,i,r,o,a,s,l=e.lat,c=e.lon,u=6378137,h=_e(l),d=_e(c);s=Math.floor((c+180)/6)+1,180===c&&(s=60);l>=56&&l<64&&c>=3&&c<12&&(s=32);l>=72&&l<84&&(c>=0&&c<9?s=31:c>=9&&c<21?s=33:c>=21&&c<33?s=35:c>=33&&c<42&&(s=37));a=_e(6*(s-1)-180+3),.006739496752268451,t=u/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),n=Math.tan(h)*Math.tan(h),i=.006739496752268451*Math.cos(h)*Math.cos(h),r=Math.cos(h)*(d-a),o=u*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var f=.9996*t*(r+(1-n+i)*r*r*r/6+(5-18*n+n*n+72*i-.39089081163157013)*r*r*r*r*r/120)+5e5,p=.9996*(o+t*Math.tan(h)*(r*r/2+(5-n+9*i+4*i*i)*r*r*r*r/24+(61-58*n+n*n+600*i-2.2240339282485886)*r*r*r*r*r*r/720));l<0&&(p+=1e7);return{northing:Math.round(p),easting:Math.round(f),zoneNumber:s,zoneLetter:Te(l)}}({lat:e[1],lon:e[0]}),t)}function we(e){var t=Me(Ce(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function _e(e){return e*(Math.PI/180)}function Se(e){return e/Math.PI*180}function Me(e){var t=e.northing,n=e.easting,i=e.zoneLetter,r=e.zoneNumber;if(r<0||r>60)return null;var o,a,s,l,c,u,h,d,f=6378137,p=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,v=t;i<"N"&&(v-=1e7),u=6*(r-1)-180+3,d=(h=v/.9996/6367449.145945056)+(3*p/2-27*p*p*p/32)*Math.sin(2*h)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*h)+151*p*p*p/96*Math.sin(6*h),o=f/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),s=.006739496752268451*Math.cos(d)*Math.cos(d),l=.99330562*f/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),c=m/(.9996*o);var g=d-o*Math.tan(d)/l*(c*c/2-(5+3*a+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);g=Se(g);var y,b=(c-(1+2*a+s)*c*c*c/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*c*c*c*c*c/120)/Math.cos(d);if(b=u+Se(b),e.accuracy){var x=Me({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});y={top:x.lat,right:x.lon,bottom:g,left:b}}else y={lat:g,lon:b};return y}function Te(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Ee(e){var t=e%6;return 0===t&&(t=6),t}function Ce(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n=e.length,i=null,r="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;r+=t,o++}var a=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;i=e.substring(o,o+=2);for(var l=Ee(a),c=function(e,t){var n="AJSAJS".charCodeAt(t-1),i=1e5,r=!1;for(;n!==e.charCodeAt(0);){if(++n===ge&&n++,n===ye&&n++,n>90){if(r)throw"Bad character: "+e;n=65,r=!0}i+=1e5}return i}(i.charAt(0),l),u=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var n="AFAFAF".charCodeAt(t-1),i=0,r=!1;for(;n!==e.charCodeAt(0);){if(++n===ge&&n++,n===ye&&n++,n>86){if(r)throw"Bad character: "+e;n=65,r=!0}i+=1e5}return i}(i.charAt(1),l);u<Ae(s);)u+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var d,f,p,m=h/2,v=0,g=0;return m>0&&(d=1e5/Math.pow(10,m),f=e.substring(o,o+m),v=parseFloat(f)*d,p=e.substring(o+m),g=parseFloat(p)*d),{easting:v+c,northing:g+u,zoneLetter:s,zoneNumber:a,accuracy:d}}function Ae(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Oe(e,t,n){if(!(this instanceof Oe))return new Oe(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Oe.fromMGRS=function(e){return new Oe(we(e))},Oe.prototype.toMGRS=function(e){return xe([this.x,this.y],e)};var Le=Oe,ke=.01068115234375,Pe=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*ke))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*ke)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),n*=e,t[3]=n*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t},De=function(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))},Ie=function(e,t,n){for(var i=1/(1-t),r=e,o=20;o;--o){var a=Math.sin(r),s=1-t*a*a;if(r-=s=(De(r,a,Math.cos(r),n)-e)*(s*Math.sqrt(s))*i,Math.abs(s)<1e-10)return r}return r};var Ne={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Pe(this.es),this.ml0=De(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,n,i,r=e.x,o=e.y,a=I(r-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var c=l*a,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),f=Math.abs(l)>1e-10?Math.tan(o):0,p=Math.pow(f,2),m=Math.pow(p,2);t=1-this.es*Math.pow(s,2),c/=Math.sqrt(t);var v=De(o,s,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-p+h+u/20*(5-18*p+m+14*h-58*p*h+u/42*(61+179*m-m*p-479*p)))))+this.x0,i=this.a*(this.k0*(v-this.ml0+s*a*c/2*(1+u/12*(5-p+9*h+4*d+u/30*(61+m-58*p+270*h-330*p*h+u/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var g=l*Math.sin(a);if(Math.abs(Math.abs(g)-1)<1e-10)return 93;if(n=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,i=l*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(i))>=1){if(g-1>1e-10)return 93;i=0}else i=Math.acos(i);o<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return e.x=n,e.y=i,e},inverse:function(e){var t,n,i,o,a=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,n=Ie(t,this.es,this.en),Math.abs(n)<r){var l=Math.sin(n),c=Math.cos(n),u=Math.abs(c)>1e-10?Math.tan(n):0,h=this.ep2*Math.pow(c,2),d=Math.pow(h,2),f=Math.pow(u,2),p=Math.pow(f,2);t=1-this.es*Math.pow(l,2);var m=a*Math.sqrt(t)/this.k0,v=Math.pow(m,2);i=n-(t*=u)*v/(1-this.es)*.5*(1-v/12*(5+3*f-9*h*f+h-4*d-v/30*(61+90*f-252*h*f+45*p+46*h-v/56*(1385+3633*f+4095*p+1574*p*f)))),o=I(this.long0+m*(1-v/6*(1+2*f+h-v/20*(5+28*f+24*p+8*h*f+6*h-v/42*(61+662*f+1320*p+720*p*f))))/c)}else i=r*D(s),o=0;else{var g=Math.exp(a/this.k0),y=.5*(g-1/g),b=this.lat0+s/this.k0,x=Math.cos(b);t=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(y,2))),i=Math.asin(t),s<0&&(i=-i),o=0===y&&0===x?0:I(Math.atan2(y,x)+this.long0)}return e.x=o,e.y=i,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Fe=function(e){var t=Math.exp(e);return t=(t-1/t)/2},Re=function(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))},Be=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,n=t-1;return 0===n?e:e*Math.log(t)/n}(t*(1+t/(Re(1,t)+1))),e<0?-t:t},je=function(e,t){for(var n,i=2*Math.cos(2*t),r=e.length-1,o=e[r],a=0;--r>=0;)n=i*o-a+e[r],a=o,o=n;return t+n*Math.sin(2*t)},ze=function(e,t,n){for(var i,r,o=Math.sin(t),a=Math.cos(t),s=Fe(n),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(n),c=2*a*l,u=-2*o*s,h=e.length-1,d=e[h],f=0,p=0,m=0;--h>=0;)i=p,r=f,d=c*(p=d)-i-u*(f=m)+e[h],m=u*p-r+c*f;return[(c=o*l)*d-(u=a*s)*m,c*m+u*d]};var Ue={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ne.init.apply(this),this.forward=Ne.forward,this.inverse=Ne.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),n*=t,this.cgb[1]=n*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n*=t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),n*=t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(t*(-24832/14175)-2.4)),n*=t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n*=t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),n*=t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n*=t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n*=t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n*=t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=je(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(e,t){for(var n,i=2*Math.cos(t),r=e.length-1,o=e[r],a=0;--r>=0;)n=i*o-a+e[r],a=o,o=n;return Math.sin(t)*n}(this.gtu,2*i))},forward:function(e){var t=I(e.x-this.long0),n=e.y;n=je(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),o=Math.sin(t),a=Math.cos(t);n=Math.atan2(i,a*r),t=Math.atan2(o*r,Re(i,r*a)),t=Be(Math.tan(t));var s,l,c=ze(this.gtu,2*n,2*t);return n+=c[0],t+=c[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),e.x=s,e.y=l,e},inverse:function(e){var t,n,i=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var o=ze(this.utg,2*r,2*i);r+=o[0],i+=o[1],i=Math.atan(Fe(i));var a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),c=Math.cos(i);r=Math.atan2(a*c,Re(l,c*s)),i=Math.atan2(l,c*s),t=I(i+this.long0),n=je(this.cgb,r)}else t=1/0,n=1/0;return e.x=t,e.y=n,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var Ve={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(I(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*o,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ue.init.apply(this),this.forward=Ue.forward,this.inverse=Ue.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ge=function(e,t){return Math.pow((1-e)/(1+e),t)};var He={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s)/(Math.pow(Math.tan(.5*this.lat0+s),this.C)*Ge(this.e*e,this.ratexp))},forward:function(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+s),this.C)*Ge(this.e*Math.sin(n),this.ratexp))-r,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,n=e.y,i=Math.pow(Math.tan(.5*n+s)/this.K,1/this.C),o=20;o>0&&(n=2*Math.atan(i*Ge(this.e*Math.sin(e.y),-.5*this.e))-r,!(Math.abs(n-e.y)<1e-14));--o)e.y=n;return o?(e.x=t,e.y=n,e):null},names:["gauss"]};var We={init:function(){He.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,n,i,r;return e.x=I(e.x-this.long0),He.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=r*n*Math.sin(e.x),e.y=r*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,n,i,r,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),n=Math.cos(a),r=Math.asin(n*this.sinc0+e.y*t*this.cosc0/o),i=Math.atan2(e.x*t,o*this.cosc0*n-e.y*this.sinc0*t)}else r=this.phic0,i=0;return e.x=i,e.y=r,He.inverse.apply(this,[e]),e.x=I(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var qe={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+D(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/N(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=P(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,n,i,o,a,s,l=e.x,c=e.y,u=Math.sin(c),h=Math.cos(c),d=I(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=1e-10&&Math.abs(c+this.lat0)<=1e-10?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*h*Math.cos(d)),e.x=this.a*t*h*Math.sin(d)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*h*Math.cos(d))+this.y0,e):(n=2*Math.atan(this.ssfn_(c,u,this.e))-r,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(a=N(this.e,c*this.con,this.con*u),s=2*this.a*this.k0*a/this.cons,e.x=this.x0+s*Math.sin(l-this.long0),e.y=this.y0-this.con*s*Math.cos(l-this.long0),e):(Math.abs(this.sinlat0)<1e-10?(t=2*this.a*this.k0/(1+o*Math.cos(d)),e.y=t*i):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(d))),e.y=t*(this.cosX0*i-this.sinX0*o*Math.cos(d))+this.y0),e.x=t*o*Math.sin(d)+this.x0,e))},inverse:function(e){var t,n,i,o,a;e.x-=this.x0,e.y-=this.y0;var s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,n=this.lat0,s<=1e-10?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/s),t=Math.abs(this.coslat0)<1e-10?this.lat0>0?I(this.long0+Math.atan2(e.x,-1*e.y)):I(this.long0+Math.atan2(e.x,e.y)):I(this.long0+Math.atan2(e.x*Math.sin(l),s*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=t,e.y=n,e)}if(Math.abs(this.coslat0)<=1e-10){if(s<=1e-10)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*F(this.e,i),t=this.con*I(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=1e-10?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/s),t=I(this.long0+Math.atan2(e.x*Math.sin(o),s*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),n=-1*F(this.e,Math.tan(.5*(r+a)));return e.x=t,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,n){return t*=n,Math.tan(.5*(r+e))*Math.pow((1-t)/(1+t),.5*n)}};var Ye={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,l=0,c=o,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=c,e},names:["somerc"]};var $e={init:function(){var e,t,n,i,a,c,u,h,d,f,p,m,v,g=0,y=0,b=0,x=0,w=0,_=0,S=0;this.no_off=(v="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(v)),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var T=!1;if("rectified_grid_angle"in this&&(T=!0),M&&(S=this.alpha),T&&(g=this.rectified_grid_angle*o),M||T)y=this.longc;else if(b=this.long1,w=this.lat1,x=this.long2,_=this.lat2,Math.abs(w-_)<=1e-7||(e=Math.abs(w))<=1e-7||Math.abs(e-r)<=1e-7||Math.abs(Math.abs(this.lat0)-r)<=1e-7||Math.abs(Math.abs(_)-r)<=1e-7)throw new Error;var E=1-this.es;t=Math.sqrt(E),Math.abs(this.lat0)>1e-10?(h=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*h*h,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*t/e,(a=(i=this.B*t/(n*Math.sqrt(e)))*i-1)<=0?a=0:(a=Math.sqrt(a),this.lat0<0&&(a=-a)),this.E=a+=i,this.E*=Math.pow(N(this.e,this.lat0,h),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=a=1),M||T?(M?(p=Math.asin(Math.sin(S)/i),T||(g=S)):(p=g,S=Math.asin(i*Math.sin(p))),this.lam0=y-Math.asin(.5*(a-1/a)*Math.tan(p))/this.B):(c=Math.pow(N(this.e,w,Math.sin(w)),this.B),u=Math.pow(N(this.e,_,Math.sin(_)),this.B),a=this.E/c,d=(u-c)/(u+c),f=((f=this.E*this.E)-u*c)/(f+u*c),(e=b-x)<-Math.pi?x-=l:e>Math.pi&&(x+=l),this.lam0=I(.5*(b+x)-Math.atan(f*Math.tan(.5*this.B*(b-x))/d)/this.B),p=Math.atan(2*Math.sin(this.B*I(b-this.lam0))/(a-1/a)),g=S=Math.asin(i*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),a=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(s-a)),this.v_pole_s=this.ArB*Math.log(Math.tan(s+a))},forward:function(e){var t,n,i,o,a,s,l,c,u={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-r)>1e-10){if(t=.5*((a=this.E/Math.pow(N(this.e,e.y,Math.sin(e.y)),this.B))-(s=1/a)),n=.5*(a+s),o=Math.sin(this.B*e.x),i=(t*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(i)-1)<1e-10)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),s=Math.cos(this.B*e.x),l=Math.abs(s)<1e-7?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+o*this.singam,s)}else c=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(u.x=l,u.y=c):(l-=this.u_0,u.x=c*this.cosrot+l*this.sinrot,u.y=l*this.cosrot-c*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(e){var t,n,i,o,a,s,l,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),o=.5*((i=Math.exp(-this.BrA*n))-1/i),a=.5*(i+1/i),l=((s=Math.sin(this.BrA*t))*this.cosgam+o*this.singam)/a,Math.abs(Math.abs(l)-1)<1e-10)c.x=0,c.y=l<0?-r:r;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=F(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(o*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var Xe={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=P(this.e,t,n),r=N(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=P(this.e,o,a),l=N(this.e,this.lat2,o),c=N(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(i/s)/Math.log(r/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=D(n)*(r-2e-10));var i,o,a=Math.abs(Math.abs(n)-r);if(a>1e-10)i=N(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(i,this.ns);else{if((a=n*this.ns)<=0)return null;o=0}var s=this.ns*I(t-this.long0);return e.x=this.k0*(o*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,e},inverse:function(e){var t,n,i,o,a,s=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+l*l),n=1):(t=-Math.sqrt(s*s+l*l),n=-1);var c=0;if(0!==t&&(c=Math.atan2(n*s,n*l)),0!==t||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),-9999===(o=F(this.e,i)))return null}else o=-r;return a=I(c/this.ns+this.long0),e.x=a,e.y=o,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]};var Qe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,n,i,r,o,a,s,l=e.x,c=e.y,u=I(l-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),i=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,n,i,r,o,a,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(t)),e.x=this.long0-n/this.alfa,a=t,s=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,c+=1}while(0===s&&c<15);return c>=15?null:e},names:["Krovak","krovak"]},Ke=function(e,t,n,i,r){return e*r-t*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)},Je=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Ze=function(e){return.375*e*(1+.25*e*(1+.46875*e))},et=function(e){return.05859375*e*e*(1+.75*e)},tt=function(e){return e*e*e*(35/3072)},nt=function(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)},it=function(e){return Math.abs(e)<r?e:e-D(e)*Math.PI},rt=function(e,t,n,i,r){var o,a;o=e/t;for(var s=0;s<15;s++)if(o+=a=(e-(t*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(t-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var ot={init:function(){this.sphere||(this.e0=Je(this.es),this.e1=Ze(this.es),this.e2=et(this.es),this.e3=tt(this.es),this.ml0=this.a*Ke(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,n,i=e.x,r=e.y;if(i=I(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),s=nt(this.a,this.e,o),l=Math.tan(r)*Math.tan(r),c=i*Math.cos(r),u=c*c,h=this.es*a*a/(1-this.es);t=s*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=this.a*Ke(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*o/a*u*(.5+(5-l+6*h)*u/24)}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,i=e.x/this.a,o=e.y/this.a;if(this.sphere){var a=o+this.lat0;t=Math.asin(Math.sin(a)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(a))}else{var s=this.ml0/this.a+o,l=rt(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-r)<=1e-10)return e.x=this.long0,e.y=r,o<0&&(e.y*=-1),e;var c=nt(this.a,this.e,Math.sin(l)),u=c*c*c/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(l),2),d=i*this.a/c,f=d*d;t=l-c*Math.tan(l)/u*d*d*(.5-(1+3*h)*d*d/24),n=d*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(l)}return e.x=I(n+this.long0),e.y=it(t),e},names:["Cassini","Cassini_Soldner","cass"]},at=function(e,t){var n;return e>1e-7?(1-e*e)*(t/(1-(n=e*t)*n)-.5/e*Math.log((1-n)/(1+n))):2*t};var st={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-r)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=at(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,n=[];return n[0]=.3333333333333333*e,t=e*e,n[0]+=.17222222222222222*t,n[1]=.06388888888888888*t,t*=e,n[0]+=.10257936507936508*t,n[1]+=.0664021164021164*t,n[2]=.016415012942191543*t,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=at(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,n,i,o,a,l,c,u,h,d,f=e.x,p=e.y;if(f=I(f-this.long0),this.sphere){if(a=Math.sin(p),d=Math.cos(p),i=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*i:1+this.sinph0*a+this.cosph0*d*i)<=1e-10)return null;t=(n=Math.sqrt(2/n))*d*Math.sin(f),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*d*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(p+this.lat0)<1e-10)return null;n=s-.5*p,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(f),n*=i}}else{switch(c=0,u=0,h=0,i=Math.cos(f),o=Math.sin(f),a=Math.sin(p),l=at(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=l/this.qp,u=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:h=1+this.sinb1*c+this.cosb1*u*i;break;case this.EQUIT:h=1+u*i;break;case this.N_POLE:h=r+p,l=this.qp-l;break;case this.S_POLE:h=p-r,l=this.qp+l}if(Math.abs(h)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*c-this.sinb1*u*i):(h=Math.sqrt(2/(1+u*i)))*c*this.ymf,t=this.xmf*h*u*o;break;case this.N_POLE:case this.S_POLE:l>=0?(t=(h=Math.sqrt(l))*o,n=i*(this.mode===this.S_POLE?h:-h)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,o,a,s,l,c,u,h,d=e.x/this.a,f=e.y/this.a;if(this.sphere){var p,m=0,v=0;if((n=.5*(p=Math.sqrt(d*d+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(v=Math.sin(n),m=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=1e-10?0:Math.asin(f*v/p),d*=v,f=m*p;break;case this.OBLIQ:n=Math.abs(p)<=1e-10?this.lat0:Math.asin(m*this.sinph0+f*v*this.cosph0/p),d*=v*this.cosph0,f=(m-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=r-n;break;case this.S_POLE:n-=r}t=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,f):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,f*=this.dd,(s=Math.sqrt(d*d+f*f))<1e-10)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*s/this.rq),i=Math.cos(o),d*=o=Math.sin(o),this.mode===this.OBLIQ?(l=i*this.sinb1+f*o*this.cosb1/s,a=this.qp*l,f=s*this.cosb1*i-f*this.sinb1*o):(l=f*o/s,a=this.qp*l,f=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(a=d*d+f*f))return e.x=this.long0,e.y=this.lat0,e;l=1-a/this.qp,this.mode===this.S_POLE&&(l=-l)}t=Math.atan2(d,f),c=Math.asin(l),u=this.apa,h=c+c,n=c+u[0]*Math.sin(h)+u[1]*Math.sin(h+h)+u[2]*Math.sin(h+h+h)}return e.x=I(this.long0+t),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},lt=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)};var ct={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=P(this.e3,this.sin_po,this.cos_po),this.qs1=at(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=P(this.e3,this.sin_po,this.cos_po),this.qs2=at(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=at(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=at(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*I(t-this.long0),a=r*Math.sin(o)+this.x0,s=this.rh-r*Math.cos(o)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,n,i,r,o,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),r=0,0!==t&&(r=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),o=I(r/this.ns0+this.long0),e.x=o,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var n,i,r,o,a=lt(.5*t);if(e<1e-10)return a;for(var s=e*e,l=1;l<=25;l++)if(a+=o=.5*(r=1-(i=e*(n=Math.sin(a)))*i)*r/Math.cos(a)*(t/(1-s)-n/r+.5/e*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return a;return null}};var ut={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,n,i,r,o,a,s,l=e.x,c=e.y;return i=I(l-this.long0),t=Math.sin(c),n=Math.cos(c),r=Math.cos(i),1,(o=this.sin_p14*t+this.cos_p14*n*r)>0||Math.abs(o)<=1e-10?(a=this.x0+1*this.a*n*Math.sin(i)/o,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*r)/o):(a=this.x0+this.infinity_dist*n*Math.sin(i),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*r)),e.x=a,e.y=s,e},inverse:function(e){var t,n,i,r,o,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(r=Math.atan2(t,this.rc),n=Math.sin(r),i=Math.cos(r),a=lt(i*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),o=I(this.long0+o)):(a=this.phic0,o=0),e.x=o,e.y=a,e},names:["gnom"]};var ht={init:function(){this.sphere||(this.k0=P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,n,i=e.x,r=e.y,o=I(i-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=at(this.e,Math.sin(r));t=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=n,e},inverse:function(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=I(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*r:r;for(var i,o,a,s,l=Math.asin(.5*t),c=0;c<30;c++)if(o=Math.sin(l),a=Math.cos(l),s=e*o,l+=i=Math.pow(1-s*s,2)/(2*a)*(t/(1-e*e)-o/(1-s*s)+.5/e*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return l;return NaN}(this.e,2*e.y*this.k0/this.a),t=I(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e},names:["cea"]};var dt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,n=e.y,i=I(t-this.long0),r=it(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*r,e},inverse:function(e){var t=e.x,n=e.y;return e.x=I(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=it(this.lat0+(n-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var ft={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Je(this.es),this.e1=Ze(this.es),this.e2=et(this.es),this.e3=tt(this.es),this.ml0=this.a*Ke(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,n,i,r=e.x,o=e.y,a=I(r-this.long0);if(i=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(t=this.a*a,n=-1*this.a*this.lat0):(t=this.a*Math.sin(i)/Math.tan(o),n=this.a*(it(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=1e-10)t=this.a*a,n=-1*this.ml0;else{var s=nt(this.a,this.e,Math.sin(o))/Math.tan(o);t=s*Math.sin(i),n=this.a*Ke(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(i))}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,n,i,r,o,a,s,l,c;if(i=e.x-this.x0,r=e.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=1e-10)t=I(i/this.a+this.long0),n=0;else{var u;for(a=this.lat0+r/this.a,s=i*i/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=c=-1*(a*(l*(u=Math.tan(l))+1)-l-.5*(l*l+s)*u)/((l-a)/u-1),Math.abs(c)<=1e-10){n=l;break}t=I(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=1e-10)n=0,t=I(this.long0+i/this.a);else{var h,d,f,p,m;for(a=(this.ml0+r)/this.a,s=i*i/this.a/this.a+a*a,l=a,o=20;o;--o)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*Ke(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(a*(h*(p=d/this.a)+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*l)*(p*p+s-2*a*p)/(4*h)+(a-p)*(h*f-2/Math.sin(2*l))-f),Math.abs(c)<=1e-10){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=I(this.long0+Math.asin(i*h/this.a)/Math.sin(n))}return e.x=t,e.y=n,e},names:["Polyconic","poly"]};var pt={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,n=e.x,r=e.y-this.lat0,o=n-this.long0,a=r/i*1e-5,s=o,l=1,c=0;for(t=1;t<=10;t++)l*=a,c+=this.A[t]*l;var u,h=c,d=s,f=1,p=0,m=0,v=0;for(t=1;t<=6;t++)u=p*h+f*d,f=f*h-p*d,p=u,m=m+this.B_re[t]*f-this.B_im[t]*p,v=v+this.B_im[t]*f+this.B_re[t]*p;return e.x=v*this.a+this.x0,e.y=m*this.a+this.y0,e},inverse:function(e){var t,n,r=e.x,o=e.y,a=r-this.x0,s=(o-this.y0)/this.a,l=a/this.a,c=1,u=0,h=0,d=0;for(t=1;t<=6;t++)n=u*s+c*l,c=c*s-u*l,u=n,h=h+this.C_re[t]*c-this.C_im[t]*u,d=d+this.C_im[t]*c+this.C_re[t]*u;for(var f=0;f<this.iterations;f++){var p,m=h,v=d,g=s,y=l;for(t=2;t<=6;t++)p=v*h+m*d,m=m*h-v*d,v=p,g+=(t-1)*(this.B_re[t]*m-this.B_im[t]*v),y+=(t-1)*(this.B_im[t]*m+this.B_re[t]*v);m=1,v=0;var b=this.B_re[1],x=this.B_im[1];for(t=2;t<=6;t++)p=v*h+m*d,m=m*h-v*d,v=p,b+=t*(this.B_re[t]*m-this.B_im[t]*v),x+=t*(this.B_im[t]*m+this.B_re[t]*v);var w=b*b+x*x;h=(g*b+y*x)/w,d=(y*b-g*x)/w}var _=h,S=d,M=1,T=0;for(t=1;t<=9;t++)M*=_,T+=this.D[t]*M;var E=this.lat0+T*i*1e5,C=this.long0+S;return e.x=C,e.y=E,e},names:["New_Zealand_Map_Grid","nzmg"]};var mt={init:function(){},forward:function(e){var t=e.x,n=e.y,i=I(t-this.long0),r=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=r,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=I(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e},names:["Miller_Cylindrical","mill"]};var vt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Pe(this.es)},forward:function(e){var t,n,i=e.x,r=e.y;if(i=I(i-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),a=20;a;--a){var s=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<1e-10)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;t=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);n=this.a*De(r,l,c,this.en),t=this.a*i*c/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,i,o;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i/=this.C_x*(this.m+Math.cos(t)),this.m?t=lt((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=lt(Math.sin(t)/this.n)),i=I(i+this.long0),t=it(t)):(t=Ie(e.y/this.a,this.es,this.en),(o=Math.abs(t))<r?(o=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t)),i=I(n)):o-1e-10<r&&(i=this.long0)),e.x=i,e.y=t,e},names:["Sinusoidal","sinu"]};var gt={init:function(){},forward:function(e){for(var t=e.x,n=e.y,i=I(t-this.long0),r=n,o=Math.PI*Math.sin(n);;){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<1e-10)break}r/=2,Math.PI/2-Math.abs(n)<1e-10&&(i=0);var s=.900316316158*this.a*i*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=s,e.y=l,e},inverse:function(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=I(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return e.x=i,e.y=r,e},names:["Mollweide","moll"]};var yt={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Je(this.es),this.e1=Ze(this.es),this.e2=et(this.es),this.e3=tt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=P(this.e,this.sinphi,this.cosphi),this.ml1=Ke(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=P(this.e,this.sinphi,this.cosphi),this.ml2=Ke(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ke(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,n=e.x,i=e.y;if(this.sphere)t=this.a*(this.g-i);else{var r=Ke(this.e0,this.e1,this.e2,this.e3,i);t=this.a*(this.g-r)}var o=this.ns*I(n-this.long0),a=this.x0+t*Math.sin(o),s=this.y0+this.rh-t*Math.cos(o);return e.x=a,e.y=s,e},inverse:function(e){var t,n,i,r;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(0!==n&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return r=I(this.long0+o/this.ns),i=it(this.g-n/this.a),e.x=r,e.y=i,e;var a=this.g-n/this.a;return i=rt(a,this.e0,this.e1,this.e2,this.e3),r=I(this.long0+o/this.ns),e.x=r,e.y=i,e},names:["Equidistant_Conic","eqdc"]};var bt={init:function(){this.R=this.a},forward:function(e){var t,n,i=e.x,o=e.y,a=I(i-this.long0);Math.abs(o)<=1e-10&&(t=this.x0+this.R*a,n=this.y0);var s=lt(2*Math.abs(o/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(o)-r)<=1e-10)&&(t=this.x0,n=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var l=.5*Math.abs(Math.PI/a-a/Math.PI),c=l*l,u=Math.sin(s),h=Math.cos(s),d=h/(u+h-1),f=d*d,p=d*(2/u-1),m=p*p,v=Math.PI*this.R*(l*(d-m)+Math.sqrt(c*(d-m)*(d-m)-(m+c)*(f-m)))/(m+c);a<0&&(v=-v),t=this.x0+v;var g=c+d;return v=Math.PI*this.R*(p*g-l*Math.sqrt((m+c)*(c+1)-g*g))/(m+c),n=o>=0?this.y0+v:this.y0-v,e.x=t,e.y=n,e},inverse:function(e){var t,n,i,r,o,a,s,l,c,u,h,d;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,o=(i=e.x/h)*i+(r=e.y/h)*r,h=3*(r*r/(l=-2*(a=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(s=a-2*r*r+i*i)*s*s/l/l/l-9*a*s/l/l)/27)/(c=(a-s*s/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,n=e.y>=0?(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(i)<1e-10?this.long0:I(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-r*r)+o*o))/2/i),e.x=t,e.y=n,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var xt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,n,i,o,a,s,l,c,u,h,d,f,p,m,v,g,y,b,x,w,_,S,M=e.x,T=e.y,E=Math.sin(e.y),C=Math.cos(e.y),A=I(M-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(e.x=this.x0+this.a*(r-T)*Math.sin(A),e.y=this.y0-this.a*(r-T)*Math.cos(A),e):Math.abs(this.sin_p12+1)<=1e-10?(e.x=this.x0+this.a*(r+T)*Math.sin(A),e.y=this.y0+this.a*(r+T)*Math.cos(A),e):(b=this.sin_p12*E+this.cos_p12*C*Math.cos(A),y=(g=Math.acos(b))?g/Math.sin(g):1,e.x=this.x0+this.a*y*C*Math.sin(A),e.y=this.y0+this.a*y*(this.cos_p12*E-this.sin_p12*C*Math.cos(A)),e):(t=Je(this.es),n=Ze(this.es),i=et(this.es),o=tt(this.es),Math.abs(this.sin_p12-1)<=1e-10?(a=this.a*Ke(t,n,i,o,r),s=this.a*Ke(t,n,i,o,T),e.x=this.x0+(a-s)*Math.sin(A),e.y=this.y0-(a-s)*Math.cos(A),e):Math.abs(this.sin_p12+1)<=1e-10?(a=this.a*Ke(t,n,i,o,r),s=this.a*Ke(t,n,i,o,T),e.x=this.x0+(a+s)*Math.sin(A),e.y=this.y0+(a+s)*Math.cos(A),e):(l=E/C,c=nt(this.a,this.e,this.sin_p12),u=nt(this.a,this.e,E),h=Math.atan((1-this.es)*l+this.es*c*this.sin_p12/(u*C)),x=0===(d=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(A)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(d)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(A)*Math.cos(h)/Math.sin(d)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=c*x*(1-(w=x*x)*(v=(p=this.e*this.cos_p12*Math.cos(d)/Math.sqrt(1-this.es))*p)*(1-v)/6+(_=w*x)/8*(m=f*p)*(1-2*v)+(S=_*x)/120*(v*(4-7*v)-3*f*f*(1-7*v))-S*x/48*m),e.x=this.x0+g*Math.sin(d),e.y=this.y0+g*Math.cos(d),e))},inverse:function(e){var t,n,i,o,a,s,l,c,u,h,d,f,p,m,v,g,y,b,x,w,_,S,M;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*r*this.a)return;return n=t/this.a,i=Math.sin(n),o=Math.cos(n),a=this.long0,Math.abs(t)<=1e-10?s=this.lat0:(s=lt(o*this.sin_p12+e.y*i*this.cos_p12/t),l=Math.abs(this.lat0)-r,a=Math.abs(l)<=1e-10?this.lat0>=0?I(this.long0+Math.atan2(e.x,-e.y)):I(this.long0-Math.atan2(-e.x,e.y)):I(this.long0+Math.atan2(e.x*i,t*this.cos_p12*o-e.y*this.sin_p12*i))),e.x=a,e.y=s,e}return c=Je(this.es),u=Ze(this.es),h=et(this.es),d=tt(this.es),Math.abs(this.sin_p12-1)<=1e-10?(f=this.a*Ke(c,u,h,d,r),t=Math.sqrt(e.x*e.x+e.y*e.y),s=rt((f-t)/this.a,c,u,h,d),a=I(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=s,e):Math.abs(this.sin_p12+1)<=1e-10?(f=this.a*Ke(c,u,h,d,r),t=Math.sqrt(e.x*e.x+e.y*e.y),s=rt((t-f)/this.a,c,u,h,d),a=I(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=s,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),v=Math.atan2(e.x,e.y),p=nt(this.a,this.e,this.sin_p12),g=Math.cos(v),b=-(y=this.e*this.cos_p12*g)*y/(1-this.es),x=3*this.es*(1-b)*this.sin_p12*this.cos_p12*g/(1-this.es),S=1-b*(_=(w=t/p)-b*(1+b)*Math.pow(w,3)/6-x*(1+3*b)*Math.pow(w,4)/24)*_/2-w*_*_*_/6,m=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*g),a=I(this.long0+Math.asin(Math.sin(v)*Math.sin(_)/Math.cos(m))),M=Math.sin(m),s=Math.atan2((M-this.es*S*this.sin_p12)*Math.tan(m),M*(1-this.es)),e.x=a,e.y=s,e)},names:["Azimuthal_Equidistant","aeqd"]};var wt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,n,i,r,o,a,s,l=e.x,c=e.y;return i=I(l-this.long0),t=Math.sin(c),n=Math.cos(c),r=Math.cos(i),1,((o=this.sin_p14*t+this.cos_p14*n*r)>0||Math.abs(o)<=1e-10)&&(a=1*this.a*n*Math.sin(i),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*r)),e.x=a,e.y=s,e},inverse:function(e){var t,n,i,o,a,s,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=lt(t/this.a),i=Math.sin(n),o=Math.cos(n),s=this.long0,Math.abs(t)<=1e-10?(l=this.lat0,e.x=s,e.y=l,e):(l=lt(o*this.sin_p14+e.y*i*this.cos_p14/t),a=Math.abs(this.lat0)-r,Math.abs(a)<=1e-10?(s=this.lat0>=0?I(this.long0+Math.atan2(e.x,-e.y)):I(this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=l,e):(s=I(this.long0+Math.atan2(e.x*i,t*this.cos_p14*o-e.y*this.sin_p14*i)),e.x=s,e.y=l,e))},names:["ortho"]},_t=1,St=2,Mt=3,Tt=4,Et=5,Ct=6,At=1,Ot=2,Lt=3,kt=4;function Pt(e,t,n,i){var o;return e<1e-10?(i.value=At,o=0):(o=Math.atan2(t,n),Math.abs(o)<=s?i.value=At:o>s&&o<=r+s?(i.value=Ot,o-=r):o>r+s||o<=-(r+s)?(i.value=Lt,o=o>=0?o-c:o+c):(i.value=kt,o+=r)),o}function Dt(e,t){var n=e+t;return n<-c?n+=l:n>+c&&(n-=l),n}var It={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r-s/2?this.face=Et:this.lat0<=-(r-s/2)?this.face=Ct:Math.abs(this.long0)<=s?this.face=_t:Math.abs(this.long0)<=r+s?this.face=this.long0>0?St:Tt:this.face=Mt,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,n,i,o,a,l,u={x:0,y:0},h={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,this.face===Et)o=r-t,n>=s&&n<=r+s?(h.value=At,i=n-r):n>r+s||n<=-(r+s)?(h.value=Ot,i=n>0?n-c:n+c):n>-(r+s)&&n<=-s?(h.value=Lt,i=n+r):(h.value=kt,i=n);else if(this.face===Ct)o=r+t,n>=s&&n<=r+s?(h.value=At,i=-n+r):n<s&&n>=-s?(h.value=Ot,i=-n):n<-s&&n>=-(r+s)?(h.value=Lt,i=-n-r):(h.value=kt,i=n>0?-n+c:-n-c);else{var d,f,p,m,v,g;this.face===St?n=Dt(n,+r):this.face===Mt?n=Dt(n,+c):this.face===Tt&&(n=Dt(n,-r)),m=Math.sin(t),v=Math.cos(t),g=Math.sin(n),d=v*Math.cos(n),f=v*g,p=m,this.face===_t?i=Pt(o=Math.acos(d),p,f,h):this.face===St?i=Pt(o=Math.acos(f),p,-d,h):this.face===Mt?i=Pt(o=Math.acos(-d),p,-f,h):this.face===Tt?i=Pt(o=Math.acos(-f),p,d,h):(o=i=0,h.value=At)}return l=Math.atan(12/c*(i+Math.acos(Math.sin(i)*Math.cos(s))-r)),a=Math.sqrt((1-Math.cos(o))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(i))))),h.value===Ot?l+=r:h.value===Lt?l+=c:h.value===kt&&(l+=1.5*c),u.x=a*Math.cos(l),u.y=a*Math.sin(l),u.x=u.x*this.a+this.x0,u.y=u.y*this.a+this.y0,e.x=u.x,e.y=u.y,e},inverse:function(e){var t,n,i,o,a,s,l,u,h,d,f,p,m={lam:0,phi:0},v={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?v.value=At:e.y>=0&&e.y>=Math.abs(e.x)?(v.value=Ot,t-=r):e.x<0&&-e.x>=Math.abs(e.y)?(v.value=Lt,t=t<0?t+c:t-c):(v.value=kt,t+=r),h=c/12*Math.tan(t),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),s=Math.atan(a),(l=1-(i=Math.cos(t))*i*(o=Math.tan(n))*o*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?l=-1:l>1&&(l=1),this.face===Et)u=Math.acos(l),m.phi=r-u,v.value===At?m.lam=s+r:v.value===Ot?m.lam=s<0?s+c:s-c:v.value===Lt?m.lam=s-r:m.lam=s;else if(this.face===Ct)u=Math.acos(l),m.phi=u-r,v.value===At?m.lam=-s+r:v.value===Ot?m.lam=-s:v.value===Lt?m.lam=-s-r:m.lam=s<0?-s-c:-s+c;else{var g,y,b;h=(g=l)*g,y=(h+=(b=h>=1?0:Math.sqrt(1-h)*Math.sin(s))*b)>=1?0:Math.sqrt(1-h),v.value===Ot?(h=y,y=-b,b=h):v.value===Lt?(y=-y,b=-b):v.value===kt&&(h=y,y=b,b=-h),this.face===St?(h=g,g=-y,y=h):this.face===Mt?(g=-g,y=-y):this.face===Tt&&(h=g,g=y,y=-h),m.phi=Math.acos(-b)-r,m.lam=Math.atan2(y,g),this.face===St?m.lam=Dt(m.lam,-r):this.face===Mt?m.lam=Dt(m.lam,-c):this.face===Tt&&(m.lam=Dt(m.lam,+r))}return 0!==this.es&&(d=m.phi<0?1:0,f=Math.tan(m.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),m.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),d&&(m.phi=-m.phi)),m.lam+=this.long0,e.x=m.lam,e.y=m.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Nt=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ft=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Rt=a/5,Bt=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};var jt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=I(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*Rt);i<0?i=0:i>=18&&(i=17);var r={x:Bt(Nt[i],n=a*(n-.08726646259971647*i))*t,y:Bt(Ft[i],n)};return e.y<0&&(r.y=-r.y),r.x=r.x*this.a*.8487+this.x0,r.y=r.y*this.a*1.3523+this.y0,r},inverse:function(e){var t={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=Nt[18][0],t.y=e.y<0?-r:r;else{var n=Math.floor(18*t.y);for(n<0?n=0:n>=18&&(n=17);;)if(Ft[n][0]>t.y)--n;else{if(!(Ft[n+1][0]<=t.y))break;++n}var i=Ft[n],a=5*(t.y-i[0])/(Ft[n+1][0]-i[0]);a=function(e,t,n,i){for(var r=t;i;--i){var o=e(r);if(r-=o,Math.abs(o)<n)break}return r}((function(e){return(Bt(i,e)-t.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(i,e)}),a,1e-10,100),t.x/=Bt(Nt[n],a),t.y=(5*n+a)*o,e.y<0&&(t.y=-t.y)}return t.x=I(t.x+this.long0),t},names:["Robinson","robin"]};var zt={init:function(){this.name="geocent"},forward:function(e){return ne(e,this.es,this.a)},inverse:function(e){return ie(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Ut=0,Vt=1,Gt=2,Ht=3,Wt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var qt,Yt={init:function(){if(Object.keys(Wt).forEach(function(e){if(void 0===this[e])this[e]=Wt[e].def;else{if(Wt[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Wt[e].num&&(this[e]=parseFloat(this[e]))}Wt[e].degrees&&(this[e]=this[e]*o)}.bind(this)),Math.abs(Math.abs(this.lat0)-r)<1e-10?this.mode=this.lat0<0?Vt:Ut:Math.abs(this.lat0)<1e-10?this.mode=Gt:(this.mode=Ht,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,n,i,r,o=Math.sin(e.y),a=Math.cos(e.y),s=Math.cos(e.x);switch(this.mode){case Ht:n=this.sinph0*o+this.cosph0*a*s;break;case Gt:n=a*s;break;case Vt:n=-o;break;case Ut:n=o}switch(t=(n=this.pn1/(this.p-n))*a*Math.sin(e.x),this.mode){case Ht:n*=this.cosph0*o-this.sinph0*a*s;break;case Gt:n*=o;break;case Ut:n*=-a*s;break;case Vt:n*=a*s}return r=1/((i=n*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-n*this.sg)*this.cw*r,n=i*r,e.x=t*this.a,e.y=n*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,n,i,r={x:e.x,y:e.y};i=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*i,n=this.pn1*e.y*this.cw*i,e.x=t*this.cg+n*this.sg,e.y=n*this.cg-t*this.sg;var o=Re(e.x,e.y);if(Math.abs(o)<1e-10)r.x=0,r.y=e.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Ht:r.y=Math.asin(a*this.sinph0+e.y*s*this.cosph0/o),e.y=(a-this.sinph0*Math.sin(r.y))*o,e.x*=s*this.cosph0;break;case Gt:r.y=Math.asin(e.y*s/o),e.y=a*o,e.x*=s;break;case Ut:r.y=Math.asin(a),e.y=-e.y;break;case Vt:r.y=-Math.asin(a)}r.x=Math.atan2(e.x,e.y)}return e.x=r.x+this.long0,e.y=r.y,e},names:["Tilted_Perspective","tpers"]};ve.defaultDatum="WGS84",ve.Proj=te,ve.WGS84=new ve.Proj("WGS84"),ve.Point=Le,ve.toPoint=ue,ve.defs=C,ve.nadgrid=function(e,t){var n=new DataView(t),i=function(e){var t=e.getInt32(8,!1);if(11===t)return!1;11!==(t=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),r=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Q(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(n,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o={header:r,subgrids:function(e,t,n){for(var i=[],r=0;r<t.nSubgrids;r++){var o=J(e,176,n),a=Z(e,176,o,n),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[X(o.lowerLongitude),X(o.lowerLatitude)],del:[X(o.longitudeInterval),X(o.latitudeInterval)],lim:[s,l],count:o.gridNodeCount,cvs:K(a)})}return i}(n,r,i)};return Y[e]=o,o},ve.transform=de,ve.mgrs=be,ve.version="__VERSION__",(qt=ve).Proj.projections.add(Ne),qt.Proj.projections.add(Ue),qt.Proj.projections.add(Ve),qt.Proj.projections.add(We),qt.Proj.projections.add(qe),qt.Proj.projections.add(Ye),qt.Proj.projections.add($e),qt.Proj.projections.add(Xe),qt.Proj.projections.add(Qe),qt.Proj.projections.add(ot),qt.Proj.projections.add(st),qt.Proj.projections.add(ct),qt.Proj.projections.add(ut),qt.Proj.projections.add(ht),qt.Proj.projections.add(dt),qt.Proj.projections.add(ft),qt.Proj.projections.add(pt),qt.Proj.projections.add(mt),qt.Proj.projections.add(vt),qt.Proj.projections.add(gt),qt.Proj.projections.add(yt),qt.Proj.projections.add(bt),qt.Proj.projections.add(xt),qt.Proj.projections.add(wt),qt.Proj.projections.add(It),qt.Proj.projections.add(jt),qt.Proj.projections.add(zt),qt.Proj.projections.add(Yt);t.default=ve},function(e,t,n){"use strict";n.r(t);var i=n(13),r=n.n(i),o=n(22),a=n.n(o),s=/%[sdj%]/g;function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=1,r=t[0],o=t.length;if("function"==typeof r)return r.apply(null,t.slice(1));if("string"==typeof r){for(var a=String(r).replace(s,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch(e){return"[Circular]"}break;default:return e}})),l=t[i];i<o;l=t[++i])a+=" "+l;return a}return r}function c(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function u(e,t,n){var i=0,r=e.length;!function o(a){if(a&&a.length)n(a);else{var s=i;i+=1,s<r?t(e[s],o):n([])}}([])}function h(e,t,n,i){if(t.first)return u(function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e),n,i);var r=t.firstFields||[];!0===r&&(r=Object.keys(e));var o=Object.keys(e),a=o.length,s=0,l=[],c=function(e){l.push.apply(l,e),++s===a&&i(l)};o.forEach((function(t){var i=e[t];-1!==r.indexOf(t)?u(i,n,c):function(e,t,n){var i=[],r=0,o=e.length;function a(e){i.push.apply(i,e),++r===o&&n(i)}e.forEach((function(e){t(e,a)}))}(i,n,c)}))}function d(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function f(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"===(void 0===i?"undefined":a()(i))&&"object"===a()(e[n])?e[n]=r()({},e[n],i):e[n]=i}return e}var p=function(e,t,n,i,r,o){!e.required||n.hasOwnProperty(e.field)&&!c(t,o||e.type)||i.push(l(r.messages.required,e.fullField))};var m=function(e,t,n,i,r){(/^\s+$/.test(t)||""===t)&&i.push(l(r.messages.whitespace,e.fullField))},v={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},g={integer:function(e){return g.number(e)&&parseInt(e,10)===e},float:function(e){return g.number(e)&&!g.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":a()(e))&&!g.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(v.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(v.url)},hex:function(e){return"string"==typeof e&&!!e.match(v.hex)}};var y=function(e,t,n,i,r){if(e.required&&void 0===t)p(e,t,n,i,r);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?g[o](t)||i.push(l(r.messages.types[o],e.fullField,e.type)):o&&(void 0===t?"undefined":a()(t))!==e.type&&i.push(l(r.messages.types[o],e.fullField,e.type))}};var b={required:p,whitespace:m,type:y,range:function(e,t,n,i,r){var o="number"==typeof e.len,a="number"==typeof e.min,s="number"==typeof e.max,c=t,u=null,h="number"==typeof t,d="string"==typeof t,f=Array.isArray(t);if(h?u="number":d?u="string":f&&(u="array"),!u)return!1;f&&(c=t.length),d&&(c=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?c!==e.len&&i.push(l(r.messages[u].len,e.fullField,e.len)):a&&!s&&c<e.min?i.push(l(r.messages[u].min,e.fullField,e.min)):s&&!a&&c>e.max?i.push(l(r.messages[u].max,e.fullField,e.max)):a&&s&&(c<e.min||c>e.max)&&i.push(l(r.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,t,n,i,r){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&i.push(l(r.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,i,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(l(r.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||i.push(l(r.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};var x=function(e,t,n,i,r){var o=e.type,a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t,o)&&!e.required)return n();b.required(e,t,i,a,r,o),c(t,o)||b.type(e,t,i,a,r)}n(a)},w={string:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t,"string")&&!e.required)return n();b.required(e,t,i,o,r,"string"),c(t,"string")||(b.type(e,t,i,o,r),b.range(e,t,i,o,r),b.pattern(e,t,i,o,r),!0===e.whitespace&&b.whitespace(e,t,i,o,r))}n(o)},method:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),void 0!==t&&b.type(e,t,i,o,r)}n(o)},number:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),void 0!==t&&(b.type(e,t,i,o,r),b.range(e,t,i,o,r))}n(o)},boolean:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),void 0!==t&&b.type(e,t,i,o,r)}n(o)},regexp:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),c(t)||b.type(e,t,i,o,r)}n(o)},integer:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),void 0!==t&&(b.type(e,t,i,o,r),b.range(e,t,i,o,r))}n(o)},float:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),void 0!==t&&(b.type(e,t,i,o,r),b.range(e,t,i,o,r))}n(o)},array:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t,"array")&&!e.required)return n();b.required(e,t,i,o,r,"array"),c(t,"array")||(b.type(e,t,i,o,r),b.range(e,t,i,o,r))}n(o)},object:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),void 0!==t&&b.type(e,t,i,o,r)}n(o)},enum:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();b.required(e,t,i,o,r),t&&b.enum(e,t,i,o,r)}n(o)},pattern:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t,"string")&&!e.required)return n();b.required(e,t,i,o,r),c(t,"string")||b.pattern(e,t,i,o,r)}n(o)},date:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(t)&&!e.required)return n();if(b.required(e,t,i,o,r),!c(t)){var a=void 0;a="number"==typeof t?new Date(t):t,b.type(e,a,i,o,r),a&&b.range(e,a.getTime(),i,o,r)}}n(o)},url:x,hex:x,email:x,required:function(e,t,n,i,r){var o=[],s=Array.isArray(t)?"array":void 0===t?"undefined":a()(t);b.required(e,t,i,o,r,s),n(o)}};function _(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var S=_();function M(e){this.rules=null,this._messages=S,this.define(e)}M.prototype={messages:function(e){return e&&(this._messages=f(_(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":a()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],o=e,s=n,c=i;if("function"==typeof s&&(c=s,s={}),this.rules&&0!==Object.keys(this.rules).length){if(s.messages){var u=this.messages();u===S&&(u=_()),f(u,s.messages),s.messages=u}else s.messages=this.messages();var p=void 0,m=void 0,v={},g=s.keys||Object.keys(this.rules);g.forEach((function(n){p=t.rules[n],m=o[n],p.forEach((function(i){var a=i;"function"==typeof a.transform&&(o===e&&(o=r()({},o)),m=o[n]=a.transform(m)),(a="function"==typeof a?{validator:a}:r()({},a)).validator=t.getValidationMethod(a),a.field=n,a.fullField=a.fullField||n,a.type=t.getType(a),a.validator&&(v[n]=v[n]||[],v[n].push({rule:a,value:m,source:o,field:n}))}))}));var y={};h(v,s,(function(e,t){var n=e.rule,i=!("object"!==n.type&&"array"!==n.type||"object"!==a()(n.fields)&&"object"!==a()(n.defaultField));function o(e,t){return r()({},t,{fullField:n.fullField+"."+e})}function c(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=a;if(Array.isArray(c)||(c=[c]),c.length,c.length&&n.message&&(c=[].concat(n.message)),c=c.map(d(n)),s.first&&c.length)return y[n.field]=1,t(c);if(i){if(n.required&&!e.value)return c=n.message?[].concat(n.message).map(d(n)):s.error?[s.error(n,l(s.messages.required,n.field))]:[],t(c);var u={};if(n.defaultField)for(var h in e.value)e.value.hasOwnProperty(h)&&(u[h]=n.defaultField);for(var f in u=r()({},u,e.rule.fields))if(u.hasOwnProperty(f)){var p=Array.isArray(u[f])?u[f]:[u[f]];u[f]=p.map(o.bind(null,f))}var m=new M(u);m.messages(s.messages),e.rule.options&&(e.rule.options.messages=s.messages,e.rule.options.error=s.error),m.validate(e.value,e.rule.options||s,(function(e){t(e&&e.length?c.concat(e):e)}))}else t(c)}i=i&&(n.required||!n.required&&e.value),n.field=e.field;var u=n.validator(n,e.value,c,e.source,s);u&&u.then&&u.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){b(e)}))}else c&&c();function b(e){var t,n=void 0,i=void 0,r=[],o={};for(n=0;n<e.length;n++)t=e[n],Array.isArray(t)?r=r.concat.apply(r,t):r.push(t);if(r.length)for(n=0;n<r.length;n++)o[i=r[n].field]=o[i]||[],o[i].push(r[n]);else r=null,o=null;c(r,o)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!w.hasOwnProperty(e.type))throw new Error(l("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?w.required:w[this.getType(e)]||!1}},M.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");w[e]=t},M.messages=S;t.default=M},function(e,t,n){"use strict";n.r(t),n.d(t,"DebugTilesRenderer",(function(){return ye})),n.d(t,"TilesRenderer",(function(){return ie})),n.d(t,"B3DMLoader",(function(){return _})),n.d(t,"PNTSLoader",(function(){return M})),n.d(t,"I3DMLoader",(function(){return D})),n.d(t,"CMPTLoader",(function(){return N})),n.d(t,"TilesRendererBase",(function(){return v})),n.d(t,"B3DMLoaderBase",(function(){return x})),n.d(t,"I3DMLoaderBase",(function(){return T})),n.d(t,"PNTSLoaderBase",(function(){return S})),n.d(t,"CMPTLoaderBase",(function(){return I})),n.d(t,"LRUCache",(function(){return a})),n.d(t,"PriorityQueue",(function(){return s})),n.d(t,"NONE",(function(){return ue})),n.d(t,"SCREEN_ERROR",(function(){return he})),n.d(t,"GEOMETRIC_ERROR",(function(){return de})),n.d(t,"DISTANCE",(function(){return fe})),n.d(t,"DEPTH",(function(){return pe})),n.d(t,"RELATIVE_DEPTH",(function(){return me})),n.d(t,"IS_LEAF",(function(){return ve})),n.d(t,"RANDOM_COLOR",(function(){return ge}));var i=n(0),r=n(83),o=n.n(r);class a{constructor(){this.maxSize=800,this.minSize=600,this.unloadPercent=.05,this.itemSet=new Map,this.itemList=[],this.usedSet=new Set,this.callbacks=new Map,this.unloadPriorityCallback=null;const e=this.itemSet;this.defaultPriorityCallback=t=>e.get(t)}isFull(){return this.itemSet.size>=this.maxSize}add(e,t){const n=this.itemSet;if(n.has(e))return!1;if(this.isFull())return!1;const i=this.usedSet,r=this.itemList,o=this.callbacks;return r.push(e),i.add(e),n.set(e,Date.now()),o.set(e,t),!0}remove(e){const t=this.usedSet,n=this.itemSet,i=this.itemList,r=this.callbacks;if(n.has(e)){r.get(e)(e);const o=i.indexOf(e);return i.splice(o,1),t.delete(e),n.delete(e),r.delete(e),!0}return!1}markUsed(e){const t=this.itemSet,n=this.usedSet;t.has(e)&&!n.has(e)&&(t.set(e,Date.now()),n.add(e))}markAllUnused(){this.usedSet.clear()}unloadUnusedContent(){const e=this.unloadPercent,t=this.minSize,n=this.itemList,i=this.itemSet,r=this.usedSet,o=this.callbacks,a=n.length-r.size,s=n.length-t,l=this.unloadPriorityCallback||this.defaultPriorityCallback;if(s>0&&a>0){n.sort((e,t)=>{const n=r.has(e),i=r.has(t);return n&&i?0:n||i?n?1:-1:l(t)-l(e)});const c=Math.min(s,a),u=Math.max(t*e,c*e);let h=Math.min(u,a);h=Math.ceil(h);const d=n.splice(0,h);for(let e=0,t=d.length;e<t;e++){const t=d[e];o.get(t)(t),i.delete(t),o.delete(t)}}}scheduleUnload(e=!0){var t;this.scheduled||(this.scheduled=!0,t=()=>{this.scheduled=!1,this.unloadUnusedContent(),e&&this.markAllUnused()},Promise.resolve().then(t))}}class s{constructor(){this.maxJobs=6,this.items=[],this.callbacks=new Map,this.currJobs=0,this.scheduled=!1,this.autoUpdate=!0,this.priorityCallback=()=>{throw new Error("PriorityQueue: PriorityCallback function not defined.")}}sort(){const e=this.priorityCallback;this.items.sort(e)}add(e,t){return new Promise((n,i)=>{const r=this.items,o=this.callbacks;r.push(e),o.set(e,(...e)=>t(...e).then(n).catch(i)),this.autoUpdate&&this.scheduleJobRun()})}remove(e){const t=this.items,n=this.callbacks,i=t.indexOf(e);-1!==i&&(t.splice(i,1),n.delete(e))}tryRunJobs(){this.sort();const e=this.items,t=this.callbacks,n=this.maxJobs;let i=this.currJobs;for(;n>i&&e.length>0;){i++;const n=e.pop(),r=t.get(n);t.delete(n),r(n).then(()=>{this.currJobs--,this.autoUpdate&&this.scheduleJobRun()}).catch(()=>{this.currJobs--,this.autoUpdate&&this.scheduleJobRun()})}this.currJobs=i}scheduleJobRun(){this.scheduled||(requestAnimationFrame(()=>{this.tryRunJobs(),this.scheduled=!1}),this.scheduled=!0)}}function l(e){return 3===e||4===e}function c(e,t){return e.__lastFrameVisited===t&&e.__used}function u(e,t){e.__lastFrameVisited!==t&&(e.__lastFrameVisited=t,e.__used=!1,e.__inFrustum=!1,e.__isLeaf=!1,e.__visible=!1,e.__active=!1,e.__error=1/0,e.__distanceFromCamera=1/0,e.__childrenWereVisible=!1,e.__allChildrenLoaded=!1)}function h(e,t,n){if(u(e,t),e.__used=!0,n.markUsed(e),e.__contentEmpty){const i=e.children;for(let e=0,r=i.length;e<r;e++)h(i[e],t,n)}}function d(e,t,n){if(e.__contentEmpty&&(!e.__externalTileSet||l(e.__loadingState))){const i=e.children;for(let e=0,r=i.length;e<r;e++){const r=i[e];r.__depthFromRenderedParent=t,d(r,t,n)}}else n.requestTileContents(e)}function f(e,t=null,n=null,i=null,r=0){if(t&&t(e,i,r))return void(n&&n(e,i,r));const o=e.children;for(let i=0,a=o.length;i<a;i++)f(o[i],t,n,e,r+1);n&&n(e,i,r)}const p=(e,t)=>e.__inFrustum!==t.__inFrustum?e.__inFrustum?1:-1:e.__used!==t.__used?e.__used?1:-1:e.__error!==t.__error?e.__error-t.__error:e.__distanceFromCamera!==t.__distanceFromCamera?e.__distanceFromCamera-t.__distanceFromCamera:0,m=e=>1/(e.__depthFromRenderedParent+1);class v{get rootTileSet(){const e=this.tileSets[this.rootURL];return!e||e instanceof Promise?null:e}get root(){const e=this.rootTileSet;return e?e.root:null}constructor(e){this.tileSets={},this.rootURL=e,this.fetchOptions={},this.preprocessURL=null;const t=new a;t.unloadPriorityCallback=m;const n=new s;n.maxJobs=4,n.priorityCallback=p;const i=new s;i.maxJobs=1,i.priorityCallback=p,this.lruCache=t,this.downloadQueue=n,this.parseQueue=i,this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0,this.errorTarget=6,this.errorThreshold=1/0,this.loadSiblings=!0,this.displayActiveTiles=!1,this.maxDepth=1/0,this.stopAtEmptyTiles=!0}traverse(e,t){const n=this.tileSets[this.rootURL];n&&n.root&&f(n.root,e,t)}update(){const e=this.stats,t=this.lruCache,n=this.tileSets,i=n[this.rootURL];if(!(this.rootURL in n))return void this.loadRootTileSet(this.rootURL);if(!i||!i.root)return;const r=i.root;e.inFrustum=0,e.used=0,e.active=0,e.visible=0,this.frameCount++,function e(t,n){const i=n.stats,r=n.frameCount,o=n.errorTarget,a=n.maxDepth,s=n.loadSiblings,l=n.lruCache,c=n.stopAtEmptyTiles;if(u(t,r),!1===n.tileInView(t))return!1;if(t.__used=!0,l.markUsed(t),t.__inFrustum=!0,i.inFrustum++,(c||!t.__contentEmpty)&&!t.__externalTileSet){n.calculateError(t);if(t.__error<=o)return!0;if(n.maxDepth>0&&t.__depth+1>=a)return!0}let d=!1;const f=t.children;for(let t=0,i=f.length;t<i;t++){const i=e(f[t],n);d=d||i}if(d&&s)for(let e=0,t=f.length;e<t;e++){h(f[e],r,l)}return!0}(r,this),function e(t,n){const i=n.stats,r=n.frameCount;if(!c(t,r))return;i.used++;const o=t.children;let a=!1;for(let e=0,t=o.length;e<t;e++){const t=o[e];a=a||c(t,r)}if(a){let i=!1,a=!0;for(let t=0,s=o.length;t<s;t++){const s=o[t];if(e(s,n),i=i||s.__wasSetVisible||s.__childrenWereVisible,c(s,r)){const e=s.__allChildrenLoaded||!s.__contentEmpty&&l(s.__loadingState)||s.__externalTileSet&&4===s.__loadingState;a=a&&e}}t.__childrenWereVisible=i,t.__allChildrenLoaded=a}else t.__isLeaf=!0}(r,this),function e(t,n){const i=n.stats,r=n.frameCount;if(!c(t,r))return;const o=t.parent,a=o?o.__depthFromRenderedParent:-1;t.__depthFromRenderedParent=a;const s=n.lruCache;if(t.__isLeaf)return t.__depthFromRenderedParent++,void(3===t.__loadingState?(t.__inFrustum&&(t.__visible=!0,i.visible++),t.__active=!0,i.active++):s.isFull()||t.__contentEmpty&&!t.__externalTileSet||n.requestTileContents(t));const u=(n.errorTarget+1)*n.errorThreshold,h=t.__error<=u,f=h||"ADD"===t.refine,p=!t.__contentEmpty,m=p||t.__externalTileSet,v=l(t.__loadingState)&&m,g=t.__childrenWereVisible,y=t.children;let b=t.__allChildrenLoaded;if(f&&p&&t.__depthFromRenderedParent++,f&&!v&&!s.isFull()&&m&&n.requestTileContents(t),(h&&!b&&!g&&v||"ADD"===t.refine&&v)&&(t.__inFrustum&&(t.__visible=!0,i.visible++),t.__active=!0,i.active++),"ADD"!==t.refine&&h&&!b&&v)for(let e=0,i=y.length;e<i;e++){const i=y[e];c(i,r)&&!s.isFull()&&(i.__depthFromRenderedParent=t.__depthFromRenderedParent+1,d(i,i.__depthFromRenderedParent,n))}else for(let t=0,i=y.length;t<i;t++){const i=y[t];c(i,r)&&e(i,n)}}(r,this),function e(t,n){const i=c(t,n.frameCount);if(i||t.__usedLastFrame){let r=!1,o=!1;i&&(r=t.__active,o=n.displayActiveTiles&&t.__active||t.__visible),t.__contentEmpty||3!==t.__loadingState||(t.__wasSetActive!==r&&n.setTileActive(t,r),t.__wasSetVisible!==o&&n.setTileVisible(t,o)),t.__wasSetActive=r,t.__wasSetVisible=o,t.__usedLastFrame=i;const a=t.children;for(let t=0,i=a.length;t<i;t++){e(a[t],n)}}}(r,this),t.scheduleUnload()}parseTile(e,t,n){return null}disposeTile(e){}preprocessNode(e,t,n){e.content&&(!("uri"in e.content)&&"url"in e.content&&(e.content.uri=e.content.url,delete e.content.url),e.content.uri&&(e.content.uri=function(...e){const t=/^[a-zA-Z]+:\/\//;let n=-1;for(let i=0,r=e.length;i<r;i++)t.test(e[i])&&(n=i);if(-1===n)return o.a.join(...e).replace(/\\/g,"/");{const i=n<=0?e:e.slice(n),r=i[0].match(t)[0];return i[0]=i[0].substring(r.length),(r+o.a.join(...i)).replace(/\\/g,"/")}}(n,e.content.uri)),e.content.boundingVolume&&!("box"in e.content.boundingVolume||"sphere"in e.content.boundingVolume||"region"in e.content.boundingVolume)&&delete e.content.boundingVolume),e.parent=t,e.children=e.children||[];if(e.content&&e.content.uri){const t=/\.json$/i.test(e.content.uri);e.__externalTileSet=t,e.__contentEmpty=t}else e.__externalTileSet=!1,e.__contentEmpty=!0;e.__distanceFromCamera=1/0,e.__error=1/0,e.__inFrustum=!1,e.__isLeaf=!1,e.__usedLastFrame=!1,e.__used=!1,e.__wasSetVisible=!1,e.__visible=!1,e.__childrenWereVisible=!1,e.__allChildrenLoaded=!1,e.__wasSetActive=!1,e.__active=!1,e.__loadingState=0,e.__loadIndex=0,e.__loadAbort=null,e.__depthFromRenderedParent=-1,null===t?(e.__depth=0,e.refine=e.refine||"REPLACE"):(e.__depth=t.__depth+1,e.refine=e.refine||t.refine)}setTileActive(e,t){}setTileVisible(e,t){}calculateError(e){return 0}tileInView(e){return!0}fetchTileSet(e,t,n=null){return fetch(e,t).then(t=>{if(t.ok)return t.json();throw new Error(`TilesRenderer: Failed to load tileset "${e}" with status ${t.status} : ${t.statusText}`)}).then(t=>{const i=t.asset.version;console.assert("1.0"===i||"0.0"===i,'asset.version is expected to be a string of "1.0" or "0.0"');const r=o.a.dirname(e);return f(t.root,(e,t)=>this.preprocessNode(e,t,r),null,n,n?n.__depth:0),t})}loadRootTileSet(e){const t=this.tileSets;if(e in t)return t[e]instanceof Error?Promise.reject(t[e]):Promise.resolve(t[e]);{const n=this.fetchTileSet(e,this.fetchOptions).then(n=>{t[e]=n});return n.catch(n=>{console.error(n),t[e]=n}),t[e]=n,n}}requestTileContents(e){if(0!==e.__loadingState)return;const t=this.stats,n=this.lruCache,i=this.downloadQueue,r=this.parseQueue,o=e.__externalTileSet;n.add(e,e=>{1===e.__loadingState?(e.__loadAbort.abort(),e.__loadAbort=null):o?e.children.length=0:this.disposeTile(e),1===e.__loadingState?t.downloading--:2===e.__loadingState&&t.parsing--,e.__loadingState=0,e.__loadIndex++,r.remove(e),i.remove(e)}),e.__loadIndex++;const a=e.__loadIndex,s=new AbortController,l=s.signal;t.downloading++,e.__loadAbort=s,e.__loadingState=1;const c=o=>{e.__loadIndex===a&&("AbortError"!==o.name?(r.remove(e),i.remove(e),2===e.__loadingState?t.parsing--:1===e.__loadingState&&t.downloading--,t.failed++,console.error(`TilesRenderer : Failed to load tile at url "${e.content.uri}".`),console.error(o),e.__loadingState=4):n.remove(e))};o?i.add(e,e=>{if(e.__loadIndex!==a)return Promise.resolve();const t=this.preprocessURL?this.preprocessURL(e.content.uri):e.content.uri;return this.fetchTileSet(t,Object.assign({signal:l},this.fetchOptions),e)}).then(n=>{e.__loadIndex===a&&(t.downloading--,e.__loadAbort=null,e.__loadingState=3,e.children.push(n.root))}).catch(c):i.add(e,e=>{if(e.__loadIndex!==a)return Promise.resolve();const t=this.preprocessURL?this.preprocessURL(e.content.uri):e.content.uri;return fetch(t,Object.assign({signal:l},this.fetchOptions))}).then(t=>{if(e.__loadIndex===a){if(t.ok)return t.arrayBuffer();throw new Error("Failed to load model with error code "+t.status)}}).then(n=>{if(e.__loadIndex===a)return t.downloading--,t.parsing++,e.__loadAbort=null,e.__loadingState=2,r.add(e,e=>{if(e.__loadIndex!==a)return Promise.resolve();const t=e.content.uri.split(/\./g).pop();return this.parseTile(n,e,t)})}).then(()=>{e.__loadIndex===a&&(t.parsing--,e.__loadingState=3,e.__wasSetVisible&&this.setTileVisible(e,!0),e.__wasSetActive&&this.setTileActive(e,!0))}).catch(c)}dispose(){const e=this.lruCache;this.traverse(t=>{e.remove(t)})}}function g(e){return(new TextDecoder).decode(e)}class y{constructor(e,t,n,i){this.buffer=e,this.binOffset=t+n,this.binLength=i;let r=null;if(0!==n){const i=new Uint8Array(e,t,n);r=JSON.parse(g(i))}else r={};this.header=r}getKeys(){return Object.keys(this.header)}getData(e,t,n=null,i=null){const r=this.header;if(!(e in r))return null;const o=r[e];if(o instanceof Object){if(Array.isArray(o))return o;{const{buffer:r,binOffset:a,binLength:s}=this,l=o.byteOffset||0,c=o.type||i,u=o.componentType||n;if("type"in o&&i&&o.type!==i)throw new Error("FeatureTable: Specified type does not match expected type.");let h,d;switch(c){case"SCALAR":h=1;break;case"VEC2":h=2;break;case"VEC3":h=3;break;case"VEC4":h=4;break;default:throw new Error(`FeatureTable : Feature type not provided for "${e}".`)}const f=a+l,p=t*h;switch(u){case"BYTE":d=new Int8Array(r,f,p);break;case"UNSIGNED_BYTE":d=new Uint8Array(r,f,p);break;case"SHORT":d=new Int16Array(r,f,p);break;case"UNSIGNED_SHORT":d=new Uint16Array(r,f,p);break;case"INT":d=new Int32Array(r,f,p);break;case"UNSIGNED_INT":d=new Uint32Array(r,f,p);break;case"FLOAT":d=new Float32Array(r,f,p);break;case"DOUBLE":d=new Float64Array(r,f,p);break;default:throw new Error(`FeatureTable : Feature component type not provided for "${e}".`)}if(f+p*d.BYTES_PER_ELEMENT>a+s)throw new Error("FeatureTable: Feature data read outside binary body length.");return d}}return o}}class b extends y{constructor(e,t,n,i,r){super(e,n,i,r),this.batchSize=t}getData(e,t=null,n=null){return super.getData(e,this.batchSize,n,t)}}class x{constructor(){this.fetchOptions={},this.workingPath=""}load(e){return fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(t=>{if(""===this.workingPath){const t=e.split(/\\\//g);t.pop(),this.workingPath=t.join("/")}return this.parse(t)})}parse(e){const t=new DataView(e),n=String.fromCharCode(t.getUint8(0))+String.fromCharCode(t.getUint8(1))+String.fromCharCode(t.getUint8(2))+String.fromCharCode(t.getUint8(3));console.assert("b3dm"===n);const i=t.getUint32(4,!0);console.assert(1===i);const r=t.getUint32(8,!0);console.assert(r===e.byteLength);const o=t.getUint32(12,!0),a=t.getUint32(16,!0),s=t.getUint32(20,!0),l=t.getUint32(24,!0),c=e.slice(28,28+o+a),u=new y(c,0,o,a),h=28+o+a,d=e.slice(h,h+s+l),f=new b(d,u.getData("BATCH_LENGTH"),0,s,l),p=h+s+l;return{version:i,featureTable:u,batchTable:f,glbBytes:new Uint8Array(e,p,r-p)}}}var w=n(81);class _ extends x{constructor(e=i.DefaultLoadingManager){super(),this.manager=e}parse(e){const t=super.parse(e),n=t.glbBytes.slice().buffer;return new Promise((e,i)=>{const r=this.manager,o=this.fetchOptions,a=r.getHandler("path.gltf")||new w.GLTFLoader(r);"include"===o.credentials&&"cors"===o.mode&&a.setCrossOrigin("use-credentials"),"credentials"in o&&a.setWithCredentials("include"===o.credentials),o.headers&&a.setRequestHeader(o.headers);let s=this.workingPath;/[\\/]$/.test(s)||(s+="/"),a.parse(n,s,n=>{const{batchTable:i,featureTable:r}=t,{scene:o}=n,a=r.getData("RTC_CENTER");a&&(o.position.x+=a[0],o.position.y+=a[1],o.position.z+=a[2]),n.batchTable=i,n.featureTable=r,o.batchTable=i,o.featureTable=r,e(n)},i)})}}class S{constructor(){this.fetchOptions={}}load(e){return fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(e=>this.parse(e))}parse(e){const t=new DataView(e),n=String.fromCharCode(t.getUint8(0))+String.fromCharCode(t.getUint8(1))+String.fromCharCode(t.getUint8(2))+String.fromCharCode(t.getUint8(3));console.assert("pnts"===n);const i=t.getUint32(4,!0);console.assert(1===i);const r=t.getUint32(8,!0);console.assert(r===e.byteLength);const o=t.getUint32(12,!0),a=t.getUint32(16,!0),s=t.getUint32(20,!0),l=t.getUint32(24,!0),c=e.slice(28,28+o+a),u=new y(c,0,o,a),h=28+o+a,d=e.slice(h,h+s+l),f=new b(d,u.getData("BATCH_LENGTH")||u.getData("POINTS_LENGTH"),0,s,l);return{version:i,featureTable:u,batchTable:f}}}class M extends S{constructor(e=i.DefaultLoadingManager){super(),this.manager=e}parse(e){const t=super.parse(e),{featureTable:n}=t,r=n.getData("POINTS_LENGTH"),o=n.getData("POSITION",r,"FLOAT","VEC3"),a=n.getData("RGB",r,"UNSIGNED_BYTE","VEC3");["RTC_CENTER","QUANTIZED_VOLUME_OFFSET","QUANTIZED_VOLUME_SCALE","CONSTANT_RGBA","BATCH_LENGTH","POSITION_QUANTIZED","RGBA","RGB565","NORMAL","NORMAL_OCT16P"].forEach(e=>{e in n.header&&console.warn(`PNTSLoader: Unsupported FeatureTable feature "${e}" detected.`)});const s=new i.BufferGeometry;s.setAttribute("position",new i.BufferAttribute(o,3,!1));const l=new i.PointsMaterial;l.size=2,l.sizeAttenuation=!1,null!==a&&(s.setAttribute("color",new i.BufferAttribute(a,3,!0)),l.vertexColors=!0);const c=new i.Points(s,l);t.scene=c,t.scene.featureTable=n;const u=n.getData("RTC_CENTER");return u&&(t.scene.position.x+=u[0],t.scene.position.y+=u[1],t.scene.position.z+=u[2]),t}}class T{constructor(){this.fetchOptions={},this.workingPath=""}resolveExternalURL(e){return this.workingPath+"/"+e}load(e){return fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(t=>{if(""===this.workingPath){const t=e.split(/\\\//g);t.pop(),this.workingPath=t.join("/")}return this.parse(t)})}parse(e){const t=new DataView(e),n=String.fromCharCode(t.getUint8(0))+String.fromCharCode(t.getUint8(1))+String.fromCharCode(t.getUint8(2))+String.fromCharCode(t.getUint8(3));console.assert("i3dm"===n);const i=t.getUint32(4,!0);console.assert(1===i);const r=t.getUint32(8,!0);console.assert(r===e.byteLength);const o=t.getUint32(12,!0),a=t.getUint32(16,!0),s=t.getUint32(20,!0),l=t.getUint32(24,!0),c=t.getUint32(28,!0),u=e.slice(32,32+o+a),h=new y(u,0,o,a),d=32+o+a,f=e.slice(d,d+s+l),p=new b(f,h.getData("INSTANCES_LENGTH"),0,s,l),m=d+s+l,v=new Uint8Array(e,m,r-m);let x=null,w=null;if(c)x=v,w=Promise.resolve();else{const e=this.resolveExternalURL(g(v));w=fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`I3DMLoaderBase : Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(e=>{x=new Uint8Array(e)})}return w.then(()=>({version:i,featureTable:h,batchTable:p,glbBytes:x}))}}const E=new i.Vector3,C=new i.Vector3,A=new i.Vector3,O=new i.Vector3,L=new i.Quaternion,k=new i.Vector3,P=new i.Matrix4;class D extends T{constructor(e=i.DefaultLoadingManager){super(),this.manager=e}resolveExternalURL(e){return this.manager.resolveURL(super.resolveExternalURL(e))}parse(e){return super.parse(e).then(e=>{const{featureTable:t,batchTable:n}=e,r=e.glbBytes.slice().buffer;return new Promise((e,o)=>{const a=this.fetchOptions,s=this.manager,l=s.getHandler("path.gltf")||new w.GLTFLoader(s);"include"===a.credentials&&"cors"===a.mode&&l.setCrossOrigin("use-credentials"),"credentials"in a&&l.setWithCredentials("include"===a.credentials),a.headers&&l.setRequestHeader(a.headers);let c=this.workingPath;/[\\/]$/.test(c)||(c+="/"),l.parse(r,c,r=>{const o=t.getData("INSTANCES_LENGTH"),a=t.getData("POSITION",o,"FLOAT","VEC3"),s=t.getData("NORMAL_UP",o,"FLOAT","VEC3"),l=t.getData("NORMAL_RIGHT",o,"FLOAT","VEC3"),c=t.getData("SCALE_NON_UNIFORM",o,"FLOAT","VEC3"),u=t.getData("SCALE",o,"FLOAT","SCALAR");["RTC_CENTER","QUANTIZED_VOLUME_OFFSET","QUANTIZED_VOLUME_SCALE","EAST_NORTH_UP","POSITION_QUANTIZED","NORMAL_UP_OCT32P","NORMAL_RIGHT_OCT32P"].forEach(e=>{e in t.header&&console.warn(`I3DMLoader: Unsupported FeatureTable feature "${e}" detected.`)});const h=new Map,d=[];r.scene.traverse(e=>{if(e.isMesh){const{geometry:t,material:n}=e,r=new i.InstancedMesh(t,n,o);r.position.copy(e.position),r.rotation.copy(e.rotation),r.scale.copy(e.scale),d.push(r),h.set(e,r)}});const f=new i.Vector3;for(let e=0;e<o;e++)f.x+=a[3*e+0]/o,f.y+=a[3*e+1]/o,f.z+=a[3*e+2]/o;h.forEach((e,t)=>{const n=t.parent;n&&(n.remove(t),n.add(e),e.updateMatrixWorld(),e.position.copy(f).applyMatrix4(e.matrixWorld))});for(let e=0;e<o;e++){O.set(a[3*e+0]-f.x,a[3*e+1]-f.y,a[3*e+2]-f.z),s?(C.set(s[3*e+0],s[3*e+1],s[3*e+2]),A.set(l[3*e+0],l[3*e+1],l[3*e+2]),E.crossVectors(A,C).normalize(),P.makeBasis(A,C,E),L.setFromRotationMatrix(P)):L.set(0,0,0,1),u?k.setScalar(u[e]):c?k.set(c[3*e+0],c[3*e+1],c[3*e+2]):k.set(1,1,1),P.compose(O,L,k);for(let t=0,n=d.length;t<n;t++){d[t].setMatrixAt(e,P)}}r.batchTable=n,r.featureTable=t,r.scene.batchTable=n,r.scene.featureTable=t,e(r)},o)})})}}class I{constructor(){this.fetchOptions={},this.workingPath=""}load(e){return fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(t=>{if(""===this.workingPath){const t=e.split(/\\\//g);t.pop(),this.workingPath=t.join("/")}return this.parse(t)})}parse(e){const t=new DataView(e),n=String.fromCharCode(t.getUint8(0))+String.fromCharCode(t.getUint8(1))+String.fromCharCode(t.getUint8(2))+String.fromCharCode(t.getUint8(3));console.assert("cmpt"===n,'CMPTLoader: The magic bytes equal "cmpt".');const i=t.getUint32(4,!0);console.assert(1===i,'CMPTLoader: The version listed in the header is "1".');const r=t.getUint32(8,!0);console.assert(r===e.byteLength,"CMPTLoader: The contents buffer length listed in the header matches the file.");const o=t.getUint32(12,!0),a=[];let s=16;for(let t=0;t<o;t++){const t=new DataView(e,s,12),n=String.fromCharCode(t.getUint8(0))+String.fromCharCode(t.getUint8(1))+String.fromCharCode(t.getUint8(2))+String.fromCharCode(t.getUint8(3)),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=new Uint8Array(e,s,r);a.push({type:n,buffer:o,version:i}),s+=r}return{version:i,tiles:a}}}class N extends I{constructor(e=i.DefaultLoadingManager){super(),this.manager=e}parse(e){const t=super.parse(e),n=this.manager,r=[];for(const e in t.tiles){const{type:i,buffer:o}=t.tiles[e];switch(i){case"b3dm":{const e=o.slice(),t=new _(n);t.workingPath=this.workingPath,t.fetchOptions=this.fetchOptions;const i=t.parse(e.buffer);r.push(i);break}case"pnts":{const e=o.slice(),t=new M(n).parse(e.buffer),i=Promise.resolve(t);r.push(i);break}case"i3dm":{const e=o.slice(),t=new D(n);t.workingPath=this.workingPath,t.fetchOptions=this.fetchOptions;const i=t.parse(e.buffer);r.push(i);break}}}return Promise.all(r).then(e=>{const t=new i.Group;return e.forEach(e=>{t.add(e.scene)}),{tiles:e,scene:t}})}}const F=new i.Matrix4;class R extends i.Group{constructor(e){super(),this.tilesRenderer=e}raycast(e,t){this.tilesRenderer.optimizeRaycast&&this.tilesRenderer.raycast(e,t)}updateMatrixWorld(e){if(this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldNeedsUpdate||e){null===this.parent?F.copy(this.matrix):F.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1;const e=F.elements,t=this.matrixWorld.elements;let n=!1;for(let i=0;i<16;i++){const r=e[i],o=t[i];if(Math.abs(r-o)>Number.EPSILON){n=!0;break}}if(n){this.matrixWorld.copy(F);const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateMatrixWorld()}}}}const B=new i.Sphere,j=new i.Matrix4,z=new i.Vector3,U=new i.Vector3,V=new i.Ray,G=[];function H(e,t){return e.distance-t.distance}function W(e,t,n){e.traverse(e=>{Object.getPrototypeOf(e).raycast.call(e,t,n)})}const q=Symbol("INITIAL_FRUSTUM_CULLED"),Y=i.Math.DEG2RAD,$=new i.Matrix4,X=new i.Matrix4,Q=new i.Vector3,K=new i.Vector3,J=new i.Vector3,Z=new i.Vector3,ee=new i.Vector3(1,0,0),te=new i.Vector3(0,1,0);function ne(e,t){e.traverse(e=>{e.frustumCulled=e[q]&&t})}class ie extends v{get autoDisableRendererCulling(){return this._autoDisableRendererCulling}set autoDisableRendererCulling(e){this._autoDisableRendererCulling!==e&&(super._autoDisableRendererCulling=e,this.traverse(t=>{t.scene&&ne(t.scene,e)}))}constructor(...e){super(...e),this.group=new R(this),this.cameras=[],this.cameraMap=new Map,this.cameraInfo=[],this.activeTiles=new Set,this.visibleTiles=new Set,this._autoDisableRendererCulling=!0,this.optimizeRaycast=!0,this.onLoadTileSet=null,this.onLoadModel=null,this.onDisposeModel=null;const t=new i.LoadingManager;t.setURLModifier(e=>this.preprocessURL?this.preprocessURL(e):e),this.manager=t;const n=this;this._overridenRaycast=function(e,t){n.optimizeRaycast||Object.getPrototypeOf(this).raycast.call(this,e,t)}}getBounds(e){if(!this.root)return!1;const t=this.root.cached,n=t.box,i=t.boxTransform;return!!n&&(e.copy(n),e.applyMatrix4(i),!0)}getOrientedBounds(e,t){if(!this.root)return!1;const n=this.root.cached,i=n.box,r=n.boxTransform;return!!e&&(e.copy(i),t.copy(r),!0)}forEachLoadedModel(e){this.traverse(t=>{const n=t.cached.scene;n&&e(n,t)})}raycast(e,t){if(this.root)if(e.firstHitOnly){const n=function e(t,n,i,r){if(i.has(t)){if(W(t.cached.scene,r,G),G.length>0){G.length>1&&G.sort(H);const e=G[0];return G.length=0,e}return null}const o=[],a=t.children;for(let e=0,t=a.length;e<t;e++){const t=a[e],i=t.cached,s=n.matrixWorld;j.copy(s);const l=i.sphere;if(l&&(B.copy(l),B.applyMatrix4(j),!r.ray.intersectsSphere(B)))continue;const c=i.box,u=i.boxTransform;if(c){if(j.multiply(u).invert(),V.copy(r.ray),V.applyMatrix4(j),!V.intersectBox(c,z))continue;{let e;U.setFromMatrixScale(j),e=U.x,Math.abs(Math.max(U.x-U.y,U.x-U.z))>1e-6&&console.warn("ThreeTilesRenderer : Non uniform scale used for tile which may cause issues when raycasting.");let n={distance:1/0,tile:null};o.push(n),n.distance=z.distanceToSquared(V.origin)*e*e,n.tile=t}}}o.sort(H);let s=1/0,l=null;for(let t=0,a=o.length;t<a;t++){const a=o[t];if(a.distance>s)break;{const t=a.tile,o=t.cached.scene;let c=null;if(i.has(t)?(W(o,r,G),G.length>0&&(G.length>1&&G.sort(H),c=G[0])):c=e(t,n,i,r),c){const e=c.distance*c.distance;e<s&&(s=e,l=c),G.length=0}}}return l}(this.root,this.group,this.activeTiles,e);n&&t.push(n)}else!function e(t,n,i,r,o){const a=t.cached,s=n.matrixWorld;j.copy(s);const l=a.sphere;if(l&&(B.copy(l),B.applyMatrix4(j),!r.ray.intersectsSphere(B)))return;const c=a.box,u=a.boxTransform;if(c&&(j.multiply(u).invert(),V.copy(r.ray).applyMatrix4(j),!V.intersectsBox(c)))return;const h=a.scene;if(i.has(t))return void W(h,r,o);const d=t.children;for(let t=0,a=d.length;t<a;t++)e(d[t],n,i,r,o)}(this.root,this.group,this.activeTiles,e,t)}hasCamera(e){return this.cameraMap.has(e)}setCamera(e){const t=this.cameras,n=this.cameraMap;return!n.has(e)&&(n.set(e,new i.Vector2),t.push(e),!0)}setResolution(e,t,n){const r=this.cameraMap;return!!r.has(e)&&(t instanceof i.Vector2?r.get(e).copy(t):r.get(e).set(t,n),!0)}setResolutionFromRenderer(e,t){const n=this.cameraMap;if(!n.has(e))return!1;const i=n.get(e);return t.getSize(i),i.multiplyScalar(t.getPixelRatio()),!0}deleteCamera(e){const t=this.cameras,n=this.cameraMap;if(n.has(e)){const i=t.indexOf(e);return t.splice(i,1),n.delete(e),!0}return!1}fetchTileSet(e,...t){const n=super.fetchTileSet(e,...t);return n.then(t=>{this.onLoadTileSet&&Promise.resolve().then(()=>{this.onLoadTileSet(t,e)})}),n}update(){const e=this.group,t=this.cameras,n=this.cameraMap,r=this.cameraInfo;if(0===t.length)return void console.warn("TilesRenderer: no cameras defined. Cannot update 3d tiles.");for(;r.length>t.length;)r.pop();for(;r.length<t.length;)r.push({frustum:new i.Frustum,sseDenominator:-1,position:new i.Vector3,invScale:-1,pixelSize:0});let o;X.copy((new i.Matrix4).getInverse(e.matrixWorld)),Q.setFromMatrixScale(X),o=Q.x,Math.abs(Math.max(Q.x-Q.y,Q.x-Q.z))>1e-6&&console.warn("ThreeTilesRenderer : Non uniform scale used for tile which may cause issues when calculating screen space error.");for(let i=0,a=r.length;i<a;i++){const a=t[i],s=r[i],l=s.frustum,c=s.position,u=n.get(a);if(0!==u.width&&0!==u.height||console.warn("TilesRenderer: resolution for camera error calculation is not set."),a.isPerspectiveCamera&&(s.sseDenominator=2*Math.tan(.5*a.fov*Y)/u.height),a.isOrthographicCamera){const e=a.right-a.left,t=a.top-a.bottom;s.pixelSize=Math.max(t/u.height,e/u.width)}s.invScale=o,$.copy(e.matrixWorld),$.premultiply(a.matrixWorldInverse),$.premultiply(a.projectionMatrix),l.setFromProjectionMatrix($),c.set(0,0,0),c.applyMatrix4(a.matrixWorld),c.applyMatrix4(X)}super.update()}preprocessNode(e,t,n){super.preprocessNode(e,t,n);const r=new i.Matrix4;if(e.transform){const t=e.transform;for(let e=0;e<16;e++)r.elements[e]=t[e]}else r.identity();t&&r.premultiply(t.cached.transform);let o=null,a=null,s=null;if("box"in e.boundingVolume){const t=e.boundingVolume.box;o=new i.Box3,a=new i.Matrix4,s=new i.Matrix4,K.set(t[3],t[4],t[5]),J.set(t[6],t[7],t[8]),Z.set(t[9],t[10],t[11]);const n=K.length(),l=J.length(),c=Z.length();K.normalize(),J.normalize(),Z.normalize(),0===n&&K.crossVectors(J,Z),0===l&&J.crossVectors(K,Z),0===c&&Z.crossVectors(K,J),a.set(K.x,J.x,Z.x,t[0],K.y,J.y,Z.y,t[1],K.z,J.z,Z.z,t[2],0,0,0,1),a.premultiply(r),s.copy((new i.Matrix4).getInverse(a)),o.min.set(-n,-l,-c),o.max.set(n,l,c)}let l=null;if("sphere"in e.boundingVolume){const t=e.boundingVolume.sphere;l=new i.Sphere,l.center.set(t[0],t[1],t[2]),l.radius=t[3],l.applyMatrix4(r)}else if("box"in e.boundingVolume){const t=e.boundingVolume.box;l=new i.Sphere,o.getBoundingSphere(l),l.center.set(t[0],t[1],t[2]),l.applyMatrix4(r)}"region"in e.boundingVolume&&console.warn("ThreeTilesRenderer: region bounding volume not supported."),e.cached={loadIndex:0,transform:r,active:!1,inFrustum:[],box:o,boxTransform:a,boxTransformInverse:s,sphere:l,region:null,scene:null,geometry:null,material:null}}parseTile(e,t,n){t._loadIndex=t._loadIndex||0,t._loadIndex++;const r=t.content.uri.split(/[\\\/]/g);r.pop();const o=r.join("/"),a=this.fetchOptions,s=this.manager,l=t._loadIndex;let c=null;switch(n){case"b3dm":const t=new _(s);t.workingPath=o,t.fetchOptions=a,c=t.parse(e).then(e=>e.scene);break;case"pnts":c=Promise.resolve(new M(s).parse(e).scene);break;case"i3dm":{const t=new D(s);t.workingPath=o,t.fetchOptions=a,c=t.parse(e).then(e=>e.scene);break}case"cmpt":{const t=new N(s);t.workingPath=o,t.fetchOptions=a,c=t.parse(e).then(e=>e.scene);break}default:console.warn(`TilesRenderer: Content type "${n}" not supported.`),c=Promise.resolve(null)}return c.then(e=>{if(t._loadIndex!==l)return;const r=this.rootTileSet.asset&&this.rootTileSet.asset.gltfUpAxis||"y",o=t.cached,a=o.transform;switch(r.toLowerCase()){case"x":$.makeRotationAxis(te,-Math.PI/2);break;case"y":$.makeRotationAxis(ee,Math.PI/2);break;case"z":$.identity()}e.updateMatrix(),"pnts"!==n&&e.matrix.multiply($),e.matrix.premultiply(a),e.matrix.decompose(e.position,e.quaternion,e.scale),e.traverse(e=>{e[q]=e.frustumCulled}),ne(e,this.autoDisableRendererCulling),o.scene=e,e.traverse(e=>{e.raycast=this._overridenRaycast});const s=[],c=[],u=[];e.traverse(e=>{if(e.geometry&&c.push(e.geometry),e.material){const t=e.material;s.push(e.material);for(const e in t){const n=t[e];n&&n.isTexture&&(n.encoding=i.LinearEncoding,u.push(n))}}}),o.materials=s,o.geometry=c,o.textures=u,this.onLoadModel&&this.onLoadModel(e,t)})}disposeTile(e){const t=e.cached;if(t.scene){const n=t.materials,i=t.geometry,r=t.textures;for(let e=0,t=i.length;e<t;e++)i[e].dispose();for(let e=0,t=n.length;e<t;e++)n[e].dispose();for(let e=0,t=r.length;e<t;e++){r[e].dispose()}this.onDisposeModel&&this.onDisposeModel(t.scene,e),t.scene=null,t.materials=null,t.textures=null,t.geometry=null}e._loadIndex++}setTileVisible(e,t){const n=e.cached.scene,i=this.visibleTiles,r=this.group;t?(r.add(n),i.add(e),n.updateMatrixWorld(!0)):(r.remove(n),i.delete(e))}setTileActive(e,t){const n=this.activeTiles;t?n.add(e):n.delete(e)}calculateError(e){const t=e.cached,n=t.inFrustum,i=this.cameras,r=this.cameraInfo,o=e.boundingVolume;if("box"in o){const o=t.box,a=t.boxTransformInverse;let s=-1/0,l=1/0;for(let t=0,c=i.length;t<c;t++){if(!n[t])continue;const c=i[t],u=r[t],h=u.invScale;let d;if(Q.copy(u.position),Q.applyMatrix4(a),c.isOrthographicCamera){const t=u.pixelSize;d=e.geometricError/(t*h)}else{const t=o.distanceToPoint(Q)*h,n=u.sseDenominator;d=e.geometricError/(t*n),l=Math.min(l,t)}s=Math.max(s,d)}e.__distanceFromCamera=l,e.__error=s}else"sphere"in o?console.warn("ThreeTilesRenderer : Sphere bounds not supported."):"region"in o&&console.warn("ThreeTilesRenderer : Region bounds not supported.")}tileInView(e){const t=e.cached,n=t.sphere,i=t.inFrustum;if(n){const e=this.cameraInfo;let t=!1;for(let r=0,o=e.length;r<o;r++){e[r].frustum.intersectsSphere(n)?(t=!0,i[r]=!0):i[r]=!1}return t}return!0}}const re=new i.Vector3,oe=["x","y","z"];class ae extends i.LineSegments{constructor(e,t=16776960,n=40){const r=new i.BufferGeometry,o=[];for(let e=0;e<3;e++){const t=oe[e],i=oe[(e+1)%3];re.set(0,0,0);for(let e=0;e<n;e++){let r;r=2*Math.PI*e/(n-1),re[t]=Math.sin(r),re[i]=Math.cos(r),o.push(re.x,re.y,re.z),r=2*Math.PI*(e+1)/(n-1),re[t]=Math.sin(r),re[i]=Math.cos(r),o.push(re.x,re.y,re.z)}}r.setAttribute("position",new i.BufferAttribute(new Float32Array(o),3)),r.computeBoundingSphere(),super(r,new i.LineBasicMaterial({color:t,toneMapped:!1})),this.sphere=e,this.type="SphereHelper"}updateMatrixWorld(e){const t=this.sphere;this.position.copy(t.center),this.scale.setScalar(t.radius),super.updateMatrixWorld(e)}}const se=Symbol("ORIGINAL_MATERIAL"),le=Symbol("HAS_RANDOM_COLOR");function ce(){}const ue=0,he=1,de=2,fe=3,pe=4,me=5,ve=6,ge=7;class ye extends ie{constructor(...e){super(...e);const t=this.group,n=new i.Group;t.add(n);const r=new i.Group;t.add(r),this.displayBoxBounds=!1,this.displaySphereBounds=!1,this.colorMode=ue,this.boxGroup=n,this.sphereGroup=r,this.maxDebugDepth=-1,this.maxDebugDistance=-1,this.maxDebugError=-1,this.extremeDebugDepth=-1,this.extremeDebugError=-1}initExtremes(){let e=-1;this.traverse(t=>{e=Math.max(e,t.__depth)});let t=-1;this.traverse(e=>{t=Math.max(t,e.geometricError)}),this.extremeDebugDepth=e,this.extremeDebugError=t}fetchTileSet(...e){const t=super.fetchTileSet(...e);return t.then(()=>{Promise.resolve().then(()=>{this.initExtremes()})}).catch(()=>{}),t}getTileInformationFromActiveObject(e){let t=null;return this.activeTiles.forEach(n=>{if(t)return!0;const i=n.cached.scene;i&&i.traverse(i=>{i===e&&(t=n)})}),t?{distanceToCamera:t.__distanceFromCamera,geometricError:t.geometricError,screenSpaceError:t.__error,depth:t.__depth,isLeaf:t.__isLeaf}:null}update(){if(super.update(),!this.root)return;this.boxGroup.visible=this.displayBoxBounds,this.sphereGroup.visible=this.displaySphereBounds;let e=-1;e=-1===this.maxDebugDepth?this.extremeDebugDepth:this.maxDebugDepth;let t=-1;t=-1===this.maxDebugError?this.extremeDebugError:this.maxDebugError;let n=-1;n=-1===this.maxDebugDistance?this.root.cached.sphere.radius:this.maxDebugDistance;const r=this.errorTarget,o=this.colorMode;this.visibleTiles.forEach(a=>{const s=a.cached.scene;let l,c,u;o===ge&&(l=Math.random(),c=.5+.5*Math.random(),u=.375+.25*Math.random()),s.traverse(s=>{const h=s.material;if(h){const d=s[se];if(o===ue&&h!==d)s.material.dispose(),s.material=s[se];else if(o!==ue&&h===d)if(s.isPoints){const e=new i.PointsMaterial;e.size=d.size,e.sizeAttenuation=d.sizeAttenuation,s.material=e}else s.material=new i.MeshBasicMaterial;switch(o!==ge&&delete s.material[le],o){case pe:{const t=a.__depth/e;s.material.color.setRGB(t,t,t);break}case me:{const t=a.__depthFromRenderedParent/e;s.material.color.setRGB(t,t,t);break}case he:{const e=a.__error/r;e>1?s.material.color.setRGB(1,0,0):s.material.color.setRGB(e,e,e);break}case de:{const e=Math.min(a.geometricError/t,1);s.material.color.setRGB(e,e,e);break}case fe:{const e=Math.min(a.__distanceFromCamera/n,1);s.material.color.setRGB(e,e,e);break}case ve:a.children&&0!==a.children.length?s.material.color.set(0):s.material.color.set(16777215);break;case ge:s.material[le]||(s.material.color.setHSL(l,c,u),s.material[le]=!0)}}})})}setTileVisible(e,t){super.setTileVisible(e,t);const n=e.cached,i=this.sphereGroup,r=this.boxGroup,o=n.boxHelperGroup,a=n.sphereHelper;t?(r.add(o),o.updateMatrixWorld(!0),i.add(a),a.updateMatrixWorld(!0)):(r.remove(o),i.remove(a))}parseTile(e,t,n){return super.parseTile(e,t,n).then(()=>{const e=t.cached,n=e.scene;if(n){const r=e.box,o=e.boxTransform,a=new i.Group;a.matrix.copy(o),a.matrixAutoUpdate=!1;const s=new i.Box3Helper(r);s.raycast=ce,a.add(s),e.boxHelperGroup=a,this.visibleTiles.has(t)&&this.displayBoxBounds&&(this.boxGroup.add(a),a.updateMatrixWorld(!0));const l=e.sphere,c=new ae(l);c.raycast=ce,e.sphereHelper=c,this.visibleTiles.has(t)&&this.displaySphereBounds&&(this.sphereGroup.add(c),c.updateMatrixWorld(!0)),n.traverse(e=>{const t=e.material;t&&(e[se]=t)})}})}disposeTile(e){super.disposeTile(e);const t=e.cached;t.boxHelperGroup&&(t.boxHelperGroup.children[0].geometry.dispose(),t.sphereHelper.geometry.dispose(),delete t.boxHelperGroup,delete t.sphereHelper)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"HeuristicFragmentMatcher",(function(){return G})),n.d(t,"InMemoryCache",(function(){return ce})),n.d(t,"IntrospectionFragmentMatcher",(function(){return H})),n.d(t,"ObjectCache",(function(){return J})),n.d(t,"StoreReader",(function(){return $})),n.d(t,"StoreWriter",(function(){return ne})),n.d(t,"WriteError",(function(){return ee})),n.d(t,"assertIdValue",(function(){return K})),n.d(t,"defaultDataIdFromObject",(function(){return ae})),n.d(t,"defaultNormalizedCacheFactory",(function(){return Z})),n.d(t,"enhanceErrorWithDocument",(function(){return te}));var i=n(4),r=n(6);function o(e){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:a(e)}]}}function a(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return null;if(Array.isArray(e))return a(e[0]);var t=[];return Object.keys(e).forEach((function(n){var i={kind:"Field",name:{kind:"Name",value:n},selectionSet:a(e[n])||void 0};t.push(i)})),{kind:"SelectionSet",selections:t}}var s,l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},c=function(){function e(){}return e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.read({query:e.query,variables:e.variables,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.read({query:Object(r.getFragmentQueryDocument)(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:t})},e.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},e.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Object(r.getFragmentQueryDocument)(e.fragment,e.fragmentName)})},e.prototype.writeData=function(e){var t,n,i=e.id,r=e.data;if(void 0!==i){var s=null;try{s=this.read({rootId:i,optimistic:!1,query:l})}catch(e){}var c=s&&s.__typename||"__ClientData",u=Object.assign({__typename:c},r);this.writeFragment({id:i,fragment:(t=u,n=c,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:n||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:a(t)}]}),data:u})}else this.writeQuery({query:o(r),data:r})},e}();s||(s={});var u=n(53),h=null,d={},f=1,p=Array,m=p["@wry/context:Slot"]||function(){var e=function(){function e(){this.id=["slot",f++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=h;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===d)break;return e!==h&&(h.slots[this.id]=t),!0}return h&&(h.slots[this.id]=d),!1},e.prototype.getValue=function(){if(this.hasValue())return h.slots[this.id]},e.prototype.withValue=function(e,t,n,i){var r,o=((r={__proto__:null})[this.id]=e,r),a=h;h={parent:a,slots:o};try{return t.apply(i,n)}finally{h=a}},e.bind=function(e){var t=h;return function(){var n=h;try{return h=t,e.apply(this,arguments)}finally{h=n}}},e.noContext=function(e,t,n){if(!h)return e.apply(n,t);var i=h;try{return h=null,e.apply(n,t)}finally{h=i}},e}();try{Object.defineProperty(p,"@wry/context:Slot",{value:p["@wry/context:Slot"]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();m.bind,m.noContext;function v(){}var g=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=v),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getEntry(e);return t&&t.value},e.prototype.getEntry=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,i=t.newer;i&&(i.older=n),n&&(n.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t},e.prototype.set=function(e,t){var n=this.getEntry(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),y=new m,b=[],x=[];function w(e,t){if(!e)throw new Error(t||"assertion failure")}function _(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var S=function(){function e(t,n){this.fn=t,this.args=n,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++e.count}return e.prototype.recompute=function(){if(w(!this.recomputing,"already recomputing"),function(e){var t=y.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),T(e)?A(t,e):O(t,e),t}(this)||!k(this))return T(this)?function(e){var t=P(e);y.withValue(e,M,[e]),function(e){if("function"==typeof e.subscribe)try{I(e),e.unsubscribe=e.subscribe.apply(null,e.args)}catch(t){return e.setDirty(),!1}return!0}(e)&&function(e){if(e.dirty=!1,T(e))return;C(e)}(e);return t.forEach(k),_(e.value)}(this):_(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,E(this),I(this))},e.prototype.dispose=function(){var e=this;P(this).forEach(k),I(this),this.parents.forEach((function(t){t.setDirty(),D(t,e)}))},e.count=0,e}();function M(e){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,e.args)}catch(t){e.value[1]=t}e.recomputing=!1}function T(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function E(e){e.parents.forEach((function(t){return A(t,e)}))}function C(e){e.parents.forEach((function(t){return O(t,e)}))}function A(e,t){if(w(e.childValues.has(t)),w(T(t)),e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=x.pop()||new Set;e.dirtyChildren.add(t),E(e)}function O(e,t){w(e.childValues.has(t)),w(!T(t));var n,i,r,o=e.childValues.get(t);0===o.length?e.childValues.set(t,t.value.slice(0)):(n=o,i=t.value,(r=n.length)>0&&r===i.length&&n[r-1]===i[r-1]||e.setDirty()),L(e,t),T(e)||C(e)}function L(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(x.length<100&&x.push(n),e.dirtyChildren=null))}function k(e){return 0===e.parents.size&&"function"==typeof e.reportOrphan&&!0===e.reportOrphan()}function P(e){var t=b;return e.childValues.size>0&&(t=[],e.childValues.forEach((function(n,i){D(e,i),t.push(i)}))),w(null===e.dirtyChildren),t}function D(e,t){t.parents.delete(e),e.childValues.delete(t),L(e,t)}function I(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var N=function(){function e(e){this.weakness=e}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return e.forEach((function(e){return t=t.getChildTrie(e)})),t.data||(t.data=Object.create(null))},e.prototype.getChildTrie=function(t){var n=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=n.get(t);return i||n.set(t,i=new e(this.weakness)),i},e}();var F=new N("function"==typeof WeakMap);function R(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return F.lookupArray(e)}var B=new Set;function j(e,t){void 0===t&&(t=Object.create(null));var n=new g(t.max||Math.pow(2,16),(function(e){return e.dispose()})),i=!!t.disposable,r=t.makeCacheKey||R;function o(){if(!i||y.hasValue()){var o=r.apply(null,arguments);if(void 0===o)return e.apply(null,arguments);var a=Array.prototype.slice.call(arguments),s=n.get(o);s?s.args=a:(s=new S(e,a),n.set(o,s),s.subscribe=t.subscribe,i&&(s.reportOrphan=function(){return n.delete(o)}));var l=s.recompute();return n.set(o,s),B.add(n),y.hasValue()||(B.forEach((function(e){return e.clean()})),B.clear()),i?void 0:l}}return o.dirty=function(){var e=r.apply(null,arguments),t=void 0!==e&&n.get(e);t&&t.setDirty()},o}var z=n(7),U=!1;function V(){var e=!U;return Object(r.isTest)()||(U=!0),e}var G=function(){function e(){}return e.prototype.ensureReady=function(){return Promise.resolve()},e.prototype.canBypassInit=function(){return!0},e.prototype.match=function(e,t,n){var i=n.store.get(e.id),r="ROOT_QUERY"===e.id;if(!i)return r;var o=i.__typename,a=void 0===o?r&&"Query":o;return a&&a===t||(V(),"heuristic")},e}(),H=function(){function e(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return e.prototype.match=function(e,t,n){Object(z.b)(this.isReady,1);var i=n.store.get(e.id),r="ROOT_QUERY"===e.id;if(!i)return r;var o=i.__typename,a=void 0===o?r&&"Query":o;if(Object(z.b)(a,2),a===t)return!0;var s=this.possibleTypesMap[t];return!!(a&&s&&s.indexOf(a)>-1)},e.prototype.parseIntrospectionResult=function(e){var t={};return e.__schema.types.forEach((function(e){"UNION"!==e.kind&&"INTERFACE"!==e.kind||(t[e.name]=e.possibleTypes.map((function(e){return e.name})))})),t},e}(),W=Object.prototype.hasOwnProperty,q=function(){function e(e){var t=this;void 0===e&&(e=Object.create(null)),this.data=e,this.depend=j((function(e){return t.data[e]}),{disposable:!0,makeCacheKey:function(e){return e}})}return e.prototype.toObject=function(){return this.data},e.prototype.get=function(e){return this.depend(e),this.data[e]},e.prototype.set=function(e,t){t!==this.data[e]&&(this.data[e]=t,this.depend.dirty(e))},e.prototype.delete=function(e){W.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},e.prototype.clear=function(){this.replace(null)},e.prototype.replace=function(e){var t=this;e?(Object.keys(e).forEach((function(n){t.set(n,e[n])})),Object.keys(this.data).forEach((function(n){W.call(e,n)||t.delete(n)}))):Object.keys(this.data).forEach((function(e){t.delete(e)}))},e}();function Y(e){return new q(e)}var $=function(){function e(e){var t=this,n=void 0===e?{}:e,i=n.cacheKeyRoot,o=void 0===i?new N(r.canUseWeakMap):i,a=n.freezeResults,s=void 0!==a&&a,l=this.executeStoreQuery,c=this.executeSelectionSet,u=this.executeSubSelectedArray;this.freezeResults=s,this.executeStoreQuery=j((function(e){return l.call(t,e)}),{makeCacheKey:function(e){var t=e.query,n=e.rootValue,i=e.contextValue,r=e.variableValues,a=e.fragmentMatcher;if(i.store instanceof q)return o.lookup(i.store,t,a,JSON.stringify(r),n.id)}}),this.executeSelectionSet=j((function(e){return c.call(t,e)}),{makeCacheKey:function(e){var t=e.selectionSet,n=e.rootValue,i=e.execContext;if(i.contextValue.store instanceof q)return o.lookup(i.contextValue.store,t,i.fragmentMatcher,JSON.stringify(i.variableValues),n.id)}}),this.executeSubSelectedArray=j((function(e){return u.call(t,e)}),{makeCacheKey:function(e){var t=e.field,n=e.array,i=e.execContext;if(i.contextValue.store instanceof q)return o.lookup(i.contextValue.store,t,n,JSON.stringify(i.variableValues))}})}return e.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(Object(i.a)(Object(i.a)({},e),{returnPartialData:!1})).result},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,i=e.variables,o=e.previousResult,a=e.returnPartialData,s=void 0===a||a,l=e.rootId,c=void 0===l?"ROOT_QUERY":l,h=e.fragmentMatcherFunction,d=e.config,f=Object(r.getQueryDefinition)(n);i=Object(r.assign)({},Object(r.getDefaultValues)(f),i);var p={store:t,dataIdFromObject:d&&d.dataIdFromObject,cacheRedirects:d&&d.cacheRedirects||{}},m=this.executeStoreQuery({query:n,rootValue:{type:"id",id:c,generated:!0,typename:"Query"},contextValue:p,variableValues:i,fragmentMatcher:h}),v=m.missing&&m.missing.length>0;return v&&!s&&m.missing.forEach((function(e){if(!e.tolerable)throw new z.a(8)})),o&&Object(u.a)(o,m.result)&&(m.result=o),{result:m.result,complete:!v}},e.prototype.executeStoreQuery=function(e){var t=e.query,n=e.rootValue,i=e.contextValue,o=e.variableValues,a=e.fragmentMatcher,s=void 0===a?Q:a,l=Object(r.getMainDefinition)(t),c=Object(r.getFragmentDefinitions)(t),u={query:t,fragmentMap:Object(r.createFragmentMap)(c),contextValue:i,variableValues:o,fragmentMatcher:s};return this.executeSelectionSet({selectionSet:l.selectionSet,rootValue:n,execContext:u})},e.prototype.executeSelectionSet=function(e){var t=this,n=e.selectionSet,o=e.rootValue,a=e.execContext,s=a.fragmentMap,l=a.contextValue,c=a.variableValues,u={result:null},h=[],d=l.store.get(o.id),f=d&&d.__typename||"ROOT_QUERY"===o.id&&"Query"||void 0;function p(e){var t;return e.missing&&(u.missing=u.missing||[],(t=u.missing).push.apply(t,e.missing)),e.result}return n.selections.forEach((function(e){var n;if(Object(r.shouldInclude)(e,c))if(Object(r.isField)(e)){var u=p(t.executeField(d,f,e,a));void 0!==u&&h.push(((n={})[Object(r.resultKeyNameFromField)(e)]=u,n))}else{var m=void 0;if(Object(r.isInlineFragment)(e))m=e;else if(!(m=s[e.name.value]))throw new z.a(9);var v=m.typeCondition&&m.typeCondition.name.value,g=!v||a.fragmentMatcher(o,v,l);if(g){var y=t.executeSelectionSet({selectionSet:m.selectionSet,rootValue:o,execContext:a});"heuristic"===g&&y.missing&&(y=Object(i.a)(Object(i.a)({},y),{missing:y.missing.map((function(e){return Object(i.a)(Object(i.a)({},e),{tolerable:!0})}))})),h.push(p(y))}}})),u.result=Object(r.mergeDeepArray)(h),this.freezeResults,u},e.prototype.executeField=function(e,t,n,i){var o=i.variableValues,a=i.contextValue,s=function(e,t,n,i,o,a){a.resultKey;var s=a.directives,l=n;(i||s)&&(l=Object(r.getStoreKeyName)(l,i,s));var c=void 0;if(e&&void 0===(c=e[l])&&o.cacheRedirects&&"string"==typeof t){var u=o.cacheRedirects[t];if(u){var h=u[n];h&&(c=h(e,i,{getCacheKey:function(e){var t=o.dataIdFromObject(e);return t&&Object(r.toIdValue)({id:t,typename:e.__typename})}}))}}if(void 0===c)return{result:c,missing:[{object:e,fieldName:l,tolerable:!1}]};Object(r.isJsonValue)(c)&&(c=c.json);return{result:c}}(e,t,n.name.value,Object(r.argumentsObjectFromField)(n,o),a,{resultKey:Object(r.resultKeyNameFromField)(n),directives:Object(r.getDirectiveInfoFromField)(n,o)});return Array.isArray(s.result)?this.combineExecResults(s,this.executeSubSelectedArray({field:n,array:s.result,execContext:i})):n.selectionSet?null==s.result?s:this.combineExecResults(s,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:s.result,execContext:i})):(X(n,s.result),this.freezeResults,s)},e.prototype.combineExecResults=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach((function(t){t.missing&&(e=e||[]).push.apply(e,t.missing)})),{result:t.pop().result,missing:e}},e.prototype.executeSubSelectedArray=function(e){var t,n=this,i=e.field,r=e.array,o=e.execContext;function a(e){return e.missing&&(t=t||[]).push.apply(t,e.missing),e.result}return r=r.map((function(e){return null===e?null:Array.isArray(e)?a(n.executeSubSelectedArray({field:i,array:e,execContext:o})):i.selectionSet?a(n.executeSelectionSet({selectionSet:i.selectionSet,rootValue:e,execContext:o})):(X(i,e),e)})),this.freezeResults,{result:r,missing:t}},e}();function X(e,t){if(!e.selectionSet&&Object(r.isIdValue)(t))throw new z.a(10)}function Q(){return!0}function K(e){Object(z.b)(Object(r.isIdValue)(e),11)}var J=function(){function e(e){void 0===e&&(e=Object.create(null)),this.data=e}return e.prototype.toObject=function(){return this.data},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e.prototype.delete=function(e){this.data[e]=void 0},e.prototype.clear=function(){this.data=Object.create(null)},e.prototype.replace=function(e){this.data=e||Object.create(null)},e}();function Z(e){return new J(e)}var ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="WriteError",t}return Object(i.c)(t,e),t}(Error);function te(e,t){var n=new ee("Error writing result to store for query:\n "+JSON.stringify(t));return n.message+="\n"+e.message,n.stack=e.stack,n}var ne=function(){function e(){}return e.prototype.writeQueryToStore=function(e){var t=e.query,n=e.result,i=e.store,r=void 0===i?Y():i,o=e.variables,a=e.dataIdFromObject,s=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:t,store:r,variables:o,dataIdFromObject:a,fragmentMatcherFunction:s})},e.prototype.writeResultToStore=function(e){var t=e.dataId,n=e.result,i=e.document,o=e.store,a=void 0===o?Y():o,s=e.variables,l=e.dataIdFromObject,c=e.fragmentMatcherFunction,u=Object(r.getOperationDefinition)(i);try{return this.writeSelectionSetToStore({result:n,dataId:t,selectionSet:u.selectionSet,context:{store:a,processedData:{},variables:Object(r.assign)({},Object(r.getDefaultValues)(u),s),dataIdFromObject:l,fragmentMap:Object(r.createFragmentMap)(Object(r.getFragmentDefinitions)(i)),fragmentMatcherFunction:c}})}catch(e){throw te(e,i)}},e.prototype.writeSelectionSetToStore=function(e){var t=this,n=e.result,i=e.dataId,o=e.selectionSet,a=e.context,s=a.variables,l=a.store,c=a.fragmentMap;return o.selections.forEach((function(e){var o;if(Object(r.shouldInclude)(e,s))if(Object(r.isField)(e)){var l=Object(r.resultKeyNameFromField)(e),u=n[l];if(void 0!==u)t.writeFieldToStore({dataId:i,value:u,field:e,context:a});else{var h=!1,d=!1;e.directives&&e.directives.length&&(h=e.directives.some((function(e){return e.name&&"defer"===e.name.value})),d=e.directives.some((function(e){return e.name&&"client"===e.name.value}))),!h&&!d&&a.fragmentMatcherFunction}}else{var f=void 0;Object(r.isInlineFragment)(e)?f=e:(f=(c||{})[e.name.value],Object(z.b)(f,3));var p=!0;if(a.fragmentMatcherFunction&&f.typeCondition){var m=i||"self",v=Object(r.toIdValue)({id:m,typename:void 0}),g={store:new J((o={},o[m]=n,o)),cacheRedirects:{}},y=a.fragmentMatcherFunction(v,f.typeCondition.name.value,g);Object(r.isProduction)(),p=!!y}p&&t.writeSelectionSetToStore({result:n,selectionSet:f.selectionSet,dataId:i,context:a})}})),l},e.prototype.writeFieldToStore=function(e){var t,n,o,a=e.field,s=e.value,l=e.dataId,c=e.context,h=c.variables,d=c.dataIdFromObject,f=c.store,p=Object(r.storeKeyNameFromField)(a,h);if(a.selectionSet&&null!==s)if(Array.isArray(s)){var m=l+"."+p;n=this.processArrayValue(s,m,a.selectionSet,c)}else{var v=l+"."+p,g=!0;if(ie(v)||(v="$"+v),d){var y=d(s);Object(z.b)(!y||!ie(y),4),(y||"number"==typeof y&&0===y)&&(v=y,g=!1)}re(v,a,c.processedData)||this.writeSelectionSetToStore({dataId:v,result:s,selectionSet:a.selectionSet,context:c});var b=s.__typename;n=Object(r.toIdValue)({id:v,typename:b},g);var x=(o=f.get(l))&&o[p];if(x!==n&&Object(r.isIdValue)(x)){var w=void 0!==x.typename,_=void 0!==b,S=w&&_&&x.typename!==b;Object(z.b)(!g||x.generated||S,5),Object(z.b)(!w||_,6),x.generated&&(S?g||f.delete(x.id):function e(t,n,o){if(t===n)return!1;var a=o.get(t),s=o.get(n),l=!1;Object.keys(a).forEach((function(t){var n=a[t],i=s[t];Object(r.isIdValue)(n)&&ie(n.id)&&Object(r.isIdValue)(i)&&!Object(u.a)(n,i)&&e(n.id,i.id,o)&&(l=!0)})),o.delete(t);var c=Object(i.a)(Object(i.a)({},a),s);if(Object(u.a)(c,s))return l;return o.set(n,c),!0}(x.id,n.id,f))}}else n=null!=s&&"object"==typeof s?{type:"json",json:s}:s;(o=f.get(l))&&Object(u.a)(n,o[p])||f.set(l,Object(i.a)(Object(i.a)({},o),((t={})[p]=n,t)))},e.prototype.processArrayValue=function(e,t,n,i){var o=this;return e.map((function(e,a){if(null===e)return null;var s=t+"."+a;if(Array.isArray(e))return o.processArrayValue(e,s,n,i);var l=!0;if(i.dataIdFromObject){var c=i.dataIdFromObject(e);c&&(s=c,l=!1)}return re(s,n,i.processedData)||o.writeSelectionSetToStore({dataId:s,result:e,selectionSet:n,context:i}),Object(r.toIdValue)({id:s,typename:e.__typename},l)}))},e}();function ie(e){return"$"===e[0]}function re(e,t,n){if(!n)return!1;if(n[e]){if(n[e].indexOf(t)>=0)return!0;n[e].push(t)}else n[e]=[t];return!1}var oe={fragmentMatcher:new G,dataIdFromObject:ae,addTypename:!0,resultCaching:!0,freezeResults:!1};function ae(e){if(e.__typename){if(void 0!==e.id)return e.__typename+":"+e.id;if(void 0!==e._id)return e.__typename+":"+e._id}return null}var se=Object.prototype.hasOwnProperty,le=function(e){function t(t,n,i){var r=e.call(this,Object.create(null))||this;return r.optimisticId=t,r.parent=n,r.transaction=i,r}return Object(i.c)(t,e),t.prototype.toObject=function(){return Object(i.a)(Object(i.a)({},this.parent.toObject()),this.data)},t.prototype.get=function(e){return se.call(this.data,e)?this.data[e]:this.parent.get(e)},t}(J),ce=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new N(r.canUseWeakMap),n.silenceBroadcast=!1,n.config=Object(i.a)(Object(i.a)({},oe),t),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new q:new J,n.optimisticData=n.data,n.storeWriter=new ne,n.storeReader=new $({cacheKeyRoot:n.cacheKeyRoot,freezeResults:t.freezeResults});var o=n,a=o.maybeBroadcastWatch;return n.maybeBroadcastWatch=j((function(e){return a.call(n,e)}),{makeCacheKey:function(e){if(!e.optimistic&&!e.previousResult)return o.data instanceof q?o.cacheKeyRoot.lookup(e.query,JSON.stringify(e.variables)):void 0}}),n}return Object(i.c)(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).toObject()},t.prototype.read=function(e){if("string"==typeof e.rootId&&void 0===this.data.get(e.rootId))return null;var t=this.config.fragmentMatcher,n=t&&t.match;return this.storeReader.readQueryFromStore({store:e.optimistic?this.optimisticData:this.data,query:this.transformDocument(e.query),variables:e.variables,rootId:e.rootId,fragmentMatcherFunction:n,previousResult:e.previousResult,config:this.config})||null},t.prototype.write=function(e){var t=this.config.fragmentMatcher,n=t&&t.match;this.storeWriter.writeResultToStore({dataId:e.dataId,result:e.result,variables:e.variables,document:this.transformDocument(e.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:n}),this.broadcastWatches()},t.prototype.diff=function(e){var t=this.config.fragmentMatcher,n=t&&t.match;return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,query:this.transformDocument(e.query),variables:e.variables,returnPartialData:e.returnPartialData,previousResult:e.previousResult,fragmentMatcherFunction:n,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.add(e),function(){t.watches.delete(e)}},t.prototype.evict=function(e){throw new z.a(7)},t.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){for(var t=[],n=0,i=this.optimisticData;i instanceof le;)i.optimisticId===e?++n:t.push(i),i=i.parent;if(n>0){for(this.optimisticData=i;t.length>0;){var r=t.pop();this.performTransaction(r.transaction,r.optimisticId)}this.broadcastWatches()}},t.prototype.performTransaction=function(e,t){var n=this.data,i=this.silenceBroadcast;this.silenceBroadcast=!0,"string"==typeof t&&(this.data=this.optimisticData=new le(t,this.optimisticData,e));try{e(this)}finally{this.silenceBroadcast=i,this.data=n}this.broadcastWatches()},t.prototype.recordOptimisticTransaction=function(e,t){return this.performTransaction(e,t)},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=Object(r.addTypenameToDocument)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(){var e=this;this.silenceBroadcast||this.watches.forEach((function(t){return e.maybeBroadcastWatch(t)}))},t.prototype.maybeBroadcastWatch=function(e){e.callback(this.diff({query:e.query,variables:e.variables,previousResult:e.previousResult&&e.previousResult(),optimistic:e.optimistic}))},t}(c)},function(e,t,n){"use strict";n.r(t),n.d(t,"UnrealBloomPass",(function(){return s}));var i=n(0),r=n(16),o=n(45),a={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new i.Color(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},s=function(e,t,n,s){r.Pass.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=s,this.resolution=void 0!==e?new i.Vector2(e.x,e.y):new i.Vector2(256,256),this.clearColor=new i.Color(0,0,0);var l={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var c=Math.round(this.resolution.x/2),u=Math.round(this.resolution.y/2);this.renderTargetBright=new i.WebGLRenderTarget(c,u,l),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var h=0;h<this.nMips;h++){var d=new i.WebGLRenderTarget(c,u,l);d.texture.name="UnrealBloomPass.h"+h,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d);var f=new i.WebGLRenderTarget(c,u,l);f.texture.name="UnrealBloomPass.v"+h,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),c=Math.round(c/2),u=Math.round(u/2)}void 0===a&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var p=a;this.highPassUniforms=i.UniformsUtils.clone(p.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new i.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var m=[3,5,7,9,11];for(c=Math.round(this.resolution.x/2),u=Math.round(this.resolution.y/2),h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(m[h])),this.separableBlurMaterials[h].uniforms.texSize.value=new i.Vector2(c,u),c=Math.round(c/2),u=Math.round(u/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===o.CopyShader&&console.error("UnrealBloomPass relies on CopyShader");var v=o.CopyShader;this.copyUniforms=i.UniformsUtils.clone(v.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new i.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,blending:i.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new i.Color,this.oldClearAlpha=1,this.basic=new i.MeshBasicMaterial,this.fsQuad=new r.Pass.FullScreenQuad(null)};s.prototype=Object.assign(Object.create(r.Pass.prototype),{constructor:s,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(n,r),this.renderTargetsVertical[o].setSize(n,r),this.separableBlurMaterials[o].uniforms.texSize.value=new i.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(e,t,n,i,r){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var a=this.renderTargetBright,l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=s.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=s.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new i.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new i.Vector2(.5,.5)},direction:{value:new i.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new i.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),s.BlurDirectionX=new i.Vector2(1,0),s.BlurDirectionY=new i.Vector2(0,1)},function(e,t,n){"use strict";n.r(t),n.d(t,"EffectComposer",(function(){return c})),n.d(t,"Pass",(function(){return u}));var i=n(0),r=n(45),o=n(105),a=n(16),s=function(e,t){a.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};s.prototype=Object.assign(Object.create(a.Pass.prototype),{constructor:s,render:function(e,t,n){var i,r,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(i=0,r=1):(i=1,r=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),a.buffers.stencil.setClear(r),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var l=function(){a.Pass.call(this),this.needsSwap=!1};l.prototype=Object.create(a.Pass.prototype),Object.assign(l.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var c=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat},a=e.getSize(new i.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=a.width,this._height=a.height,(t=new i.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===r.CopyShader&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.ShaderPass&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.ShaderPass(r.CopyShader),this.clock=new i.Clock};Object.assign(c.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,i=this.renderer.getRenderTarget(),r=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(t instanceof s?r=!0:t instanceof l&&(r=!1))}this.renderer.setRenderTarget(i)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new i.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var u=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(u.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),u.FullScreenQuad=function(){var e=new i.OrthographicCamera(-1,1,1,-1,0,1),t=new i.PlaneBufferGeometry(2,2),n=function(e){this._mesh=new i.Mesh(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}()},function(e,t,n){"use strict";n.r(t),n.d(t,"TAARenderPass",(function(){return s}));var i=n(0),r=n(16),o=n(45),a=function(e,t,n,a){r.Pass.call(this),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==n?n:0,this.clearAlpha=void 0!==a?a:0,void 0===o.CopyShader&&console.error("SSAARenderPass relies on CopyShader");var s=o.CopyShader;this.copyUniforms=i.UniformsUtils.clone(s.uniforms),this.copyMaterial=new i.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:i.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.fsQuad=new r.Pass.FullScreenQuad(this.copyMaterial)};a.prototype=Object.assign(Object.create(r.Pass.prototype),{constructor:a,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,t,n){this.sampleRenderTarget||(this.sampleRenderTarget=new i.WebGLRenderTarget(n.width,n.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var r=a.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],o=e.autoClear;e.autoClear=!1;var s=e.getClearColor().getHex(),l=e.getClearAlpha(),c=1/r.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var u=n.width,h=n.height,d=0;d<r.length;d++){var f=r[d];this.camera.setViewOffset&&this.camera.setViewOffset(u,h,.0625*f[0],.0625*f[1],u,h);var p=c;if(this.unbiased)p+=1/32*((d+.5)/r.length-.5);this.copyUniforms.opacity.value=p,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),0===d&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=o,e.setClearColor(s,l)}}),a.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];var s=function(e,t,n,i){void 0===a&&console.error("TAARenderPass relies on SSAARenderPass"),a.call(this,e,t,n,i),this.sampleLevel=0,this.accumulate=!1};s.JitterVectors=a.JitterVectors,s.prototype=Object.assign(Object.create(a.prototype),{constructor:s,render:function(e,t,n,r){if(!this.accumulate)return a.prototype.render.call(this,e,t,n,r),void(this.accumulateIndex=-1);var o=s.JitterVectors[5];this.sampleRenderTarget||(this.sampleRenderTarget=new i.WebGLRenderTarget(n.width,n.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),this.holdRenderTarget||(this.holdRenderTarget=new i.WebGLRenderTarget(n.width,n.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulate&&-1===this.accumulateIndex&&(a.prototype.render.call(this,e,this.holdRenderTarget,n,r),this.accumulateIndex=0);var l=e.autoClear;e.autoClear=!1;var c=1/o.length;if(this.accumulateIndex>=0&&this.accumulateIndex<o.length){this.copyUniforms.opacity.value=c,this.copyUniforms.tDiffuse.value=t.texture;for(var u=Math.pow(2,this.sampleLevel),h=0;h<u;h++){var d=o[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(n.width,n.height,.0625*d[0],.0625*d[1],n.width,n.height),e.setRenderTarget(t),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.sampleRenderTarget),0===this.accumulateIndex&&e.clear(),this.fsQuad.render(e),this.accumulateIndex++,this.accumulateIndex>=o.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}var f=this.accumulateIndex*c;f>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),f<1&&(this.copyUniforms.opacity.value=1-f,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,e.setRenderTarget(t),0===f&&e.clear(),this.fsQuad.render(e)),e.autoClear=l}})},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpLink",(function(){return d})),n.d(t,"createHttpLink",(function(){return h}));var i=n(4),r=n(34),o=n(23),a=n(140),s=n(7),l={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},c=function(e,t,n){var i=new Error(n);throw i.name="ServerError",i.response=e,i.statusCode=e.status,i.result=t,i},u=function(e,t){var n;try{n=JSON.stringify(e)}catch(e){var i=new s.a(2);throw i.parseError=e,i}return n},h=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,h=e.fetch,d=e.includeExtensions,f=e.useGETForQueries,p=Object(i.e)(e,["uri","fetch","includeExtensions","useGETForQueries"]);!function(e){if(!e&&"undefined"==typeof fetch){throw"undefined"==typeof window&&"node-fetch",new s.a(1)}}(h),h||(h=fetch);var m={http:{includeExtensions:d},options:p.fetchOptions,credentials:p.credentials,headers:p.headers};return new r.ApolloLink((function(e){var t=function(e,t){var n=e.getContext().uri;return n||("function"==typeof t?t(e):t||"/graphql")}(e,n),s=e.getContext(),d={};if(s.clientAwareness){var p=s.clientAwareness,v=p.name,g=p.version;v&&(d["apollographql-client-name"]=v),g&&(d["apollographql-client-version"]=g)}var y,b=Object(i.a)({},d,s.headers),x={http:s.http,options:s.fetchOptions,credentials:s.credentials,headers:b},w=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=Object(i.a)({},t.options,{headers:t.headers,credentials:t.credentials}),s=t.http;n.forEach((function(e){o=Object(i.a)({},o,e.options,{headers:Object(i.a)({},o.headers,e.headers)}),e.credentials&&(o.credentials=e.credentials),s=Object(i.a)({},s,e.http)}));var l=e.operationName,c=e.extensions,u=e.variables,h=e.query,d={operationName:l,variables:u};return s.includeExtensions&&(d.extensions=c),s.includeQuery&&(d.query=Object(a.print)(h)),{options:o,body:d}}(e,l,m,x),_=w.options,S=w.body;if(!_.signal){var M=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),T=M.controller,E=M.signal;(y=T)&&(_.signal=E)}if(f&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(_.method="GET"),"GET"===_.method){var C=function(e,t){var n=[],i=function(e,t){n.push(e+"="+encodeURIComponent(t))};"query"in t&&i("query",t.query);t.operationName&&i("operationName",t.operationName);if(t.variables){var r=void 0;try{r=u(t.variables)}catch(e){return{parseError:e}}i("variables",r)}if(t.extensions){var o=void 0;try{o=u(t.extensions)}catch(e){return{parseError:e}}i("extensions",o)}var a="",s=e,l=e.indexOf("#");-1!==l&&(a=e.substr(l),s=e.substr(0,l));var c=-1===s.indexOf("?")?"?":"&";return{newURI:s+c+n.join("&")+a}}(t,S),A=C.newURI,O=C.parseError;if(O)return Object(r.fromError)(O);t=A}else try{_.body=u(S)}catch(O){return Object(r.fromError)(O)}return new o.a((function(n){var i;return h(t,_).then((function(t){return e.setContext({response:t}),t})).then((i=e,function(e){return e.text().then((function(t){try{return JSON.parse(t)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,Promise.reject(n)}})).then((function(t){return e.status>=300&&c(e,t,"Response not successful: Received status code "+e.status),Array.isArray(t)||t.hasOwnProperty("data")||t.hasOwnProperty("errors")||c(e,t,"Server response was missing for query '"+(Array.isArray(i)?i.map((function(e){return e.operationName})):i.operationName)+"'."),t}))})).then((function(e){return n.next(e),n.complete(),e})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&n.next(e.result),n.error(e))})),function(){y&&y.abort()}}))}))};var d=function(e){function t(t){return e.call(this,h(t).request)||this}return Object(i.c)(t,e),t}(r.ApolloLink)}])}));